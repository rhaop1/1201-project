var kme=Object.defineProperty;var DU=t=>{throw TypeError(t)};var Rme=(t,e,r)=>e in t?kme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Oe=(t,e,r)=>Rme(t,typeof e!="symbol"?e+"":e,r),$O=(t,e,r)=>e.has(t)||DU("Cannot "+r);var g=(t,e,r)=>($O(t,e,"read from private field"),r?r.call(t):e.get(t)),$=(t,e,r)=>e.has(t)?DU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),R=(t,e,r,n)=>($O(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),W=(t,e,r)=>($O(t,e,"access private method"),r);var ri=(t,e,r,n)=>({set _(i){R(t,e,i,r)},get _(){return g(t,e,n)}});function Fme(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lme(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var HQ={exports:{}},JP={},WQ={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=Symbol.for("react.element"),Bme=Symbol.for("react.portal"),$me=Symbol.for("react.fragment"),jme=Symbol.for("react.strict_mode"),Vme=Symbol.for("react.profiler"),Ume=Symbol.for("react.provider"),zme=Symbol.for("react.context"),qme=Symbol.for("react.forward_ref"),Hme=Symbol.for("react.suspense"),Wme=Symbol.for("react.memo"),Gme=Symbol.for("react.lazy"),NU=Symbol.iterator;function Kme(t){return t===null||typeof t!="object"?null:(t=NU&&t[NU]||t["@@iterator"],typeof t=="function"?t:null)}var GQ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KQ=Object.assign,XQ={};function C1(t,e,r){this.props=t,this.context=e,this.refs=XQ,this.updater=r||GQ}C1.prototype.isReactComponent={};C1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};C1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YQ(){}YQ.prototype=C1.prototype;function E4(t,e,r){this.props=t,this.context=e,this.refs=XQ,this.updater=r||GQ}var S4=E4.prototype=new YQ;S4.constructor=E4;KQ(S4,C1.prototype);S4.isPureReactComponent=!0;var PU=Array.isArray,QQ=Object.prototype.hasOwnProperty,C4={current:null},ZQ={key:!0,ref:!0,__self:!0,__source:!0};function JQ(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)QQ.call(e,n)&&!ZQ.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:QE,type:t,key:a,ref:s,props:i,_owner:C4.current}}function Xme(t,e){return{$$typeof:QE,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T4(t){return typeof t=="object"&&t!==null&&t.$$typeof===QE}function Yme(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var MU=/\/+/g;function jO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yme(""+t.key):e.toString(36)}function qT(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case QE:case Bme:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+jO(s,0):n,PU(i)?(r="",t!=null&&(r=t.replace(MU,"$&/")+"/"),qT(i,e,r,"",function(u){return u})):i!=null&&(T4(i)&&(i=Xme(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(MU,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",PU(t))for(var o=0;o<t.length;o++){a=t[o];var l=n+jO(a,o);s+=qT(a,e,r,l,i)}else if(l=Kme(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=n+jO(a,o++),s+=qT(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function CC(t,e,r){if(t==null)return t;var n=[],i=0;return qT(t,n,"","",function(a){return e.call(r,a,i++)}),n}function Qme(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hs={current:null},HT={transition:null},Zme={ReactCurrentDispatcher:hs,ReactCurrentBatchConfig:HT,ReactCurrentOwner:C4};function eZ(){throw Error("act(...) is not supported in production builds of React.")}Ht.Children={map:CC,forEach:function(t,e,r){CC(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return CC(t,function(){e++}),e},toArray:function(t){return CC(t,function(e){return e})||[]},only:function(t){if(!T4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=C1;Ht.Fragment=$me;Ht.Profiler=Vme;Ht.PureComponent=E4;Ht.StrictMode=jme;Ht.Suspense=Hme;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zme;Ht.act=eZ;Ht.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=KQ({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=C4.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)QQ.call(e,l)&&!ZQ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:QE,type:t.type,key:i,ref:a,props:n,_owner:s}};Ht.createContext=function(t){return t={$$typeof:zme,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ume,_context:t},t.Consumer=t};Ht.createElement=JQ;Ht.createFactory=function(t){var e=JQ.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:qme,render:t}};Ht.isValidElement=T4;Ht.lazy=function(t){return{$$typeof:Gme,_payload:{_status:-1,_result:t},_init:Qme}};Ht.memo=function(t,e){return{$$typeof:Wme,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=HT.transition;HT.transition={};try{t()}finally{HT.transition=e}};Ht.unstable_act=eZ;Ht.useCallback=function(t,e){return hs.current.useCallback(t,e)};Ht.useContext=function(t){return hs.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return hs.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return hs.current.useEffect(t,e)};Ht.useId=function(){return hs.current.useId()};Ht.useImperativeHandle=function(t,e,r){return hs.current.useImperativeHandle(t,e,r)};Ht.useInsertionEffect=function(t,e){return hs.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return hs.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return hs.current.useMemo(t,e)};Ht.useReducer=function(t,e,r){return hs.current.useReducer(t,e,r)};Ht.useRef=function(t){return hs.current.useRef(t)};Ht.useState=function(t){return hs.current.useState(t)};Ht.useSyncExternalStore=function(t,e,r){return hs.current.useSyncExternalStore(t,e,r)};Ht.useTransition=function(){return hs.current.useTransition()};Ht.version="18.3.1";WQ.exports=Ht;var O=WQ.exports;const tZ=Sl(O),rZ=Fme({__proto__:null,default:tZ},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jme=O,ege=Symbol.for("react.element"),tge=Symbol.for("react.fragment"),rge=Object.prototype.hasOwnProperty,nge=Jme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ige={key:!0,ref:!0,__self:!0,__source:!0};function nZ(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)rge.call(e,n)&&!ige.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:ege,type:t,key:a,ref:s,props:i,_owner:nge.current}}JP.Fragment=tge;JP.jsx=nZ;JP.jsxs=nZ;HQ.exports=JP;var I=HQ.exports,FR={},iZ={exports:{}},Do={},aZ={exports:{}},sZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,H){var te=q.length;q.push(H);e:for(;0<te;){var ue=te-1>>>1,re=q[ue];if(0<i(re,H))q[ue]=H,q[te]=re,te=ue;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var H=q[0],te=q.pop();if(te!==H){q[0]=te;e:for(var ue=0,re=q.length,L=re>>>1;ue<L;){var ie=2*(ue+1)-1,X=q[ie],pe=ie+1,de=q[pe];if(0>i(X,te))pe<re&&0>i(de,X)?(q[ue]=de,q[pe]=te,ue=pe):(q[ue]=X,q[ie]=te,ue=ie);else if(pe<re&&0>i(de,te))q[ue]=de,q[pe]=te,ue=pe;else break e}}return H}function i(q,H){var te=q.sortIndex-H.sortIndex;return te!==0?te:q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=q)n(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(u)}}function A(q){if(m=!1,b(q),!p)if(r(l)!==null)p=!0,k(x);else{var H=r(u);H!==null&&V(A,H.startTime-q)}}function x(q,H){p=!1,m&&(m=!1,y(E),E=-1),d=!0;var te=h;try{for(b(H),f=r(l);f!==null&&(!(f.expirationTime>H)||q&&!N());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,h=f.priorityLevel;var re=ue(f.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?f.callback=re:f===r(l)&&n(l),b(H)}else n(l);f=r(l)}if(f!==null)var L=!0;else{var ie=r(u);ie!==null&&V(A,ie.startTime-H),L=!1}return L}finally{f=null,h=te,d=!1}}var _=!1,S=null,E=-1,T=5,D=-1;function N(){return!(t.unstable_now()-D<T)}function P(){if(S!==null){var q=t.unstable_now();D=q;var H=!0;try{H=S(!0,q)}finally{H?M():(_=!1,S=null)}}else _=!1}var M;if(typeof w=="function")M=function(){w(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,K=j.port2;j.port1.onmessage=P,M=function(){K.postMessage(null)}}else M=function(){v(P,0)};function k(q){S=q,_||(_=!0,M())}function V(q,H){E=v(function(){q(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,k(x))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(q){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var te=h;h=H;try{return q()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=h;h=q;try{return H()}finally{h=te}},t.unstable_scheduleCallback=function(q,H,te){var ue=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=te+re,q={id:c++,callback:H,priorityLevel:q,startTime:te,expirationTime:re,sortIndex:-1},te>ue?(q.sortIndex=te,e(u,q),r(l)===null&&q===r(u)&&(m?(y(E),E=-1):m=!0,V(A,te-ue))):(q.sortIndex=re,e(l,q),p||d||(p=!0,k(x))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var H=h;return function(){var te=h;h=H;try{return q.apply(this,arguments)}finally{h=te}}}})(sZ);aZ.exports=sZ;var age=aZ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sge=O,Eo=age;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oZ=new Set,eA={};function Pv(t,e){Wb(t,e),Wb(t+"Capture",e)}function Wb(t,e){for(eA[t]=e,t=0;t<e.length;t++)oZ.add(e[t])}var Hf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LR=Object.prototype.hasOwnProperty,oge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IU={},OU={};function lge(t){return LR.call(OU,t)?!0:LR.call(IU,t)?!1:oge.test(t)?OU[t]=!0:(IU[t]=!0,!1)}function uge(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cge(t,e,r,n){if(e===null||typeof e>"u"||uge(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ds(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var pa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pa[t]=new ds(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pa[e]=new ds(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pa[t]=new ds(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pa[t]=new ds(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pa[t]=new ds(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pa[t]=new ds(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pa[t]=new ds(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pa[t]=new ds(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pa[t]=new ds(t,5,!1,t.toLowerCase(),null,!1,!1)});var D4=/[\-:]([a-z])/g;function N4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D4,N4);pa[e]=new ds(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D4,N4);pa[e]=new ds(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D4,N4);pa[e]=new ds(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pa[t]=new ds(t,1,!1,t.toLowerCase(),null,!1,!1)});pa.xlinkHref=new ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pa[t]=new ds(t,1,!1,t.toLowerCase(),null,!0,!0)});function P4(t,e,r,n){var i=pa.hasOwnProperty(e)?pa[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cge(e,r,i,n)&&(r=null),n||i===null?lge(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var hh=sge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,TC=Symbol.for("react.element"),Dy=Symbol.for("react.portal"),Ny=Symbol.for("react.fragment"),M4=Symbol.for("react.strict_mode"),BR=Symbol.for("react.profiler"),lZ=Symbol.for("react.provider"),uZ=Symbol.for("react.context"),I4=Symbol.for("react.forward_ref"),$R=Symbol.for("react.suspense"),jR=Symbol.for("react.suspense_list"),O4=Symbol.for("react.memo"),Rh=Symbol.for("react.lazy"),cZ=Symbol.for("react.offscreen"),kU=Symbol.iterator;function _w(t){return t===null||typeof t!="object"?null:(t=kU&&t[kU]||t["@@iterator"],typeof t=="function"?t:null)}var vn=Object.assign,VO;function Gw(t){if(VO===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);VO=e&&e[1]||""}return`
`+VO+t}var UO=!1;function zO(t,e){if(!t||UO)return"";UO=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{UO=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gw(t):""}function fge(t){switch(t.tag){case 5:return Gw(t.type);case 16:return Gw("Lazy");case 13:return Gw("Suspense");case 19:return Gw("SuspenseList");case 0:case 2:case 15:return t=zO(t.type,!1),t;case 11:return t=zO(t.type.render,!1),t;case 1:return t=zO(t.type,!0),t;default:return""}}function VR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ny:return"Fragment";case Dy:return"Portal";case BR:return"Profiler";case M4:return"StrictMode";case $R:return"Suspense";case jR:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uZ:return(t.displayName||"Context")+".Consumer";case lZ:return(t._context.displayName||"Context")+".Provider";case I4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O4:return e=t.displayName||null,e!==null?e:VR(t.type)||"Memo";case Rh:e=t._payload,t=t._init;try{return VR(t(e))}catch{}}return null}function hge(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VR(e);case 8:return e===M4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lp(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fZ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dge(t){var e=fZ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function DC(t){t._valueTracker||(t._valueTracker=dge(t))}function hZ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=fZ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function sN(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function UR(t,e){var r=e.checked;return vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function RU(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=lp(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dZ(t,e){e=e.checked,e!=null&&P4(t,"checked",e,!1)}function zR(t,e){dZ(t,e);var r=lp(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qR(t,e.type,r):e.hasOwnProperty("defaultValue")&&qR(t,e.type,lp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FU(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qR(t,e,r){(e!=="number"||sN(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Kw=Array.isArray;function n0(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+lp(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function HR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return vn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function LU(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Fe(92));if(Kw(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:lp(r)}}function pZ(t,e){var r=lp(e.value),n=lp(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function BU(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mZ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mZ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var NC,gZ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(NC=NC||document.createElement("div"),NC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=NC.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tA(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Px={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pge=["Webkit","ms","Moz","O"];Object.keys(Px).forEach(function(t){pge.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Px[e]=Px[t]})});function vZ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Px.hasOwnProperty(t)&&Px[t]?(""+e).trim():e+"px"}function yZ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=vZ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var mge=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GR(t,e){if(e){if(mge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function KR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XR=null;function k4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YR=null,i0=null,a0=null;function $U(t){if(t=eS(t)){if(typeof YR!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=iM(e),YR(t.stateNode,t.type,e))}}function bZ(t){i0?a0?a0.push(t):a0=[t]:i0=t}function wZ(){if(i0){var t=i0,e=a0;if(a0=i0=null,$U(t),e)for(t=0;t<e.length;t++)$U(e[t])}}function xZ(t,e){return t(e)}function AZ(){}var qO=!1;function _Z(t,e,r){if(qO)return t(e,r);qO=!0;try{return xZ(t,e,r)}finally{qO=!1,(i0!==null||a0!==null)&&(AZ(),wZ())}}function rA(t,e){var r=t.stateNode;if(r===null)return null;var n=iM(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,e,typeof r));return r}var QR=!1;if(Hf)try{var Ew={};Object.defineProperty(Ew,"passive",{get:function(){QR=!0}}),window.addEventListener("test",Ew,Ew),window.removeEventListener("test",Ew,Ew)}catch{QR=!1}function gge(t,e,r,n,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var Mx=!1,oN=null,lN=!1,ZR=null,vge={onError:function(t){Mx=!0,oN=t}};function yge(t,e,r,n,i,a,s,o,l){Mx=!1,oN=null,gge.apply(vge,arguments)}function bge(t,e,r,n,i,a,s,o,l){if(yge.apply(this,arguments),Mx){if(Mx){var u=oN;Mx=!1,oN=null}else throw Error(Fe(198));lN||(lN=!0,ZR=u)}}function Mv(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function EZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jU(t){if(Mv(t)!==t)throw Error(Fe(188))}function wge(t){var e=t.alternate;if(!e){if(e=Mv(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return jU(i),t;if(a===n)return jU(i),e;a=a.sibling}throw Error(Fe(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(Fe(189))}}if(r.alternate!==n)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:e}function SZ(t){return t=wge(t),t!==null?CZ(t):null}function CZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CZ(t);if(e!==null)return e;t=t.sibling}return null}var TZ=Eo.unstable_scheduleCallback,VU=Eo.unstable_cancelCallback,xge=Eo.unstable_shouldYield,Age=Eo.unstable_requestPaint,$n=Eo.unstable_now,_ge=Eo.unstable_getCurrentPriorityLevel,R4=Eo.unstable_ImmediatePriority,DZ=Eo.unstable_UserBlockingPriority,uN=Eo.unstable_NormalPriority,Ege=Eo.unstable_LowPriority,NZ=Eo.unstable_IdlePriority,eM=null,ac=null;function Sge(t){if(ac&&typeof ac.onCommitFiberRoot=="function")try{ac.onCommitFiberRoot(eM,t,void 0,(t.current.flags&128)===128)}catch{}}var iu=Math.clz32?Math.clz32:Dge,Cge=Math.log,Tge=Math.LN2;function Dge(t){return t>>>=0,t===0?32:31-(Cge(t)/Tge|0)|0}var PC=64,MC=4194304;function Xw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cN(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=Xw(o):(a&=s,a!==0&&(n=Xw(a)))}else s=r&~i,s!==0?n=Xw(s):a!==0&&(n=Xw(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-iu(e),i=1<<r,n|=t[r],e&=~i;return n}function Nge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pge(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-iu(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=Nge(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function JR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PZ(){var t=PC;return PC<<=1,!(PC&4194240)&&(PC=64),t}function HO(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ZE(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-iu(e),t[e]=r}function Mge(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-iu(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function F4(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-iu(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var br=0;function MZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var IZ,L4,OZ,kZ,RZ,eF=!1,IC=[],Wd=null,Gd=null,Kd=null,nA=new Map,iA=new Map,Vh=[],Ige="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UU(t,e){switch(t){case"focusin":case"focusout":Wd=null;break;case"dragenter":case"dragleave":Gd=null;break;case"mouseover":case"mouseout":Kd=null;break;case"pointerover":case"pointerout":nA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iA.delete(e.pointerId)}}function Sw(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=eS(e),e!==null&&L4(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Oge(t,e,r,n,i){switch(e){case"focusin":return Wd=Sw(Wd,t,e,r,n,i),!0;case"dragenter":return Gd=Sw(Gd,t,e,r,n,i),!0;case"mouseover":return Kd=Sw(Kd,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return nA.set(a,Sw(nA.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,iA.set(a,Sw(iA.get(a)||null,t,e,r,n,i)),!0}return!1}function FZ(t){var e=_m(t.target);if(e!==null){var r=Mv(e);if(r!==null){if(e=r.tag,e===13){if(e=EZ(r),e!==null){t.blockedOn=e,RZ(t.priority,function(){OZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function WT(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tF(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);XR=n,r.target.dispatchEvent(n),XR=null}else return e=eS(r),e!==null&&L4(e),t.blockedOn=r,!1;e.shift()}return!0}function zU(t,e,r){WT(t)&&r.delete(e)}function kge(){eF=!1,Wd!==null&&WT(Wd)&&(Wd=null),Gd!==null&&WT(Gd)&&(Gd=null),Kd!==null&&WT(Kd)&&(Kd=null),nA.forEach(zU),iA.forEach(zU)}function Cw(t,e){t.blockedOn===e&&(t.blockedOn=null,eF||(eF=!0,Eo.unstable_scheduleCallback(Eo.unstable_NormalPriority,kge)))}function aA(t){function e(i){return Cw(i,t)}if(0<IC.length){Cw(IC[0],t);for(var r=1;r<IC.length;r++){var n=IC[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Wd!==null&&Cw(Wd,t),Gd!==null&&Cw(Gd,t),Kd!==null&&Cw(Kd,t),nA.forEach(e),iA.forEach(e),r=0;r<Vh.length;r++)n=Vh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Vh.length&&(r=Vh[0],r.blockedOn===null);)FZ(r),r.blockedOn===null&&Vh.shift()}var s0=hh.ReactCurrentBatchConfig,fN=!0;function Rge(t,e,r,n){var i=br,a=s0.transition;s0.transition=null;try{br=1,B4(t,e,r,n)}finally{br=i,s0.transition=a}}function Fge(t,e,r,n){var i=br,a=s0.transition;s0.transition=null;try{br=4,B4(t,e,r,n)}finally{br=i,s0.transition=a}}function B4(t,e,r,n){if(fN){var i=tF(t,e,r,n);if(i===null)tk(t,e,n,hN,r),UU(t,n);else if(Oge(i,t,e,r,n))n.stopPropagation();else if(UU(t,n),e&4&&-1<Ige.indexOf(t)){for(;i!==null;){var a=eS(i);if(a!==null&&IZ(a),a=tF(t,e,r,n),a===null&&tk(t,e,n,hN,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else tk(t,e,n,null,r)}}var hN=null;function tF(t,e,r,n){if(hN=null,t=k4(n),t=_m(t),t!==null)if(e=Mv(t),e===null)t=null;else if(r=e.tag,r===13){if(t=EZ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hN=t,null}function LZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_ge()){case R4:return 1;case DZ:return 4;case uN:case Ege:return 16;case NZ:return 536870912;default:return 16}default:return 16}}var jd=null,$4=null,GT=null;function BZ(){if(GT)return GT;var t,e=$4,r=e.length,n,i="value"in jd?jd.value:jd.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return GT=i.slice(t,1<n?1-n:void 0)}function KT(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function OC(){return!0}function qU(){return!1}function No(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?OC:qU,this.isPropagationStopped=qU,this}return vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=OC)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=OC)},persist:function(){},isPersistent:OC}),e}var T1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j4=No(T1),JE=vn({},T1,{view:0,detail:0}),Lge=No(JE),WO,GO,Tw,tM=vn({},JE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tw&&(Tw&&t.type==="mousemove"?(WO=t.screenX-Tw.screenX,GO=t.screenY-Tw.screenY):GO=WO=0,Tw=t),WO)},movementY:function(t){return"movementY"in t?t.movementY:GO}}),HU=No(tM),Bge=vn({},tM,{dataTransfer:0}),$ge=No(Bge),jge=vn({},JE,{relatedTarget:0}),KO=No(jge),Vge=vn({},T1,{animationName:0,elapsedTime:0,pseudoElement:0}),Uge=No(Vge),zge=vn({},T1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qge=No(zge),Hge=vn({},T1,{data:0}),WU=No(Hge),Wge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xge(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kge[t])?!!e[t]:!1}function V4(){return Xge}var Yge=vn({},JE,{key:function(t){if(t.key){var e=Wge[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=KT(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gge[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V4,charCode:function(t){return t.type==="keypress"?KT(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?KT(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qge=No(Yge),Zge=vn({},tM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GU=No(Zge),Jge=vn({},JE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V4}),eve=No(Jge),tve=vn({},T1,{propertyName:0,elapsedTime:0,pseudoElement:0}),rve=No(tve),nve=vn({},tM,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ive=No(nve),ave=[9,13,27,32],U4=Hf&&"CompositionEvent"in window,Ix=null;Hf&&"documentMode"in document&&(Ix=document.documentMode);var sve=Hf&&"TextEvent"in window&&!Ix,$Z=Hf&&(!U4||Ix&&8<Ix&&11>=Ix),KU=" ",XU=!1;function jZ(t,e){switch(t){case"keyup":return ave.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Py=!1;function ove(t,e){switch(t){case"compositionend":return VZ(e);case"keypress":return e.which!==32?null:(XU=!0,KU);case"textInput":return t=e.data,t===KU&&XU?null:t;default:return null}}function lve(t,e){if(Py)return t==="compositionend"||!U4&&jZ(t,e)?(t=BZ(),GT=$4=jd=null,Py=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $Z&&e.locale!=="ko"?null:e.data;default:return null}}var uve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YU(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uve[t.type]:e==="textarea"}function UZ(t,e,r,n){bZ(n),e=dN(e,"onChange"),0<e.length&&(r=new j4("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ox=null,sA=null;function cve(t){JZ(t,0)}function rM(t){var e=Oy(t);if(hZ(e))return t}function fve(t,e){if(t==="change")return e}var zZ=!1;if(Hf){var XO;if(Hf){var YO="oninput"in document;if(!YO){var QU=document.createElement("div");QU.setAttribute("oninput","return;"),YO=typeof QU.oninput=="function"}XO=YO}else XO=!1;zZ=XO&&(!document.documentMode||9<document.documentMode)}function ZU(){Ox&&(Ox.detachEvent("onpropertychange",qZ),sA=Ox=null)}function qZ(t){if(t.propertyName==="value"&&rM(sA)){var e=[];UZ(e,sA,t,k4(t)),_Z(cve,e)}}function hve(t,e,r){t==="focusin"?(ZU(),Ox=e,sA=r,Ox.attachEvent("onpropertychange",qZ)):t==="focusout"&&ZU()}function dve(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rM(sA)}function pve(t,e){if(t==="click")return rM(e)}function mve(t,e){if(t==="input"||t==="change")return rM(e)}function gve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lu=typeof Object.is=="function"?Object.is:gve;function oA(t,e){if(lu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!LR.call(e,i)||!lu(t[i],e[i]))return!1}return!0}function JU(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e8(t,e){var r=JU(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=JU(r)}}function HZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WZ(){for(var t=window,e=sN();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=sN(t.document)}return e}function z4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vve(t){var e=WZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&HZ(r.ownerDocument.documentElement,r)){if(n!==null&&z4(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=e8(r,a);var s=e8(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yve=Hf&&"documentMode"in document&&11>=document.documentMode,My=null,rF=null,kx=null,nF=!1;function t8(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nF||My==null||My!==sN(n)||(n=My,"selectionStart"in n&&z4(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kx&&oA(kx,n)||(kx=n,n=dN(rF,"onSelect"),0<n.length&&(e=new j4("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=My)))}function kC(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Iy={animationend:kC("Animation","AnimationEnd"),animationiteration:kC("Animation","AnimationIteration"),animationstart:kC("Animation","AnimationStart"),transitionend:kC("Transition","TransitionEnd")},QO={},GZ={};Hf&&(GZ=document.createElement("div").style,"AnimationEvent"in window||(delete Iy.animationend.animation,delete Iy.animationiteration.animation,delete Iy.animationstart.animation),"TransitionEvent"in window||delete Iy.transitionend.transition);function nM(t){if(QO[t])return QO[t];if(!Iy[t])return t;var e=Iy[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in GZ)return QO[t]=e[r];return t}var KZ=nM("animationend"),XZ=nM("animationiteration"),YZ=nM("animationstart"),QZ=nM("transitionend"),ZZ=new Map,r8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Np(t,e){ZZ.set(t,e),Pv(e,[t])}for(var ZO=0;ZO<r8.length;ZO++){var JO=r8[ZO],bve=JO.toLowerCase(),wve=JO[0].toUpperCase()+JO.slice(1);Np(bve,"on"+wve)}Np(KZ,"onAnimationEnd");Np(XZ,"onAnimationIteration");Np(YZ,"onAnimationStart");Np("dblclick","onDoubleClick");Np("focusin","onFocus");Np("focusout","onBlur");Np(QZ,"onTransitionEnd");Wb("onMouseEnter",["mouseout","mouseover"]);Wb("onMouseLeave",["mouseout","mouseover"]);Wb("onPointerEnter",["pointerout","pointerover"]);Wb("onPointerLeave",["pointerout","pointerover"]);Pv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xve=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yw));function n8(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,bge(n,e,void 0,t),t.currentTarget=null}function JZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;n8(i,o,u),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;n8(i,o,u),a=l}}}if(lN)throw t=ZR,lN=!1,ZR=null,t}function Gr(t,e){var r=e[lF];r===void 0&&(r=e[lF]=new Set);var n=t+"__bubble";r.has(n)||(eJ(e,t,2,!1),r.add(n))}function ek(t,e,r){var n=0;e&&(n|=4),eJ(r,t,n,e)}var RC="_reactListening"+Math.random().toString(36).slice(2);function lA(t){if(!t[RC]){t[RC]=!0,oZ.forEach(function(r){r!=="selectionchange"&&(xve.has(r)||ek(r,!1,t),ek(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[RC]||(e[RC]=!0,ek("selectionchange",!1,e))}}function eJ(t,e,r,n){switch(LZ(e)){case 1:var i=Rge;break;case 4:i=Fge;break;default:i=B4}r=i.bind(null,e,r,t),i=void 0,!QR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function tk(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=_m(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}_Z(function(){var u=a,c=k4(r),f=[];e:{var h=ZZ.get(t);if(h!==void 0){var d=j4,p=t;switch(t){case"keypress":if(KT(r)===0)break e;case"keydown":case"keyup":d=Qge;break;case"focusin":p="focus",d=KO;break;case"focusout":p="blur",d=KO;break;case"beforeblur":case"afterblur":d=KO;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=HU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=$ge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=eve;break;case KZ:case XZ:case YZ:d=Uge;break;case QZ:d=rve;break;case"scroll":d=Lge;break;case"wheel":d=ive;break;case"copy":case"cut":case"paste":d=qge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=GU}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var w=u,b;w!==null;){b=w;var A=b.stateNode;if(b.tag===5&&A!==null&&(b=A,y!==null&&(A=rA(w,y),A!=null&&m.push(uA(w,A,b)))),v)break;w=w.return}0<m.length&&(h=new d(h,p,null,r,c),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==XR&&(p=r.relatedTarget||r.fromElement)&&(_m(p)||p[Wf]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=u,p=p?_m(p):null,p!==null&&(v=Mv(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(m=HU,A="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=GU,A="onPointerLeave",y="onPointerEnter",w="pointer"),v=d==null?h:Oy(d),b=p==null?h:Oy(p),h=new m(A,w+"leave",d,r,c),h.target=v,h.relatedTarget=b,A=null,_m(c)===u&&(m=new m(y,w+"enter",p,r,c),m.target=b,m.relatedTarget=v,A=m),v=A,d&&p)t:{for(m=d,y=p,w=0,b=m;b;b=ny(b))w++;for(b=0,A=y;A;A=ny(A))b++;for(;0<w-b;)m=ny(m),w--;for(;0<b-w;)y=ny(y),b--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=ny(m),y=ny(y)}m=null}else m=null;d!==null&&i8(f,h,d,m,!1),p!==null&&v!==null&&i8(f,v,p,m,!0)}}e:{if(h=u?Oy(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=fve;else if(YU(h))if(zZ)x=mve;else{x=dve;var _=hve}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=pve);if(x&&(x=x(t,u))){UZ(f,x,r,c);break e}_&&_(t,h,u),t==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&qR(h,"number",h.value)}switch(_=u?Oy(u):window,t){case"focusin":(YU(_)||_.contentEditable==="true")&&(My=_,rF=u,kx=null);break;case"focusout":kx=rF=My=null;break;case"mousedown":nF=!0;break;case"contextmenu":case"mouseup":case"dragend":nF=!1,t8(f,r,c);break;case"selectionchange":if(yve)break;case"keydown":case"keyup":t8(f,r,c)}var S;if(U4)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Py?jZ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&($Z&&r.locale!=="ko"&&(Py||E!=="onCompositionStart"?E==="onCompositionEnd"&&Py&&(S=BZ()):(jd=c,$4="value"in jd?jd.value:jd.textContent,Py=!0)),_=dN(u,E),0<_.length&&(E=new WU(E,t,null,r,c),f.push({event:E,listeners:_}),S?E.data=S:(S=VZ(r),S!==null&&(E.data=S)))),(S=sve?ove(t,r):lve(t,r))&&(u=dN(u,"onBeforeInput"),0<u.length&&(c=new WU("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=S))}JZ(f,e)})}function uA(t,e,r){return{instance:t,listener:e,currentTarget:r}}function dN(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=rA(t,r),a!=null&&n.unshift(uA(t,a,i)),a=rA(t,e),a!=null&&n.push(uA(t,a,i))),t=t.return}return n}function ny(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i8(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=rA(r,a),l!=null&&s.unshift(uA(r,l,o))):i||(l=rA(r,a),l!=null&&s.push(uA(r,l,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Ave=/\r\n?/g,_ve=/\u0000|\uFFFD/g;function a8(t){return(typeof t=="string"?t:""+t).replace(Ave,`
`).replace(_ve,"")}function FC(t,e,r){if(e=a8(e),a8(t)!==e&&r)throw Error(Fe(425))}function pN(){}var iF=null,aF=null;function sF(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oF=typeof setTimeout=="function"?setTimeout:void 0,Eve=typeof clearTimeout=="function"?clearTimeout:void 0,s8=typeof Promise=="function"?Promise:void 0,Sve=typeof queueMicrotask=="function"?queueMicrotask:typeof s8<"u"?function(t){return s8.resolve(null).then(t).catch(Cve)}:oF;function Cve(t){setTimeout(function(){throw t})}function rk(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),aA(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);aA(e)}function Xd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o8(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var D1=Math.random().toString(36).slice(2),tc="__reactFiber$"+D1,cA="__reactProps$"+D1,Wf="__reactContainer$"+D1,lF="__reactEvents$"+D1,Tve="__reactListeners$"+D1,Dve="__reactHandles$"+D1;function _m(t){var e=t[tc];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Wf]||r[tc]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=o8(t);t!==null;){if(r=t[tc])return r;t=o8(t)}return e}t=r,r=t.parentNode}return null}function eS(t){return t=t[tc]||t[Wf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function iM(t){return t[cA]||null}var uF=[],ky=-1;function Pp(t){return{current:t}}function Qr(t){0>ky||(t.current=uF[ky],uF[ky]=null,ky--)}function qr(t,e){ky++,uF[ky]=t.current,t.current=e}var up={},Ba=Pp(up),Fs=Pp(!1),sv=up;function Gb(t,e){var r=t.type.contextTypes;if(!r)return up;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(t){return t=t.childContextTypes,t!=null}function mN(){Qr(Fs),Qr(Ba)}function l8(t,e,r){if(Ba.current!==up)throw Error(Fe(168));qr(Ba,e),qr(Fs,r)}function tJ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Fe(108,hge(t)||"Unknown",i));return vn({},r,n)}function gN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||up,sv=Ba.current,qr(Ba,t),qr(Fs,Fs.current),!0}function u8(t,e,r){var n=t.stateNode;if(!n)throw Error(Fe(169));r?(t=tJ(t,e,sv),n.__reactInternalMemoizedMergedChildContext=t,Qr(Fs),Qr(Ba),qr(Ba,t)):Qr(Fs),qr(Fs,r)}var Vc=null,aM=!1,nk=!1;function rJ(t){Vc===null?Vc=[t]:Vc.push(t)}function Nve(t){aM=!0,rJ(t)}function Mp(){if(!nk&&Vc!==null){nk=!0;var t=0,e=br;try{var r=Vc;for(br=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vc=null,aM=!1}catch(i){throw Vc!==null&&(Vc=Vc.slice(t+1)),TZ(R4,Mp),i}finally{br=e,nk=!1}}return null}var Ry=[],Fy=0,vN=null,yN=0,il=[],al=0,ov=null,Tf=1,Df="";function lm(t,e){Ry[Fy++]=yN,Ry[Fy++]=vN,vN=t,yN=e}function nJ(t,e,r){il[al++]=Tf,il[al++]=Df,il[al++]=ov,ov=t;var n=Tf;t=Df;var i=32-iu(n)-1;n&=~(1<<i),r+=1;var a=32-iu(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Tf=1<<32-iu(e)+i|r<<i|n,Df=a+t}else Tf=1<<a|r<<i|n,Df=t}function q4(t){t.return!==null&&(lm(t,1),nJ(t,1,0))}function H4(t){for(;t===vN;)vN=Ry[--Fy],Ry[Fy]=null,yN=Ry[--Fy],Ry[Fy]=null;for(;t===ov;)ov=il[--al],il[al]=null,Df=il[--al],il[al]=null,Tf=il[--al],il[al]=null}var xo=null,yo=null,an=!1,Yl=null;function iJ(t,e){var r=ul(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function c8(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xo=t,yo=Xd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xo=t,yo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ov!==null?{id:Tf,overflow:Df}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ul(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,xo=t,yo=null,!0):!1;default:return!1}}function cF(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fF(t){if(an){var e=yo;if(e){var r=e;if(!c8(t,e)){if(cF(t))throw Error(Fe(418));e=Xd(r.nextSibling);var n=xo;e&&c8(t,e)?iJ(n,r):(t.flags=t.flags&-4097|2,an=!1,xo=t)}}else{if(cF(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,an=!1,xo=t}}}function f8(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xo=t}function LC(t){if(t!==xo)return!1;if(!an)return f8(t),an=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sF(t.type,t.memoizedProps)),e&&(e=yo)){if(cF(t))throw aJ(),Error(Fe(418));for(;e;)iJ(t,e),e=Xd(e.nextSibling)}if(f8(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){yo=Xd(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}yo=null}}else yo=xo?Xd(t.stateNode.nextSibling):null;return!0}function aJ(){for(var t=yo;t;)t=Xd(t.nextSibling)}function Kb(){yo=xo=null,an=!1}function W4(t){Yl===null?Yl=[t]:Yl.push(t)}var Pve=hh.ReactCurrentBatchConfig;function Dw(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var n=r.stateNode}if(!n)throw Error(Fe(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function BC(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h8(t){var e=t._init;return e(t._payload)}function sJ(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Jd(y,w),y.index=0,y.sibling=null,y}function a(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,w,b,A){return w===null||w.tag!==6?(w=ck(b,y.mode,A),w.return=y,w):(w=i(w,b),w.return=y,w)}function l(y,w,b,A){var x=b.type;return x===Ny?c(y,w,b.props.children,A,b.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Rh&&h8(x)===w.type)?(A=i(w,b.props),A.ref=Dw(y,w,b),A.return=y,A):(A=tD(b.type,b.key,b.props,null,y.mode,A),A.ref=Dw(y,w,b),A.return=y,A)}function u(y,w,b,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=fk(b,y.mode,A),w.return=y,w):(w=i(w,b.children||[]),w.return=y,w)}function c(y,w,b,A,x){return w===null||w.tag!==7?(w=Yg(b,y.mode,A,x),w.return=y,w):(w=i(w,b),w.return=y,w)}function f(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ck(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case TC:return b=tD(w.type,w.key,w.props,null,y.mode,b),b.ref=Dw(y,null,w),b.return=y,b;case Dy:return w=fk(w,y.mode,b),w.return=y,w;case Rh:var A=w._init;return f(y,A(w._payload),b)}if(Kw(w)||_w(w))return w=Yg(w,y.mode,b,null),w.return=y,w;BC(y,w)}return null}function h(y,w,b,A){var x=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:o(y,w,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case TC:return b.key===x?l(y,w,b,A):null;case Dy:return b.key===x?u(y,w,b,A):null;case Rh:return x=b._init,h(y,w,x(b._payload),A)}if(Kw(b)||_w(b))return x!==null?null:c(y,w,b,A,null);BC(y,b)}return null}function d(y,w,b,A,x){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(b)||null,o(w,y,""+A,x);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case TC:return y=y.get(A.key===null?b:A.key)||null,l(w,y,A,x);case Dy:return y=y.get(A.key===null?b:A.key)||null,u(w,y,A,x);case Rh:var _=A._init;return d(y,w,b,_(A._payload),x)}if(Kw(A)||_w(A))return y=y.get(b)||null,c(w,y,A,x,null);BC(w,A)}return null}function p(y,w,b,A){for(var x=null,_=null,S=w,E=w=0,T=null;S!==null&&E<b.length;E++){S.index>E?(T=S,S=null):T=S.sibling;var D=h(y,S,b[E],A);if(D===null){S===null&&(S=T);break}t&&S&&D.alternate===null&&e(y,S),w=a(D,w,E),_===null?x=D:_.sibling=D,_=D,S=T}if(E===b.length)return r(y,S),an&&lm(y,E),x;if(S===null){for(;E<b.length;E++)S=f(y,b[E],A),S!==null&&(w=a(S,w,E),_===null?x=S:_.sibling=S,_=S);return an&&lm(y,E),x}for(S=n(y,S);E<b.length;E++)T=d(S,y,E,b[E],A),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?E:T.key),w=a(T,w,E),_===null?x=T:_.sibling=T,_=T);return t&&S.forEach(function(N){return e(y,N)}),an&&lm(y,E),x}function m(y,w,b,A){var x=_w(b);if(typeof x!="function")throw Error(Fe(150));if(b=x.call(b),b==null)throw Error(Fe(151));for(var _=x=null,S=w,E=w=0,T=null,D=b.next();S!==null&&!D.done;E++,D=b.next()){S.index>E?(T=S,S=null):T=S.sibling;var N=h(y,S,D.value,A);if(N===null){S===null&&(S=T);break}t&&S&&N.alternate===null&&e(y,S),w=a(N,w,E),_===null?x=N:_.sibling=N,_=N,S=T}if(D.done)return r(y,S),an&&lm(y,E),x;if(S===null){for(;!D.done;E++,D=b.next())D=f(y,D.value,A),D!==null&&(w=a(D,w,E),_===null?x=D:_.sibling=D,_=D);return an&&lm(y,E),x}for(S=n(y,S);!D.done;E++,D=b.next())D=d(S,y,E,D.value,A),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?E:D.key),w=a(D,w,E),_===null?x=D:_.sibling=D,_=D);return t&&S.forEach(function(P){return e(y,P)}),an&&lm(y,E),x}function v(y,w,b,A){if(typeof b=="object"&&b!==null&&b.type===Ny&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case TC:e:{for(var x=b.key,_=w;_!==null;){if(_.key===x){if(x=b.type,x===Ny){if(_.tag===7){r(y,_.sibling),w=i(_,b.props.children),w.return=y,y=w;break e}}else if(_.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Rh&&h8(x)===_.type){r(y,_.sibling),w=i(_,b.props),w.ref=Dw(y,_,b),w.return=y,y=w;break e}r(y,_);break}else e(y,_);_=_.sibling}b.type===Ny?(w=Yg(b.props.children,y.mode,A,b.key),w.return=y,y=w):(A=tD(b.type,b.key,b.props,null,y.mode,A),A.ref=Dw(y,w,b),A.return=y,y=A)}return s(y);case Dy:e:{for(_=b.key;w!==null;){if(w.key===_)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(y,w.sibling),w=i(w,b.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=fk(b,y.mode,A),w.return=y,y=w}return s(y);case Rh:return _=b._init,v(y,w,_(b._payload),A)}if(Kw(b))return p(y,w,b,A);if(_w(b))return m(y,w,b,A);BC(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(y,w.sibling),w=i(w,b),w.return=y,y=w):(r(y,w),w=ck(b,y.mode,A),w.return=y,y=w),s(y)):r(y,w)}return v}var Xb=sJ(!0),oJ=sJ(!1),bN=Pp(null),wN=null,Ly=null,G4=null;function K4(){G4=Ly=wN=null}function X4(t){var e=bN.current;Qr(bN),t._currentValue=e}function hF(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function o0(t,e){wN=t,G4=Ly=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ms=!0),t.firstContext=null)}function yl(t){var e=t._currentValue;if(G4!==t)if(t={context:t,memoizedValue:e,next:null},Ly===null){if(wN===null)throw Error(Fe(308));Ly=t,wN.dependencies={lanes:0,firstContext:t}}else Ly=Ly.next=t;return e}var Em=null;function Y4(t){Em===null?Em=[t]:Em.push(t)}function lJ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Y4(e)):(r.next=i.next,i.next=r),e.interleaved=r,Gf(t,n)}function Gf(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fh=!1;function Q4(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uJ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ir&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Gf(t,r)}return i=n.interleaved,i===null?(e.next=e,Y4(n)):(e.next=i.next,i.next=e),n.interleaved=e,Gf(t,r)}function XT(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,F4(t,r)}}function d8(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function xN(t,e,r,n){var i=t.updateQueue;Fh=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,c=u=l=null,o=a;do{var h=o.lane,d=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(h=e,d=r,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=vn({},f,h);break e;case 2:Fh=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);uv|=s,t.lanes=s,t.memoizedState=f}}function p8(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Fe(191,i));i.call(n)}}}var tS={},sc=Pp(tS),fA=Pp(tS),hA=Pp(tS);function Sm(t){if(t===tS)throw Error(Fe(174));return t}function Z4(t,e){switch(qr(hA,e),qr(fA,t),qr(sc,tS),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=WR(e,t)}Qr(sc),qr(sc,e)}function Yb(){Qr(sc),Qr(fA),Qr(hA)}function cJ(t){Sm(hA.current);var e=Sm(sc.current),r=WR(e,t.type);e!==r&&(qr(fA,t),qr(sc,r))}function J4(t){fA.current===t&&(Qr(sc),Qr(fA))}var hn=Pp(0);function AN(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ik=[];function e$(){for(var t=0;t<ik.length;t++)ik[t]._workInProgressVersionPrimary=null;ik.length=0}var YT=hh.ReactCurrentDispatcher,ak=hh.ReactCurrentBatchConfig,lv=0,pn=null,oi=null,Li=null,_N=!1,Rx=!1,dA=0,Mve=0;function wa(){throw Error(Fe(321))}function t$(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!lu(t[r],e[r]))return!1;return!0}function r$(t,e,r,n,i,a){if(lv=a,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,YT.current=t===null||t.memoizedState===null?Rve:Fve,t=r(n,i),Rx){a=0;do{if(Rx=!1,dA=0,25<=a)throw Error(Fe(301));a+=1,Li=oi=null,e.updateQueue=null,YT.current=Lve,t=r(n,i)}while(Rx)}if(YT.current=EN,e=oi!==null&&oi.next!==null,lv=0,Li=oi=pn=null,_N=!1,e)throw Error(Fe(300));return t}function n$(){var t=dA!==0;return dA=0,t}function Pu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?pn.memoizedState=Li=t:Li=Li.next=t,Li}function bl(){if(oi===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=oi.next;var e=Li===null?pn.memoizedState:Li.next;if(e!==null)Li=e,oi=t;else{if(t===null)throw Error(Fe(310));oi=t,t={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},Li===null?pn.memoizedState=Li=t:Li=Li.next=t}return Li}function pA(t,e){return typeof e=="function"?e(t):e}function sk(t){var e=bl(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=oi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((lv&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,pn.lanes|=c,uv|=c}u=u.next}while(u!==null&&u!==a);l===null?s=n:l.next=o,lu(n,e.memoizedState)||(Ms=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,pn.lanes|=a,uv|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ok(t){var e=bl(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);lu(a,e.memoizedState)||(Ms=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function fJ(){}function hJ(t,e){var r=pn,n=bl(),i=e(),a=!lu(n.memoizedState,i);if(a&&(n.memoizedState=i,Ms=!0),n=n.queue,i$(mJ.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Li!==null&&Li.memoizedState.tag&1){if(r.flags|=2048,mA(9,pJ.bind(null,r,n,i,e),void 0,null),ji===null)throw Error(Fe(349));lv&30||dJ(r,e,i)}return i}function dJ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function pJ(t,e,r,n){e.value=r,e.getSnapshot=n,gJ(e)&&vJ(t)}function mJ(t,e,r){return r(function(){gJ(e)&&vJ(t)})}function gJ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!lu(t,r)}catch{return!0}}function vJ(t){var e=Gf(t,1);e!==null&&au(e,t,1,-1)}function m8(t){var e=Pu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pA,lastRenderedState:t},e.queue=t,t=t.dispatch=kve.bind(null,pn,t),[e.memoizedState,t]}function mA(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function yJ(){return bl().memoizedState}function QT(t,e,r,n){var i=Pu();pn.flags|=t,i.memoizedState=mA(1|e,r,void 0,n===void 0?null:n)}function sM(t,e,r,n){var i=bl();n=n===void 0?null:n;var a=void 0;if(oi!==null){var s=oi.memoizedState;if(a=s.destroy,n!==null&&t$(n,s.deps)){i.memoizedState=mA(e,r,a,n);return}}pn.flags|=t,i.memoizedState=mA(1|e,r,a,n)}function g8(t,e){return QT(8390656,8,t,e)}function i$(t,e){return sM(2048,8,t,e)}function bJ(t,e){return sM(4,2,t,e)}function wJ(t,e){return sM(4,4,t,e)}function xJ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AJ(t,e,r){return r=r!=null?r.concat([t]):null,sM(4,4,xJ.bind(null,e,t),r)}function a$(){}function _J(t,e){var r=bl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&t$(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function EJ(t,e){var r=bl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&t$(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function SJ(t,e,r){return lv&21?(lu(r,e)||(r=PZ(),pn.lanes|=r,uv|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ms=!0),t.memoizedState=r)}function Ive(t,e){var r=br;br=r!==0&&4>r?r:4,t(!0);var n=ak.transition;ak.transition={};try{t(!1),e()}finally{br=r,ak.transition=n}}function CJ(){return bl().memoizedState}function Ove(t,e,r){var n=Zd(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},TJ(t))DJ(e,r);else if(r=lJ(t,e,r,n),r!==null){var i=ns();au(r,t,n,i),NJ(r,e,n)}}function kve(t,e,r){var n=Zd(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(TJ(t))DJ(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,lu(o,s)){var l=e.interleaved;l===null?(i.next=i,Y4(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=lJ(t,e,i,n),r!==null&&(i=ns(),au(r,t,n,i),NJ(r,e,n))}}function TJ(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function DJ(t,e){Rx=_N=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function NJ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,F4(t,r)}}var EN={readContext:yl,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},Rve={readContext:yl,useCallback:function(t,e){return Pu().memoizedState=[t,e===void 0?null:e],t},useContext:yl,useEffect:g8,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,QT(4194308,4,xJ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return QT(4194308,4,t,e)},useInsertionEffect:function(t,e){return QT(4,2,t,e)},useMemo:function(t,e){var r=Pu();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Pu();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ove.bind(null,pn,t),[n.memoizedState,t]},useRef:function(t){var e=Pu();return t={current:t},e.memoizedState=t},useState:m8,useDebugValue:a$,useDeferredValue:function(t){return Pu().memoizedState=t},useTransition:function(){var t=m8(!1),e=t[0];return t=Ive.bind(null,t[1]),Pu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pn,i=Pu();if(an){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=e(),ji===null)throw Error(Fe(349));lv&30||dJ(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,g8(mJ.bind(null,n,a,t),[t]),n.flags|=2048,mA(9,pJ.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Pu(),e=ji.identifierPrefix;if(an){var r=Df,n=Tf;r=(n&~(1<<32-iu(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=dA++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Mve++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fve={readContext:yl,useCallback:_J,useContext:yl,useEffect:i$,useImperativeHandle:AJ,useInsertionEffect:bJ,useLayoutEffect:wJ,useMemo:EJ,useReducer:sk,useRef:yJ,useState:function(){return sk(pA)},useDebugValue:a$,useDeferredValue:function(t){var e=bl();return SJ(e,oi.memoizedState,t)},useTransition:function(){var t=sk(pA)[0],e=bl().memoizedState;return[t,e]},useMutableSource:fJ,useSyncExternalStore:hJ,useId:CJ,unstable_isNewReconciler:!1},Lve={readContext:yl,useCallback:_J,useContext:yl,useEffect:i$,useImperativeHandle:AJ,useInsertionEffect:bJ,useLayoutEffect:wJ,useMemo:EJ,useReducer:ok,useRef:yJ,useState:function(){return ok(pA)},useDebugValue:a$,useDeferredValue:function(t){var e=bl();return oi===null?e.memoizedState=t:SJ(e,oi.memoizedState,t)},useTransition:function(){var t=ok(pA)[0],e=bl().memoizedState;return[t,e]},useMutableSource:fJ,useSyncExternalStore:hJ,useId:CJ,unstable_isNewReconciler:!1};function Fl(t,e){if(t&&t.defaultProps){e=vn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function dF(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:vn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var oM={isMounted:function(t){return(t=t._reactInternals)?Mv(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ns(),i=Zd(t),a=Rf(n,i);a.payload=e,r!=null&&(a.callback=r),e=Yd(t,a,i),e!==null&&(au(e,t,i,n),XT(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ns(),i=Zd(t),a=Rf(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Yd(t,a,i),e!==null&&(au(e,t,i,n),XT(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ns(),n=Zd(t),i=Rf(r,n);i.tag=2,e!=null&&(i.callback=e),e=Yd(t,i,n),e!==null&&(au(e,t,n,r),XT(e,t,n))}};function v8(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!oA(r,n)||!oA(i,a):!0}function PJ(t,e,r){var n=!1,i=up,a=e.contextType;return typeof a=="object"&&a!==null?a=yl(a):(i=Ls(e)?sv:Ba.current,n=e.contextTypes,a=(n=n!=null)?Gb(t,i):up),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oM,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function y8(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&oM.enqueueReplaceState(e,e.state,null)}function pF(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Q4(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=yl(a):(a=Ls(e)?sv:Ba.current,i.context=Gb(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dF(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oM.enqueueReplaceState(i,i.state,null),xN(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qb(t,e){try{var r="",n=e;do r+=fge(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function lk(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function mF(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Bve=typeof WeakMap=="function"?WeakMap:Map;function MJ(t,e,r){r=Rf(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){CN||(CN=!0,SF=n),mF(t,e)},r}function IJ(t,e,r){r=Rf(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){mF(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){mF(t,e),typeof n!="function"&&(Qd===null?Qd=new Set([this]):Qd.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function b8(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Bve;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Zve.bind(null,t,e,r),e.then(t,t))}function w8(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function x8(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Rf(-1,1),e.tag=2,Yd(r,e,1))),r.lanes|=1),t)}var $ve=hh.ReactCurrentOwner,Ms=!1;function Ja(t,e,r,n){e.child=t===null?oJ(e,null,r,n):Xb(e,t.child,r,n)}function A8(t,e,r,n,i){r=r.render;var a=e.ref;return o0(e,i),n=r$(t,e,r,n,a,i),r=n$(),t!==null&&!Ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kf(t,e,i)):(an&&r&&q4(e),e.flags|=1,Ja(t,e,n,i),e.child)}function _8(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!d$(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,OJ(t,e,a,n,i)):(t=tD(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:oA,r(s,n)&&t.ref===e.ref)return Kf(t,e,i)}return e.flags|=1,t=Jd(a,n),t.ref=e.ref,t.return=e,e.child=t}function OJ(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(oA(a,n)&&t.ref===e.ref)if(Ms=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Ms=!0);else return e.lanes=t.lanes,Kf(t,e,i)}return gF(t,e,r,n,i)}function kJ(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr($y,co),co|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qr($y,co),co|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,qr($y,co),co|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,qr($y,co),co|=n;return Ja(t,e,i,r),e.child}function RJ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function gF(t,e,r,n,i){var a=Ls(r)?sv:Ba.current;return a=Gb(e,a),o0(e,i),r=r$(t,e,r,n,a,i),n=n$(),t!==null&&!Ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kf(t,e,i)):(an&&n&&q4(e),e.flags|=1,Ja(t,e,r,i),e.child)}function E8(t,e,r,n,i){if(Ls(r)){var a=!0;gN(e)}else a=!1;if(o0(e,i),e.stateNode===null)ZT(t,e),PJ(e,r,n),pF(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=yl(u):(u=Ls(r)?sv:Ba.current,u=Gb(e,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==u)&&y8(e,s,n,u),Fh=!1;var h=e.memoizedState;s.state=h,xN(e,n,s,i),l=e.memoizedState,o!==n||h!==l||Fs.current||Fh?(typeof c=="function"&&(dF(e,r,c,n),l=e.memoizedState),(o=Fh||v8(e,r,o,n,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,uJ(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Fl(e.type,o),s.props=u,f=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=yl(l):(l=Ls(r)?sv:Ba.current,l=Gb(e,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&y8(e,s,n,l),Fh=!1,h=e.memoizedState,s.state=h,xN(e,n,s,i);var p=e.memoizedState;o!==f||h!==p||Fs.current||Fh?(typeof d=="function"&&(dF(e,r,d,n),p=e.memoizedState),(u=Fh||v8(e,r,u,n,h,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return vF(t,e,r,n,a,i)}function vF(t,e,r,n,i,a){RJ(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&u8(e,r,!1),Kf(t,e,a);n=e.stateNode,$ve.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Xb(e,t.child,null,a),e.child=Xb(e,null,o,a)):Ja(t,e,o,a),e.memoizedState=n.state,i&&u8(e,r,!0),e.child}function FJ(t){var e=t.stateNode;e.pendingContext?l8(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l8(t,e.context,!1),Z4(t,e.containerInfo)}function S8(t,e,r,n,i){return Kb(),W4(i),e.flags|=256,Ja(t,e,r,n),e.child}var yF={dehydrated:null,treeContext:null,retryLane:0};function bF(t){return{baseLanes:t,cachePool:null,transitions:null}}function LJ(t,e,r){var n=e.pendingProps,i=hn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qr(hn,i&1),t===null)return fF(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=cM(s,n,0,null),t=Yg(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=bF(r),e.memoizedState=yF,t):s$(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return jve(t,e,s,n,o,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Jd(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Jd(o,a):(a=Yg(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?bF(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=yF,n}return a=t.child,t=a.sibling,n=Jd(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function s$(t,e){return e=cM({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $C(t,e,r,n){return n!==null&&W4(n),Xb(e,t.child,null,r),t=s$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jve(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=lk(Error(Fe(422))),$C(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=cM({mode:"visible",children:n.children},i,0,null),a=Yg(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Xb(e,t.child,null,s),e.child.memoizedState=bF(s),e.memoizedState=yF,a);if(!(e.mode&1))return $C(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(Fe(419)),n=lk(a,n,void 0),$C(t,e,s,n)}if(o=(s&t.childLanes)!==0,Ms||o){if(n=ji,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Gf(t,i),au(n,t,i,-1))}return h$(),n=lk(Error(Fe(421))),$C(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jve.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,yo=Xd(i.nextSibling),xo=e,an=!0,Yl=null,t!==null&&(il[al++]=Tf,il[al++]=Df,il[al++]=ov,Tf=t.id,Df=t.overflow,ov=e),e=s$(e,n.children),e.flags|=4096,e)}function C8(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hF(t.return,e,r)}function uk(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function BJ(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ja(t,e,n.children,r),n=hn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C8(t,r,e);else if(t.tag===19)C8(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(qr(hn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&AN(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),uk(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&AN(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}uk(e,!0,r,null,a);break;case"together":uk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ZT(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kf(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),uv|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,r=Jd(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Jd(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Vve(t,e,r){switch(e.tag){case 3:FJ(e),Kb();break;case 5:cJ(e);break;case 1:Ls(e.type)&&gN(e);break;case 4:Z4(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;qr(bN,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(qr(hn,hn.current&1),e.flags|=128,null):r&e.child.childLanes?LJ(t,e,r):(qr(hn,hn.current&1),t=Kf(t,e,r),t!==null?t.sibling:null);qr(hn,hn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return BJ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qr(hn,hn.current),n)break;return null;case 22:case 23:return e.lanes=0,kJ(t,e,r)}return Kf(t,e,r)}var $J,wF,jJ,VJ;$J=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wF=function(){};jJ=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Sm(sc.current);var a=null;switch(r){case"input":i=UR(t,i),n=UR(t,n),a=[];break;case"select":i=vn({},i,{value:void 0}),n=vn({},n,{value:void 0}),a=[];break;case"textarea":i=HR(t,i),n=HR(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=pN)}GR(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(eA.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(eA.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Gr("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};VJ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Nw(t,e){if(!an)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xa(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Uve(t,e,r){var n=e.pendingProps;switch(H4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xa(e),null;case 1:return Ls(e.type)&&mN(),xa(e),null;case 3:return n=e.stateNode,Yb(),Qr(Fs),Qr(Ba),e$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(LC(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yl!==null&&(DF(Yl),Yl=null))),wF(t,e),xa(e),null;case 5:J4(e);var i=Sm(hA.current);if(r=e.type,t!==null&&e.stateNode!=null)jJ(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return xa(e),null}if(t=Sm(sc.current),LC(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[tc]=e,n[cA]=a,t=(e.mode&1)!==0,r){case"dialog":Gr("cancel",n),Gr("close",n);break;case"iframe":case"object":case"embed":Gr("load",n);break;case"video":case"audio":for(i=0;i<Yw.length;i++)Gr(Yw[i],n);break;case"source":Gr("error",n);break;case"img":case"image":case"link":Gr("error",n),Gr("load",n);break;case"details":Gr("toggle",n);break;case"input":RU(n,a),Gr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Gr("invalid",n);break;case"textarea":LU(n,a),Gr("invalid",n)}GR(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&FC(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&FC(n.textContent,o,t),i=["children",""+o]):eA.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Gr("scroll",n)}switch(r){case"input":DC(n),FU(n,a,!0);break;case"textarea":DC(n),BU(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=pN)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mZ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[tc]=e,t[cA]=n,$J(t,e,!1,!1),e.stateNode=t;e:{switch(s=KR(r,n),r){case"dialog":Gr("cancel",t),Gr("close",t),i=n;break;case"iframe":case"object":case"embed":Gr("load",t),i=n;break;case"video":case"audio":for(i=0;i<Yw.length;i++)Gr(Yw[i],t);i=n;break;case"source":Gr("error",t),i=n;break;case"img":case"image":case"link":Gr("error",t),Gr("load",t),i=n;break;case"details":Gr("toggle",t),i=n;break;case"input":RU(t,n),i=UR(t,n),Gr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=vn({},n,{value:void 0}),Gr("invalid",t);break;case"textarea":LU(t,n),i=HR(t,n),Gr("invalid",t);break;default:i=n}GR(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?yZ(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gZ(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&tA(t,l):typeof l=="number"&&tA(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(eA.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Gr("scroll",t):l!=null&&P4(t,a,l,s))}switch(r){case"input":DC(t),FU(t,n,!1);break;case"textarea":DC(t),BU(t);break;case"option":n.value!=null&&t.setAttribute("value",""+lp(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?n0(t,!!n.multiple,a,!1):n.defaultValue!=null&&n0(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pN)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xa(e),null;case 6:if(t&&e.stateNode!=null)VJ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(r=Sm(hA.current),Sm(sc.current),LC(e)){if(n=e.stateNode,r=e.memoizedProps,n[tc]=e,(a=n.nodeValue!==r)&&(t=xo,t!==null))switch(t.tag){case 3:FC(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&FC(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tc]=e,e.stateNode=n}return xa(e),null;case 13:if(Qr(hn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(an&&yo!==null&&e.mode&1&&!(e.flags&128))aJ(),Kb(),e.flags|=98560,a=!1;else if(a=LC(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Fe(317));a[tc]=e}else Kb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xa(e),a=!1}else Yl!==null&&(DF(Yl),Yl=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||hn.current&1?ci===0&&(ci=3):h$())),e.updateQueue!==null&&(e.flags|=4),xa(e),null);case 4:return Yb(),wF(t,e),t===null&&lA(e.stateNode.containerInfo),xa(e),null;case 10:return X4(e.type._context),xa(e),null;case 17:return Ls(e.type)&&mN(),xa(e),null;case 19:if(Qr(hn),a=e.memoizedState,a===null)return xa(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)Nw(a,!1);else{if(ci!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=AN(t),s!==null){for(e.flags|=128,Nw(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return qr(hn,hn.current&1|2),e.child}t=t.sibling}a.tail!==null&&$n()>Zb&&(e.flags|=128,n=!0,Nw(a,!1),e.lanes=4194304)}else{if(!n)if(t=AN(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Nw(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!an)return xa(e),null}else 2*$n()-a.renderingStartTime>Zb&&r!==1073741824&&(e.flags|=128,n=!0,Nw(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$n(),e.sibling=null,r=hn.current,qr(hn,n?r&1|2:r&1),e):(xa(e),null);case 22:case 23:return f$(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?co&1073741824&&(xa(e),e.subtreeFlags&6&&(e.flags|=8192)):xa(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function zve(t,e){switch(H4(e),e.tag){case 1:return Ls(e.type)&&mN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yb(),Qr(Fs),Qr(Ba),e$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return J4(e),null;case 13:if(Qr(hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Kb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qr(hn),null;case 4:return Yb(),null;case 10:return X4(e.type._context),null;case 22:case 23:return f$(),null;case 24:return null;default:return null}}var jC=!1,Oa=!1,qve=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function By(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Tn(t,e,n)}else r.current=null}function xF(t,e,r){try{r()}catch(n){Tn(t,e,n)}}var T8=!1;function Hve(t,e){if(iF=fN,t=WZ(),z4(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++u===i&&(o=s),h===a&&++c===n&&(l=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(aF={focusedElem:t,selectionRange:r},fN=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Fl(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(A){Tn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return p=T8,T8=!1,p}function Fx(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&xF(e,r,a)}i=i.next}while(i!==n)}}function lM(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function AF(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function UJ(t){var e=t.alternate;e!==null&&(t.alternate=null,UJ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tc],delete e[cA],delete e[lF],delete e[Tve],delete e[Dve])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zJ(t){return t.tag===5||t.tag===3||t.tag===4}function D8(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zJ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _F(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=pN));else if(n!==4&&(t=t.child,t!==null))for(_F(t,e,r),t=t.sibling;t!==null;)_F(t,e,r),t=t.sibling}function EF(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(EF(t,e,r),t=t.sibling;t!==null;)EF(t,e,r),t=t.sibling}var ta=null,Xl=!1;function Th(t,e,r){for(r=r.child;r!==null;)qJ(t,e,r),r=r.sibling}function qJ(t,e,r){if(ac&&typeof ac.onCommitFiberUnmount=="function")try{ac.onCommitFiberUnmount(eM,r)}catch{}switch(r.tag){case 5:Oa||By(r,e);case 6:var n=ta,i=Xl;ta=null,Th(t,e,r),ta=n,Xl=i,ta!==null&&(Xl?(t=ta,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ta.removeChild(r.stateNode));break;case 18:ta!==null&&(Xl?(t=ta,r=r.stateNode,t.nodeType===8?rk(t.parentNode,r):t.nodeType===1&&rk(t,r),aA(t)):rk(ta,r.stateNode));break;case 4:n=ta,i=Xl,ta=r.stateNode.containerInfo,Xl=!0,Th(t,e,r),ta=n,Xl=i;break;case 0:case 11:case 14:case 15:if(!Oa&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&xF(r,e,s),i=i.next}while(i!==n)}Th(t,e,r);break;case 1:if(!Oa&&(By(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Tn(r,e,o)}Th(t,e,r);break;case 21:Th(t,e,r);break;case 22:r.mode&1?(Oa=(n=Oa)||r.memoizedState!==null,Th(t,e,r),Oa=n):Th(t,e,r);break;default:Th(t,e,r)}}function N8(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qve),e.forEach(function(n){var i=eye.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ml(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:ta=o.stateNode,Xl=!1;break e;case 3:ta=o.stateNode.containerInfo,Xl=!0;break e;case 4:ta=o.stateNode.containerInfo,Xl=!0;break e}o=o.return}if(ta===null)throw Error(Fe(160));qJ(a,s,i),ta=null,Xl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Tn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HJ(e,t),e=e.sibling}function HJ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ml(e,t),Su(t),n&4){try{Fx(3,t,t.return),lM(3,t)}catch(m){Tn(t,t.return,m)}try{Fx(5,t,t.return)}catch(m){Tn(t,t.return,m)}}break;case 1:Ml(e,t),Su(t),n&512&&r!==null&&By(r,r.return);break;case 5:if(Ml(e,t),Su(t),n&512&&r!==null&&By(r,r.return),t.flags&32){var i=t.stateNode;try{tA(i,"")}catch(m){Tn(t,t.return,m)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&dZ(i,a),KR(o,s);var u=KR(o,a);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?yZ(i,f):c==="dangerouslySetInnerHTML"?gZ(i,f):c==="children"?tA(i,f):P4(i,c,f,u)}switch(o){case"input":zR(i,a);break;case"textarea":pZ(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?n0(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?n0(i,!!a.multiple,a.defaultValue,!0):n0(i,!!a.multiple,a.multiple?[]:"",!1))}i[cA]=a}catch(m){Tn(t,t.return,m)}}break;case 6:if(Ml(e,t),Su(t),n&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Tn(t,t.return,m)}}break;case 3:if(Ml(e,t),Su(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{aA(e.containerInfo)}catch(m){Tn(t,t.return,m)}break;case 4:Ml(e,t),Su(t);break;case 13:Ml(e,t),Su(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(u$=$n())),n&4&&N8(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Oa=(u=Oa)||c,Ml(e,t),Oa=u):Ml(e,t),Su(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ze=t,c=t.child;c!==null;){for(f=Ze=c;Ze!==null;){switch(h=Ze,d=h.child,h.tag){case 0:case 11:case 14:case 15:Fx(4,h,h.return);break;case 1:By(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Tn(n,r,m)}}break;case 5:By(h,h.return);break;case 22:if(h.memoizedState!==null){M8(f);continue}}d!==null?(d.return=h,Ze=d):M8(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=vZ("display",s))}catch(m){Tn(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Tn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ml(e,t),Su(t),n&4&&N8(t);break;case 21:break;default:Ml(e,t),Su(t)}}function Su(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(zJ(r)){var n=r;break e}r=r.return}throw Error(Fe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(tA(i,""),n.flags&=-33);var a=D8(t);EF(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=D8(t);_F(t,o,s);break;default:throw Error(Fe(161))}}catch(l){Tn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wve(t,e,r){Ze=t,WJ(t)}function WJ(t,e,r){for(var n=(t.mode&1)!==0;Ze!==null;){var i=Ze,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||jC;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Oa;o=jC;var u=Oa;if(jC=s,(Oa=l)&&!u)for(Ze=i;Ze!==null;)s=Ze,l=s.child,s.tag===22&&s.memoizedState!==null?I8(i):l!==null?(l.return=s,Ze=l):I8(i);for(;a!==null;)Ze=a,WJ(a),a=a.sibling;Ze=i,jC=o,Oa=u}P8(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ze=a):P8(t)}}function P8(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oa||lM(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Oa)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Fl(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&p8(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}p8(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&aA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Oa||e.flags&512&&AF(e)}catch(h){Tn(e,e.return,h)}}if(e===t){Ze=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ze=r;break}Ze=e.return}}function M8(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ze=r;break}Ze=e.return}}function I8(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lM(4,e)}catch(l){Tn(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Tn(e,i,l)}}var a=e.return;try{AF(e)}catch(l){Tn(e,a,l)}break;case 5:var s=e.return;try{AF(e)}catch(l){Tn(e,s,l)}}}catch(l){Tn(e,e.return,l)}if(e===t){Ze=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ze=o;break}Ze=e.return}}var Gve=Math.ceil,SN=hh.ReactCurrentDispatcher,o$=hh.ReactCurrentOwner,dl=hh.ReactCurrentBatchConfig,ir=0,ji=null,Kn=null,ha=0,co=0,$y=Pp(0),ci=0,gA=null,uv=0,uM=0,l$=0,Lx=null,Ns=null,u$=0,Zb=1/0,Bc=null,CN=!1,SF=null,Qd=null,VC=!1,Vd=null,TN=0,Bx=0,CF=null,JT=-1,eD=0;function ns(){return ir&6?$n():JT!==-1?JT:JT=$n()}function Zd(t){return t.mode&1?ir&2&&ha!==0?ha&-ha:Pve.transition!==null?(eD===0&&(eD=PZ()),eD):(t=br,t!==0||(t=window.event,t=t===void 0?16:LZ(t.type)),t):1}function au(t,e,r,n){if(50<Bx)throw Bx=0,CF=null,Error(Fe(185));ZE(t,r,n),(!(ir&2)||t!==ji)&&(t===ji&&(!(ir&2)&&(uM|=r),ci===4&&Uh(t,ha)),Bs(t,n),r===1&&ir===0&&!(e.mode&1)&&(Zb=$n()+500,aM&&Mp()))}function Bs(t,e){var r=t.callbackNode;Pge(t,e);var n=cN(t,t===ji?ha:0);if(n===0)r!==null&&VU(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&VU(r),e===1)t.tag===0?Nve(O8.bind(null,t)):rJ(O8.bind(null,t)),Sve(function(){!(ir&6)&&Mp()}),r=null;else{switch(MZ(n)){case 1:r=R4;break;case 4:r=DZ;break;case 16:r=uN;break;case 536870912:r=NZ;break;default:r=uN}r=eee(r,GJ.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function GJ(t,e){if(JT=-1,eD=0,ir&6)throw Error(Fe(327));var r=t.callbackNode;if(l0()&&t.callbackNode!==r)return null;var n=cN(t,t===ji?ha:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=DN(t,n);else{e=n;var i=ir;ir|=2;var a=XJ();(ji!==t||ha!==e)&&(Bc=null,Zb=$n()+500,Xg(t,e));do try{Yve();break}catch(o){KJ(t,o)}while(!0);K4(),SN.current=a,ir=i,Kn!==null?e=0:(ji=null,ha=0,e=ci)}if(e!==0){if(e===2&&(i=JR(t),i!==0&&(n=i,e=TF(t,i))),e===1)throw r=gA,Xg(t,0),Uh(t,n),Bs(t,$n()),r;if(e===6)Uh(t,n);else{if(i=t.current.alternate,!(n&30)&&!Kve(i)&&(e=DN(t,n),e===2&&(a=JR(t),a!==0&&(n=a,e=TF(t,a))),e===1))throw r=gA,Xg(t,0),Uh(t,n),Bs(t,$n()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:um(t,Ns,Bc);break;case 3:if(Uh(t,n),(n&130023424)===n&&(e=u$+500-$n(),10<e)){if(cN(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ns(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oF(um.bind(null,t,Ns,Bc),e);break}um(t,Ns,Bc);break;case 4:if(Uh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-iu(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=$n()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gve(n/1960))-n,10<n){t.timeoutHandle=oF(um.bind(null,t,Ns,Bc),n);break}um(t,Ns,Bc);break;case 5:um(t,Ns,Bc);break;default:throw Error(Fe(329))}}}return Bs(t,$n()),t.callbackNode===r?GJ.bind(null,t):null}function TF(t,e){var r=Lx;return t.current.memoizedState.isDehydrated&&(Xg(t,e).flags|=256),t=DN(t,e),t!==2&&(e=Ns,Ns=r,e!==null&&DF(e)),t}function DF(t){Ns===null?Ns=t:Ns.push.apply(Ns,t)}function Kve(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!lu(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uh(t,e){for(e&=~l$,e&=~uM,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-iu(e),n=1<<r;t[r]=-1,e&=~n}}function O8(t){if(ir&6)throw Error(Fe(327));l0();var e=cN(t,0);if(!(e&1))return Bs(t,$n()),null;var r=DN(t,e);if(t.tag!==0&&r===2){var n=JR(t);n!==0&&(e=n,r=TF(t,n))}if(r===1)throw r=gA,Xg(t,0),Uh(t,e),Bs(t,$n()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,um(t,Ns,Bc),Bs(t,$n()),null}function c$(t,e){var r=ir;ir|=1;try{return t(e)}finally{ir=r,ir===0&&(Zb=$n()+500,aM&&Mp())}}function cv(t){Vd!==null&&Vd.tag===0&&!(ir&6)&&l0();var e=ir;ir|=1;var r=dl.transition,n=br;try{if(dl.transition=null,br=1,t)return t()}finally{br=n,dl.transition=r,ir=e,!(ir&6)&&Mp()}}function f$(){co=$y.current,Qr($y)}function Xg(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Eve(r)),Kn!==null)for(r=Kn.return;r!==null;){var n=r;switch(H4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mN();break;case 3:Yb(),Qr(Fs),Qr(Ba),e$();break;case 5:J4(n);break;case 4:Yb();break;case 13:Qr(hn);break;case 19:Qr(hn);break;case 10:X4(n.type._context);break;case 22:case 23:f$()}r=r.return}if(ji=t,Kn=t=Jd(t.current,null),ha=co=e,ci=0,gA=null,l$=uM=uv=0,Ns=Lx=null,Em!==null){for(e=0;e<Em.length;e++)if(r=Em[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Em=null}return t}function KJ(t,e){do{var r=Kn;try{if(K4(),YT.current=EN,_N){for(var n=pn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_N=!1}if(lv=0,Li=oi=pn=null,Rx=!1,dA=0,o$.current=null,r===null||r.return===null){ci=1,gA=e,Kn=null;break}e:{var a=t,s=r.return,o=r,l=e;if(e=ha,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=w8(s);if(d!==null){d.flags&=-257,x8(d,s,o,a,e),d.mode&1&&b8(a,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){b8(a,u,e),h$();break e}l=Error(Fe(426))}}else if(an&&o.mode&1){var v=w8(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),x8(v,s,o,a,e),W4(Qb(l,o));break e}}a=l=Qb(l,o),ci!==4&&(ci=2),Lx===null?Lx=[a]:Lx.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=MJ(a,l,e);d8(a,y);break e;case 1:o=l;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qd===null||!Qd.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=IJ(a,o,e);d8(a,A);break e}}a=a.return}while(a!==null)}QJ(r)}catch(x){e=x,Kn===r&&r!==null&&(Kn=r=r.return);continue}break}while(!0)}function XJ(){var t=SN.current;return SN.current=EN,t===null?EN:t}function h$(){(ci===0||ci===3||ci===2)&&(ci=4),ji===null||!(uv&268435455)&&!(uM&268435455)||Uh(ji,ha)}function DN(t,e){var r=ir;ir|=2;var n=XJ();(ji!==t||ha!==e)&&(Bc=null,Xg(t,e));do try{Xve();break}catch(i){KJ(t,i)}while(!0);if(K4(),ir=r,SN.current=n,Kn!==null)throw Error(Fe(261));return ji=null,ha=0,ci}function Xve(){for(;Kn!==null;)YJ(Kn)}function Yve(){for(;Kn!==null&&!xge();)YJ(Kn)}function YJ(t){var e=JJ(t.alternate,t,co);t.memoizedProps=t.pendingProps,e===null?QJ(t):Kn=e,o$.current=null}function QJ(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zve(r,e),r!==null){r.flags&=32767,Kn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ci=6,Kn=null;return}}else if(r=Uve(r,e,co),r!==null){Kn=r;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=t}while(e!==null);ci===0&&(ci=5)}function um(t,e,r){var n=br,i=dl.transition;try{dl.transition=null,br=1,Qve(t,e,r,n)}finally{dl.transition=i,br=n}return null}function Qve(t,e,r,n){do l0();while(Vd!==null);if(ir&6)throw Error(Fe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Mge(t,a),t===ji&&(Kn=ji=null,ha=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||VC||(VC=!0,eee(uN,function(){return l0(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=dl.transition,dl.transition=null;var s=br;br=1;var o=ir;ir|=4,o$.current=null,Hve(t,r),HJ(r,t),vve(aF),fN=!!iF,aF=iF=null,t.current=r,Wve(r),Age(),ir=o,br=s,dl.transition=a}else t.current=r;if(VC&&(VC=!1,Vd=t,TN=i),a=t.pendingLanes,a===0&&(Qd=null),Sge(r.stateNode),Bs(t,$n()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(CN)throw CN=!1,t=SF,SF=null,t;return TN&1&&t.tag!==0&&l0(),a=t.pendingLanes,a&1?t===CF?Bx++:(Bx=0,CF=t):Bx=0,Mp(),null}function l0(){if(Vd!==null){var t=MZ(TN),e=dl.transition,r=br;try{if(dl.transition=null,br=16>t?16:t,Vd===null)var n=!1;else{if(t=Vd,Vd=null,TN=0,ir&6)throw Error(Fe(331));var i=ir;for(ir|=4,Ze=t.current;Ze!==null;){var a=Ze,s=a.child;if(Ze.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Ze=u;Ze!==null;){var c=Ze;switch(c.tag){case 0:case 11:case 15:Fx(8,c,a)}var f=c.child;if(f!==null)f.return=c,Ze=f;else for(;Ze!==null;){c=Ze;var h=c.sibling,d=c.return;if(UJ(c),c===u){Ze=null;break}if(h!==null){h.return=d,Ze=h;break}Ze=d}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ze=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Ze=s;else e:for(;Ze!==null;){if(a=Ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fx(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ze=y;break e}Ze=a.return}}var w=t.current;for(Ze=w;Ze!==null;){s=Ze;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,Ze=b;else e:for(s=w;Ze!==null;){if(o=Ze,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lM(9,o)}}catch(x){Tn(o,o.return,x)}if(o===s){Ze=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Ze=A;break e}Ze=o.return}}if(ir=i,Mp(),ac&&typeof ac.onPostCommitFiberRoot=="function")try{ac.onPostCommitFiberRoot(eM,t)}catch{}n=!0}return n}finally{br=r,dl.transition=e}}return!1}function k8(t,e,r){e=Qb(r,e),e=MJ(t,e,1),t=Yd(t,e,1),e=ns(),t!==null&&(ZE(t,1,e),Bs(t,e))}function Tn(t,e,r){if(t.tag===3)k8(t,t,r);else for(;e!==null;){if(e.tag===3){k8(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qd===null||!Qd.has(n))){t=Qb(r,t),t=IJ(e,t,1),e=Yd(e,t,1),t=ns(),e!==null&&(ZE(e,1,t),Bs(e,t));break}}e=e.return}}function Zve(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ns(),t.pingedLanes|=t.suspendedLanes&r,ji===t&&(ha&r)===r&&(ci===4||ci===3&&(ha&130023424)===ha&&500>$n()-u$?Xg(t,0):l$|=r),Bs(t,e)}function ZJ(t,e){e===0&&(t.mode&1?(e=MC,MC<<=1,!(MC&130023424)&&(MC=4194304)):e=1);var r=ns();t=Gf(t,e),t!==null&&(ZE(t,e,r),Bs(t,r))}function Jve(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ZJ(t,r)}function eye(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),ZJ(t,r)}var JJ;JJ=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fs.current)Ms=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ms=!1,Vve(t,e,r);Ms=!!(t.flags&131072)}else Ms=!1,an&&e.flags&1048576&&nJ(e,yN,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ZT(t,e),t=e.pendingProps;var i=Gb(e,Ba.current);o0(e,r),i=r$(null,e,n,t,i,r);var a=n$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ls(n)?(a=!0,gN(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q4(e),i.updater=oM,e.stateNode=i,i._reactInternals=e,pF(e,n,t,r),e=vF(null,e,n,!0,a,r)):(e.tag=0,an&&a&&q4(e),Ja(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ZT(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=rye(n),t=Fl(n,t),i){case 0:e=gF(null,e,n,t,r);break e;case 1:e=E8(null,e,n,t,r);break e;case 11:e=A8(null,e,n,t,r);break e;case 14:e=_8(null,e,n,Fl(n.type,t),r);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fl(n,i),gF(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fl(n,i),E8(t,e,n,i,r);case 3:e:{if(FJ(e),t===null)throw Error(Fe(387));n=e.pendingProps,a=e.memoizedState,i=a.element,uJ(t,e),xN(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Qb(Error(Fe(423)),e),e=S8(t,e,n,r,i);break e}else if(n!==i){i=Qb(Error(Fe(424)),e),e=S8(t,e,n,r,i);break e}else for(yo=Xd(e.stateNode.containerInfo.firstChild),xo=e,an=!0,Yl=null,r=oJ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kb(),n===i){e=Kf(t,e,r);break e}Ja(t,e,n,r)}e=e.child}return e;case 5:return cJ(e),t===null&&fF(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,sF(n,i)?s=null:a!==null&&sF(n,a)&&(e.flags|=32),RJ(t,e),Ja(t,e,s,r),e.child;case 6:return t===null&&fF(e),null;case 13:return LJ(t,e,r);case 4:return Z4(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Xb(e,null,n,r):Ja(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fl(n,i),A8(t,e,n,i,r);case 7:return Ja(t,e,e.pendingProps,r),e.child;case 8:return Ja(t,e,e.pendingProps.children,r),e.child;case 12:return Ja(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,qr(bN,n._currentValue),n._currentValue=s,a!==null)if(lu(a.value,s)){if(a.children===i.children&&!Fs.current){e=Kf(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Rf(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),hF(a.return,r,e),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Fe(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),hF(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ja(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,o0(e,r),i=yl(i),n=n(i),e.flags|=1,Ja(t,e,n,r),e.child;case 14:return n=e.type,i=Fl(n,e.pendingProps),i=Fl(n.type,i),_8(t,e,n,i,r);case 15:return OJ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Fl(n,i),ZT(t,e),e.tag=1,Ls(n)?(t=!0,gN(e)):t=!1,o0(e,r),PJ(e,n,i),pF(e,n,i,r),vF(null,e,n,!0,t,r);case 19:return BJ(t,e,r);case 22:return kJ(t,e,r)}throw Error(Fe(156,e.tag))};function eee(t,e){return TZ(t,e)}function tye(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ul(t,e,r,n){return new tye(t,e,r,n)}function d$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rye(t){if(typeof t=="function")return d$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I4)return 11;if(t===O4)return 14}return 2}function Jd(t,e){var r=t.alternate;return r===null?(r=ul(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function tD(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")d$(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ny:return Yg(r.children,i,a,e);case M4:s=8,i|=8;break;case BR:return t=ul(12,r,e,i|2),t.elementType=BR,t.lanes=a,t;case $R:return t=ul(13,r,e,i),t.elementType=$R,t.lanes=a,t;case jR:return t=ul(19,r,e,i),t.elementType=jR,t.lanes=a,t;case cZ:return cM(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lZ:s=10;break e;case uZ:s=9;break e;case I4:s=11;break e;case O4:s=14;break e;case Rh:s=16,n=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=ul(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Yg(t,e,r,n){return t=ul(7,t,n,e),t.lanes=r,t}function cM(t,e,r,n){return t=ul(22,t,n,e),t.elementType=cZ,t.lanes=r,t.stateNode={isHidden:!1},t}function ck(t,e,r){return t=ul(6,t,null,e),t.lanes=r,t}function fk(t,e,r){return e=ul(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nye(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=HO(0),this.expirationTimes=HO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=HO(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function p$(t,e,r,n,i,a,s,o,l){return t=new nye(t,e,r,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ul(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q4(a),t}function iye(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dy,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function tee(t){if(!t)return up;t=t._reactInternals;e:{if(Mv(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ls(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(Ls(r))return tJ(t,r,e)}return e}function ree(t,e,r,n,i,a,s,o,l){return t=p$(r,n,!0,t,i,a,s,o,l),t.context=tee(null),r=t.current,n=ns(),i=Zd(r),a=Rf(n,i),a.callback=e??null,Yd(r,a,i),t.current.lanes=i,ZE(t,i,n),Bs(t,n),t}function fM(t,e,r,n){var i=e.current,a=ns(),s=Zd(i);return r=tee(r),e.context===null?e.context=r:e.pendingContext=r,e=Rf(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Yd(i,e,s),t!==null&&(au(t,i,s,a),XT(t,i,s)),s}function NN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R8(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function m$(t,e){R8(t,e),(t=t.alternate)&&R8(t,e)}function aye(){return null}var nee=typeof reportError=="function"?reportError:function(t){console.error(t)};function g$(t){this._internalRoot=t}hM.prototype.render=g$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));fM(t,e,null,null)};hM.prototype.unmount=g$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cv(function(){fM(null,t,null,null)}),e[Wf]=null}};function hM(t){this._internalRoot=t}hM.prototype.unstable_scheduleHydration=function(t){if(t){var e=kZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Vh.length&&e!==0&&e<Vh[r].priority;r++);Vh.splice(r,0,t),r===0&&FZ(t)}};function v$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F8(){}function sye(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=NN(s);a.call(u)}}var s=ree(e,n,t,0,null,!1,!1,"",F8);return t._reactRootContainer=s,t[Wf]=s.current,lA(t.nodeType===8?t.parentNode:t),cv(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=NN(l);o.call(u)}}var l=p$(t,0,!1,null,null,!1,!1,"",F8);return t._reactRootContainer=l,t[Wf]=l.current,lA(t.nodeType===8?t.parentNode:t),cv(function(){fM(e,l,r,n)}),l}function pM(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=NN(s);o.call(l)}}fM(e,s,t,i)}else s=sye(r,e,t,i,n);return NN(s)}IZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xw(e.pendingLanes);r!==0&&(F4(e,r|1),Bs(e,$n()),!(ir&6)&&(Zb=$n()+500,Mp()))}break;case 13:cv(function(){var n=Gf(t,1);if(n!==null){var i=ns();au(n,t,1,i)}}),m$(t,1)}};L4=function(t){if(t.tag===13){var e=Gf(t,134217728);if(e!==null){var r=ns();au(e,t,134217728,r)}m$(t,134217728)}};OZ=function(t){if(t.tag===13){var e=Zd(t),r=Gf(t,e);if(r!==null){var n=ns();au(r,t,e,n)}m$(t,e)}};kZ=function(){return br};RZ=function(t,e){var r=br;try{return br=t,e()}finally{br=r}};YR=function(t,e,r){switch(e){case"input":if(zR(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=iM(n);if(!i)throw Error(Fe(90));hZ(n),zR(n,i)}}}break;case"textarea":pZ(t,r);break;case"select":e=r.value,e!=null&&n0(t,!!r.multiple,e,!1)}};xZ=c$;AZ=cv;var oye={usingClientEntryPoint:!1,Events:[eS,Oy,iM,bZ,wZ,c$]},Pw={findFiberByHostInstance:_m,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lye={bundleType:Pw.bundleType,version:Pw.version,rendererPackageName:Pw.rendererPackageName,rendererConfig:Pw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SZ(t),t===null?null:t.stateNode},findFiberByHostInstance:Pw.findFiberByHostInstance||aye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UC.isDisabled&&UC.supportsFiber)try{eM=UC.inject(lye),ac=UC}catch{}}Do.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oye;Do.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v$(e))throw Error(Fe(200));return iye(t,e,null,r)};Do.createRoot=function(t,e){if(!v$(t))throw Error(Fe(299));var r=!1,n="",i=nee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=p$(t,1,!1,null,null,r,!1,n,i),t[Wf]=e.current,lA(t.nodeType===8?t.parentNode:t),new g$(e)};Do.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=SZ(e),t=t===null?null:t.stateNode,t};Do.flushSync=function(t){return cv(t)};Do.hydrate=function(t,e,r){if(!dM(e))throw Error(Fe(200));return pM(null,t,e,!0,r)};Do.hydrateRoot=function(t,e,r){if(!v$(t))throw Error(Fe(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=nee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=ree(e,null,t,1,r??null,i,!1,a,s),t[Wf]=e.current,lA(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new hM(e)};Do.render=function(t,e,r){if(!dM(e))throw Error(Fe(200));return pM(null,t,e,!1,r)};Do.unmountComponentAtNode=function(t){if(!dM(t))throw Error(Fe(40));return t._reactRootContainer?(cv(function(){pM(null,null,t,!1,function(){t._reactRootContainer=null,t[Wf]=null})}),!0):!1};Do.unstable_batchedUpdates=c$;Do.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dM(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return pM(t,e,r,!1,n)};Do.version="18.3.1-next-f1338f8080-20240426";function iee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iee)}catch(t){console.error(t)}}iee(),iZ.exports=Do;var mM=iZ.exports,L8=mM;FR.createRoot=L8.createRoot,FR.hydrateRoot=L8.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vA.apply(this,arguments)}var Ud;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ud||(Ud={}));const B8="popstate";function uye(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return NF("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:PN(i)}return fye(e,r,null,t)}function Vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cye(){return Math.random().toString(36).substr(2,8)}function $8(t,e){return{usr:t.state,key:t.key,idx:e}}function NF(t,e,r,n){return r===void 0&&(r=null),vA({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?N1(e):e,{state:r,key:e&&e.key||n||cye()})}function PN(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function N1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function fye(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=Ud.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(vA({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function f(){o=Ud.Pop;let v=c(),y=v==null?null:v-u;u=v,l&&l({action:o,location:m.location,delta:y})}function h(v,y){o=Ud.Push;let w=NF(m.location,v,y);u=c()+1;let b=$8(w,u),A=m.createHref(w);try{s.pushState(b,"",A)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(A)}a&&l&&l({action:o,location:m.location,delta:1})}function d(v,y){o=Ud.Replace;let w=NF(m.location,v,y);u=c();let b=$8(w,u),A=m.createHref(w);s.replaceState(b,"",A),a&&l&&l({action:o,location:m.location,delta:0})}function p(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:PN(v);return w=w.replace(/ $/,"%20"),Vn(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let m={get action(){return o},get location(){return t(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(B8,f),l=v,()=>{i.removeEventListener(B8,f),l=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:d,go(v){return s.go(v)}};return m}var j8;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(j8||(j8={}));function hye(t,e,r){return r===void 0&&(r="/"),dye(t,e,r)}function dye(t,e,r,n){let i=typeof e=="string"?N1(e):e,a=b$(i.pathname||"/",r);if(a==null)return null;let s=aee(t);pye(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=Cye(a);o=_ye(s[l],u)}return o}function aee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Vn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=ep([n,l.relativePath]),c=r.concat(l);a.children&&a.children.length>0&&(Vn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),aee(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:xye(u,a.index),routesMeta:c})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of see(a.path))i(a,s,l)}),e}function see(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=see(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function pye(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Aye(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const mye=/^:[\w-]+$/,gye=3,vye=2,yye=1,bye=10,wye=-2,V8=t=>t==="*";function xye(t,e){let r=t.split("/"),n=r.length;return r.some(V8)&&(n+=wye),e&&(n+=vye),r.filter(i=>!V8(i)).reduce((i,a)=>i+(mye.test(a)?gye:a===""?yye:bye),n)}function Aye(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function _ye(t,e,r){let{routesMeta:n}=t,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=a==="/"?e:e.slice(a.length)||"/",f=Eye({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:ep([a,f.pathname]),pathnameBase:Mye(ep([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=ep([a,f.pathnameBase]))}return s}function Eye(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Sye(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let m=o[f]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function Sye(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),y$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Cye(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return y$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function b$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Tye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dye=t=>Tye.test(t);function Nye(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?N1(t):t,a;if(r)if(Dye(r))a=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),y$(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?a=U8(r.substring(1),"/"):a=U8(r,e)}else a=e;return{pathname:a,search:Iye(n),hash:Oye(i)}}function U8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function hk(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pye(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function w$(t,e){let r=Pye(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function x$(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=N1(t):(i=vA({},t),Vn(!i.pathname||!i.pathname.includes("?"),hk("?","pathname","search",i)),Vn(!i.pathname||!i.pathname.includes("#"),hk("#","pathname","hash",i)),Vn(!i.search||!i.search.includes("#"),hk("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?e[f]:"/"}let l=Nye(i,o),u=s&&s!=="/"&&s.endsWith("/"),c=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ep=t=>t.join("/").replace(/\/\/+/g,"/"),Mye=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Iye=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Oye=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kye(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oee=["post","put","patch","delete"];new Set(oee);const Rye=["get",...oee];new Set(Rye);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yA.apply(this,arguments)}const A$=O.createContext(null),Fye=O.createContext(null),Ip=O.createContext(null),gM=O.createContext(null),Cc=O.createContext({outlet:null,matches:[],isDataRoute:!1}),lee=O.createContext(null);function Lye(t,e){let{relative:r}=e===void 0?{}:e;P1()||Vn(!1);let{basename:n,navigator:i}=O.useContext(Ip),{hash:a,pathname:s,search:o}=fee(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:ep([n,s])),i.createHref({pathname:l,search:o,hash:a})}function P1(){return O.useContext(gM)!=null}function M1(){return P1()||Vn(!1),O.useContext(gM).location}function uee(t){O.useContext(Ip).static||O.useLayoutEffect(t)}function I1(){let{isDataRoute:t}=O.useContext(Cc);return t?Zye():Bye()}function Bye(){P1()||Vn(!1);let t=O.useContext(A$),{basename:e,future:r,navigator:n}=O.useContext(Ip),{matches:i}=O.useContext(Cc),{pathname:a}=M1(),s=JSON.stringify(w$(i,r.v7_relativeSplatPath)),o=O.useRef(!1);return uee(()=>{o.current=!0}),O.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=x$(u,JSON.parse(s),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ep([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,a,t])}const $ye=O.createContext(null);function jye(t){let e=O.useContext(Cc).outlet;return e&&O.createElement($ye.Provider,{value:t},e)}function cee(){let{matches:t}=O.useContext(Cc),e=t[t.length-1];return e?e.params:{}}function fee(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=O.useContext(Ip),{matches:i}=O.useContext(Cc),{pathname:a}=M1(),s=JSON.stringify(w$(i,n.v7_relativeSplatPath));return O.useMemo(()=>x$(t,JSON.parse(s),a,r==="path"),[t,s,a,r])}function Vye(t,e){return Uye(t,e)}function Uye(t,e,r,n){P1()||Vn(!1);let{navigator:i}=O.useContext(Ip),{matches:a}=O.useContext(Cc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=M1(),c;if(e){var f;let v=typeof e=="string"?N1(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Vn(!1),c=v}else c=u;let h=c.pathname||"/",d=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=hye(t,{pathname:d}),m=Gye(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:ep([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:ep([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return e&&m?O.createElement(gM.Provider,{value:{location:yA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ud.Pop}},m):m}function zye(){let t=Qye(),e=kye(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),r?O.createElement("pre",{style:i},r):null,null)}const qye=O.createElement(zye,null);class Hye extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?O.createElement(Cc.Provider,{value:this.props.routeContext},O.createElement(lee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Wye(t){let{routeContext:e,match:r,children:n}=t,i=O.useContext(A$);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(Cc.Provider,{value:e},n)}function Gye(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let c=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);c>=0||Vn(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:d}=r,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,h)=>{let d,p=!1,m=null,v=null;r&&(d=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||qye,l&&(u<0&&h===0?(Jye("route-fallback"),p=!0,v=null):u===h&&(p=!0,v=f.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,h+1)),w=()=>{let b;return d?b=m:p?b=v:f.route.Component?b=O.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,O.createElement(Wye,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?O.createElement(Hye,{location:r.location,revalidation:r.revalidation,component:m,error:d,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var hee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hee||{}),dee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dee||{});function Kye(t){let e=O.useContext(A$);return e||Vn(!1),e}function Xye(t){let e=O.useContext(Fye);return e||Vn(!1),e}function Yye(t){let e=O.useContext(Cc);return e||Vn(!1),e}function pee(t){let e=Yye(),r=e.matches[e.matches.length-1];return r.route.id||Vn(!1),r.route.id}function Qye(){var t;let e=O.useContext(lee),r=Xye(),n=pee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Zye(){let{router:t}=Kye(hee.UseNavigateStable),e=pee(dee.UseNavigateStable),r=O.useRef(!1);return uee(()=>{r.current=!0}),O.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yA({fromRouteId:e},a)))},[t,e])}const z8={};function Jye(t,e,r){z8[t]||(z8[t]=!0)}function e0e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function t0e(t){let{to:e,replace:r,state:n,relative:i}=t;P1()||Vn(!1);let{future:a,static:s}=O.useContext(Ip),{matches:o}=O.useContext(Cc),{pathname:l}=M1(),u=I1(),c=x$(e,w$(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(c);return O.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function r0e(t){return jye(t.context)}function Gi(t){Vn(!1)}function n0e(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ud.Pop,navigator:a,static:s=!1,future:o}=t;P1()&&Vn(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:a,static:s,future:yA({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=N1(n));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:p="default"}=n,m=O.useMemo(()=>{let v=b$(c,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:d,key:p},navigationType:i}},[l,c,f,h,d,p,i]);return m==null?null:O.createElement(Ip.Provider,{value:u},O.createElement(gM.Provider,{children:r,value:m}))}function i0e(t){let{children:e,location:r}=t;return Vye(PF(e),r)}new Promise(()=>{});function PF(t,e){e===void 0&&(e=[]);let r=[];return O.Children.forEach(t,(n,i)=>{if(!O.isValidElement(n))return;let a=[...e,i];if(n.type===O.Fragment){r.push.apply(r,PF(n.props.children,a));return}n.type!==Gi&&Vn(!1),!n.props.index||!n.props.children||Vn(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=PF(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(this,arguments)}function a0e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function s0e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function o0e(t,e){return t.button===0&&(!e||e==="_self")&&!s0e(t)}const l0e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u0e="6";try{window.__reactRouterVersion=u0e}catch{}const c0e="startTransition",q8=rZ[c0e];function f0e(t){let{basename:e,children:r,future:n,window:i}=t,a=O.useRef();a.current==null&&(a.current=uye({window:i,v5Compat:!0}));let s=a.current,[o,l]=O.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},c=O.useCallback(f=>{u&&q8?q8(()=>l(f)):l(f)},[l,u]);return O.useLayoutEffect(()=>s.listen(c),[s,c]),O.useEffect(()=>e0e(n),[n]),O.createElement(n0e,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const h0e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d0e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rr=O.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:c,viewTransition:f}=e,h=a0e(e,l0e),{basename:d}=O.useContext(Ip),p,m=!1;if(typeof u=="string"&&d0e.test(u)&&(p=u,h0e))try{let b=new URL(window.location.href),A=u.startsWith("//")?new URL(b.protocol+u):new URL(u),x=b$(A.pathname,d);A.origin===b.origin&&x!=null?u=x+A.search+A.hash:m=!0}catch{}let v=Lye(u,{relative:i}),y=p0e(u,{replace:s,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:f});function w(b){n&&n(b),b.defaultPrevented||y(b)}return O.createElement("a",MF({},h,{href:p||v,onClick:m||a?n:w,ref:r,target:l}))});var H8;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(H8||(H8={}));var W8;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(W8||(W8={}));function p0e(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=I1(),u=M1(),c=fee(t,{relative:s});return O.useCallback(f=>{if(o0e(f,r)){f.preventDefault();let h=n!==void 0?n:PN(u)===PN(c);l(t,{replace:h,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,c,n,i,r,t,a,s,o])}const mee=O.createContext(),Cl=()=>{const t=O.useContext(mee);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},m0e=({children:t})=>{const[e,r]=O.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});O.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{r(i=>!i)};return I.jsx(mee.Provider,{value:{isDark:e,toggleTheme:n},children:t})},gee="authToken",vee="user",g0e=()=>localStorage.getItem(gee),v0e=()=>{localStorage.removeItem(gee)},fv=()=>{const t=localStorage.getItem(vee);return t?JSON.parse(t):null},y0e=()=>{localStorage.removeItem(vee)},IF=()=>!!g0e(),b0e=()=>{v0e(),y0e()};function w0e(){const{isDark:t,toggleTheme:e}=Cl(),r=I1(),[n,i]=O.useState(!1),[a,s]=O.useState(!1),[o,l]=O.useState(null),[u,c]=O.useState(!1);O.useEffect(()=>{IF()&&(l(fv()),c(!0));const d=()=>{IF()?(l(fv()),c(!0)):(l(null),c(!1))};return window.addEventListener("auth-change",d),()=>window.removeEventListener("auth-change",d)},[]);const f=()=>{b0e(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),c(!1),s(!1),i(!1),window.dispatchEvent(new Event("auth-change")),r("/")},h=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/visualizations",label:""},{to:"/calculator",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...u&&o?[{to:"/notes",label:""}]:[]];return I.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${t?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx(Rr,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),I.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[h.map(d=>I.jsx(Rr,{to:d.to,className:`transition text-sm lg:text-base ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:d.label},d.to)),I.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),u&&o?I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>s(!a),className:`p-2 rounded-lg border transition ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),a&&I.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[I.jsx(Rr,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx(Rr,{to:"/bookmarks",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx(Rr,{to:"/notes",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx("button",{onClick:f,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${t?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):I.jsxs("div",{className:"flex gap-2",children:[I.jsx(Rr,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${t?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),I.jsx(Rr,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),I.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[I.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),I.jsx("button",{onClick:()=>i(!n),className:`p-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:n?"":""})]})]}),n&&I.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${t?"border-gray-800":"border-gray-200"}`,children:[h.map(d=>I.jsx(Rr,{to:d.to,className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:d.label},d.to)),u&&o?I.jsx(I.Fragment,{children:I.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${t?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[I.jsx("div",{className:`px-2 py-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:o.username}),I.jsx(Rr,{to:"/profile",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx(Rr,{to:"/bookmarks",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx(Rr,{to:"/notes",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx("button",{onClick:f,className:`w-full text-left py-2 transition ${t?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):I.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${t?"border-gray-800":"border-gray-200"}`,children:[I.jsx(Rr,{to:"/login",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),I.jsx(Rr,{to:"/signup",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function x0e(){const[t,e]=O.useState(0);return O.useEffect(()=>{const r=()=>{const n=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,a=i>0?n/i*100:0;e(Math.min(100,Math.max(0,a)))};return window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[]),I.jsx("div",{className:"scroll-progress",children:I.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${t/100})`}})})}function A0e(){const{isDark:t}=Cl();return I.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[I.jsx(x0e,{}),I.jsx(w0e,{}),I.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:I.jsx(r0e,{})}),I.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${t?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:I.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const yee=O.createContext({});function _0e(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const _$=typeof window<"u",E0e=_$?O.useLayoutEffect:O.useEffect,E$=O.createContext(null);function S$(t,e){t.indexOf(e)===-1&&t.push(e)}function C$(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Xf=(t,e,r)=>r>e?e:r<t?t:r;let T$=()=>{};const Yf={},bee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function wee(t){return typeof t=="object"&&t!==null}const xee=t=>/^0[^.\s]+$/u.test(t);function D$(t){let e;return()=>(e===void 0&&(e=t()),e)}const pl=t=>t,S0e=(t,e)=>r=>e(t(r)),rS=(...t)=>t.reduce(S0e),bA=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class N${constructor(){this.subscriptions=[]}add(e){return S$(this.subscriptions,e),()=>C$(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oc=t=>t*1e3,cl=t=>t/1e3;function Aee(t,e){return e?t*(1e3/e):0}const _ee=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,C0e=1e-7,T0e=12;function D0e(t,e,r,n,i){let a,s,o=0;do s=e+(r-e)/2,a=_ee(s,n,i)-t,a>0?r=s:e=s;while(Math.abs(a)>C0e&&++o<T0e);return s}function nS(t,e,r,n){if(t===e&&r===n)return pl;const i=a=>D0e(a,0,1,t,r);return a=>a===0||a===1?a:_ee(i(a),e,n)}const Eee=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,See=t=>e=>1-t(1-e),Cee=nS(.33,1.53,.69,.99),P$=See(Cee),Tee=Eee(P$),Dee=t=>(t*=2)<1?.5*P$(t):.5*(2-Math.pow(2,-10*(t-1))),M$=t=>1-Math.sin(Math.acos(t)),Nee=See(M$),Pee=Eee(M$),N0e=nS(.42,0,1,1),P0e=nS(0,0,.58,1),Mee=nS(.42,0,.58,1),M0e=t=>Array.isArray(t)&&typeof t[0]!="number",Iee=t=>Array.isArray(t)&&typeof t[0]=="number",I0e={linear:pl,easeIn:N0e,easeInOut:Mee,easeOut:P0e,circIn:M$,circInOut:Pee,circOut:Nee,backIn:P$,backInOut:Tee,backOut:Cee,anticipate:Dee},O0e=t=>typeof t=="string",G8=t=>{if(Iee(t)){T$(t.length===4);const[e,r,n,i]=t;return nS(e,r,n,i)}else if(O0e(t))return I0e[t];return t},zC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k0e(t,e){let r=new Set,n=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,f=!1,h=!1)=>{const p=h&&i?r:n;return f&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,i){a=!0;return}i=!0,[r,n]=[n,r],r.forEach(l),r.clear(),i=!1,a&&(a=!1,u.process(c))}};return u}const R0e=40;function Oee(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,s=zC.reduce((b,A)=>(b[A]=k0e(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:h,render:d,postRender:p}=s,m=()=>{const b=Yf.useManualTiming?i.timestamp:performance.now();r=!1,Yf.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(b-i.timestamp,R0e),1)),i.timestamp=b,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(m))},v=()=>{r=!0,n=!0,i.isProcessing||t(m)};return{schedule:zC.reduce((b,A)=>{const x=s[A];return b[A]=(_,S=!1,E=!1)=>(r||v(),x.schedule(_,S,E)),b},{}),cancel:b=>{for(let A=0;A<zC.length;A++)s[zC[A]].cancel(b)},state:i,steps:s}}const{schedule:on,cancel:cp,state:ra,steps:dk}=Oee(typeof requestAnimationFrame<"u"?requestAnimationFrame:pl,!0);let rD;function F0e(){rD=void 0}const Is={now:()=>(rD===void 0&&Is.set(ra.isProcessing||Yf.useManualTiming?ra.timestamp:performance.now()),rD),set:t=>{rD=t,queueMicrotask(F0e)}},kee=t=>e=>typeof e=="string"&&e.startsWith(t),I$=kee("--"),L0e=kee("var(--"),O$=t=>L0e(t)?B0e.test(t.split("/*")[0].trim()):!1,B0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,O1={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wA={...O1,transform:t=>Xf(0,1,t)},qC={...O1,default:1},$x=t=>Math.round(t*1e5)/1e5,k$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $0e(t){return t==null}const j0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,R$=(t,e)=>r=>!!(typeof r=="string"&&j0e.test(r)&&r.startsWith(t)||e&&!$0e(r)&&Object.prototype.hasOwnProperty.call(r,e)),Ree=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,a,s,o]=n.match(k$);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},V0e=t=>Xf(0,255,t),pk={...O1,transform:t=>Math.round(V0e(t))},Cm={test:R$("rgb","red"),parse:Ree("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+pk.transform(t)+", "+pk.transform(e)+", "+pk.transform(r)+", "+$x(wA.transform(n))+")"};function U0e(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const OF={test:R$("#"),parse:U0e,transform:Cm.transform},iS=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nh=iS("deg"),lc=iS("%"),bt=iS("px"),z0e=iS("vh"),q0e=iS("vw"),K8={...lc,parse:t=>lc.parse(t)/100,transform:t=>lc.transform(t*100)},jy={test:R$("hsl","hue"),parse:Ree("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+lc.transform($x(e))+", "+lc.transform($x(r))+", "+$x(wA.transform(n))+")"},Wn={test:t=>Cm.test(t)||OF.test(t)||jy.test(t),parse:t=>Cm.test(t)?Cm.parse(t):jy.test(t)?jy.parse(t):OF.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Cm.transform(t):jy.transform(t),getAnimatableNone:t=>{const e=Wn.parse(t);return e.alpha=0,Wn.transform(e)}},H0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function W0e(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(k$))==null?void 0:e.length)||0)+(((r=t.match(H0e))==null?void 0:r.length)||0)>0}const Fee="number",Lee="color",G0e="var",K0e="var(",X8="${}",X0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xA(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(X0e,l=>(Wn.test(l)?(n.color.push(a),i.push(Lee),r.push(Wn.parse(l))):l.startsWith(K0e)?(n.var.push(a),i.push(G0e),r.push(l)):(n.number.push(a),i.push(Fee),r.push(parseFloat(l))),++a,X8)).split(X8);return{values:r,split:o,indexes:n,types:i}}function Bee(t){return xA(t).values}function $ee(t){const{split:e,types:r}=xA(t),n=e.length;return i=>{let a="";for(let s=0;s<n;s++)if(a+=e[s],i[s]!==void 0){const o=r[s];o===Fee?a+=$x(i[s]):o===Lee?a+=Wn.transform(i[s]):a+=i[s]}return a}}const Y0e=t=>typeof t=="number"?0:Wn.test(t)?Wn.getAnimatableNone(t):t;function Q0e(t){const e=Bee(t);return $ee(t)(e.map(Y0e))}const fp={test:W0e,parse:Bee,createTransformer:$ee,getAnimatableNone:Q0e};function mk(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Z0e({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,s=0;if(!e)i=a=s=r;else{const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;i=mk(l,o,t+1/3),a=mk(l,o,t),s=mk(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:n}}function MN(t,e){return r=>r>0?e:t}const dn=(t,e,r)=>t+(e-t)*r,gk=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},J0e=[OF,Cm,jy],ebe=t=>J0e.find(e=>e.test(t));function Y8(t){const e=ebe(t);if(!e)return!1;let r=e.parse(t);return e===jy&&(r=Z0e(r)),r}const Q8=(t,e)=>{const r=Y8(t),n=Y8(e);if(!r||!n)return MN(t,e);const i={...r};return a=>(i.red=gk(r.red,n.red,a),i.green=gk(r.green,n.green,a),i.blue=gk(r.blue,n.blue,a),i.alpha=dn(r.alpha,n.alpha,a),Cm.transform(i))},kF=new Set(["none","hidden"]);function tbe(t,e){return kF.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function rbe(t,e){return r=>dn(t,e,r)}function F$(t){return typeof t=="number"?rbe:typeof t=="string"?O$(t)?MN:Wn.test(t)?Q8:abe:Array.isArray(t)?jee:typeof t=="object"?Wn.test(t)?Q8:nbe:MN}function jee(t,e){const r=[...t],n=r.length,i=t.map((a,s)=>F$(a)(a,e[s]));return a=>{for(let s=0;s<n;s++)r[s]=i[s](a);return r}}function nbe(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=F$(t[i])(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function ibe(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][n[a]],o=t.values[s]??0;r[i]=o,n[a]++}return r}const abe=(t,e)=>{const r=fp.createTransformer(e),n=xA(t),i=xA(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?kF.has(t)&&!i.values.length||kF.has(e)&&!n.values.length?tbe(t,e):rS(jee(ibe(n,i),i.values),r):MN(t,e)};function Vee(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?dn(t,e,r):F$(t)(t,e)}const sbe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>on.update(e,r),stop:()=>cp(e),now:()=>ra.isProcessing?ra.timestamp:Is.now()}},Uee=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let a=0;a<i;a++)n+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},IN=2e4;function L$(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<IN;)e+=r,n=t.next(e);return e>=IN?1/0:e}function obe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(L$(n),IN);return{type:"keyframes",ease:a=>n.next(i*a).value/e,duration:cl(i)}}const lbe=5;function zee(t,e,r){const n=Math.max(e-lbe,0);return Aee(r-t(n),e-n)}const Sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vk=.001;function ube({duration:t=Sn.duration,bounce:e=Sn.bounce,velocity:r=Sn.velocity,mass:n=Sn.mass}){let i,a,s=1-e;s=Xf(Sn.minDamping,Sn.maxDamping,s),t=Xf(Sn.minDuration,Sn.maxDuration,cl(t)),s<1?(i=u=>{const c=u*s,f=c*t,h=c-r,d=RF(u,s),p=Math.exp(-f);return vk-h/d*p},a=u=>{const f=u*s*t,h=f*r+r,d=Math.pow(s,2)*Math.pow(u,2)*t,p=Math.exp(-f),m=RF(Math.pow(u,2),s);return(-i(u)+vk>0?-1:1)*((h-d)*p)/m}):(i=u=>{const c=Math.exp(-u*t),f=(u-r)*t+1;return-vk+c*f},a=u=>{const c=Math.exp(-u*t),f=(r-u)*(t*t);return c*f});const o=5/t,l=fbe(i,a,o);if(t=oc(t),isNaN(l))return{stiffness:Sn.stiffness,damping:Sn.damping,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:s*2*Math.sqrt(n*u),duration:t}}}const cbe=12;function fbe(t,e,r){let n=r;for(let i=1;i<cbe;i++)n=n-t(n)/e(n);return n}function RF(t,e){return t*Math.sqrt(1-e*e)}const hbe=["duration","bounce"],dbe=["stiffness","damping","mass"];function Z8(t,e){return e.some(r=>t[r]!==void 0)}function pbe(t){let e={velocity:Sn.velocity,stiffness:Sn.stiffness,damping:Sn.damping,mass:Sn.mass,isResolvedFromDuration:!1,...t};if(!Z8(t,dbe)&&Z8(t,hbe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*Xf(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Sn.mass,stiffness:i,damping:a}}else{const r=ube(t);e={...e,...r,mass:Sn.mass},e.isResolvedFromDuration=!0}return e}function ON(t=Sn.visualDuration,e=Sn.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:d}=pbe({...r,velocity:-cl(r.velocity||0)}),p=h||0,m=u/(2*Math.sqrt(l*c)),v=s-a,y=cl(Math.sqrt(l/c)),w=Math.abs(v)<5;n||(n=w?Sn.restSpeed.granular:Sn.restSpeed.default),i||(i=w?Sn.restDelta.granular:Sn.restDelta.default);let b;if(m<1){const x=RF(y,m);b=_=>{const S=Math.exp(-m*y*_);return s-S*((p+m*y*v)/x*Math.sin(x*_)+v*Math.cos(x*_))}}else if(m===1)b=x=>s-Math.exp(-y*x)*(v+(p+y*v)*x);else{const x=y*Math.sqrt(m*m-1);b=_=>{const S=Math.exp(-m*y*_),E=Math.min(x*_,300);return s-S*((p+m*y*v)*Math.sinh(E)+x*v*Math.cosh(E))/x}}const A={calculatedDuration:d&&f||null,next:x=>{const _=b(x);if(d)o.done=x>=f;else{let S=x===0?p:0;m<1&&(S=x===0?oc(p):zee(b,x,_));const E=Math.abs(S)<=n,T=Math.abs(s-_)<=i;o.done=E&&T}return o.value=o.done?s:_,o},toString:()=>{const x=Math.min(L$(A),IN),_=Uee(S=>A.next(x*S).value,x,30);return x+"ms "+_},toTransition:()=>{}};return A}ON.applyToOptions=t=>{const e=obe(t,100,ON);return t.ease=e.ease,t.duration=oc(e.duration),t.type="keyframes",t};function FF({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const f=t[0],h={done:!1,value:f},d=E=>o!==void 0&&E<o||l!==void 0&&E>l,p=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let m=r*e;const v=f+m,y=s===void 0?v:s(v);y!==v&&(m=y-f);const w=E=>-m*Math.exp(-E/n),b=E=>y+w(E),A=E=>{const T=w(E),D=b(E);h.done=Math.abs(T)<=u,h.value=h.done?y:D};let x,_;const S=E=>{d(h.value)&&(x=E,_=ON({keyframes:[h.value,p(h.value)],velocity:zee(b,E,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:E=>{let T=!1;return!_&&x===void 0&&(T=!0,A(E),S(E)),x!==void 0&&E>=x?_.next(E-x):(!T&&A(E),h)}}}function mbe(t,e,r){const n=[],i=r||Yf.mix||Vee,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||pl:e;o=rS(l,o)}n.push(o)}return n}function gbe(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;if(T$(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=mbe(e,n,i),l=o.length,u=c=>{if(s&&c<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=bA(t[f],t[f+1],c);return o[f](h)};return r?c=>u(Xf(t[0],t[a-1],c)):u}function vbe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=bA(0,e,n);t.push(dn(r,1,i))}}function ybe(t){const e=[0];return vbe(e,t.length-1),e}function bbe(t,e){return t.map(r=>r*e)}function wbe(t,e){return t.map(()=>e||Mee).splice(0,t.length-1)}function jx({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=M0e(n)?n.map(G8):G8(n),a={done:!1,value:e[0]},s=bbe(r&&r.length===e.length?r:ybe(e),t),o=gbe(s,e,{ease:Array.isArray(i)?i:wbe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const xbe=t=>t!==null;function B$(t,{repeat:e,repeatType:r="loop"},n,i=1){const a=t.filter(xbe),o=i<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const Abe={decay:FF,inertia:FF,tween:jx,keyframes:jx,spring:ON};function qee(t){typeof t.type=="string"&&(t.type=Abe[t.type])}class $${constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const _be=t=>t/100;class j$ extends $${constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:r}=this.options;r&&r.updatedAt!==Is.now()&&this.tick(Is.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qee(e);const{type:r=jx,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const l=r||jx;l!==jx&&typeof o[0]!="number"&&(this.mixKeyframes=rS(_be,Vee(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=L$(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:h,repeatDelay:d,type:p,onUpdate:m,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,A=n;if(f){const E=Math.min(this.currentTime,i)/o;let T=Math.floor(E),D=E%1;!D&&E>=1&&(D=1),D===1&&T--,T=Math.min(T,f+1),!!(T%2)&&(h==="reverse"?(D=1-D,d&&(D-=d/o)):h==="mirror"&&(A=s)),b=Xf(0,1,D)*o}const x=w?{done:!1,value:c[0]}:A.next(b);a&&(x.value=a(x.value));let{done:_}=x;!w&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return S&&p!==FF&&(x.value=B$(c,this.options,v,this.speed)),m&&m(x.value),S&&this.finish(),x}then(e,r){return this.finished.then(e,r)}get duration(){return cl(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cl(e)}get time(){return cl(this.currentTime)}set time(e){var r;e=oc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Is.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=cl(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=sbe,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Is.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function Ebe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Tm=t=>t*180/Math.PI,LF=t=>{const e=Tm(Math.atan2(t[1],t[0]));return BF(e)},Sbe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:LF,rotateZ:LF,skewX:t=>Tm(Math.atan(t[1])),skewY:t=>Tm(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},BF=t=>(t=t%360,t<0&&(t+=360),t),J8=LF,ez=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Cbe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ez,scaleY:tz,scale:t=>(ez(t)+tz(t))/2,rotateX:t=>BF(Tm(Math.atan2(t[6],t[5]))),rotateY:t=>BF(Tm(Math.atan2(-t[2],t[0]))),rotateZ:J8,rotate:J8,skewX:t=>Tm(Math.atan(t[4])),skewY:t=>Tm(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $F(t){return t.includes("scale")?1:0}function jF(t,e){if(!t||t==="none")return $F(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=Cbe,i=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Sbe,i=o}if(!i)return $F(e);const a=n[e],s=i[1].split(",").map(Dbe);return typeof a=="function"?a(s):s[a]}const Tbe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return jF(r,e)};function Dbe(t){return parseFloat(t.trim())}const k1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],R1=new Set(k1),rz=t=>t===O1||t===bt,Nbe=new Set(["x","y","z"]),Pbe=k1.filter(t=>!Nbe.has(t));function Mbe(t){const e=[];return Pbe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Qg={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jF(e,"x"),y:(t,{transform:e})=>jF(e,"y")};Qg.translateX=Qg.x;Qg.translateY=Qg.y;const Zg=new Set;let VF=!1,UF=!1,zF=!1;function Hee(){if(UF){const t=Array.from(Zg).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=Mbe(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,s])=>{var o;(o=n.getValue(a))==null||o.set(s)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}UF=!1,VF=!1,Zg.forEach(t=>t.complete(zF)),Zg.clear()}function Wee(){Zg.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(UF=!0)})}function Ibe(){zF=!0,Wee(),Hee(),zF=!1}class V${constructor(e,r,n,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Zg.add(this),VF||(VF=!0,on.read(Wee),on.resolveKeyframes(Hee))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const o=n.readValue(r,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Ebe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Zg.delete(this)}cancel(){this.state==="scheduled"&&(Zg.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Obe=t=>t.startsWith("--");function kbe(t,e,r){Obe(e)?t.style.setProperty(e,r):t.style[e]=r}const Rbe=D$(()=>window.ScrollTimeline!==void 0),Fbe={};function Lbe(t,e){const r=D$(t);return()=>Fbe[e]??r()}const Gee=Lbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qw=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,nz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qw([0,.65,.55,1]),circOut:Qw([.55,0,1,.45]),backIn:Qw([.31,.01,.66,-.59]),backOut:Qw([.33,1.53,.69,.99])};function Kee(t,e){if(t)return typeof t=="function"?Gee()?Uee(t,e):"ease-out":Iee(t)?Qw(t):Array.isArray(t)?t.map(r=>Kee(r,e)||nz.easeOut):nz[t]}function Bbe(t,e,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:r};l&&(c.offset=l);const f=Kee(o,i);Array.isArray(f)&&(c.easing=f);const h={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(c,h)}function Xee(t){return typeof t=="function"&&"applyToOptions"in t}function $be({type:t,...e}){return Xee(t)&&Gee()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jbe extends $${constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,T$(typeof e.type!="string");const u=$be(e);this.animation=Bbe(r,n,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const c=B$(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):kbe(r,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return cl(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cl(e)}get time(){return cl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=oc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Rbe()?(this.animation.timeline=e,pl):r(this)}}const Yee={anticipate:Dee,backInOut:Tee,circInOut:Pee};function Vbe(t){return t in Yee}function Ube(t){typeof t.ease=="string"&&Vbe(t.ease)&&(t.ease=Yee[t.ease])}const iz=10;class zbe extends jbe{constructor(e){Ube(e),qee(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:a,...s}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const o=new j$({...s,autoplay:!1}),l=oc(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-iz).value,o.sample(l).value,iz),o.stop()}}const az=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(fp.test(t)||t==="0")&&!t.startsWith("url("));function qbe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function Hbe(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=az(i,e),o=az(a,e);return!s||!o?!1:qbe(t)||(r==="spring"||Xee(r))&&n}function qF(t){t.duration=0,t.type="keyframes"}const Wbe=new Set(["opacity","clipPath","filter","transform"]),Gbe=D$(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kbe(t){var c;const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:a,type:s}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Gbe()&&r&&Wbe.has(r)&&(r!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&a!==0&&s!=="inertia"}const Xbe=40;class Ybe extends $${constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:c,...f}){var p;super(),this.stop=()=>{var m,v;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=Is.now();const h={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:u,element:c,...f},d=(c==null?void 0:c.KeyframeResolver)||V$;this.keyframeResolver=new d(o,(m,v,y)=>this.onKeyframesResolved(m,v,h,!y),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=Is.now(),Hbe(e,a,s,o)||((Yf.instantAnimations||!l)&&(c==null||c(B$(e,n,r))),e[0]=e[e.length-1],qF(n),n.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Xbe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},d=!u&&Kbe(h)?new zbe({...h,element:h.motionValue.owner.current}):new j$(h);d.finished.then(()=>this.notifyFinished()).catch(pl),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Ibe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Qbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zbe(t){const e=Qbe.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function Qee(t,e,r=1){const[n,i]=Zbe(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const s=a.trim();return bee(s)?parseFloat(s):s}return O$(i)?Qee(i,e,r+1):i}function U$(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Zee=new Set(["width","height","top","left","right","bottom",...k1]),Jbe={test:t=>t==="auto",parse:t=>t},Jee=t=>e=>e.test(t),ete=[O1,bt,lc,Nh,q0e,z0e,Jbe],sz=t=>ete.find(Jee(t));function e1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xee(t):!0}const t1e=new Set(["brightness","contrast","saturate","opacity"]);function r1e(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(k$)||[];if(!n)return t;const i=r.replace(n,"");let a=t1e.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const n1e=/\b([a-z-]*)\(.*?\)/gu,HF={...fp,getAnimatableNone:t=>{const e=t.match(n1e);return e?e.map(r1e).join(" "):t}},oz={...O1,transform:Math.round},i1e={rotate:Nh,rotateX:Nh,rotateY:Nh,rotateZ:Nh,scale:qC,scaleX:qC,scaleY:qC,scaleZ:qC,skew:Nh,skewX:Nh,skewY:Nh,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:wA,originX:K8,originY:K8,originZ:bt},z$={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...i1e,zIndex:oz,fillOpacity:wA,strokeOpacity:wA,numOctaves:oz},a1e={...z$,color:Wn,backgroundColor:Wn,outlineColor:Wn,fill:Wn,stroke:Wn,borderColor:Wn,borderTopColor:Wn,borderRightColor:Wn,borderBottomColor:Wn,borderLeftColor:Wn,filter:HF,WebkitFilter:HF},tte=t=>a1e[t];function rte(t,e){let r=tte(t);return r!==HF&&(r=fp),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const s1e=new Set(["auto","none","0"]);function o1e(t,e,r){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!s1e.has(a)&&xA(a).values.length&&(i=t[n]),n++}if(i&&r)for(const a of e)t[a]=rte(r,i)}class l1e extends V${constructor(e,r,n,i,a){super(e,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),O$(u))){const c=Qee(u,r.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Zee.has(n)||e.length!==2)return;const[i,a]=e,s=sz(i),o=sz(a);if(s!==o)if(rz(s)&&rz(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Qg[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||e1e(e[i]))&&n.push(i);n.length&&o1e(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qg[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,s=n[a];n[a]=Qg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function u1e(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=(r==null?void 0:r[t])??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const nte=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function c1e(t){return wee(t)&&"offsetHeight"in t}const lz=30,f1e=t=>!isNaN(parseFloat(t));class h1e{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var a;const i=Is.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Is.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=f1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new N$);const n=this.events[e].add(r);return e==="change"?()=>{n(),on.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Is.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lz);return Aee(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jb(t,e){return new h1e(t,e)}const{schedule:q$}=Oee(queueMicrotask,!1),kl={x:!1,y:!1};function ite(){return kl.x||kl.y}function d1e(t){return t==="x"||t==="y"?kl[t]?null:(kl[t]=!0,()=>{kl[t]=!1}):kl.x||kl.y?null:(kl.x=kl.y=!0,()=>{kl.x=kl.y=!1})}function ate(t,e){const r=u1e(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function uz(t){return!(t.pointerType==="touch"||ite())}function p1e(t,e,r={}){const[n,i,a]=ate(t,r),s=o=>{if(!uz(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=f=>{uz(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const ste=(t,e)=>e?t===e?!0:ste(t,e.parentElement):!1,H$=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,m1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function g1e(t){return m1e.has(t.tagName)||t.tabIndex!==-1}const nD=new WeakSet;function cz(t){return e=>{e.key==="Enter"&&t(e)}}function yk(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const v1e=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=cz(()=>{if(nD.has(r))return;yk(r,"down");const i=cz(()=>{yk(r,"up")}),a=()=>yk(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function fz(t){return H$(t)&&!ite()}function y1e(t,e,r={}){const[n,i,a]=ate(t,r),s=o=>{const l=o.currentTarget;if(!fz(o))return;nD.add(l);const u=e(l,o),c=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),nD.has(l)&&nD.delete(l),fz(d)&&typeof u=="function"&&u(d,{success:p})},f=d=>{c(d,l===window||l===document||r.useGlobalTarget||ste(l,d.target))},h=d=>{c(d,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),c1e(o)&&(o.addEventListener("focus",u=>v1e(u,i)),!g1e(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function ote(t){return wee(t)&&"ownerSVGElement"in t}function b1e(t){return ote(t)&&t.tagName==="svg"}const Fa=t=>!!(t&&t.getVelocity),w1e=[...ete,Wn,fp],x1e=t=>w1e.find(Jee(t)),lte=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function A1e(t=!0){const e=O.useContext(E$);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,a=O.useId();O.useEffect(()=>{if(t)return i(a)},[t]);const s=O.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,s]:[!0]}const ute=O.createContext({strict:!1}),hz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},e1={};for(const t in hz)e1[t]={isEnabled:e=>hz[t].some(r=>!!e[r])};function _1e(t){for(const e in t)e1[e]={...e1[e],...t[e]}}const E1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||E1e.has(t)}let cte=t=>!kN(t);function S1e(t){typeof t=="function"&&(cte=e=>e.startsWith("on")?!kN(e):t(e))}try{S1e(require("@emotion/is-prop-valid").default)}catch{}function C1e(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(cte(i)||r===!0&&kN(i)||!e&&!kN(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const vM=O.createContext({});function yM(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function AA(t){return typeof t=="string"||Array.isArray(t)}const W$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],G$=["initial",...W$];function bM(t){return yM(t.animate)||G$.some(e=>AA(t[e]))}function fte(t){return!!(bM(t)||t.variants)}function T1e(t,e){if(bM(t)){const{initial:r,animate:n}=t;return{initial:r===!1||AA(r)?r:void 0,animate:AA(n)?n:void 0}}return t.inherit!==!1?e:{}}function D1e(t){const{initial:e,animate:r}=T1e(t,O.useContext(vM));return O.useMemo(()=>({initial:e,animate:r}),[dz(e),dz(r)])}function dz(t){return Array.isArray(t)?t.join(" "):t}const _A={};function N1e(t){for(const e in t)_A[e]=t[e],I$(e)&&(_A[e].isCSSVariable=!0)}function hte(t,{layout:e,layoutId:r}){return R1.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!_A[t]||t==="opacity")}const P1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M1e=k1.length;function I1e(t,e,r){let n="",i=!0;for(let a=0;a<M1e;a++){const s=k1[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=nte(o,z$[s]);if(!l){i=!1;const c=P1e[s]||s;n+=`${c}(${u}) `}r&&(e[s]=u)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function K$(t,e,r){const{style:n,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(R1.has(l)){s=!0;continue}else if(I$(l)){i[l]=u;continue}else{const c=nte(u,z$[l]);l.startsWith("origin")?(o=!0,a[l]=c):n[l]=c}}if(e.transform||(s||r?n.transform=I1e(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;n.transformOrigin=`${l} ${u} ${c}`}}const X$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dte(t,e,r){for(const n in e)!Fa(e[n])&&!hte(n,r)&&(t[n]=e[n])}function O1e({transformTemplate:t},e){return O.useMemo(()=>{const r=X$();return K$(r,e,t),Object.assign({},r.vars,r.style)},[e])}function k1e(t,e){const r=t.style||{},n={};return dte(n,r,t),Object.assign(n,O1e(t,e)),n}function R1e(t,e){const r={},n=k1e(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const F1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},L1e={offset:"strokeDashoffset",array:"strokeDasharray"};function B1e(t,e,r=1,n=0,i=!0){t.pathLength=1;const a=i?F1e:L1e;t[a.offset]=bt.transform(-n);const s=bt.transform(e),o=bt.transform(r);t[a.array]=`${s} ${o}`}function pte(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,u,c){if(K$(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&B1e(f,i,a,s,!1)}const mte=()=>({...X$(),attrs:{}}),gte=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $1e(t,e,r,n){const i=O.useMemo(()=>{const a=mte();return pte(a,e,gte(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};dte(a,t.style,t),i.style={...a,...i.style}}return i}const j1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Y$(t){return typeof t!="string"||t.includes("-")?!1:!!(j1e.indexOf(t)>-1||/[A-Z]/u.test(t))}function V1e(t,e,r,{latestValues:n},i,a=!1){const o=(Y$(t)?$1e:R1e)(e,n,i,t),l=C1e(e,typeof t=="string",a),u=t!==O.Fragment?{...l,...o,ref:r}:{},{children:c}=e,f=O.useMemo(()=>Fa(c)?c.get():c,[c]);return O.createElement(t,{...u,children:f})}function pz(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function Q$(t,e,r,n){if(typeof e=="function"){const[i,a]=pz(n);e=e(r!==void 0?r:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=pz(n);e=e(r!==void 0?r:t.custom,i,a)}return e}function iD(t){return Fa(t)?t.get():t}function U1e({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:z1e(r,n,i,t),renderState:e()}}function z1e(t,e,r,n){const i={},a=n(t,{});for(const h in a)i[h]=iD(a[h]);let{initial:s,animate:o}=t;const l=bM(t),u=fte(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=r?r.initial===!1:!1;c=c||s===!1;const f=c?o:s;if(f&&typeof f!="boolean"&&!yM(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=Q$(t,h[d]);if(p){const{transitionEnd:m,transition:v,...y}=p;for(const w in y){let b=y[w];if(Array.isArray(b)){const A=c?b.length-1:0;b=b[A]}b!==null&&(i[w]=b)}for(const w in m)i[w]=m[w]}}}return i}const vte=t=>(e,r)=>{const n=O.useContext(vM),i=O.useContext(E$),a=()=>U1e(t,e,n,i);return r?a():_0e(a)};function Z$(t,e,r){var a;const{style:n}=t,i={};for(const s in n)(Fa(n[s])||e.style&&Fa(e.style[s])||hte(s,t)||((a=r==null?void 0:r.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=n[s]);return i}const q1e=vte({scrapeMotionValuesFromProps:Z$,createRenderState:X$});function yte(t,e,r){const n=Z$(t,e,r);for(const i in t)if(Fa(t[i])||Fa(e[i])){const a=k1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}const H1e=vte({scrapeMotionValuesFromProps:yte,createRenderState:mte}),W1e=Symbol.for("motionComponentSymbol");function Vy(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function G1e(t,e,r){return O.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Vy(r)&&(r.current=n))},[e])}const J$=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),K1e="framerAppearId",bte="data-"+J$(K1e),wte=O.createContext({});function X1e(t,e,r,n,i){var m,v;const{visualElement:a}=O.useContext(vM),s=O.useContext(ute),o=O.useContext(E$),l=O.useContext(lte).reducedMotion,u=O.useRef(null);n=n||s.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=O.useContext(wte);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Y1e(u.current,r,i,f);const h=O.useRef(!1);O.useInsertionEffect(()=>{c&&h.current&&c.update(r,o)});const d=r[bte],p=O.useRef(!!d&&!((m=window.MotionHandoffIsComplete)!=null&&m.call(window,d))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,d)));return E0e(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),O.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,d)}),p.current=!1),c.enteringChildren=void 0)}),c}function Y1e(t,e,r,n){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:xte(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Vy(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function xte(t){if(t)return t.options.allowProjection!==!1?t.projection:xte(t.parent)}function bk(t,{forwardMotionProps:e=!1}={},r,n){r&&_1e(r);const i=Y$(t)?H1e:q1e;function a(o,l){let u;const c={...O.useContext(lte),...o,layoutId:Q1e(o)},{isStatic:f}=c,h=D1e(o),d=i(o,f);if(!f&&_$){Z1e();const p=J1e(c);u=p.MeasureLayout,h.visualElement=X1e(t,d,c,n,p.ProjectionNode)}return I.jsxs(vM.Provider,{value:h,children:[u&&h.visualElement?I.jsx(u,{visualElement:h.visualElement,...c}):null,V1e(t,o,G1e(d,h.visualElement,l),d,f,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=O.forwardRef(a);return s[W1e]=t,s}function Q1e({layoutId:t}){const e=O.useContext(yee).id;return e&&t!==void 0?e+"-"+t:t}function Z1e(t,e){O.useContext(ute).strict}function J1e(t){const{drag:e,layout:r}=e1;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function ewe(t,e){if(typeof Proxy>"u")return bk;const r=new Map,n=(a,s)=>bk(a,s,t,e),i=(a,s)=>n(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?n:(r.has(s)||r.set(s,bk(s,void 0,t,e)),r.get(s))})}function Ate({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function twe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function rwe(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function wk(t){return t===void 0||t===1}function WF({scale:t,scaleX:e,scaleY:r}){return!wk(t)||!wk(e)||!wk(r)}function cm(t){return WF(t)||_te(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _te(t){return mz(t.x)||mz(t.y)}function mz(t){return t&&t!=="0%"}function RN(t,e,r){const n=t-r,i=e*n;return r+i}function gz(t,e,r,n,i){return i!==void 0&&(t=RN(t,i,n)),RN(t,r,n)+e}function GF(t,e=0,r=1,n,i){t.min=gz(t.min,e,r,n,i),t.max=gz(t.max,e,r,n,i)}function Ete(t,{x:e,y:r}){GF(t.x,e.translate,e.scale,e.originPoint),GF(t.y,r.translate,r.scale,r.originPoint)}const vz=.999999999999,yz=1.0000000000001;function nwe(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=r[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&zy(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Ete(t,s)),n&&cm(a.latestValues)&&zy(t,a.latestValues))}e.x<yz&&e.x>vz&&(e.x=1),e.y<yz&&e.y>vz&&(e.y=1)}function Uy(t,e){t.min=t.min+e,t.max=t.max+e}function bz(t,e,r,n,i=.5){const a=dn(t.min,t.max,i);GF(t,e,r,a,n)}function zy(t,e){bz(t.x,e.x,e.scaleX,e.scale,e.originX),bz(t.y,e.y,e.scaleY,e.scale,e.originY)}function Ste(t,e){return Ate(rwe(t.getBoundingClientRect(),e))}function iwe(t,e,r){const n=Ste(t,r),{scroll:i}=e;return i&&(Uy(n.x,i.offset.x),Uy(n.y,i.offset.y)),n}const wz=()=>({translate:0,scale:1,origin:0,originPoint:0}),qy=()=>({x:wz(),y:wz()}),xz=()=>({min:0,max:0}),Rn=()=>({x:xz(),y:xz()}),KF={current:null},Cte={current:!1};function awe(){if(Cte.current=!0,!!_$)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>KF.current=t.matches;t.addEventListener("change",e),e()}else KF.current=!1}const swe=new WeakMap;function owe(t,e,r){for(const n in e){const i=e[n],a=r[n];if(Fa(i))t.addValue(n,i);else if(Fa(a))t.addValue(n,Jb(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const s=t.getValue(n);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(n);t.addValue(n,Jb(s!==void 0?s:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const Az=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lwe{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=V$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Is.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,on.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=bM(r),this.isVariantNode=fte(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Fa(d)&&d.set(l[h])}}mount(e){var r;this.current=e,swe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Cte.current||awe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:KF.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),cp(this.notifyUpdate),cp(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=R1.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&on.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in e1){const r=e1[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Az.length;n++){const i=Az[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=owe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Jb(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(bee(n)||xee(n))?n=parseFloat(n):!x1e(n)&&fp.test(r)&&(n=rte(e,r)),this.setBaseTarget(e,Fa(n)?n.get():n)),Fa(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=Q$(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);s&&(n=s[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Fa(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new N$),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){q$.render(this.render)}}class Tte extends lwe{constructor(){super(...arguments),this.KeyframeResolver=l1e}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fa(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Dte(t,{style:e,vars:r},n,i){const a=t.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,n);for(s in r)a.setProperty(s,r[s])}function uwe(t){return window.getComputedStyle(t)}class cwe extends Tte{constructor(){super(...arguments),this.type="html",this.renderInstance=Dte}readValueFromInstance(e,r){var n;if(R1.has(r))return(n=this.projection)!=null&&n.isProjecting?$F(r):Tbe(e,r);{const i=uwe(e),a=(I$(r)?i.getPropertyValue(r):i[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Ste(e,r)}build(e,r,n){K$(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return Z$(e,r,n)}}const Nte=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fwe(t,e,r,n){Dte(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(Nte.has(i)?i:J$(i),e.attrs[i])}class hwe extends Tte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rn}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(R1.has(r)){const n=tte(r);return n&&n.default||0}return r=Nte.has(r)?r:J$(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return yte(e,r,n)}build(e,r,n){pte(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){fwe(e,r,n,i)}mount(e){this.isSVGTag=gte(e.tagName),super.mount(e)}}const dwe=(t,e)=>Y$(t)?new hwe(e):new cwe(e,{allowProjection:t!==O.Fragment});function u0(t,e,r){const n=t.getProps();return Q$(n,e,r!==void 0?r:n.custom,t)}const XF=t=>Array.isArray(t);function pwe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Jb(r))}function mwe(t){return XF(t)?t[t.length-1]||0:t}function gwe(t,e){const r=u0(t,e);let{transitionEnd:n={},transition:i={},...a}=r||{};a={...a,...n};for(const s in a){const o=mwe(a[s]);pwe(t,s,o)}}function vwe(t){return!!(Fa(t)&&t.add)}function YF(t,e){const r=t.getValue("willChange");if(vwe(r))return r.add(e);if(!r&&Yf.WillChange){const n=new Yf.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Pte(t){return t.props[bte]}const ywe=t=>t!==null;function bwe(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(ywe),a=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[a]}const wwe={type:"spring",stiffness:500,damping:25,restSpeed:10},xwe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Awe={type:"keyframes",duration:.8},_we={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ewe=(t,{keyframes:e})=>e.length>2?Awe:R1.has(t)?t.startsWith("scale")?xwe(e[1]):wwe:_we;function Swe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const e5=(t,e,r,n={},i,a)=>s=>{const o=U$(n,t)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-oc(l);const c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Swe(o)||Object.assign(c,Ewe(t,c)),c.duration&&(c.duration=oc(c.duration)),c.repeatDelay&&(c.repeatDelay=oc(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(qF(c),c.delay===0&&(f=!0)),(Yf.instantAnimations||Yf.skipAnimations)&&(f=!0,qF(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,f&&!a&&e.get()!==void 0){const h=bwe(c.keyframes,o);if(h!==void 0){on.update(()=>{c.onUpdate(h),c.onComplete()});return}}return o.isSync?new j$(c):new Ybe(c)};function Cwe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Mte(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;n&&(a=n);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in o){const f=t.getValue(c,t.latestValues[c]??null),h=o[c];if(h===void 0||u&&Cwe(u,c))continue;const d={delay:r,...U$(a||{},c)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!d.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const y=Pte(t);if(y){const w=window.MotionHandoffAnimation(y,c,on);w!==null&&(d.startTime=w,m=!0)}}YF(t,c),f.start(e5(c,f,h,t.shouldReduceMotion&&Zee.has(c)?{type:!1}:d,t,m));const v=f.animation;v&&l.push(v)}return s&&Promise.all(l).then(()=>{on.update(()=>{s&&gwe(t,s)})}),l}function Ite(t,e,r,n=0,i=1){const a=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),s=t.size,o=(s-1)*n;return typeof r=="function"?r(a,s):i===1?a*n:o-a*n}function QF(t,e,r={}){var l;const n=u0(t,e,r.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(Mte(t,n,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=i;return Twe(t,e,u,c,f,h,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>c())}else return Promise.all([a(),s(r.delay)])}function Twe(t,e,r=0,n=0,i=0,a=1,s){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(QF(l,e,{...s,delay:r+(typeof n=="function"?0:n)+Ite(t.variantChildren,l,n,i,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function Dwe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>QF(t,a,r));n=Promise.all(i)}else if(typeof e=="string")n=QF(t,e,r);else{const i=typeof e=="function"?u0(t,e,r.custom):e;n=Promise.all(Mte(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Ote(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const Nwe=G$.length;function kte(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?kte(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<Nwe;r++){const n=G$[r],i=t.props[n];(AA(i)||i===!1)&&(e[n]=i)}return e}const Pwe=[...W$].reverse(),Mwe=W$.length;function Iwe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>Dwe(t,r,n)))}function Owe(t){let e=Iwe(t),r=_z(),n=!0;const i=l=>(u,c)=>{var h;const f=u0(t,c,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:p,...m}=f;u={...u,...m,...p}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,c=kte(t.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let v=0;v<Mwe;v++){const y=Pwe[v],w=r[y],b=u[y]!==void 0?u[y]:c[y],A=AA(b),x=y===l?w.isActive:null;x===!1&&(p=v);let _=b===c[y]&&b!==u[y]&&A;if(_&&n&&t.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...d},!w.isActive&&x===null||!b&&!w.prevProp||yM(b)||typeof b=="boolean")continue;const S=kwe(w.prevProp,b);let E=S||y===l&&w.isActive&&!_&&A||v>p&&A,T=!1;const D=Array.isArray(b)?b:[b];let N=D.reduce(i(y),{});x===!1&&(N={});const{prevResolvedValues:P={}}=w,M={...P,...N},j=V=>{E=!0,h.has(V)&&(T=!0,h.delete(V)),w.needsAnimating[V]=!0;const q=t.getValue(V);q&&(q.liveStyle=!1)};for(const V in M){const q=N[V],H=P[V];if(d.hasOwnProperty(V))continue;let te=!1;XF(q)&&XF(H)?te=!Ote(q,H):te=q!==H,te?q!=null?j(V):h.add(V):q!==void 0&&h.has(V)?j(V):w.protectedKeys[V]=!0}w.prevProp=b,w.prevResolvedValues=N,w.isActive&&(d={...d,...N}),n&&t.blockInitialAnimation&&(E=!1);const K=_&&S;E&&(!K||T)&&f.push(...D.map(V=>{const q={type:y};if(typeof V=="string"&&n&&!K&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,te=u0(H,V);if(H.enteringChildren&&te){const{delayChildren:ue}=te.transition||{};q.delay=Ite(H.enteringChildren,t,ue)}}return{animation:V,options:q}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const y=u0(t,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(v.transition=y.transition)}h.forEach(y=>{const w=t.getBaseTarget(y),b=t.getValue(y);b&&(b.liveStyle=!0),v[y]=w??null}),f.push({animation:v})}let m=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(f):Promise.resolve()}function o(l,u){var f;if(r[l].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var d;return(d=h.animationState)==null?void 0:d.setActive(l,u)}),r[l].isActive=u;const c=s(l);for(const h in r)r[h].protectedKeys={};return c}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=_z()}}}function kwe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ote(e,t):!1}function am(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _z(){return{animate:am(!0),whileInView:am(),whileHover:am(),whileTap:am(),whileDrag:am(),whileFocus:am(),exit:am()}}class Op{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Rwe extends Op{constructor(e){super(e),e.animationState||(e.animationState=Owe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Fwe=0;class Lwe extends Op{constructor(){super(...arguments),this.id=Fwe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Bwe={animation:{Feature:Rwe},exit:{Feature:Lwe}};function EA(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function aS(t){return{point:{x:t.pageX,y:t.pageY}}}const $we=t=>e=>H$(e)&&t(e,aS(e));function Vx(t,e,r,n){return EA(t,e,$we(r),n)}const Rte=1e-4,jwe=1-Rte,Vwe=1+Rte,Fte=.01,Uwe=0-Fte,zwe=0+Fte;function es(t){return t.max-t.min}function qwe(t,e,r){return Math.abs(t-e)<=r}function Ez(t,e,r,n=.5){t.origin=n,t.originPoint=dn(e.min,e.max,t.origin),t.scale=es(r)/es(e),t.translate=dn(r.min,r.max,t.origin)-t.originPoint,(t.scale>=jwe&&t.scale<=Vwe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Uwe&&t.translate<=zwe||isNaN(t.translate))&&(t.translate=0)}function Ux(t,e,r,n){Ez(t.x,e.x,r.x,n?n.originX:void 0),Ez(t.y,e.y,r.y,n?n.originY:void 0)}function Sz(t,e,r){t.min=r.min+e.min,t.max=t.min+es(e)}function Hwe(t,e,r){Sz(t.x,e.x,r.x),Sz(t.y,e.y,r.y)}function Cz(t,e,r){t.min=e.min-r.min,t.max=t.min+es(e)}function zx(t,e,r){Cz(t.x,e.x,r.x),Cz(t.y,e.y,r.y)}function Uo(t){return[t("x"),t("y")]}const Lte=({current:t})=>t?t.ownerDocument.defaultView:null,Tz=(t,e)=>Math.abs(t-e);function Wwe(t,e){const r=Tz(t.x,e.x),n=Tz(t.y,e.y);return Math.sqrt(r**2+n**2)}class Bte{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ak(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,p=Wwe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!d&&!p)return;const{point:m}=h,{timestamp:v}=ra;this.history.push({...m,timestamp:v});const{onStart:y,onMove:w}=this.handlers;d||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=xk(d,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Ak(h.type==="pointercancel"?this.lastMoveEventInfo:xk(d,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,y),m&&m(h,y)},!H$(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=i||window;const o=aS(e),l=xk(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=ra;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=r;f&&f(e,Ak(l,this.history)),this.removeListeners=rS(Vx(this.contextWindow,"pointermove",this.handlePointerMove),Vx(this.contextWindow,"pointerup",this.handlePointerUp),Vx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cp(this.updatePoint)}}function xk(t,e){return e?{point:e(t.point)}:t}function Dz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ak({point:t},e){return{point:t,delta:Dz(t,$te(e)),offset:Dz(t,Gwe(e)),velocity:Kwe(e,.1)}}function Gwe(t){return t[0]}function $te(t){return t[t.length-1]}function Kwe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=$te(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>oc(e)));)r--;if(!n)return{x:0,y:0};const a=cl(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Xwe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?dn(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?dn(r,t,n.max):Math.min(t,r)),t}function Nz(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Ywe(t,{top:e,left:r,bottom:n,right:i}){return{x:Nz(t.x,r,i),y:Nz(t.y,e,n)}}function Pz(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Qwe(t,e){return{x:Pz(t.x,e.x),y:Pz(t.y,e.y)}}function Zwe(t,e){let r=.5;const n=es(t),i=es(e);return i>n?r=bA(e.min,e.max-n,t.min):n>i&&(r=bA(t.min,t.max-i,e.min)),Xf(0,1,r)}function Jwe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const ZF=.35;function exe(t=ZF){return t===!1?t=0:t===!0&&(t=ZF),{x:Mz(t,"left","right"),y:Mz(t,"top","bottom")}}function Mz(t,e,r){return{min:Iz(t,e),max:Iz(t,r)}}function Iz(t,e){return typeof t=="number"?t:t[e]||0}const txe=new WeakMap;class rxe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(aS(f).point)},s=(f,h)=>{const{drag:d,dragPropagation:p,onDragStart:m}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d1e(d),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Uo(y=>{let w=this.getAxisMotionValue(y).get()||0;if(lc.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const A=b.layout.layoutBox[y];A&&(w=es(A)*(parseFloat(w)/100))}}this.originPoint[y]=w}),m&&on.postRender(()=>m(f,h)),YF(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:y}=h;if(p&&this.currentDirection===null){this.currentDirection=nxe(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Uo(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Bte(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:Lte(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&on.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!HC(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=Xwe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Vy(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Ywe(n.layoutBox,e):this.constraints=!1,this.elastic=exe(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Uo(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Jwe(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Vy(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=iwe(n,i.root,this.visualElement.getTransformPagePoint());let s=Qwe(i.layout.layoutBox,a);if(r){const o=r(twe(s));this.hasMutatedConstraints=!!o,o&&(s=Ate(o))}return s}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Uo(c=>{if(!HC(c,r,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return YF(this.visualElement,e),n.start(e5(e,n,0,r,this.visualElement,!1))}stopAnimation(){Uo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Uo(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Uo(r=>{const{drag:n}=this.getProps();if(!HC(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[r];a.set(e[r]-dn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Vy(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Uo(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=Zwe({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Uo(s=>{if(!HC(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(dn(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;txe.set(this.visualElement,this);const e=this.visualElement.current,r=Vx(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Vy(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(n);const s=EA(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Uo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),r(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=ZF,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function HC(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function nxe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class ixe extends Op{constructor(e){super(e),this.removeGroupControls=pl,this.removeListeners=pl,this.controls=new rxe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pl}unmount(){this.removeGroupControls(),this.removeListeners()}}const Oz=t=>(e,r)=>{t&&on.postRender(()=>t(e,r))};class axe extends Op{constructor(){super(...arguments),this.removePointerDownListener=pl}onPointerDown(e){this.session=new Bte(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lte(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Oz(e),onStart:Oz(r),onMove:n,onEnd:(a,s)=>{delete this.session,i&&on.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Vx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const aD={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Mw={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const r=kz(t,e.target.x),n=kz(t,e.target.y);return`${r}% ${n}%`}},sxe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=fp.parse(t);if(i.length>5)return n;const a=fp.createTransformer(t),s=typeof i[0]!="number"?1:0,o=r.x.scale*e.x,l=r.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=dn(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let _k=!1;class oxe extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;N1e(lxe),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),_k&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),aD.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,{projection:s}=n;return s&&(s.isPresent=a,_k=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||on.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),q$.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;_k=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jte(t){const[e,r]=A1e(),n=O.useContext(yee);return I.jsx(oxe,{...t,layoutGroup:n,switchLayoutGroup:O.useContext(wte),isPresent:e,safeToRemove:r})}const lxe={borderRadius:{...Mw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mw,borderTopRightRadius:Mw,borderBottomLeftRadius:Mw,borderBottomRightRadius:Mw,boxShadow:sxe};function uxe(t,e,r){const n=Fa(t)?t:Jb(t);return n.start(e5("",n,e,r)),n.animation}const cxe=(t,e)=>t.depth-e.depth;class fxe{constructor(){this.children=[],this.isDirty=!1}add(e){S$(this.children,e),this.isDirty=!0}remove(e){C$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cxe),this.isDirty=!1,this.children.forEach(e)}}function hxe(t,e){const r=Is.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(cp(n),t(a-e))};return on.setup(n,!0),()=>cp(n)}const Vte=["TopLeft","TopRight","BottomLeft","BottomRight"],dxe=Vte.length,Rz=t=>typeof t=="string"?parseFloat(t):t,Fz=t=>typeof t=="number"||bt.test(t);function pxe(t,e,r,n,i,a){i?(t.opacity=dn(0,r.opacity??1,mxe(n)),t.opacityExit=dn(e.opacity??1,0,gxe(n))):a&&(t.opacity=dn(e.opacity??1,r.opacity??1,n));for(let s=0;s<dxe;s++){const o=`border${Vte[s]}Radius`;let l=Lz(e,o),u=Lz(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Fz(l)===Fz(u)?(t[o]=Math.max(dn(Rz(l),Rz(u),n),0),(lc.test(u)||lc.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||r.rotate)&&(t.rotate=dn(e.rotate||0,r.rotate||0,n))}function Lz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mxe=Ute(0,.5,Nee),gxe=Ute(.5,.95,pl);function Ute(t,e,r){return n=>n<t?0:n>e?1:r(bA(t,e,n))}function Bz(t,e){t.min=e.min,t.max=e.max}function ko(t,e){Bz(t.x,e.x),Bz(t.y,e.y)}function $z(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jz(t,e,r,n,i){return t-=e,t=RN(t,1/r,n),i!==void 0&&(t=RN(t,1/i,n)),t}function vxe(t,e=0,r=1,n=.5,i,a=t,s=t){if(lc.test(e)&&(e=parseFloat(e),e=dn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=dn(a.min,a.max,n);t===a&&(o-=e),t.min=jz(t.min,e,r,o,i),t.max=jz(t.max,e,r,o,i)}function Vz(t,e,[r,n,i],a,s){vxe(t,e[r],e[n],e[i],e.scale,a,s)}const yxe=["x","scaleX","originX"],bxe=["y","scaleY","originY"];function Uz(t,e,r,n){Vz(t.x,e,yxe,r?r.x:void 0,n?n.x:void 0),Vz(t.y,e,bxe,r?r.y:void 0,n?n.y:void 0)}function zz(t){return t.translate===0&&t.scale===1}function zte(t){return zz(t.x)&&zz(t.y)}function qz(t,e){return t.min===e.min&&t.max===e.max}function wxe(t,e){return qz(t.x,e.x)&&qz(t.y,e.y)}function Hz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function qte(t,e){return Hz(t.x,e.x)&&Hz(t.y,e.y)}function Wz(t){return es(t.x)/es(t.y)}function Gz(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class xxe{constructor(){this.members=[]}add(e){S$(this.members,e),e.scheduleRender()}remove(e){if(C$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Axe(t,e,r){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(r==null?void 0:r.z)||0;if((i||a||s)&&(n=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:d,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),d&&(n+=`skewX(${d}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Ek=["","X","Y","Z"],_xe=1e3;let Exe=0;function Sk(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Hte(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Pte(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",on,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Hte(n)}function Wte({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=Exe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Txe),this.nodes.forEach(Mxe),this.nodes.forEach(Ixe),this.nodes.forEach(Dxe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new fxe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new N$),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=ote(s)&&!b1e(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let c,f=0;const h=()=>this.root.updateBlockedByResize=!1;on.read(()=>{f=window.innerWidth}),t(s,()=>{const d=window.innerWidth;d!==f&&(f=d,this.root.updateBlockedByResize=!0,c&&c(),c=hxe(h,250),aD.hasAnimatedSinceResize&&(aD.hasAnimatedSinceResize=!1,this.nodes.forEach(Yz)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Lxe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!qte(this.targetLayout,d),w=!f&&h;if(this.options.layoutRoot||this.resumeFrom||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...U$(p,"layout"),onPlay:m,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,w)}else f||Yz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Oxe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Hte(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xz);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Pxe),this.nodes.forEach(Sxe),this.nodes.forEach(Cxe)):this.nodes.forEach(Xz),this.clearAllSnapshots();const o=Is.now();ra.delta=Xf(0,1e3/60,o-ra.timestamp),ra.timestamp=o,ra.isProcessing=!0,dk.update.process(ra),dk.preRender.process(ra),dk.render.process(ra),ra.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,q$.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nxe),this.sharedNodes.forEach(kxe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!es(this.snapshot.measuredBox.x)&&!es(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!zte(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||cm(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),Bxe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Rn();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some($xe))){const{scroll:c}=this.root;c&&(Uy(o.x,c.offset.x),Uy(o.y,c.offset.y))}return o}removeElementScroll(s){var l;const o=Rn();if(ko(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ko(o,s),Uy(o.x,f.offset.x),Uy(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const l=Rn();ko(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&zy(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),cm(c.latestValues)&&zy(l,c.latestValues)}return cm(this.latestValues)&&zy(l,this.latestValues),l}removeTransform(s){const o=Rn();ko(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!cm(u.latestValues))continue;WF(u.latestValues)&&u.updateSnapshot();const c=Rn(),f=u.measurePageBox();ko(c,f),Uz(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return cm(this.latestValues)&&Uz(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ra.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=ra.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),zx(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),ko(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hwe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ko(this.target,this.layout.layoutBox),Ete(this.target,this.targetDelta)):ko(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),zx(this.relativeTargetOrigin,this.target,d.target),ko(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||WF(this.parent.latestValues)||_te(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ra.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;ko(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;nwe(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Rn());const{target:d}=s;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($z(this.prevProjectionDelta.x,this.projectionDelta.x),$z(this.prevProjectionDelta.y,this.projectionDelta.y)),Ux(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Gz(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qy(),this.projectionDelta=qy(),this.projectionDeltaWithTransform=qy()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=qy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Rn(),d=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,v=this.getStack(),y=!v||v.members.length<=1,w=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(Fxe));this.animationProgress=0;let b;this.mixTargetDelta=A=>{const x=A/1e3;Qz(f.x,s.x,x),Qz(f.y,s.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Rxe(this.relativeTarget,this.relativeTargetOrigin,h,x),b&&wxe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Rn()),ko(b,this.relativeTarget)),m&&(this.animationValues=c,pxe(c,u,this.latestValues,x,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(cp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{aD.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jb(0)),this.currentAnimation=uxe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_xe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&Gte(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Rn();const f=es(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const h=es(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}ko(o,l),zy(o,c),Ux(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new xxe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Sk("z",s,u,this.animationValues);for(let c=0;c<Ek.length;c++)Sk(`rotate${Ek[c]}`,s,u,this.animationValues),Sk(`skew${Ek[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=iD(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=iD(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!cm(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Axe(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),s.transform=f;const{x:h,y:d}=this.projectionDelta;s.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,u.animationValues?s.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:s.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in _A){if(c[p]===void 0)continue;const{correct:m,applyTo:v,isCSSVariable:y}=_A[p],w=f==="none"?c[p]:m(c[p],u);if(v){const b=v.length;for(let A=0;A<b;A++)s[v[A]]=w}else y?this.options.visualElement.renderState.vars[p]=w:s[p]=w}this.options.layoutId&&(s.pointerEvents=u===this?iD(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Kz),this.root.sharedNodes.clear()}}}function Sxe(t){t.updateLayout()}function Cxe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?Uo(f=>{const h=s?e.measuredBox[f]:e.layoutBox[f],d=es(h);h.min=n[f].min,h.max=h.min+d}):Gte(a,e.layoutBox,n)&&Uo(f=>{const h=s?e.measuredBox[f]:e.layoutBox[f],d=es(n[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const o=qy();Ux(o,n,e.layoutBox);const l=qy();s?Ux(l,t.applyTransform(i,!0),e.measuredBox):Ux(l,n,e.layoutBox);const u=!zte(o);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const p=Rn();zx(p,e.layoutBox,h.layoutBox);const m=Rn();zx(m,n,d.layoutBox),qte(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Txe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Dxe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Nxe(t){t.clearSnapshot()}function Kz(t){t.clearMeasurements()}function Xz(t){t.isLayoutDirty=!1}function Pxe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Yz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Mxe(t){t.resolveTargetDelta()}function Ixe(t){t.calcProjection()}function Oxe(t){t.resetSkewAndRotation()}function kxe(t){t.removeLeadSnapshot()}function Qz(t,e,r){t.translate=dn(e.translate,0,r),t.scale=dn(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Zz(t,e,r,n){t.min=dn(e.min,r.min,n),t.max=dn(e.max,r.max,n)}function Rxe(t,e,r,n){Zz(t.x,e.x,r.x,n),Zz(t.y,e.y,r.y,n)}function Fxe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Lxe={duration:.45,ease:[.4,0,.1,1]},Jz=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),e9=Jz("applewebkit/")&&!Jz("chrome/")?Math.round:pl;function t9(t){t.min=e9(t.min),t.max=e9(t.max)}function Bxe(t){t9(t.x),t9(t.y)}function Gte(t,e,r){return t==="position"||t==="preserve-aspect"&&!qwe(Wz(e),Wz(r),.2)}function $xe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const jxe=Wte({attachResizeListener:(t,e)=>EA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ck={current:void 0},Kte=Wte({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ck.current){const t=new jxe({});t.mount(window),t.setOptions({layoutScroll:!0}),Ck.current=t}return Ck.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Vxe={pan:{Feature:axe},drag:{Feature:ixe,ProjectionNode:Kte,MeasureLayout:jte}};function r9(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&on.postRender(()=>a(e,aS(e)))}class Uxe extends Op{mount(){const{current:e}=this.node;e&&(this.unmount=p1e(e,(r,n)=>(r9(this.node,n,"Start"),i=>r9(this.node,i,"End"))))}unmount(){}}class zxe extends Op{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rS(EA(this.node.current,"focus",()=>this.onFocus()),EA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n9(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&on.postRender(()=>a(e,aS(e)))}class qxe extends Op{mount(){const{current:e}=this.node;e&&(this.unmount=y1e(e,(r,n)=>(n9(this.node,n,"Start"),(i,{success:a})=>n9(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const JF=new WeakMap,Tk=new WeakMap,Hxe=t=>{const e=JF.get(t.target);e&&e(t)},Wxe=t=>{t.forEach(Hxe)};function Gxe({root:t,...e}){const r=t||document;Tk.has(r)||Tk.set(r,{});const n=Tk.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Wxe,{root:t,...e})),n[i]}function Kxe(t,e,r){const n=Gxe(e);return JF.set(t,r),n.observe(t),()=>{JF.delete(t),n.unobserve(t)}}const Xxe={some:0,all:1};class Yxe extends Op{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Xxe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return Kxe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Qxe(e,r))&&this.startObserver()}unmount(){}}function Qxe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Zxe={inView:{Feature:Yxe},tap:{Feature:qxe},focus:{Feature:zxe},hover:{Feature:Uxe}},Jxe={layout:{ProjectionNode:Kte,MeasureLayout:jte}},eAe={...Bwe,...Zxe,...Vxe,...Jxe},We=ewe(eAe,dwe),t5=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],i9=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],tAe=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],py=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],Dk={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},sD={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},oD={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function rAe(){const{isDark:t}=Cl(),e=t5.slice(0,3);return O.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const n={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(n)),console.log("   : test@example.com / Test1234")}},[]),I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[I.jsx(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:I.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),I.jsx(We.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Rr,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Rr,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),I.jsx(We.section,{variants:sD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((r,n)=>I.jsxs(We.div,{variants:oD,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[I.jsx("div",{className:"text-4xl mb-3",children:r.icon}),I.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:r.title}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:r.description})]},n))}),I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[I.jsx(We.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),I.jsx(We.div,{variants:sD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(r=>I.jsx(We.div,{variants:oD,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:I.jsxs(Rr,{to:`/concepts/${r.slug}`,children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:r.title}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:r.description})]})},r.slug))})]}),I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[I.jsx(We.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),I.jsx(We.div,{variants:sD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:tAe.map(r=>I.jsxs(We.div,{variants:oD,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[I.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:r.title}),I.jsxs("p",{className:`text-xs sm:text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[r.authors," (",r.year,")"]})]}),I.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${t?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:r.year})]}),I.jsx("p",{className:`text-xs sm:text-sm mt-3 ${t?"text-gray-300":"text-gray-600"}`,children:r.abstract})]},r.id))}),I.jsx(We.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Rr,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function nAe(){const{isDark:t}=Cl(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},r={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return I.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([n,i],a)=>{const s=t5.filter(o=>o.category===n);return s.length===0?null:I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[I.jsx(We.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:I.jsx("div",{className:`inline-block bg-gradient-to-r ${r[n]} p-0.5 rounded-lg`,children:I.jsx("div",{className:`px-4 py-2 rounded-md ${t?"bg-gray-900":"bg-white"}`,children:I.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${r[n]} bg-clip-text text-transparent`,children:i})})})}),I.jsx(We.div,{variants:sD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:s.map((o,l)=>I.jsxs(We.div,{variants:oD,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${t?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[I.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r[n]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),I.jsxs(Rr,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[I.jsx("div",{className:"mb-4",children:I.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${t?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),I.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),I.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:o.description}),I.jsxs("div",{className:`text-xs space-y-1 ${t?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((u,c)=>I.jsxs("div",{className:"flex items-start gap-2",children:[I.jsx("span",{className:"text-blue-400",children:""}),I.jsx("span",{className:"line-clamp-1",children:u})]},c)),o.content.keyPoints.length>2&&I.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},n)})]})}function iAe({tex:t,display:e=!1}){return O.useEffect(()=>{if(window.katex)try{window.katex.render(t,document.getElementById(`math-${t}`),{displayMode:e,throwOnError:!1})}catch(r){console.error("KaTeX error:",r)}},[t,e]),I.jsx("div",{id:`math-${t}`,className:"inline-block"})}function aAe(){const{slug:t}=cee(),e=t5.find(n=>n.slug===t);if(!e)return I.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:r}=e;return I.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),I.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:r.overview})]}),I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("ul",{className:"space-y-2",children:r.keyPoints.map((n,i)=>I.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[I.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),I.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n})]},i))})]}),r.keyFormulas&&r.keyFormulas.length>0&&I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("div",{className:"space-y-4",children:r.keyFormulas.map((n,i)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[I.jsx(iAe,{tex:n.tex}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:n.desc})]},i))})]}),I.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:r.observations})]}),r.relatedPapers&&r.relatedPapers.length>0&&I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("ul",{className:"space-y-2",children:r.relatedPapers.map((n,i)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:n},i))})]})]})}const Qa=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),e3=[.001,0,0,.001,0,0],Nk=1.35,uo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},zh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SA="pdfjs_internal_editor_",Ot={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Zt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},sAe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t3={TRIANGLES:1,LATTICE:2},Ki={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},lD={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},zn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},my={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},wM={ERRORS:0,WARNINGS:1,INFOS:5},CA={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Iw={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},oAe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xM=wM.WARNINGS;function lAe(t){Number.isInteger(t)&&(xM=t)}function uAe(){return xM}function AM(t){xM>=wM.INFOS&&console.info(`Info: ${t}`)}function Tt(t){xM>=wM.WARNINGS&&console.warn(`Warning: ${t}`)}function Lr(t){throw new Error(t)}function Jt(t,e){t||Lr(e)}function cAe(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xte(t,e=null,r=null){if(!t)return null;if(r&&typeof t=="string"){if(r.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(r.tryConvertEncoding)try{t=mAe(t)}catch{}}const n=e?URL.parse(t,e):URL.parse(t);return cAe(n)?n:null}function Yte(t,e,r=!1){const n=URL.parse(t);return n?(n.hash=e,n.href):r&&Xte(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Dt(t,e,r,n=!1){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!0,writable:!1}),r}const Iv=function(){function e(r,n){this.message=r,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class a9 extends Iv{constructor(e,r){super(e,"PasswordException"),this.code=r}}class Pk extends Iv{constructor(e,r){super(e,"UnknownErrorException"),this.details=r}}class r3 extends Iv{constructor(e){super(e,"InvalidPDFException")}}class FN extends Iv{constructor(e,r,n){super(e,"ResponseException"),this.status=r,this.missing=n}}class fAe extends Iv{constructor(e){super(e,"FormatError")}}class hp extends Iv{constructor(e){super(e,"AbortException")}}function Qte(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&Lr("Invalid argument for bytesToString");const e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=r){const a=Math.min(i+r,e),s=t.subarray(i,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function sS(t){typeof t!="string"&&Lr("Invalid argument for stringToBytes");const e=t.length,r=new Uint8Array(e);for(let n=0;n<e;++n)r[n]=t.charCodeAt(n)&255;return r}function hAe(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function dAe(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function pAe(){try{return new Function(""),!0}catch{return!1}}class da{static get isLittleEndian(){return Dt(this,"isLittleEndian",dAe())}static get isEvalSupported(){return Dt(this,"isEvalSupported",pAe())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Dt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Dt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:r}=navigator;return Dt(this,"platform",{isAndroid:r.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:r.includes("Firefox")})}static get isCSSRoundSupported(){var e,r;return Dt(this,"isCSSRoundSupported",(r=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:r.call(e,"width: round(1.5px, 1px)"))}}const Mk=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var Uf,uD,n3;class et{static makeHexColor(e,r,n){return`#${Mk[e]}${Mk[r]}${Mk[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,r){let n;e[0]?(e[0]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[0],r[2]*=e[0],e[3]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[3],r[3]*=e[3]):(n=r[0],r[0]=r[1],r[1]=n,n=r[2],r[2]=r[3],r[3]=n,e[1]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[1],r[3]*=e[1],e[2]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[2],r[2]*=e[2]),r[0]+=e[4],r[1]+=e[5],r[2]+=e[4],r[3]+=e[5]}static transform(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}static multiplyByDOMMatrix(e,r){return[e[0]*r.a+e[2]*r.b,e[1]*r.a+e[3]*r.b,e[0]*r.c+e[2]*r.d,e[1]*r.c+e[3]*r.d,e[0]*r.e+e[2]*r.f+e[4],e[1]*r.e+e[3]*r.f+e[5]]}static applyTransform(e,r,n=0){const i=e[n],a=e[n+1];e[n]=i*r[0]+a*r[2]+r[4],e[n+1]=i*r[1]+a*r[3]+r[5]}static applyTransformToBezier(e,r,n=0){const i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5];for(let c=0;c<6;c+=2){const f=e[n+c],h=e[n+c+1];e[n+c]=f*i+h*s+l,e[n+c+1]=f*a+h*o+u}}static applyInverseTransform(e,r){const n=e[0],i=e[1],a=r[0]*r[3]-r[1]*r[2];e[0]=(n*r[3]-i*r[2]+r[2]*r[5]-r[4]*r[3])/a,e[1]=(-n*r[1]+i*r[0]+r[4]*r[1]-r[5]*r[0])/a}static axialAlignedBoundingBox(e,r,n){const i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=e[0],f=e[1],h=e[2],d=e[3];let p=i*c+l,m=p,v=i*h+l,y=v,w=o*f+u,b=w,A=o*d+u,x=A;if(a!==0||s!==0){const _=a*c,S=a*h,E=s*f,T=s*d;p+=E,y+=E,v+=T,m+=T,w+=_,x+=_,A+=S,b+=S}n[0]=Math.min(n[0],p,v,m,y),n[1]=Math.min(n[1],w,A,b,x),n[2]=Math.max(n[2],p,v,m,y),n[3]=Math.max(n[3],w,A,b,x)}static inverseTransform(e){const r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]}static singularValueDecompose2dScale(e,r){const n=e[0],i=e[1],a=e[2],s=e[3],o=n**2+i**2,l=n*a+i*s,u=a**2+s**2,c=(o+u)/2,f=Math.sqrt(c**2-(o*u-l**2));r[0]=Math.sqrt(c+f||1),r[1]=Math.sqrt(c-f||1)}static normalizeRect(e){const r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r}static intersect(e,r){const n=Math.max(Math.min(e[0],e[2]),Math.min(r[0],r[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(r[0],r[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(r[1],r[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(r[1],r[3]));return a>s?null:[n,a,i,s]}static pointBoundingBox(e,r,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],r)}static rectBoundingBox(e,r,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],r,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],r,i)}static bezierBoundingBox(e,r,n,i,a,s,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],r,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],r,l),W(this,Uf,n3).call(this,e,n,a,o,r,i,s,l,3*(-e+3*(n-a)+o),6*(e-2*n+a),3*(n-e),u),W(this,Uf,n3).call(this,e,n,a,o,r,i,s,l,3*(-r+3*(i-s)+l),6*(r-2*i+s),3*(i-r),u)}}Uf=new WeakSet,uD=function(e,r,n,i,a,s,o,l,u,c){if(u<=0||u>=1)return;const f=1-u,h=u*u,d=h*u,p=f*(f*(f*e+3*u*r)+3*h*n)+d*i,m=f*(f*(f*a+3*u*s)+3*h*o)+d*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)},n3=function(e,r,n,i,a,s,o,l,u,c,f,h){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&W(this,Uf,uD).call(this,e,r,n,i,a,s,o,l,-f/c,h);return}const d=c**2-4*f*u;if(d<0)return;const p=Math.sqrt(d),m=2*u;W(this,Uf,uD).call(this,e,r,n,i,a,s,o,l,(-c+p)/m,h),W(this,Uf,uD).call(this,e,r,n,i,a,s,o,l,(-c-p)/m,h)},$(et,Uf);function mAe(t){return decodeURIComponent(escape(t))}let Ik=null,s9=null;function gAe(t){return Ik||(Ik=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,s9=new Map([["","t"]])),t.replaceAll(Ik,(e,r,n)=>r?r.normalize("NFKC"):s9.get(n))}function Zte(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),Qte(t)}const Hy="pdfjs_internal_id_";function vAe(t,e,r){if(!Array.isArray(r)||r.length<2)return!1;const[n,i,...a]=r;if(!t(n)&&!Number.isInteger(n)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Za(t,e,r){return Math.min(Math.max(t,e),r)}function Jte(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(Qte(t))}function yAe(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):sS(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(r=>{r(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,r)=>e+r,0)});class TA{static textContent(e){const r=[],n={items:r,styles:Object.create(null)};function i(a){var l;if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(TA.shouldBuildText(o))(l=a==null?void 0:a.attributes)!=null&&l.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&r.push({str:s}),!!a.children)for(const u of a.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class ere{static setupStorage(e,r,n,i,a){const s=i.getValue(r,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(r,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(r,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(r,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of n.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(r,{value:u})});break}}static setAttributes({html:e,element:r,storage:n=null,intent:i,linkService:a}){const{attributes:s}=r,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[l,u]of Object.entries(s))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,r,n)}static render(e){var f,h;const r=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const o=a!=="richText",l=e.div;if(l.append(s),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);s.append(d),o&&TA.shouldBuildText(i.name)&&u.push(d)}return{textDivs:u}}const c=[[i,-1,s]];for(;c.length>0;){const[d,p,m]=c.at(-1);if(p+1===d.children.length){c.pop();continue}const v=d.children[++c.at(-1)[1]];if(v===null)continue;const{name:y}=v;if(y==="#text"){const b=document.createTextNode(v.value);u.push(b),m.append(b);continue}const w=(f=v==null?void 0:v.attributes)!=null&&f.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(m.append(w),v.attributes&&this.setAttributes({html:w,element:v,storage:r,intent:a,linkService:n}),((h=v.children)==null?void 0:h.length)>0)c.push([v,-1,w]);else if(v.value){const b=document.createTextNode(v.value);o&&TA.shouldBuildText(y)&&u.push(b),w.append(b)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const r=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=r,e.div.hidden=!1}}const Rc="http://www.w3.org/2000/svg",wm=class wm{};Oe(wm,"CSS",96),Oe(wm,"PDF",72),Oe(wm,"PDF_TO_CSS_UNITS",wm.CSS/wm.PDF);let dp=wm;async function oS(t,e="text"){if(Zw(t,document.baseURI)){const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);switch(e){case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"json":return r.json()}return r.text()}return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":r(i.response);return}r(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class lS{constructor({viewBox:e,userUnit:r,scale:n,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=r,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=s,n*=r;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,f,h,d;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,f=0,h=0,d=1;break;case 90:c=0,f=1,h=1,d=0;break;case 270:c=0,f=-1,h=-1,d=0;break;case 0:c=1,f=0,h=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,d=-d);let p,m,v,y;c===0?(p=Math.abs(u-e[1])*n+a,m=Math.abs(l-e[0])*n+s,v=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+a,m=Math.abs(u-e[1])*n+s,v=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[c*n,f*n,h*n,d*n,p-c*n*l-h*n*u,m-f*n*l-d*n*u],this.width=v,this.height=y}get rawDims(){const e=this.viewBox;return Dt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:r=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new lS({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,r){const n=[e,r];return et.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const r=[e[0],e[1]];et.applyTransform(r,this.transform);const n=[e[2],e[3]];return et.applyTransform(n,this.transform),[r[0],r[1],n[0],n[1]]}convertToPdfPoint(e,r){const n=[e,r];return et.applyInverseTransform(n,this.transform),n}}class r5 extends Iv{constructor(e,r=0){super(e,"RenderingCancelledException"),this.extraDelay=r}}function _M(t){const e=t.length;let r=0;for(;r<e&&t[r].trim()==="";)r++;return t.substring(r,r+5).toLowerCase()==="data:"}function n5(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function bAe(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function wAe(t,e="document.pdf"){if(typeof t!="string")return e;if(_M(t))return Tt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},a=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(a.test(s))return i(s);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const u of o)if(a.test(u))return i(u);const l=Array.from(n.searchParams.keys()).reverse();for(const u of l)if(a.test(u))return i(u)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class o9{constructor(){Oe(this,"started",Object.create(null));Oe(this,"times",[])}time(e){e in this.started&&Tt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Tt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let r=0;for(const{name:n}of this.times)r=Math.max(n.length,r);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(r)} ${a-i}ms
`);return e.join("")}}function Zw(t,e){const r=e?URL.parse(t,e):URL.parse(t);return(r==null?void 0:r.protocol)==="http:"||(r==null?void 0:r.protocol)==="https:"}function wl(t){t.preventDefault()}function Dn(t){t.preventDefault(),t.stopPropagation()}function xAe(t){console.log("Deprecated API usage: "+t)}var l_;class LN{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;g(this,l_)||R(this,l_,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const r=g(this,l_).exec(e);if(!r)return null;const n=parseInt(r[1],10);let i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(r[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(r[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(r[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(r[6],10);l=l>=0&&l<=59?l:0;const u=r[7]||"Z";let c=parseInt(r[8],10);c=c>=0&&c<=23?c:0;let f=parseInt(r[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(s+=c,o+=f):u==="+"&&(s-=c,o-=f),new Date(Date.UTC(n,i,a,s,o,l))}}l_=new WeakMap,$(LN,l_);function AAe(t,{scale:e=1,rotation:r=0}){const{width:n,height:i}=t.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new lS({viewBox:a,userUnit:1,scale:e,rotation:r})}function uS(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Tt(`Not a valid color format: "${t}"`),[0,0,0])}function _Ae(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const r of t.keys()){e.style.color=r;const n=window.getComputedStyle(e).color;t.set(r,uS(n))}e.remove()}function fn(t){const{a:e,b:r,c:n,d:i,e:a,f:s}=t.getTransform();return[e,r,n,i,a,s]}function Cu(t){const{a:e,b:r,c:n,d:i,e:a,f:s}=t.getTransform().invertSelf();return[e,r,n,i,a,s]}function hv(t,e,r=!1,n=!0){if(e instanceof lS){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=t,o=da.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${a}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!r||e.rotation%180===0?(s.width=c,s.height=f):(s.width=f,s.height=c)}n&&t.setAttribute("data-main-rotation",e.rotation)}class vc{constructor(){const{pixelRatio:e}=vc;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,r,n,i,a=-1){let s=1/0,o=1/0,l=1/0;n=vc.capPixels(n,a),n>0&&(s=Math.sqrt(n/(e*r))),i!==-1&&(o=i/e,l=i/r);const u=Math.min(s,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,r){if(r>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+r/100));return e>0?Math.min(e,n):n}return e}}const i3=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class EAe{static get isDarkMode(){var e;return Dt(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class SAe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:r}=e;r.width=r.height="0",r.display="none",r.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Dt(this,"commentForegroundColor",uS(n))}}function CAe(t,e,r,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return t=Math.round(t*n+i),e=Math.round(e*n+i),r=Math.round(r*n+i),[t,e,r]}function l9(t,e){const r=t[0]/255,n=t[1]/255,i=t[2]/255,a=Math.max(r,n,i),s=Math.min(r,n,i),o=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const l=a-s;switch(e[1]=o<.5?l/(a+s):l/(2-a-s),a){case r:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-r)/l+2)*60;break;case i:e[0]=((r-n)/l+4)*60;break}}e[2]=o}function a3(t,e){const r=t[0],n=t[1],i=t[2],a=(1-Math.abs(2*i-1))*n,s=a*(1-Math.abs(r/60%2-1)),o=i-a/2;switch(Math.floor(r/60)){case 0:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 1:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 2:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 3:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 4:e[0]=s+o,e[1]=o,e[2]=a+o;break;case 5:case 6:e[0]=a+o,e[1]=o,e[2]=s+o;break}}function u9(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function c9(t,e,r){a3(t,r),r.map(u9);const n=.2126*r[0]+.7152*r[1]+.0722*r[2];a3(e,r),r.map(u9);const i=.2126*r[0]+.7152*r[1]+.0722*r[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const f9=new Map;function TAe(t,e){const r=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=f9.get(r);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);l9(t,s);const o=i.subarray(6,9);l9(e,o);const l=o[2]<.5,u=l?12:4.5;if(s[2]=l?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),c9(s,o,a)<u){let c,f;l?(c=s[2],f=1):(c=0,f=s[2]);const h=.005;for(;f-c>h;){const d=s[2]=(c+f)/2;l===c9(s,o,a)<u?c=d:f=d}s[2]=l?f:c}return a3(s,a),n=et.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),f9.set(r,n),n}function tre({html:t,dir:e,className:r},n){const i=document.createDocumentFragment();if(typeof t=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=t.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){const u=s[o];a.append(document.createTextNode(u)),o<l-1&&a.append(document.createElement("br"))}i.append(a)}else ere.render({xfaHtml:t,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",r),n.append(i)}function rre(t){const e=new Path2D;if(!t)return e;for(let r=0,n=t.length;r<n;)switch(t[r++]){case Iw.moveTo:e.moveTo(t[r++],t[r++]);break;case Iw.lineTo:e.lineTo(t[r++],t[r++]);break;case Iw.curveTo:e.bezierCurveTo(t[r++],t[r++],t[r++],t[r++],t[r++],t[r++]);break;case Iw.quadraticCurveTo:e.quadraticCurveTo(t[r++],t[r++],t[r++],t[r++]);break;case Iw.closePath:e.closePath();break;default:Tt(`Unrecognized drawing path operator: ${t[r-1]}`);break}return e}var Xh,Yh,Ho,Wo,u_,Qh,x0,A0,c_,kP,nre,oa,ire,are,gy,Jw;const $c=class $c{constructor(e){$(this,oa);$(this,Xh,null);$(this,Yh,null);$(this,Ho);$(this,Wo,null);$(this,u_,null);$(this,Qh,null);$(this,x0,null);$(this,A0,null);R(this,Ho,e),g($c,c_)||R($c,c_,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=R(this,Xh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const r=g(this,Ho)._uiManager._signal;r instanceof AbortSignal&&!r.aborted&&(e.addEventListener("contextmenu",wl,{signal:r}),e.addEventListener("pointerdown",W($c,kP,nre),{signal:r}));const n=R(this,Wo,document.createElement("div"));n.className="buttons",e.append(n);const i=g(this,Ho).toolbarPosition;if(i){const{style:a}=e,s=g(this,Ho)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return g(this,Xh)}hide(){var e;g(this,Xh).classList.add("hidden"),(e=g(this,Yh))==null||e.hideDropdown()}show(){var e,r;g(this,Xh).classList.remove("hidden"),(e=g(this,u_))==null||e.shown(),(r=g(this,Qh))==null||r.shown()}addDeleteButton(){const{editorType:e,_uiManager:r}=g(this,Ho),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",g($c,c_)[e]),W(this,oa,gy).call(this,n)&&n.addEventListener("click",i=>{r.delete()},{signal:r._signal}),g(this,Wo).append(n)}async addAltText(e){const r=await e.render();W(this,oa,gy).call(this,r),g(this,Wo).append(r,g(this,oa,Jw)),R(this,u_,e)}addComment(e,r=null){if(g(this,Qh))return;const n=e.renderForToolbar();if(!n)return;W(this,oa,gy).call(this,n);const i=R(this,x0,g(this,oa,Jw));r?(g(this,Wo).insertBefore(n,r),g(this,Wo).insertBefore(i,r)):g(this,Wo).append(n,i),R(this,Qh,e),e.toolbar=this}addColorPicker(e){if(g(this,Yh))return;R(this,Yh,e);const r=e.renderButton();W(this,oa,gy).call(this,r),g(this,Wo).append(r,g(this,oa,Jw))}async addEditSignatureButton(e){const r=R(this,A0,await e.renderEditButton(g(this,Ho)));W(this,oa,gy).call(this,r),g(this,Wo).append(r,g(this,oa,Jw))}removeButton(e){var r,n;switch(e){case"comment":(r=g(this,Qh))==null||r.removeToolbarCommentButton(),R(this,Qh,null),(n=g(this,x0))==null||n.remove(),R(this,x0,null);break}}async addButton(e,r){switch(e){case"colorPicker":r&&this.addColorPicker(r);break;case"altText":r&&await this.addAltText(r);break;case"editSignature":r&&await this.addEditSignatureButton(r);break;case"delete":this.addDeleteButton();break;case"comment":r&&this.addComment(r);break}}async addButtonBefore(e,r,n){if(!r&&e==="comment")return;const i=g(this,Wo).querySelector(n);i&&e==="comment"&&this.addComment(r,i)}updateEditSignatureButton(e){g(this,A0)&&(g(this,A0).title=e)}remove(){var e;g(this,Xh).remove(),(e=g(this,Yh))==null||e.destroy(),R(this,Yh,null)}};Xh=new WeakMap,Yh=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,u_=new WeakMap,Qh=new WeakMap,x0=new WeakMap,A0=new WeakMap,c_=new WeakMap,kP=new WeakSet,nre=function(e){e.stopPropagation()},oa=new WeakSet,ire=function(e){g(this,Ho)._focusEventsAllowed=!1,Dn(e)},are=function(e){g(this,Ho)._focusEventsAllowed=!0,Dn(e)},gy=function(e){const r=g(this,Ho)._uiManager._signal;return!(r instanceof AbortSignal)||r.aborted?!1:(e.addEventListener("focusin",W(this,oa,ire).bind(this),{capture:!0,signal:r}),e.addEventListener("focusout",W(this,oa,are).bind(this),{capture:!0,signal:r}),e.addEventListener("contextmenu",wl,{signal:r}),!0)},Jw=function(){const e=document.createElement("div");return e.className="divider",e},$($c,kP),$($c,c_,null);let s3=$c;var f_,km,zc,ch,sre,ore,o3;class DAe{constructor(e){$(this,ch);$(this,f_,null);$(this,km,null);$(this,zc);R(this,zc,e)}show(e,r,n){const[i,a]=W(this,ch,ore).call(this,r,n),{style:s}=g(this,km)||R(this,km,W(this,ch,sre).call(this));e.append(g(this,km)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,km).remove()}}f_=new WeakMap,km=new WeakMap,zc=new WeakMap,ch=new WeakSet,sre=function(){const e=R(this,km,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const r=g(this,zc)._signal;r instanceof AbortSignal&&!r.aborted&&e.addEventListener("contextmenu",wl,{signal:r});const n=R(this,f_,document.createElement("div"));return n.className="buttons",e.append(n),g(this,zc).hasCommentManager()&&W(this,ch,o3).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{g(this,zc).commentSelection("floating_button")}),W(this,ch,o3).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{g(this,zc).highlightSelection("floating_button")}),e},ore=function(e,r){let n=0,i=0;for(const a of e){const s=a.y+a.height;if(s<n)continue;const o=a.x+(r?a.width:0);if(s>n){i=o,n=s;continue}r?o>i&&(i=o):o<i&&(i=o)}return[r?1-i:i,n]},o3=function(e,r,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",r);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const o=g(this,zc)._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",wl,{signal:o}),a.addEventListener("click",i,{signal:o})),g(this,f_).append(a)};function lre(t,e,r){for(const n of r)e.addEventListener(n,t[n].bind(t))}var Rm,Fm,_0,Lm;const Er=class Er{static initializeAndAddPointerId(e){(g(Er,Fm)||R(Er,Fm,new Set)).add(e)}static setPointer(e,r){g(Er,Rm)||R(Er,Rm,r),g(Er,Lm)??R(Er,Lm,e)}static setTimeStamp(e){R(Er,_0,e)}static isSamePointerId(e){return g(Er,Rm)===e}static isSamePointerIdOrRemove(e){var r;return g(Er,Rm)===e?!0:((r=g(Er,Fm))==null||r.delete(e),!1)}static isSamePointerType(e){return g(Er,Lm)===e}static isInitializedAndDifferentPointerType(e){return g(Er,Lm)!==null&&!Er.isSamePointerType(e)}static isSameTimeStamp(e){return g(Er,_0)===e}static isUsingMultiplePointers(){var e;return((e=g(Er,Fm))==null?void 0:e.size)>=1}static clearPointerType(){R(Er,Lm,null)}static clearPointerIds(){R(Er,Rm,NaN),R(Er,Fm,null)}static clearTimeStamp(){R(Er,_0,NaN)}};Rm=new WeakMap,Fm=new WeakMap,_0=new WeakMap,Lm=new WeakMap,$(Er,Rm,NaN),$(Er,Fm,null),$(Er,_0,NaN),$(Er,Lm,null);let Sa=Er;var RP;class NAe{constructor(){$(this,RP,0)}get id(){return`${SA}${ri(this,RP)._++}`}}RP=new WeakMap;var E0,h_,Ca,S0,cD;const GV=class GV{constructor(){$(this,S0);$(this,E0,Zte());$(this,h_,0);$(this,Ca,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:r,name:n,size:i,type:a}=e;return W(this,S0,cD).call(this,`${r}_${n}_${i}_${a}`,e)}async getFromUrl(e){return W(this,S0,cD).call(this,e,e)}async getFromBlob(e,r){const n=await r;return W(this,S0,cD).call(this,e,n)}async getFromId(e){g(this,Ca)||R(this,Ca,new Map);const r=g(this,Ca).get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return this.getFromFile(r.file);if(r.blobPromise){const{blobPromise:n}=r;return delete r.blobPromise,this.getFromBlob(r.id,n)}return this.getFromUrl(r.url)}getFromCanvas(e,r){g(this,Ca)||R(this,Ca,new Map);let n=g(this,Ca).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(r.width,r.height);return i.getContext("2d").drawImage(r,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${g(this,E0)}_${ri(this,h_)._++}`,refCounter:1,isSvg:!1},g(this,Ca).set(e,n),g(this,Ca).set(n.id,n),n}getSvgUrl(e){const r=g(this,Ca).get(e);return r!=null&&r.isSvg?r.svgUrl:null}deleteId(e){var i;g(this,Ca)||R(this,Ca,new Map);const r=g(this,Ca).get(e);if(!r||(r.refCounter-=1,r.refCounter!==0))return;const{bitmap:n}=r;if(!r.url&&!r.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),r.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),r.bitmap=null}isValidId(e){return e.startsWith(`image_${g(this,E0)}_`)}};E0=new WeakMap,h_=new WeakMap,Ca=new WeakMap,S0=new WeakSet,cD=async function(e,r){g(this,Ca)||R(this,Ca,new Map);let n=g(this,Ca).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${g(this,E0)}_${ri(this,h_)._++}`,refCounter:0,isSvg:!1});let i;if(typeof r=="string"?(n.url=r,i=await oS(r,"blob")):r instanceof File?i=n.file=r:r instanceof Blob&&(i=r),i.type==="image/svg+xml"){const a=GV._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},s.onload=async()=>{const f=n.svgUrl=s.result;o.src=await a?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=s.onerror=c});s.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Tt(i),n=null}return g(this,Ca).set(e,n),n&&g(this,Ca).set(n.id,n),n};let l3=GV;var On,Zh,d_,cn;class PAe{constructor(e=128){$(this,On,[]);$(this,Zh,!1);$(this,d_);$(this,cn,-1);R(this,d_,e)}add({cmd:e,undo:r,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),g(this,Zh))return;const l={cmd:e,undo:r,post:n,type:a};if(g(this,cn)===-1){g(this,On).length>0&&(g(this,On).length=0),R(this,cn,0),g(this,On).push(l);return}if(s&&g(this,On)[g(this,cn)].type===a){o&&(l.undo=g(this,On)[g(this,cn)].undo),g(this,On)[g(this,cn)]=l;return}const u=g(this,cn)+1;u===g(this,d_)?g(this,On).splice(0,1):(R(this,cn,u),u<g(this,On).length&&g(this,On).splice(u)),g(this,On).push(l)}undo(){if(g(this,cn)===-1)return;R(this,Zh,!0);const{undo:e,post:r}=g(this,On)[g(this,cn)];e(),r==null||r(),R(this,Zh,!1),R(this,cn,g(this,cn)-1)}redo(){if(g(this,cn)<g(this,On).length-1){R(this,cn,g(this,cn)+1),R(this,Zh,!0);const{cmd:e,post:r}=g(this,On)[g(this,cn)];e(),r==null||r(),R(this,Zh,!1)}}hasSomethingToUndo(){return g(this,cn)!==-1}hasSomethingToRedo(){return g(this,cn)<g(this,On).length-1}cleanType(e){if(g(this,cn)!==-1){for(let r=g(this,cn);r>=0;r--)if(g(this,On)[r].type!==e){g(this,On).splice(r+1,g(this,cn)-r),R(this,cn,r);return}g(this,On).length=0,R(this,cn,-1)}}destroy(){R(this,On,null)}}On=new WeakMap,Zh=new WeakMap,d_=new WeakMap,cn=new WeakMap;var FP,ure;class cS{constructor(e){$(this,FP);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=da.platform;for(const[n,i,a={}]of e)for(const s of n){const o=s.startsWith("mac+");r&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!r&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,r){if(!this.allKeys.has(r.key))return;const n=this.callbacks.get(W(this,FP,ure).call(this,r));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=n;o&&!o(e,r)||(i.bind(e,...s,r)(),a||Dn(r))}}FP=new WeakSet,ure=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r};const LP=class LP{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _Ae(e),Dt(this,"_colors",e)}convert(e){const r=uS(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[n,i]of this._colors)if(i.every((a,s)=>a===r[s]))return LP._colorsMapping.get(n);return r}getHexCode(e){const r=this._colors.get(e);return r?et.makeHexColor(...r):e}};Oe(LP,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let u3=LP;var C0,Hs,T0,xn,ai,D0,Go,N0,Ko,Ta,Jh,ed,P0,td,Iu,Xo,Bm,p_,m_,M0,g_,Ou,rd,I0,nd,ku,BP,id,O0,v_,ad,$m,k0,sd,y_,Hn,dr,qc,od,ld,b_,R0,w_,ud,Ru,Hc,x_,A_,Yo,He,fD,c3,cre,fre,ex,hre,dre,pre,f3,mre,gre,vre,yre,Wa,Fc,bre,wre,h3,xre,tx,d3;const Jy=class Jy{constructor(e,r,n,i,a,s,o,l,u,c,f,h,d,p,m,v){$(this,He);$(this,C0,new AbortController);$(this,Hs,null);$(this,T0,null);$(this,xn,new Map);$(this,ai,new Map);$(this,D0,null);$(this,Go,null);$(this,N0,null);$(this,Ko,new PAe);$(this,Ta,null);$(this,Jh,null);$(this,ed,null);$(this,P0,0);$(this,td,new Set);$(this,Iu,null);$(this,Xo,null);$(this,Bm,new Set);Oe(this,"_editorUndoBar",null);$(this,p_,!1);$(this,m_,!1);$(this,M0,!1);$(this,g_,null);$(this,Ou,null);$(this,rd,null);$(this,I0,null);$(this,nd,!1);$(this,ku,null);$(this,BP,new NAe);$(this,id,!1);$(this,O0,!1);$(this,v_,!1);$(this,ad,null);$(this,$m,null);$(this,k0,null);$(this,sd,null);$(this,y_,null);$(this,Hn,Ot.NONE);$(this,dr,new Set);$(this,qc,null);$(this,od,null);$(this,ld,null);$(this,b_,null);$(this,R0,null);$(this,w_,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});$(this,ud,[0,0]);$(this,Ru,null);$(this,Hc,null);$(this,x_,null);$(this,A_,null);$(this,Yo,null);const y=this._signal=g(this,C0).signal;R(this,Hc,e),R(this,x_,r),R(this,A_,n),R(this,D0,i),R(this,Ta,a),R(this,od,s),R(this,R0,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:y}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),o._on("setpreference",this.onSetPreference.bind(this),{signal:y}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:y}),window.addEventListener("pointerdown",()=>{R(this,O0,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{R(this,O0,!1)},{capture:!0,signal:y}),W(this,He,hre).call(this),W(this,He,yre).call(this),W(this,He,f3).call(this),R(this,Go,l.annotationStorage),R(this,g_,l.filterFactory),R(this,ld,u),R(this,I0,c||null),R(this,p_,f),R(this,m_,h),R(this,M0,d),R(this,y_,p||null),this.viewParameters={realScale:dp.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=v!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const e=Jy.prototype,r=s=>g(s,Hc).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new cS([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&g(s,Hc).contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&g(s,Hc).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:r}]]))}destroy(){var e,r,n,i,a,s,o,l,u;(e=g(this,Yo))==null||e.resolve(),R(this,Yo,null),(r=g(this,C0))==null||r.abort(),R(this,C0,null),this._signal=null;for(const c of g(this,ai).values())c.destroy();g(this,ai).clear(),g(this,xn).clear(),g(this,Bm).clear(),(n=g(this,sd))==null||n.clear(),R(this,Hs,null),g(this,dr).clear(),g(this,Ko).destroy(),(i=g(this,D0))==null||i.destroy(),(a=g(this,Ta))==null||a.destroy(),(s=g(this,od))==null||s.destroy(),(o=g(this,ku))==null||o.hide(),R(this,ku,null),(l=g(this,k0))==null||l.destroy(),R(this,k0,null),R(this,T0,null),g(this,Ou)&&(clearTimeout(g(this,Ou)),R(this,Ou,null)),g(this,Ru)&&(clearTimeout(g(this,Ru)),R(this,Ru,null)),(u=this._editorUndoBar)==null||u.destroy(),R(this,R0,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return g(this,y_)}get useNewAltTextFlow(){return g(this,m_)}get useNewAltTextWhenAddingImage(){return g(this,M0)}get hcmFilter(){return Dt(this,"hcmFilter",g(this,ld)?g(this,g_).addHCMFilter(g(this,ld).foreground,g(this,ld).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(g(this,Hc)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",g(this,I0)?new Map(g(this,I0).split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Dt(this,"highlightColors",null);const r=new Map,n=!!g(this,ld);for(const[i,a]of e){const s=i.endsWith("_HCM");if(n&&s){r.set(i.replace("_HCM",""),a);continue}!n&&!s&&r.set(i,a)}return Dt(this,"highlightColors",r)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const r=this.highlightColorNames.get(e);return this._highlightColors.get(r)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),R(this,ed,e)}setMainHighlightColorPicker(e){R(this,k0,e)}editAltText(e,r=!1){var n;(n=g(this,D0))==null||n.editAltText(this,e,r)}hasCommentManager(){return!!g(this,Ta)}editComment(e,r,n,i){var a;(a=g(this,Ta))==null||a.showDialog(this,e,r,n,i)}selectComment(e,r){const n=g(this,ai).get(e),i=n==null?void 0:n.getEditorByUID(r);i==null||i.toggleComment(!0,!0)}updateComment(e){var r;(r=g(this,Ta))==null||r.updateComment(e.getData())}updatePopupColor(e){var r;(r=g(this,Ta))==null||r.updatePopupColor(e)}removeComment(e){var r;(r=g(this,Ta))==null||r.removeComments([e.uid])}toggleComment(e,r,n=void 0){var i;(i=g(this,Ta))==null||i.toggleCommentPopup(e,r,n)}makeCommentColor(e,r){var n;return e&&((n=g(this,Ta))==null?void 0:n.makeCommentColor(e,r))||null}getCommentDialogElement(){var e;return((e=g(this,Ta))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(g(this,ai).has(e-1))return;const{resolve:r,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),r())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var r;(r=g(this,od))==null||r.getSignature({uiManager:this,editor:e})}get signatureManager(){return g(this,od)}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":R(this,M0,r);break}}onPageChanging({pageNumber:e}){R(this,P0,e-1)}focusMainContainer(){g(this,Hc).focus()}findParent(e,r){for(const n of g(this,ai).values()){const{x:i,y:a,width:s,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&r>=a&&r<=a+o)return n}return null}disableUserSelect(e=!1){g(this,x_).classList.toggle("noUserSelect",e)}addShouldRescale(e){g(this,Bm).add(e)}removeShouldRescale(e){g(this,Bm).delete(e)}onScaleChanging({scale:e}){var r;this.commitOrRemove(),this.viewParameters.realScale=e*dp.PDF_TO_CSS_UNITS;for(const n of g(this,Bm))n.onScaleChanging();(r=g(this,ed))==null||r.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",r=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=n,l=n.toString(),c=W(this,He,fD).call(this,n).closest(".textLayer"),f=this.getSelectionBoxes(c);if(!f)return;n.empty();const h=W(this,He,c3).call(this,c),d=g(this,Hn)===Ot.NONE,p=()=>{const m=h==null?void 0:h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:l});d&&this.showAllEditors("highlight",!0,!0),r&&(m==null||m.editComment())};if(d){this.switchToMode(Ot.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!g(this,Go))return null;const r=`${SA}${e}`,n=g(this,Go).getRawValue(r);return n&&g(this,Go).remove(r),n}addToAnnotationStorage(e){!e.isEmpty()&&g(this,Go)&&!g(this,Go).has(e.id)&&g(this,Go).setValue(e.id,e)}a11yAlert(e,r=null){const n=g(this,A_);n&&(n.setAttribute("data-l10n-id",e),r?n.setAttribute("data-l10n-args",JSON.stringify(r)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,g(this,nd)&&(R(this,nd,!1),W(this,He,ex).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const r of g(this,dr))if(r.div.contains(e)){R(this,$m,[r,e]),r._focusEventsAllowed=!1;break}}focus(){if(!g(this,$m))return;const[e,r]=g(this,$m);R(this,$m,null),r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}addEditListeners(){W(this,He,f3).call(this),this.setEditingState(!0)}removeEditListeners(){W(this,He,mre).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:r}of e.dataTransfer.items)for(const n of g(this,Xo))if(n.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const r of e.dataTransfer.items)for(const n of g(this,Xo))if(n.isHandlingMimeForPasting(r.type)){n.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=g(this,Hs))==null||n.commitOrRemove(),!this.hasSelection)return;const r=[];for(const i of g(this,dr)){const a=i.serialize(!0);a&&r.push(a)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:r}=e;for(const a of r.items)for(const s of g(this,Xo))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let n=r.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Tt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;a.push(u)}const s=()=>{for(const l of a)W(this,He,h3).call(this,l);W(this,He,d3).call(this,a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){Tt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,Hn)!==Ot.NONE&&!this.isEditorHandlingKeyboard&&Jy._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,nd)&&(R(this,nd,!1),W(this,He,ex).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(W(this,He,dre).call(this),W(this,He,gre).call(this),W(this,He,Wa).call(this,{isEditing:g(this,Hn)!==Ot.NONE,isEmpty:W(this,He,tx).call(this),hasSomethingToUndo:g(this,Ko).hasSomethingToUndo(),hasSomethingToRedo:g(this,Ko).hasSomethingToRedo(),hasSelectedEditor:!1})):(W(this,He,pre).call(this),W(this,He,vre).call(this),W(this,He,Wa).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!g(this,Xo)){R(this,Xo,e);for(const r of g(this,Xo))W(this,He,Fc).call(this,r.defaultPropertiesToUpdate)}}getId(){return g(this,BP).id}get currentLayer(){return g(this,ai).get(g(this,P0))}getLayer(e){return g(this,ai).get(e)}get currentPageIndex(){return g(this,P0)}addLayer(e){g(this,ai).set(e.pageIndex,e),g(this,id)?e.enable():e.disable()}removeLayer(e){g(this,ai).delete(e.pageIndex)}async updateMode(e,r=null,n=!1,i=!1,a=!1){var s,o,l,u,c,f;if(g(this,Hn)!==e&&!(g(this,Yo)&&(await g(this,Yo).promise,!g(this,Yo)))){if(R(this,Yo,Promise.withResolvers()),(s=g(this,ed))==null||s.commitOrRemove(),g(this,Hn)===Ot.POPUP&&((o=g(this,Ta))==null||o.hideSidebar()),(l=g(this,Ta))==null||l.destroyPopup(),R(this,Hn,e),e===Ot.NONE){this.setEditingState(!1),W(this,He,wre).call(this);for(const h of g(this,xn).values())h.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),g(this,Yo).resolve();return}for(const h of g(this,xn).values())h.addStandaloneCommentButton();e===Ot.SIGNATURE&&await((c=g(this,od))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await W(this,He,bre).call(this),this.unselectAll();for(const h of g(this,ai).values())h.updateMode(e);if(e===Ot.POPUP){g(this,T0)||R(this,T0,await g(this,R0).getAnnotationsByType(new Set(g(this,Xo).map(p=>p._editorType))));const h=new Set,d=[];for(const p of g(this,xn).values()){const{annotationElementId:m,hasComment:v,deleted:y}=p;m&&h.add(m),v&&!y&&d.push(p.getData())}for(const p of g(this,T0)){const{id:m,popupRef:v,contentsObj:y}=p;v&&(y!=null&&y.str)&&!h.has(m)&&!g(this,td).has(m)&&d.push(p)}(f=g(this,Ta))==null||f.showSidebar(d)}if(!r){n&&this.addNewEditorFromKeyboard(),g(this,Yo).resolve();return}for(const h of g(this,xn).values())h.uid===r?(this.setSelected(h),a?h.editComment():i?h.enterInEditMode():h.focus()):h.unselect();g(this,Yo).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==g(this,Hn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,r){if(g(this,Xo)){switch(e){case Zt.CREATE:this.currentLayer.addNewEditor(r);return;case Zt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,b_)||R(this,b_,new Map)).set(e,r),this.showAllEditors("highlight",r);break}if(this.hasSelection)for(const n of g(this,dr))n.updateParams(e,r);else for(const n of g(this,Xo))n.updateDefaultParams(e,r)}}showAllEditors(e,r,n=!1){var a;for(const s of g(this,xn).values())s.editorType===e&&s.show(r);(((a=g(this,b_))==null?void 0:a.get(Zt.HIGHLIGHT_SHOW_ALL))??!0)!==r&&W(this,He,Fc).call(this,[[Zt.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(g(this,v_)!==e){R(this,v_,e);for(const r of g(this,ai).values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}*getEditors(e){for(const r of g(this,xn).values())r.pageIndex===e&&(yield r)}getEditor(e){return g(this,xn).get(e)}addEditor(e){g(this,xn).set(e.id,e)}removeEditor(e){var r,n;e.div.contains(document.activeElement)&&(g(this,Ou)&&clearTimeout(g(this,Ou)),R(this,Ou,setTimeout(()=>{this.focusMainContainer(),R(this,Ou,null)},0))),g(this,xn).delete(e.id),e.annotationElementId&&((r=g(this,sd))==null||r.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!g(this,td).has(e.annotationElementId))&&((n=g(this,Go))==null||n.remove(e.id))}addDeletedAnnotationElement(e){g(this,td).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return g(this,td).has(e)}removeDeletedAnnotationElement(e){g(this,td).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){g(this,Hs)!==e&&(R(this,Hs,e),e&&W(this,He,Fc).call(this,e.propertiesToUpdate))}updateUI(e){g(this,He,xre)===e&&W(this,He,Fc).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){W(this,He,Fc).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(g(this,dr).has(e)){g(this,dr).delete(e),e.unselect(),W(this,He,Wa).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,dr).add(e),e.select(),W(this,He,Fc).call(this,e.propertiesToUpdate),W(this,He,Wa).call(this,{hasSelectedEditor:!0})}setSelected(e){var r;this.updateToolbar({mode:e.mode,editId:e.uid}),(r=g(this,ed))==null||r.commitOrRemove();for(const n of g(this,dr))n!==e&&n.unselect();g(this,dr).clear(),g(this,dr).add(e),e.select(),W(this,He,Fc).call(this,e.propertiesToUpdate),W(this,He,Wa).call(this,{hasSelectedEditor:!0})}isSelected(e){return g(this,dr).has(e)}get firstSelectedEditor(){return g(this,dr).values().next().value}unselect(e){e.unselect(),g(this,dr).delete(e),W(this,He,Wa).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,dr).size!==0}get isEnterHandled(){return g(this,dr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;g(this,Ko).undo(),W(this,He,Wa).call(this,{hasSomethingToUndo:g(this,Ko).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:W(this,He,tx).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){g(this,Ko).redo(),W(this,He,Wa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Ko).hasSomethingToRedo(),isEmpty:W(this,He,tx).call(this)})}addCommands(e){g(this,Ko).add(e),W(this,He,Wa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:W(this,He,tx).call(this)})}cleanUndoStack(e){g(this,Ko).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const r=e?[e]:[...g(this,dr)],n=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,r.length===1?r[0].editorType:r.length);for(const o of r)o.remove()},i=()=>{for(const s of r)W(this,He,h3).call(this,s)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=g(this,Hs))==null||e.commitOrRemove()}hasSomethingToControl(){return g(this,Hs)||this.hasSelection}selectAll(){for(const e of g(this,dr))e.commit();W(this,He,d3).call(this,g(this,xn).values())}unselectAll(){var e;if(!(g(this,Hs)&&(g(this,Hs).commitOrRemove(),g(this,Hn)!==Ot.NONE))&&!((e=g(this,ed))!=null&&e.commitOrRemove())&&this.hasSelection){for(const r of g(this,dr))r.unselect();g(this,dr).clear(),W(this,He,Wa).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,r,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;g(this,ud)[0]+=e,g(this,ud)[1]+=r;const[i,a]=g(this,ud),s=[...g(this,dr)],o=1e3;g(this,Ru)&&clearTimeout(g(this,Ru)),R(this,Ru,setTimeout(()=>{R(this,Ru,null),g(this,ud)[0]=g(this,ud)[1]=0,this.addCommands({cmd:()=>{for(const l of s)g(this,xn).has(l.id)&&(l.translateInPage(i,a),l.translationDone())},undo:()=>{for(const l of s)g(this,xn).has(l.id)&&(l.translateInPage(-i,-a),l.translationDone())},mustExec:!1})},o));for(const l of s)l.translateInPage(e,r),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,Iu,new Map);for(const e of g(this,dr))g(this,Iu).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,Iu))return!1;this.disableUserSelect(!1);const e=g(this,Iu);R(this,Iu,null);let r=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,r||(r=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex);if(!r)return!1;const n=(i,a,s,o)=>{if(g(this,xn).has(i.id)){const l=g(this,ai).get(o);l?i._setParentAndPosition(l,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)n(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)n(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(g(this,Iu))for(const n of g(this,Iu).keys())n.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||g(this,dr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return g(this,Hs)===e}getActive(){return g(this,Hs)}getMode(){return g(this,Hn)}isEditingMode(){return g(this,Hn)!==Ot.NONE}get imageManager(){return Dt(this,"imageManager",new l3)}getSelectionBoxes(e){if(!e)return null;const r=document.getSelection();for(let u=0,c=r.rangeCount;u<c;u++)if(!e.contains(r.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,f,h)=>({x:(c-i)/s,y:1-(u+f-n)/a,width:h/s,height:f/a});break;case"180":o=(u,c,f,h)=>({x:1-(u+f-n)/a,y:1-(c+h-i)/s,width:f/a,height:h/s});break;case"270":o=(u,c,f,h)=>({x:1-(c+h-i)/s,y:(u-n)/a,width:h/s,height:f/a});break;default:o=(u,c,f,h)=>({x:(u-n)/a,y:(c-i)/s,width:f/a,height:h/s});break}const l=[];for(let u=0,c=r.rangeCount;u<c;u++){const f=r.getRangeAt(u);if(!f.collapsed)for(const{x:h,y:d,width:p,height:m}of f.getClientRects())p===0||m===0||l.push(o(h,d,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:r}){(g(this,N0)||R(this,N0,new Map)).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){var r;(r=g(this,N0))==null||r.delete(e)}renderAnnotationElement(e){var i;const r=(i=g(this,N0))==null?void 0:i.get(e.data.id);if(!r)return;const n=g(this,Go).getRawValue(r);n&&(g(this,Hn)===Ot.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,r,n){var a;const i=(a=g(this,sd))==null?void 0:a.get(e);i&&(i.setCanvas(r,n),g(this,sd).delete(e))}addMissingCanvas(e,r){(g(this,sd)||R(this,sd,new Map)).set(e,r)}};C0=new WeakMap,Hs=new WeakMap,T0=new WeakMap,xn=new WeakMap,ai=new WeakMap,D0=new WeakMap,Go=new WeakMap,N0=new WeakMap,Ko=new WeakMap,Ta=new WeakMap,Jh=new WeakMap,ed=new WeakMap,P0=new WeakMap,td=new WeakMap,Iu=new WeakMap,Xo=new WeakMap,Bm=new WeakMap,p_=new WeakMap,m_=new WeakMap,M0=new WeakMap,g_=new WeakMap,Ou=new WeakMap,rd=new WeakMap,I0=new WeakMap,nd=new WeakMap,ku=new WeakMap,BP=new WeakMap,id=new WeakMap,O0=new WeakMap,v_=new WeakMap,ad=new WeakMap,$m=new WeakMap,k0=new WeakMap,sd=new WeakMap,y_=new WeakMap,Hn=new WeakMap,dr=new WeakMap,qc=new WeakMap,od=new WeakMap,ld=new WeakMap,b_=new WeakMap,R0=new WeakMap,w_=new WeakMap,ud=new WeakMap,Ru=new WeakMap,Hc=new WeakMap,x_=new WeakMap,A_=new WeakMap,Yo=new WeakMap,He=new WeakSet,fD=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},c3=function(e){const{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(const n of g(this,ai).values())if(n.hasTextLayer(e))return n;return null},cre=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=W(this,He,fD).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(g(this,ku)||R(this,ku,new DAe(this)),g(this,ku).show(n,i,this.direction==="ltr"))},fre=function(){var a,s,o;const e=document.getSelection();if(!e||e.isCollapsed){g(this,qc)&&((a=g(this,ku))==null||a.hide(),R(this,qc,null),W(this,He,Wa).call(this,{hasSelectedText:!1}));return}const{anchorNode:r}=e;if(r===g(this,qc))return;const i=W(this,He,fD).call(this,e).closest(".textLayer");if(!i){g(this,qc)&&((s=g(this,ku))==null||s.hide(),R(this,qc,null),W(this,He,Wa).call(this,{hasSelectedText:!1}));return}if((o=g(this,ku))==null||o.hide(),R(this,qc,r),W(this,He,Wa).call(this,{hasSelectedText:!0}),!(g(this,Hn)!==Ot.HIGHLIGHT&&g(this,Hn)!==Ot.NONE)&&(g(this,Hn)===Ot.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),R(this,nd,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=g(this,Hn)===Ot.HIGHLIGHT?W(this,He,c3).call(this,i):null;if(l==null||l.toggleDrawing(),g(this,O0)){const u=new AbortController,c=this.combinedSignal(u),f=h=>{h.type==="pointerup"&&h.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),h.type==="pointerup"&&W(this,He,ex).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}else l==null||l.toggleDrawing(!0),W(this,He,ex).call(this,"main_toolbar")}},ex=function(e=""){g(this,Hn)===Ot.HIGHLIGHT?this.highlightSelection(e):g(this,p_)&&W(this,He,cre).call(this)},hre=function(){document.addEventListener("selectionchange",W(this,He,fre).bind(this),{signal:this._signal})},dre=function(){if(g(this,rd))return;R(this,rd,new AbortController);const e=this.combinedSignal(g(this,rd));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},pre=function(){var e;(e=g(this,rd))==null||e.abort(),R(this,rd,null)},f3=function(){if(g(this,ad))return;R(this,ad,new AbortController);const e=this.combinedSignal(g(this,ad));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},mre=function(){var e;(e=g(this,ad))==null||e.abort(),R(this,ad,null)},gre=function(){if(g(this,Jh))return;R(this,Jh,new AbortController);const e=this.combinedSignal(g(this,Jh));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},vre=function(){var e;(e=g(this,Jh))==null||e.abort(),R(this,Jh,null)},yre=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Wa=function(e){Object.entries(e).some(([n,i])=>g(this,w_)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,w_),e)}),g(this,Hn)===Ot.HIGHLIGHT&&e.hasSelectedEditor===!1&&W(this,He,Fc).call(this,[[Zt.HIGHLIGHT_FREE,!0]]))},Fc=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},bre=async function(){if(!g(this,id)){R(this,id,!0);const e=[];for(const r of g(this,ai).values())e.push(r.enable());await Promise.all(e);for(const r of g(this,xn).values())r.enable()}},wre=function(){if(this.unselectAll(),g(this,id)){R(this,id,!1);for(const e of g(this,ai).values())e.disable();for(const e of g(this,xn).values())e.disable()}},h3=function(e){const r=g(this,ai).get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},xre=function(){let e=null;for(e of g(this,dr));return e},tx=function(){if(g(this,xn).size===0)return!0;if(g(this,xn).size===1)for(const e of g(this,xn).values())return e.isEmpty();return!1},d3=function(e){for(const r of g(this,dr))r.unselect();g(this,dr).clear();for(const r of e)r.isEmpty()||(g(this,dr).add(r),r.select());W(this,He,Wa).call(this,{hasSelectedEditor:this.hasSelection})},Oe(Jy,"TRANSLATE_SMALL",1),Oe(Jy,"TRANSLATE_BIG",10);let dv=Jy;var Ti,Fu,Ll,F0,Lu,Ws,L0,Bu,ys,Wc,jm,$u,cd,nu,rx,hD;const Ga=class Ga{constructor(e){$(this,nu);$(this,Ti,null);$(this,Fu,!1);$(this,Ll,null);$(this,F0,null);$(this,Lu,null);$(this,Ws,null);$(this,L0,!1);$(this,Bu,null);$(this,ys,null);$(this,Wc,null);$(this,jm,null);$(this,$u,!1);R(this,ys,e),R(this,$u,e._uiManager.useNewAltTextFlow),g(Ga,cd)||R(Ga,cd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ga._l10n??(Ga._l10n=e)}async render(){const e=R(this,Ll,document.createElement("button"));e.className="altText",e.tabIndex="0";const r=R(this,F0,document.createElement("span"));e.append(r),g(this,$u)?(e.classList.add("new"),e.setAttribute("data-l10n-id",g(Ga,cd).missing),r.setAttribute("data-l10n-id",g(Ga,cd)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=g(this,ys)._uiManager._signal;e.addEventListener("contextmenu",wl,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),g(this,ys)._uiManager.editAltText(g(this,ys)),g(this,$u)&&g(this,ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,nu,rx)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(R(this,L0,!0),i(a))},{signal:n}),await W(this,nu,hD).call(this),e}finish(){g(this,Ll)&&(g(this,Ll).focus({focusVisible:g(this,L0)}),R(this,L0,!1))}isEmpty(){return g(this,$u)?g(this,Ti)===null:!g(this,Ti)&&!g(this,Fu)}hasData(){return g(this,$u)?g(this,Ti)!==null||!!g(this,Wc):this.isEmpty()}get guessedText(){return g(this,Wc)}async setGuessedText(e){g(this,Ti)===null&&(R(this,Wc,e),R(this,jm,await Ga._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),W(this,nu,hD).call(this))}toggleAltTextBadge(e=!1){var r;if(!g(this,$u)||g(this,Ti)){(r=g(this,Bu))==null||r.remove(),R(this,Bu,null);return}if(!g(this,Bu)){const n=R(this,Bu,document.createElement("div"));n.className="noAltTextBadge",g(this,ys).div.append(n)}g(this,Bu).classList.toggle("hidden",!e)}serialize(e){let r=g(this,Ti);return!e&&g(this,Wc)===r&&(r=g(this,jm)),{altText:r,decorative:g(this,Fu),guessedText:g(this,Wc),textWithDisclaimer:g(this,jm)}}get data(){return{altText:g(this,Ti),decorative:g(this,Fu)}}set data({altText:e,decorative:r,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(R(this,Wc,n),R(this,jm,i)),!(g(this,Ti)===e&&g(this,Fu)===r)&&(a||(R(this,Ti,e),R(this,Fu,r)),W(this,nu,hD).call(this))}toggle(e=!1){g(this,Ll)&&(!e&&g(this,Ws)&&(clearTimeout(g(this,Ws)),R(this,Ws,null)),g(this,Ll).disabled=!e)}shown(){g(this,ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,nu,rx)}})}destroy(){var e,r;(e=g(this,Ll))==null||e.remove(),R(this,Ll,null),R(this,F0,null),R(this,Lu,null),(r=g(this,Bu))==null||r.remove(),R(this,Bu,null)}};Ti=new WeakMap,Fu=new WeakMap,Ll=new WeakMap,F0=new WeakMap,Lu=new WeakMap,Ws=new WeakMap,L0=new WeakMap,Bu=new WeakMap,ys=new WeakMap,Wc=new WeakMap,jm=new WeakMap,$u=new WeakMap,cd=new WeakMap,nu=new WeakSet,rx=function(){return g(this,Ti)&&"added"||g(this,Ti)===null&&this.guessedText&&"review"||"missing"},hD=async function(){var i,a,s;const e=g(this,Ll);if(!e)return;if(g(this,$u)){if(e.classList.toggle("done",!!g(this,Ti)),e.setAttribute("data-l10n-id",g(Ga,cd)[g(this,nu,rx)]),(i=g(this,F0))==null||i.setAttribute("data-l10n-id",g(Ga,cd)[`${g(this,nu,rx)}-label`]),!g(this,Ti)){(a=g(this,Lu))==null||a.remove();return}}else{if(!g(this,Ti)&&!g(this,Fu)){e.classList.remove("done"),(s=g(this,Lu))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=g(this,Lu);if(!r){R(this,Lu,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${g(this,ys).id}`;const o=100,l=g(this,ys)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(g(this,Ws)),R(this,Ws,null)},{once:!0}),e.addEventListener("mouseenter",()=>{R(this,Ws,setTimeout(()=>{R(this,Ws,null),g(this,Lu).classList.add("show"),g(this,ys)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;g(this,Ws)&&(clearTimeout(g(this,Ws)),R(this,Ws,null)),(u=g(this,Lu))==null||u.classList.remove("show")},{signal:l})}g(this,Fu)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=g(this,Ti)),r.parentNode||e.append(r);const n=g(this,ys).getElementForAltText();n==null||n.setAttribute("aria-describedby",r.id)},$(Ga,cd,null),Oe(Ga,"_l10n",null);let BN=Ga;var Xi,Qo,Vm,Vr,__,Um,Bl,zm,qm,Hm,E_,p3;class WC{constructor(e){$(this,E_);$(this,Xi,null);$(this,Qo,null);$(this,Vm,!1);$(this,Vr,null);$(this,__,null);$(this,Um,null);$(this,Bl,null);$(this,zm,null);$(this,qm,!1);$(this,Hm,null);R(this,Vr,e)}renderForToolbar(){const e=R(this,Qo,document.createElement("button"));return e.className="comment",W(this,E_,p3).call(this,e,!1)}renderForStandalone(){const e=R(this,Xi,document.createElement("button"));e.className="annotationCommentButton";const r=g(this,Vr).commentButtonPosition;if(r){const{style:n}=e;n.insetInlineEnd=`calc(${100*(g(this,Vr)._uiManager.direction==="ltr"?1-r[0]:r[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*r[1]}% - var(--comment-button-dim))`;const i=g(this,Vr).commentButtonColor;i&&(n.backgroundColor=i)}return W(this,E_,p3).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=g(this,Xi)??g(this,Qo))==null||e.focus()},0)}onUpdatedColor(){if(!g(this,Xi))return;const e=g(this,Vr).commentButtonColor;e&&(g(this,Xi).style.backgroundColor=e),g(this,Vr)._uiManager.updatePopupColor(g(this,Vr))}get commentButtonWidth(){var e;return(((e=g(this,Xi))==null?void 0:e.getBoundingClientRect().width)??0)/g(this,Vr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(g(this,Hm))return g(this,Hm);if(!g(this,Xi))return null;const{x:e,y:r,height:n}=g(this,Xi).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=g(this,Vr).parent.boundingClientRect;return[(e-i)/s,(r+n-a)/o]}set commentPopupPositionInLayer(e){R(this,Hm,e)}hasDefaultPopupPosition(){return g(this,Hm)===null}removeStandaloneCommentButton(){var e;(e=g(this,Xi))==null||e.remove(),R(this,Xi,null)}removeToolbarCommentButton(){var e;(e=g(this,Qo))==null||e.remove(),R(this,Qo,null)}setCommentButtonStates({selected:e,hasPopup:r}){g(this,Xi)&&(g(this,Xi).classList.toggle("selected",e),g(this,Xi).ariaExpanded=r)}edit(e){const r=this.commentPopupPositionInLayer;let n,i;if(r)[n,i]=r;else{[n,i]=g(this,Vr).commentButtonPosition;const{width:c,height:f,x:h,y:d}=g(this,Vr);n=h+n*c,i=d+i*f}const a=g(this,Vr).parent.boundingClientRect,{x:s,y:o,width:l,height:u}=a;g(this,Vr)._uiManager.editComment(g(this,Vr),s+n*l,o+i*u,{...e,parentDimensions:a})}finish(){g(this,Qo)&&(g(this,Qo).focus({focusVisible:g(this,Vm)}),R(this,Vm,!1))}isDeleted(){return g(this,qm)||g(this,Bl)===""}isEmpty(){return g(this,Bl)===null}hasBeenEdited(){return this.isDeleted()||g(this,Bl)!==g(this,__)}serialize(){return this.data}get data(){return{text:g(this,Bl),richText:g(this,Um),date:g(this,zm),deleted:this.isDeleted()}}set data(e){if(e!==g(this,Bl)&&R(this,Um,null),e===null){R(this,Bl,""),R(this,qm,!0);return}R(this,Bl,e),R(this,zm,new Date),R(this,qm,!1)}setInitialText(e,r=null){R(this,__,e),this.data=e,R(this,zm,null),R(this,Um,r)}shown(){}destroy(){var e,r;(e=g(this,Qo))==null||e.remove(),R(this,Qo,null),(r=g(this,Xi))==null||r.remove(),R(this,Xi,null),R(this,Bl,""),R(this,Um,null),R(this,zm,null),R(this,Vr,null),R(this,Vm,!1),R(this,qm,!1)}}Xi=new WeakMap,Qo=new WeakMap,Vm=new WeakMap,Vr=new WeakMap,__=new WeakMap,Um=new WeakMap,Bl=new WeakMap,zm=new WeakMap,qm=new WeakMap,Hm=new WeakMap,E_=new WeakSet,p3=function(e,r){if(!g(this,Vr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",r?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[g(this,Vr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=g(this,Vr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",wl,{signal:n}),r&&(e.addEventListener("focusin",a=>{g(this,Vr)._focusEventsAllowed=!1,Dn(a)},{capture:!0,signal:n}),e.addEventListener("focusout",a=>{g(this,Vr)._focusEventsAllowed=!0,Dn(a)},{capture:!0,signal:n})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),e===g(this,Qo)?this.edit():g(this,Vr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(R(this,Vm,!0),i(a))},{signal:n}),e.addEventListener("pointerenter",()=>{g(this,Vr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{g(this,Vr).toggleComment(!1,!1)},{signal:n}),e};var B0,Wm,S_,C_,T_,D_,N_,Gc,Gm,Kc,Km,Xc,Dp,Are,_re,Ere;const KV=class KV{constructor({container:e,isPinchingDisabled:r=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){$(this,Dp);$(this,B0);$(this,Wm,!1);$(this,S_,null);$(this,C_);$(this,T_);$(this,D_);$(this,N_);$(this,Gc,null);$(this,Gm);$(this,Kc,null);$(this,Km);$(this,Xc,null);R(this,B0,e),R(this,S_,n),R(this,C_,r),R(this,T_,i),R(this,D_,a),R(this,N_,s),R(this,Km,new AbortController),R(this,Gm,AbortSignal.any([o,g(this,Km).signal])),e.addEventListener("touchstart",W(this,Dp,Are).bind(this),{passive:!1,signal:g(this,Gm)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vc.pixelRatio}destroy(){var e,r;(e=g(this,Km))==null||e.abort(),R(this,Km,null),(r=g(this,Gc))==null||r.abort(),R(this,Gc,null)}};B0=new WeakMap,Wm=new WeakMap,S_=new WeakMap,C_=new WeakMap,T_=new WeakMap,D_=new WeakMap,N_=new WeakMap,Gc=new WeakMap,Gm=new WeakMap,Kc=new WeakMap,Km=new WeakMap,Xc=new WeakMap,Dp=new WeakSet,Are=function(e){var i,a,s;if((i=g(this,C_))!=null&&i.call(this))return;if(e.touches.length===1){if(g(this,Gc))return;const o=R(this,Gc,new AbortController),l=AbortSignal.any([g(this,Gm),o.signal]),u=g(this,B0),c={capture:!0,signal:l,passive:!1},f=h=>{var d;h.pointerType==="touch"&&((d=g(this,Gc))==null||d.abort(),R(this,Gc,null))};u.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Dn(h),f(h))},c),u.addEventListener("pointerup",f,c),u.addEventListener("pointercancel",f,c);return}if(!g(this,Xc)){R(this,Xc,new AbortController);const o=AbortSignal.any([g(this,Gm),g(this,Xc).signal]),l=g(this,B0),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",W(this,Dp,_re).bind(this),u);const c=W(this,Dp,Ere).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",Dn,u),l.addEventListener("pointermove",Dn,u),l.addEventListener("pointercancel",Dn,u),l.addEventListener("pointerup",Dn,u),(a=g(this,T_))==null||a.call(this)}if(Dn(e),e.touches.length!==2||(s=g(this,S_))!=null&&s.call(this)){R(this,Kc,null);return}let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]),R(this,Kc,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:n.screenX,touch1Y:n.screenY})},_re=function(e){var A;if(!g(this,Kc)||e.touches.length!==2)return;Dn(e);let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]);const{screenX:i,screenY:a}=r,{screenX:s,screenY:o}=n,l=g(this,Kc),{touch0X:u,touch0Y:c,touch1X:f,touch1Y:h}=l,d=f-u,p=h-c,m=s-i,v=o-a,y=Math.hypot(m,v)||1,w=Math.hypot(d,p)||1;if(!g(this,Wm)&&Math.abs(w-y)<=KV.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=a,l.touch1X=s,l.touch1Y=o,!g(this,Wm)){R(this,Wm,!0);return}const b=[(i+s)/2,(a+o)/2];(A=g(this,D_))==null||A.call(this,b,w,y)},Ere=function(e){var r;e.touches.length>=2||(g(this,Xc)&&(g(this,Xc).abort(),R(this,Xc,null),(r=g(this,N_))==null||r.call(this)),g(this,Kc)&&(Dn(e),R(this,Kc,null),R(this,Wm,!1)))};let $N=KV;var Xm,$l,tn,Or,Yc,$0,fd,P_,Yi,Ym,Qc,Zo,hd,M_,Qm,Gs,I_,Zm,Zc,ju,j0,V0,Jo,Jm,O_,$P,mt,m3,k_,g3,dD,Sre,Cre,v3,pD,y3,Tre,Dre,Nre,b3,Pre,w3,Mre,Ire,Ore,x3,nx;const It=class It{constructor(e){$(this,mt);$(this,Xm,null);$(this,$l,null);$(this,tn,null);$(this,Or,null);$(this,Yc,null);$(this,$0,!1);$(this,fd,null);$(this,P_,"");$(this,Yi,null);$(this,Ym,null);$(this,Qc,null);$(this,Zo,null);$(this,hd,null);$(this,M_,"");$(this,Qm,!1);$(this,Gs,null);$(this,I_,!1);$(this,Zm,!1);$(this,Zc,!1);$(this,ju,null);$(this,j0,0);$(this,V0,0);$(this,Jo,null);$(this,Jm,null);Oe(this,"isSelected",!1);Oe(this,"_isCopy",!1);Oe(this,"_editToolbar",null);Oe(this,"_initialOptions",Object.create(null));Oe(this,"_initialData",null);Oe(this,"_isVisible",!0);Oe(this,"_uiManager",null);Oe(this,"_focusEventsAllowed",!0);$(this,O_,!1);$(this,$P,It._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:r,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,s];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=It.prototype._resizeWithKeyboard,r=dv.TRANSLATE_SMALL,n=dv.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new cS([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-r,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[r,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-r]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,r]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],It.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const r=new MAe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});r.annotationElementId=e.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(e,r){if(It._l10n??(It._l10n=e),It._l10nResizer||(It._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),It._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,r){Lr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,O_)}set _isDraggable(e){var r;R(this,O_,e),(r=this.div)==null||r.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(e*2),this.y+=this.width*e/(r*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(e*2),this.y-=this.width*e/(r*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,$P)}setParent(e){var r;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(W(this,mt,nx).call(this),(r=g(this,Zo))==null||r.remove(),R(this,Zo,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(g(this,Qm)?R(this,Qm,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const r=e.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,r,n,i){const[a,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(r+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,r){const[n,i]=this.parentDimensions;this.setAt(e*n,r*i,this.width*n,this.height*i),this._onTranslated()}translate(e,r){W(this,mt,m3).call(this,this.parentDimensions,e,r)}translateInPage(e,r){g(this,Gs)||R(this,Gs,[this.x,this.y,this.width,this.height]),W(this,mt,m3).call(this,this.pageDimensions,e,r),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,r){g(this,Gs)||R(this,Gs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=r/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[l,u]=this.getBaseTranslation();s+=l,o+=u;const{style:c}=n;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,r){}_onTranslated(e,r){}get _hasBeenMoved(){return!!g(this,Gs)&&(g(this,Gs)[0]!==this.x||g(this,Gs)[1]!==this.y)}get _hasBeenResized(){return!!g(this,Gs)&&(g(this,Gs)[2]!==this.width||g(this,Gs)[3]!==this.height)}getBaseTranslation(){const[e,r]=this.parentDimensions,{_borderLineWidth:n}=It,i=n/e,a=n/r;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:r},pageDimensions:[n,i]}=this;let{x:a,y:s,width:o,height:l}=this;if(o*=n,l*=i,a*=n,s*=i,this._mustFixPosition)switch(e){case 0:a=Za(a,0,n-o),s=Za(s,0,i-l);break;case 90:a=Za(a,0,n-l),s=Za(s,o,i);break;case 180:a=Za(a,o,n),s=Za(s,l,i);break;case 270:a=Za(a,l,n),s=Za(s,0,i-o);break}this.x=a/=n,this.y=s/=i;const[u,c]=this.getBaseTranslation();a+=u,s+=c,r.left=`${(100*a).toFixed(2)}%`,r.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,r){var n;return W(n=It,k_,g3).call(n,e,r,this.parentRotation)}pageTranslationToScreen(e,r){var n;return W(n=It,k_,g3).call(n,e,r,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[r,n]}=this;return[r*e,n*e]}setDims(){const{div:{style:e},width:r,height:n}=this;e.width=`${(100*r).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=g(this,tn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||g(this,Zm))return this._editToolbar;this._editToolbar=new s3(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[r,n]of e)await this._editToolbar.addButton(r,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,r;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(r=g(this,tn))==null||r.destroy()}addContainer(e){var n;const r=(n=this._editToolbar)==null?void 0:n.div;r?r.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return g(this,tn)||(BN.initialize(It._l10n),R(this,tn,new BN(this)),g(this,Xm)&&(g(this,tn).data=g(this,Xm),R(this,Xm,null))),g(this,tn)}get altTextData(){var e;return(e=g(this,tn))==null?void 0:e.data}set altTextData(e){g(this,tn)&&(g(this,tn).data=e)}get guessedAltText(){var e;return(e=g(this,tn))==null?void 0:e.guessedText}async setGuessedAltText(e){var r;await((r=g(this,tn))==null?void 0:r.setGuessedText(e))}serializeAltText(e){var r;return(r=g(this,tn))==null?void 0:r.serialize(e)}hasAltText(){return!!g(this,tn)&&!g(this,tn).isEmpty()}hasAltTextData(){var e;return((e=g(this,tn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=g(this,Or))==null||e.focusButton()}addCommentButton(){return this.canAddComment?g(this,Or)||R(this,Or,new WC(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(g(this,Yc)){this._uiManager.isEditingMode()&&g(this,Yc).classList.remove("hidden");return}this.hasComment&&(R(this,Yc,g(this,Or).renderForStandalone()),this.div.append(g(this,Yc)))}}removeStandaloneCommentButton(){g(this,Or).removeStandaloneCommentButton(),R(this,Yc,null)}hideStandaloneCommentButton(){var e;(e=g(this,Yc))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:r,date:n,deleted:i}}=g(this,Or);return{text:r,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){g(this,Or)||R(this,Or,new WC(this)),g(this,Or).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:r,richText:n}){if(!r||(g(this,Or)||R(this,Or,new WC(this)),g(this,Or).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=g(this,Or))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=g(this,Or))==null?void 0:e.isDeleted()}get hasComment(){return!!g(this,Or)&&!g(this,Or).isEmpty()&&!g(this,Or).isDeleted()}async editComment(e){g(this,Or)||R(this,Or,new WC(this)),g(this,Or).edit(e)}toggleComment(e,r=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,r)}setSelectedCommentButton(e){g(this,Or).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:r}}){g(this,Or).data=r?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=g(this,$0)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),W(this,mt,w3).call(this);const[r,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/r).toFixed(2)}%`,e.style.maxHeight=`${(100*r/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),lre(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(g(this,Jm)||R(this,Jm,new $N({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:W(this,mt,Tre).bind(this),onPinching:W(this,mt,Dre).bind(this),onPinchEnd:W(this,mt,Nre).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r){e.preventDefault();return}if(R(this,Qm,!0),this._isDraggable){W(this,mt,Pre).call(this,e);return}W(this,mt,b3).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){g(this,ju)&&clearTimeout(g(this,ju)),R(this,ju,setTimeout(()=>{var e;R(this,ju,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,r,n){e.changeParent(this),this.x=r,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,r,n=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=r/i,f=this.x*a,h=this.y*s,d=this.width*a,p=this.height*s;switch(n){case 0:return[f+u+o,s-h-c-p+l,f+u+d+o,s-h-c+l];case 90:return[f+c+o,s-h+u+l,f+c+p+o,s-h+u+d+l];case 180:return[f-u-d+o,s-h+c+l,f-u+o,s-h+c+p+l];case 270:return[f-c-p+o,s-h-u-d+l,f-c+o,s-h-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,r){const[n,i,a,s]=e,o=a-n,l=s-i;switch(this.rotation){case 0:return[n,r-s,o,l];case 90:return[n,r-i,l,o];case 180:return[a,r-i,o,l];case 270:return[a,r-s,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&It._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=g(this,Or))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:r,date:n,opacity:i,deleted:a,richText:s},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:u,modificationDate:n||c,popupRef:!a,color:r,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),R(this,Zm,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),R(this,Zm,!1),!0):!1}isInEditMode(){return g(this,Zm)}shouldGetKeyboardEvents(){return g(this,Zc)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:r,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return r<s&&i>0&&e<a&&n>0}rebuild(){W(this,mt,w3).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,r=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,r,n){const i=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,R(i,Xm,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=l/s,i.width=u/a,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,r,n;if((e=g(this,hd))==null||e.abort(),R(this,hd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),g(this,ju)&&(clearTimeout(g(this,ju)),R(this,ju,null)),W(this,mt,nx).call(this),this.removeEditToolbar(),g(this,Jo)){for(const i of g(this,Jo).values())clearTimeout(i);R(this,Jo,null)}this.parent=null,(r=g(this,Jm))==null||r.destroy(),R(this,Jm,null),(n=g(this,Zo))==null||n.remove(),R(this,Zo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(W(this,mt,Sre).call(this),g(this,Yi).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,r]}=this,[n,i,a,s]=this.getPDFRect();return[It._round(n+(a-n)*e),It._round(i+(s-i)*(1-r))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return g(this,Or).commentPopupPositionInLayer}set commentPopupPosition(e){g(this,Or).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return g(this,Or).hasDefaultPopupPosition()}get commentButtonWidth(){return g(this,Or).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var r;(r=g(this,Or))==null||r.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const r=g(this,Yi).children;if(!g(this,$l)){R(this,$l,Array.from(r));const s=W(this,mt,Mre).bind(this),o=W(this,mt,Ire).bind(this),l=this._uiManager._signal;for(const u of g(this,$l)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",W(this,mt,Ore).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",It._l10nResizer[c])}}const n=g(this,$l)[0];let i=0;for(const s of r){if(s===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(g(this,$l).length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)g(this,Yi).append(g(this,Yi).firstElementChild);else if(a>i)for(let o=0;o<a-i;o++)g(this,Yi).firstElementChild.before(g(this,Yi).lastElementChild);let s=0;for(const o of r){const u=g(this,$l)[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",It._l10nResizer[u])}}W(this,mt,x3).call(this,0),R(this,Zc,!0),g(this,Yi).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,r){g(this,Zc)&&W(this,mt,y3).call(this,g(this,M_),{deltaX:e,deltaY:r,fromKeyboard:!0})}_stopResizingWithKeyboard(){W(this,mt,nx).call(this),this.div.focus()}select(){var e,r,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(r=this._editToolbar)==null||r.show(),(n=g(this,tn))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,r,n,i,a;this.isSelected&&(this.isSelected=!1,(e=g(this,Yi))==null||e.classList.add("hidden"),(r=this.div)==null||r.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=g(this,tn))==null||a.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,r){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return g(this,I_)}set isEditing(e){R(this,I_,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,r=!1){if(r){g(this,Jo)||R(this,Jo,new Map);const{action:n}=e;let i=g(this,Jo).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),g(this,Jo).delete(n),g(this,Jo).size===0&&R(this,Jo,null)},It._telemetryTimeout),g(this,Jo).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),R(this,$0,!1)}disable(){this.div&&(this.div.tabIndex=-1),R(this,$0,!0)}updateFakeAnnotationElement(e){if(!g(this,Zo)&&!this.deleted){R(this,Zo,e.addFakeAnnotation(this));return}if(this.deleted){g(this,Zo).remove(),R(this,Zo,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&g(this,Zo).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let r=e.container.querySelector(".annotationContent");if(!r)r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),e.container.prepend(r);else if(r.nodeName==="CANVAS"){const n=r;r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),n.before(r)}return r}resetAnnotationElement(e){const{firstElementChild:r}=e.container;(r==null?void 0:r.nodeName)==="DIV"&&r.classList.contains("annotationContent")&&r.remove()}};Xm=new WeakMap,$l=new WeakMap,tn=new WeakMap,Or=new WeakMap,Yc=new WeakMap,$0=new WeakMap,fd=new WeakMap,P_=new WeakMap,Yi=new WeakMap,Ym=new WeakMap,Qc=new WeakMap,Zo=new WeakMap,hd=new WeakMap,M_=new WeakMap,Qm=new WeakMap,Gs=new WeakMap,I_=new WeakMap,Zm=new WeakMap,Zc=new WeakMap,ju=new WeakMap,j0=new WeakMap,V0=new WeakMap,Jo=new WeakMap,Jm=new WeakMap,O_=new WeakMap,$P=new WeakMap,mt=new WeakSet,m3=function([e,r],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},k_=new WeakSet,g3=function(e,r,n){switch(n){case 90:return[r,-e];case 180:return[-e,-r];case 270:return[-r,e];default:return[e,r]}},dD=function(e){switch(e){case 90:{const[r,n]=this.pageDimensions;return[0,-r/n,n/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,n]=this.pageDimensions;return[0,r/n,-n/r,0]}default:return[1,0,0,1]}},Sre=function(){if(g(this,Yi))return;R(this,Yi,document.createElement("div")),g(this,Yi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(const n of e){const i=document.createElement("div");g(this,Yi).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",W(this,mt,Cre).bind(this,n),{signal:r}),i.addEventListener("contextmenu",wl,{signal:r}),i.tabIndex=-1}this.div.prepend(g(this,Yi))},Cre=function(e,r){var c;r.preventDefault();const{isMac:n}=da.platform;if(r.button!==0||r.ctrlKey&&n)return;(c=g(this,tn))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,R(this,Ym,[r.screenX,r.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",W(this,mt,y3).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Dn,{passive:!1,signal:s}),window.addEventListener("contextmenu",wl,{signal:s}),R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const u=()=>{var f;a.abort(),this.parent.togglePointerEvents(!0),(f=g(this,tn))==null||f.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,W(this,mt,pD).call(this)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},v3=function(e,r,n,i){this.width=n,this.height=i,this.x=e,this.y=r,this.setDims(),this.fixAndSetPosition(),this._onResized()},pD=function(){if(!g(this,Qc))return;const{savedX:e,savedY:r,savedWidth:n,savedHeight:i}=g(this,Qc);R(this,Qc,null);const a=this.x,s=this.y,o=this.width,l=this.height;a===e&&s===r&&o===n&&l===i||this.addCommands({cmd:W(this,mt,v3).bind(this,a,s,o,l),undo:W(this,mt,v3).bind(this,e,r,n,i),mustExec:!0})},y3=function(e,r){const[n,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,u=It.MIN_SIZE/n,c=It.MIN_SIZE/i,f=W(this,mt,dD).call(this,this.rotation),h=(k,V)=>[f[0]*k+f[2]*V,f[1]*k+f[3]*V],d=W(this,mt,dD).call(this,360-this.rotation),p=(k,V)=>[d[0]*k+d[2]*V,d[1]*k+d[3]*V];let m,v,y=!1,w=!1;switch(e){case"topLeft":y=!0,m=(k,V)=>[0,0],v=(k,V)=>[k,V];break;case"topMiddle":m=(k,V)=>[k/2,0],v=(k,V)=>[k/2,V];break;case"topRight":y=!0,m=(k,V)=>[k,0],v=(k,V)=>[0,V];break;case"middleRight":w=!0,m=(k,V)=>[k,V/2],v=(k,V)=>[0,V/2];break;case"bottomRight":y=!0,m=(k,V)=>[k,V],v=(k,V)=>[0,0];break;case"bottomMiddle":m=(k,V)=>[k/2,V],v=(k,V)=>[k/2,0];break;case"bottomLeft":y=!0,m=(k,V)=>[0,V],v=(k,V)=>[k,0];break;case"middleLeft":w=!0,m=(k,V)=>[0,V/2],v=(k,V)=>[k,V/2];break}const b=m(o,l),A=v(o,l);let x=h(...A);const _=It._round(a+x[0]),S=It._round(s+x[1]);let E=1,T=1,D,N;if(r.fromKeyboard)({deltaX:D,deltaY:N}=r);else{const{screenX:k,screenY:V}=r,[q,H]=g(this,Ym);[D,N]=this.screenToPageTranslation(k-q,V-H),g(this,Ym)[0]=k,g(this,Ym)[1]=V}if([D,N]=p(D/n,N/i),y){const k=Math.hypot(o,l);E=T=Math.max(Math.min(Math.hypot(A[0]-b[0]-D,A[1]-b[1]-N)/k,1/o,1/l),u/o,c/l)}else w?E=Za(Math.abs(A[0]-b[0]-D),u,1)/o:T=Za(Math.abs(A[1]-b[1]-N),c,1)/l;const P=It._round(o*E),M=It._round(l*T);x=h(...v(P,M));const j=_-x[0],K=S-x[1];g(this,Gs)||R(this,Gs,[this.x,this.y,this.width,this.height]),this.width=P,this.height=M,this.x=j,this.y=K,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Tre=function(){var e;R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=g(this,tn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Dre=function(e,r,n){let a=.7*(n/r)+1-.7;if(a===1)return;const s=W(this,mt,dD).call(this,this.rotation),o=(_,S)=>[s[0]*_+s[2]*S,s[1]*_+s[3]*S],[l,u]=this.parentDimensions,c=this.x,f=this.y,h=this.width,d=this.height,p=It.MIN_SIZE/l,m=It.MIN_SIZE/u;a=Math.max(Math.min(a,1/h,1/d),p/h,m/d);const v=It._round(h*a),y=It._round(d*a);if(v===h&&y===d)return;g(this,Gs)||R(this,Gs,[c,f,h,d]);const w=o(h/2,d/2),b=It._round(c+w[0]),A=It._round(f+w[1]),x=o(v/2,y/2);this.x=b-x[0],this.y=A-x[1],this.width=v,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Nre=function(){var e;(e=g(this,tn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),W(this,mt,pD).call(this)},b3=function(e){const{isMac:r}=da.platform;e.ctrlKey&&!r||e.shiftKey||e.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)},Pre=function(e){const{isSelected:r}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=u=>{i.abort(),R(this,fd,null),R(this,Qm,!1),this._uiManager.endDragSession()||W(this,mt,b3).call(this,u),n&&this._onStopDragging()};r&&(R(this,j0,e.clientX),R(this,V0,e.clientY),R(this,fd,e.pointerId),R(this,P_,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:f,pointerId:h}=u;if(h!==g(this,fd)){Dn(u);return}const[d,p]=this.screenToPageTranslation(c-g(this,j0),f-g(this,V0));R(this,j0,c),R(this,V0,f),this._uiManager.dragSelectedEditors(d,p)},s),window.addEventListener("touchmove",Dn,s),window.addEventListener("pointerdown",u=>{u.pointerType===g(this,P_)&&(g(this,Jm)||u.isPrimary)&&o(u),Dn(u)},s));const l=u=>{if(!g(this,fd)||g(this,fd)===u.pointerId){o(u);return}Dn(u)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})},w3=function(){if(g(this,hd)||!this.div)return;R(this,hd,new AbortController);const e=this._uiManager.combinedSignal(g(this,hd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Mre=function(e){It._resizerKeyboardManager.exec(this,e)},Ire=function(e){var r;g(this,Zc)&&((r=e.relatedTarget)==null?void 0:r.parentNode)!==g(this,Yi)&&W(this,mt,nx).call(this)},Ore=function(e){R(this,M_,g(this,Zc)?e:"")},x3=function(e){if(g(this,$l))for(const r of g(this,$l))r.tabIndex=e},nx=function(){R(this,Zc,!1),W(this,mt,x3).call(this,-1),W(this,mt,pD).call(this)},$(It,k_),Oe(It,"_l10n",null),Oe(It,"_l10nResizer",null),Oe(It,"_borderLineWidth",-1),Oe(It,"_colorManager",new u3),Oe(It,"_zIndex",1),Oe(It,"_telemetryTimeout",1e3);let Hr=It;class MAe extends Hr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const h9=3285377520,Ro=4294901760,Tu=65535;class kre{constructor(e){this.h1=e?e&4294967295:h9,this.h2=e?e&4294967295:h9}update(e){let r,n;if(typeof e=="string"){r=new Uint8Array(e.length*2),n=0;for(let m=0,v=e.length;m<v;m++){const y=e.charCodeAt(m);y<=255?r[n++]=y:(r[n++]=y>>>8,r[n++]=y&255)}}else if(ArrayBuffer.isView(e))r=e.slice(),n=r.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,s=new Uint32Array(r.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const f=3432918353,h=461845907,d=f&Tu,p=h&Tu;for(let m=0;m<i;m++)m&1?(o=s[m],o=o*f&Ro|o*d&Tu,o=o<<15|o>>>17,o=o*h&Ro|o*p&Tu,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=s[m],l=l*f&Ro|l*d&Tu,l=l<<15|l>>>17,l=l*h&Ro|l*p&Tu,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,a){case 3:o^=r[i*4+2]<<16;case 2:o^=r[i*4+1]<<8;case 1:o^=r[i*4],o=o*f&Ro|o*d&Tu,o=o<<15|o>>>17,o=o*h&Ro|o*p&Tu,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,r=this.h2;return e^=r>>>1,e=e*3981806797&Ro|e*36045&Tu,r=r*4283543511&Ro|((r<<16|e>>>16)*2950163797&Ro)>>>16,e^=r>>>1,e=e*444984403&Ro|e*60499&Tu,r=r*3301882366&Ro|((r<<16|e>>>16)*3120437893&Ro)>>>16,e^=r>>>1,(e>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}const A3=Object.freeze({map:null,hash:"",transfer:void 0});var eg,tg,Jc,Qi,jP,Rre;class i5{constructor(){$(this,jP);$(this,eg,!1);$(this,tg,null);$(this,Jc,null);$(this,Qi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,r){const n=g(this,Qi).get(e);return n===void 0?r:Object.assign(r,n)}getRawValue(e){return g(this,Qi).get(e)}remove(e){const r=g(this,Qi).get(e);if(r!==void 0&&(r instanceof Hr&&g(this,Jc).delete(r.annotationElementId),g(this,Qi).delete(e),g(this,Qi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of g(this,Qi).values())if(n instanceof Hr)return;this.onAnnotationEditor(null)}}setValue(e,r){const n=g(this,Qi).get(e);let i=!1;if(n!==void 0)for(const[a,s]of Object.entries(r))n[a]!==s&&(i=!0,n[a]=s);else i=!0,g(this,Qi).set(e,r);i&&W(this,jP,Rre).call(this),r instanceof Hr&&((g(this,Jc)||R(this,Jc,new Map)).set(r.annotationElementId,r),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type))}has(e){return g(this,Qi).has(e)}get size(){return g(this,Qi).size}resetModified(){g(this,eg)&&(R(this,eg,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Fre(this)}get serializable(){if(g(this,Qi).size===0)return A3;const e=new Map,r=new kre,n=[],i=Object.create(null);let a=!1;for(const[s,o]of g(this,Qi)){const l=o instanceof Hr?o.serialize(!1,i):o;l&&(e.set(s,l),r.update(`${s}:${JSON.stringify(l)}`),a||(a=!!l.bitmap))}if(a)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:r.hexdigest(),transfer:n}:A3}get editorStats(){let e=null;const r=new Map;let n=0,i=0;for(const a of g(this,Qi).values()){if(!(a instanceof Hr)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:o}=s;r.has(o)||r.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(s)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const h=f.get(c)??0;f.set(c,h+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,s]of r)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){R(this,tg,null)}updateEditor(e,r){var i;const n=(i=g(this,Jc))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(r),!0):!1}getEditor(e){var r;return((r=g(this,Jc))==null?void 0:r.get(e))||null}get modifiedIds(){if(g(this,tg))return g(this,tg);const e=[];if(g(this,Jc))for(const r of g(this,Jc).values())r.serialize()&&e.push(r.annotationElementId);return R(this,tg,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return g(this,Qi).entries()}}eg=new WeakMap,tg=new WeakMap,Jc=new WeakMap,Qi=new WeakMap,jP=new WeakSet,Rre=function(){g(this,eg)||(R(this,eg,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var R_;class Fre extends i5{constructor(r){super();$(this,R_);const{map:n,hash:i,transfer:a}=r.serializable,s=structuredClone(n,a?{transfer:a}:null);R(this,R_,{map:s,hash:i,transfer:a})}get print(){Lr("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,R_)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}R_=new WeakMap;var U0;class IAe{constructor({ownerDocument:e=globalThis.document,styleElement:r=null}){$(this,U0,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),g(this,U0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:r,_inspectFont:n}){if(!(!e||g(this,U0).has(e.loadedName))){if(Jt(!r,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),g(this,U0).add(i),n==null||n(e)}catch{Tt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Lr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Tt(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const r=e.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var r;const e=!!((r=this._document)!=null&&r.fonts);return Dt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",Qa||da.platform.isFirefox)}_queueLoadingCallback(e){function r(){for(Jt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:r,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,r){function n(A,x){return A.charCodeAt(x)<<24|A.charCodeAt(x+1)<<16|A.charCodeAt(x+2)<<8|A.charCodeAt(x+3)&255}function i(A,x,_,S){const E=A.substring(0,x),T=A.substring(x+_);return E+S+T}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(A,x){if(++u>30){Tt("Load test font never loaded."),x();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(c.bind(null,A,x))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,f.length,f);const p=16,m=1482184792;let v=n(h,p);for(a=0,s=f.length-3;a<s;a+=4)v=v-m+n(f,a)|0;a<f.length&&(v=v-m+n(f+"XXX",a)|0),h=i(h,p,4,hAe(v));const y=`url(data:font/opentype;base64,${btoa(h)});`,w=`@font-face {font-family:"${f}";src:${y}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const A of[e.loadedName,f]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=A,b.append(x)}this._document.body.append(b),c(f,()=>{b.remove(),r.complete()})}}U0=new WeakMap;var Sr;class OAe{constructor(e,r=null,n,i){$(this,Sr);this.compiledGlyphs=Object.create(null),R(this,Sr,e),this._inspectFont=r,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var r;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(r=this._inspectFont)==null||r.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Jte(this.data)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),r}getPathGenerator(e,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];const n=this.loadedName+"_path_"+r;let i;try{i=e.get(n)}catch(s){Tt(`getPathGenerator - ignoring character: "${s}".`)}const a=rre(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[r]=a}get black(){return g(this,Sr).black}get bold(){return g(this,Sr).bold}get disableFontFace(){return g(this,Sr).disableFontFace??!1}set disableFontFace(e){Dt(this,"disableFontFace",!!e)}get fontExtraProperties(){return g(this,Sr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return g(this,Sr).isInvalidPDFjsFont}get isType3Font(){return g(this,Sr).isType3Font}get italic(){return g(this,Sr).italic}get missingFile(){return g(this,Sr).missingFile}get remeasure(){return g(this,Sr).remeasure}get vertical(){return g(this,Sr).vertical}get ascent(){return g(this,Sr).ascent}get defaultWidth(){return g(this,Sr).defaultWidth}get descent(){return g(this,Sr).descent}get bbox(){return g(this,Sr).bbox}set bbox(e){Dt(this,"bbox",e)}get fontMatrix(){return g(this,Sr).fontMatrix}get fallbackName(){return g(this,Sr).fallbackName}get loadedName(){return g(this,Sr).loadedName}get mimetype(){return g(this,Sr).mimetype}get name(){return g(this,Sr).name}get data(){return g(this,Sr).data}clearData(){g(this,Sr).clearData()}get cssFontInfo(){return g(this,Sr).cssFontInfo}get systemFontInfo(){return g(this,Sr).systemFontInfo}get defaultVMetrics(){return g(this,Sr).defaultVMetrics}}Sr=new WeakMap;var z0,q0,F_,H0,mD;const e0=class e0{constructor(e){$(this,H0);$(this,z0);$(this,q0);$(this,F_);R(this,z0,e),R(this,q0,new DataView(g(this,z0))),R(this,F_,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const u of e0.strings){const c=r.encode(e[u]);n[u]=c,i+=4+c.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),o=new DataView(a);let l=0;for(const u of e0.strings){const c=n[u],f=c.length;o.setUint32(l,f),s.set(c,l+4),l+=4+f}return Jt(l===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return W(this,H0,mD).call(this,0)}get fontWeight(){return W(this,H0,mD).call(this,1)}get italicAngle(){return W(this,H0,mD).call(this,2)}};z0=new WeakMap,q0=new WeakMap,F_=new WeakMap,H0=new WeakSet,mD=function(e){Jt(e<e0.strings.length,"Invalid string index");let r=0;for(let i=0;i<e;i++)r+=g(this,q0).getUint32(r)+4;const n=g(this,q0).getUint32(r);return g(this,F_).decode(new Uint8Array(g(this,z0),r+4,n))},Oe(e0,"strings",["fontFamily","fontWeight","italicAngle"]);let jN=e0;var dd,Vu,rg,ng,ix;const t0=class t0{constructor(e){$(this,ng);$(this,dd);$(this,Vu);$(this,rg);R(this,dd,e),R(this,Vu,new DataView(g(this,dd))),R(this,rg,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const h of t0.strings){const d=r.encode(e[h]);n[h]=d,i+=4+d.length}i+=4;let a,s,o=1+i;e.style&&(a=r.encode(e.style.style),s=r.encode(e.style.weight),o+=4+a.length+4+s.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let f=0;c.setUint8(f++,e.guessFallback?1:0),c.setUint32(f,0),f+=4,i=0;for(const h of t0.strings){const d=n[h],p=d.length;i+=4+p,c.setUint32(f,p),u.set(d,f+4),f+=4+p}return c.setUint32(f-i-4,i),e.style&&(c.setUint32(f,a.length),u.set(a,f+4),f+=4+a.length,c.setUint32(f,s.length),u.set(s,f+4),f+=4+s.length),Jt(f<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(f)}get guessFallback(){return g(this,Vu).getUint8(0)!==0}get css(){return W(this,ng,ix).call(this,0)}get loadedName(){return W(this,ng,ix).call(this,1)}get baseFontName(){return W(this,ng,ix).call(this,2)}get src(){return W(this,ng,ix).call(this,3)}get style(){let e=1;e+=4+g(this,Vu).getUint32(e);const r=g(this,Vu).getUint32(e),n=g(this,rg).decode(new Uint8Array(g(this,dd),e+4,r));e+=4+r;const i=g(this,Vu).getUint32(e),a=g(this,rg).decode(new Uint8Array(g(this,dd),e+4,i));return{style:n,weight:a}}};dd=new WeakMap,Vu=new WeakMap,rg=new WeakMap,ng=new WeakSet,ix=function(e){Jt(e<t0.strings.length,"Invalid string index");let r=5;for(let i=0;i<e;i++)r+=g(this,Vu).getUint32(r)+4;const n=g(this,Vu).getUint32(r);return g(this,rg).decode(new Uint8Array(g(this,dd),r+4,n))},Oe(t0,"strings",["css","loadedName","baseFontName","src"]);let VN=t0;var W0,G0,K0,X0,Ks,Uu,L_,Cr,Cn,Ol,gD,ax;const Rt=class Rt{constructor({data:e,extra:r}){$(this,Cn);$(this,Uu);$(this,L_);$(this,Cr);R(this,Uu,e),R(this,L_,new TextDecoder),R(this,Cr,new DataView(g(this,Uu))),r&&Object.assign(this,r)}get black(){return W(this,Cn,Ol).call(this,0)}get bold(){return W(this,Cn,Ol).call(this,1)}get disableFontFace(){return W(this,Cn,Ol).call(this,2)}get fontExtraProperties(){return W(this,Cn,Ol).call(this,3)}get isInvalidPDFjsFont(){return W(this,Cn,Ol).call(this,4)}get isType3Font(){return W(this,Cn,Ol).call(this,5)}get italic(){return W(this,Cn,Ol).call(this,6)}get missingFile(){return W(this,Cn,Ol).call(this,7)}get remeasure(){return W(this,Cn,Ol).call(this,8)}get vertical(){return W(this,Cn,Ol).call(this,9)}get ascent(){return W(this,Cn,gD).call(this,0)}get defaultWidth(){return W(this,Cn,gD).call(this,1)}get descent(){return W(this,Cn,gD).call(this,2)}get bbox(){let e=g(Rt,G0);if(g(this,Cr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(g(this,Cr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=g(Rt,K0);if(g(this,Cr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(g(this,Cr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=g(Rt,X0);if(g(this,Cr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(g(this,Cr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return W(this,Cn,ax).call(this,0)}get loadedName(){return W(this,Cn,ax).call(this,1)}get mimetype(){return W(this,Cn,ax).call(this,2)}get name(){return W(this,Cn,ax).call(this,3)}get data(){let e=g(Rt,Ks);const r=g(this,Cr).getUint32(e);e+=4+r;const n=g(this,Cr).getUint32(e);e+=4+n;const i=g(this,Cr).getUint32(e);e+=4+i;const a=g(this,Cr).getUint32(e);if(a!==0)return new Uint8Array(g(this,Uu),e+4,a)}clearData(){let e=g(Rt,Ks);const r=g(this,Cr).getUint32(e);e+=4+r;const n=g(this,Cr).getUint32(e);e+=4+n;const i=g(this,Cr).getUint32(e);e+=4+i;const a=g(this,Cr).getUint32(e);new Uint8Array(g(this,Uu),e+4,a).fill(0),g(this,Cr).setUint32(e,0)}get cssFontInfo(){let e=g(Rt,Ks);const r=g(this,Cr).getUint32(e);e+=4+r;const n=g(this,Cr).getUint32(e);e+=4+n;const i=g(this,Cr).getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(g(this,Uu),e+4,i)),new jN(a.buffer)}get systemFontInfo(){let e=g(Rt,Ks);const r=g(this,Cr).getUint32(e);e+=4+r;const n=g(this,Cr).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(g(this,Uu),e+4,n)),new VN(i.buffer)}static write(e){const r=e.systemFontInfo?VN.write(e.systemFontInfo):null,n=e.cssFontInfo?jN.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const m of Rt.strings)a[m]=i.encode(e[m]),s+=4+a[m].length;const o=g(Rt,Ks)+4+s+4+(r?r.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let f=0;const h=Rt.bools.length;let d=0,p=0;for(let m=0;m<h;m++){const v=e[Rt.bools[m]];d|=(v===void 0?0:v?2:1)<<p,p+=2,(p===8||m===h-1)&&(c.setUint8(f++,d),d=0,p=0)}Jt(f===g(Rt,W0),"FontInfo.write: Boolean properties offset mismatch");for(const m of Rt.numbers)c.setFloat64(f,e[m]),f+=8;if(Jt(f===g(Rt,G0),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(f++,4);for(const m of e.bbox)c.setInt16(f,m,!0),f+=2}else c.setUint8(f++,0),f+=2*4;if(Jt(f===g(Rt,K0),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(f++,6);for(const m of e.fontMatrix)c.setFloat64(f,m,!0),f+=8}else c.setUint8(f++,0),f+=8*6;if(Jt(f===g(Rt,X0),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(f++,1);for(const m of e.defaultVMetrics)c.setInt16(f,m,!0),f+=2}else c.setUint8(f++,0),f+=3*2;Jt(f===g(Rt,Ks),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(g(Rt,Ks),0),f+=4;for(const m of Rt.strings){const v=a[m],y=v.length;c.setUint32(f,y),u.set(v,f+4),f+=4+y}if(c.setUint32(g(Rt,Ks),f-g(Rt,Ks)-4),!r)c.setUint32(f,0),f+=4;else{const m=r.byteLength;c.setUint32(f,m),Jt(f+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(r),f+4),f+=4+m}if(!n)c.setUint32(f,0),f+=4;else{const m=n.byteLength;c.setUint32(f,m),Jt(f+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),f+4),f+=4+m}return e.data===void 0?(c.setUint32(f,0),f+=4):(c.setUint32(f,e.data.length),u.set(e.data,f+4),f+=4+e.data.length),Jt(f<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(f)}};W0=new WeakMap,G0=new WeakMap,K0=new WeakMap,X0=new WeakMap,Ks=new WeakMap,Uu=new WeakMap,L_=new WeakMap,Cr=new WeakMap,Cn=new WeakSet,Ol=function(e){Jt(e<Rt.bools.length,"Invalid boolean index");const r=Math.floor(e/4),n=e*2%8,i=g(this,Cr).getUint8(r)>>n&3;return i===0?void 0:i===2},gD=function(e){return Jt(e<Rt.numbers.length,"Invalid number index"),g(this,Cr).getFloat64(g(Rt,W0)+e*8)},ax=function(e){Jt(e<Rt.strings.length,"Invalid string index");let r=g(Rt,Ks)+4;for(let a=0;a<e;a++)r+=g(this,Cr).getUint32(r)+4;const n=g(this,Cr).getUint32(r),i=new Uint8Array(n);return i.set(new Uint8Array(g(this,Uu),r+4,n)),g(this,L_).decode(i)},Oe(Rt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Oe(Rt,"numbers",["ascent","defaultWidth","descent"]),Oe(Rt,"strings",["fallbackName","loadedName","mimetype","name"]),$(Rt,W0,Math.ceil(Rt.bools.length*2/8)),$(Rt,G0,g(Rt,W0)+Rt.numbers.length*8),$(Rt,K0,g(Rt,G0)+1+2*4),$(Rt,X0,g(Rt,K0)+1+8*6),$(Rt,Ks,g(Rt,X0)+1+2*3);let _3=Rt;var B_,$_,j_,V_,U_,z_,q_,H_;const jr=class jr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let r,n=null,i=[],a=[],s=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":r=e[1]==="axial"?1:2,n=e[2],s=e[3],r===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":r=3,l=e[1],i=e[2],a=e[3],o=e[4]||[],n=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),f=Math.floor(a.length/3),h=s.length,d=o.length;let p=0;for(const x of o)p+=1,p=Math.ceil(p/4)*4,p+=4+x.coords.length*4,p+=4+x.colors.length*4,x.verticesPerRow!==void 0&&(p+=4);const m=20+c*8+f*3+h*8+(n?16:0)+(u?3:0)+p,v=new ArrayBuffer(m),y=new DataView(v),w=new Uint8Array(v);y.setUint8(g(jr,B_),r),y.setUint8(g(jr,$_),n?1:0),y.setUint8(g(jr,j_),u?1:0),y.setUint8(g(jr,V_),l),y.setUint32(g(jr,U_),c,!0),y.setUint32(g(jr,z_),f,!0),y.setUint32(g(jr,q_),h,!0),y.setUint32(g(jr,H_),d,!0);let b=20;new Float32Array(v,b,c*2).set(i),b+=c*8,w.set(a,b),b+=f*3;for(const[x,_]of s)y.setFloat32(b,x,!0),b+=4,y.setUint32(b,parseInt(_.slice(1),16),!0),b+=4;if(n)for(const x of n)y.setFloat32(b,x,!0),b+=4;u&&(w.set(u,b),b+=3);for(let x=0;x<o.length;x++){const _=o[x];y.setUint8(b,_.type),b+=1,b=Math.ceil(b/4)*4,y.setUint32(b,_.coords.length,!0),b+=4,new Int32Array(v,b,_.coords.length).set(_.coords),b+=_.coords.length*4,y.setUint32(b,_.colors.length,!0),b+=4,new Int32Array(v,b,_.colors.length).set(_.colors),b+=_.colors.length*4,_.verticesPerRow!==void 0&&(y.setUint32(b,_.verticesPerRow,!0),b+=4)}return v}getIR(){const e=this.view,r=this.data[g(jr,B_)],n=!!this.data[g(jr,$_)],i=!!this.data[g(jr,j_)],a=e.getUint32(g(jr,U_),!0),s=e.getUint32(g(jr,z_),!0),o=e.getUint32(g(jr,q_),!0),l=e.getUint32(g(jr,H_),!0);let u=20;const c=new Float32Array(this.buffer,u,a*2);u+=a*8;const f=new Uint8Array(this.buffer,u,s*3);u+=s*3;const h=[];for(let v=0;v<o;++v){const y=e.getFloat32(u,!0);u+=4;const w=e.getUint32(u,!0);u+=4,h.push([y,`#${w.toString(16).padStart(6,"0")}`])}let d=null;if(n){d=[];for(let v=0;v<4;++v)d.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const m=[];for(let v=0;v<l;++v){const y=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const w=e.getUint32(u,!0);u+=4;const b=new Int32Array(this.buffer,u,w);u+=w*4;const A=e.getUint32(u,!0);u+=4;const x=new Int32Array(this.buffer,u,A);u+=A*4;const _={type:y,coords:b,colors:x};y===t3.LATTICE&&(_.verticesPerRow=e.getUint32(u,!0),u+=4),m.push(_)}if(r===1)return["RadialAxial","axial",d,h,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(r===2)return["RadialAxial","radial",d,h,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(r===3){const v=this.data[g(jr,V_)];let y=null;if(c.length>0){let w=c[0],b=c[0],A=c[1],x=c[1];for(let _=0;_<c.length;_+=2){const S=c[_],E=c[_+1];w=w>S?S:w,A=A>E?E:A,b=b<S?S:b,x=x<E?E:x}y=[w,A,b,x]}return["Mesh",v,c,f,m,y,d,p]}throw new Error(`Unsupported pattern kind: ${r}`)}};B_=new WeakMap,$_=new WeakMap,j_=new WeakMap,V_=new WeakMap,U_=new WeakMap,z_=new WeakMap,q_=new WeakMap,H_=new WeakMap,$(jr,B_,0),$(jr,$_,1),$(jr,j_,2),$(jr,V_,3),$(jr,U_,4),$(jr,z_,8),$(jr,q_,12),$(jr,H_,16);let E3=jr;function kAe(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(Qa)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function RAe(t){if(Qa&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return sS(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function GC(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const S3=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,FAe=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",LAe=vAe.bind(null,S3,FAe);var ef,VP;class BAe{constructor(){$(this,ef,new Map);$(this,VP,Promise.resolve())}postMessage(e,r){const n={data:structuredClone(e,r?{transfer:r}:null)};g(this,VP).then(()=>{for(const[i]of g(this,ef))i.call(this,n)})}addEventListener(e,r,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Tt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,r);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}g(this,ef).set(r,i)}removeEventListener(e,r){const n=g(this,ef).get(r);n==null||n(),g(this,ef).delete(r)}terminate(){for(const[,e]of g(this,ef))e==null||e();g(this,ef).clear()}}ef=new WeakMap,VP=new WeakMap;const KC={DATA:1,ERROR:2},Un={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d9(){}function gs(t){if(t instanceof hp||t instanceof r3||t instanceof a9||t instanceof FN||t instanceof Pk)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Lr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new hp(t.message);case"InvalidPDFException":return new r3(t.message);case"PasswordException":return new a9(t.message,t.code);case"ResponseException":return new FN(t.message,t.status,t.missing);case"UnknownErrorException":return new Pk(t.message,t.details)}return new Pk(t.message,t.toString())}var Y0,vl,Lre,Bre,$re,vD;class sx{constructor(e,r,n){$(this,vl);$(this,Y0,new AbortController);this.sourceName=e,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",W(this,vl,Lre).bind(this),{signal:g(this,Y0).signal})}on(e,r){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=r}send(e,r,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:r},n)}sendWithPromise(e,r,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:r},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,r,n,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:r,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[a].pullCall=c,l.postMessage({sourceName:s,targetName:o,stream:Un.PULL,streamId:a,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Jt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[a].cancelCall=c,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:Un.CANCEL,streamId:a,reason:gs(u)}),c.promise}},n)}destroy(){var e;(e=g(this,Y0))==null||e.abort(),R(this,Y0,null)}}Y0=new WeakMap,vl=new WeakSet,Lre=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){W(this,vl,$re).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===KC.DATA)i.resolve(e.data);else if(e.callback===KC.ERROR)i.reject(gs(e.reason));else throw new Error("Unexpected callback case");return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(r,e.data).then(function(s){a.postMessage({sourceName:n,targetName:i,callback:KC.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:n,targetName:i,callback:KC.ERROR,callbackId:e.callbackId,reason:gs(s)})});return}if(e.streamId){W(this,vl,Bre).call(this,e);return}r(e.data)},Bre=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,f){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=c,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Un.ENQUEUE,streamId:r,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Un.CLOSE,streamId:r}),delete s.streamSinks[r])},error(u){Jt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Un.ERROR,streamId:r,reason:gs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[r]=l,Promise.try(o,e.data,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Un.START_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:Un.START_COMPLETE,streamId:r,reason:gs(u)})})},$re=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[r],o=this.streamSinks[r];switch(e.stream){case Un.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(gs(e.reason));break;case Un.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(gs(e.reason));break;case Un.PULL:if(!o){a.postMessage({sourceName:n,targetName:i,stream:Un.PULL_COMPLETE,streamId:r,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||d9).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Un.PULL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:Un.PULL_COMPLETE,streamId:r,reason:gs(u)})});break;case Un.ENQUEUE:if(Jt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Un.CLOSE:if(Jt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),W(this,vl,vD).call(this,s,r);break;case Un.ERROR:Jt(s,"error should have stream controller"),s.controller.error(gs(e.reason)),W(this,vl,vD).call(this,s,r);break;case Un.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(gs(e.reason)),W(this,vl,vD).call(this,s,r);break;case Un.CANCEL:if(!o)break;const l=gs(e.reason);Promise.try(o.onCancel||d9,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Un.CANCEL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:Un.CANCEL_COMPLETE,streamId:r,reason:gs(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}},vD=async function(e,r){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[r]};var W_;class jre{constructor({enableHWA:e=!1}){$(this,W_,!1);R(this,W_,e)}create(e,r){if(e<=0||r<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,r);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!g(this,W_)})}}reset(e,r,n){if(!e.canvas)throw new Error("Canvas is not specified");if(r<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=r,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,r){Lr("Abstract method `_createCanvas` called.")}}W_=new WeakMap;class $Ae extends jre{constructor({ownerDocument:e=globalThis.document,enableHWA:r=!1}){super({enableHWA:r}),this._document=e}_createCanvas(e,r){const n=this._document.createElement("canvas");return n.width=e,n.height=r,n}}class Vre{constructor({baseUrl:e=null,isCompressed:r=!0}){this.baseUrl=e,this.isCompressed=r}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}async _fetch(e){Lr("Abstract method `_fetch` called.")}}class p9 extends Vre{async _fetch(e){const r=await oS(e,this.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):sS(r)}}class Ure{addFilter(e){return"none"}addHCMFilter(e,r){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,r,n,i,a){return"none"}destroy(e=!1){}}var ig,Q0,tf,rf,Da,ag,sg,Ye,Ea,ox,vy,yD,yy,zre,C3,by,lx,ux,T3,cx;class jAe extends Ure{constructor({docId:r,ownerDocument:n=globalThis.document}){super();$(this,Ye);$(this,ig);$(this,Q0);$(this,tf);$(this,rf);$(this,Da);$(this,ag);$(this,sg,0);R(this,rf,r),R(this,Da,n)}addFilter(r){if(!r)return"none";let n=g(this,Ye,Ea).get(r);if(n)return n;const[i,a,s]=W(this,Ye,yD).call(this,r),o=r.length===1?i:`${i}${a}${s}`;if(n=g(this,Ye,Ea).get(o),n)return g(this,Ye,Ea).set(r,n),n;const l=`g_${g(this,rf)}_transfer_map_${ri(this,sg)._++}`,u=W(this,Ye,yy).call(this,l);g(this,Ye,Ea).set(r,u),g(this,Ye,Ea).set(o,u);const c=W(this,Ye,by).call(this,l);return W(this,Ye,ux).call(this,i,a,s,c),u}addHCMFilter(r,n){var p;const i=`${r}-${n}`,a="base";let s=g(this,Ye,ox).get(a);if((s==null?void 0:s.key)===i||(s?((p=s.filter)==null||p.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},g(this,Ye,ox).set(a,s)),!r||!n))return s.url;const o=W(this,Ye,cx).call(this,r);r=et.makeHexColor(...o);const l=W(this,Ye,cx).call(this,n);if(n=et.makeHexColor(...l),g(this,Ye,vy).style.color="",r==="#000000"&&n==="#ffffff"||r===n)return s.url;const u=new Array(256);for(let m=0;m<=255;m++){const v=m/255;u[m]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const c=u.join(","),f=`g_${g(this,rf)}_hcm_filter`,h=s.filter=W(this,Ye,by).call(this,f);W(this,Ye,ux).call(this,c,c,c,h),W(this,Ye,C3).call(this,h);const d=(m,v)=>{const y=o[m]/255,w=l[m]/255,b=new Array(v+1);for(let A=0;A<=v;A++)b[A]=y+A/v*(w-y);return b.join(",")};return W(this,Ye,ux).call(this,d(0,5),d(1,5),d(2,5),h),s.url=W(this,Ye,yy).call(this,f),s.url}addAlphaFilter(r){let n=g(this,Ye,Ea).get(r);if(n)return n;const[i]=W(this,Ye,yD).call(this,[r]),a=`alpha_${i}`;if(n=g(this,Ye,Ea).get(a),n)return g(this,Ye,Ea).set(r,n),n;const s=`g_${g(this,rf)}_alpha_map_${ri(this,sg)._++}`,o=W(this,Ye,yy).call(this,s);g(this,Ye,Ea).set(r,o),g(this,Ye,Ea).set(a,o);const l=W(this,Ye,by).call(this,s);return W(this,Ye,T3).call(this,i,l),o}addLuminosityFilter(r){let n=g(this,Ye,Ea).get(r||"luminosity");if(n)return n;let i,a;if(r?([i]=W(this,Ye,yD).call(this,[r]),a=`luminosity_${i}`):a="luminosity",n=g(this,Ye,Ea).get(a),n)return g(this,Ye,Ea).set(r,n),n;const s=`g_${g(this,rf)}_luminosity_map_${ri(this,sg)._++}`,o=W(this,Ye,yy).call(this,s);g(this,Ye,Ea).set(r,o),g(this,Ye,Ea).set(a,o);const l=W(this,Ye,by).call(this,s);return W(this,Ye,zre).call(this,l),r&&W(this,Ye,T3).call(this,i,l),o}addHighlightHCMFilter(r,n,i,a,s){var w;const o=`${n}-${i}-${a}-${s}`;let l=g(this,Ye,ox).get(r);if((l==null?void 0:l.key)===o||(l?((w=l.filter)==null||w.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},g(this,Ye,ox).set(r,l)),!n||!i))return l.url;const[u,c]=[n,i].map(W(this,Ye,cx).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,p]=[a,s].map(W(this,Ye,cx).bind(this));h<f&&([f,h,d,p]=[h,f,p,d]),g(this,Ye,vy).style.color="";const m=(b,A,x)=>{const _=new Array(256),S=(h-f)/x,E=b/255,T=(A-b)/(255*x);let D=0;for(let N=0;N<=x;N++){const P=Math.round(f+N*S),M=E+N*T;for(let j=D;j<=P;j++)_[j]=M;D=P+1}for(let N=D;N<256;N++)_[N]=_[D-1];return _.join(",")},v=`g_${g(this,rf)}_hcm_${r}_filter`,y=l.filter=W(this,Ye,by).call(this,v);return W(this,Ye,C3).call(this,y),W(this,Ye,ux).call(this,m(d[0],p[0],5),m(d[1],p[1],5),m(d[2],p[2],5),y),l.url=W(this,Ye,yy).call(this,v),l.url}destroy(r=!1){var n,i,a,s;r&&((n=g(this,ag))!=null&&n.size)||((i=g(this,tf))==null||i.parentNode.parentNode.remove(),R(this,tf,null),(a=g(this,Q0))==null||a.clear(),R(this,Q0,null),(s=g(this,ag))==null||s.clear(),R(this,ag,null),R(this,sg,0))}}ig=new WeakMap,Q0=new WeakMap,tf=new WeakMap,rf=new WeakMap,Da=new WeakMap,ag=new WeakMap,sg=new WeakMap,Ye=new WeakSet,Ea=function(){return g(this,Q0)||R(this,Q0,new Map)},ox=function(){return g(this,ag)||R(this,ag,new Map)},vy=function(){if(!g(this,tf)){const r=g(this,Da).createElement("div"),{style:n}=r;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=g(this,Da).createElementNS(Rc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),R(this,tf,g(this,Da).createElementNS(Rc,"defs")),r.append(i),i.append(g(this,tf)),g(this,Da).body.append(r)}return g(this,tf)},yD=function(r){if(r.length===1){const u=r[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=u[h]/255;const f=c.join(",");return[f,f,f]}const[n,i,a]=r,s=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)s[u]=n[u]/255,o[u]=i[u]/255,l[u]=a[u]/255;return[s.join(","),o.join(","),l.join(",")]},yy=function(r){if(g(this,ig)===void 0){R(this,ig,"");const n=g(this,Da).URL;n!==g(this,Da).baseURI&&(_M(n)?Tt('#createUrl: ignore "data:"-URL for performance reasons.'):R(this,ig,Yte(n,"")))}return`url(${g(this,ig)}#${r})`},zre=function(r){const n=g(this,Da).createElementNS(Rc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),r.append(n)},C3=function(r){const n=g(this,Da).createElementNS(Rc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),r.append(n)},by=function(r){const n=g(this,Da).createElementNS(Rc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",r),g(this,Ye,vy).append(n),n},lx=function(r,n,i){const a=g(this,Da).createElementNS(Rc,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),r.append(a)},ux=function(r,n,i,a){const s=g(this,Da).createElementNS(Rc,"feComponentTransfer");a.append(s),W(this,Ye,lx).call(this,s,"feFuncR",r),W(this,Ye,lx).call(this,s,"feFuncG",n),W(this,Ye,lx).call(this,s,"feFuncB",i)},T3=function(r,n){const i=g(this,Da).createElementNS(Rc,"feComponentTransfer");n.append(i),W(this,Ye,lx).call(this,i,"feFuncA",r)},cx=function(r){return g(this,Ye,vy).style.color=r,uS(getComputedStyle(g(this,Ye,vy)).getPropertyValue("color"))};class qre{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load font data at: ${r}`)})}async _fetch(e){Lr("Abstract method `_fetch` called.")}}class m9 extends qre{async _fetch(e){const r=await oS(e,"arraybuffer");return new Uint8Array(r)}}class Hre{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load wasm data at: ${r}`)})}async _fetch(e){Lr("Abstract method `_fetch` called.")}}class g9 extends Hre{async _fetch(e){const r=await oS(e,"arraybuffer");return new Uint8Array(r)}}Qa&&Tt("Please use the `legacy` build in Node.js environments.");async function a5(t){const r=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(r)}class VAe extends Ure{}class UAe extends jre{_createCanvas(e,r){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,r)}}class zAe extends Vre{async _fetch(e){return a5(e)}}class qAe extends qre{async _fetch(e){return a5(e)}}class HAe extends Hre{async _fetch(e){return a5(e)}}const iy="__forcedDependency",{floor:v9,ceil:y9}=Math;function XC(t,e,r,n,i,a){t[e*4+0]=Math.min(t[e*4+0],r),t[e*4+1]=Math.min(t[e*4+1],n),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],a)}const D3=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Z0,pd;class WAe{constructor(e,r){$(this,Z0);$(this,pd);R(this,Z0,e),R(this,pd,r)}get length(){return g(this,Z0).length}isEmpty(e){return g(this,Z0)[e]===D3}minX(e){return g(this,pd)[e*4+0]/256}minY(e){return g(this,pd)[e*4+1]/256}maxX(e){return(g(this,pd)[e*4+2]+1)/256}maxY(e){return(g(this,pd)[e*4+3]+1)/256}}Z0=new WeakMap,pd=new WeakMap;const YC=(t,e)=>{if(!t)return;let r=t.get(e);return r||(r={dependencies:new Set,isRenderingOperation:!1},t.set(e,r)),r};var bs,ws,og,jl,lg,nf,pr,Tr,af,xs,G_,J0,ug,cg,sf,Na,zu,K_,N3;class GAe{constructor(e,r,n=!1){$(this,K_);$(this,bs,{__proto__:null});$(this,ws,{__proto__:null,transform:[],moveText:[],sameLineText:[],[iy]:[]});$(this,og,new Map);$(this,jl,[]);$(this,lg,[]);$(this,nf,[[1,0,0,1,0,0]]);$(this,pr,[-1/0,-1/0,1/0,1/0]);$(this,Tr,new Float64Array([1/0,1/0,-1/0,-1/0]));$(this,af,-1);$(this,xs,new Set);$(this,G_,new Map);$(this,J0,new Map);$(this,ug);$(this,cg);$(this,sf);$(this,Na);$(this,zu);R(this,ug,e.width),R(this,cg,e.height),W(this,K_,N3).call(this,r),n&&R(this,zu,new Map)}growOperationsCount(e){e>=g(this,Na).length&&W(this,K_,N3).call(this,e,g(this,Na))}save(e){return R(this,bs,{__proto__:g(this,bs)}),R(this,ws,{__proto__:g(this,ws),transform:{__proto__:g(this,ws).transform},moveText:{__proto__:g(this,ws).moveText},sameLineText:{__proto__:g(this,ws).sameLineText},[iy]:{__proto__:g(this,ws)[iy]}}),R(this,pr,{__proto__:g(this,pr)}),g(this,jl).push(e),this}restore(e){var i;const r=Object.getPrototypeOf(g(this,bs));if(r===null)return this;R(this,bs,r),R(this,ws,Object.getPrototypeOf(g(this,ws))),R(this,pr,Object.getPrototypeOf(g(this,pr)));const n=g(this,jl).pop();return n!==void 0&&((i=YC(g(this,zu),e))==null||i.dependencies.add(n),g(this,Na)[e]=g(this,Na)[n]),this}recordOpenMarker(e){return g(this,jl).push(e),this}getOpenMarker(){return g(this,jl).length===0?null:g(this,jl).at(-1)}recordCloseMarker(e){var n;const r=g(this,jl).pop();return r!==void 0&&((n=YC(g(this,zu),e))==null||n.dependencies.add(r),g(this,Na)[e]=g(this,Na)[r]),this}beginMarkedContent(e){return g(this,lg).push(e),this}endMarkedContent(e){var n;const r=g(this,lg).pop();return r!==void 0&&((n=YC(g(this,zu),e))==null||n.dependencies.add(r),g(this,Na)[e]=g(this,Na)[r]),this}pushBaseTransform(e){return g(this,nf).push(et.multiplyByDOMMatrix(g(this,nf).at(-1),e.getTransform())),this}popBaseTransform(){return g(this,nf).length>1&&g(this,nf).pop(),this}recordSimpleData(e,r){return g(this,bs)[e]=r,this}recordIncrementalData(e,r){return g(this,ws)[e].push(r),this}resetIncrementalData(e,r){return g(this,ws)[e].length=0,this}recordNamedData(e,r){return g(this,og).set(e,r),this}recordSimpleDataFromNamed(e,r,n){g(this,bs)[e]=g(this,og).get(r)??n}recordFutureForcedDependency(e,r){return this.recordIncrementalData(iy,r),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const r of e)r in g(this,bs)&&this.recordFutureForcedDependency(r,g(this,bs)[r]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of g(this,xs))this.recordFutureForcedDependency(iy,e);return this}resetBBox(e){return g(this,af)!==e&&(R(this,af,e),g(this,Tr)[0]=1/0,g(this,Tr)[1]=1/0,g(this,Tr)[2]=-1/0,g(this,Tr)[3]=-1/0),this}recordClipBox(e,r,n,i,a,s){const o=et.multiplyByDOMMatrix(g(this,nf).at(-1),r.getTransform()),l=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([n,a,i,s],o,l);const u=et.intersect(g(this,pr),l);return u?(g(this,pr)[0]=u[0],g(this,pr)[1]=u[1],g(this,pr)[2]=u[2],g(this,pr)[3]=u[3]):(g(this,pr)[0]=g(this,pr)[1]=1/0,g(this,pr)[2]=g(this,pr)[3]=-1/0),this}recordBBox(e,r,n,i,a,s){const o=g(this,pr);if(o[0]===1/0)return this;const l=et.multiplyByDOMMatrix(g(this,nf).at(-1),r.getTransform());if(o[0]===-1/0)return et.axialAlignedBoundingBox([n,a,i,s],l,g(this,Tr)),this;const u=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([n,a,i,s],l,u),g(this,Tr)[0]=Math.min(g(this,Tr)[0],Math.max(u[0],o[0])),g(this,Tr)[1]=Math.min(g(this,Tr)[1],Math.max(u[1],o[1])),g(this,Tr)[2]=Math.max(g(this,Tr)[2],Math.min(u[2],o[2])),g(this,Tr)[3]=Math.max(g(this,Tr)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,r,n,i=1,a=0,s=0,o){const l=n.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&g(this,J0).get(n),u!==!1&&(c=[0,0,0,0],et.axialAlignedBoundingBox(l,n.fontMatrix,c),(i!==1||a!==0||s!==0)&&et.scaleMinMax([i,0,0,-i,a,s],c),u)))return this.recordBBox(e,r,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const f=o();return l&&c&&u===void 0&&(u=c[0]<=a-f.actualBoundingBoxLeft&&c[2]>=a+f.actualBoundingBoxRight&&c[1]<=s-f.actualBoundingBoxAscent&&c[3]>=s+f.actualBoundingBoxDescent,g(this,J0).set(n,u),u)?this.recordBBox(e,r,c[0],c[2],c[1],c[3]):this.recordBBox(e,r,a-f.actualBoundingBoxLeft,a+f.actualBoundingBoxRight,s-f.actualBoundingBoxAscent,s+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return g(this,Tr)[0]=Math.max(0,g(this,pr)[0]),g(this,Tr)[1]=Math.max(0,g(this,pr)[1]),g(this,Tr)[2]=Math.min(g(this,ug),g(this,pr)[2]),g(this,Tr)[3]=Math.min(g(this,cg),g(this,pr)[3]),this}getSimpleIndex(e){return g(this,bs)[e]}recordDependencies(e,r){const n=g(this,xs),i=g(this,bs),a=g(this,ws);for(const s of r)s in g(this,bs)?n.add(i[s]):s in a&&a[s].forEach(n.add,n);return this}recordNamedDependency(e,r){return g(this,og).has(r)&&g(this,xs).add(g(this,og).get(r)),this}recordOperation(e,r=!1){if(this.recordDependencies(e,[iy]),g(this,zu)){const n=YC(g(this,zu),e),{dependencies:i}=n;g(this,xs).forEach(i.add,i),g(this,jl).forEach(i.add,i),g(this,lg).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(g(this,af)===e){const n=v9(g(this,Tr)[0]*256/g(this,ug)),i=v9(g(this,Tr)[1]*256/g(this,cg)),a=y9(g(this,Tr)[2]*256/g(this,ug)),s=y9(g(this,Tr)[3]*256/g(this,cg));XC(g(this,sf),e,n,i,a,s);for(const o of g(this,xs))o!==e&&XC(g(this,sf),o,n,i,a,s);for(const o of g(this,jl))o!==e&&XC(g(this,sf),o,n,i,a,s);for(const o of g(this,lg))o!==e&&XC(g(this,sf),o,n,i,a,s);r||(g(this,xs).clear(),R(this,af,-1))}return this}recordShowTextOperation(e,r=!1){const n=Array.from(g(this,xs));this.recordOperation(e,r),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,r=!1){return g(this,af)===e&&(R(this,af,-1),g(this,pr)[0]=Math.max(g(this,pr)[0],g(this,Tr)[0]),g(this,pr)[1]=Math.max(g(this,pr)[1],g(this,Tr)[1]),g(this,pr)[2]=Math.min(g(this,pr)[2],g(this,Tr)[2]),g(this,pr)[3]=Math.min(g(this,pr)[3],g(this,Tr)[3]),r||g(this,xs).clear()),this}_takePendingDependencies(){const e=g(this,xs);return R(this,xs,new Set),e}_extractOperation(e){const r=g(this,G_).get(e);return g(this,G_).delete(e),r}_pushPendingDependencies(e){for(const r of e)g(this,xs).add(r)}take(){return g(this,J0).clear(),new WAe(g(this,Na),g(this,sf))}takeDebugMetadata(){return g(this,zu)}}bs=new WeakMap,ws=new WeakMap,og=new WeakMap,jl=new WeakMap,lg=new WeakMap,nf=new WeakMap,pr=new WeakMap,Tr=new WeakMap,af=new WeakMap,xs=new WeakMap,G_=new WeakMap,J0=new WeakMap,ug=new WeakMap,cg=new WeakMap,sf=new WeakMap,Na=new WeakMap,zu=new WeakMap,K_=new WeakSet,N3=function(e,r){const n=new ArrayBuffer(e*4);R(this,sf,new Uint8ClampedArray(n)),R(this,Na,new Uint32Array(n)),r&&r.length>0?(g(this,Na).set(r),g(this,Na).fill(D3,r.length)):g(this,Na).fill(D3)};var kr,An,Vl,eb,tb;const XV=class XV{constructor(e,r,n){$(this,kr);$(this,An);$(this,Vl);$(this,eb,0);$(this,tb,0);if(e instanceof XV&&g(e,Vl)===!!n)return e;R(this,kr,e),R(this,An,r),R(this,Vl,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ri(this,tb)._++,g(this,kr).save(g(this,An)),this}restore(e){return g(this,tb)>0&&(g(this,kr).restore(g(this,An)),ri(this,tb)._--),this}recordOpenMarker(e){return ri(this,eb)._++,this}getOpenMarker(){return g(this,eb)>0?g(this,An):g(this,kr).getOpenMarker()}recordCloseMarker(e){return ri(this,eb)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return g(this,kr).pushBaseTransform(e),this}popBaseTransform(){return g(this,kr).popBaseTransform(),this}recordSimpleData(e,r){return g(this,kr).recordSimpleData(e,g(this,An)),this}recordIncrementalData(e,r){return g(this,kr).recordIncrementalData(e,g(this,An)),this}resetIncrementalData(e,r){return g(this,kr).resetIncrementalData(e,g(this,An)),this}recordNamedData(e,r){return this}recordSimpleDataFromNamed(e,r,n){return g(this,kr).recordSimpleDataFromNamed(e,r,g(this,An)),this}recordFutureForcedDependency(e,r){return g(this,kr).recordFutureForcedDependency(e,g(this,An)),this}inheritSimpleDataAsFutureForcedDependencies(e){return g(this,kr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return g(this,kr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return g(this,Vl)||g(this,kr).resetBBox(g(this,An)),this}recordClipBox(e,r,n,i,a,s){return g(this,Vl)||g(this,kr).recordClipBox(g(this,An),r,n,i,a,s),this}recordBBox(e,r,n,i,a,s){return g(this,Vl)||g(this,kr).recordBBox(g(this,An),r,n,i,a,s),this}recordCharacterBBox(e,r,n,i,a,s,o){return g(this,Vl)||g(this,kr).recordCharacterBBox(g(this,An),r,n,i,a,s,o),this}recordFullPageBBox(e){return g(this,Vl)||g(this,kr).recordFullPageBBox(g(this,An)),this}getSimpleIndex(e){return g(this,kr).getSimpleIndex(e)}recordDependencies(e,r){return g(this,kr).recordDependencies(g(this,An),r),this}recordNamedDependency(e,r){return g(this,kr).recordNamedDependency(g(this,An),r),this}recordOperation(e){return g(this,kr).recordOperation(g(this,An),!0),this}recordShowTextOperation(e){return g(this,kr).recordShowTextOperation(g(this,An),!0),this}bboxToClipBoxDropOperation(e){return g(this,Vl)||g(this,kr).bboxToClipBoxDropOperation(g(this,An),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};kr=new WeakMap,An=new WeakMap,Vl=new WeakMap,eb=new WeakMap,tb=new WeakMap;let UN=XV;const Fo={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},na={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function P3(t,e){if(!e)return;const r=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],r,n),t.clip(i)}class s5{isModifyingCurrentTransform(){return!1}getPattern(){Lr("Abstract method `getPattern` called.")}}class KAe extends s5{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let r;this._type==="axial"?r=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)r.addColorStop(n[0],n[1]);return r}getPattern(e,r,n,i){let a;if(i===na.STROKE||i===na.FILL){const s=r.current.getClippedPathBoundingBox(i,fn(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,u=r.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=et.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...r.baseTransform),this.matrix&&c.transform(...this.matrix),P3(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),a=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);a.setTransform(f)}else P3(e,this._bbox),a=this._createGradient(e);return a}}function Ok(t,e,r,n,i,a,s,o){const l=e.coords,u=e.colors,c=t.data,f=t.width*4;let h;l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=a,a=s,s=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=o,o=h),l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=a,a=s,s=h);const d=(l[r]+e.offsetX)*e.scaleX,p=(l[r+1]+e.offsetY)*e.scaleY,m=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,w=(l[i+1]+e.offsetY)*e.scaleY;if(p>=w)return;const b=u[a],A=u[a+1],x=u[a+2],_=u[s],S=u[s+1],E=u[s+2],T=u[o],D=u[o+1],N=u[o+2],P=Math.round(p),M=Math.round(w);let j,K,k,V,q,H,te,ue;for(let re=P;re<=M;re++){if(re<v){const de=re<p?0:(p-re)/(p-v);j=d-(d-m)*de,K=b-(b-_)*de,k=A-(A-S)*de,V=x-(x-E)*de}else{let de;re>w?de=1:v===w?de=0:de=(v-re)/(v-w),j=m-(m-y)*de,K=_-(_-T)*de,k=S-(S-D)*de,V=E-(E-N)*de}let L;re<p?L=0:re>w?L=1:L=(p-re)/(p-w),q=d-(d-y)*L,H=b-(b-T)*L,te=A-(A-D)*L,ue=x-(x-N)*L;const ie=Math.round(Math.min(j,q)),X=Math.round(Math.max(j,q));let pe=f*re+ie*4;for(let de=ie;de<=X;de++)L=(j-de)/(j-q),L<0?L=0:L>1&&(L=1),c[pe++]=K-(K-H)*L|0,c[pe++]=k-(k-te)*L|0,c[pe++]=V-(V-ue)*L|0,c[pe++]=255}}function XAe(t,e,r){const n=e.coords,i=e.colors;let a,s;switch(e.type){case t3.LATTICE:const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(a=0;a<l;a++){let c=a*o;for(let f=0;f<u;f++,c++)Ok(t,r,n[c],n[c+1],n[c+o],i[c],i[c+1],i[c+o]),Ok(t,r,n[c+o+1],n[c+1],n[c+o],i[c+o+1],i[c+1],i[c+o])}break;case t3.TRIANGLES:for(a=0,s=n.length;a<s;a+=3)Ok(t,r,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class YAe extends s5{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,r,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),d=u/f,p=c/h,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/d,scaleY:1/p},v=f+2*2,y=h+2*2,w=n.getCanvas("mesh",v,y),b=w.context,A=b.createImageData(f,h);if(r){const _=A.data;for(let S=0,E=_.length;S<E;S+=4)_[S]=r[0],_[S+1]=r[1],_[S+2]=r[2],_[S+3]=255}for(const _ of this._figures)XAe(A,_,m);return b.putImageData(A,2,2),{canvas:w.canvas,offsetX:o-2*d,offsetY:l-2*p,scaleX:d,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,r,n,i){P3(e,this._bbox);const a=new Float32Array(2);if(i===na.SHADING)et.singularValueDecompose2dScale(fn(e),a);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,a);const[o,l]=a;et.singularValueDecompose2dScale(r.baseTransform,a),a[0]*=o,a[1]*=l}else et.singularValueDecompose2dScale(r.baseTransform,a);const s=this._createMeshCanvas(a,i===na.SHADING?null:this._background,r.cachedCanvases);return i!==na.SHADING&&(e.setTransform(...r.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class QAe extends s5{getPattern(){return"hotpink"}}function ZAe(t){switch(t[0]){case"RadialAxial":return new KAe(t);case"Mesh":return new YAe(t);case"Dummy":return new QAe}throw new Error(`Unknown IR type: ${t[0]}`)}const b9={COLORED:1,UNCOLORED:2},UP=class UP{constructor(e,r,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,r){var H,te;const{bbox:n,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),AM("TilingType: "+s);const f=n[0],h=n[1],d=n[2],p=n[3],m=d-f,v=p-h,y=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,y);const[w,b]=y;et.singularValueDecompose2dScale(this.baseTransform,y);const A=w*y[0],x=b*y[1];let _=m,S=v,E=!1,T=!1;const D=Math.ceil(u*A),N=Math.ceil(c*x),P=Math.ceil(m*A),M=Math.ceil(v*x);D>=P?_=u:E=!0,N>=M?S=c:T=!0;const j=this.getSizeAndScale(_,this.ctx.canvas.width,A),K=this.getSizeAndScale(S,this.ctx.canvas.height,x),k=e.cachedCanvases.getCanvas("pattern",j.size,K.size),V=k.context,q=l.createCanvasGraphics(V,r);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,a,o),V.translate(-j.scale*f,-K.scale*h),q.transform(0,j.scale,0,0,K.scale,0,0),V.save(),(H=q.dependencyTracker)==null||H.save(),this.clipBbox(q,f,h,d,p),q.baseTransform=fn(q.ctx),q.executeOperatorList(i),q.endDrawing(),(te=q.dependencyTracker)==null||te.restore(),V.restore(),E||T){const ue=k.canvas;E&&(_=u),T&&(S=c);const re=this.getSizeAndScale(_,this.ctx.canvas.width,A),L=this.getSizeAndScale(S,this.ctx.canvas.height,x),ie=re.size,X=L.size,pe=e.cachedCanvases.getCanvas("pattern-workaround",ie,X),de=pe.context,ae=E?Math.floor(m/u):0,z=T?Math.floor(v/c):0;for(let ne=0;ne<=ae;ne++)for(let fe=0;fe<=z;fe++)de.drawImage(ue,ie*ne,X*fe,ie,X,0,0,ie,X);return{canvas:pe.canvas,scaleX:re.scale,scaleY:L.scale,offsetX:f,offsetY:h}}return{canvas:k.canvas,scaleX:j.scale,scaleY:K.scale,offsetX:f,offsetY:h}}getSizeAndScale(e,r,n){const i=Math.max(UP.MAX_PATTERN_SIZE,r);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,r,n,i,a){const s=i-r,o=a-n;e.ctx.rect(r,n,s,o),et.axialAlignedBoundingBox([r,n,i,a],fn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,n){const i=e.ctx,a=e.current;switch(r){case b9.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case b9.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new fAe(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,n,i,a){let s=n;i!==na.SHADING&&(s=et.transform(s,r.baseTransform),this.matrix&&(s=et.transform(s,this.matrix)));const o=this.createPatternCanvas(r,a);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Oe(UP,"MAX_PATTERN_SIZE",3e3);let M3=UP;function JAe({src:t,srcPos:e=0,dest:r,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=da.isLittleEndian?4278190080:255,[l,u]=s?[a,o]:[o,a],c=n>>3,f=n&7,h=t.length;r=new Uint32Array(r.buffer);let d=0;for(let p=0;p<i;p++){for(const v=e+c;e<v;e++){const y=e<h?t[e]:255;r[d++]=y&128?u:l,r[d++]=y&64?u:l,r[d++]=y&32?u:l,r[d++]=y&16?u:l,r[d++]=y&8?u:l,r[d++]=y&4?u:l,r[d++]=y&2?u:l,r[d++]=y&1?u:l}if(f===0)continue;const m=e<h?t[e++]:255;for(let v=0;v<f;v++)r[d++]=m&1<<7-v?u:l}return{srcPos:e,destPos:d}}const w9=16,x9=100,e_e=15,A9=10,Ss=16,kk=new DOMMatrix,fo=new Float32Array(2),Wy=new Float32Array([1/0,1/0,-1/0,-1/0]);function t_e(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,n){e.translate(r,n),this.__originalTranslate(r,n)},t.scale=function(r,n){e.scale(r,n),this.__originalScale(r,n)},t.transform=function(r,n,i,a,s,o){e.transform(r,n,i,a,s,o),this.__originalTransform(r,n,i,a,s,o)},t.setTransform=function(r,n,i,a,s,o){e.setTransform(r,n,i,a,s,o),this.__originalSetTransform(r,n,i,a,s,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(r,n){e.moveTo(r,n),this.__originalMoveTo(r,n)},t.lineTo=function(r,n){e.lineTo(r,n),this.__originalLineTo(r,n)},t.bezierCurveTo=function(r,n,i,a,s,o){e.bezierCurveTo(r,n,i,a,s,o),this.__originalBezierCurveTo(r,n,i,a,s,o)},t.rect=function(r,n,i,a){e.rect(r,n,i,a),this.__originalRect(r,n,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class r_e{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,r,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,r,n)):(i=this.canvasFactory.create(r,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}}function QC(t,e,r,n,i,a,s,o,l,u){const[c,f,h,d,p,m]=fn(t);if(f===0&&h===0){const w=s*c+p,b=Math.round(w),A=o*d+m,x=Math.round(A),_=(s+l)*c+p,S=Math.abs(Math.round(_)-b)||1,E=(o+u)*d+m,T=Math.abs(Math.round(E)-x)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(d),b,x),t.drawImage(e,r,n,i,a,0,0,S,T),t.setTransform(c,f,h,d,p,m),[S,T]}if(c===0&&d===0){const w=o*h+p,b=Math.round(w),A=s*f+m,x=Math.round(A),_=(o+u)*h+p,S=Math.abs(Math.round(_)-b)||1,E=(s+l)*f+m,T=Math.abs(Math.round(E)-x)||1;return t.setTransform(0,Math.sign(f),Math.sign(h),0,b,x),t.drawImage(e,r,n,i,a,0,0,T,S),t.setTransform(c,f,h,d,p,m),[T,S]}t.drawImage(e,r,n,i,a,s,o,l,u);const v=Math.hypot(c,f),y=Math.hypot(h,d);return[v*l,y*u]}class _9{constructor(e,r,n){Oe(this,"alphaIsShape",!1);Oe(this,"fontSize",0);Oe(this,"fontSizeScale",1);Oe(this,"textMatrix",null);Oe(this,"textMatrixScale",1);Oe(this,"fontMatrix",e3);Oe(this,"leading",0);Oe(this,"x",0);Oe(this,"y",0);Oe(this,"lineX",0);Oe(this,"lineY",0);Oe(this,"charSpacing",0);Oe(this,"wordSpacing",0);Oe(this,"textHScale",1);Oe(this,"textRenderingMode",Ki.FILL);Oe(this,"textRise",0);Oe(this,"fillColor","#000000");Oe(this,"strokeColor","#000000");Oe(this,"patternFill",!1);Oe(this,"patternStroke",!1);Oe(this,"fillAlpha",1);Oe(this,"strokeAlpha",1);Oe(this,"lineWidth",1);Oe(this,"activeSMask",null);Oe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,r]),this.minMax=Wy.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=na.FILL,r=null){const n=this.minMax.slice();if(e===na.STROKE){r||Lr("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(r,fo);const i=fo[0]*this.lineWidth/2,a=fo[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wy,0)}getClippedPathBoundingBox(e=na.FILL,r=null){return et.intersect(this.clipBox,this.getPathBoundingBox(e,r))}}function E9(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const r=e.height,n=e.width,i=r%Ss,a=(r-i)/Ss,s=i===0?a:a+1,o=t.createImageData(n,Ss);let l=0,u;const c=e.data,f=o.data;let h,d,p,m;if(e.kind===lD.GRAYSCALE_1BPP){const v=c.byteLength,y=new Uint32Array(f.buffer,0,f.byteLength>>2),w=y.length,b=n+7>>3,A=4294967295,x=da.isLittleEndian?4278190080:255;for(h=0;h<s;h++){for(p=h<a?Ss:i,u=0,d=0;d<p;d++){const _=v-l;let S=0;const E=_>b?n:_*8-7,T=E&-8;let D=0,N=0;for(;S<T;S+=8)N=c[l++],y[u++]=N&128?A:x,y[u++]=N&64?A:x,y[u++]=N&32?A:x,y[u++]=N&16?A:x,y[u++]=N&8?A:x,y[u++]=N&4?A:x,y[u++]=N&2?A:x,y[u++]=N&1?A:x;for(;S<E;S++)D===0&&(N=c[l++],D=128),y[u++]=N&D?A:x,D>>=1}for(;u<w;)y[u++]=0;t.putImageData(o,0,h*Ss)}}else if(e.kind===lD.RGBA_32BPP){for(d=0,m=n*Ss*4,h=0;h<a;h++)f.set(c.subarray(l,l+m)),l+=m,t.putImageData(o,0,d),d+=Ss;h<s&&(m=n*i*4,f.set(c.subarray(l,l+m)),t.putImageData(o,0,d))}else if(e.kind===lD.RGB_24BPP)for(p=Ss,m=n*p,h=0;h<s;h++){for(h>=a&&(p=i,m=n*p),u=0,d=m;d--;)f[u++]=c[l++],f[u++]=c[l++],f[u++]=c[l++],f[u++]=255;t.putImageData(o,0,h*Ss)}else throw new Error(`bad image kind: ${e.kind}`)}function S9(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const r=e.height,n=e.width,i=r%Ss,a=(r-i)/Ss,s=i===0?a:a+1,o=t.createImageData(n,Ss);let l=0;const u=e.data,c=o.data;for(let f=0;f<s;f++){const h=f<a?Ss:i;({srcPos:l}=JAe({src:u,srcPos:l,dest:c,width:n,height:h,nonBlackColor:0})),t.putImageData(o,0,f*Ss)}}function Ow(t,e){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of r)t[n]!==void 0&&(e[n]=t[n]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function ZC(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function C9(t,e){if(e)return!0;et.singularValueDecompose2dScale(t,fo);const r=Math.fround(vc.pixelRatio*dp.PDF_TO_CSS_UNITS);return fo[0]<=r&&fo[1]<=r}const n_e=["butt","round","square"],i_e=["miter","round","bevel"],a_e={},T9={};var du,I3,O3,k3;const YV=class YV{constructor(e,r,n,i,a,{optionalContentConfig:s,markedContentStack:o=null},l,u,c){$(this,du);this.ctx=e,this.current=new _9(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new r_e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,r,n=null){var i;return typeof r=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,r),r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r)):n}beginDrawing({transform:e,viewport:r,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...fn(this.compositeCtx))}this.ctx.save(),ZC(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=fn(this.ctx)}executeOperatorList(e,r,n,i,a){var y;const s=e.argsArray,o=e.fnArray;let l=r||0;const u=s.length;if(u===l)return l;const c=u-l>A9&&typeof n=="function",f=c?Date.now()+e_e:0;let h=0;const d=this.commonObjs,p=this.objs;let m,v;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!a||a(l))if(m=o[l],v=s[l]??null,m!==CA.dependency)v===null?this[m](l):this[m](l,...v);else for(const w of v){(y=this.dependencyTracker)==null||y.recordNamedData(w,l);const b=w.startsWith("g_")?d:p;if(!b.has(w))return b.get(w,n),l}if(l++,l===u)return l;if(c&&++h>A9){if(Date.now()>f)return n(),l;h=0}}}endDrawing(){W(this,du,I3).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const r of e.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);e.clear()}this._cachedBitmapsMap.clear(),W(this,du,O3).call(this)}_scaleImage(e,r){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(r[0],r[1]),1),s=Math.max(Math.hypot(r[2],r[3]),1),o=n,l=i,u="prescale1",c,f;for(;a>2&&o>1||s>2&&l>1;){let h=o,d=l;a>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/h),s>2&&l>1&&(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/d),c=this.cachedCanvases.getCanvas(u,h,d),f=c.context,f.clearRect(0,0,h,d),f.drawImage(e,0,0,o,l,0,0,h,d),e=c.canvas,o=h,l=d,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,r){var D,N;const n=this.ctx,{width:i,height:a}=r,s=this.current.fillColor,o=this.current.patternFill,l=fn(n);let u,c,f,h;if((r.bitmap||r.data)&&r.count>1){const P=r.bitmap||r.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),s]),u=this._cachedBitmapsMap.get(P),u||(u=new Map,this._cachedBitmapsMap.set(P,u));const M=u.get(c);if(M&&!o){const j=Math.round(Math.min(l[0],l[2])+l[4]),K=Math.round(Math.min(l[1],l[3])+l[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,Fo.transformAndFill),{canvas:M,offsetX:j,offsetY:K}}f=M}f||(h=this.cachedCanvases.getCanvas("maskCanvas",i,a),S9(h.context,r));let d=et.transform(l,[1/i,0,0,-1/a,0,0]);d=et.transform(d,[1,0,0,1,0,-a]);const p=Wy.slice();et.axialAlignedBoundingBox([0,0,i,a],d,p);const[m,v,y,w]=p,b=Math.round(y-m)||1,A=Math.round(w-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",b,A),_=x.context,S=m,E=v;_.translate(-S,-E),_.transform(...d),f||(f=this._scaleImage(h.canvas,Cu(_)),f=f.img,u&&o&&u.set(c,f)),_.imageSmoothingEnabled=C9(fn(_),r.interpolate),QC(_,f,0,0,f.width,f.height,0,0,i,a),_.globalCompositeOperation="source-in";const T=et.transform(Cu(_),[1,0,0,1,-S,-E]);return _.fillStyle=o?s.getPattern(n,this,T,na.FILL,e):s,_.fillRect(0,0,i,a),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,x.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,Fo.transformAndFill),{canvas:x.canvas,offsetX:Math.round(S),offsetY:Math.round(E)}}setLineWidth(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),r!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=n_e[r]}setLineJoin(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=i_e[r]}setMiterLimit(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=r}setDash(e,r,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(r),i.lineDashOffset=n)}setRenderingIntent(e,r){}setFlatness(e,r){}setGState(e,r){var n,i,a,s,o;for(const[l,u]of r)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,r,n);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),Ow(this.suspendedCtx,s),t_e(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ow(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,r,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,r,n,i){const a=i[0],s=i[1],o=i[2]-a,l=i[3]-s;o===0||l===0||(this.genericComposeSMask(r.context,n,o,l,r.subtype,r.backdrop,r.transferMap,a,s,r.offsetX,r.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,r,n,i,a,s,o,l,u,c,f){let h=e.canvas,d=l-c,p=u-f;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,i),y=v.context;y.drawImage(h,-d,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",h=v.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(d,p,n,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(d,p,n,i),e.restore()}r.save(),r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?r.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(r.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,u,n,i),r.clip(m),r.globalCompositeOperation="destination-in",r.drawImage(h,d,p,n,i,l,u,n,i),r.restore()}save(e){var n;this.inSMaskMode&&Ow(this.ctx,this.suspendedCtx),this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var r;if((r=this.dependencyTracker)==null||r.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ow(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,r,n,i,a,s,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(r,n,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,r,n,i){let[a]=n;if(!i){a||(a=n[0]=new Path2D),this[r](e,a);return}if(this.dependencyTracker!==null){const s=r===CA.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}a instanceof Path2D||(a=n[0]=rre(a)),et.axialAlignedBoundingBox(i,fn(this.ctx),this.current.minMax),this[r](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,r,n=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,Cu(i),na.STROKE,e),o){const l=new Path2D;l.addPath(r,i.getTransform().invertSelf().multiplySelf(o)),r=l}this.rescaleAndStroke(r,!1),i.restore()}else this.rescaleAndStroke(r,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,Fo.stroke),n&&this.consumePath(e,r,this.current.getClippedPathBoundingBox(na.STROKE,fn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,r){this.stroke(e,r)}fill(e,r,n=!0){var u,c,f;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=a.getPattern(i,this,Cu(i),na.FILL,e),h){const d=new Path2D;d.addPath(r,i.getTransform().invertSelf().multiplySelf(h)),r=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(r,"evenodd"),this.pendingEOFill=!1):i.fill(r)),(c=this.dependencyTracker)==null||c.recordDependencies(e,Fo.fill),o&&(i.restore(),(f=this.dependencyTracker)==null||f.restore(e)),n&&this.consumePath(e,r,l)}eoFill(e,r){this.pendingEOFill=!0,this.fill(e,r)}fillStroke(e,r){this.fill(e,r,!1),this.stroke(e,r,!1),this.consumePath(e,r)}eoFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}closeFillStroke(e,r){this.fillStroke(e,r)}closeEOFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}endPath(e,r){this.consumePath(e,r)}rawFillPath(e,r){var n;this.ctx.fill(r),(n=this.dependencyTracker)==null||n.recordDependencies(e,Fo.rawFillPath).recordOperation(e)}clip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=a_e}eoClip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=T9}beginText(e){var r;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(r=this.dependencyTracker)==null||r.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const r=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;r!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(r!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:s,x:o,y:l,fontSize:u,path:c}of r)c&&i.addPath(c,new DOMMatrix(s).preMultiplySelf(a).translate(o,l).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=r}setWordSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=r}setHScale(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=r/100}setLeading(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-r}setFont(e,r,n){var f,h;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",r,e);const i=this.commonObjs.get(r),a=this.current;if(!i)throw new Error(`Can't find font for ${r}`);if(a.fontMatrix=i.fontMatrix||e3,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Tt("Invalid font matrix for font "+r),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${s}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=n;n<w9?c=w9:n>x9&&(c=x9),this.current.fontSizeScale=n/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=r}setTextRise(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=r}moveText(e,r,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,r,n){this.setLeading(e,-n),this.moveText(e,r,n)}setTextMatrix(e,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=r,n.textMatrixScale=Math.hypot(r[0],r[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var r;this.moveText(e,0,this.current.leading),(r=this.dependencyTracker)==null||r.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,r,n,i,a,s){var y,w,b,A;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,h=c&Ki.FILL_STROKE_MASK,d=!!(c&Ki.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,m=l.patternStroke&&!u.missingFile;let v;if((u.disableFontFace||d||p||m)&&!u.missingFile&&(v=u.getPathGenerator(this.commonObjs,r)),v&&(u.disableFontFace||p||m)){o.save(),o.translate(n,i),o.scale(f,-f),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,u);let x;if(h===Ki.FILL||h===Ki.FILL_STROKE)if(a){x=o.getTransform(),o.setTransform(...a);const _=W(this,du,k3).call(this,v,x,a);o.fill(_)}else o.fill(v);if(h===Ki.STROKE||h===Ki.FILL_STROKE)if(s){x||(x=o.getTransform()),o.setTransform(...s);const{a:_,b:S,c:E,d:T}=x,D=et.inverseTransform(s),N=et.transform([_,S,E,T,0,0],D);et.singularValueDecompose2dScale(N,fo),o.lineWidth*=Math.max(fo[0],fo[1])/f,o.stroke(W(this,du,k3).call(this,v,x,s))}else o.lineWidth/=f,o.stroke(v);o.restore()}else(h===Ki.FILL||h===Ki.FILL_STROKE)&&(o.fillText(r,n,i),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,u,f,n,i,()=>o.measureText(r))),(h===Ki.STROKE||h===Ki.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,u,f,n,i,()=>o.measureText(r)).recordDependencies(e,Fo.stroke)),o.strokeText(r,n,i));d&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:fn(o),x:n,y:i,fontSize:f,path:v}),(A=this.dependencyTracker)==null||A.recordCharacterBBox(e,o,u,f,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const r=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<r.length;i+=4)if(r[i]>0&&r[i]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(e,r){var E,T,D,N;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Fo.showText).resetBBox(e),this.current.textRenderingMode&Ki.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,r),(E=this.dependencyTracker)==null||E.recordShowTextOperation(e);return}const a=n.fontSize;if(a===0){(T=this.dependencyTracker)==null||T.recordOperation(e);return}const s=this.ctx,o=n.fontSizeScale,l=n.charSpacing,u=n.wordSpacing,c=n.fontDirection,f=n.textHScale*c,h=r.length,d=i.vertical,p=d?1:-1,m=i.defaultVMetrics,v=a*n.fontMatrix[0],y=n.textRenderingMode===Ki.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(f,-1):s.scale(f,1);let w,b;if(n.patternFill){s.save();const P=n.fillColor.getPattern(s,this,Cu(s),na.FILL,e);w=fn(s),s.restore(),s.fillStyle=P}if(n.patternStroke){s.save();const P=n.strokeColor.getPattern(s,this,Cu(s),na.STROKE,e);b=fn(s),s.restore(),s.strokeStyle=P}let A=n.lineWidth;const x=n.textMatrixScale;if(x===0||A===0){const P=n.textRenderingMode&Ki.FILL_STROKE_MASK;(P===Ki.STROKE||P===Ki.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=x;if(o!==1&&(s.scale(o,o),A/=o),s.lineWidth=A,i.isInvalidPDFjsFont){const P=[];let M=0;for(const K of r)P.push(K.unicode),M+=K.width;const j=P.join("");if(s.fillText(j,0,0),this.dependencyTracker!==null){const K=s.measureText(j);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=M*v*f,s.restore(),this.compose();return}let _=0,S;for(S=0;S<h;++S){const P=r[S];if(typeof P=="number"){_+=p*P*a/1e3;continue}let M=!1;const j=(P.isSpace?u:0)+l,K=P.fontChar,k=P.accent;let V,q,H=P.width;if(d){const re=P.vmetric||m,L=-(P.vmetric?re[1]:H*.5)*v,ie=re[2]*v;H=re?-re[0]:H,V=L/o,q=(_+ie)/o}else V=_/o,q=0;let te;if(i.remeasure&&H>0){te=s.measureText(K);const re=te.width*1e3/a*o;if(H<re&&this.isFontSubpixelAAEnabled){const L=H/re;M=!0,s.save(),s.scale(L,1),V/=L}else H!==re&&(V+=(H-re)/2e3*a/o)}if(this.contentVisible&&(P.isInFont||i.missingFile)){if(y&&!k)s.fillText(K,V,q),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,s,te?{bbox:null}:i,a/o,V,q,()=>te??s.measureText(K));else if(this.paintChar(e,K,V,q,w,b),k){const re=V+a*k.offset.x/o,L=q-a*k.offset.y/o;this.paintChar(e,k.fontChar,re,L,w,b)}}const ue=d?H*v-j*c:H*v+j*c;_+=ue,M&&s.restore()}d?n.y-=_:n.x+=_*f,s.restore(),this.compose(),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e)}showType3Text(e,r){const n=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,l=a.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,f=i.textHScale*o,h=i.fontMatrix||e3,d=r.length,p=i.textRenderingMode===Ki.INVISIBLE;let m,v,y,w;if(p||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(f,o);const b=this.dependencyTracker;for(this.dependencyTracker=b?new UN(b,e):null,m=0;m<d;++m){if(v=r[m],typeof v=="number"){w=l*v*s/1e3,this.ctx.translate(w,0),i.x+=w*f;continue}const A=(v.isSpace?c:0)+u,x=a.charProcOperatorList[v.operatorListId];x?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(x),this.restore()):Tt(`Type3 character "${v.operatorListId}" is not available.`);const _=[v.width,0];et.applyTransform(_,h),y=_[0]*s+A,n.translate(y,0),i.x+=y*f}n.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,r,n){}setCharWidthAndBounds(e,r,n,i,a,s,o){var u;const l=new Path2D;l.rect(i,a,s-i,o-a),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,s,a,o).recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}getColorN_Pattern(e,r){let n;if(r[0]==="TilingPattern"){const i=this.baseTransform||fn(this.ctx),a={createCanvasGraphics:(s,o)=>new YV(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new UN(this.dependencyTracker,o,!0):null)};n=new M3(r,this.ctx,a,i)}else n=this._getPattern(e,r[1],r[2]);return n}setStrokeColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,r),this.current.patternStroke=!0}setFillColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,r),this.current.patternFill=!0}setStrokeRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=r,this.current.patternStroke=!1}setStrokeTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=r,this.current.patternFill=!1}setFillTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,r,n=null){let i;return this.cachedPatterns.has(r)?i=this.cachedPatterns.get(r):(i=ZAe(this.getObject(e,r)),this.cachedPatterns.set(r,i)),n&&(i.matrix=n),i}shadingFill(e,r){var s;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,r);n.fillStyle=i.getPattern(n,this,Cu(n),na.SHADING,e);const a=Cu(n);if(a){const{width:o,height:l}=n.canvas,u=Wy.slice();et.axialAlignedBoundingBox([0,0,o,l],a,u);const[c,f,h,d]=u;this.ctx.fillRect(c,f,h-c,d-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Fo.transform).recordDependencies(e,Fo.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Lr("Should not call beginInlineImage")}beginImageData(){Lr("Should not call beginImageData")}paintFormXObjectBegin(e,r,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),r&&this.transform(e,...r),this.baseTransform=fn(this.ctx),n)){et.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,s,o,l]=n,u=new Path2D;u.rect(a,s,o-a,l-s),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,o,s,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,r){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;r.isolated||AM("TODO: Support non-isolated groups."),r.knockout&&Tt("Knockout groups not supported.");const i=fn(n);if(r.matrix&&n.transform(...r.matrix),!r.bbox)throw new Error("Bounding box is required.");let a=Wy.slice();et.axialAlignedBoundingBox(r.bbox,fn(n),a);const s=[0,0,n.canvas.width,n.canvas.height];a=et.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),l=Math.floor(a[1]),u=Math.max(Math.ceil(a[2])-o,1),c=Math.max(Math.ceil(a[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let f="groupAt"+this.groupLevel;r.smask&&(f+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(f,u,c),d=h.context;d.translate(-o,-l),d.transform(...i);let p=new Path2D;const[m,v,y,w]=r.bbox;if(p.rect(m,v,y-m,w-v),r.matrix){const A=new Path2D;A.addPath(p,new DOMMatrix(r.matrix)),p=A}d.clip(p),r.smask&&this.smaskStack.push({canvas:h.canvas,context:d,offsetX:o,offsetY:l,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}),(!r.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),Ow(n,d),this.ctx=d,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,r){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),r.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=fn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const o=Wy.slice();et.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],s,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,r,n,i,a,s){if(W(this,du,I3).call(this),ZC(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,et.singularValueDecompose2dScale(fn(this.ctx),fo);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),f=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,f);const{canvas:h,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(r,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(fo[0],0,0,-fo[1],0,l*fo[1]),ZC(this.ctx)}else{ZC(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],o,l),this.ctx.clip(u)}}this.current=new _9(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),W(this,du,O3).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,r){var o;if(!this.contentVisible)return;const n=r.count;r=this.getObject(e,r.data,r),r.count=n;const i=this.ctx,a=this._createMaskCanvas(e,r),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,r,n,i=0,a=0,s,o){var f,h,d;if(!this.contentVisible)return;r=this.getObject(e,r.data,r);const l=this.ctx;l.save();const u=fn(l);l.transform(n,i,a,s,0,0);const c=this._createMaskCanvas(e,r);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let p=0,m=o.length;p<m;p+=2){const v=et.transform(u,[n,i,a,s,o[p],o[p+1]]);l.drawImage(c.canvas,v[4],v[5]),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,v[4],v[4]+c.canvas.width,v[5],v[5]+c.canvas.height)}l.restore(),this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageMaskXObjectGroup(e,r){var s,o,l;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,Fo.transformAndFill);for(const u of r){const{data:c,width:f,height:h,transform:d}=u,p=this.cachedCanvases.getCanvas("maskCanvas",f,h),m=p.context;m.save();const v=this.getObject(e,c,u);S9(m,v),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,Cu(n),na.FILL,e):i,m.fillRect(0,0,f,h),m.restore(),n.save(),n.transform(...d),n.scale(1,-1),QC(n,p.canvas,0,0,f,h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,f,0,h),n.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,r){if(!this.contentVisible)return;const n=this.getObject(e,r);if(!n){Tt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,r,n,i,a){if(!this.contentVisible)return;const s=this.getObject(e,r);if(!s){Tt("Dependent image isn't ready yet");return}const o=s.width,l=s.height,u=[];for(let c=0,f=a.length;c<f;c+=2)u.push({transform:[n,0,0,i,a[c],a[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:r,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(r,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,r){var u;if(!this.contentVisible)return;const n=r.width,i=r.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/n,-1/i);let o;if(r.bitmap)o=this.applyTransferMapsToBitmap(r);else if(typeof HTMLElement=="function"&&r instanceof HTMLElement||!r.data)o=r;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;E9(f,r),o=this.applyTransferMapsToCanvas(f)}const l=this._scaleImage(o,Cu(a));a.imageSmoothingEnabled=C9(fn(a),r.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,Fo.imageXObject).recordOperation(e),QC(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,r,n){var s,o,l;if(!this.contentVisible)return;const i=this.ctx;let a;if(r.bitmap)a=r.bitmap;else{const u=r.width,c=r.height,h=this.cachedCanvases.getCanvas("inlineImage",u,c).context;E9(h,r),a=this.applyTransferMapsToCanvas(h)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),QC(i,a,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var r;this.contentVisible&&((r=this.dependencyTracker)==null||r.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Fo.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,r){}markPointProps(e,r,n){}beginMarkedContent(e,r){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,r,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),r==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var r;(r=this.dependencyTracker)==null||r.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,r,n){var s,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===T9?a.clip(r,"evenodd"):a.clip(r)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=fn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:r,b:n,c:i,d:a}=this.ctx.getTransform();let s,o;if(n===0&&i===0){const l=Math.abs(r),u=Math.abs(a);if(l===u)if(e===0)s=o=1/l;else{const c=l*e;s=o=c<1?1/c:1}else if(e===0)s=1/l,o=1/u;else{const c=l*e,f=u*e;s=c<1?1/c:1,o=f<1?1/f:1}}else{const l=Math.abs(r*a-n*i),u=Math.hypot(r,n),c=Math.hypot(i,a);if(e===0)s=c/l,o=u/l;else{const f=e*l;s=c>f?c/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,r){const{ctx:n,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){n.lineWidth=(i||1)*a,n.stroke(e);return}const o=n.getLineDash();r&&n.save(),n.scale(a,s),kk.a=1/a,kk.d=1/s;const l=new Path2D;if(l.addPath(e,kk),o.length>0){const u=Math.max(a,s);n.setLineDash(o.map(c=>c/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),r&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};du=new WeakSet,I3=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},O3=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const r=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}},k3=function(e,r,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(r)),i};let c0=YV;for(const t in CA)c0.prototype[t]!==void 0&&(c0.prototype[CA[t]]=c0.prototype[t]);var X_,Y_;class rc{static get workerPort(){return g(this,X_)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");R(this,X_,e)}static get workerSrc(){return g(this,Y_)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");R(this,Y_,e)}}X_=new WeakMap,Y_=new WeakMap,$(rc,X_,null),$(rc,Y_,"");var rb,Q_;class s_e{constructor({parsedData:e,rawData:r}){$(this,rb);$(this,Q_);R(this,rb,e),R(this,Q_,r)}getRaw(){return g(this,Q_)}get(e){return g(this,rb).get(e)??null}[Symbol.iterator](){return g(this,rb).entries()}}rb=new WeakMap,Q_=new WeakMap;const wy=Symbol("INTERNAL");var Z_,J_,eE,nb;class o_e{constructor(e,{name:r,intent:n,usage:i,rbGroups:a}){$(this,Z_,!1);$(this,J_,!1);$(this,eE,!1);$(this,nb,!0);R(this,Z_,!!(e&uo.DISPLAY)),R(this,J_,!!(e&uo.PRINT)),this.name=r,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(g(this,eE))return g(this,nb);if(!g(this,nb))return!1;const{print:e,view:r}=this.usage;return g(this,Z_)?(r==null?void 0:r.viewState)!=="OFF":g(this,J_)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,r,n=!1){e!==wy&&Lr("Internal method `_setVisible` called."),R(this,eE,n),R(this,nb,r)}}Z_=new WeakMap,J_=new WeakMap,eE=new WeakMap,nb=new WeakMap;var md,Dr,ib,ab,tE,R3;class l_e{constructor(e,r=uo.DISPLAY){$(this,tE);$(this,md,null);$(this,Dr,new Map);$(this,ib,null);$(this,ab,null);if(this.renderingIntent=r,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,ab,e.order);for(const n of e.groups)g(this,Dr).set(n.id,new o_e(r,n));if(e.baseState==="OFF")for(const n of g(this,Dr).values())n._setVisible(wy,!1);for(const n of e.on)g(this,Dr).get(n)._setVisible(wy,!0);for(const n of e.off)g(this,Dr).get(n)._setVisible(wy,!1);R(this,ib,this.getHash())}}isVisible(e){if(g(this,Dr).size===0)return!0;if(!e)return AM("Optional content group not defined."),!0;if(e.type==="OCG")return g(this,Dr).has(e.id)?g(this,Dr).get(e.id).visible:(Tt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return W(this,tE,R3).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const r of e.ids){if(!g(this,Dr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(g(this,Dr).get(r).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const r of e.ids){if(!g(this,Dr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!g(this,Dr).get(r).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const r of e.ids){if(!g(this,Dr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!g(this,Dr).get(r).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const r of e.ids){if(!g(this,Dr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(g(this,Dr).get(r).visible)return!1}return!0}return Tt(`Unknown optional content policy ${e.policy}.`),!0}return Tt(`Unknown group type ${e.type}.`),!0}setVisibility(e,r=!0,n=!0){var a;const i=g(this,Dr).get(e);if(!i){Tt(`Optional content group not found: ${e}`);return}if(n&&r&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&((a=g(this,Dr).get(o))==null||a._setVisible(wy,!1,!0));i._setVisible(wy,!!r,!0),R(this,md,null)}setOCGState({state:e,preserveRB:r}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=g(this,Dr).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!a.visible,r);break}}R(this,md,null)}get hasInitialVisibility(){return g(this,ib)===null||this.getHash()===g(this,ib)}getOrder(){return g(this,Dr).size?g(this,ab)?g(this,ab).slice():[...g(this,Dr).keys()]:null}getGroup(e){return g(this,Dr).get(e)||null}getHash(){if(g(this,md)!==null)return g(this,md);const e=new kre;for(const[r,n]of g(this,Dr))e.update(`${r}:${n.visible}`);return R(this,md,e.hexdigest())}[Symbol.iterator](){return g(this,Dr).entries()}}md=new WeakMap,Dr=new WeakMap,ib=new WeakMap,ab=new WeakMap,tE=new WeakSet,R3=function(e){const r=e.length;if(r<2)return!0;const n=e[0];for(let i=1;i<r;i++){const a=e[i];let s;if(Array.isArray(a))s=W(this,tE,R3).call(this,a);else if(g(this,Dr).has(a))s=g(this,Dr).get(a).visible;else return Tt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};class u_e{constructor(e,{disableRange:r=!1,disableStream:n=!1}){Jt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(a==null?void 0:a.length)>0){const l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!r,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:r}){const n=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Jt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var r,n,i,a;e.total===void 0?(n=(r=this._rangeReaders[0])==null?void 0:r.onProgress)==null||n.call(r,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const r=this._rangeReaders.indexOf(e);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){Jt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new c_e(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new f_e(this,e,r);return this._pdfDataRangeTransport.requestDataRange(e,r),this._rangeReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class c_e{constructor(e,r,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=n5(i)?i:null,this._queuedChunks=r||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class f_e{constructor(e,r,n){this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function h_e(t){let e=!0,r=n("filename\\*","i").exec(t);if(r){r=r[1];let c=o(r);return c=unescape(c),c=l(c),c=u(c),a(c)}if(r=s(t),r){const c=u(r);return a(c)}if(r=n("filename","i").exec(t),r){r=r[1];let c=o(r);return c=u(c),a(c)}function n(c,f){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(c,f){if(c){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const h=new TextDecoder(c,{fatal:!0}),d=sS(f);f=h.decode(d),e=!1}catch{}}return f}function a(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function s(c){const f=[];let h;const d=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=d.exec(c))!==null;){let[,m,v,y]=h;if(m=parseInt(m,10),m in f){if(m===0)break;continue}f[m]=[v,y]}const p=[];for(let m=0;m<f.length&&m in f;++m){let[v,y]=f[m];y=o(y),v&&(y=unescape(y),m===0&&(y=l(y))),p.push(y)}return p.join("")}function o(c){if(c.startsWith('"')){const f=c.slice(1).split('\\"');for(let h=0;h<f.length;++h){const d=f[h].indexOf('"');d!==-1&&(f[h]=f[h].slice(0,d),f.length=h+1),f[h]=f[h].replaceAll(/\\(.)/g,"$1")}c=f.join('"')}return c}function l(c){const f=c.indexOf("'");if(f===-1)return c;const h=c.slice(0,f),p=c.slice(f+1).replace(/^[^']*'/,"");return i(h,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,h,d,p){if(d==="q"||d==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function Wre(t,e){const r=new Headers;if(!t||!e||typeof e!="object")return r;for(const n in e){const i=e[n];i!==void 0&&r.append(n,i)}return r}function EM(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function Gre({responseHeaders:t,isHttp:e,rangeChunkSize:r,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*r)||n||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Kre(t){const e=t.get("Content-Disposition");if(e){let r=h_e(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch{}if(n5(r))return r}return null}function fS(t,e){return new FN(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function Xre(t){return t===200||t===206}function Yre(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Qre(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Tt(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class d_e{constructor(e){Oe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Wre(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Jt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new p_e(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new m_e(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class p_e{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange;const n=new Headers(e.headers),i=r.url;fetch(i,Yre(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=EM(a.url),!Xre(a.status))throw fS(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:o,suggestedLength:l}=Gre({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=Kre(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new hp("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Qre(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}class m_e{constructor(e,r,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${r}-${n-1}`);const s=i.url;fetch(s,Yre(a,this._withCredentials,this._abortController)).then(o=>{const l=EM(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!Xre(o.status))throw fS(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Qre(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}const Rk=200,Fk=206;function g_e(t){const e=t.response;return typeof e!="string"?e:sS(e).buffer}class v_e{constructor({url:e,httpHeaders:r,withCredentials:n}){Oe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Wre(this.isHttp,r),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const r=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const[a,s]of this.headers)r.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Fk):i.expectedStatus=Rk,r.responseType="arraybuffer",Jt(e.onError,"Expected `onError` callback to be provided."),r.onerror=()=>{e.onError(r.status)},r.onreadystatechange=this.onStateChange.bind(this,n),r.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,r.send(null),n}onProgress(e,r){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,r))}onStateChange(e,r){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||Rk;if(!(a===Rk&&n.expectedStatus===Fk)&&a!==n.expectedStatus){n.onError(i.status);return}const o=g_e(i);if(a===Fk){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(Tt('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const r=this.pendingRequests[e].xhr;delete this.pendingRequests[e],r.abort()}}class y_e{constructor(e){this._source=e,this._manager=new v_e(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const r=this._rangeRequestReaders.indexOf(e);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return Jt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b_e(this._manager,this._source),this._fullRequestReader}getRangeReader(e,r){const n=new w_e(this._manager,e,r);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class b_e{constructor(e,r){this._manager=e,this._url=r.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,r=this._manager.getRequestXhr(e);this._manager._responseOrigin=EM(r.responseURL);const n=r.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=Gre({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Kre(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=fS(e,this._url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var r;(r=this.onProgress)==null||r.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w_e{constructor(e,r,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:r,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var r;const e=EM((r=this._manager.getRequestXhr(this._requestId))==null?void 0:r.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const r=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=fS(e,this._url));for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const x_e=/^[a-z][a-z0-9\-+.]+:/i;function A_e(t){if(x_e.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class __e{constructor(e){this.source=e,this.url=A_e(e.url),Jt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Jt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new E_e(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new S_e(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class E_e{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=fS(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new hp("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class S_e{constructor(e,r,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:r,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kw=Symbol("INITIAL_DATA");var Xs,rE,F3;class Zre{constructor(){$(this,rE);$(this,Xs,Object.create(null))}get(e,r=null){if(r){const i=W(this,rE,F3).call(this,e);return i.promise.then(()=>r(i.data)),null}const n=g(this,Xs)[e];if(!n||n.data===kw)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const r=g(this,Xs)[e];return!!r&&r.data!==kw}delete(e){const r=g(this,Xs)[e];return!r||r.data===kw?!1:(delete g(this,Xs)[e],!0)}resolve(e,r=null){const n=W(this,rE,F3).call(this,e);n.data=r,n.resolve()}clear(){var e;for(const r in g(this,Xs)){const{data:n}=g(this,Xs)[r];(e=n==null?void 0:n.bitmap)==null||e.close()}R(this,Xs,Object.create(null))}*[Symbol.iterator](){for(const e in g(this,Xs)){const{data:r}=g(this,Xs)[e];r!==kw&&(yield[e,r])}}}Xs=new WeakMap,rE=new WeakSet,F3=function(e){var r;return(r=g(this,Xs))[e]||(r[e]={...Promise.withResolvers(),data:kw})};const C_e=1e5,D9=30;var qQ,gd,As,nE,iE,fg,of,aE,sE,hg,sb,ob,vd,lb,oE,ub,dg,lE,uE,cb,pg,cE,yd,fb,fh,Jre,ene,L3,_o,bD,B3,tne,rne;const ni=class ni{constructor({textContentSource:e,container:r,viewport:n}){$(this,fh);$(this,gd,Promise.withResolvers());$(this,As,null);$(this,nE,!1);$(this,iE,!!((qQ=globalThis.FontInspector)!=null&&qQ.enabled));$(this,fg,null);$(this,of,null);$(this,aE,0);$(this,sE,0);$(this,hg,null);$(this,sb,null);$(this,ob,0);$(this,vd,0);$(this,lb,Object.create(null));$(this,oE,[]);$(this,ub,null);$(this,dg,[]);$(this,lE,new WeakMap);$(this,uE,null);var l;if(e instanceof ReadableStream)R(this,ub,e);else if(typeof e=="object")R(this,ub,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');R(this,As,R(this,sb,r)),R(this,vd,n.scale*vc.pixelRatio),R(this,ob,n.rotation),R(this,of,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=n.rawDims;R(this,uE,[1,0,0,-1,-s,o+a]),R(this,sE,i),R(this,aE,a),W(l=ni,_o,tne).call(l),hv(r,n),g(this,gd).promise.finally(()=>{g(ni,fb).delete(this),R(this,of,null),R(this,lb,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:r}=da.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&r?"Calibri, ":""}sans-serif`],["monospace",`${e&&r?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{g(this,hg).read().then(({value:r,done:n})=>{if(n){g(this,gd).resolve();return}g(this,fg)??R(this,fg,r.lang),Object.assign(g(this,lb),r.styles),W(this,fh,Jre).call(this,r.items),e()},g(this,gd).reject)};return R(this,hg,g(this,ub).getReader()),g(ni,fb).add(this),e(),g(this,gd).promise}update({viewport:e,onBefore:r=null}){var a;const n=e.scale*vc.pixelRatio,i=e.rotation;if(i!==g(this,ob)&&(r==null||r(),R(this,ob,i),hv(g(this,sb),{rotation:i})),n!==g(this,vd)){r==null||r(),R(this,vd,n);const s={div:null,properties:null,ctx:W(a=ni,_o,bD).call(a,g(this,fg))};for(const o of g(this,dg))s.properties=g(this,lE).get(o),s.div=o,W(this,fh,L3).call(this,s)}}cancel(){var r;const e=new hp("TextLayer task cancelled.");(r=g(this,hg))==null||r.cancel(e).catch(()=>{}),R(this,hg,null),g(this,gd).reject(e)}get textDivs(){return g(this,dg)}get textContentItemsStr(){return g(this,oE)}static cleanup(){if(!(g(this,fb).size>0)){g(this,cb).clear();for(const{canvas:e}of g(this,pg).values())e.remove();g(this,pg).clear()}}};gd=new WeakMap,As=new WeakMap,nE=new WeakMap,iE=new WeakMap,fg=new WeakMap,of=new WeakMap,aE=new WeakMap,sE=new WeakMap,hg=new WeakMap,sb=new WeakMap,ob=new WeakMap,vd=new WeakMap,lb=new WeakMap,oE=new WeakMap,ub=new WeakMap,dg=new WeakMap,lE=new WeakMap,uE=new WeakMap,cb=new WeakMap,pg=new WeakMap,cE=new WeakMap,yd=new WeakMap,fb=new WeakMap,fh=new WeakSet,Jre=function(e){var i,a;if(g(this,nE))return;(a=g(this,of)).ctx??(a.ctx=W(i=ni,_o,bD).call(i,g(this,fg)));const r=g(this,dg),n=g(this,oE);for(const s of e){if(r.length>C_e){Tt("Ignoring additional textDivs for performance reasons."),R(this,nE,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=g(this,As);R(this,As,document.createElement("span")),g(this,As).classList.add("markedContent"),s.id&&g(this,As).setAttribute("id",`${s.id}`),o.append(g(this,As))}else s.type==="endMarkedContent"&&R(this,As,g(this,As).parentNode);continue}n.push(s.str),W(this,fh,ene).call(this,s)}},ene=function(e){var m;const r=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};g(this,dg).push(r);const i=et.transform(g(this,uE),e.transform);let a=Math.atan2(i[1],i[0]);const s=g(this,lb)[e.fontName];s.vertical&&(a+=Math.PI/2);let o=g(this,iE)&&s.fontSubstitution||s.fontFamily;o=ni.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*W(m=ni,_o,rne).call(m,o,s,g(this,fg));let c,f;a===0?(c=i[4],f=i[5]-u):(c=i[4]+u*Math.sin(a),f=i[5]-u*Math.cos(a));const h="calc(var(--total-scale-factor) *",d=r.style;g(this,As)===g(this,sb)?(d.left=`${(100*c/g(this,sE)).toFixed(2)}%`,d.top=`${(100*f/g(this,aE)).toFixed(2)}%`):(d.left=`${h}${c.toFixed(2)}px)`,d.top=`${h}${f.toFixed(2)}px)`),d.fontSize=`${h}${(g(ni,yd)*l).toFixed(2)}px)`,d.fontFamily=o,n.fontSize=l,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,g(this,iE)&&(r.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);v!==y&&Math.max(v,y)/Math.min(v,y)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),g(this,lE).set(r,n),g(this,of).div=r,g(this,of).properties=n,W(this,fh,L3).call(this,g(this,of)),n.hasText&&g(this,As).append(r),n.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),g(this,As).append(v)}},L3=function(e){var o;const{div:r,properties:n,ctx:i}=e,{style:a}=r;let s="";if(g(ni,yd)>1&&(s=`scale(${1/g(ni,yd)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:u,fontSize:c}=n;W(o=ni,_o,B3).call(o,i,c*g(this,vd),l);const{width:f}=i.measureText(r.textContent);f>0&&(s=`scaleX(${u*g(this,vd)/f}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(a.transform=s)},_o=new WeakSet,bD=function(e=null){let r=g(this,pg).get(e||(e=""));if(!r){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),r=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,pg).set(e,r),g(this,cE).set(r,{size:0,family:""})}return r},B3=function(e,r,n){const i=g(this,cE).get(e);r===i.size&&n===i.family||(e.font=`${r}px ${n}`,i.size=r,i.family=n)},tne=function(){if(g(this,yd)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),R(this,yd,e.getBoundingClientRect().height),e.remove()},rne=function(e,r,n){const i=g(this,cb).get(e);if(i)return i;const a=W(this,_o,bD).call(this,n);a.canvas.width=a.canvas.height=D9,W(this,_o,B3).call(this,a,D9,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+l):(da.platform.isFirefox&&Tt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),r.ascent?u=r.ascent:r.descent&&(u=1+r.descent)),g(this,cb).set(e,u),u},$(ni,_o),$(ni,cb,new Map),$(ni,pg,new Map),$(ni,cE,new WeakMap),$(ni,yd,null),$(ni,fb,new Set);let DA=ni;const T_e=100;function nne(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new $3,{docId:r}=e,n=t.url?kAe(t.url):null,i=t.data?RAe(t.data):null,a=t.httpHeaders||null,s=t.withCredentials===!0,o=t.password??null,l=t.range instanceof ine?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let c=t.worker instanceof NA?t.worker:null;const f=t.verbosity,h=typeof t.docBaseUrl=="string"&&!_M(t.docBaseUrl)?t.docBaseUrl:null,d=GC(t.cMapUrl),p=t.cMapPacked!==!1,m=t.CMapReaderFactory||(Qa?zAe:p9),v=GC(t.iccUrl),y=GC(t.standardFontDataUrl),w=t.StandardFontDataFactory||(Qa?qAe:m9),b=GC(t.wasmUrl),A=t.WasmFactory||(Qa?HAe:g9),x=t.stopAtErrors!==!0,_=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,S=t.isEvalSupported!==!1,E=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!Qa,T=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!Qa&&(da.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,N=typeof t.disableFontFace=="boolean"?t.disableFontFace:Qa,P=t.fontExtraProperties===!0,M=t.enableXfa===!0,j=t.ownerDocument||globalThis.document,K=t.disableRange===!0,k=t.disableStream===!0,V=t.disableAutoFetch===!0,q=t.pdfBug===!0,H=t.CanvasFactory||(Qa?UAe:$Ae),te=t.FilterFactory||(Qa?VAe:jAe),ue=t.enableHWA===!0,re=t.useWasm!==!1,L=l?l.length:t.length??NaN,ie=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!Qa&&!N,X=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(m===p9&&w===m9&&A===g9&&d&&y&&b&&Zw(d,document.baseURI)&&Zw(y,document.baseURI)&&Zw(b,document.baseURI)),pe=null;lAe(f);const de={canvasFactory:new H({ownerDocument:j,enableHWA:ue}),filterFactory:new te({docId:r,ownerDocument:j}),cMapReaderFactory:X?null:new m({baseUrl:d,isCompressed:p}),standardFontDataFactory:X?null:new w({baseUrl:y}),wasmFactory:X?null:new A({baseUrl:b})};c||(c=NA.create({verbosity:f,port:rc.workerPort}),e._worker=c);const ae={docId:r,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:V,rangeChunkSize:u,length:L,docBaseUrl:h,enableXfa:M,evaluatorOptions:{maxImageSize:_,disableFontFace:N,ignoreErrors:x,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:T,canvasMaxAreaInBytes:D,fontExtraProperties:P,useSystemFonts:ie,useWasm:re,useWorkerFetch:X,cMapUrl:d,iccUrl:v,standardFontDataUrl:y,wasmUrl:b}},z={ownerDocument:j,pdfBug:q,styleElement:pe,loadingParams:{disableAutoFetch:V,enableXfa:M}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ne=c.messageHandler.sendWithPromise("GetDocRequest",ae,i?[i.buffer]:null);let fe;if(l)fe=new u_e(l,{disableRange:K,disableStream:k});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Q=Zw(n)?d_e:Qa?__e:y_e;fe=new Q({url:n,length:L,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:K,disableStream:k})}return ne.then(Q=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ye=new sx(r,Q,c.port),me=new P_e(ye,e,fe,z,de,ue);e._transport=me,ye.send("Ready",null)})}).catch(e._capability.reject),e}var zP;const qP=class qP{constructor(){Oe(this,"_capability",Promise.withResolvers());Oe(this,"_transport",null);Oe(this,"_worker",null);Oe(this,"docId",`d${ri(qP,zP)._++}`);Oe(this,"destroyed",!1);Oe(this,"onPassword",null);Oe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,r,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((r=this._transport)==null?void 0:r.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};zP=new WeakMap,$(qP,zP,0);let $3=qP;var mg,fE,hE,dE,pE;class ine{constructor(e,r,n=!1,i=null){$(this,mg,Promise.withResolvers());$(this,fE,[]);$(this,hE,[]);$(this,dE,[]);$(this,pE,[]);this.length=e,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){g(this,pE).push(e)}addProgressListener(e){g(this,dE).push(e)}addProgressiveReadListener(e){g(this,hE).push(e)}addProgressiveDoneListener(e){g(this,fE).push(e)}onDataRange(e,r){for(const n of g(this,pE))n(e,r)}onDataProgress(e,r){g(this,mg).promise.then(()=>{for(const n of g(this,dE))n(e,r)})}onDataProgressiveRead(e){g(this,mg).promise.then(()=>{for(const r of g(this,hE))r(e)})}onDataProgressiveDone(){g(this,mg).promise.then(()=>{for(const e of g(this,fE))e()})}transportReady(){g(this,mg).resolve()}requestDataRange(e,r){Lr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}mg=new WeakMap,fE=new WeakMap,hE=new WeakMap,dE=new WeakMap,pE=new WeakMap;class D_e{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,r){return this._transport.getAnnotationsByType(e,r)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(r)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lf,gg,fx;class N_e{constructor(e,r,n,i=!1){$(this,gg);$(this,lf,!1);this._pageIndex=e,this._pageInfo=r,this._transport=n,this._stats=i?new o9:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Zre,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new lS({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,r)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:r=e.canvas,viewport:n,intent:i="display",annotationMode:a=zh.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:f=null,isEditing:h=!1,recordOperations:d=!1,operationsFilter:p=null}){var T,D,N;(T=this._stats)==null||T.time("Overall");const m=this._transport.getRenderingIntent(i,a,f,h),{renderingIntent:v,cacheKey:y}=m;R(this,lf,!1),l||(l=this._transport.getOptionalContentConfig(v));let w=this._intentStates.get(y);w||(w=Object.create(null),this._intentStates.set(y,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const b=!!(v&uo.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(m));const A=!!(this._pdfBug&&((N=globalThis.StepperManager)!=null&&N.enabled)),x=!this.recordedBBoxes&&(d||A),_=P=>{var M,j;if(w.renderTasks.delete(S),x){const K=(M=S.gfx)==null?void 0:M.dependencyTracker.take();K&&(S.stepper&&S.stepper.setOperatorBBoxes(K,S.gfx.dependencyTracker.takeDebugMetadata()),d&&(this.recordedBBoxes=K))}b&&R(this,lf,!0),W(this,gg,fx).call(this),P?(S.capability.reject(P),this._abortOperatorList({intentState:w,reason:P instanceof Error?P:new Error(P)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new j3({callback:_,params:{canvas:r,canvasContext:e,dependencyTracker:x?new GAe(r,w.operatorList.length,A):null,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(w.renderTasks||(w.renderTasks=new Set)).add(S);const E=S.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([P,M])=>{var j;if(this.destroyed){_();return}if((j=this._stats)==null||j.time("Rendering"),!(M.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:P,optionalContentConfig:M}),S.operatorListChanged()}).catch(_),E}getOperatorList({intent:e="display",annotationMode:r=zh.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const s=this._transport.getRenderingIntent(e,r,n,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:r===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>TA.textContent(n));const r=this.streamTextContent(e);return new Promise(function(n,i){function a(){s.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},i)}const s=r.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const n of r.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),R(this,lf,!1),Promise.all(e)}cleanup(e=!1){R(this,lf,!0);const r=W(this,gg,fx).call(this);return e&&r&&this._stats&&(this._stats=new o9),r}_startRenderPage(e,r){var i,a;const n=this._intentStates.get(r);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,r){for(let n=0,i=e.length;n<i;n++)r.operatorList.fnArray.push(e.fnArray[n]),r.operatorList.argsArray.push(e.argsArray[n]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const n of r.renderTasks)n.operatorListChanged();e.lastChunk&&W(this,gg,fx).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:a,modifiedIds:i},s).getReader(),u=this._intentStates.get(r);u.streamReader=l;const c=()=>{l.read().then(({value:f,done:h})=>{if(h){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),c())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const h of u.renderTasks)h.operatorListChanged();W(this,gg,fx).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};c()}_abortOperatorList({intentState:e,reason:r,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(r instanceof r5){let i=T_e;r.extraDelay>0&&r.extraDelay<1e3&&(i+=r.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:r,force:!0})},i);return}}if(e.streamReader.cancel(new hp(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}lf=new WeakMap,gg=new WeakSet,fx=function(){if(!g(this,lf)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:r}of this._intentStates.values())if(e.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,lf,!1),!0};var bd,Ul,uf,vg,HP,yg,bg,rs,wD,ane,sne,hx,hb,xD;const en=class en{constructor({name:e=null,port:r=null,verbosity:n=uAe()}={}){$(this,rs);$(this,bd,Promise.withResolvers());$(this,Ul,null);$(this,uf,null);$(this,vg,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,r){if(g(en,bg).has(r))throw new Error("Cannot use more than one PDFWorker per port.");g(en,bg).set(r,this),W(this,rs,ane).call(this,r)}else W(this,rs,sne).call(this)}get promise(){return g(this,bd).promise}get port(){return g(this,uf)}get messageHandler(){return g(this,Ul)}destroy(){var e,r;this.destroyed=!0,(e=g(this,vg))==null||e.terminate(),R(this,vg,null),g(en,bg).delete(g(this,uf)),R(this,uf,null),(r=g(this,Ul))==null||r.destroy(),R(this,Ul,null)}static create(e){const r=g(this,bg).get(e==null?void 0:e.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new en(e)}static get workerSrc(){if(rc.workerSrc)return rc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>g(this,hb,xD)?g(this,hb,xD):(await import(this.workerSrc)).WorkerMessageHandler)())}};bd=new WeakMap,Ul=new WeakMap,uf=new WeakMap,vg=new WeakMap,HP=new WeakMap,yg=new WeakMap,bg=new WeakMap,rs=new WeakSet,wD=function(){g(this,bd).resolve(),g(this,Ul).send("configure",{verbosity:this.verbosity})},ane=function(e){R(this,uf,e),R(this,Ul,new sx("main","worker",e)),g(this,Ul).on("ready",()=>{}),W(this,rs,wD).call(this)},sne=function(){if(g(en,yg)||g(en,hb,xD)){W(this,rs,hx).call(this);return}let{workerSrc:e}=en;try{en._isSameOrigin(window.location,e)||(e=en._createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e,{type:"module"}),n=new sx("main","worker",r),i=()=>{a.abort(),n.destroy(),r.terminate(),this.destroyed?g(this,bd).reject(new Error("Worker was destroyed")):W(this,rs,hx).call(this)},a=new AbortController;r.addEventListener("error",()=>{g(this,vg)||i()},{signal:a.signal}),n.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}R(this,Ul,n),R(this,uf,r),R(this,vg,r),W(this,rs,wD).call(this)}),n.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{W(this,rs,hx).call(this)}});const s=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{AM("The worker has been disabled.")}W(this,rs,hx).call(this)},hx=function(){g(en,yg)||(Tt("Setting up fake worker."),R(en,yg,!0)),en._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){g(this,bd).reject(new Error("Worker was destroyed"));return}const r=new BAe;R(this,uf,r);const n=`fake${ri(en,HP)._++}`,i=new sx(n+"_worker",n,r);e.setup(i,r),R(this,Ul,new sx(n,n+"_worker",r)),W(this,rs,wD).call(this)}).catch(e=>{g(this,bd).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},hb=new WeakSet,xD=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},$(en,hb),$(en,HP,0),$(en,yg,!1),$(en,bg,new WeakMap),Qa&&(R(en,yg,!0),rc.workerSrc||(rc.workerSrc="./pdf.worker.mjs")),en._isSameOrigin=(e,r)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(r,n);return n.origin===i.origin},en._createCDNWrapper=e=>{const r=`await import("${e}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))},en.fromPort=e=>{if(xAe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return en.create(e)};let NA=en;var cf,qu,db,pb,ff,wg,dx;class P_e{constructor(e,r,n,i,a,s){$(this,wg);$(this,cf,new Map);$(this,qu,new Map);$(this,db,new Map);$(this,pb,new Map);$(this,ff,null);this.messageHandler=e,this.loadingTask=r,this.commonObjs=new Zre,this.fontLoader=new IAe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new i5)}getRenderingIntent(e,r=zh.ENABLE,n=null,i=!1,a=!1){let s=uo.DISPLAY,o=A3;switch(e){case"any":s=uo.ANY;break;case"display":break;case"print":s=uo.PRINT;break;default:Tt(`getRenderingIntent - invalid intent: ${e}`)}const l=s&uo.PRINT&&n instanceof Fre?n:this.annotationStorage;switch(r){case zh.DISABLE:s+=uo.ANNOTATIONS_DISABLE;break;case zh.ENABLE:break;case zh.ENABLE_FORMS:s+=uo.ANNOTATIONS_FORMS;break;case zh.ENABLE_STORAGE:s+=uo.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Tt(`getRenderingIntent - invalid annotationMode: ${r}`)}i&&(s+=uo.IS_EDITING),a&&(s+=uo.OPLIST);const{ids:u,hash:c}=l.modifiedIds,f=[s,o.hash,c];return{renderingIntent:s,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=g(this,ff))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of g(this,qu).values())e.push(i._destroy());g(this,qu).clear(),g(this,db).clear(),g(this,pb).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),g(this,cf).clear(),this.filterFactory.destroy(),DA.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new hp("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(n,i)=>{Jt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Jt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((o=r.onProgress)==null||o.call(r,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=r.onProgress)==null||u.call(r,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Jt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}Jt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,r._capability.resolve(new D_e(n,this))}),e.on("DocException",n=>{r._capability.reject(gs(n))}),e.on("PasswordRequest",n=>{R(this,ff,Promise.withResolvers());try{if(!r.onPassword)throw gs(n);const i=a=>{a instanceof Error?g(this,ff).reject(a):g(this,ff).resolve({password:a})};r.onPassword(i,n.code)}catch(i){g(this,ff).reject(i)}return g(this,ff).promise}),e.on("DataLoaded",n=>{var i;(i=r.onProgress)==null||i.call(r,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;g(this,qu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const h=a.error;Tt(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const o=new _3(a),l=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,u=new OAe(o,l,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:c}=a;Jt(c,"The imageRef must be defined.");for(const h of g(this,qu).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const f=new E3(a);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,s])=>{var l;if(this.destroyed)return;const o=g(this,qu).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=s==null?void 0:s.bitmap)==null||l.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=r.onProgress)==null||i.call(r,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Tt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},r).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,n=g(this,db).get(r);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&g(this,pb).set(a.refStr,e);const s=new N_e(r,a,this,this._params.pdfBug);return g(this,qu).set(r,s),s});return g(this,db).set(r,i),i}getPageIndex(e){return S3(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return W(this,wg,dx).call(this,"GetFieldObjects")}hasJSActions(){return W(this,wg,dx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,r){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:r})}getDocJSActions(){return W(this,wg,dx).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return W(this,wg,dx).call(this,"GetOptionalContentConfig").then(r=>new l_e(r,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",r=g(this,cf).get(e);if(r)return r;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new s_e(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null,hasStructTree:i[2]}});return g(this,cf).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of g(this,qu).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),g(this,cf).clear(),this.filterFactory.destroy(!0),DA.cleanup()}}cachedPageNumber(e){if(!S3(e))return null;const r=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return g(this,pb).get(r)??null}}cf=new WeakMap,qu=new WeakMap,db=new WeakMap,pb=new WeakMap,ff=new WeakMap,wg=new WeakSet,dx=function(e,r=null){const n=g(this,cf).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,r);return g(this,cf).set(e,i),i};var wd;class M_e{constructor(e){$(this,wd,null);Oe(this,"onContinue",null);Oe(this,"onError",null);R(this,wd,e)}get promise(){return g(this,wd).capability.promise}cancel(e=0){g(this,wd).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=g(this,wd).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=g(this,wd);return e.form||e.canvas&&(r==null?void 0:r.size)>0}}wd=new WeakMap;var xd,xg;const xm=class xm{constructor({callback:e,params:r,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:f=!1,pageColors:h=null,enableHWA:d=!1,operationsFilter:p=null}){$(this,xd,null);this.callback=e,this.params=r,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new M_e(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvas,this._canvasContext=r.canvas?null:r.canvasContext,this._enableHWA=d,this._dependencyTracker=r.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var l,u;if(this.cancelled)return;if(this._canvas){if(g(xm,xg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(xm,xg).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new c0(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,r=0){var n,i,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),g(this,xd)&&(window.cancelAnimationFrame(g(this,xd)),R(this,xd,null)),g(xm,xg).delete(this._canvas),e||(e=new r5(`Rendering cancelled, page ${this._pageIndex+1}`,r)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e,r;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(r=this.stepper)==null||r.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?R(this,xd,window.requestAnimationFrame(()=>{R(this,xd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(xm,xg).delete(this._canvas),this.callback())))}};xd=new WeakMap,xg=new WeakMap,$(xm,xg,new WeakSet);let j3=xm;const I_e="5.4.449",O_e="f44e5f0e6";var Ys,Ag,mb,si,mE,gb,hf,gE,Ad,zl,vE,Pr,V3,U3,z3,fm,one,Ph;const vs=class vs{constructor({editor:e=null,uiManager:r=null}){$(this,Pr);$(this,Ys,null);$(this,Ag,null);$(this,mb);$(this,si,null);$(this,mE,!1);$(this,gb,!1);$(this,hf,null);$(this,gE);$(this,Ad,null);$(this,zl,null);var n,i;e?(R(this,gb,!1),R(this,hf,e)):R(this,gb,!0),R(this,zl,(e==null?void 0:e._uiManager)||r),R(this,gE,g(this,zl)._eventBus),R(this,mb,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=g(this,zl))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),g(vs,vE)||R(vs,vE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new cS([[["Escape","mac+Escape"],vs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vs.prototype._moveToPrevious],[["Home","mac+Home"],vs.prototype._moveToBeginning],[["End","mac+End"],vs.prototype._moveToEnd]]))}renderButton(){const e=R(this,Ys,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",g(this,hf)&&(e.ariaControls=`${g(this,hf).id}_colorpicker_dropdown`);const r=g(this,zl)._signal;e.addEventListener("click",W(this,Pr,fm).bind(this),{signal:r}),e.addEventListener("keydown",W(this,Pr,z3).bind(this),{signal:r});const n=R(this,Ag,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=g(this,mb),e.append(n),e}renderMainDropdown(){const e=R(this,si,W(this,Pr,V3).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===g(this,Ys)){W(this,Pr,fm).call(this,e);return}const r=e.target.getAttribute("data-color");r&&W(this,Pr,U3).call(this,r,e)}_moveToNext(e){var r,n;if(!g(this,Pr,Ph)){W(this,Pr,fm).call(this,e);return}if(e.target===g(this,Ys)){(r=g(this,si).firstElementChild)==null||r.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var r,n;if(e.target===((r=g(this,si))==null?void 0:r.firstElementChild)||e.target===g(this,Ys)){g(this,Pr,Ph)&&this._hideDropdownFromKeyboard();return}g(this,Pr,Ph)||W(this,Pr,fm).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var r;if(!g(this,Pr,Ph)){W(this,Pr,fm).call(this,e);return}(r=g(this,si).firstElementChild)==null||r.focus()}_moveToEnd(e){var r;if(!g(this,Pr,Ph)){W(this,Pr,fm).call(this,e);return}(r=g(this,si).lastElementChild)==null||r.focus()}hideDropdown(){var e,r;(e=g(this,si))==null||e.classList.add("hidden"),g(this,Ys).ariaExpanded="false",(r=g(this,Ad))==null||r.abort(),R(this,Ad,null)}_hideDropdownFromKeyboard(){var e;if(!g(this,gb)){if(!g(this,Pr,Ph)){(e=g(this,hf))==null||e.unselect();return}this.hideDropdown(),g(this,Ys).focus({preventScroll:!0,focusVisible:g(this,mE)})}}updateColor(e){if(g(this,Ag)&&(g(this,Ag).style.backgroundColor=e),!g(this,si))return;const r=g(this,zl).highlightColors.values();for(const n of g(this,si).children)n.ariaSelected=r.next().value===e.toUpperCase()}destroy(){var e,r;(e=g(this,Ys))==null||e.remove(),R(this,Ys,null),R(this,Ag,null),(r=g(this,si))==null||r.remove(),R(this,si,null)}};Ys=new WeakMap,Ag=new WeakMap,mb=new WeakMap,si=new WeakMap,mE=new WeakMap,gb=new WeakMap,hf=new WeakMap,gE=new WeakMap,Ad=new WeakMap,zl=new WeakMap,vE=new WeakMap,Pr=new WeakSet,V3=function(){const e=document.createElement("div"),r=g(this,zl)._signal;e.addEventListener("contextmenu",wl,{signal:r}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),g(this,hf)&&(e.id=`${g(this,hf).id}_colorpicker_dropdown`);for(const[n,i]of g(this,zl).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",g(vs,vE)[n]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===g(this,mb),a.addEventListener("click",W(this,Pr,U3).bind(this,i),{signal:r}),e.append(a)}return e.addEventListener("keydown",W(this,Pr,z3).bind(this),{signal:r}),e},U3=function(e,r){r.stopPropagation(),g(this,gE).dispatch("switchannotationeditorparams",{source:this,type:Zt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},z3=function(e){vs._keyboardManager.exec(this,e)},fm=function(e){if(g(this,Pr,Ph)){this.hideDropdown();return}if(R(this,mE,e.detail===0),g(this,Ad)||(R(this,Ad,new AbortController),window.addEventListener("pointerdown",W(this,Pr,one).bind(this),{signal:g(this,zl).combinedSignal(g(this,Ad))})),g(this,Ys).ariaExpanded="true",g(this,si)){g(this,si).classList.remove("hidden");return}const r=R(this,si,W(this,Pr,V3).call(this));g(this,Ys).append(r)},one=function(e){var r;(r=g(this,si))!=null&&r.contains(e.target)||this.hideDropdown()},Ph=function(){return g(this,si)&&!g(this,si).classList.contains("hidden")},$(vs,vE,null);let zN=vs;var Hu,yE,vb,bE;const Am=class Am{constructor(e){$(this,Hu,null);$(this,yE,null);$(this,vb,null);R(this,yE,e),R(this,vb,e._uiManager),g(Am,bE)||R(Am,bE,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(g(this,Hu))return g(this,Hu);const{editorType:e,colorType:r,color:n}=g(this,yE),i=R(this,Hu,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",g(Am,bE)[e]),i.addEventListener("input",()=>{g(this,vb).updateParams(r,i.value)},{signal:g(this,vb)._signal}),i}update(e){g(this,Hu)&&(g(this,Hu).value=e)}destroy(){var e;(e=g(this,Hu))==null||e.remove(),R(this,Hu,null)}hideDropdown(){}};Hu=new WeakMap,yE=new WeakMap,vb=new WeakMap,bE=new WeakMap,$(Am,bE,null);let qN=Am;function N9(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Rw(t){return Math.max(0,Math.min(255,255*t))}class P9{static CMYK_G([e,r,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*r+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Rw(e),[e,e,e]}static G_HTML([e]){const r=N9(e);return`#${r}${r}${r}`}static RGB_G([e,r,n]){return["G",.3*e+.59*r+.11*n]}static RGB_rgb(e){return e.map(Rw)}static RGB_HTML(e){return`#${e.map(N9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,r,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,r+i)]}static CMYK_rgb([e,r,n,i]){return[Rw(1-Math.min(1,e+i)),Rw(1-Math.min(1,n+i)),Rw(1-Math.min(1,r+i))]}static CMYK_HTML(e){const r=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([e,r,n]){const i=1-e,a=1-r,s=1-n,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class k_e{create(e,r,n=!1){if(e<=0||r<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${r}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${r}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Lr("Abstract method `_createSVG` called.")}}class HN extends k_e{_createSVG(e){return document.createElementNS(Rc,e)}}const R_e=9,pv=new WeakSet,F_e=new Date().getTimezoneOffset()*60*1e3;class Lk{static create(e){switch(e.data.annotationType){case zn.LINK:return new o5(e);case zn.TEXT:return new B_e(e);case zn.WIDGET:switch(e.data.fieldType){case"Tx":return new $_e(e);case"Btn":return e.data.radioButton?new cne(e):e.data.checkBox?new V_e(e):new U_e(e);case"Ch":return new z_e(e);case"Sig":return new j_e(e)}return new Ov(e);case zn.POPUP:return new H3(e);case zn.FREETEXT:return new mne(e);case zn.LINE:return new H_e(e);case zn.SQUARE:return new W_e(e);case zn.CIRCLE:return new G_e(e);case zn.POLYLINE:return new gne(e);case zn.CARET:return new X_e(e);case zn.INK:return new l5(e);case zn.POLYGON:return new K_e(e);case zn.HIGHLIGHT:return new vne(e);case zn.UNDERLINE:return new Y_e(e);case zn.SQUIGGLY:return new Q_e(e);case zn.STRIKEOUT:return new Z_e(e);case zn.STAMP:return new yne(e);case zn.FILEATTACHMENT:return new J_e(e);default:return new mn(e)}}}var _g,yb,el,wE,q3;const QV=class QV{constructor(e,{isRenderable:r=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){$(this,wE);$(this,_g,null);$(this,yb,!1);$(this,el,null);this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,r&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:r}){return!!(e!=null&&e.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return QV._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,r=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return r?r.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:r,inkLists:n,rect:i}=this.data;let a=-1/0,s=-1/0;if((r==null?void 0:r.length)>=8){for(let l=0;l<r.length;l+=8)r[l+1]>s?(s=r[l+1],a=r[l+2]):r[l+1]===s&&(a=Math.max(a,r[l+2]));return[a,s]}if((n==null?void 0:n.length)>=1){for(const l of n)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>s?(s=l[u+1],a=l[u]):l[u+1]===s&&(a=Math.max(a,l[u]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:r},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=r[3]-e[1]+r[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){var r,n,i;const{data:e}=this;return((n=(r=this.annotationStorage.getRawValue(`${SA}${e.id}`))==null?void 0:r.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:r}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(r.id,{popup:n})||this.annotationStorage.setValue(`${SA}${r.id}`,{id:r.id,annotationType:r.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:r.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,r;(r=((e=g(this,el))==null?void 0:e.popup)||this.popup)==null||r.remove(),R(this,el,this.popup=null)}updateEdited(e){var a;if(!this.container)return;e.rect&&(g(this,_g)||R(this,_g,{rect:this.data.rect.slice(0)}));const{rect:r,popup:n}=e;r&&W(this,wE,q3).call(this,r);let i=((a=g(this,el))==null?void 0:a.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=g(this,el).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),R(this,el,null),this.popup=null))}resetEdited(){var e;g(this,_g)&&(W(this,wE,q3).call(this,g(this,_g).rect),(e=g(this,el))==null||e.popup.resetEdited(),R(this,_g,null))}_createContainer(e){const{data:r,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",r.id),!(this instanceof Ov)&&!(this instanceof o5)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,r.alternativeText&&(a.title=r.alternativeText),r.noRotate&&a.classList.add("norotate"),!r.rect||this instanceof H3){const{rotation:m}=r;return!r.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:o,height:l}=this;if(!e&&r.borderStyle.width>0){s.borderWidth=`${r.borderStyle.width}px`;const m=r.borderStyle.horizontalCornerRadius,v=r.borderStyle.verticalCornerRadius;if(m>0||v>0){const w=`calc(${m}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;s.borderRadius=w}else if(this instanceof cne){const w=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=w}switch(r.borderStyle.style){case my.SOLID:s.borderStyle="solid";break;case my.DASHED:s.borderStyle="dashed";break;case my.BEVELED:Tt("Unimplemented border style: beveled");break;case my.INSET:Tt("Unimplemented border style: inset");break;case my.UNDERLINE:s.borderBottomStyle="solid";break}const y=r.borderColor||null;y?(R(this,yb,!0),s.borderColor=et.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}const u=et.normalizeRect([r.rect[0],n.view[3]-r.rect[1]+n.view[1],r.rect[2],n.view[3]-r.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:f,pageX:h,pageY:d}=i.rawDims;s.left=`${100*(u[0]-h)/c}%`,s.top=`${100*(u[1]-d)/f}%`;const{rotation:p}=r;return r.hasOwnCanvas||p===0?(s.width=`${100*o/c}%`,s.height=`${100*l/f}%`):this.setRotation(p,a),a}setRotation(e,r=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),r.style.width=`${100*a/n}%`,r.style.height=`${100*s/i}%`,r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(r,n,i)=>{const a=i.detail[r],s=a[0],o=a.slice(1);i.target.style[n]=P9[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:P9[`${s}_rgb`](o)})};return Dt(this,"_commonActions",{display:r=>{const{display:n}=r.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:n}=r.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)},rotation:r=>{const n=r.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,r){const n=this._commonActions;for(const i of Object.keys(r.detail)){const a=e[i]||n[i];a==null||a(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const n=this._commonActions;for(const[i,a]of Object.entries(r)){const s=n[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete r[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[r,n,i,a]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,v,y,w]=e.subarray(2,6);if(i===m&&a===v&&r===y&&n===w)return}const{style:s}=this.container;let o;if(g(this,yb)){const{borderColor:m,borderWidth:v}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=i-r,u=a-n,{svgFactory:c}=this,f=c.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const h=c.createElement("defs");f.append(h);const d=c.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let m=2,v=e.length;m<v;m+=8){const y=e[m],w=e[m+1],b=e[m+2],A=e[m+3],x=c.createElement("rect"),_=(b-r)/l,S=(a-w)/u,E=(y-b)/l,T=(w-A)/u;x.setAttribute("x",_),x.setAttribute("y",S),x.setAttribute("width",E),x.setAttribute("height",T),d.append(x),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${S}" width="${E}" height="${T}"/>`)}g(this,yb)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:r}=this;let n,i;e?(n={str:e.text},i=e.date):(n=r.contentsObj,i=r.modificationDate),R(this,el,new H3({data:{color:r.color,titleObj:r.titleObj,modificationDate:i,contentsObj:n,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(g(this,el)||this.popup||this.data.popupRef)}get extraPopupElement(){return g(this,el)}render(){Lr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===r)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!pv.has(u)){Tt(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==r&&pv.has(i)&&n.push({id:s,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const r of e)r.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:r,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};_g=new WeakMap,yb=new WeakMap,el=new WeakMap,wE=new WeakSet,q3=function(e){const{container:{style:r},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e),r.left=`${100*(e[0]-o)/a}%`,r.top=`${100*(s-e[3]+l)/s}%`,i===0?(r.width=`${100*(e[2]-e[0])/a}%`,r.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let mn=QV;class L_e extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var mo,hm,lne,une;class o5 extends mn{constructor(r,n=null){super(r,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});$(this,mo);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",r.id);let a=!1;return r.url?(n.addLinkAttributes(i,r.url,r.newWindow),a=!0):r.action?(this._bindNamedAction(i,r.action,r.overlaidText),a=!0):r.attachment?(W(this,mo,lne).call(this,i,r.attachment,r.overlaidText,r.attachmentDest),a=!0):r.setOCGState?(W(this,mo,une).call(this,i,r.setOCGState,r.overlaidText),a=!0):r.dest?(this._bindLink(i,r.dest,r.overlaidText),a=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,r),a=!0),r.resetForm?(this._bindResetFormAction(i,r.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(r,n,i=""){r.href=this.linkService.getDestinationHash(n),r.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&W(this,mo,hm).call(this),i&&(r.title=i)}_bindNamedAction(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(r.title=i),W(this,mo,hm).call(this)}_bindJSAction(r,n){r.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const s=i.get(a);s&&(r[s]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(r.title=n.overlaidText),r.onclick||(r.onclick=()=>!1),W(this,mo,hm).call(this)}_bindResetFormAction(r,n){const i=r.onclick;if(i||(r.href=this.linkService.getAnchorUrl("")),W(this,mo,hm).call(this),!this._fieldObjects){Tt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(r.onclick=()=>!1);return}r.onclick=()=>{var f;i==null||i();const{fields:a,refs:s,include:o}=n,l=[];if(a.length!==0||s.length!==0){const h=new Set(s);for(const d of a){const p=this._fieldObjects[d]||[];for(const{id:m}of p)h.add(m)}for(const d of Object.values(this._fieldObjects))for(const p of d)h.has(p.id)===o&&l.push(p)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const u=this.annotationStorage,c=[];for(const h of l){const{id:d}=h;switch(c.push(d),h.type){case"text":{const m=h.defaultValue||"";u.setValue(d,{value:m});break}case"checkbox":case"radiobutton":{const m=h.defaultValue===h.exportValues;u.setValue(d,{value:m});break}case"combobox":case"listbox":{const m=h.defaultValue||"";u.setValue(d,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${d}"]`);if(p){if(!pv.has(p)){Tt(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}mo=new WeakSet,hm=function(){this.container.setAttribute("data-internal-link","")},lne=function(r,n,i="",a=null){r.href=this.linkService.getAnchorUrl(""),n.description?r.title=n.description:i&&(r.title=i),r.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,a),!1},W(this,mo,hm).call(this)},une=function(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(r.title=i),W(this,mo,hm).call(this)};class B_e extends mn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Ov extends mn{render(){return this.container}showElementAndHideCanvas(e){var r;this.data.hasOwnCanvas&&(((r=e.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return da.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,r,n,i,a){n.includes("mouse")?e.addEventListener(n,s=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{var o;if(n==="blur"){if(!r.focused||!s.relatedTarget)return;r.focused=!1}else if(n==="focus"){if(r.focused)return;r.focused=!0}a&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,r,n,i){var a,s,o;for(const[l,u]of n)(u==="Action"||(a=this.data.actions)!=null&&a[u])&&((u==="Focus"||u==="Blur")&&(r||(r={focused:!1})),this._setEventListener(e,r,l,u,i),u==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,r,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,r,"focus","Focus",null))}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=r===null?"transparent":et.makeHexColor(r[0],r[1],r[2])}_setTextStyle(e){const r=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||R_e,a=e.style;let s;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(Nk*i))||1,f=u/c;s=Math.min(i,l(f/Nk))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,l(u/Nk))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=r[this.data.textAlignment])}_setRequired(e,r){r?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",r)}}class $_e extends Ov{constructor(e){const r=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:r})}setPropertyOnSiblings(e,r,n,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[r]=n),a.setValue(s.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(r,{value:this.data.fieldValue});let o=s.value||"";const l=e.getValue(r,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),pv.add(n),this.contentElement=n,n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",v=>{e.setValue(r,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",v=>{const y=this.data.defaultFieldValue??"";n.value=c.userValue=y,c.formattedValue=null});let m=v=>{const{formattedValue:y}=c;y!=null&&(v.target.value=y),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",y=>{var b;if(c.focused)return;const{target:w}=y;if(p&&(w.type=h,d&&(w.step=d)),c.userValue){const A=c.userValue;if(p)if(h==="time"){const x=new Date(A),_=[x.getHours(),x.getMinutes(),x.getSeconds()];w.value=_.map(S=>S.toString().padStart(2,"0")).join(":")}else w.value=new Date(A-F_e).toISOString().split(h==="date"?"T":".",1)[0];else w.value=A}c.lastCommittedValue=w.value,c.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const w={value(b){c.userValue=b.detail.value??"",p||e.setValue(r,{value:c.userValue.toString()}),b.target.value=c.userValue},formattedValue(b){const{formattedValue:A}=b.detail;c.formattedValue=A,A!=null&&b.target!==document.activeElement&&(b.target.value=A);const x={formattedValue:A};p&&(x.value=A),e.setValue(r,x)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var S;const{charLimit:A}=b.detail,{target:x}=b;if(A===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",A);let _=c.userValue;!_||_.length<=A||(_=_.slice(0,A),x.value=c.userValue=_,e.setValue(r,{value:_}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(w,y)}),n.addEventListener("keydown",y=>{var A;c.commitKey=1;let w=-1;if(y.key==="Escape"?w=0:y.key==="Enter"&&!this.data.multiLine?w=2:y.key==="Tab"&&(c.commitKey=3),w===-1)return;const{value:b}=y.target;c.lastCommittedValue!==b&&(c.lastCommittedValue=b,c.userValue=b,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const v=m;m=null,n.addEventListener("blur",y=>{var A,x;if(!c.focused||!y.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(c.focused=!1);const{target:w}=y;let{value:b}=w;if(p){if(b&&h==="time"){const _=b.split(":").map(S=>parseInt(S,10));b=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();w.type="text"}c.userValue=b,c.lastCommittedValue!==b&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:b,willCommit:!0,commitKey:c.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),v(y)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",y=>{var T;c.lastCommittedValue=null;const{data:w,target:b}=y,{value:A,selectionStart:x,selectionEnd:_}=b;let S=x,E=_;switch(y.inputType){case"deleteWordBackward":{const D=A.substring(0,x).match(/\w*[^\w]*$/);D&&(S-=D[0].length);break}case"deleteWordForward":{const D=A.substring(x).match(/^[^\w]*\w*/);D&&(E+=D[0].length);break}case"deleteContentBackward":x===_&&(S-=1);break;case"deleteContentForward":x===_&&(E+=1);break}y.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:A,change:w||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class j_e extends Ov{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V_e extends Ov{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.exportValue===r.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return pv.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",r.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===r.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=r.defaultFieldValue||"Off";s.target.checked=o===r.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class cne extends Ov{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.fieldValue===r.buttonValue}).value;if(typeof i=="string"&&(i=i!==r.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(r.fieldName,n))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(pv.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=r.defaultFieldValue;s.target.checked=o!=null&&o===r.buttonValue}),this.enableScripting&&this.hasJSActions){const s=r.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=s===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const h=c&&f.id===n;f.domElement&&(f.domElement.checked=h),e.setValue(f.id,{value:h})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class U_e extends o5{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class z_e extends Ov{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,r=this.data.id,n=e.getValue(r,{value:this.data.fieldValue}),i=document.createElement("select");pv.add(i),i.setAttribute("data-element-id",r),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const f=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===f});for(const c of this.data.options){const f=document.createElement("option");f.textContent=c.displayValue,f.value=c.exportValue,n.value.includes(c.exportValue)&&(f.setAttribute("selected",!0),a=!1),i.append(f)}let s=null;if(a){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),s=()=>{c.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=c=>{const f=c?"value":"textContent",{options:h,multiple:d}=i;return d?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[f]):h.selectedIndex===-1?null:h[h.selectedIndex][f]};let l=o(!1);const u=c=>{const f=c.target.options;return Array.prototype.map.call(f,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const f={value(h){s==null||s();const d=h.detail.value,p=new Set(Array.isArray(d)?d:[d]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(r,{value:o(!0)}),l=o(!1)},multipleSelection(h){i.multiple=!0},remove(h){const d=i.options,p=h.detail.remove;d[p].selected=!1,i.remove(p),d.length>0&&Array.prototype.findIndex.call(d,v=>v.selected)===-1&&(d[0].selected=!0),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(r,{value:null,items:[]}),l=o(!1)},insert(h){const{index:d,displayValue:p,exportValue:m}=h.detail.insert,v=i.children[d],y=document.createElement("option");y.textContent=p,y.value=m,v?v.before(y):i.append(y),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},items(h){const{items:d}=h.detail;for(;i.length!==0;)i.remove(0);for(const p of d){const{displayValue:m,exportValue:v}=p,y=document.createElement("option");y.textContent=m,y.value=v,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},indices(h){const d=new Set(h.detail.indices);for(const p of h.target.options)p.selected=d.has(p.index);e.setValue(r,{value:o(!0)}),l=o(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(f,c)}),i.addEventListener("input",c=>{var d;const f=o(!0),h=o(!1);e.setValue(r,{value:f}),c.preventDefault(),(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:l,change:h,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(r,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var xE,W3;class H3 extends mn{constructor(r){const{data:n,elements:i,parent:a}=r,s=!!a._commentManager;super(r,{isRenderable:!s&&mn._hasPopupData(n)});$(this,xE);if(this.elements=i,s&&mn._hasPopupData(n)){const o=this.popup=W(this,xE,W3).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:r}=this;r.classList.add("popupAnnotation"),r.role="comment";const n=this.popup=W(this,xE,W3).call(this),i=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${Hy}${a}`).join(",")),this.container}}xE=new WeakSet,W3=function(){return new q_e({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Qs,_d,WP,GP,bb,wb,_n,Wu,Ed,Eg,xb,Ab,Gu,Zs,df,pf,En,mf,Sd,AE,gf,_b,Sg,Cd,Di,Td,$t,AD,G3,K3,X3,_D,Y3,fne,hne,dne,pne,ED,SD,Q3;class q_e{constructor({container:e,color:r,elements:n,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:u,parentRect:c,open:f,commentManager:h=null}){$(this,$t);$(this,Qs,null);$(this,_d,W(this,$t,dne).bind(this));$(this,WP,W(this,$t,Q3).bind(this));$(this,GP,W(this,$t,SD).bind(this));$(this,bb,W(this,$t,ED).bind(this));$(this,wb,null);$(this,_n,null);$(this,Wu,null);$(this,Ed,null);$(this,Eg,null);$(this,xb,null);$(this,Ab,null);$(this,Gu,!1);$(this,Zs,null);$(this,df,null);$(this,pf,null);$(this,En,null);$(this,mf,null);$(this,Sd,null);$(this,AE,null);$(this,gf,null);$(this,_b,null);$(this,Sg,null);$(this,Cd,!1);$(this,Di,null);$(this,Td,null);R(this,_n,e),R(this,_b,i),R(this,Wu,s),R(this,gf,o),R(this,xb,l),R(this,wb,r),R(this,AE,u),R(this,Ab,c),R(this,Eg,n),R(this,Qs,h),R(this,Di,n[0]),R(this,Ed,LN.toDateObject(a)),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup()),h||(W(this,$t,AD).call(this),g(this,_n).hidden=!0,f&&W(this,$t,ED).call(this))}renderCommentButton(){if(g(this,En)){g(this,En).parentNode||g(this,Di).container.after(g(this,En));return}if(g(this,mf)||W(this,$t,G3).call(this),!g(this,mf))return;const{signal:e}=R(this,df,new AbortController),r=g(this,Di).hasOwnCommentButton,n=()=>{g(this,Qs).toggleCommentPopup(this,!0,void 0,!r)},i=()=>{g(this,Qs).toggleCommentPopup(this,!1,!0,!r)},a=()=>{g(this,Qs).toggleCommentPopup(this,!1,!1)};if(r){R(this,En,g(this,Di).container);for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",g(this,_d),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=R(this,En,document.createElement("button"));s.className="annotationCommentButton";const o=g(this,Di).container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),W(this,$t,X3).call(this),W(this,$t,K3).call(this),s.addEventListener("keydown",g(this,_d),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),o.after(s)}}get commentButtonColor(){const{color:e,opacity:r}=g(this,Di).commentData;return e?g(this,xb)._commentManager.makeCommentColor(e,r):null}focusCommentButton(){setTimeout(()=>{var e;(e=g(this,En))==null||e.focus()},0)}getData(){const{richText:e,color:r,opacity:n,creationDate:i,modificationDate:a}=g(this,Di).commentData;return{contentsObj:{str:this.comment},richText:e,color:r,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return g(this,En)}get comment(){return g(this,Td)||R(this,Td,g(this,Di).commentText),g(this,Td)}set comment(e){e!==this.comment&&(g(this,Di).commentText=R(this,Td,e))}focus(){var e;(e=g(this,Di).container)==null||e.focus()}get parentBoundingClientRect(){return g(this,Di).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:r}){g(this,En)&&(g(this,En).classList.toggle("selected",e),g(this,En).ariaExpanded=r)}setSelectedCommentButton(e){g(this,En).classList.toggle("selected",e)}get commentPopupPosition(){if(g(this,Sd))return g(this,Sd);const{x:e,y:r,height:n}=g(this,En).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=g(this,Di).layer.getBoundingClientRect();return[(e-i)/s,(r+n-a)/o]}set commentPopupPosition(e){R(this,Sd,e)}hasDefaultPopupPosition(){return g(this,Sd)===null}get commentButtonPosition(){return g(this,mf)}get commentButtonWidth(){return g(this,En).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[r,n]=g(this,Sd)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:a,y:s,width:o,height:l}=i;g(this,Qs).showDialog(null,this,a+r*o,s+n*l,{...e,parentDimensions:i})}render(){var n,i;if(g(this,Zs))return;const e=R(this,Zs,document.createElement("div"));if(e.className="popup",g(this,wb)){const a=e.style.outlineColor=et.makeHexColor(...g(this,wb));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const r=document.createElement("span");if(r.className="header",(n=g(this,_b))!=null&&n.str){const a=document.createElement("span");a.className="title",r.append(a),{dir:a.dir,str:a.textContent}=g(this,_b)}if(e.append(r),g(this,Ed)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,Ed).valueOf()})),a.dateTime=g(this,Ed).toISOString(),r.append(a)}tre({html:g(this,$t,_D)||g(this,Wu).str,dir:(i=g(this,Wu))==null?void 0:i.dir,className:"popupContent"},e),g(this,_n).append(e)}updateEdited({rect:e,popup:r,deleted:n}){var i;if(g(this,Qs)){n?(this.remove(),R(this,Td,null)):r&&(r.deleted?this.remove():(W(this,$t,X3).call(this),R(this,Td,r.text))),e&&(R(this,mf,null),W(this,$t,G3).call(this),W(this,$t,K3).call(this));return}if(n||r!=null&&r.deleted){this.remove();return}W(this,$t,AD).call(this),g(this,Sg)||R(this,Sg,{contentsObj:g(this,Wu),richText:g(this,gf)}),e&&R(this,pf,null),r&&r.text&&(R(this,gf,W(this,$t,hne).call(this,r.text)),R(this,Ed,LN.toDateObject(r.date)),R(this,Wu,null)),(i=g(this,Zs))==null||i.remove(),R(this,Zs,null)}resetEdited(){var e;g(this,Sg)&&({contentsObj:ri(this,Wu)._,richText:ri(this,gf)._}=g(this,Sg),R(this,Sg,null),(e=g(this,Zs))==null||e.remove(),R(this,Zs,null),R(this,pf,null))}remove(){var e,r,n;if((e=g(this,df))==null||e.abort(),R(this,df,null),(r=g(this,Zs))==null||r.remove(),R(this,Zs,null),R(this,Cd,!1),R(this,Gu,!1),(n=g(this,En))==null||n.remove(),R(this,En,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){R(this,Cd,this.isVisible),g(this,Cd)&&(g(this,_n).hidden=!0)}maybeShow(){g(this,Qs)||(W(this,$t,AD).call(this),g(this,Cd)&&(g(this,Zs)||W(this,$t,SD).call(this),R(this,Cd,!1),g(this,_n).hidden=!1))}get isVisible(){return g(this,Qs)?!1:g(this,_n).hidden===!1}}Qs=new WeakMap,_d=new WeakMap,WP=new WeakMap,GP=new WeakMap,bb=new WeakMap,wb=new WeakMap,_n=new WeakMap,Wu=new WeakMap,Ed=new WeakMap,Eg=new WeakMap,xb=new WeakMap,Ab=new WeakMap,Gu=new WeakMap,Zs=new WeakMap,df=new WeakMap,pf=new WeakMap,En=new WeakMap,mf=new WeakMap,Sd=new WeakMap,AE=new WeakMap,gf=new WeakMap,_b=new WeakMap,Sg=new WeakMap,Cd=new WeakMap,Di=new WeakMap,Td=new WeakMap,$t=new WeakSet,AD=function(){var r;if(g(this,df))return;R(this,df,new AbortController);const{signal:e}=g(this,df);for(const n of this.trigger)n.addEventListener("click",g(this,bb),{signal:e}),n.addEventListener("pointerenter",g(this,GP),{signal:e}),n.addEventListener("pointerleave",g(this,WP),{signal:e}),n.classList.add("popupTriggerArea");for(const n of g(this,Eg))(r=n.container)==null||r.addEventListener("keydown",g(this,_d),{signal:e})},G3=function(){const e=g(this,Eg).find(r=>r.hasCommentButton);e&&R(this,mf,e._normalizePoint(e.commentButtonPosition))},K3=function(){if(g(this,Di).extraPopupElement&&!g(this,Di).editor)return;g(this,En)||this.renderCommentButton();const[e,r]=g(this,mf),{style:n}=g(this,En);n.left=`calc(${e}%)`,n.top=`calc(${r}% - var(--comment-button-dim))`},X3=function(){g(this,Di).extraPopupElement||(g(this,En)||this.renderCommentButton(),g(this,En).style.backgroundColor=this.commentButtonColor||"")},_D=function(){const e=g(this,gf),r=g(this,Wu);return e!=null&&e.str&&(!(r!=null&&r.str)||r.str===e.str)&&g(this,gf).html||null},Y3=function(){var e,r,n;return((n=(r=(e=g(this,$t,_D))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.fontSize)||0},fne=function(){var e,r,n;return((n=(r=(e=g(this,$t,_D))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.color)||null},hne=function(e){const r=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},i={style:{color:g(this,$t,fne),fontSize:g(this,$t,Y3)?`calc(${g(this,$t,Y3)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))r.push({name:"span",value:a,attributes:i});return n},dne=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&g(this,Gu))&&W(this,$t,ED).call(this)},pne=function(){if(g(this,pf)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:i,pageY:a}}}=g(this,xb);let s=!!g(this,Ab),o=s?g(this,Ab):g(this,AE);for(const p of g(this,Eg))if(!o||et.intersect(p.data.rect,o)!==null){o=p.data.rect,s=!0;break}const l=et.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=s?o[2]-o[0]+5:0,f=l[0]+c,h=l[1];R(this,pf,[100*(f-i)/r,100*(h-a)/n]);const{style:d}=g(this,_n);d.left=`${g(this,pf)[0]}%`,d.top=`${g(this,pf)[1]}%`},ED=function(){if(g(this,Qs)){g(this,Qs).toggleCommentPopup(this,!1);return}R(this,Gu,!g(this,Gu)),g(this,Gu)?(W(this,$t,SD).call(this),g(this,_n).addEventListener("click",g(this,bb)),g(this,_n).addEventListener("keydown",g(this,_d))):(W(this,$t,Q3).call(this),g(this,_n).removeEventListener("click",g(this,bb)),g(this,_n).removeEventListener("keydown",g(this,_d)))},SD=function(){g(this,Zs)||this.render(),this.isVisible?g(this,Gu)&&g(this,_n).classList.add("focused"):(W(this,$t,pne).call(this),g(this,_n).hidden=!1,g(this,_n).style.zIndex=parseInt(g(this,_n).style.zIndex)+1e3)},Q3=function(){g(this,_n).classList.remove("focused"),!(g(this,Gu)||!this.isVisible)&&(g(this,_n).hidden=!0,g(this,_n).style.zIndex=parseInt(g(this,_n).style.zIndex)-1e3)};class mne extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ot.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const r of this.textContent){const n=document.createElement("span");n.textContent=r,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var _E;class H_e extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,_E,null)}render(){this.container.classList.add("lineAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=R(this,_E,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),s.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),s.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),s.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),s.setAttribute("stroke-width",r.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,_E)}addHighlightArea(){this.container.classList.add("highlightArea")}}_E=new WeakMap;var EE;class W_e extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,EE,null)}render(){this.container.classList.add("squareAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=r.borderStyle.width,o=R(this,EE,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",n-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,EE)}addHighlightArea(){this.container.classList.add("highlightArea")}}EE=new WeakMap;var SE;class G_e extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,SE,null)}render(){this.container.classList.add("circleAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=r.borderStyle.width,o=R(this,SE,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,SE)}addHighlightArea(){this.container.classList.add("highlightArea")}}SE=new WeakMap;var CE;class gne extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,CE,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,vertices:n,borderStyle:i,popupRef:a},width:s,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(s,o,!0);let u=[];for(let f=0,h=n.length;f<h;f+=2){const d=n[f]-r[0],p=r[3]-n[f+1];u.push(`${d},${p}`)}u=u.join(" ");const c=R(this,CE,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,CE)}addHighlightArea(){this.container.classList.add("highlightArea")}}CE=new WeakMap;class K_e extends gne{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X_e extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var TE,Cg,DE,Z3;class l5 extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,DE);$(this,TE,null);$(this,Cg,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ot.HIGHLIGHT:Ot.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,rotation:n,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:o,width:l,height:u}=W(this,DE,Z3).call(this,n,r),c=this.svgFactory.create(l,u,!0),f=R(this,TE,this.svgFactory.createElement("svg:g"));c.append(f),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let h=0,d=i.length;h<d;h++){const p=this.svgFactory.createElement(this.svgElementName);g(this,Cg).push(p),p.setAttribute("points",i[h].join(",")),f.append(p)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(r){super.updateEdited(r);const{thickness:n,points:i,rect:a}=r,s=g(this,TE);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let o=0,l=g(this,Cg).length;o<l;o++)g(this,Cg)[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:l,height:u}=W(this,DE,Z3).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return g(this,Cg)}addHighlightArea(){this.container.classList.add("highlightArea")}}TE=new WeakMap,Cg=new WeakMap,DE=new WeakSet,Z3=function(r,n){switch(r){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class vne extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ot.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Y_e extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Q_e extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Z_e extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class yne extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ot.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var NE,PE,J3;class J_e extends mn{constructor(r){var i;super(r,{isRenderable:!0});$(this,PE);$(this,NE,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",W(this,PE,J3).bind(this)),R(this,NE,i);const{isMac:a}=da.platform;return r.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&W(this,PE,J3).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),r.append(i),r}getElementsToTriggerPopup(){return g(this,NE)}addHighlightArea(){this.container.classList.add("highlightArea")}}NE=new WeakMap,PE=new WeakSet,J3=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.content,this.filename)};var Tg,Dg,Eb,Dd,ME,Ng,Js,IE,zf,CD,tL;const ZV=class ZV{constructor({div:e,accessibilityManager:r,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){$(this,zf);$(this,Tg,null);$(this,Dg,null);$(this,Eb,null);$(this,Dd,new Map);$(this,ME,null);$(this,Ng,null);$(this,Js,[]);$(this,IE,!1);this.div=e,R(this,Tg,r),R(this,Dg,n),R(this,ME,o||null),R(this,Ng,u||null),R(this,Eb,c||new i5),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return g(this,Dd).size>0}async render(e){var o;const{annotations:r}=e,n=this.div;hv(n,this.viewport);const i=new Map,a=[],s={data:null,layer:n,linkService:g(this,Ng),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new HN,annotationStorage:g(this,Eb),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of r){if(l.noHTML)continue;const u=l.annotationType===zn.POPUP;if(u){const h=i.get(l.id);if(!h)continue;if(!this._commentManager){a.push(l);continue}s.elements=h}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;s.data=l;const c=Lk.create(s);if(!c.isRenderable)continue;if(!u&&(g(this,Js).push(c),l.popupRef)){const h=i.get(l.popupRef);h?h.push(c):i.set(l.popupRef,[c])}const f=c.render();l.hidden&&(f.style.visibility="hidden"),c._isEditable&&(g(this,Dd).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await W(this,zf,CD).call(this);for(const l of a){const u=s.elements=i.get(l.id);s.data=l;const c=Lk.create(s);if(!c.isRenderable)continue;const f=c.render();c.contentElement.id=`${Hy}${l.id}`,l.hidden&&(f.style.visibility="hidden"),u.at(-1).container.after(f)}W(this,zf,tL).call(this)}async addLinkAnnotations(e){const r={data:null,layer:this.div,linkService:g(this,Ng),svgFactory:new HN,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=ZV._defaultBorderStyle),r.data=n;const i=Lk.create(r);i.isRenderable&&(i.render(),i.contentElement.id=`${Hy}${n.id}`,g(this,Js).push(i))}await W(this,zf,CD).call(this)}update({viewport:e}){const r=this.div;this.viewport=e,hv(r,{rotation:e.rotation}),W(this,zf,tL).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(g(this,Dd).values())}getEditableAnnotation(e){return g(this,Dd).get(e)}addFakeAnnotation(e){const{div:r}=this,{id:n,rotation:i}=e,a=new L_e({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:r,parent:this,enableComment:!!this._commentManager,linkService:g(this,Ng),annotationStorage:g(this,Eb)});return a.render(),a.contentElement.id=`${Hy}${n}`,a.createOrUpdatePopup(),g(this,Js).push(a),a}removeAnnotation(e){var i;const r=g(this,Js).findIndex(a=>a.data.id===e);if(r<0)return;const[n]=g(this,Js).splice(r,1);(i=g(this,Tg))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const r of e)r.updateFakeAnnotationElement(this);W(this,zf,CD).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:my.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Tg=new WeakMap,Dg=new WeakMap,Eb=new WeakMap,Dd=new WeakMap,ME=new WeakMap,Ng=new WeakMap,Js=new WeakMap,IE=new WeakMap,zf=new WeakSet,CD=async function(){var n,i,a;if(g(this,Js).length===0)return;this.div.replaceChildren();const e=[];if(!g(this,IE)){R(this,IE,!0);for(const{contentElement:s,data:{id:o}}of g(this,Js)){const l=s.id=`${Hy}${o}`;e.push((n=g(this,ME))==null?void 0:n.getAriaAttributes(l).then(u=>{if(u)for(const[c,f]of u)s.setAttribute(c,f)}))}}g(this,Js).sort(({data:{rect:[s,o,l,u]}},{data:{rect:[c,f,h,d]}})=>{if(s===l&&o===u)return 1;if(c===h&&f===d)return-1;const p=u,m=o,v=(o+u)/2,y=d,w=f,b=(f+d)/2;if(v>=y&&b<=m)return-1;if(b>=p&&v<=w)return 1;const A=(s+l)/2,x=(c+h)/2;return A-x});const r=document.createDocumentFragment();for(const s of g(this,Js))r.append(s.container),this._commentManager?(a=((i=s.extraPopupElement)==null?void 0:i.popup)||s.popup)==null||a.renderCommentButton():s.extraPopupElement&&r.append(s.extraPopupElement.render());if(this.div.append(r),await Promise.all(e),g(this,Tg))for(const s of g(this,Js))g(this,Tg).addPointerInTextLayer(s.contentElement,!1)},tL=function(){var r;if(!g(this,Dg))return;const e=this.div;for(const[n,i]of g(this,Dg)){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const o=g(this,Dd).get(n);o&&(o._hasNoCanvas?((r=this._annotationEditorUIManager)==null||r.setMissingCanvas(n,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}g(this,Dg).clear()};let eL=ZV;const JC=/\r\n?|\n/g;var eo,OE,Pg,to,ei,bne,wne,xne,TD,qf,DD,ND,Ane,nL,_ne;const Kr=class Kr extends Hr{constructor(r){super({...r,name:"freeTextEditor"});$(this,ei);$(this,eo,"");$(this,OE,`${this.id}-editor`);$(this,Pg,null);$(this,to);Oe(this,"_colorPicker",null);this.color=r.color||Kr._defaultColor||Hr._defaultLineColor,R(this,to,r.fontSize||Kr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const r=Kr.prototype,n=s=>s.isEmpty(),i=dv.TRANSLATE_SMALL,a=dv.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new cS([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(r,n){Hr.initialize(r,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,n){switch(r){case Zt.FREETEXT_SIZE:Kr._defaultFontSize=n;break;case Zt.FREETEXT_COLOR:Kr._defaultColor=n;break}}updateParams(r,n){switch(r){case Zt.FREETEXT_SIZE:W(this,ei,bne).call(this,n);break;case Zt.FREETEXT_COLOR:W(this,ei,wne).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Zt.FREETEXT_SIZE,Kr._defaultFontSize],[Zt.FREETEXT_COLOR,Kr._defaultColor||Hr._defaultLineColor]]}get propertiesToUpdate(){return[[Zt.FREETEXT_SIZE,g(this,to)],[Zt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new qN(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Zt.FREETEXT_COLOR}onUpdatedColor(){var r;this.editorDiv.style.color=this.color,(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_translateEmpty(r,n){this._uiManager.translateSelectedEditors(r,n,!0)}getInitialTranslation(){const r=this.parentScale;return[-Kr._internalPadding*r,-(Kr._internalPadding+g(this,to))*r]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),R(this,Pg,new AbortController);const r=this._uiManager.combinedSignal(g(this,Pg));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:r}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:r}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:r}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:r}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:r}),!0}disableEditMode(){var r;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,OE)),this._isDraggable=!0,(r=g(this,Pg))==null||r.abort(),R(this,Pg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(r){var n;this.width||(this.enableEditMode(),r&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=g(this,eo),n=R(this,eo,W(this,ei,xne).call(this).trimEnd());if(r===n)return;const i=a=>{if(R(this,eo,a),!a){this.remove();return}W(this,ei,ND).call(this),this._uiManager.rebuild(this),W(this,ei,TD).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(r)},mustExec:!1}),W(this,ei,TD).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(r){r.target===this.div&&r.key==="Enter"&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){Kr._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let r,n;(this._isCopy||this.annotationElementId)&&(r=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,OE)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${g(this,to)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,f]=this.pageDimensions,[h,d]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=r+(o[0]-h)/c,m=n+this.height-(o[1]-d)/f;break;case 90:p=r+(o[0]-h)/c,m=n-(o[1]-d)/f,[l,u]=[u,-l];break;case 180:p=r-this.width+(o[0]-h)/c,m=n-(o[1]-d)/f,[l,u]=[-l,-u];break;case 270:p=r+(o[0]-h-this.height*f)/c,m=n+(o[1]-d-this.width*c)/f,[l,u]=[-u,l];break}this.setAt(p*a,m*s,l,u)}else this._moveAfterPaste(r,n);W(this,ei,ND).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(r){var p,m,v;const n=r.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;r.preventDefault();const a=W(p=Kr,qf,nL).call(p,n.getData("text")||"").replaceAll(JC,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(JC,"")),y!==this.editorDiv){let w=c;for(const b of this.editorDiv.childNodes){if(b===y){w=f;continue}w.push(W(m=Kr,qf,DD).call(m,b))}}c.push(l.nodeValue.slice(0,u).replaceAll(JC,""))}else if(l===this.editorDiv){let y=c,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(y=f),y.push(W(v=Kr,qf,DD).call(v,b))}R(this,eo,`${c.join(`
`)}${a}${f.join(`
`)}`),W(this,ei,ND).call(this);const h=new Range;let d=Math.sumPrecise(c.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(d<=w){h.setStart(y,d),h.setEnd(y,d);break}d-=w}s.removeAllRanges(),s.addRange(h)}get contentDiv(){return this.editorDiv}getPDFRect(){const r=Kr._internalPadding*this.parentScale;return this.getRect(r,r)}static async deserialize(r,n,i){var o;let a=null;if(r instanceof mne){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:f,id:h,popupRef:d,richText:p,contentsObj:m,creationDate:v,modificationDate:y},textContent:w,textPosition:b,parent:{page:{pageNumber:A}}}=r;if(!w||w.length===0)return null;a=r={annotationType:Ot.FREETEXT,color:Array.from(u),fontSize:l,value:w.join(`
`),position:b,pageIndex:A-1,rect:c.slice(0),rotation:f,annotationElementId:h,id:h,deleted:!1,popupRef:d,comment:(m==null?void 0:m.str)||null,richText:p,creationDate:v,modificationDate:y}}const s=await super.deserialize(r,n,i);return R(s,to,r.fontSize),s.color=et.makeHexColor(...r.color),R(s,eo,W(o=Kr,qf,nL).call(o,r.value)),s._initialData=a,r.comment&&s.setCommentData(r),s}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Hr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(r),{color:n,fontSize:g(this,to),value:W(this,ei,Ane).call(this)});return this.addComment(i),r?(i.isCopy=!0,i):this.annotationElementId&&!W(this,ei,_ne).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){const n=super.renderAnnotationElement(r);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${g(this,to)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const a of g(this,eo).split(`
`)){const s=document.createElement("div");s.append(a?document.createTextNode(a):document.createElement("br")),n.append(s)}return r.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:g(this,eo)}}),n}resetAnnotationElement(r){super.resetAnnotationElement(r),r.resetEdited()}};eo=new WeakMap,OE=new WeakMap,Pg=new WeakMap,to=new WeakMap,ei=new WeakSet,bne=function(r){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-g(this,to))*this.parentScale),R(this,to,a),W(this,ei,TD).call(this)},i=g(this,to);this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},wne=function(r){const n=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xne=function(){var i;const r=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(r.push(W(i=Kr,qf,DD).call(i,a)),n=a);return r.join(`
`)},TD=function(){const[r,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,o=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/r,this.height=i.height/n):(this.width=i.height/r,this.height=i.width/n),this.fixAndSetPosition()},qf=new WeakSet,DD=function(r){return(r.nodeType===Node.TEXT_NODE?r.nodeValue:r.innerText).replaceAll(JC,"")},ND=function(){if(this.editorDiv.replaceChildren(),!!g(this,eo))for(const r of g(this,eo).split(`
`)){const n=document.createElement("div");n.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(n)}},Ane=function(){return g(this,eo).replaceAll(""," ")},nL=function(r){return r.replaceAll(" ","")},_ne=function(r){const{value:n,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||r.value!==n||r.fontSize!==i||r.color.some((o,l)=>o!==a[l])||r.pageIndex!==s},$(Kr,qf),Oe(Kr,"_freeTextDefaultContent",""),Oe(Kr,"_internalPadding",0),Oe(Kr,"_defaultColor",null),Oe(Kr,"_defaultFontSize",10),Oe(Kr,"_type","freetext"),Oe(Kr,"_editorType",Ot.FREETEXT);let rL=Kr;class Qe{toSVGPath(){Lr("Abstract method `toSVGPath` must be implemented.")}get box(){Lr("Abstract getter `box` must be implemented.")}serialize(e,r){Lr("Abstract method `serialize` must be implemented.")}static _rescale(e,r,n,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=r+e[o]*i,s[o+1]=n+e[o+1]*a;return s}static _rescaleAndSwap(e,r,n,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=r+e[o+1]*i,s[o+1]=n+e[o]*a;return s}static _translate(e,r,n,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=r+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,n,i,a){switch(a){case 90:return[1-r/n,e/i];case 180:return[1-e/n,1-r/i];case 270:return[r/n,1-e/i];default:return[e/n,r/i]}}static _normalizePagePoint(e,r,n){switch(n){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,n,i,a,s){return[(e+5*n)/6,(r+5*i)/6,(5*n+a)/6,(5*i+s)/6,(n+a)/2,(i+s)/2]}}Oe(Qe,"PRECISION",1e-4);var ro,ql,Sb,Cb,Ku,zt,Mg,Ig,kE,RE,Tb,Db,Nd,FE,KP,XP,fi,px,Ene,Sne,Cne,Tne,Dne,Nne;const jc=class jc{constructor({x:e,y:r},n,i,a,s,o=0){$(this,fi);$(this,ro);$(this,ql,[]);$(this,Sb);$(this,Cb);$(this,Ku,[]);$(this,zt,new Float32Array(18));$(this,Mg);$(this,Ig);$(this,kE);$(this,RE);$(this,Tb);$(this,Db);$(this,Nd,[]);R(this,ro,n),R(this,Db,a*i),R(this,Cb,s),g(this,zt).set([NaN,NaN,NaN,NaN,e,r],6),R(this,Sb,o),R(this,RE,g(jc,FE)*i),R(this,kE,g(jc,XP)*i),R(this,Tb,i),g(this,Nd).push(e,r)}isEmpty(){return isNaN(g(this,zt)[8])}add({x:e,y:r}){var T;R(this,Mg,e),R(this,Ig,r);const[n,i,a,s]=g(this,ro);let[o,l,u,c]=g(this,zt).subarray(8,12);const f=e-u,h=r-c,d=Math.hypot(f,h);if(d<g(this,kE))return!1;const p=d-g(this,RE),m=p/d,v=m*f,y=m*h;let w=o,b=l;o=u,l=c,u+=v,c+=y,(T=g(this,Nd))==null||T.push(e,r);const A=-y/p,x=v/p,_=A*g(this,Db),S=x*g(this,Db);return g(this,zt).set(g(this,zt).subarray(2,8),0),g(this,zt).set([u+_,c+S],4),g(this,zt).set(g(this,zt).subarray(14,18),12),g(this,zt).set([u-_,c-S],16),isNaN(g(this,zt)[6])?(g(this,Ku).length===0&&(g(this,zt).set([o+_,l+S],2),g(this,Ku).push(NaN,NaN,NaN,NaN,(o+_-n)/a,(l+S-i)/s),g(this,zt).set([o-_,l-S],14),g(this,ql).push(NaN,NaN,NaN,NaN,(o-_-n)/a,(l-S-i)/s)),g(this,zt).set([w,b,o,l,u,c],6),!this.isEmpty()):(g(this,zt).set([w,b,o,l,u,c],6),Math.abs(Math.atan2(b-l,w-o)-Math.atan2(y,v))<Math.PI/2?([o,l,u,c]=g(this,zt).subarray(2,6),g(this,Ku).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/a,((l+c)/2-i)/s),[o,l,w,b]=g(this,zt).subarray(14,18),g(this,ql).push(NaN,NaN,NaN,NaN,((w+o)/2-n)/a,((b+l)/2-i)/s),!0):([w,b,o,l,u,c]=g(this,zt).subarray(0,6),g(this,Ku).push(((w+5*o)/6-n)/a,((b+5*l)/6-i)/s,((5*o+u)/6-n)/a,((5*l+c)/6-i)/s,((o+u)/2-n)/a,((l+c)/2-i)/s),[u,c,o,l,w,b]=g(this,zt).subarray(12,18),g(this,ql).push(((w+5*o)/6-n)/a,((b+5*l)/6-i)/s,((5*o+u)/6-n)/a,((5*l+c)/6-i)/s,((o+u)/2-n)/a,((l+c)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=g(this,Ku),r=g(this,ql);if(isNaN(g(this,zt)[6])&&!this.isEmpty())return W(this,fi,Ene).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);W(this,fi,Cne).call(this,n);for(let i=r.length-6;i>=6;i-=6)isNaN(r[i])?n.push(`L${r[i+4]} ${r[i+5]}`):n.push(`C${r[i]} ${r[i+1]} ${r[i+2]} ${r[i+3]} ${r[i+4]} ${r[i+5]}`);return W(this,fi,Sne).call(this,n),n.join(" ")}newFreeDrawOutline(e,r,n,i,a,s){return new Pne(e,r,n,i,a,s)}getOutlines(){var f;const e=g(this,Ku),r=g(this,ql),n=g(this,zt),[i,a,s,o]=g(this,ro),l=new Float32Array((((f=g(this,Nd))==null?void 0:f.length)??0)+2);for(let h=0,d=l.length-2;h<d;h+=2)l[h]=(g(this,Nd)[h]-i)/s,l[h+1]=(g(this,Nd)[h+1]-a)/o;if(l[l.length-2]=(g(this,Mg)-i)/s,l[l.length-1]=(g(this,Ig)-a)/o,isNaN(n[6])&&!this.isEmpty())return W(this,fi,Tne).call(this,l);const u=new Float32Array(g(this,Ku).length+24+g(this,ql).length);let c=e.length;for(let h=0;h<c;h+=2){if(isNaN(e[h])){u[h]=u[h+1]=NaN;continue}u[h]=e[h],u[h+1]=e[h+1]}c=W(this,fi,Nne).call(this,u,c);for(let h=r.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(r[h+d])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=r[h+d],u[c+1]=r[h+d+1],c+=2}return W(this,fi,Dne).call(this,u,c),this.newFreeDrawOutline(u,l,g(this,ro),g(this,Tb),g(this,Sb),g(this,Cb))}};ro=new WeakMap,ql=new WeakMap,Sb=new WeakMap,Cb=new WeakMap,Ku=new WeakMap,zt=new WeakMap,Mg=new WeakMap,Ig=new WeakMap,kE=new WeakMap,RE=new WeakMap,Tb=new WeakMap,Db=new WeakMap,Nd=new WeakMap,FE=new WeakMap,KP=new WeakMap,XP=new WeakMap,fi=new WeakSet,px=function(){const e=g(this,zt).subarray(4,6),r=g(this,zt).subarray(16,18),[n,i,a,s]=g(this,ro);return[(g(this,Mg)+(e[0]-r[0])/2-n)/a,(g(this,Ig)+(e[1]-r[1])/2-i)/s,(g(this,Mg)+(r[0]-e[0])/2-n)/a,(g(this,Ig)+(r[1]-e[1])/2-i)/s]},Ene=function(){const[e,r,n,i]=g(this,ro),[a,s,o,l]=W(this,fi,px).call(this);return`M${(g(this,zt)[2]-e)/n} ${(g(this,zt)[3]-r)/i} L${(g(this,zt)[4]-e)/n} ${(g(this,zt)[5]-r)/i} L${a} ${s} L${o} ${l} L${(g(this,zt)[16]-e)/n} ${(g(this,zt)[17]-r)/i} L${(g(this,zt)[14]-e)/n} ${(g(this,zt)[15]-r)/i} Z`},Sne=function(e){const r=g(this,ql);e.push(`L${r[4]} ${r[5]} Z`)},Cne=function(e){const[r,n,i,a]=g(this,ro),s=g(this,zt).subarray(4,6),o=g(this,zt).subarray(16,18),[l,u,c,f]=W(this,fi,px).call(this);e.push(`L${(s[0]-r)/i} ${(s[1]-n)/a} L${l} ${u} L${c} ${f} L${(o[0]-r)/i} ${(o[1]-n)/a}`)},Tne=function(e){const r=g(this,zt),[n,i,a,s]=g(this,ro),[o,l,u,c]=W(this,fi,px).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(r[2]-n)/a,(r[3]-i)/s,NaN,NaN,NaN,NaN,(r[4]-n)/a,(r[5]-i)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(r[16]-n)/a,(r[17]-i)/s,NaN,NaN,NaN,NaN,(r[14]-n)/a,(r[15]-i)/s],0),this.newFreeDrawOutline(f,e,g(this,ro),g(this,Tb),g(this,Sb),g(this,Cb))},Dne=function(e,r){const n=g(this,ql);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],r),r+=6},Nne=function(e,r){const n=g(this,zt).subarray(4,6),i=g(this,zt).subarray(16,18),[a,s,o,l]=g(this,ro),[u,c,f,h]=W(this,fi,px).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/o,(n[1]-s)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,f,h,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l],r),r+=24},$(jc,FE,8),$(jc,KP,2),$(jc,XP,g(jc,FE)+g(jc,KP));let WN=jc;var Nb,Og,vf,LE,no,BE,kn,YP,Mne;class Pne extends Qe{constructor(r,n,i,a,s,o){super();$(this,YP);$(this,Nb);$(this,Og,new Float32Array(4));$(this,vf);$(this,LE);$(this,no);$(this,BE);$(this,kn);R(this,kn,r),R(this,no,n),R(this,Nb,i),R(this,BE,a),R(this,vf,s),R(this,LE,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],W(this,YP,Mne).call(this,o);const[l,u,c,f]=g(this,Og);for(let h=0,d=r.length;h<d;h+=2)r[h]=(r[h]-l)/c,r[h+1]=(r[h+1]-u)/f;for(let h=0,d=n.length;h<d;h+=2)n[h]=(n[h]-l)/c,n[h+1]=(n[h+1]-u)/f}toSVGPath(){const r=[`M${g(this,kn)[4]} ${g(this,kn)[5]}`];for(let n=6,i=g(this,kn).length;n<i;n+=6){if(isNaN(g(this,kn)[n])){r.push(`L${g(this,kn)[n+4]} ${g(this,kn)[n+5]}`);continue}r.push(`C${g(this,kn)[n]} ${g(this,kn)[n+1]} ${g(this,kn)[n+2]} ${g(this,kn)[n+3]} ${g(this,kn)[n+4]} ${g(this,kn)[n+5]}`)}return r.push("Z"),r.join(" ")}serialize([r,n,i,a],s){const o=i-r,l=a-n;let u,c;switch(s){case 0:u=Qe._rescale(g(this,kn),r,a,o,-l),c=Qe._rescale(g(this,no),r,a,o,-l);break;case 90:u=Qe._rescaleAndSwap(g(this,kn),r,n,o,l),c=Qe._rescaleAndSwap(g(this,no),r,n,o,l);break;case 180:u=Qe._rescale(g(this,kn),i,n,-o,l),c=Qe._rescale(g(this,no),i,n,-o,l);break;case 270:u=Qe._rescaleAndSwap(g(this,kn),i,a,-o,-l),c=Qe._rescaleAndSwap(g(this,no),i,a,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return g(this,Og)}newOutliner(r,n,i,a,s,o=0){return new WN(r,n,i,a,s,o)}getNewOutline(r,n){const[i,a,s,o]=g(this,Og),[l,u,c,f]=g(this,Nb),h=s*c,d=o*f,p=i*c+l,m=a*f+u,v=this.newOutliner({x:g(this,no)[0]*h+p,y:g(this,no)[1]*d+m},g(this,Nb),g(this,BE),r,g(this,LE),n??g(this,vf));for(let y=2;y<g(this,no).length;y+=2)v.add({x:g(this,no)[y]*h+p,y:g(this,no)[y+1]*d+m});return v.getOutlines()}}Nb=new WeakMap,Og=new WeakMap,vf=new WeakMap,LE=new WeakMap,no=new WeakMap,BE=new WeakMap,kn=new WeakMap,YP=new WeakSet,Mne=function(r){const n=g(this,kn);let i=n[4],a=n[5];const s=[i,a,i,a];let o=i,l=a,u=i,c=a;const f=r?Math.max:Math.min,h=new Float32Array(4);for(let p=6,m=n.length;p<m;p+=6){const v=n[p+4],y=n[p+5];isNaN(n[p])?(et.pointBoundingBox(v,y,s),l>y?(o=v,l=y):l===y&&(o=f(o,v)),c<y?(u=v,c=y):c===y&&(u=f(u,v))):(h[0]=h[1]=1/0,h[2]=h[3]=-1/0,et.bezierBoundingBox(i,a,...n.slice(p,p+6),h),et.rectBoundingBox(h[0],h[1],h[2],h[3],s),l>h[1]?(o=h[0],l=h[1]):l===h[1]&&(o=f(o,h[0])),c<h[3]?(u=h[2],c=h[3]):c===h[3]&&(u=f(u,h[2]))),i=v,a=y}const d=g(this,Og);d[0]=s[0]-g(this,vf),d[1]=s[1]-g(this,vf),d[2]=s[2]-s[0]+2*g(this,vf),d[3]=s[3]-s[1]+2*g(this,vf),this.firstPoint=[o,l],this.lastPoint=[u,c]};var $E,jE,VE,Pd,Hl,ls,Ine,PD,One,kne,aL;class iL{constructor(e,r=0,n=0,i=!0){$(this,ls);$(this,$E);$(this,jE);$(this,VE);$(this,Pd,[]);$(this,Hl,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:m,y:v,width:y,height:w}of e){const b=Math.floor((m-r)/s)*s,A=Math.ceil((m+y+r)/s)*s,x=Math.floor((v-r)/s)*s,_=Math.ceil((v+w+r)/s)*s,S=[b,x,_,!0],E=[A,x,_,!1];g(this,Pd).push(S,E),et.rectBoundingBox(b,x,A,_,a)}const o=a[2]-a[0]+2*n,l=a[3]-a[1]+2*n,u=a[0]-n,c=a[1]-n;let f=i?-1/0:1/0,h=1/0;const d=g(this,Pd).at(i?-1:-2),p=[d[0],d[2]];for(const m of g(this,Pd)){const[v,y,w,b]=m;!b&&i?y<h?(h=y,f=v):y===h&&(f=Math.max(f,v)):b&&!i&&(y<h?(h=y,f=v):y===h&&(f=Math.min(f,v))),m[0]=(v-u)/o,m[1]=(y-c)/l,m[2]=(w-c)/l}R(this,$E,new Float32Array([u,c,o,l])),R(this,jE,[f,h]),R(this,VE,p)}getOutlines(){g(this,Pd).sort((r,n)=>r[0]-n[0]||r[1]-n[1]||r[2]-n[2]);const e=[];for(const r of g(this,Pd))r[3]?(e.push(...W(this,ls,aL).call(this,r)),W(this,ls,One).call(this,r)):(W(this,ls,kne).call(this,r),e.push(...W(this,ls,aL).call(this,r)));return W(this,ls,Ine).call(this,e)}}$E=new WeakMap,jE=new WeakMap,VE=new WeakMap,Pd=new WeakMap,Hl=new WeakMap,ls=new WeakSet,Ine=function(e){const r=[],n=new Set;for(const s of e){const[o,l,u]=s;r.push([o,l,s],[o,u,s])}r.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=r.length;s<o;s+=2){const l=r[s][2],u=r[s+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let a;for(;n.size>0;){const s=n.values().next().value;let[o,l,u,c,f]=s;n.delete(s);let h=o,d=l;for(a=[o,u],i.push(a);;){let p;if(n.has(c))p=c;else if(n.has(f))p=f;else break;n.delete(p),[o,l,u,c,f]=p,h!==o&&(a.push(h,d,o,d===l?l:u),h=o),d=d===l?u:l}a.push(h,d)}return new eEe(i,g(this,$E),g(this,jE),g(this,VE))},PD=function(e){const r=g(this,Hl);let n=0,i=r.length-1;for(;n<=i;){const a=n+i>>1,s=r[a][0];if(s===e)return a;s<e?n=a+1:i=a-1}return i+1},One=function([,e,r]){const n=W(this,ls,PD).call(this,e);g(this,Hl).splice(n,0,[e,r])},kne=function([,e,r]){const n=W(this,ls,PD).call(this,e);for(let i=n;i<g(this,Hl).length;i++){const[a,s]=g(this,Hl)[i];if(a!==e)break;if(a===e&&s===r){g(this,Hl).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,s]=g(this,Hl)[i];if(a!==e)break;if(a===e&&s===r){g(this,Hl).splice(i,1);return}}},aL=function(e){const[r,n,i]=e,a=[[r,n,i]],s=W(this,ls,PD).call(this,i);for(let o=0;o<s;o++){const[l,u]=g(this,Hl)[o];for(let c=0,f=a.length;c<f;c++){const[,h,d]=a[c];if(!(u<=h||d<=l)){if(h>=l){if(d>u)a[c][1]=u;else{if(f===1)return[];a.splice(c,1),c--,f--}continue}a[c][2]=l,d>u&&a.push([r,u,d])}}}return a};var UE,Pb;class eEe extends Qe{constructor(r,n,i,a){super();$(this,UE);$(this,Pb);R(this,Pb,r),R(this,UE,n),this.firstPoint=i,this.lastPoint=a}toSVGPath(){const r=[];for(const n of g(this,Pb)){let[i,a]=n;r.push(`M${i} ${a}`);for(let s=2;s<n.length;s+=2){const o=n[s],l=n[s+1];o===i?(r.push(`V${l}`),a=l):l===a&&(r.push(`H${o}`),i=o)}r.push("Z")}return r.join(" ")}serialize([r,n,i,a],s){const o=[],l=i-r,u=a-n;for(const c of g(this,Pb)){const f=new Array(c.length);for(let h=0;h<c.length;h+=2)f[h]=r+c[h]*l,f[h+1]=a-c[h+1]*u;o.push(f)}return o}get box(){return g(this,UE)}get classNamesForOutlining(){return["highlightOutline"]}}UE=new WeakMap,Pb=new WeakMap;class sL extends WN{newFreeDrawOutline(e,r,n,i,a,s){return new tEe(e,r,n,i,a,s)}}class tEe extends Pne{newOutliner(e,r,n,i,a,s=0){return new sL(e,r,n,i,a,s)}}var Mb,zE,yf,kg,qE,_s,HE,WE,Rg,io,ao,Zi,Ib,Ob,Pa,kb,tl,GE,Bt,oL,MD,Rne,Fne,Lne,lL,dm,ll,xy,Bne,ID,OD,$ne,jne,Vne,Une,zne;const ur=class ur extends Hr{constructor(r){super({...r,name:"highlightEditor"});$(this,Bt);$(this,Mb,null);$(this,zE,0);$(this,yf);$(this,kg,null);$(this,qE,null);$(this,_s,null);$(this,HE,null);$(this,WE,0);$(this,Rg,null);$(this,io,null);$(this,ao,null);$(this,Zi,!1);$(this,Ib,null);$(this,Ob,null);$(this,Pa,null);$(this,kb,"");$(this,tl);$(this,GE,"");this.color=r.color||ur._defaultColor,R(this,tl,r.thickness||ur._defaultThickness),this.opacity=r.opacity||ur._defaultOpacity,R(this,yf,r.boxes||null),R(this,GE,r.methodOfCreation||""),R(this,kb,r.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",r.highlightId>-1?(R(this,Zi,!0),W(this,Bt,MD).call(this,r),W(this,Bt,dm).call(this)):g(this,yf)&&(R(this,Mb,r.anchorNode),R(this,zE,r.anchorOffset),R(this,HE,r.focusNode),R(this,WE,r.focusOffset),W(this,Bt,oL).call(this),W(this,Bt,dm).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const r=ur.prototype;return Dt(this,"_keyboardManager",new cS([[["ArrowLeft","mac+ArrowLeft"],r._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],r._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],r._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],r._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,Zi)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:g(this,tl),methodOfCreation:g(this,GE)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(r){return{numberOfColors:r.get("color").size}}static initialize(r,n){var i;Hr.initialize(r,n),ur._defaultColor||(ur._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(r,n){switch(r){case Zt.HIGHLIGHT_COLOR:ur._defaultColor=n;break;case Zt.HIGHLIGHT_THICKNESS:ur._defaultThickness=n;break}}translateInPage(r,n){}get toolbarPosition(){return g(this,Ob)}get commentButtonPosition(){return g(this,Ib)}updateParams(r,n){switch(r){case Zt.HIGHLIGHT_COLOR:W(this,Bt,Rne).call(this,n);break;case Zt.HIGHLIGHT_THICKNESS:W(this,Bt,Fne).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Zt.HIGHLIGHT_COLOR,ur._defaultColor],[Zt.HIGHLIGHT_THICKNESS,ur._defaultThickness]]}get propertiesToUpdate(){return[[Zt.HIGHLIGHT_COLOR,this.color||ur._defaultColor],[Zt.HIGHLIGHT_THICKNESS,g(this,tl)||ur._defaultThickness],[Zt.HIGHLIGHT_FREE,g(this,Zi)]]}onUpdatedColor(){var r,n;(r=this.parent)==null||r.drawLayer.updateProperties(g(this,ao),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=g(this,qE))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",R(this,qE,new zN({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(W(this,Bt,OD).call(this))}getBaseTranslation(){return[0,0]}getRect(r,n){return super.getRect(r,n,W(this,Bt,OD).call(this))}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),r&&this.div.focus()}remove(){W(this,Bt,lL).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,Bt,dm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?W(this,Bt,lL).call(this):r&&(W(this,Bt,dm).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),this.show(this._isVisible),n&&this.select()}rotate(r){var a,s,o;const{drawLayer:n}=this.parent;let i;g(this,Zi)?(r=(r-this.rotation+360)%360,i=W(a=ur,ll,xy).call(a,g(this,io).box,r)):i=W(s=ur,ll,xy).call(s,[this.x,this.y,this.width,this.height],r),n.updateProperties(g(this,ao),{bbox:i,root:{"data-main-rotation":r}}),n.updateProperties(g(this,Pa),{bbox:W(o=ur,ll,xy).call(o,g(this,_s).box,r),root:{"data-main-rotation":r}})}render(){if(this.div)return this.div;const r=super.render();g(this,kb)&&(r.setAttribute("aria-label",g(this,kb)),r.setAttribute("role","mark")),g(this,Zi)?r.classList.add("free"):this.div.addEventListener("keydown",W(this,Bt,Bne).bind(this),{signal:this._uiManager._signal});const n=R(this,Rg,document.createElement("div"));return r.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=g(this,kg),this.setDims(),lre(this,g(this,Rg),["pointerover","pointerleave"]),this.enableEditing(),r}pointerover(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!0}})}pointerleave(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!1}})}_moveCaret(r){switch(this.parent.unselect(this),r){case 0:case 2:W(this,Bt,ID).call(this,!0);break;case 1:case 3:W(this,Bt,ID).call(this,!1);break}}select(){var r;super.select(),g(this,Pa)&&((r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var r;super.unselect(),g(this,Pa)&&((r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{selected:!1}}),g(this,Zi)||W(this,Bt,ID).call(this,!1))}get _mustFixPosition(){return!g(this,Zi)}show(r=this._isVisible){super.show(r),this.parent&&(this.parent.drawLayer.updateProperties(g(this,ao),{rootClass:{hidden:!r}}),this.parent.drawLayer.updateProperties(g(this,Pa),{rootClass:{hidden:!r}}))}static startHighlighting(r,n,{target:i,x:a,y:s}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),f=new AbortController,h=r.combinedSignal(f),d=p=>{f.abort(),W(this,ll,Une).call(this,r,p)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Dn,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",wl,{signal:h}),i.addEventListener("pointermove",W(this,ll,Vne).bind(this,r),{signal:h}),this._freeHighlight=new sL({x:a,y:s},[o,l,u,c],r.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(r,n,i){var m,v,y,w;let a=null;if(r instanceof vne){const{data:{quadPoints:b,rect:A,rotation:x,id:_,color:S,opacity:E,popupRef:T,richText:D,contentsObj:N,creationDate:P,modificationDate:M},parent:{page:{pageNumber:j}}}=r;a=r={annotationType:Ot.HIGHLIGHT,color:Array.from(S),opacity:E,quadPoints:b,boxes:null,pageIndex:j-1,rect:A.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,popupRef:T,richText:D,comment:(N==null?void 0:N.str)||null,creationDate:P,modificationDate:M}}else if(r instanceof l5){const{data:{inkLists:b,rect:A,rotation:x,id:_,color:S,borderStyle:{rawWidth:E},popupRef:T,richText:D,contentsObj:N,creationDate:P,modificationDate:M},parent:{page:{pageNumber:j}}}=r;a=r={annotationType:Ot.HIGHLIGHT,color:Array.from(S),thickness:E,inkLists:b,boxes:null,pageIndex:j-1,rect:A.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,popupRef:T,richText:D,comment:(N==null?void 0:N.str)||null,creationDate:P,modificationDate:M}}const{color:s,quadPoints:o,inkLists:l,opacity:u}=r,c=await super.deserialize(r,n,i);c.color=et.makeHexColor(...s),c.opacity=u||1,l&&R(c,tl,r.thickness),c._initialData=a,r.comment&&c.setCommentData(r);const[f,h]=c.pageDimensions,[d,p]=c.pageTranslation;if(o){const b=R(c,yf,[]);for(let A=0;A<o.length;A+=8)b.push({x:(o[A]-d)/f,y:1-(o[A+1]-p)/h,width:(o[A+2]-o[A])/f,height:(o[A+1]-o[A+5])/h});W(m=c,Bt,oL).call(m),W(v=c,Bt,dm).call(v),c.rotate(c.rotation)}else if(l){R(c,Zi,!0);const b=l[0],A={x:b[0]-d,y:h-(b[1]-p)},x=new sL(A,[0,0,f,h],1,g(c,tl)/2,!0,.001);for(let E=0,T=b.length;E<T;E+=2)A.x=b[E]-d,A.y=h-(b[E+1]-p),x.add(A);const{id:_,clipPathId:S}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);W(y=c,Bt,MD).call(y,{highlightOutlines:x.getOutlines(),highlightId:_,clipPathId:S}),W(w=c,Bt,dm).call(w),c.rotate(c.parentRotation)}return c}serialize(r=!1){if(this.isEmpty()||r)return null;if(this.deleted)return this.serializeDeleted();const n=Hr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(r);return Object.assign(i,{color:n,opacity:this.opacity,thickness:g(this,tl),quadPoints:W(this,Bt,$ne).call(this),outlines:W(this,Bt,jne).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!W(this,Bt,zne).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Mb=new WeakMap,zE=new WeakMap,yf=new WeakMap,kg=new WeakMap,qE=new WeakMap,_s=new WeakMap,HE=new WeakMap,WE=new WeakMap,Rg=new WeakMap,io=new WeakMap,ao=new WeakMap,Zi=new WeakMap,Ib=new WeakMap,Ob=new WeakMap,Pa=new WeakMap,kb=new WeakMap,tl=new WeakMap,GE=new WeakMap,Bt=new WeakSet,oL=function(){const r=new iL(g(this,yf),.001);R(this,io,r.getOutlines()),[this.x,this.y,this.width,this.height]=g(this,io).box;const n=new iL(g(this,yf),.0025,.001,this._uiManager.direction==="ltr");R(this,_s,n.getOutlines());const{firstPoint:i}=g(this,io);R(this,Ib,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:a}=g(this,_s);R(this,Ob,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},MD=function({highlightOutlines:r,highlightId:n,clipPathId:i}){var h,d;if(R(this,io,r),R(this,_s,r.getNewOutline(g(this,tl)/2+1.5,.0025)),n>=0)R(this,ao,n),R(this,kg,i),this.parent.drawLayer.finalizeDraw(n,{bbox:r.box,path:{d:r.toSVGPath()}}),R(this,Pa,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:g(this,_s).box,path:{d:g(this,_s).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(g(this,ao),{bbox:W(h=ur,ll,xy).call(h,g(this,io).box,(p-this.rotation+360)%360),path:{d:r.toSVGPath()}}),this.parent.drawLayer.updateProperties(g(this,Pa),{bbox:W(d=ur,ll,xy).call(d,g(this,_s).box,p),path:{d:g(this,_s).toSVGPath()}})}const[s,o,l,u]=r.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-s,this.width=l*m/p,this.height=u*p/m;break}case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=s,this.width=l*m/p,this.height=u*p/m;break}}const{firstPoint:c}=r;R(this,Ib,[(c[0]-s)/l,(c[1]-o)/u]);const{lastPoint:f}=g(this,_s);R(this,Ob,[(f[0]-s)/l,(f[1]-o)/u])},Rne=function(r){const n=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,r,ur._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(r)},!0)},Fne=function(r){const n=g(this,tl),i=a=>{R(this,tl,a),W(this,Bt,Lne).call(this,a)};this.addCommands({cmd:i.bind(this,r),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:r},!0)},Lne=function(r){g(this,Zi)&&(W(this,Bt,MD).call(this,{highlightOutlines:g(this,io).getNewOutline(r/2)}),this.fixAndSetPosition(),this.setDims())},lL=function(){g(this,ao)===null||!this.parent||(this.parent.drawLayer.remove(g(this,ao)),R(this,ao,null),this.parent.drawLayer.remove(g(this,Pa)),R(this,Pa,null))},dm=function(r=this.parent){g(this,ao)===null&&({id:ri(this,ao)._,clipPathId:ri(this,kg)._}=r.drawLayer.draw({bbox:g(this,io).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:g(this,Zi)},path:{d:g(this,io).toSVGPath()}},!1,!0),R(this,Pa,r.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:g(this,Zi)},bbox:g(this,_s).box,path:{d:g(this,_s).toSVGPath()}},g(this,Zi))),g(this,Rg)&&(g(this,Rg).style.clipPath=g(this,kg)))},ll=new WeakSet,xy=function([r,n,i,a],s){switch(s){case 90:return[1-n-a,r,a,i];case 180:return[1-r-i,1-n-a,i,a];case 270:return[n,1-r-i,a,i]}return[r,n,i,a]},Bne=function(r){ur._keyboardManager.exec(this,r)},ID=function(r){if(!g(this,Mb))return;const n=window.getSelection();r?n.setPosition(g(this,Mb),g(this,zE)):n.setPosition(g(this,HE),g(this,WE))},OD=function(){return g(this,Zi)?this.rotation:0},$ne=function(){if(g(this,Zi))return null;const[r,n]=this.pageDimensions,[i,a]=this.pageTranslation,s=g(this,yf),o=new Float32Array(s.length*8);let l=0;for(const{x:u,y:c,width:f,height:h}of s){const d=u*r+i,p=(1-c)*n+a;o[l]=o[l+4]=d,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=d+f*r,o[l+5]=o[l+7]=p-h*n,l+=8}return o},jne=function(r){return g(this,io).serialize(r,W(this,Bt,OD).call(this))},Vne=function(r,n){this._freeHighlight.add(n)&&r.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Une=function(r,n){this._freeHighlight.isEmpty()?r.drawLayer.remove(this._freeHighlightId):r.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},zne=function(r){const{color:n}=this._initialData;return this.hasEditedComment||r.color.some((i,a)=>i!==n[a])},$(ur,ll),Oe(ur,"_defaultColor",null),Oe(ur,"_defaultOpacity",1),Oe(ur,"_defaultThickness",12),Oe(ur,"_type","highlight"),Oe(ur,"_editorType",Ot.HIGHLIGHT),Oe(ur,"_freeHighlightId",-1),Oe(ur,"_freeHighlight",null),Oe(ur,"_freeHighlightClipId","");let GN=ur;var Fg;class qne{constructor(){$(this,Fg,Object.create(null))}updateProperty(e,r){this[e]=r,this.updateSVGProperty(e,r)}updateProperties(e){if(e)for(const[r,n]of Object.entries(e))r.startsWith("_")||this.updateProperty(r,n)}updateSVGProperty(e,r){g(this,Fg)[e]=r}toSVGProperties(){const e=g(this,Fg);return R(this,Fg,Object.create(null)),{root:e}}reset(){R(this,Fg,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Lr("Not implemented")}}Fg=new WeakMap;var so,Rb,Ni,Lg,Bg,ar,uL,cL,fL,mx,Hne,kD,gx,Ay;const Gt=class Gt extends Hr{constructor(r){super(r);$(this,ar);$(this,so,null);$(this,Rb);Oe(this,"_colorPicker",null);Oe(this,"_drawId",null);R(this,Rb,r.mustBeCommitted||!1),this._addOutlines(r)}onUpdatedColor(){var r;(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_addOutlines(r){r.drawOutlines&&(W(this,ar,uL).call(this,r),W(this,ar,mx).call(this))}static _mergeSVGProperties(r,n){const i=new Set(Object.keys(r));for(const[a,s]of Object.entries(n))i.has(a)?Object.assign(r[a],s):r[a]=s;return r}static getDefaultDrawingOptions(r){Lr("Not implemented")}static get typesMap(){Lr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(r,n){const i=this.typesMap.get(r);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(g(Gt,Ni).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(r,n){const i=this.constructor.typesMap.get(r);i&&this._updateProperty(r,i,n)}static get defaultPropertiesToUpdate(){const r=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)r.push([i,n[a]]);return r}get propertiesToUpdate(){const r=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)r.push([i,n[a]]);return r}_updateProperty(r,n,i){const a=this._drawingOptions,s=a[n],o=l=>{var c;a.updateProperty(n,l);const u=g(this,so).updateProperty(n,l);u&&W(this,ar,gx).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),r===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:r,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,so).getPathResizingSVGProperties(W(this,ar,kD).call(this)),{bbox:W(this,ar,Ay).call(this)}))}_onResized(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,so).getPathResizedSVGProperties(W(this,ar,kD).call(this)),{bbox:W(this,ar,Ay).call(this)}))}_onTranslating(r,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:W(this,ar,Ay).call(this)})}_onTranslated(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,so).getPathTranslatedSVGProperties(W(this,ar,kD).call(this),this.parentDimensions),{bbox:W(this,ar,Ay).call(this)}))}_onStartDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,g(this,Rb)&&(R(this,Rb,!1),this.commit(),this.parent.setSelected(this),r&&this.isOnScreen&&this.div.focus())}remove(){W(this,ar,fL).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,ar,mx).call(this),W(this,ar,gx).call(this,g(this,so).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?(this._uiManager.removeShouldRescale(this),W(this,ar,fL).call(this)):r&&(this._uiManager.addShouldRescale(this),W(this,ar,mx).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties({bbox:W(this,ar,Ay).call(this)},g(this,so).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&W(this,ar,gx).call(this,g(this,so).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let r,n;this._isCopy&&(r=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(r,n),i}static createDrawerInstance(r,n,i,a,s){Lr("Not implemented")}static startDrawing(r,n,i,a){var v;const{target:s,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=a;if(Sa.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:f}}=r,{width:h,height:d}=s.getBoundingClientRect(),p=R(Gt,Lg,new AbortController),m=r.combinedSignal(p);if(Sa.setPointer(c,u),window.addEventListener("pointerup",y=>{Sa.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:m}),window.addEventListener("pointercancel",y=>{Sa.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener("pointerdown",y=>{Sa.isSamePointerType(y.pointerType)&&(Sa.initializeAndAddPointerId(y.pointerId),g(Gt,Ni).isCancellable()&&(g(Gt,Ni).removeLastElement(),g(Gt,Ni).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",wl,{signal:m}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),s.addEventListener("touchmove",y=>{Sa.isSameTimeStamp(y.timeStamp)&&Dn(y)},{signal:m}),r.toggleDrawing(),(v=n._editorUndoBar)==null||v.hide(),g(Gt,Ni)){r.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ni).startNew(o,l,h,d,f));return}n.updateUIForDefaultProperties(this),R(Gt,Ni,this.createDrawerInstance(o,l,h,d,f)),R(Gt,Bg,this.getDefaultDrawingOptions()),this._currentParent=r,{id:this._currentDrawId}=r.drawLayer.draw(this._mergeSVGProperties(g(Gt,Bg).toSVGProperties(),g(Gt,Ni).defaultSVGProperties),!0,!1)}static _drawMove(r){if(Sa.isSameTimeStamp(r.timeStamp),!g(Gt,Ni))return;const{offsetX:n,offsetY:i,pointerId:a}=r;if(Sa.isSamePointerId(a)){if(Sa.isUsingMultiplePointers()){this._endDraw(r);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ni).add(n,i)),Sa.setTimeStamp(r.timeStamp),Dn(r)}}static _cleanup(r){r&&(this._currentDrawId=-1,this._currentParent=null,R(Gt,Ni,null),R(Gt,Bg,null),Sa.clearPointerType(),Sa.clearTimeStamp()),g(Gt,Lg)&&(g(Gt,Lg).abort(),R(Gt,Lg,null),Sa.clearPointerIds())}static _endDraw(r){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(r==null?void 0:r.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ni).end(r.offsetX,r.offsetY)),this.supportMultipleDrawings){const i=g(Gt,Ni),a=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Zt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(r){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Zt.DRAW_STEP),!g(Gt,Ni).isEmpty()){const{pageDimensions:[i,a],scale:s}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:g(Gt,Ni).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:g(Gt,Bg),mustBeCommitted:!r});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(r){}static deserializeDraw(r,n,i,a,s,o){Lr("Not implemented")}static async deserialize(r,n,i){var f,h;const{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,a,s,this._INNER_MARGIN,r),c=await super.deserialize(r,n,i);return c.createDrawingOptions(r),W(f=c,ar,uL).call(f,{drawOutlines:u}),W(h=c,ar,mx).call(h),c.onScaleChanging(),c.rotate(),c}serializeDraw(r){const[n,i]=this.pageTranslation,[a,s]=this.pageDimensions;return g(this,so).serialize([n,i,a,s],r)}renderAnnotationElement(r){return r.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};so=new WeakMap,Rb=new WeakMap,Ni=new WeakMap,Lg=new WeakMap,Bg=new WeakMap,ar=new WeakSet,uL=function({drawOutlines:r,drawId:n,drawingOptions:i}){R(this,so,r),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,r.defaultProperties)):this._drawId=W(this,ar,cL).call(this,r,this.parent),W(this,ar,gx).call(this,r.box)},cL=function(r,n){const{id:i}=n.drawLayer.draw(Gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),r.defaultSVGProperties),!1,!1);return i},fL=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},mx=function(r=this.parent){if(!(this._drawId!==null&&this.parent===r)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,r.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=W(this,ar,cL).call(this,g(this,so),r)}},Hne=function([r,n,i,a]){const{parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[n,1-r,i*(o/s),a*(s/o)];case 180:return[1-r,1-n,i,a];case 270:return[1-n,r,i*(o/s),a*(s/o)];default:return[r,n,i,a]}},kD=function(){const{x:r,y:n,width:i,height:a,parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[1-n,r,i*(s/o),a*(o/s)];case 180:return[1-r,1-n,i,a];case 270:return[n,1-r,i*(s/o),a*(o/s)];default:return[r,n,i,a]}},gx=function(r){[this.x,this.y,this.width,this.height]=W(this,ar,Hne).call(this,r),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ay=function(){const{x:r,y:n,width:i,height:a,rotation:s,parentRotation:o,parentDimensions:[l,u]}=this;switch((s*4+o)/90){case 1:return[1-n-a,r,a,i];case 2:return[1-r-i,1-n-a,i,a];case 3:return[n,1-r-i,a,i];case 4:return[r,n-i*(l/u),a*(u/l),i*(l/u)];case 5:return[1-n,r,i*(l/u),a*(u/l)];case 6:return[1-r-a*(u/l),1-n,a*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-r-a*(u/l),i*(l/u),a*(u/l)];case 8:return[r-i,n-a,i,a];case 9:return[1-n,r-i,a,i];case 10:return[1-r,1-n,i,a];case 11:return[n-a,1-r,a,i];case 12:return[r-a*(u/l),n,a*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),r-a*(u/l),i*(l/u),a*(u/l)];case 14:return[1-r,1-n-i*(l/u),a*(u/l),i*(l/u)];case 15:return[n,1-r,i*(l/u),a*(u/l)];default:return[r,n,i,a]}},Oe(Gt,"_currentDrawId",-1),Oe(Gt,"_currentParent",null),$(Gt,Ni,null),$(Gt,Lg,null),$(Gt,Bg,null),Oe(Gt,"_INNER_MARGIN",3);let KN=Gt;var Xu,Pi,Mi,$g,Fb,Ka,Ji,rl,jg,Vg,Ug,Lb,RD;class rEe{constructor(e,r,n,i,a,s){$(this,Lb);$(this,Xu,new Float64Array(6));$(this,Pi);$(this,Mi);$(this,$g);$(this,Fb);$(this,Ka);$(this,Ji,"");$(this,rl,0);$(this,jg,new hS);$(this,Vg);$(this,Ug);R(this,Vg,n),R(this,Ug,i),R(this,$g,a),R(this,Fb,s),[e,r]=W(this,Lb,RD).call(this,e,r);const o=R(this,Pi,[NaN,NaN,NaN,NaN,e,r]);R(this,Ka,[e,r]),R(this,Mi,[{line:o,points:g(this,Ka)}]),g(this,Xu).set(o,0)}updateProperty(e,r){e==="stroke-width"&&R(this,Fb,r)}isEmpty(){return!g(this,Mi)||g(this,Mi).length===0}isCancellable(){return g(this,Ka).length<=10}add(e,r){[e,r]=W(this,Lb,RD).call(this,e,r);const[n,i,a,s]=g(this,Xu).subarray(2,6),o=e-a,l=r-s;return Math.hypot(g(this,Vg)*o,g(this,Ug)*l)<=2?null:(g(this,Ka).push(e,r),isNaN(n)?(g(this,Xu).set([a,s,e,r],2),g(this,Pi).push(NaN,NaN,NaN,NaN,e,r),{path:{d:this.toSVGPath()}}):(isNaN(g(this,Xu)[0])&&g(this,Pi).splice(6,6),g(this,Xu).set([n,i,a,s,e,r],0),g(this,Pi).push(...Qe.createBezierPoints(n,i,a,s,e,r)),{path:{d:this.toSVGPath()}}))}end(e,r){const n=this.add(e,r);return n||(g(this,Ka).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,r,n,i,a){R(this,Vg,n),R(this,Ug,i),R(this,$g,a),[e,r]=W(this,Lb,RD).call(this,e,r);const s=R(this,Pi,[NaN,NaN,NaN,NaN,e,r]);R(this,Ka,[e,r]);const o=g(this,Mi).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),g(this,Mi).push({line:s,points:g(this,Ka)}),g(this,Xu).set(s,0),R(this,rl,0),this.toSVGPath(),null}getLastElement(){return g(this,Mi).at(-1)}setLastElement(e){return g(this,Mi)?(g(this,Mi).push(e),R(this,Pi,e.line),R(this,Ka,e.points),R(this,rl,0),{path:{d:this.toSVGPath()}}):g(this,jg).setLastElement(e)}removeLastElement(){if(!g(this,Mi))return g(this,jg).removeLastElement();g(this,Mi).pop(),R(this,Ji,"");for(let e=0,r=g(this,Mi).length;e<r;e++){const{line:n,points:i}=g(this,Mi)[e];R(this,Pi,n),R(this,Ka,i),R(this,rl,0),this.toSVGPath()}return{path:{d:g(this,Ji)}}}toSVGPath(){const e=Qe.svgRound(g(this,Pi)[4]),r=Qe.svgRound(g(this,Pi)[5]);if(g(this,Ka).length===2)return R(this,Ji,`${g(this,Ji)} M ${e} ${r} Z`),g(this,Ji);if(g(this,Ka).length<=6){const i=g(this,Ji).lastIndexOf("M");R(this,Ji,`${g(this,Ji).slice(0,i)} M ${e} ${r}`),R(this,rl,6)}if(g(this,Ka).length===4){const i=Qe.svgRound(g(this,Pi)[10]),a=Qe.svgRound(g(this,Pi)[11]);return R(this,Ji,`${g(this,Ji)} L ${i} ${a}`),R(this,rl,12),g(this,Ji)}const n=[];g(this,rl)===0&&(n.push(`M ${e} ${r}`),R(this,rl,6));for(let i=g(this,rl),a=g(this,Pi).length;i<a;i+=6){const[s,o,l,u,c,f]=g(this,Pi).slice(i,i+6).map(Qe.svgRound);n.push(`C${s} ${o} ${l} ${u} ${c} ${f}`)}return R(this,Ji,g(this,Ji)+n.join(" ")),R(this,rl,g(this,Pi).length),g(this,Ji)}getOutlines(e,r,n,i){const a=g(this,Mi).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),g(this,jg).build(g(this,Mi),e,r,n,g(this,$g),g(this,Fb),i),R(this,Xu,null),R(this,Pi,null),R(this,Mi,null),R(this,Ji,null),g(this,jg)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Xu=new WeakMap,Pi=new WeakMap,Mi=new WeakMap,$g=new WeakMap,Fb=new WeakMap,Ka=new WeakMap,Ji=new WeakMap,rl=new WeakMap,jg=new WeakMap,Vg=new WeakMap,Ug=new WeakMap,Lb=new WeakSet,RD=function(e,r){return Qe._normalizePoint(e,r,g(this,Vg),g(this,Ug),g(this,$g))};var Xa,KE,XE,oo,Yu,Qu,Bb,$b,zg,aa,Lc,Wne,Gne,Kne;class hS extends Qe{constructor(){super(...arguments);$(this,aa);$(this,Xa);$(this,KE,0);$(this,XE);$(this,oo);$(this,Yu);$(this,Qu);$(this,Bb);$(this,$b);$(this,zg)}build(r,n,i,a,s,o,l){R(this,Yu,n),R(this,Qu,i),R(this,Bb,a),R(this,$b,s),R(this,zg,o),R(this,XE,l??0),R(this,oo,r),W(this,aa,Gne).call(this)}get thickness(){return g(this,zg)}setLastElement(r){return g(this,oo).push(r),{path:{d:this.toSVGPath()}}}removeLastElement(){return g(this,oo).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const r=[];for(const{line:n}of g(this,oo)){if(r.push(`M${Qe.svgRound(n[4])} ${Qe.svgRound(n[5])}`),n.length===6){r.push("Z");continue}if(n.length===12&&isNaN(n[6])){r.push(`L${Qe.svgRound(n[10])} ${Qe.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[s,o,l,u,c,f]=n.subarray(i,i+6).map(Qe.svgRound);r.push(`C${s} ${o} ${l} ${u} ${c} ${f}`)}}return r.join("")}serialize([r,n,i,a],s){const o=[],l=[],[u,c,f,h]=W(this,aa,Wne).call(this);let d,p,m,v,y,w,b,A,x;switch(g(this,$b)){case 0:x=Qe._rescale,d=r,p=n+a,m=i,v=-a,y=r+u*i,w=n+(1-c-h)*a,b=r+(u+f)*i,A=n+(1-c)*a;break;case 90:x=Qe._rescaleAndSwap,d=r,p=n,m=i,v=a,y=r+c*i,w=n+u*a,b=r+(c+h)*i,A=n+(u+f)*a;break;case 180:x=Qe._rescale,d=r+i,p=n,m=-i,v=a,y=r+(1-u-f)*i,w=n+c*a,b=r+(1-u)*i,A=n+(c+h)*a;break;case 270:x=Qe._rescaleAndSwap,d=r+i,p=n+a,m=-i,v=-a,y=r+(1-c-h)*i,w=n+(1-u-f)*a,b=r+(1-c)*i,A=n+(1-u)*a;break}for(const{line:_,points:S}of g(this,oo))o.push(x(_,d,p,m,v,s?new Array(_.length):null)),l.push(x(S,d,p,m,v,s?new Array(S.length):null));return{lines:o,points:l,rect:[y,w,b,A]}}static deserialize(r,n,i,a,s,{paths:{lines:o,points:l},rotation:u,thickness:c}){const f=[];let h,d,p,m,v;switch(u){case 0:v=Qe._rescale,h=-r/i,d=n/a+1,p=1/i,m=-1/a;break;case 90:v=Qe._rescaleAndSwap,h=-n/a,d=-r/i,p=1/a,m=1/i;break;case 180:v=Qe._rescale,h=r/i+1,d=-n/a,p=-1/i,m=1/a;break;case 270:v=Qe._rescaleAndSwap,h=n/a+1,d=r/i+1,p=-1/a,m=-1/i;break}if(!o){o=[];for(const w of l){const b=w.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const A=new Float32Array(3*(b-2));o.push(A);let[x,_,S,E]=w.subarray(0,4);A.set([NaN,NaN,NaN,NaN,x,_],0);for(let T=4;T<b;T+=2){const D=w[T],N=w[T+1];A.set(Qe.createBezierPoints(x,_,S,E,D,N),(T-2)*3),[x,_,S,E]=[S,E,D,N]}}}for(let w=0,b=o.length;w<b;w++)f.push({line:v(o[w].map(A=>A??NaN),h,d,p,m),points:v(l[w].map(A=>A??NaN),h,d,p,m)});const y=new this.prototype.constructor;return y.build(f,i,a,1,u,c,s),y}get box(){return g(this,Xa)}updateProperty(r,n){return r==="stroke-width"?W(this,aa,Kne).call(this,n):null}updateParentDimensions([r,n],i){const[a,s]=W(this,aa,Lc).call(this);R(this,Yu,r),R(this,Qu,n),R(this,Bb,i);const[o,l]=W(this,aa,Lc).call(this),u=o-a,c=l-s,f=g(this,Xa);return f[0]-=u,f[1]-=c,f[2]+=2*u,f[3]+=2*c,f}updateRotation(r){return R(this,KE,r),{path:{transform:this.rotationTransform}}}get viewBox(){return g(this,Xa).map(Qe.svgRound).join(" ")}get defaultProperties(){const[r,n]=g(this,Xa);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`}}}get rotationTransform(){const[,,r,n]=g(this,Xa);let i=0,a=0,s=0,o=0,l=0,u=0;switch(g(this,KE)){case 90:a=n/r,s=-r/n,l=r;break;case 180:i=-1,o=-1,l=r,u=n;break;case 270:a=-n/r,s=r/n,u=n;break;default:return""}return`matrix(${i} ${a} ${s} ${o} ${Qe.svgRound(l)} ${Qe.svgRound(u)})`}getPathResizingSVGProperties([r,n,i,a]){const[s,o]=W(this,aa,Lc).call(this),[l,u,c,f]=g(this,Xa);if(Math.abs(c-s)<=Qe.PRECISION||Math.abs(f-o)<=Qe.PRECISION){const v=r+i/2-(l+c/2),y=n+a/2-(u+f/2);return{path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const h=(i-2*s)/(c-2*s),d=(a-2*o)/(f-2*o),p=c/i,m=f/a;return{path:{"transform-origin":`${Qe.svgRound(l)} ${Qe.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Qe.svgRound(s)} ${Qe.svgRound(o)}) scale(${h} ${d}) translate(${Qe.svgRound(-s)} ${Qe.svgRound(-o)})`}}}getPathResizedSVGProperties([r,n,i,a]){const[s,o]=W(this,aa,Lc).call(this),l=g(this,Xa),[u,c,f,h]=l;if(l[0]=r,l[1]=n,l[2]=i,l[3]=a,Math.abs(f-s)<=Qe.PRECISION||Math.abs(h-o)<=Qe.PRECISION){const y=r+i/2-(u+f/2),w=n+a/2-(c+h/2);for(const{line:b,points:A}of g(this,oo))Qe._translate(b,y,w,b),Qe._translate(A,y,w,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(f-2*s),p=(a-2*o)/(h-2*o),m=-d*(u+s)+r+s,v=-p*(c+o)+n+o;if(d!==1||p!==1||m!==0||v!==0)for(const{line:y,points:w}of g(this,oo))Qe._rescale(y,m,v,d,p,y),Qe._rescale(w,m,v,d,p,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([r,n],i){const[a,s]=i,o=g(this,Xa),l=r-o[0],u=n-o[1];if(g(this,Yu)===a&&g(this,Qu)===s)for(const{line:c,points:f}of g(this,oo))Qe._translate(c,l,u,c),Qe._translate(f,l,u,f);else{const c=g(this,Yu)/a,f=g(this,Qu)/s;R(this,Yu,a),R(this,Qu,s);for(const{line:h,points:d}of g(this,oo))Qe._rescale(h,l,u,c,f,h),Qe._rescale(d,l,u,c,f,d);o[2]*=c,o[3]*=f}return o[0]=r,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`}}}get defaultSVGProperties(){const r=g(this,Xa);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(r[0])} ${Qe.svgRound(r[1])}`,transform:this.rotationTransform||null},bbox:r}}}Xa=new WeakMap,KE=new WeakMap,XE=new WeakMap,oo=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,Bb=new WeakMap,$b=new WeakMap,zg=new WeakMap,aa=new WeakSet,Lc=function(r=g(this,zg)){const n=g(this,XE)+r/2*g(this,Bb);return g(this,$b)%180===0?[n/g(this,Yu),n/g(this,Qu)]:[n/g(this,Qu),n/g(this,Yu)]},Wne=function(){const[r,n,i,a]=g(this,Xa),[s,o]=W(this,aa,Lc).call(this,0);return[r+s,n+o,i-2*s,a-2*o]},Gne=function(){const r=R(this,Xa,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of g(this,oo)){if(a.length<=12){for(let l=4,u=a.length;l<u;l+=6)et.pointBoundingBox(a[l],a[l+1],r);continue}let s=a[4],o=a[5];for(let l=6,u=a.length;l<u;l+=6){const[c,f,h,d,p,m]=a.subarray(l,l+6);et.bezierBoundingBox(s,o,c,f,h,d,p,m,r),s=p,o=m}}const[n,i]=W(this,aa,Lc).call(this);r[0]=Za(r[0]-n,0,1),r[1]=Za(r[1]-i,0,1),r[2]=Za(r[2]+n,0,1),r[3]=Za(r[3]+i,0,1),r[2]-=r[0],r[3]-=r[1]},Kne=function(r){const[n,i]=W(this,aa,Lc).call(this);R(this,zg,r);const[a,s]=W(this,aa,Lc).call(this),[o,l]=[a-n,s-i],u=g(this,Xa);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class SM extends qne{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Hr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,r){e==="stroke-width"&&(r??(r=this["stroke-width"]),r*=this._viewParameters.realScale),super.updateSVGProperty(e,r)}clone(){const e=new SM(this._viewParameters);return e.updateAll(this),e}}var QP,Xne;const r0=class r0 extends KN{constructor(r){super({...r,name:"inkEditor"});$(this,QP);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(r,n){Hr.initialize(r,n),this._defaultDrawingOptions=new SM(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Zt.INK_THICKNESS,"stroke-width"],[Zt.INK_COLOR,"stroke"],[Zt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(r,n,i,a,s){return new rEe(r,n,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(r,n,i,a,s,o){return hS.deserialize(r,n,i,a,s,o)}static async deserialize(r,n,i){let a=null;if(r instanceof l5){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:f,opacity:h,borderStyle:{rawWidth:d},popupRef:p,richText:m,contentsObj:v,creationDate:y,modificationDate:w},parent:{page:{pageNumber:b}}}=r;a=r={annotationType:Ot.INK,color:Array.from(f),thickness:d,opacity:h,paths:{points:o},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:m,comment:(v==null?void 0:v.str)||null,creationDate:y,modificationDate:w}}const s=await super.deserialize(r,n,i);return s._initialData=a,r.comment&&s.setCommentData(r),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new qN(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Zt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:r,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(r,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const r=this._currentParent;r&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:r,thickness:n,opacity:i}){this._drawingOptions=r0.getDefaultDrawingOptions({stroke:et.makeHexColor(...r),"stroke-width":n,"stroke-opacity":i})}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,l=Object.assign(super.serialize(r),{color:Hr._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:n,points:i}});return this.addComment(l),r?(l.isCopy=!0,l):this.annotationElementId&&!W(this,QP,Xne).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(r){if(this.deleted)return r.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return r.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};QP=new WeakSet,Xne=function(r){const{color:n,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||r.color.some((o,l)=>o!==n[l])||r.thickness!==i||r.opacity!==a||r.pageIndex!==s},Oe(r0,"_type","ink"),Oe(r0,"_editorType",Ot.INK),Oe(r0,"_defaultDrawingOptions",null);let hL=r0;class dL extends hS{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const eT=8,Fw=3;var qg,hr,pL,Wl,Yne,Qne,mL,FD,Zne,Jne,eie,gL,vL,tie;class Ef{static extractContoursFromText(e,{fontFamily:r,fontStyle:n,fontWeight:i},a,s,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const f=200,h=c.font=`${n} ${i} ${f}px ${r}`,{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:v,fontBoundingBoxAscent:y,fontBoundingBoxDescent:w,width:b}=c.measureText(e),A=1.5,x=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,b)*A),_=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||f,Math.abs(y)+Math.abs(w)||f)*A);u=new OffscreenCanvas(x,_),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=h,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,x,_),c.fillStyle="black",c.fillText(e,x*(A-1)/2,_*(3-A)/2);const S=W(this,hr,gL).call(this,c.getImageData(0,0,x,_).data),E=W(this,hr,eie).call(this,S),T=W(this,hr,vL).call(this,E),D=W(this,hr,mL).call(this,S,x,_,T);return this.processDrawnLines({lines:{curves:D,width:x,height:_},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,r,n,i,a){const[s,o,l]=W(this,hr,tie).call(this,e),[u,c]=W(this,hr,Jne).call(this,s,o,l,Math.hypot(o,l)*g(this,qg).sigmaSFactor,g(this,qg).sigmaR,g(this,qg).kernelSize),f=W(this,hr,vL).call(this,c),h=W(this,hr,mL).call(this,u,o,l,f);return this.processDrawnLines({lines:{curves:h,width:o,height:l},pageWidth:r,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:r,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([r,n]=[n,r]);const{curves:l,width:u,height:c}=e,f=e.thickness??0,h=[],d=Math.min(r/u,n/c),p=d/r,m=d/n,v=[];for(const{points:w}of l){const b=s?W(this,hr,Zne).call(this,w):w;if(!b)continue;v.push(b);const A=b.length,x=new Float32Array(A),_=new Float32Array(3*(A===2?2:A-2));if(h.push({line:_,points:x}),A===2){x[0]=b[0]*p,x[1]=b[1]*m,_.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[S,E,T,D]=b;S*=p,E*=m,T*=p,D*=m,x.set([S,E,T,D],0),_.set([NaN,NaN,NaN,NaN,S,E],0);for(let N=4;N<A;N+=2){const P=x[N]=b[N]*p,M=x[N+1]=b[N+1]*m;_.set(Qe.createBezierPoints(S,E,T,D,P,M),(N-2)*3),[S,E,T,D]=[T,D,P,M]}}if(h.length===0)return null;const y=o?new dL:new hS;return y.build(h,r,n,1,i,o?0:f,a),{outline:y,newCurves:v,areContours:o,thickness:f,width:u,height:c}}static async compressSignature({outlines:e,areContours:r,thickness:n,width:i,height:a}){let s=1/0,o=-1/0,l=0;for(const b of e){l+=b.length;for(let A=2,x=b.length;A<x;A++){const _=b[A]-b[A-2];s=Math.min(s,_),o=Math.max(o,_)}}let u;s>=-128&&o<=127?u=Int8Array:s>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,f=eT+Fw*c,h=new Uint32Array(f);let d=0;h[d++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,h[d++]=0,h[d++]=i,h[d++]=a,h[d++]=r?0:1,h[d++]=Math.max(0,Math.floor(n??0)),h[d++]=c,h[d++]=u.BYTES_PER_ELEMENT;for(const b of e)h[d++]=b.length-2,h[d++]=b[0],h[d++]=b[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(h);const v=u.prototype.constructor;for(const b of e){const A=new v(b.length-2);for(let x=2,_=b.length;x<_;x++)A[x-2]=b[x]-b[x-2];m.write(A)}m.close();const y=await new Response(p.readable).arrayBuffer(),w=new Uint8Array(y);return Jte(w)}static async decompressSignature(e){try{const r=yAe(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(r).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const b of n)s||(s=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),s.set(b,o),o+=b.length;const l=new Uint32Array(s.buffer,0,s.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],f=l[3],h=l[4]===0,d=l[5],p=l[6],m=l[7],v=[],y=(eT+Fw*p)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(m){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(s.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(s.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(s.buffer,y);break}o=0;for(let b=0;b<p;b++){const A=l[Fw*b+eT],x=new Float32Array(A+2);v.push(x);for(let _=0;_<Fw-1;_++)x[_]=l[Fw*b+eT+_+1];for(let _=0;_<A;_++)x[_+2]=x[_]+w[o++]}return{areContours:h,thickness:d,outlines:v,width:c,height:f}}catch(r){return Tt(`decompressSignature: ${r}`),null}}}qg=new WeakMap,hr=new WeakSet,pL=function(e,r,n,i){return n-=e,i-=r,n===0?i>0?0:4:n===1?i+6:2-i},Wl=new WeakMap,Yne=function(e,r,n,i,a,s,o){const l=W(this,hr,pL).call(this,n,i,a,s);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,f=g(this,Wl)[2*c],h=g(this,Wl)[2*c+1];if(e[(n+f)*r+(i+h)]!==0)return c}return-1},Qne=function(e,r,n,i,a,s,o){const l=W(this,hr,pL).call(this,n,i,a,s);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,f=g(this,Wl)[2*c],h=g(this,Wl)[2*c+1];if(e[(n+f)*r+(i+h)]!==0)return c}return-1},mL=function(e,r,n,i){const a=e.length,s=new Int32Array(a);for(let c=0;c<a;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*r]=s[c*r+r-1]=0;for(let c=0;c<r;c++)s[c]=s[r*n-1-c]=0;let o=1,l;const u=[];for(let c=1;c<n-1;c++){l=1;for(let f=1;f<r-1;f++){const h=c*r+f,d=s[h];if(d===0)continue;let p=c,m=f;if(d===1&&s[h-1]===0)o+=1,m-=1;else if(d>=1&&s[h+1]===0)o+=1,m+=1,d>1&&(l=d);else{d!==1&&(l=Math.abs(d));continue}const v=[f,c],y=m===f+1,w={isHole:y,points:v,id:o,parent:0};u.push(w);let b;for(const N of u)if(N.id===l){b=N;break}b?b.isHole?w.parent=y?b.parent:l:w.parent=y?l:b.parent:w.parent=y?l:0;const A=W(this,hr,Yne).call(this,s,r,c,f,p,m,0);if(A===-1){s[h]=-o,s[h]!==1&&(l=Math.abs(s[h]));continue}let x=g(this,Wl)[2*A],_=g(this,Wl)[2*A+1];const S=c+x,E=f+_;p=S,m=E;let T=c,D=f;for(;;){const N=W(this,hr,Qne).call(this,s,r,T,D,p,m,1);x=g(this,Wl)[2*N],_=g(this,Wl)[2*N+1];const P=T+x,M=D+_;v.push(M,P);const j=T*r+D;if(s[j+1]===0?s[j]=-o:s[j]===1&&(s[j]=o),P===c&&M===f&&T===S&&D===E){s[h]!==1&&(l=Math.abs(s[h]));break}else p=T,m=D,T=P,D=M}}}return u},FD=function(e,r,n,i){if(n-r<=4){for(let S=r;S<n-2;S+=2)i.push(e[S],e[S+1]);return}const a=e[r],s=e[r+1],o=e[n-4]-a,l=e[n-3]-s,u=Math.hypot(o,l),c=o/u,f=l/u,h=c*s-f*a,d=l/o,p=1/u,m=Math.atan(d),v=Math.cos(m),y=Math.sin(m),w=p*(Math.abs(v)+Math.abs(y)),b=p*(1-w+w**2),A=Math.max(Math.atan(Math.abs(y+v)*b),Math.atan(Math.abs(y-v)*b));let x=0,_=r;for(let S=r+2;S<n-2;S+=2){const E=Math.abs(h-c*e[S+1]+f*e[S]);E>x&&(_=S,x=E)}x>(u*A)**2?(W(this,hr,FD).call(this,e,r,_+2,i),W(this,hr,FD).call(this,e,_,n,i)):i.push(a,s)},Zne=function(e){const r=[],n=e.length;return W(this,hr,FD).call(this,e,0,n,r),r.push(e[n-2],e[n-1]),r.length<=4?null:r},Jne=function(e,r,n,i,a,s){const o=new Float32Array(s**2),l=-2*i**2,u=s>>1;for(let m=0;m<s;m++){const v=(m-u)**2;for(let y=0;y<s;y++)o[m*s+y]=Math.exp((v+(y-u)**2)/l)}const c=new Float32Array(256),f=-2*a**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/f);const h=e.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let m=0;m<n;m++)for(let v=0;v<r;v++){const y=m*r+v,w=e[y];let b=0,A=0;for(let _=0;_<s;_++){const S=m+_-u;if(!(S<0||S>=n))for(let E=0;E<s;E++){const T=v+E-u;if(T<0||T>=r)continue;const D=e[S*r+T],N=o[_*s+E]*c[Math.abs(D-w)];b+=D*N,A+=N}}const x=d[y]=Math.round(b/A);p[x]++}return[d,p]},eie=function(e){const r=new Uint32Array(256);for(const n of e)r[n]++;return r},gL=function(e){const r=e.length,n=new Uint8ClampedArray(r>>2);let i=-1/0,a=1/0;for(let o=0,l=n.length;o<l;o++){const u=n[o]=e[o<<2];i=Math.max(i,u),a=Math.min(a,u)}const s=255/(i-a);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-a)*s;return n},vL=function(e){let r,n=-1/0,i=-1/0;const a=e.findIndex(l=>l!==0);let s=a,o=a;for(r=a;r<256;r++){const l=e[r];l>n&&(r-s>i&&(i=r-s,o=r-1),n=l,s=r)}for(r=o-1;r>=0&&!(e[r]>e[r+1]);r--);return r},tie=function(e){const r=e,{width:n,height:i}=e,{maxDim:a}=g(this,qg);let s=n,o=i;if(n>a||i>a){let h=n,d=i,p=Math.log2(Math.max(n,i)/a);const m=Math.floor(p);p=p===m?m-1:m;for(let y=0;y<p;y++){s=Math.ceil(h/2),o=Math.ceil(d/2);const w=new OffscreenCanvas(s,o);w.getContext("2d").drawImage(e,0,0,h,d,0,0,s,o),h=s,d=o,e!==r&&e.close(),e=w.transferToImageBitmap()}const v=Math.min(a/s,a/o);s=Math.round(s*v),o=Math.round(o*v)}const u=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,s,o);const c=u.getImageData(0,0,s,o).data;return[W(this,hr,gL).call(this,c),s,o]},$(Ef,hr),$(Ef,qg,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),$(Ef,Wl,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class u5 extends qne{constructor(){super(),super.updateProperties({fill:Hr._defaultLineColor,"stroke-width":0})}clone(){const e=new u5;return e.updateAll(this),e}}class c5 extends SM{constructor(e){super(e),super.updateProperties({stroke:Hr._defaultLineColor,"stroke-width":1})}clone(){const e=new c5(this._viewParameters);return e.updateAll(this),e}}var Md,Zu,Id,Hg;const qs=class qs extends KN{constructor(r){super({...r,mustBeCommitted:!0,name:"signatureEditor"});$(this,Md,!1);$(this,Zu,null);$(this,Id,null);$(this,Hg,null);this._willKeepAspectRatio=!0,R(this,Id,r.signatureData||null),R(this,Zu,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(r,n){Hr.initialize(r,n),this._defaultDrawingOptions=new u5,this._defaultDrawnSignatureOptions=new c5(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!g(this,Zu)}}static computeTelemetryFinalData(r){const n=r.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let r,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,r=this.x,n=this.y),super.render(),this._drawId===null)if(g(this,Id)){const{lines:a,mustSmooth:s,areContours:o,description:l,uuid:u,heightInPage:c}=g(this,Id),{rawDims:{pageWidth:f,pageHeight:h},rotation:d}=this.parent.viewport,p=Ef.processDrawnLines({lines:a,pageWidth:f,pageHeight:h,rotation:d,innerMargin:qs._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:g(this,Zu)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(r,n)),this.div}setUuid(r){R(this,Hg,r),this.addEditToolbar()}getUuid(){return g(this,Hg)}get description(){return g(this,Zu)}set description(r){R(this,Zu,r),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:r})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(r)}))}getSignaturePreview(){const{newCurves:r,areContours:n,thickness:i,width:a,height:s}=g(this,Id),o=Math.max(a,s),l=Ef.processDrawnLines({lines:{curves:r.map(u=>({points:u})),thickness:i,width:a,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(r,n,i,a){const{x:s,y:o}=this,{outline:l}=R(this,Id,r);R(this,Md,l instanceof dL),this.description=i;let u;g(this,Md)?u=qs.getDefaultDrawingOptions():(u=qs._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let f=n/c;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Ef.process(r,n,i,a,qs._INNER_MARGIN)}getFromText(r,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return Ef.extractContoursFromText(r,n,i,a,s,qs._INNER_MARGIN)}getDrawnSignature(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Ef.processDrawnLines({lines:r,pageWidth:n,pageHeight:i,rotation:a,innerMargin:qs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:r,thickness:n}){r?this._drawingOptions=qs.getDefaultDrawingOptions():(this._drawingOptions=qs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(r=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{"stroke-width":a}}=this,s=Object.assign(super.serialize(r),{isSignature:!0,areContours:g(this,Md),color:[0,0,0],thickness:g(this,Md)?0:a});return this.addComment(s),r?(s.paths={lines:n,points:i},s.uuid=g(this,Hg),s.isCopy=!0):s.lines=n,g(this,Zu)&&(s.accessibilityData={type:"Figure",alt:g(this,Zu)}),s}static deserializeDraw(r,n,i,a,s,o){return o.areContours?dL.deserialize(r,n,i,a,s,o):hS.deserialize(r,n,i,a,s,o)}static async deserialize(r,n,i){var s;const a=await super.deserialize(r,n,i);return R(a,Md,r.areContours),a.description=((s=r.accessibilityData)==null?void 0:s.alt)||"",R(a,Hg,r.uuid),a}};Md=new WeakMap,Zu=new WeakMap,Id=new WeakMap,Hg=new WeakMap,Oe(qs,"_type","signature"),Oe(qs,"_editorType",Ot.SIGNATURE),Oe(qs,"_defaultDrawingOptions",null);let yL=qs;var rn,Ii,Od,bf,kd,jb,wf,Wg,Ju,lo,Vb,sr,vx,yx,LD,BD,$D,wL,jD,rie;class bL extends Hr{constructor(r){super({...r,name:"stampEditor"});$(this,sr);$(this,rn,null);$(this,Ii,null);$(this,Od,null);$(this,bf,null);$(this,kd,null);$(this,jb,"");$(this,wf,null);$(this,Wg,!1);$(this,Ju,null);$(this,lo,!1);$(this,Vb,!1);R(this,bf,r.bitmapUrl),R(this,kd,r.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(r,n){Hr.initialize(r,n)}static isHandlingMimeForPasting(r){return i3.includes(r)}static paste(r,n){n.pasteEditor({mode:Ot.STAMP},{bitmapFile:r.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var r;return{type:"stamp",hasAltText:!!((r=this.altTextData)!=null&&r.altText)}}static computeTelemetryFinalData(r){const n=r.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(r=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:o}=r||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var r;g(this,Ii)&&(R(this,rn,null),this._uiManager.imageManager.deleteId(g(this,Ii)),(r=g(this,wf))==null||r.remove(),R(this,wf,null),g(this,Ju)&&(clearTimeout(g(this,Ju)),R(this,Ju,null))),super.remove()}rebuild(){if(!this.parent){g(this,Ii)&&W(this,sr,LD).call(this);return}super.rebuild(),this.div!==null&&(g(this,Ii)&&g(this,wf)===null&&W(this,sr,LD).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(r){this._isDraggable=!0,r&&this.div.focus()}isEmpty(){return!(g(this,Od)||g(this,rn)||g(this,bf)||g(this,kd)||g(this,Ii)||g(this,Wg))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let r,n;return this._isCopy&&(r=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),g(this,Wg)||(g(this,rn)?W(this,sr,BD).call(this):W(this,sr,LD).call(this)),this._isCopy&&this._moveAfterPaste(r,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(r,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(r,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(R(this,Ii,i),a&&R(this,rn,a),R(this,Wg,!1),W(this,sr,BD).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;g(this,Ju)!==null&&clearTimeout(g(this,Ju)),R(this,Ju,setTimeout(()=>{R(this,Ju,null),W(this,sr,wL).call(this)},200))}copyCanvas(r,n,i=!1){r||(r=224);const{width:a,height:s}=g(this,rn),o=new vc;let l=g(this,rn),u=a,c=s,f=null;if(n){if(a>n||s>n){const S=Math.min(n/a,n/s);u=Math.floor(a*S),c=Math.floor(s*S)}f=document.createElement("canvas");const d=f.width=Math.ceil(u*o.sx),p=f.height=Math.ceil(c*o.sy);g(this,lo)||(l=W(this,sr,$D).call(this,d,p));const m=f.getContext("2d");m.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":EAe.isDarkMode&&(v="#8f8f9d",y="#42414d");const w=15,b=w*o.sx,A=w*o.sy,x=new OffscreenCanvas(b*2,A*2),_=x.getContext("2d");_.fillStyle=v,_.fillRect(0,0,b*2,A*2),_.fillStyle=y,_.fillRect(0,0,b,A),_.fillRect(b,A,b,A),m.fillStyle=m.createPattern(x,"repeat"),m.fillRect(0,0,d,p),m.drawImage(l,0,0,l.width,l.height,0,0,d,p)}let h=null;if(i){let d,p;if(o.symmetric&&l.width<r&&l.height<r)d=l.width,p=l.height;else if(l=g(this,rn),a>r||s>r){const y=Math.min(r/a,r/s);d=Math.floor(a*y),p=Math.floor(s*y),g(this,lo)||(l=W(this,sr,$D).call(this,d,p))}const v=new OffscreenCanvas(d,p).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,d,p),h={width:d,height:p,data:v.getImageData(0,0,d,p).data}}return{canvas:f,width:u,height:c,imageData:h}}static async deserialize(r,n,i){var v;let a=null,s=!1;if(r instanceof yne){const{data:{rect:y,rotation:w,id:b,structParent:A,popupRef:x,richText:_,contentsObj:S,creationDate:E,modificationDate:T},container:D,parent:{page:{pageNumber:N}},canvas:P}=r;let M,j;P?(delete r.canvas,{id:M,bitmap:j}=i.imageManager.getFromCanvas(D.id,P),P.remove()):(s=!0,r._hasNoCanvas=!0);const K=((v=await n._structTree.getAriaAttributes(`${Hy}${b}`))==null?void 0:v.get("aria-label"))||"";a=r={annotationType:Ot.STAMP,bitmapId:M,bitmap:j,pageIndex:N-1,rect:y.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:A,popupRef:x,richText:_,comment:(S==null?void 0:S.str)||null,creationDate:E,modificationDate:T}}const o=await super.deserialize(r,n,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:f,isSvg:h,accessibilityData:d}=r;s?(i.addMissingCanvas(r.id,o),R(o,Wg,!0)):f&&i.imageManager.isValidId(f)?(R(o,Ii,f),u&&R(o,rn,u)):R(o,bf,c),R(o,lo,h);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,d&&(o.altTextData=d),o._initialData=a,r.comment&&o.setCommentData(r),R(o,Vb,!!a),o}serialize(r=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(r),{bitmapId:g(this,Ii),isSvg:g(this,lo)});if(this.addComment(i),r)return i.bitmapUrl=W(this,sr,jD).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=W(this,sr,rie).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const o=g(this,lo)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(g(this,Ii)))n.stamps.set(g(this,Ii),{area:o,serialized:i}),i.bitmap=W(this,sr,jD).call(this,!1);else if(g(this,lo)){const l=n.stamps.get(g(this,Ii));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=W(this,sr,jD).call(this,!1))}return i}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}rn=new WeakMap,Ii=new WeakMap,Od=new WeakMap,bf=new WeakMap,kd=new WeakMap,jb=new WeakMap,wf=new WeakMap,Wg=new WeakMap,Ju=new WeakMap,lo=new WeakMap,Vb=new WeakMap,sr=new WeakSet,vx=function(r,n=!1){if(!r){this.remove();return}R(this,rn,r.bitmap),n||(R(this,Ii,r.id),R(this,lo,r.isSvg)),r.file&&R(this,jb,r.file.name),W(this,sr,BD).call(this)},yx=function(){if(R(this,Od,null),this._uiManager.enableWaiting(!1),!!g(this,wf)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,rn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,rn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},LD=function(){if(g(this,Ii)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,Ii)).then(i=>W(this,sr,vx).call(this,i,!0)).finally(()=>W(this,sr,yx).call(this));return}if(g(this,bf)){const i=g(this,bf);R(this,bf,null),this._uiManager.enableWaiting(!0),R(this,Od,this._uiManager.imageManager.getFromUrl(i).then(a=>W(this,sr,vx).call(this,a)).finally(()=>W(this,sr,yx).call(this)));return}if(g(this,kd)){const i=g(this,kd);R(this,kd,null),this._uiManager.enableWaiting(!0),R(this,Od,this._uiManager.imageManager.getFromFile(i).then(a=>W(this,sr,vx).call(this,a)).finally(()=>W(this,sr,yx).call(this)));return}const r=document.createElement("input");r.type="file",r.accept=i3.join(",");const n=this._uiManager._signal;R(this,Od,new Promise(i=>{r.addEventListener("change",async()=>{if(!r.files||r.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(r.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),W(this,sr,vx).call(this,a)}i()},{signal:n}),r.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>W(this,sr,yx).call(this))),r.click()},BD=function(){var u;const{div:r}=this;let{width:n,height:i}=g(this,rn);const[a,s]=this.pageDimensions,o=.75;if(this.width)n=this.width*a,i=this.height*s;else if(n>o*a||i>o*s){const c=Math.min(o*a/n,o*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=R(this,wf,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=n/a,this.height=i/s,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(r.hidden=!1),W(this,sr,wL).call(this),g(this,Vb)||(this.parent.addUndoableEditor(this),R(this,Vb,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,jb)&&this.div.setAttribute("aria-description",g(this,jb)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},$D=function(r,n){const{width:i,height:a}=g(this,rn);let s=i,o=a,l=g(this,rn);for(;s>2*r||o>2*n;){const u=s,c=o;s>2*r&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(s,o);f.getContext("2d").drawImage(l,0,0,u,c,0,0,s,o),l=f.transferToImageBitmap()}return l},wL=function(){const[r,n]=this.parentDimensions,{width:i,height:a}=this,s=new vc,o=Math.ceil(i*r*s.sx),l=Math.ceil(a*n*s.sy),u=g(this,wf);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=g(this,lo)?g(this,rn):W(this,sr,$D).call(this,o,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(c,0,0,c.width,c.height,0,0,o,l)},jD=function(r){if(r){if(g(this,lo)){const a=this._uiManager.imageManager.getSvgUrl(g(this,Ii));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=g(this,rn),n.getContext("2d").drawImage(g(this,rn),0,0),n.toDataURL()}if(g(this,lo)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*dp.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*dp.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,s);return o.getContext("2d").drawImage(g(this,rn),0,0,g(this,rn).width,g(this,rn).height,0,0,a,s),o.transferToImageBitmap()}return structuredClone(g(this,rn))},rie=function(r){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=r.pageIndex===n,s=(((o=r.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},Oe(bL,"_type","stamp"),Oe(bL,"_editorType",Ot.STAMP);var Gg,Ub,Rd,Fd,xf,Es,Ld,zb,qb,Gl,Af,Oi,_f,Bd,Hb,it,$d,Fr,AL,nie,Du,_L,EL,VD;const Rl=class Rl{constructor({uiManager:e,pageIndex:r,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:u,l10n:c}){$(this,Fr);$(this,Gg);$(this,Ub,!1);$(this,Rd,null);$(this,Fd,null);$(this,xf,null);$(this,Es,new Map);$(this,Ld,!1);$(this,zb,!1);$(this,qb,!1);$(this,Gl,null);$(this,Af,null);$(this,Oi,null);$(this,_f,null);$(this,Bd,null);$(this,Hb,-1);$(this,it);const f=[...g(Rl,$d).values()];if(!Rl._initialized){Rl._initialized=!0;for(const h of f)h.initialize(c,e)}e.registerEditorTypes(f),R(this,it,e),this.pageIndex=r,this.div=n,R(this,Gg,a),R(this,Rd,s),this.viewport=u,R(this,Oi,l),this.drawLayer=o,this._structTree=i,g(this,it).addLayer(this)}get isEmpty(){return g(this,Es).size===0}get isInvisible(){return this.isEmpty&&g(this,it).getMode()===Ot.NONE}updateToolbar(e){g(this,it).updateToolbar(e)}updateMode(e=g(this,it).getMode()){switch(W(this,Fr,VD).call(this),e){case Ot.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ot.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ot.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;if(r.toggle("nonEditing",!1),e===Ot.POPUP)r.toggle("commentEditing",!0);else{r.toggle("commentEditing",!1);for(const n of g(Rl,$d).values())r.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var r;return e===((r=g(this,Oi))==null?void 0:r.div)}setEditingState(e){g(this,it).setEditingState(e)}addCommands(e){g(this,it).addCommands(e)}cleanUndoStack(e){g(this,it).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var r;(r=g(this,Rd))==null||r.togglePointerEvents(e)}async enable(){var n;R(this,qb,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=g(this,Bd))==null||n.abort(),R(this,Bd,null);const e=new Set;for(const i of g(this,Fr,AL))i.enableEditing(),i.show(!0),i.annotationElementId&&(g(this,it).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const r=g(this,Rd);if(r)for(const i of r.getEditableAnnotations()){if(i.hide(),g(this,it).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}R(this,qb,!1),g(this,it)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(R(this,zb,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),g(this,Oi)&&!g(this,Bd)){R(this,Bd,new AbortController);const a=g(this,it).combinedSignal(g(this,Bd));g(this,Oi).div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:u,timeStamp:c}=s,f=g(this,Hb);if(c-f>500){R(this,Hb,c);return}R(this,Hb,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const d=document.elementsFromPoint(l,u);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let p;const m=new RegExp(`^${SA}[0-9]+$`);for(const y of d)if(m.test(y.id)){p=y.id;break}if(!p)return;const v=g(this,Es).get(p);(v==null?void 0:v.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),v.dblclick(s))},{signal:a,capture:!0})}const e=g(this,Rd),r=[];if(e){const a=new Map,s=new Map;for(const l of g(this,Fr,AL)){if(l.disableEditing(),!l.annotationElementId){r.push(l);continue}if(l.serialize()!==null){a.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(g(this,it).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=s.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=a.get(u),c&&(g(this,it).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}W(this,Fr,VD).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of g(Rl,$d).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(r),R(this,zb,!1)}getEditableAnnotation(e){var r;return((r=g(this,Rd))==null?void 0:r.getEditableAnnotation(e))||null}setActiveEditor(e){g(this,it).getActive()!==e&&g(this,it).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=g(this,Oi))!=null&&e.div&&!g(this,_f)){R(this,_f,new AbortController);const r=g(this,it).combinedSignal(g(this,_f));g(this,Oi).div.addEventListener("pointerdown",W(this,Fr,nie).bind(this),{signal:r}),g(this,Oi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=g(this,Oi))!=null&&e.div&&g(this,_f)&&(g(this,_f).abort(),R(this,_f,null),g(this,Oi).div.classList.remove("highlighting"))}enableClick(){if(g(this,Fd))return;R(this,Fd,new AbortController);const e=g(this,it).combinedSignal(g(this,Fd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){var e;(e=g(this,Fd))==null||e.abort(),R(this,Fd,null)}attach(e){g(this,Es).set(e.id,e);const{annotationElementId:r}=e;r&&g(this,it).isDeletedAnnotationElement(r)&&g(this,it).removeDeletedAnnotationElement(e)}detach(e){var r;g(this,Es).delete(e.id),(r=g(this,Gg))==null||r.removePointerInTextLayer(e.contentDiv),!g(this,zb)&&e.annotationElementId&&g(this,it).addDeletedAnnotationElement(e)}remove(e){this.detach(e),g(this,it).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var r;e.parent!==this&&(e.parent&&e.annotationElementId&&(g(this,it).addDeletedAnnotationElement(e),Hr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(r=e.parent)==null||r.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),g(this,it).addEditor(e),this.attach(e),!e.isAttachedToDOM){const r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!g(this,qb)),g(this,it).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:r}=document;e.div.contains(r)&&!g(this,xf)&&(e._focusEventsAllowed=!1,R(this,xf,setTimeout(()=>{R(this,xf,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:g(this,it)._signal}),r.focus())},0))),e._structTreeParentId=(n=g(this,Gg))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const r=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:r,undo:n,mustExec:!1})}getEditorByUID(e){for(const r of g(this,Es).values())if(r.uid===e)return r;return null}getNextId(){return g(this,it).getId()}combinedSignal(e){return g(this,it).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=g(this,Fr,Du))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,r){this.updateToolbar(e),await g(this,it).updateMode(e.mode);const{offsetX:n,offsetY:i}=W(this,Fr,EL).call(this),a=this.getNextId(),s=W(this,Fr,_L).call(this,{parent:this,id:a,x:n,y:i,uiManager:g(this,it),isCentered:!0,...r});s&&this.add(s)}async deserialize(e){var r;return await((r=g(Rl,$d).get(e.annotationType??e.annotationEditorType))==null?void 0:r.deserialize(e,this,g(this,it)))||null}createAndAddNewEditor(e,r,n={}){const i=this.getNextId(),a=W(this,Fr,_L).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:g(this,it),isCentered:r,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(W(this,Fr,EL).call(this),!0,e)}setSelected(e){g(this,it).setSelected(e)}toggleSelected(e){g(this,it).toggleSelected(e)}unselect(e){g(this,it).unselect(e)}pointerup(e){var i;const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!g(this,Ld)||(R(this,Ld,!1),(i=g(this,Fr,Du))!=null&&i.isDrawer&&g(this,Fr,Du).supportMultipleDrawings))return;if(!g(this,Ub)){R(this,Ub,!0);return}const n=g(this,it).getMode();if(n===Ot.STAMP||n===Ot.SIGNATURE){g(this,it).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(g(this,it).getMode()===Ot.HIGHLIGHT&&this.enableTextSelection(),g(this,Ld)){R(this,Ld,!1);return}const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(R(this,Ld,!0),(i=g(this,Fr,Du))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=g(this,it).getActive();R(this,Ub,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),g(this,Gl)){g(this,Fr,Du).startDrawing(this,g(this,it),!1,e);return}g(this,it).setCurrentDrawingSession(this),R(this,Gl,new AbortController);const r=g(this,it).combinedSignal(g(this,Gl));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(R(this,Af,null),this.commitOrRemove())},{signal:r}),g(this,Fr,Du).startDrawing(this,g(this,it),!1,e)}pause(e){if(e){const{activeElement:r}=document;this.div.contains(r)&&R(this,Af,r);return}g(this,Af)&&setTimeout(()=>{var r;(r=g(this,Af))==null||r.focus(),R(this,Af,null)},0)}endDrawingSession(e=!1){return g(this,Gl)?(g(this,it).setCurrentDrawingSession(null),g(this,Gl).abort(),R(this,Gl,null),R(this,Af,null),g(this,Fr,Du).endDrawing(e)):null}findNewParent(e,r,n){const i=g(this,it).findParent(r,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return g(this,Gl)?(this.endDrawingSession(),!0):!1}onScaleChanging(){g(this,Gl)&&g(this,Fr,Du).onScaleChangingWhenDrawing(this)}destroy(){var e,r;this.commitOrRemove(),((e=g(this,it).getActive())==null?void 0:e.parent)===this&&(g(this,it).commitOrRemove(),g(this,it).setActiveEditor(null)),g(this,xf)&&(clearTimeout(g(this,xf)),R(this,xf,null));for(const n of g(this,Es).values())(r=g(this,Gg))==null||r.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,g(this,Es).clear(),g(this,it).removeLayer(this)}render({viewport:e}){this.viewport=e,hv(this.div,e);for(const r of g(this,it).getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){g(this,it).commitOrRemove(),W(this,Fr,VD).call(this);const r=this.viewport.rotation,n=e.rotation;if(this.viewport=e,hv(this.div,{rotation:n}),r!==n)for(const i of g(this,Es).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return g(this,it).viewParameters.realScale}};Gg=new WeakMap,Ub=new WeakMap,Rd=new WeakMap,Fd=new WeakMap,xf=new WeakMap,Es=new WeakMap,Ld=new WeakMap,zb=new WeakMap,qb=new WeakMap,Gl=new WeakMap,Af=new WeakMap,Oi=new WeakMap,_f=new WeakMap,Bd=new WeakMap,Hb=new WeakMap,it=new WeakMap,$d=new WeakMap,Fr=new WeakSet,AL=function(){return g(this,Es).size!==0?g(this,Es).values():g(this,it).getEditors(this.pageIndex)},nie=function(e){g(this,it).unselectAll();const{target:r}=e;if(r===g(this,Oi).div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&g(this,Oi).div.contains(r)){const{isMac:n}=da.platform;if(e.button!==0||e.ctrlKey&&n)return;g(this,it).showAllEditors("highlight",!0,!0),g(this,Oi).div.classList.add("free"),this.toggleDrawing(),GN.startHighlighting(this,g(this,it).direction==="ltr",{target:g(this,Oi).div,x:e.x,y:e.y}),g(this,Oi).div.addEventListener("pointerup",()=>{g(this,Oi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,it)._signal}),e.preventDefault()}},Du=function(){return g(Rl,$d).get(g(this,it).getMode())},_L=function(e){const r=g(this,Fr,Du);return r?new r.prototype.constructor(e):null},EL=function(){const{x:e,y:r,width:n,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,r),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,r+i),u=(a+o)/2-e,c=(s+l)/2-r,[f,h]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:f,offsetY:h}},VD=function(){for(const e of g(this,Es).values())e.isEmpty()&&e.remove()},Oe(Rl,"_initialized",!1),$(Rl,$d,new Map([rL,hL,bL,GN,yL].map(e=>[e._editorType,e])));let xL=Rl;var Kl,Ya,Kg,YE,ZP,iie,Sc,CL,aie,TL;const ii=class ii{constructor({pageIndex:e}){$(this,Sc);$(this,Kl,null);$(this,Ya,new Map);$(this,Kg,new Map);this.pageIndex=e}setParent(e){if(!g(this,Kl)){R(this,Kl,e);return}if(g(this,Kl)!==e){if(g(this,Ya).size>0)for(const r of g(this,Ya).values())r.remove(),e.append(r);R(this,Kl,e)}}static get _svgFactory(){return Dt(this,"_svgFactory",new HN)}draw(e,r=!1,n=!1){const i=ri(ii,YE)._++,a=W(this,Sc,CL).call(this),s=ii._svgFactory.createElement("defs");a.append(s);const o=ii._svgFactory.createElement("path");s.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),r&&g(this,Kg).set(i,o);const u=n?W(this,Sc,aie).call(this,s,l):null,c=ii._svgFactory.createElement("use");return a.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(a,e),g(this,Ya).set(i,a),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,r){const n=ri(ii,YE)._++,i=W(this,Sc,CL).call(this),a=ii._svgFactory.createElement("defs");i.append(a);const s=ii._svgFactory.createElement("path");a.append(s);const o=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(r){const f=ii._svgFactory.createElement("mask");a.append(f),l=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const h=ii._svgFactory.createElement("rect");f.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const d=ii._svgFactory.createElement("use");f.append(d),d.setAttribute("href",`#${o}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const u=ii._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),g(this,Ya).set(n,i),n}finalizeDraw(e,r){g(this,Kg).delete(e),this.updateProperties(e,r)}updateProperties(e,r){var l;if(!r)return;const{root:n,bbox:i,rootClass:a,path:s}=r,o=typeof e=="number"?g(this,Ya).get(e):e;if(o){if(n&&W(this,Sc,TL).call(this,o,n),i&&W(l=ii,ZP,iie).call(l,o,i),a){const{classList:u}=o;for(const[c,f]of Object.entries(a))u.toggle(c,f)}if(s){const c=o.firstElementChild.firstElementChild;W(this,Sc,TL).call(this,c,s)}}}updateParent(e,r){if(r===this)return;const n=g(this,Ya).get(e);n&&(g(r,Kl).append(n),g(this,Ya).delete(e),g(r,Ya).set(e,n))}remove(e){g(this,Kg).delete(e),g(this,Kl)!==null&&(g(this,Ya).get(e).remove(),g(this,Ya).delete(e))}destroy(){R(this,Kl,null);for(const e of g(this,Ya).values())e.remove();g(this,Ya).clear(),g(this,Kg).clear()}};Kl=new WeakMap,Ya=new WeakMap,Kg=new WeakMap,YE=new WeakMap,ZP=new WeakSet,iie=function(e,[r,n,i,a]){const{style:s}=e;s.top=`${100*n}%`,s.left=`${100*r}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},Sc=new WeakSet,CL=function(){const e=ii._svgFactory.create(1,1,!0);return g(this,Kl).append(e),e.setAttribute("aria-hidden",!0),e},aie=function(e,r){const n=ii._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${r}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=ii._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${r}`),a.classList.add("clip"),i},TL=function(e,r){for(const[n,i]of Object.entries(r))i===null?e.removeAttribute(n):e.setAttribute(n,i)},$(ii,ZP),$(ii,YE,0);let SL=ii;globalThis._pdfjsTestingUtils={HighlightOutliner:iL};globalThis.pdfjsLib={AbortException:hp,AnnotationEditorLayer:xL,AnnotationEditorParamsType:Zt,AnnotationEditorType:Ot,AnnotationEditorUIManager:dv,AnnotationLayer:eL,AnnotationMode:zh,AnnotationType:zn,applyOpacity:CAe,build:O_e,ColorPicker:zN,createValidAbsoluteUrl:Xte,CSSConstants:SAe,DOMSVGFactory:HN,DrawLayer:SL,FeatureTest:da,fetchData:oS,findContrastColor:TAe,getDocument:nne,getFilenameFromUrl:bAe,getPdfFilenameFromUrl:wAe,getRGB:uS,getUuid:Zte,getXfaPageViewport:AAe,GlobalWorkerOptions:rc,ImageKind:lD,InvalidPDFException:r3,isDataScheme:_M,isPdfFile:n5,isValidExplicitDest:LAe,MathClamp:Za,noContextMenu:wl,normalizeUnicode:gAe,OPS:CA,OutputScale:vc,PasswordResponses:oAe,PDFDataRangeTransport:ine,PDFDateString:LN,PDFWorker:NA,PermissionFlag:sAe,PixelsPerInch:dp,RenderingCancelledException:r5,renderRichText:tre,ResponseException:FN,setLayerDimensions:hv,shadow:Dt,SignatureExtractor:Ef,stopEvent:Dn,SupportedImageMimeTypes:i3,TextLayer:DA,TouchManager:$N,updateUrlHash:Yte,Util:et,VerbosityLevel:wM,version:I_e,XfaLayer:ere};rc.workerSrc="/1201-project/pdf.worker.min.js";const nEe="",iEe="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function aEe(t){try{const e=await t.arrayBuffer(),r=await nne({data:e}).promise;let n="";const i=Math.min(r.numPages,10);console.log(`PDF  : ${r.numPages},  : ${i}`);for(let a=1;a<=i;a++)try{const o=await(await r.getPage(a)).getTextContent();let l="";for(const u of o.items)u.str&&u.str.trim()&&(l+=u.str+" ");l.trim()&&(n+=l+`
`,console.log(` ${a}   (${l.length})`))}catch(s){console.warn(` ${a}  :`,s);continue}if(!n.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${n.length}`),n}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function sEe(t){var e;try{const n=t.substring(0,1024),i=await fetch(iEe,{headers:{Authorization:`Bearer ${nEe}`},method:"POST",body:JSON.stringify({inputs:n})});if(!i.ok)throw new Error(`API : ${i.status}`);const a=await i.json();if(Array.isArray(a)&&((e=a[0])!=null&&e.summary_text))return a[0].summary_text;throw new Error("  ")}catch(r){throw console.error("AI  :",r),r}}function oEe(t){const e=t.match(/[^.!?]+[.!?]+/g)||[],r=["","","","","","",""];return e.map((a,s)=>{let o=r.reduce((l,u)=>l+(a.toLowerCase().includes(u)?1:0),0);return o+=1/(s+1),{sentence:a.trim(),score:o}}).sort((a,s)=>s.score-a.score).slice(0,3).map(a=>a.sentence).join(" ")||"  "}async function lEe(t){try{return{summary:await sEe(t),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:oEe(t),method:"Rule-based"}}}const uEe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function cEe(){const[t,e]=O.useState(null),[r,n]=O.useState(!1),[i,a]=O.useState(null),[s,o]=O.useState(null),[l,u]=O.useState(""),[c,f]=O.useState(""),h=p=>{var v;const m=(v=p.target.files)==null?void 0:v[0];m&&(m.type==="application/pdf"?(e(m),u(m.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},d=async()=>{if(!t){o("PDF  .");return}n(!0),o(null),a(null);try{const p=await aEe(t);if(!p||p.trim().length<100)throw new Error("   .  PDF .");const m=await lEe(p);a(m.summary),f(m.method)}catch(p){o(p.message||"    ."),console.error(" :",p)}finally{n(!1)}};return I.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:I.jsxs(We.div,{className:"max-w-4xl mx-auto px-4",variants:uEe,initial:"hidden",animate:"visible",children:[I.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),I.jsxs(We.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[I.jsxs("div",{className:"text-center",children:[I.jsx("input",{type:"file",accept:".pdf",onChange:h,className:"hidden",id:"pdf-upload"}),I.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[I.jsx("div",{className:"text-6xl mb-4",children:""}),I.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"( 5 )"})]})]}),t&&I.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:I.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",I.jsx("strong",{children:t.name})]})})]}),I.jsxs("div",{className:"flex gap-4 mb-8",children:[I.jsx(We.button,{onClick:d,disabled:!t||r,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:r?"   ...":" AI "}),I.jsx(We.button,{onClick:()=>{e(null),u(""),a(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),s&&I.jsxs(We.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[I.jsx("strong",{children:":"})," ",s]}),i&&I.jsxs(We.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[I.jsxs("div",{className:"flex items-center mb-4",children:[I.jsx("span",{className:"text-2xl mr-3",children:""}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),I.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",c==="AI"?" AI  (Hugging Face)":"   "]})]})]}),I.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:I.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),I.jsxs("div",{className:"mt-4 flex gap-2",children:[I.jsx(We.button,{onClick:()=>{const p=document.createElement("a");p.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),p.setAttribute("download",`${l}_summary.txt`),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),I.jsx(We.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "})]})]}),I.jsxs(We.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[I.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),I.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[I.jsxs("li",{children:[I.jsx("strong",{children:"1."}),"   PDF  "]}),I.jsxs("li",{children:[I.jsx("strong",{children:"2."}),' "AI "  ']}),I.jsxs("li",{children:[I.jsx("strong",{children:"3."})," AI    "]}),I.jsxs("li",{children:[I.jsx("strong",{children:"4."}),"      "]})]}),I.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:I.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",I.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}const fEe=()=>{};var M9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sie=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},hEe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},oie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=a>>2,f=(a&3)<<4|o>>4;let h=(o&15)<<2|u>>6,d=u&63;l||(d=64,s||(h=64)),n.push(r[c],r[f],r[h],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sie(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hEe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||f==null)throw new dEe;const h=a<<2|o>>4;if(n.push(h),u!==64){const d=o<<4&240|u>>2;if(n.push(d),f!==64){const p=u<<6&192|f;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dEe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pEe=function(t){const e=sie(t);return oie.encodeByteArray(e,!0)},XN=function(t){return pEe(t).replace(/\./g,"")},lie=function(t){try{return oie.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mEe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gEe=()=>mEe().__FIREBASE_DEFAULTS__,vEe=()=>{if(typeof process>"u"||typeof M9>"u")return;const t=M9.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yEe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lie(t[1]);return e&&JSON.parse(e)},CM=()=>{try{return fEe()||gEe()||vEe()||yEe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uie=t=>{var e,r;return(r=(e=CM())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},cie=t=>{const e=uie(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fie=()=>{var t;return(t=CM())==null?void 0:t.config},hie=t=>{var e;return(e=CM())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bEe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[XN(JSON.stringify(r)),XN(JSON.stringify(s)),""].join(".")}const qx={};function wEe(){const t={prod:[],emulator:[]};for(const e of Object.keys(qx))qx[e]?t.emulator.push(e):t.prod.push(e);return t}function xEe(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let I9=!1;function h5(t,e){if(typeof window>"u"||typeof document>"u"||!kv(window.location.host)||qx[t]===e||qx[t]||I9)return;qx[t]=e;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",a=wEe().prod.length>0;function s(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,d){h.setAttribute("width","24"),h.setAttribute("id",d),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{I9=!0,s()},h}function c(h,d){h.setAttribute("id",d),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=xEe(n),d=r("text"),p=document.getElementById(d)||document.createElement("span"),m=r("learnmore"),v=document.getElementById(m)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const b=h.element;o(b),c(v,m);const A=u();l(w,y),b.append(w,p,v,A),document.body.appendChild(b)}a?(p.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AEe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($a())}function _Ee(){var e;const t=(e=CM())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EEe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SEe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CEe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TEe(){const t=$a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DEe(){return!_Ee()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NEe(){try{return typeof indexedDB=="object"}catch{return!1}}function PEe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MEe="FirebaseError";class Tc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=MEe,Object.setPrototypeOf(this,Tc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dS.prototype.create)}}class dS{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?IEe(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Tc(i,o,n)}}function IEe(t,e){return t.replace(OEe,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const OEe=/\{\$([^}]+)}/g;function kEe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mv(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(O9(a)&&O9(s)){if(!mv(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function O9(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function bx(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function wx(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function REe(t,e){const r=new FEe(t,e);return r.subscribe.bind(r)}class FEe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");LEe(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Bk),i.error===void 0&&(i.error=Bk),i.complete===void 0&&(i.complete=Bk);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LEe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Bk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){return t&&t._delegate?t._delegate:t}class pp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BEe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new bEe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jEe(e))try{this.getOrInitializeService({instanceIdentifier:pm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=pm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pm){return this.instances.has(e)}getOptions(e=pm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:$Ee(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pm){return this.component?this.component.multipleInstances?e:pm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $Ee(t){return t===pm?void 0:t}function jEe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VEe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new BEe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const UEe={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},zEe=Kt.INFO,qEe={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},HEe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=qEe[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d5{constructor(e){this.name=e,this._logLevel=zEe,this._logHandler=HEe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UEe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const WEe=(t,e)=>e.some(r=>t instanceof r);let k9,R9;function GEe(){return k9||(k9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KEe(){return R9||(R9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pie=new WeakMap,DL=new WeakMap,mie=new WeakMap,$k=new WeakMap,p5=new WeakMap;function XEe(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(tp(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&pie.set(r,t)}).catch(()=>{}),p5.set(e,t),e}function YEe(t){if(DL.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});DL.set(t,e)}let NL={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return DL.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mie.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tp(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QEe(t){NL=t(NL)}function ZEe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(jk(this),e,...r);return mie.set(n,e.sort?e.sort():[e]),tp(n)}:KEe().includes(t)?function(...e){return t.apply(jk(this),e),tp(pie.get(this))}:function(...e){return tp(t.apply(jk(this),e))}}function JEe(t){return typeof t=="function"?ZEe(t):(t instanceof IDBTransaction&&YEe(t),WEe(t,GEe())?new Proxy(t,NL):t)}function tp(t){if(t instanceof IDBRequest)return XEe(t);if($k.has(t))return $k.get(t);const e=JEe(t);return e!==t&&($k.set(t,e),p5.set(e,t)),e}const jk=t=>p5.get(t);function eSe(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=tp(s);return n&&s.addEventListener("upgradeneeded",l=>{n(tp(s.result),l.oldVersion,l.newVersion,tp(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const tSe=["get","getKey","getAll","getAllKeys","count"],rSe=["put","add","delete","clear"],Vk=new Map;function F9(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vk.get(e))return Vk.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=rSe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||tSe.includes(r)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&l.done]))[0]};return Vk.set(e,a),a}QEe(t=>({...t,get:(e,r,n)=>F9(e,r)||t.get(e,r,n),has:(e,r)=>!!F9(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nSe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(iSe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function iSe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const PL="@firebase/app",L9="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new d5("@firebase/app"),aSe="@firebase/app-compat",sSe="@firebase/analytics-compat",oSe="@firebase/analytics",lSe="@firebase/app-check-compat",uSe="@firebase/app-check",cSe="@firebase/auth",fSe="@firebase/auth-compat",hSe="@firebase/database",dSe="@firebase/data-connect",pSe="@firebase/database-compat",mSe="@firebase/functions",gSe="@firebase/functions-compat",vSe="@firebase/installations",ySe="@firebase/installations-compat",bSe="@firebase/messaging",wSe="@firebase/messaging-compat",xSe="@firebase/performance",ASe="@firebase/performance-compat",_Se="@firebase/remote-config",ESe="@firebase/remote-config-compat",SSe="@firebase/storage",CSe="@firebase/storage-compat",TSe="@firebase/firestore",DSe="@firebase/ai",NSe="@firebase/firestore-compat",PSe="firebase",MSe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="[DEFAULT]",ISe={[PL]:"fire-core",[aSe]:"fire-core-compat",[oSe]:"fire-analytics",[sSe]:"fire-analytics-compat",[uSe]:"fire-app-check",[lSe]:"fire-app-check-compat",[cSe]:"fire-auth",[fSe]:"fire-auth-compat",[hSe]:"fire-rtdb",[dSe]:"fire-data-connect",[pSe]:"fire-rtdb-compat",[mSe]:"fire-fn",[gSe]:"fire-fn-compat",[vSe]:"fire-iid",[ySe]:"fire-iid-compat",[bSe]:"fire-fcm",[wSe]:"fire-fcm-compat",[xSe]:"fire-perf",[ASe]:"fire-perf-compat",[_Se]:"fire-rc",[ESe]:"fire-rc-compat",[SSe]:"fire-gcs",[CSe]:"fire-gcs-compat",[TSe]:"fire-fst",[NSe]:"fire-fst-compat",[DSe]:"fire-vertex","fire-js":"fire-js",[PSe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Map,OSe=new Map,IL=new Map;function B9(t,e){try{t.container.addComponent(e)}catch(r){Qf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function gv(t){const e=t.name;if(IL.has(e))return Qf.debug(`There were multiple attempts to register component ${e}.`),!1;IL.set(e,t);for(const r of YN.values())B9(r,t);for(const r of OSe.values())B9(r,t);return!0}function TM(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function go(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kSe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rp=new dS("app","Firebase",kSe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RSe{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=MSe;function gie(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:ML,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw rp.create("bad-app-name",{appName:String(i)});if(r||(r=fie()),!r)throw rp.create("no-options");const a=YN.get(i);if(a){if(mv(r,a.options)&&mv(n,a.config))return a;throw rp.create("duplicate-app",{appName:i})}const s=new VEe(i);for(const l of IL.values())s.addComponent(l);const o=new RSe(r,n,s);return YN.set(i,o),o}function m5(t=ML){const e=YN.get(t);if(!e&&t===ML&&fie())return gie();if(!e)throw rp.create("no-app",{appName:t});return e}function uc(t,e,r){let n=ISe[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qf.warn(s.join(" "));return}gv(new pp(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FSe="firebase-heartbeat-database",LSe=1,PA="firebase-heartbeat-store";let Uk=null;function vie(){return Uk||(Uk=eSe(FSe,LSe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(PA)}catch(r){console.warn(r)}}}}).catch(t=>{throw rp.create("idb-open",{originalErrorMessage:t.message})})),Uk}async function BSe(t){try{const r=(await vie()).transaction(PA),n=await r.objectStore(PA).get(yie(t));return await r.done,n}catch(e){if(e instanceof Tc)Qf.warn(e.message);else{const r=rp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qf.warn(r.message)}}}async function $9(t,e){try{const n=(await vie()).transaction(PA,"readwrite");await n.objectStore(PA).put(e,yie(t)),await n.done}catch(r){if(r instanceof Tc)Qf.warn(r.message);else{const n=rp.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Qf.warn(n.message)}}}function yie(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Se=1024,jSe=30;class VSe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new zSe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=j9();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>jSe){const s=qSe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Qf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=j9(),{heartbeatsToSend:n,unsentEntries:i}=USe(this._heartbeatsCache.heartbeats),a=XN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Qf.warn(r),""}}}function j9(){return new Date().toISOString().substring(0,10)}function USe(t,e=$Se){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),V9(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),V9(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class zSe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NEe()?PEe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await BSe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return $9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return $9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function V9(t){return XN(JSON.stringify({version:2,heartbeats:t})).length}function qSe(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HSe(t){gv(new pp("platform-logger",e=>new nSe(e),"PRIVATE")),gv(new pp("heartbeat",e=>new VSe(e),"PRIVATE")),uc(PL,L9,t),uc(PL,L9,"esm2020"),uc("fire-js","")}HSe("");var WSe="firebase",GSe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uc(WSe,GSe,"app");function bie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KSe=bie,wie=new dS("auth","Firebase",bie());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new d5("@firebase/auth");function XSe(t,...e){QN.logLevel<=Kt.WARN&&QN.warn(`Auth (${Rv}): ${t}`,...e)}function UD(t,...e){QN.logLevel<=Kt.ERROR&&QN.error(`Auth (${Rv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,...e){throw g5(t,...e)}function cc(t,...e){return g5(t,...e)}function xie(t,e,r){const n={...KSe(),[e]:r};return new dS("auth","Firebase",n).create(e,{appName:t.name})}function Ff(t){return xie(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g5(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wie.create(t,...e)}function vt(t,e,...r){if(!t)throw g5(e,...r)}function Nf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw UD(e),new Error(e)}function Zf(t,e){t||Nf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YSe(){return U9()==="http:"||U9()==="https:"}function U9(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QSe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YSe()||SEe()||"connection"in navigator)?navigator.onLine:!0}function ZSe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,r){this.shortDelay=e,this.longDelay=r,Zf(r>e,"Short delay should be less than long delay!"),this.isMobile=AEe()||CEe()}get(){return QSe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t,e){Zf(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JSe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eCe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tCe=new mS(3e4,6e4);function kp(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rp(t,e,r,n,i={}){return _ie(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=pS({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return EEe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&kv(t.emulatorConfig.host)&&(u.credentials="include"),Aie.fetch()(await Eie(t,t.config.apiHost,r,o),u)})}async function _ie(t,e,r){t._canInitEmulator=!1;const n={...JSe,...e};try{const i=new nCe(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw tT(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw tT(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw tT(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw tT(t,"user-disabled",s);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xie(t,c,u);uu(t,c)}}catch(i){if(i instanceof Tc)throw i;uu(t,"network-request-failed",{message:String(i)})}}async function gS(t,e,r,n,i={}){const a=await Rp(t,e,r,n,i);return"mfaPendingCredential"in a&&uu(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Eie(t,e,r,n){const i=`${e}${r}?${n}`,a=t,s=a.config.emulator?v5(t.config,i):`${t.config.apiScheme}://${i}`;return eCe.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function rCe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nCe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(cc(this.auth,"network-request-failed")),tCe.get())})}}function tT(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=cc(t,e,n);return i.customData._tokenResponse=r,i}function z9(t){return t!==void 0&&t.enterprise!==void 0}class iCe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return rCe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aCe(t,e){return Rp(t,"GET","/v2/recaptchaConfig",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sCe(t,e){return Rp(t,"POST","/v1/accounts:delete",e)}async function ZN(t,e){return Rp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oCe(t,e=!1){const r=Vi(t),n=await r.getIdToken(e),i=y5(n);vt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Hx(zk(i.auth_time)),issuedAtTime:Hx(zk(i.iat)),expirationTime:Hx(zk(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function zk(t){return Number(t)*1e3}function y5(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return UD("JWT malformed, contained fewer than 3 sections"),null;try{const i=lie(r);return i?JSON.parse(i):(UD("Failed to decode base64 JWT payload"),null)}catch(i){return UD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function q9(t){const e=y5(t);return vt(e,"internal-error"),vt(typeof e.exp<"u","internal-error"),vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Tc&&lCe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lCe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uCe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hx(this.lastLoginAt),this.creationTime=Hx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t){var f;const e=t.auth,r=await t.getIdToken(),n=await MA(t,ZN(e,{idToken:r}));vt(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=(f=i.providerUserInfo)!=null&&f.length?Sie(i.providerUserInfo):[],s=fCe(t.providerData,a),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),u=o?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new kL(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function cCe(t){const e=Vi(t);await JN(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fCe(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Sie(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hCe(t,e){const r=await _ie(t,{},async()=>{const n=pS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await Eie(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&kv(t.emulatorConfig.host)&&(l.credentials="include"),Aie.fetch()(s,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function dCe(t,e){return Rp(t,"POST","/v2/accounts:revokeToken",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vt(e.idToken,"internal-error"),vt(typeof e.idToken<"u","internal-error"),vt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){vt(e.length!==0,"internal-error");const r=q9(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await hCe(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new f0;return n&&(vt(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(vt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(vt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new f0,this.toJSON())}_performRefresh(){return Nf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t,e){vt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tu{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new uCe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kL(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await MA(this,this.stsTokenManager.getToken(this.auth,e));return vt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oCe(this,e)}reload(){return cCe(this)}_assign(e){this!==e&&(vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new tu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await JN(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(go(this.auth.app))return Promise.reject(Ff(this.auth));const e=await this.getIdToken();return await MA(this,sCe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,s=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,c=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:d,providerData:p,stsTokenManager:m}=r;vt(f&&m,e,"internal-error");const v=f0.fromJSON(this.name,m);vt(typeof f=="string",e,"internal-error"),Dh(n,e.name),Dh(i,e.name),vt(typeof h=="boolean",e,"internal-error"),vt(typeof d=="boolean",e,"internal-error"),Dh(a,e.name),Dh(s,e.name),Dh(o,e.name),Dh(l,e.name),Dh(u,e.name),Dh(c,e.name);const y=new tu({uid:f,auth:e,email:i,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:v,createdAt:u,lastLoginAt:c});return p&&Array.isArray(p)&&(y.providerData=p.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,r,n=!1){const i=new f0;i.updateFromServerResponse(r);const a=new tu({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await JN(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];vt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Sie(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new f0;o.updateFromIdToken(n);const l=new tu({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new kL(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=new Map;function Pf(t){Zf(t instanceof Function,"Expected a class definition");let e=H9.get(t);return e?(Zf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H9.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Cie.type="NONE";const W9=Cie;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e,r){return`firebase:${t}:${e}:${r}`}class h0{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=zD(this.userKey,i.apiKey,a),this.fullPersistenceKey=zD("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await ZN(this.auth,{idToken:e}).catch(()=>{});return r?tu._fromGetAccountInfoResponse(this.auth,r,e):null}return tu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new h0(Pf(W9),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Pf(W9);const s=zD(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const c=await u._get(s);if(c){let f;if(typeof c=="string"){const h=await ZN(e,{idToken:c}).catch(()=>{});if(!h)break;f=await tu._fromGetAccountInfoResponse(e,h,c)}else f=tu._fromJSON(e,c);u!==a&&(o=f),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new h0(a,e,n):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new h0(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pie(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tie(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Iie(e))return"Blackberry";if(Oie(e))return"Webos";if(Die(e))return"Safari";if((e.includes("chrome/")||Nie(e))&&!e.includes("edge/"))return"Chrome";if(Mie(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Tie(t=$a()){return/firefox\//i.test(t)}function Die(t=$a()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nie(t=$a()){return/crios\//i.test(t)}function Pie(t=$a()){return/iemobile/i.test(t)}function Mie(t=$a()){return/android/i.test(t)}function Iie(t=$a()){return/blackberry/i.test(t)}function Oie(t=$a()){return/webos/i.test(t)}function b5(t=$a()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pCe(t=$a()){var e;return b5(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mCe(){return TEe()&&document.documentMode===10}function kie(t=$a()){return b5(t)||Mie(t)||Oie(t)||Iie(t)||/windows phone/i.test(t)||Pie(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rie(t,e=[]){let r;switch(t){case"Browser":r=G9($a());break;case"Worker":r=`${G9($a())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Rv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gCe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vCe(t,e={}){return Rp(t,"GET","/v2/passwordPolicy",kp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yCe=6;class bCe{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??yCe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wCe{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K9(this),this.idTokenSubscription=new K9(this),this.beforeStateQueue=new gCe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wie,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Pf(r)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await h0.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await ZN(this,{idToken:e}),n=await tu._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(go(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await JN(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZSe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(go(this.app))return Promise.reject(Ff(this));const r=e?Vi(e):null;return r&&vt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return go(this.app)?Promise.reject(Ff(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return go(this.app)?Promise.reject(Ff(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vCe(this),r=new bCe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dS("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await dCe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Pf(e)||this._popupRedirectResolver;vt(r,this,"argument-error"),this.redirectPersistenceManager=await h0.create(this,[Pf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{s=!0,l()}}else{const l=e.addObserver(r);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&XSe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fv(t){return Vi(t)}class K9{constructor(e){this.auth=e,this.observer=null,this.addObserver=REe(r=>this.observer=r)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DM={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xCe(t){DM=t}function Fie(t){return DM.loadJS(t)}function ACe(){return DM.recaptchaEnterpriseScript}function _Ce(){return DM.gapiScript}function ECe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SCe{constructor(){this.enterprise=new CCe}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class CCe{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const TCe="recaptcha-enterprise",Lie="NO_RECAPTCHA";class DCe{constructor(e){this.type=TCe,this.auth=Fv(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{aCe(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new iCe(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;z9(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(Lie)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SCe().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{n(this.auth).then(o=>{if(!r&&z9(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ACe();l.length!==0&&(l+=o),Fie(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function X9(t,e,r,n=!1,i=!1){const a=new DCe(t);let s;if(i)s=Lie;else try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function RL(t,e,r,n,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await X9(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X9(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NCe(t,e){const r=TM(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(mv(a,e??{}))return i;uu(i,"already-initialized")}return r.initialize({options:e})}function PCe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Pf);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function MCe(t,e,r){const n=Fv(t);vt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Bie(e),{host:s,port:o}=ICe(e),l=o===null?"":`:${o}`,u={url:`${a}//${s}${l}/`},c=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){vt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),vt(mv(u,n.config.emulator)&&mv(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,kv(s)?(f5(`${a}//${s}${l}`),h5("Auth",!0)):OCe()}function Bie(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ICe(t){const e=Bie(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Y9(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:Y9(s)}}}function Y9(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OCe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Nf("not implemented")}_getIdTokenResponse(e){return Nf("not implemented")}_linkToIdToken(e,r){return Nf("not implemented")}_getReauthenticationResolver(e){return Nf("not implemented")}}async function kCe(t,e){return Rp(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RCe(t,e){return gS(t,"POST","/v1/accounts:signInWithPassword",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FCe(t,e){return gS(t,"POST","/v1/accounts:signInWithEmailLink",kp(t,e))}async function LCe(t,e){return gS(t,"POST","/v1/accounts:signInWithEmailLink",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends w5{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new IA(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new IA(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RL(e,r,"signInWithPassword",RCe);case"emailLink":return FCe(e,{email:this._email,oobCode:this._password});default:uu(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RL(e,n,"signUpPassword",kCe);case"emailLink":return LCe(e,{idToken:r,email:this._email,oobCode:this._password});default:uu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(t,e){return gS(t,"POST","/v1/accounts:signInWithIdp",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BCe="http://localhost";class vv extends w5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new vv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):uu("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const s=new vv(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return d0(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,d0(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,d0(e,r)}buildRequest(){const e={requestUri:BCe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=pS(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ce(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jCe(t){const e=bx(wx(t)).link,r=e?bx(wx(e)).deep_link_id:null,n=bx(wx(t)).deep_link_id;return(n?bx(wx(n)).link:null)||n||r||e||t}class x5{constructor(e){const r=bx(wx(e)),n=r.apiKey??null,i=r.oobCode??null,a=$Ce(r.mode??null);vt(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=jCe(e);try{return new x5(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.providerId=F1.PROVIDER_ID}static credential(e,r){return IA._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=x5.parseLink(r);return vt(n,"argument-error"),IA._fromEmailAndCode(e,n.code,n.tenantId)}}F1.PROVIDER_ID="password";F1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";F1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends $ie{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends vS{constructor(){super("facebook.com")}static credential(e){return vv._fromParams({providerId:qh.PROVIDER_ID,signInMethod:qh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qh.credentialFromTaggedObject(e)}static credentialFromError(e){return qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qh.credential(e.oauthAccessToken)}catch{return null}}}qh.FACEBOOK_SIGN_IN_METHOD="facebook.com";qh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends vS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return vv._fromParams({providerId:Hh.PROVIDER_ID,signInMethod:Hh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Hh.credentialFromTaggedObject(e)}static credentialFromError(e){return Hh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Hh.credential(r,n)}catch{return null}}}Hh.GOOGLE_SIGN_IN_METHOD="google.com";Hh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends vS{constructor(){super("github.com")}static credential(e){return vv._fromParams({providerId:Wh.PROVIDER_ID,signInMethod:Wh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wh.credentialFromTaggedObject(e)}static credentialFromError(e){return Wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wh.credential(e.oauthAccessToken)}catch{return null}}}Wh.GITHUB_SIGN_IN_METHOD="github.com";Wh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends vS{constructor(){super("twitter.com")}static credential(e,r){return vv._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Gh.credentialFromTaggedObject(e)}static credentialFromError(e){return Gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Gh.credential(r,n)}catch{return null}}}Gh.TWITTER_SIGN_IN_METHOD="twitter.com";Gh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VCe(t,e){return gS(t,"POST","/v1/accounts:signUp",kp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await tu._fromIdTokenResponse(e,n,i),s=Q9(n);return new yv({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Q9(n);return new yv({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Q9(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2 extends Tc{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,e2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new e2(e,r,n,i)}}function jie(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?e2._fromErrorAndOperation(t,a,e,n):a})}async function UCe(t,e,r=!1){const n=await MA(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return yv._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zCe(t,e,r=!1){const{auth:n}=t;if(go(n.app))return Promise.reject(Ff(n));const i="reauthenticate";try{const a=await MA(t,jie(n,i,e,t),r);vt(a.idToken,n,"internal-error");const s=y5(a.idToken);vt(s,n,"internal-error");const{sub:o}=s;return vt(t.uid===o,n,"user-mismatch"),yv._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&uu(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vie(t,e,r=!1){if(go(t.app))return Promise.reject(Ff(t));const n="signIn",i=await jie(t,n,e),a=await yv._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function qCe(t,e){return Vie(Fv(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uie(t){const e=Fv(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HCe(t,e,r){if(go(t.app))return Promise.reject(Ff(t));const n=Fv(t),s=await RL(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VCe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Uie(t),l}),o=await yv._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}function WCe(t,e,r){return go(t.app)?Promise.reject(Ff(t)):qCe(Vi(t),F1.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Uie(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zie(t,e){return Vi(t).setPersistence(e)}function GCe(t,e,r,n){return Vi(t).onIdTokenChanged(e,r,n)}function KCe(t,e,r){return Vi(t).beforeAuthStateChanged(e,r)}const t2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qie{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(t2,"1"),this.storage.removeItem(t2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XCe=1e3,YCe=10;class Hie extends qie{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kie(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);mCe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YCe):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},XCe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hie.type="LOCAL";const A5=Hie;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wie extends qie{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Wie.type="SESSION";const Gie=Wie;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QCe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new NM(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async u=>u(r.origin,a)),l=await QCe(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}NM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZCe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const u=_5("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(c),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(){return window}function JCe(t){fc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie(){return typeof fc().WorkerGlobalScope<"u"&&typeof fc().importScripts=="function"}async function eTe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tTe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function rTe(){return Kie()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie="firebaseLocalStorageDb",nTe=1,r2="firebaseLocalStorage",Yie="fbase_key";class yS{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function PM(t,e){return t.transaction([r2],e?"readwrite":"readonly").objectStore(r2)}function iTe(){const t=indexedDB.deleteDatabase(Xie);return new yS(t).toPromise()}function FL(){const t=indexedDB.open(Xie,nTe);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(r2,{keyPath:Yie})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(r2)?e(n):(n.close(),await iTe(),e(await FL()))})})}async function Z9(t,e,r){const n=PM(t,!0).put({[Yie]:e,value:r});return new yS(n).toPromise()}async function aTe(t,e){const r=PM(t,!1).get(e),n=await new yS(r).toPromise();return n===void 0?null:n.value}function J9(t,e){const r=PM(t,!0).delete(e);return new yS(r).toPromise()}const sTe=800,oTe=3;class Qie{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await FL(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>oTe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kie()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=NM._getInstance(rTe()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await eTe(),!this.activeServiceWorker)return;this.sender=new ZCe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tTe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await FL();return await Z9(e,t2,"1"),await J9(e,t2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z9(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>aTe(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>J9(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=PM(i,!1).getAll();return new yS(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sTe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qie.type="LOCAL";const lTe=Qie;new mS(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uTe(t,e){return e?Pf(e):(vt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5 extends w5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return d0(e,this._buildIdpRequest())}_linkToIdToken(e,r){return d0(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return d0(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function cTe(t){return Vie(t.auth,new E5(t),t.bypassAuthState)}function fTe(t){const{auth:e,user:r}=t;return vt(r,e,"internal-error"),zCe(r,new E5(t),t.bypassAuthState)}async function hTe(t){const{auth:e,user:r}=t;return vt(r,e,"internal-error"),UCe(r,new E5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zie{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cTe;case"linkViaPopup":case"linkViaRedirect":return hTe;case"reauthViaPopup":case"reauthViaRedirect":return fTe;default:uu(this.auth,"internal-error")}}resolve(e){Zf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dTe=new mS(2e3,1e4);class Gy extends Zie{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Gy.currentPopupAction&&Gy.currentPopupAction.cancel(),Gy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vt(e,this.auth,"internal-error"),e}async onExecution(){Zf(this.filter.length===1,"Popup operations only handle one event");const e=_5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(cc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dTe.get())};e()}}Gy.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pTe="pendingRedirect",qD=new Map;class mTe extends Zie{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=qD.get(this.auth._key());if(!e){try{const n=await gTe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}qD.set(this.auth._key(),e)}return this.bypassAuthState||qD.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gTe(t,e){const r=bTe(e),n=yTe(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function vTe(t,e){qD.set(t._key(),e)}function yTe(t){return Pf(t._redirectPersistence)}function bTe(t){return zD(pTe,t.config.apiKey,t.name)}async function wTe(t,e,r=!1){if(go(t.app))return Promise.reject(Ff(t));const n=Fv(t),i=uTe(n,e),s=await new mTe(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xTe=10*60*1e3;class ATe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_Te(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Jie(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(cc(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xTe&&this.cachedEventUids.clear(),this.cachedEventUids.has(e7(e))}saveEventToCache(e){this.cachedEventUids.add(e7(e)),this.lastProcessedEventTime=Date.now()}}function e7(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Jie({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _Te(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jie(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ETe(t,e={}){return Rp(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CTe=/^https?/;async function TTe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ETe(t);for(const r of e)try{if(DTe(r))return}catch{}uu(t,"unauthorized-domain")}function DTe(t){const e=OL(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!CTe.test(r))return!1;if(STe.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NTe=new mS(3e4,6e4);function t7(){const t=fc().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function PTe(t){return new Promise((e,r)=>{var i,a,s;function n(){t7(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t7(),r(cc(t,"network-request-failed"))},timeout:NTe.get()})}if((a=(i=fc().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=fc().gapi)!=null&&s.load)n();else{const o=ECe("iframefcb");return fc()[o]=()=>{gapi.load?n():r(cc(t,"network-request-failed"))},Fie(`${_Ce()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw HD=null,e})}let HD=null;function MTe(t){return HD=HD||PTe(t),HD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ITe=new mS(5e3,15e3),OTe="__/auth/iframe",kTe="emulator/auth/iframe",RTe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FTe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LTe(t){const e=t.config;vt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?v5(e,kTe):`https://${t.config.authDomain}/${OTe}`,n={apiKey:e.apiKey,appName:t.name,v:Rv},i=FTe.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${pS(n).slice(1)}`}async function BTe(t){const e=await MTe(t),r=fc().gapi;return vt(r,t,"internal-error"),e.open({where:document.body,url:LTe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RTe,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=cc(t,"network-request-failed"),o=fc().setTimeout(()=>{a(s)},ITe.get());function l(){fc().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Te={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jTe=500,VTe=600,UTe="_blank",zTe="http://localhost";class r7{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qTe(t,e,r,n=jTe,i=VTe){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...$Te,width:n.toString(),height:i.toString(),top:a,left:s},u=$a().toLowerCase();r&&(o=Nie(u)?UTe:r),Tie(u)&&(e=e||zTe,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[d,p])=>`${h}${d}=${p},`,"");if(pCe(u)&&o!=="_self")return HTe(e||"",o),new r7(null);const f=window.open(e||"",o,c);vt(f,t,"popup-blocked");try{f.focus()}catch{}return new r7(f)}function HTe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WTe="__/auth/handler",GTe="emulator/auth/handler",KTe=encodeURIComponent("fac");async function n7(t,e,r,n,i,a){vt(t.config.authDomain,t,"auth-domain-config-required"),vt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Rv,eventId:i};if(e instanceof $ie){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",kEe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))s[c]=f}if(e instanceof vS){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await t._getAppCheckToken(),u=l?`#${KTe}=${encodeURIComponent(l)}`:"";return`${XTe(t)}?${pS(o).slice(1)}${u}`}function XTe({config:t}){return t.emulator?v5(t,GTe):`https://${t.authDomain}/${WTe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="webStorageSupport";class YTe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gie,this._completeRedirectFn=wTe,this._overrideRedirectResult=vTe}async _openPopup(e,r,n,i){var s;Zf((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await n7(e,r,n,OL(),i);return qTe(e,a,_5())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await n7(e,r,n,OL(),i);return JCe(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Zf(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await BTe(e),n=new ATe(e);return r.register("authEvent",i=>(vt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(qk,{type:qk},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[qk];a!==void 0&&r(!!a),uu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=TTe(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return kie()||Die()||b5()}}const QTe=YTe;var i7="@firebase/auth",a7="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZTe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JTe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eDe(t){gv(new pp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;vt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rie(t)},u=new wCe(n,i,a,l);return PCe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),gv(new pp("auth-internal",e=>{const r=Fv(e.getProvider("auth").getImmediate());return(n=>new ZTe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),uc(i7,a7,JTe(t)),uc(i7,a7,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tDe=5*60,rDe=hie("authIdTokenMaxAge")||tDe;let s7=null;const nDe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rDe)return;const i=r==null?void 0:r.token;s7!==i&&(s7=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iDe(t=m5()){const e=TM(t,"auth");if(e.isInitialized())return e.getImmediate();const r=NCe(t,{popupRedirectResolver:QTe,persistence:[lTe,A5,Gie]}),n=hie("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=nDe(a.toString());KCe(r,s,()=>s(r.currentUser)),GCe(r,o=>s(o))}}const i=uie("auth");return i&&MCe(r,`http://${i}`),r}function aDe(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xCe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=cc("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",aDe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eDe("Browser");var o7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var np,eae;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function T(){}T.prototype=E.prototype,S.F=E.prototype,S.prototype=new T,S.prototype.constructor=S,S.D=function(D,N,P){for(var M=Array(arguments.length-2),j=2;j<arguments.length;j++)M[j-2]=arguments[j];return E.prototype[N].apply(D,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,T){T||(T=0);const D=Array(16);if(typeof E=="string")for(var N=0;N<16;++N)D[N]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(N=0;N<16;++N)D[N]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=S.g[0],T=S.g[1],N=S.g[2];let P=S.g[3],M;M=E+(P^T&(N^P))+D[0]+3614090360&4294967295,E=T+(M<<7&4294967295|M>>>25),M=P+(N^E&(T^N))+D[1]+3905402710&4294967295,P=E+(M<<12&4294967295|M>>>20),M=N+(T^P&(E^T))+D[2]+606105819&4294967295,N=P+(M<<17&4294967295|M>>>15),M=T+(E^N&(P^E))+D[3]+3250441966&4294967295,T=N+(M<<22&4294967295|M>>>10),M=E+(P^T&(N^P))+D[4]+4118548399&4294967295,E=T+(M<<7&4294967295|M>>>25),M=P+(N^E&(T^N))+D[5]+1200080426&4294967295,P=E+(M<<12&4294967295|M>>>20),M=N+(T^P&(E^T))+D[6]+2821735955&4294967295,N=P+(M<<17&4294967295|M>>>15),M=T+(E^N&(P^E))+D[7]+4249261313&4294967295,T=N+(M<<22&4294967295|M>>>10),M=E+(P^T&(N^P))+D[8]+1770035416&4294967295,E=T+(M<<7&4294967295|M>>>25),M=P+(N^E&(T^N))+D[9]+2336552879&4294967295,P=E+(M<<12&4294967295|M>>>20),M=N+(T^P&(E^T))+D[10]+4294925233&4294967295,N=P+(M<<17&4294967295|M>>>15),M=T+(E^N&(P^E))+D[11]+2304563134&4294967295,T=N+(M<<22&4294967295|M>>>10),M=E+(P^T&(N^P))+D[12]+1804603682&4294967295,E=T+(M<<7&4294967295|M>>>25),M=P+(N^E&(T^N))+D[13]+4254626195&4294967295,P=E+(M<<12&4294967295|M>>>20),M=N+(T^P&(E^T))+D[14]+2792965006&4294967295,N=P+(M<<17&4294967295|M>>>15),M=T+(E^N&(P^E))+D[15]+1236535329&4294967295,T=N+(M<<22&4294967295|M>>>10),M=E+(N^P&(T^N))+D[1]+4129170786&4294967295,E=T+(M<<5&4294967295|M>>>27),M=P+(T^N&(E^T))+D[6]+3225465664&4294967295,P=E+(M<<9&4294967295|M>>>23),M=N+(E^T&(P^E))+D[11]+643717713&4294967295,N=P+(M<<14&4294967295|M>>>18),M=T+(P^E&(N^P))+D[0]+3921069994&4294967295,T=N+(M<<20&4294967295|M>>>12),M=E+(N^P&(T^N))+D[5]+3593408605&4294967295,E=T+(M<<5&4294967295|M>>>27),M=P+(T^N&(E^T))+D[10]+38016083&4294967295,P=E+(M<<9&4294967295|M>>>23),M=N+(E^T&(P^E))+D[15]+3634488961&4294967295,N=P+(M<<14&4294967295|M>>>18),M=T+(P^E&(N^P))+D[4]+3889429448&4294967295,T=N+(M<<20&4294967295|M>>>12),M=E+(N^P&(T^N))+D[9]+568446438&4294967295,E=T+(M<<5&4294967295|M>>>27),M=P+(T^N&(E^T))+D[14]+3275163606&4294967295,P=E+(M<<9&4294967295|M>>>23),M=N+(E^T&(P^E))+D[3]+4107603335&4294967295,N=P+(M<<14&4294967295|M>>>18),M=T+(P^E&(N^P))+D[8]+1163531501&4294967295,T=N+(M<<20&4294967295|M>>>12),M=E+(N^P&(T^N))+D[13]+2850285829&4294967295,E=T+(M<<5&4294967295|M>>>27),M=P+(T^N&(E^T))+D[2]+4243563512&4294967295,P=E+(M<<9&4294967295|M>>>23),M=N+(E^T&(P^E))+D[7]+1735328473&4294967295,N=P+(M<<14&4294967295|M>>>18),M=T+(P^E&(N^P))+D[12]+2368359562&4294967295,T=N+(M<<20&4294967295|M>>>12),M=E+(T^N^P)+D[5]+4294588738&4294967295,E=T+(M<<4&4294967295|M>>>28),M=P+(E^T^N)+D[8]+2272392833&4294967295,P=E+(M<<11&4294967295|M>>>21),M=N+(P^E^T)+D[11]+1839030562&4294967295,N=P+(M<<16&4294967295|M>>>16),M=T+(N^P^E)+D[14]+4259657740&4294967295,T=N+(M<<23&4294967295|M>>>9),M=E+(T^N^P)+D[1]+2763975236&4294967295,E=T+(M<<4&4294967295|M>>>28),M=P+(E^T^N)+D[4]+1272893353&4294967295,P=E+(M<<11&4294967295|M>>>21),M=N+(P^E^T)+D[7]+4139469664&4294967295,N=P+(M<<16&4294967295|M>>>16),M=T+(N^P^E)+D[10]+3200236656&4294967295,T=N+(M<<23&4294967295|M>>>9),M=E+(T^N^P)+D[13]+681279174&4294967295,E=T+(M<<4&4294967295|M>>>28),M=P+(E^T^N)+D[0]+3936430074&4294967295,P=E+(M<<11&4294967295|M>>>21),M=N+(P^E^T)+D[3]+3572445317&4294967295,N=P+(M<<16&4294967295|M>>>16),M=T+(N^P^E)+D[6]+76029189&4294967295,T=N+(M<<23&4294967295|M>>>9),M=E+(T^N^P)+D[9]+3654602809&4294967295,E=T+(M<<4&4294967295|M>>>28),M=P+(E^T^N)+D[12]+3873151461&4294967295,P=E+(M<<11&4294967295|M>>>21),M=N+(P^E^T)+D[15]+530742520&4294967295,N=P+(M<<16&4294967295|M>>>16),M=T+(N^P^E)+D[2]+3299628645&4294967295,T=N+(M<<23&4294967295|M>>>9),M=E+(N^(T|~P))+D[0]+4096336452&4294967295,E=T+(M<<6&4294967295|M>>>26),M=P+(T^(E|~N))+D[7]+1126891415&4294967295,P=E+(M<<10&4294967295|M>>>22),M=N+(E^(P|~T))+D[14]+2878612391&4294967295,N=P+(M<<15&4294967295|M>>>17),M=T+(P^(N|~E))+D[5]+4237533241&4294967295,T=N+(M<<21&4294967295|M>>>11),M=E+(N^(T|~P))+D[12]+1700485571&4294967295,E=T+(M<<6&4294967295|M>>>26),M=P+(T^(E|~N))+D[3]+2399980690&4294967295,P=E+(M<<10&4294967295|M>>>22),M=N+(E^(P|~T))+D[10]+4293915773&4294967295,N=P+(M<<15&4294967295|M>>>17),M=T+(P^(N|~E))+D[1]+2240044497&4294967295,T=N+(M<<21&4294967295|M>>>11),M=E+(N^(T|~P))+D[8]+1873313359&4294967295,E=T+(M<<6&4294967295|M>>>26),M=P+(T^(E|~N))+D[15]+4264355552&4294967295,P=E+(M<<10&4294967295|M>>>22),M=N+(E^(P|~T))+D[6]+2734768916&4294967295,N=P+(M<<15&4294967295|M>>>17),M=T+(P^(N|~E))+D[13]+1309151649&4294967295,T=N+(M<<21&4294967295|M>>>11),M=E+(N^(T|~P))+D[4]+4149444226&4294967295,E=T+(M<<6&4294967295|M>>>26),M=P+(T^(E|~N))+D[11]+3174756917&4294967295,P=E+(M<<10&4294967295|M>>>22),M=N+(E^(P|~T))+D[2]+718787259&4294967295,N=P+(M<<15&4294967295|M>>>17),M=T+(P^(N|~E))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+P&4294967295}n.prototype.v=function(S,E){E===void 0&&(E=S.length);const T=E-this.blockSize,D=this.C;let N=this.h,P=0;for(;P<E;){if(N==0)for(;P<=T;)i(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<E;)if(D[N++]=S.charCodeAt(P++),N==this.blockSize){i(this,D),N=0;break}}else for(;P<E;)if(D[N++]=S[P++],N==this.blockSize){i(this,D),N=0;break}}this.h=N,this.o+=E},n.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var T=S.length-8;T<S.length;++T)S[T]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,T=0;T<4;++T)for(let D=0;D<32;D+=8)S[E++]=this.g[T]>>>D&255;return S};function a(S,E){var T=o;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=E(S)}function s(S,E){this.h=E;const T=[];let D=!0;for(let N=S.length-1;N>=0;N--){const P=S[N]|0;D&&P==E||(T[N]=P,D=!1)}this.g=T}var o={};function l(S){return-128<=S&&S<128?a(S,function(E){return new s([E|0],E<0?-1:0)}):new s([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return v(u(-S));const E=[];let T=1;for(let D=0;S>=T;D++)E[D]=S/T|0,T*=4294967296;return new s(E,0)}function c(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return v(c(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(E,8));let D=f;for(let P=0;P<S.length;P+=8){var N=Math.min(8,S.length-P);const M=parseInt(S.substring(P,P+N),E);N<8?(N=u(Math.pow(E,N)),D=D.j(N).add(u(M))):(D=D.j(T),D=D.add(u(M)))}return D}var f=l(0),h=l(1),d=l(16777216);t=s.prototype,t.m=function(){if(m(this))return-v(this).m();let S=0,E=1;for(let T=0;T<this.g.length;T++){const D=this.i(T);S+=(D>=0?D:4294967296+D)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+v(this).toString(S);const E=u(Math.pow(S,6));var T=this;let D="";for(;;){const N=A(T,E).g;T=y(T,N.j(E));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(S);if(T=N,p(T))return P+D;for(;P.length<6;)P="0"+P;D=P+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function m(S){return S.h==-1}t.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function v(S){const E=S.g.length,T=[];for(let D=0;D<E;D++)T[D]=~S.g[D];return new s(T,~S.h).add(h)}t.abs=function(){return m(this)?v(this):this},t.add=function(S){const E=Math.max(this.g.length,S.g.length),T=[];let D=0;for(let N=0;N<=E;N++){let P=D+(this.i(N)&65535)+(S.i(N)&65535),M=(P>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);D=M>>>16,P&=65535,M&=65535,T[N]=M<<16|P}return new s(T,T[T.length-1]&-2147483648?-1:0)};function y(S,E){return S.add(v(E))}t.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?v(this).j(v(S)):v(v(this).j(S));if(m(S))return v(this.j(v(S)));if(this.l(d)<0&&S.l(d)<0)return u(this.m()*S.m());const E=this.g.length+S.g.length,T=[];for(var D=0;D<2*E;D++)T[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<S.g.length;N++){const P=this.i(D)>>>16,M=this.i(D)&65535,j=S.i(N)>>>16,K=S.i(N)&65535;T[2*D+2*N]+=M*K,w(T,2*D+2*N),T[2*D+2*N+1]+=P*K,w(T,2*D+2*N+1),T[2*D+2*N+1]+=M*j,w(T,2*D+2*N+1),T[2*D+2*N+2]+=P*j,w(T,2*D+2*N+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)};function w(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function b(S,E){this.g=S,this.h=E}function A(S,E){if(p(E))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return E=A(v(S),E),new b(v(E.g),v(E.h));if(m(E))return E=A(S,v(E)),new b(v(E.g),E.h);if(S.g.length>30){if(m(S)||m(E))throw Error("slowDivide_ only works with positive integers.");for(var T=h,D=E;D.l(S)<=0;)T=x(T),D=x(D);var N=_(T,1),P=_(D,1);for(D=_(D,2),T=_(T,2);!p(D);){var M=P.add(D);M.l(S)<=0&&(N=N.add(T),P=M),D=_(D,1),T=_(T,1)}return E=y(S,N.j(E)),new b(N,E)}for(N=f;S.l(E)>=0;){for(T=Math.max(1,Math.floor(S.m()/E.m())),D=Math.ceil(Math.log(T)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),P=u(T),M=P.j(E);m(M)||M.l(S)>0;)T-=D,P=u(T),M=P.j(E);p(P)&&(P=h),N=N.add(P),S=y(S,M)}return new b(N,S)}t.B=function(S){return A(this,S).h},t.and=function(S){const E=Math.max(this.g.length,S.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)&S.i(D);return new s(T,this.h&S.h)},t.or=function(S){const E=Math.max(this.g.length,S.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)|S.i(D);return new s(T,this.h|S.h)},t.xor=function(S){const E=Math.max(this.g.length,S.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)^S.i(D);return new s(T,this.h^S.h)};function x(S){const E=S.g.length+1,T=[];for(let D=0;D<E;D++)T[D]=S.i(D)<<1|S.i(D-1)>>>31;return new s(T,S.h)}function _(S,E){const T=E>>5;E%=32;const D=S.g.length-T,N=[];for(let P=0;P<D;P++)N[P]=E>0?S.i(P+T)>>>E|S.i(P+T+1)<<32-E:S.i(P+T);return new s(N,S.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,eae=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=c,np=s}).apply(typeof o7<"u"?o7:typeof self<"u"?self:typeof window<"u"?window:{});var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tae,xx,rae,WD,LL,nae,iae,aae;(function(){var t,e=Object.defineProperty;function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof rT=="object"&&rT];for(var F=0;F<C.length;++F){var U=C[F];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=r(this);function i(C,F){if(F)e:{var U=n;C=C.split(".");for(var J=0;J<C.length-1;J++){var be=C[J];if(!(be in U))break e;U=U[be]}C=C[C.length-1],J=U[C],F=F(J),F!=J&&F!=null&&e(U,C,{configurable:!0,writable:!0,value:F})}}i("Symbol.dispose",function(C){return C||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(C){return C||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(C){return C||function(F){var U=[],J;for(J in F)Object.prototype.hasOwnProperty.call(F,J)&&U.push([J,F[J]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(C){var F=typeof C;return F=="object"&&C!=null||F=="function"}function l(C,F,U){return C.call.apply(C.bind,arguments)}function u(C,F,U){return u=l,u.apply(null,arguments)}function c(C,F){var U=Array.prototype.slice.call(arguments,1);return function(){var J=U.slice();return J.push.apply(J,arguments),C.apply(this,J)}}function f(C,F){function U(){}U.prototype=F.prototype,C.Z=F.prototype,C.prototype=new U,C.prototype.constructor=C,C.Ob=function(J,be,Ae){for(var je=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)je[jt-2]=arguments[jt];return F.prototype[be].apply(J,je)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?C=>C&&AsyncContext.Snapshot.wrap(C):C=>C;function d(C){const F=C.length;if(F>0){const U=Array(F);for(let J=0;J<F;J++)U[J]=C[J];return U}return[]}function p(C,F){for(let J=1;J<arguments.length;J++){const be=arguments[J];var U=typeof be;if(U=U!="object"?U:be?Array.isArray(be)?"array":U:"null",U=="array"||U=="object"&&typeof be.length=="number"){U=C.length||0;const Ae=be.length||0;C.length=U+Ae;for(let je=0;je<Ae;je++)C[U+je]=be[je]}else C.push(be)}}class m{constructor(F,U){this.i=F,this.j=U,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function v(C){s.setTimeout(()=>{throw C},0)}function y(){var C=S;let F=null;return C.g&&(F=C.g,C.g=C.g.next,C.g||(C.h=null),F.next=null),F}class w{constructor(){this.h=this.g=null}add(F,U){const J=b.get();J.set(F,U),this.h?this.h.next=J:this.g=J,this.h=J}}var b=new m(()=>new A,C=>C.reset());class A{constructor(){this.next=this.g=this.h=null}set(F,U){this.h=F,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let x,_=!1,S=new w,E=()=>{const C=Promise.resolve(void 0);x=()=>{C.then(T)}};function T(){for(var C;C=y();){try{C.h.call(C.g)}catch(U){v(U)}var F=b;F.j(C),F.h<100&&(F.h++,C.next=F.g,F.g=C)}_=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(C,F){this.type=C,this.g=this.target=F,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var C=!1,F=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const U=()=>{};s.addEventListener("test",U,F),s.removeEventListener("test",U,F)}catch{}return C}();function M(C){return/^[\s\xa0]*$/.test(C)}function j(C,F){N.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C&&this.init(C,F)}f(j,N),j.prototype.init=function(C,F){const U=this.type=C.type,J=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;this.target=C.target||C.srcElement,this.g=F,F=C.relatedTarget,F||(U=="mouseover"?F=C.fromElement:U=="mouseout"&&(F=C.toElement)),this.relatedTarget=F,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=C.pointerType,this.state=C.state,this.i=C,C.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),k=0;function V(C,F,U,J,be){this.listener=C,this.proxy=null,this.src=F,this.type=U,this.capture=!!J,this.ha=be,this.key=++k,this.da=this.fa=!1}function q(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function H(C,F,U){for(const J in C)F.call(U,C[J],J,C)}function te(C,F){for(const U in C)F.call(void 0,C[U],U,C)}function ue(C){const F={};for(const U in C)F[U]=C[U];return F}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(C,F){let U,J;for(let be=1;be<arguments.length;be++){J=arguments[be];for(U in J)C[U]=J[U];for(let Ae=0;Ae<re.length;Ae++)U=re[Ae],Object.prototype.hasOwnProperty.call(J,U)&&(C[U]=J[U])}}function ie(C){this.src=C,this.g={},this.h=0}ie.prototype.add=function(C,F,U,J,be){const Ae=C.toString();C=this.g[Ae],C||(C=this.g[Ae]=[],this.h++);const je=pe(C,F,J,be);return je>-1?(F=C[je],U||(F.fa=!1)):(F=new V(F,this.src,Ae,!!J,be),F.fa=U,C.push(F)),F};function X(C,F){const U=F.type;if(U in C.g){var J=C.g[U],be=Array.prototype.indexOf.call(J,F,void 0),Ae;(Ae=be>=0)&&Array.prototype.splice.call(J,be,1),Ae&&(q(F),C.g[U].length==0&&(delete C.g[U],C.h--))}}function pe(C,F,U,J){for(let be=0;be<C.length;++be){const Ae=C[be];if(!Ae.da&&Ae.listener==F&&Ae.capture==!!U&&Ae.ha==J)return be}return-1}var de="closure_lm_"+(Math.random()*1e6|0),ae={};function z(C,F,U,J,be){if(Array.isArray(F)){for(let Ae=0;Ae<F.length;Ae++)z(C,F[Ae],U,J,be);return null}return U=Be(U),C&&C[K]?C.J(F,U,o(J)?!!J.capture:!1,be):ne(C,F,U,!1,J,be)}function ne(C,F,U,J,be,Ae){if(!F)throw Error("Invalid event type");const je=o(be)?!!be.capture:!!be;let jt=Le(C);if(jt||(C[de]=jt=new ie(C)),U=jt.add(F,U,J,je,Ae),U.proxy)return U;if(J=fe(),U.proxy=J,J.src=C,J.listener=U,C.addEventListener)P||(be=je),be===void 0&&(be=!1),C.addEventListener(F.toString(),J,be);else if(C.attachEvent)C.attachEvent(me(F.toString()),J);else if(C.addListener&&C.removeListener)C.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return U}function fe(){function C(U){return F.call(C.src,C.listener,U)}const F=De;return C}function Q(C,F,U,J,be){if(Array.isArray(F))for(var Ae=0;Ae<F.length;Ae++)Q(C,F[Ae],U,J,be);else J=o(J)?!!J.capture:!!J,U=Be(U),C&&C[K]?(C=C.i,Ae=String(F).toString(),Ae in C.g&&(F=C.g[Ae],U=pe(F,U,J,be),U>-1&&(q(F[U]),Array.prototype.splice.call(F,U,1),F.length==0&&(delete C.g[Ae],C.h--)))):C&&(C=Le(C))&&(F=C.g[F.toString()],C=-1,F&&(C=pe(F,U,J,be)),(U=C>-1?F[C]:null)&&ye(U))}function ye(C){if(typeof C!="number"&&C&&!C.da){var F=C.src;if(F&&F[K])X(F.i,C);else{var U=C.type,J=C.proxy;F.removeEventListener?F.removeEventListener(U,J,C.capture):F.detachEvent?F.detachEvent(me(U),J):F.addListener&&F.removeListener&&F.removeListener(J),(U=Le(F))?(X(U,C),U.h==0&&(U.src=null,F[de]=null)):q(C)}}}function me(C){return C in ae?ae[C]:ae[C]="on"+C}function De(C,F){if(C.da)C=!0;else{F=new j(F,this);const U=C.listener,J=C.ha||C.src;C.fa&&ye(C),C=U.call(J,F)}return C}function Le(C){return C=C[de],C instanceof ie?C:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(C){return typeof C=="function"?C:(C[ze]||(C[ze]=function(F){return C.handleEvent(F)}),C[ze])}function Ve(){D.call(this),this.i=new ie(this),this.M=this,this.G=null}f(Ve,D),Ve.prototype[K]=!0,Ve.prototype.removeEventListener=function(C,F,U,J){Q(this,C,F,U,J)};function Ke(C,F){var U,J=C.G;if(J)for(U=[];J;J=J.G)U.push(J);if(C=C.M,J=F.type||F,typeof F=="string")F=new N(F,C);else if(F instanceof N)F.target=F.target||C;else{var be=F;F=new N(J,C),L(F,be)}be=!0;let Ae,je;if(U)for(je=U.length-1;je>=0;je--)Ae=F.g=U[je],be=ee(Ae,J,!0,F)&&be;if(Ae=F.g=C,be=ee(Ae,J,!0,F)&&be,be=ee(Ae,J,!1,F)&&be,U)for(je=0;je<U.length;je++)Ae=F.g=U[je],be=ee(Ae,J,!1,F)&&be}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var C=this.i;for(const F in C.g){const U=C.g[F];for(let J=0;J<U.length;J++)q(U[J]);delete C.g[F],C.h--}}this.G=null},Ve.prototype.J=function(C,F,U,J){return this.i.add(String(C),F,!1,U,J)},Ve.prototype.K=function(C,F,U,J){return this.i.add(String(C),F,!0,U,J)};function ee(C,F,U,J){if(F=C.i.g[String(F)],!F)return!0;F=F.concat();let be=!0;for(let Ae=0;Ae<F.length;++Ae){const je=F[Ae];if(je&&!je.da&&je.capture==U){const jt=je.listener,ti=je.ha||je.src;je.fa&&X(C.i,je),be=jt.call(ti,J)!==!1&&be}}return be&&!J.defaultPrevented}function ce(C,F){if(typeof C!="function")if(C&&typeof C.handleEvent=="function")C=u(C.handleEvent,C);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:s.setTimeout(C,F||0)}function G(C){C.g=ce(()=>{C.g=null,C.i&&(C.i=!1,G(C))},C.l);const F=C.h;C.h=null,C.m.apply(null,F)}class Z extends D{constructor(F,U){super(),this.m=F,this.l=U,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(C){D.call(this),this.h=C,this.g={}}f(oe,D);var he=[];function ve(C){H(C.g,function(F,U){this.g.hasOwnProperty(U)&&ye(F)},C),C.g={}}oe.prototype.N=function(){oe.Z.N.call(this),ve(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=s.JSON.stringify,Pe=s.JSON.parse,Se=class{stringify(C){return s.JSON.stringify(C,void 0)}parse(C){return s.JSON.parse(C,void 0)}};function $e(){}function Ce(){}var rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){N.call(this,"d")}f(Mt,N);function Wt(){N.call(this,"c")}f(Wt,N);var ht={},_r=null;function B(){return _r=_r||new Ve}ht.Ia="serverreachability";function le(C){N.call(this,ht.Ia,C)}f(le,N);function we(C){const F=B();Ke(F,new le(F))}ht.STAT_EVENT="statevent";function Ie(C,F){N.call(this,ht.STAT_EVENT,C),this.stat=F}f(Ie,N);function qe(C){const F=B();Ke(F,new Ie(F,C))}ht.Ja="timingevent";function dt(C,F){N.call(this,ht.Ja,C),this.size=F}f(dt,N);function Mn(C,F){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){C()},F)}function Oo(){this.g=!0}Oo.prototype.ua=function(){this.g=!1};function lw(C,F,U,J,be,Ae){C.info(function(){if(C.g)if(Ae){var je="",jt=Ae.split("&");for(let Ir=0;Ir<jt.length;Ir++){var ti=jt[Ir].split("=");if(ti.length>1){const Ai=ti[0];ti=ti[1];const Eu=Ai.split("_");je=Eu.length>=2&&Eu[1]=="type"?je+(Ai+"="+ti+"&"):je+(Ai+"=redacted&")}}}else je=null;else je=Ae;return"XMLHTTP REQ ("+J+") [attempt "+be+"]: "+F+`
`+U+`
`+je})}function SO(C,F,U,J,be,Ae,je){C.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+be+"]: "+F+`
`+U+`
`+Ae+" "+je})}function wh(C,F,U,J){C.info(function(){return"XMLHTTP TEXT ("+F+"): "+TO(C,U)+(J?" "+J:"")})}function CO(C,F){C.info(function(){return"TIMEOUT: "+F})}Oo.prototype.info=function(){};function TO(C,F){if(!C.g)return F;if(!F)return null;try{const Ae=JSON.parse(F);if(Ae){for(C=0;C<Ae.length;C++)if(Array.isArray(Ae[C])){var U=Ae[C];if(!(U.length<2)){var J=U[1];if(Array.isArray(J)&&!(J.length<1)){var be=J[0];if(be!="noop"&&be!="stop"&&be!="close")for(let je=1;je<J.length;je++)J[je]=""}}}}return ge(Ae)}catch{return F}}var Jv={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fC;function uw(){}f(uw,$e),uw.prototype.g=function(){return new XMLHttpRequest},fC=new uw;function Jp(C){return encodeURIComponent(String(C))}function DO(C){var F=1;C=C.split(":");const U=[];for(;F>0&&C.length;)U.push(C.shift()),F--;return C.length&&U.push(C.join(":")),U}function Au(C,F,U,J){this.j=C,this.i=F,this.l=U,this.S=J||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hC}function hC(){this.i=null,this.g="",this.h=!1}var dC={},cw={};function fw(C,F,U){C.M=1,C.A=yC(_u(F)),C.u=U,C.R=!0,pC(C,null)}function pC(C,F){C.F=Date.now(),ey(C),C.B=_u(C.A);var U=C.B,J=C.S;Array.isArray(J)||(J=[String(J)]),sU(U.i,"t",J),C.C=0,U=C.j.L,C.h=new hC,C.g=EU(C.j,U?F:null,!C.u),C.P>0&&(C.O=new Z(u(C.Y,C,C.g),C.P)),F=C.V,U=C.g,J=C.ba;var be="readystatechange";Array.isArray(be)||(be&&(he[0]=be.toString()),be=he);for(let Ae=0;Ae<be.length;Ae++){const je=z(U,be[Ae],J||F.handleEvent,!1,F.h||F);if(!je)break;F.g[je.key]=je}F=C.J?ue(C.J):{},C.u?(C.v||(C.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.B,C.v,C.u,F)):(C.v="GET",C.g.ea(C.B,C.v,null,F)),we(),lw(C.i,C.v,C.B,C.l,C.S,C.u)}Au.prototype.ba=function(C){C=C.target;const F=this.O;F&&Eh(C)==3?F.j():this.Y(C)},Au.prototype.Y=function(C){try{if(C==this.g)e:{const jt=Eh(this.g),ti=this.g.ya(),Ir=this.g.ca();if(!(jt<3)&&(jt!=3||this.g&&(this.h.h||this.g.la()||dU(this.g)))){this.K||jt!=4||ti==7||(ti==8||Ir<=0?we(3):we(2)),hw(this);var F=this.g.ca();this.X=F;var U=NO(this);if(this.o=F==200,SO(this.i,this.v,this.B,this.l,this.S,jt,F),this.o){if(this.U&&!this.L){t:{if(this.g){var J,be=this.g;if((J=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(J)){var Ae=J;break t}}Ae=null}if(C=Ae)wh(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nr(this,C);else{this.o=!1,this.m=3,qe(12),Us(this),em(this);break e}}if(this.R){C=!0;let Ai;for(;!this.K&&this.C<U.length;)if(Ai=PO(this,U),Ai==cw){jt==4&&(this.m=4,qe(14),C=!1),wh(this.i,this.l,null,"[Incomplete Response]");break}else if(Ai==dC){this.m=4,qe(15),wh(this.i,this.l,U,"[Invalid Chunk]"),C=!1;break}else wh(this.i,this.l,Ai,null),nr(this,Ai);if(mC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||U.length!=0||this.h.h||(this.m=1,qe(16),C=!1),this.o=this.o&&C,!C)wh(this.i,this.l,U,"[Invalid Chunked Response]"),Us(this),em(this);else if(U.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),LO(je),je.P=!0,qe(11))}}else wh(this.i,this.l,U,null),nr(this,U);jt==4&&Us(this),this.o&&!this.K&&(jt==4?wU(this.j,this):(this.o=!1,ey(this)))}else Ime(this.g),F==400&&U.indexOf("Unknown SID")>0?(this.m=3,qe(12)):(this.m=0,qe(13)),Us(this),em(this)}}}catch{}finally{}};function NO(C){if(!mC(C))return C.g.la();const F=dU(C.g);if(F==="")return"";let U="";const J=F.length,be=Eh(C.g)==4;if(!C.h.i){if(typeof TextDecoder>"u")return Us(C),em(C),"";C.h.i=new s.TextDecoder}for(let Ae=0;Ae<J;Ae++)C.h.h=!0,U+=C.h.i.decode(F[Ae],{stream:!(be&&Ae==J-1)});return F.length=0,C.h.g+=U,C.C=0,C.h.g}function mC(C){return C.g?C.v=="GET"&&C.M!=2&&C.j.Aa:!1}function PO(C,F){var U=C.C,J=F.indexOf(`
`,U);return J==-1?cw:(U=Number(F.substring(U,J)),isNaN(U)?dC:(J+=1,J+U>F.length?cw:(F=F.slice(J,J+U),C.C=J+U,F)))}Au.prototype.cancel=function(){this.K=!0,Us(this)};function ey(C){C.T=Date.now()+C.H,gC(C,C.H)}function gC(C,F){if(C.D!=null)throw Error("WatchDog timer not null");C.D=Mn(u(C.aa,C),F)}function hw(C){C.D&&(s.clearTimeout(C.D),C.D=null)}Au.prototype.aa=function(){this.D=null;const C=Date.now();C-this.T>=0?(CO(this.i,this.B),this.M!=2&&(we(),qe(17)),Us(this),this.m=2,em(this)):gC(this,this.T-C)};function em(C){C.j.I==0||C.K||wU(C.j,C)}function Us(C){hw(C);var F=C.O;F&&typeof F.dispose=="function"&&F.dispose(),C.O=null,ve(C.V),C.g&&(F=C.g,C.g=null,F.abort(),F.dispose())}function nr(C,F){try{var U=C.j;if(U.I!=0&&(U.g==C||dw(U.h,C))){if(!C.L&&dw(U.h,C)&&U.I==3){try{var J=U.Ba.g.parse(F)}catch{J=null}if(Array.isArray(J)&&J.length==3){var be=J;if(be[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<C.F)_C(U),xC(U);else break e;FO(U),qe(18)}}else U.xa=be[1],0<U.xa-U.K&&be[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=Mn(u(U.Va,U),6e3));xh(U.h)<=1&&U.ta&&(U.ta=void 0)}else nm(U,11)}else if((C.L||U.g==C)&&_C(U),!M(F))for(be=U.Ba.g.parse(F),F=0;F<be.length;F++){let Ir=be[F];const Ai=Ir[0];if(!(Ai<=U.K))if(U.K=Ai,Ir=Ir[1],U.I==2)if(Ir[0]=="c"){U.M=Ir[1],U.ba=Ir[2];const Eu=Ir[3];Eu!=null&&(U.ka=Eu,U.j.info("VER="+U.ka));const im=Ir[4];im!=null&&(U.za=im,U.j.info("SVER="+U.za));const Sh=Ir[5];Sh!=null&&typeof Sh=="number"&&Sh>0&&(J=1.5*Sh,U.O=J,U.j.info("backChannelRequestTimeoutMs_="+J)),J=U;const Ch=C.g;if(Ch){const SC=Ch.g?Ch.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(SC){var Ae=J.h;Ae.g||SC.indexOf("spdy")==-1&&SC.indexOf("quic")==-1&&SC.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(MO(Ae,Ae.h),Ae.h=null))}if(J.G){const BO=Ch.g?Ch.g.getResponseHeader("X-HTTP-Session-Id"):null;BO&&(J.wa=BO,Wr(J.J,J.G,BO))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-C.F,U.j.info("Handshake RTT: "+U.T+"ms")),J=U;var je=C;if(J.na=_U(J,J.L?J.ba:null,J.W),je.L){JV(J.h,je);var jt=je,ti=J.O;ti&&(jt.H=ti),jt.D&&(hw(jt),ey(jt)),J.g=je}else yU(J);U.i.length>0&&AC(U)}else Ir[0]!="stop"&&Ir[0]!="close"||nm(U,7);else U.I==3&&(Ir[0]=="stop"||Ir[0]=="close"?Ir[0]=="stop"?nm(U,7):RO(U):Ir[0]!="noop"&&U.l&&U.l.qa(Ir),U.A=0)}}we(4)}catch{}}var ba=class{constructor(C,F){this.g=C,this.map=F}};function vC(C){this.l=C||10,s.PerformanceNavigationTiming?(C=s.performance.getEntriesByType("navigation"),C=C.length>0&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tm(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function xh(C){return C.h?1:C.g?C.g.size:0}function dw(C,F){return C.h?C.h==F:C.g?C.g.has(F):!1}function MO(C,F){C.g?C.g.add(F):C.h=F}function JV(C,F){C.h&&C.h==F?C.h=null:C.g&&C.g.has(F)&&C.g.delete(F)}vC.prototype.cancel=function(){if(this.i=eU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function eU(C){if(C.h!=null)return C.i.concat(C.h.G);if(C.g!=null&&C.g.size!==0){let F=C.i;for(const U of C.g.values())F=F.concat(U.G);return F}return d(C.i)}var tU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wme(C,F){if(C){C=C.split("&");for(let U=0;U<C.length;U++){const J=C[U].indexOf("=");let be,Ae=null;J>=0?(be=C[U].substring(0,J),Ae=C[U].substring(J+1)):be=C[U],F(be,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function Ah(C){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;C instanceof Ah?(this.l=C.l,pw(this,C.j),this.o=C.o,this.g=C.g,mw(this,C.u),this.h=C.h,IO(this,oU(C.i)),this.m=C.m):C&&(F=String(C).match(tU))?(this.l=!1,pw(this,F[1]||"",!0),this.o=gw(F[2]||""),this.g=gw(F[3]||"",!0),mw(this,F[4]),this.h=gw(F[5]||"",!0),IO(this,F[6]||"",!0),this.m=gw(F[7]||"")):(this.l=!1,this.i=new yw(null,this.l))}Ah.prototype.toString=function(){const C=[];var F=this.j;F&&C.push(vw(F,rU,!0),":");var U=this.g;return(U||F=="file")&&(C.push("//"),(F=this.o)&&C.push(vw(F,rU,!0),"@"),C.push(Jp(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&C.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&C.push("/"),C.push(vw(U,U.charAt(0)=="/"?_me:Ame,!0))),(U=this.i.toString())&&C.push("?",U),(U=this.m)&&C.push("#",vw(U,Sme)),C.join("")},Ah.prototype.resolve=function(C){const F=_u(this);let U=!!C.j;U?pw(F,C.j):U=!!C.o,U?F.o=C.o:U=!!C.g,U?F.g=C.g:U=C.u!=null;var J=C.h;if(U)mw(F,C.u);else if(U=!!C.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var be=F.h.lastIndexOf("/");be!=-1&&(J=F.h.slice(0,be+1)+J)}if(be=J,be==".."||be==".")J="";else if(be.indexOf("./")!=-1||be.indexOf("/.")!=-1){J=be.lastIndexOf("/",0)==0,be=be.split("/");const Ae=[];for(let je=0;je<be.length;){const jt=be[je++];jt=="."?J&&je==be.length&&Ae.push(""):jt==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),J&&je==be.length&&Ae.push("")):(Ae.push(jt),J=!0)}J=Ae.join("/")}else J=be}return U?F.h=J:U=C.i.toString()!=="",U?IO(F,oU(C.i)):U=!!C.m,U&&(F.m=C.m),F};function _u(C){return new Ah(C)}function pw(C,F,U){C.j=U?gw(F,!0):F,C.j&&(C.j=C.j.replace(/:$/,""))}function mw(C,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);C.u=F}else C.u=null}function IO(C,F,U){F instanceof yw?(C.i=F,Cme(C.i,C.l)):(U||(F=vw(F,Eme)),C.i=new yw(F,C.l))}function Wr(C,F,U){C.i.set(F,U)}function yC(C){return Wr(C,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),C}function gw(C,F){return C?F?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function vw(C,F,U){return typeof C=="string"?(C=encodeURI(C).replace(F,xme),U&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function xme(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var rU=/[#\/\?@]/g,Ame=/[#\?:]/g,_me=/[#\?]/g,Eme=/[#\?@]/g,Sme=/#/g;function yw(C,F){this.h=this.g=null,this.i=C||null,this.j=!!F}function rm(C){C.g||(C.g=new Map,C.h=0,C.i&&wme(C.i,function(F,U){C.add(decodeURIComponent(F.replace(/\+/g," ")),U)}))}t=yw.prototype,t.add=function(C,F){rm(this),this.i=null,C=ty(this,C);let U=this.g.get(C);return U||this.g.set(C,U=[]),U.push(F),this.h+=1,this};function nU(C,F){rm(C),F=ty(C,F),C.g.has(F)&&(C.i=null,C.h-=C.g.get(F).length,C.g.delete(F))}function iU(C,F){return rm(C),F=ty(C,F),C.g.has(F)}t.forEach=function(C,F){rm(this),this.g.forEach(function(U,J){U.forEach(function(be){C.call(F,be,J,this)},this)},this)};function aU(C,F){rm(C);let U=[];if(typeof F=="string")iU(C,F)&&(U=U.concat(C.g.get(ty(C,F))));else for(C=Array.from(C.g.values()),F=0;F<C.length;F++)U=U.concat(C[F]);return U}t.set=function(C,F){return rm(this),this.i=null,C=ty(this,C),iU(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[F]),this.h+=1,this},t.get=function(C,F){return C?(C=aU(this,C),C.length>0?String(C[0]):F):F};function sU(C,F,U){nU(C,F),U.length>0&&(C.i=null,C.g.set(ty(C,F),d(U)),C.h+=U.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],F=Array.from(this.g.keys());for(let J=0;J<F.length;J++){var U=F[J];const be=Jp(U);U=aU(this,U);for(let Ae=0;Ae<U.length;Ae++){let je=be;U[Ae]!==""&&(je+="="+Jp(U[Ae])),C.push(je)}}return this.i=C.join("&")};function oU(C){const F=new yw;return F.i=C.i,C.g&&(F.g=new Map(C.g),F.h=C.h),F}function ty(C,F){return F=String(F),C.j&&(F=F.toLowerCase()),F}function Cme(C,F){F&&!C.j&&(rm(C),C.i=null,C.g.forEach(function(U,J){const be=J.toLowerCase();J!=be&&(nU(this,J),sU(this,be,U))},C)),C.j=F}function Tme(C,F){const U=new Oo;if(s.Image){const J=new Image;J.onload=c(_h,U,"TestLoadImage: loaded",!0,F,J),J.onerror=c(_h,U,"TestLoadImage: error",!1,F,J),J.onabort=c(_h,U,"TestLoadImage: abort",!1,F,J),J.ontimeout=c(_h,U,"TestLoadImage: timeout",!1,F,J),s.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=C}else F(!1)}function Dme(C,F){const U=new Oo,J=new AbortController,be=setTimeout(()=>{J.abort(),_h(U,"TestPingServer: timeout",!1,F)},1e4);fetch(C,{signal:J.signal}).then(Ae=>{clearTimeout(be),Ae.ok?_h(U,"TestPingServer: ok",!0,F):_h(U,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(be),_h(U,"TestPingServer: error",!1,F)})}function _h(C,F,U,J,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),J(U)}catch{}}function Nme(){this.g=new Se}function OO(C){this.i=C.Sb||null,this.h=C.ab||!1}f(OO,$e),OO.prototype.g=function(){return new bC(this.i,this.h)};function bC(C,F){Ve.call(this),this.H=C,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(bC,Ve),t=bC.prototype,t.open=function(C,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=C,this.D=F,this.readyState=1,ww(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};C&&(F.body=C),(this.H||s).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bw(this)),this.readyState=0},t.Pa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,ww(this)),this.g&&(this.readyState=3,ww(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lU(this)}else C.text().then(this.Oa.bind(this),this.ga.bind(this))};function lU(C){C.j.read().then(C.Ma.bind(C)).catch(C.ga.bind(C))}t.Ma=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var F=C.value?C.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!C.done}))&&(this.response=this.responseText+=F)}C.done?bw(this):ww(this),this.readyState==3&&lU(this)}},t.Oa=function(C){this.g&&(this.response=this.responseText=C,bw(this))},t.Na=function(C){this.g&&(this.response=C,bw(this))},t.ga=function(){this.g&&bw(this)};function bw(C){C.readyState=4,C.l=null,C.j=null,C.B=null,ww(C)}t.setRequestHeader=function(C,F){this.A.append(C,F)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],F=this.h.entries();for(var U=F.next();!U.done;)U=U.value,C.push(U[0]+": "+U[1]),U=F.next();return C.join(`\r
`)};function ww(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(bC.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function uU(C){let F="";return H(C,function(U,J){F+=J,F+=":",F+=U,F+=`\r
`}),F}function kO(C,F,U){e:{for(J in U){var J=!1;break e}J=!0}J||(U=uU(U),typeof C=="string"?U!=null&&Jp(U):Wr(C,F,U))}function wn(C){Ve.call(this),this.headers=new Map,this.L=C||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(wn,Ve);var Pme=/^https?$/i,Mme=["POST","PUT"];t=wn.prototype,t.Fa=function(C){this.H=C},t.ea=function(C,F,U,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);F=F?F.toUpperCase():"GET",this.D=C,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fC.g(),this.g.onreadystatechange=h(u(this.Ca,this));try{this.B=!0,this.g.open(F,String(C),!0),this.B=!1}catch(Ae){cU(this,Ae);return}if(C=U||"",U=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var be in J)U.set(be,J[be]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ae of J.keys())U.set(Ae,J.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(U.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),be=s.FormData&&C instanceof s.FormData,!(Array.prototype.indexOf.call(Mme,F,void 0)>=0)||J||be||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,je]of U)this.g.setRequestHeader(Ae,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(C),this.v=!1}catch(Ae){cU(this,Ae)}};function cU(C,F){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=F,C.o=5,fU(C),wC(C)}function fU(C){C.A||(C.A=!0,Ke(C,"complete"),Ke(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=C||7,Ke(this,"complete"),Ke(this,"abort"),wC(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wC(this,!0)),wn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?hU(this):this.Xa())},t.Xa=function(){hU(this)};function hU(C){if(C.h&&typeof a<"u"){if(C.v&&Eh(C)==4)setTimeout(C.Ca.bind(C),0);else if(Ke(C,"readystatechange"),Eh(C)==4){C.h=!1;try{const Ae=C.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var U;if(!(U=F)){var J;if(J=Ae===0){let je=String(C.D).match(tU)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),J=!Pme.test(je?je.toLowerCase():"")}U=J}if(U)Ke(C,"complete"),Ke(C,"success");else{C.o=6;try{var be=Eh(C)>2?C.g.statusText:""}catch{be=""}C.l=be+" ["+C.ca()+"]",fU(C)}}finally{wC(C)}}}}function wC(C,F){if(C.g){C.m&&(clearTimeout(C.m),C.m=null);const U=C.g;C.g=null,F||Ke(C,"ready");try{U.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Eh(C){return C.g?C.g.readyState:0}t.ca=function(){try{return Eh(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(C){if(this.g){var F=this.g.responseText;return C&&F.indexOf(C)==0&&(F=F.substring(C.length)),Pe(F)}};function dU(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.F){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Ime(C){const F={};C=(C.g&&Eh(C)>=2&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<C.length;J++){if(M(C[J]))continue;var U=DO(C[J]);const be=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Ae=F[be]||[];F[be]=Ae,Ae.push(U)}te(F,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xw(C,F,U){return U&&U.internalChannelParams&&U.internalChannelParams[C]||F}function pU(C){this.za=0,this.i=[],this.j=new Oo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xw("failFast",!1,C),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xw("baseRetryDelayMs",5e3,C),this.Za=xw("retryDelaySeedMs",1e4,C),this.Ta=xw("forwardChannelMaxRetries",2,C),this.va=xw("forwardChannelRequestTimeoutMs",2e4,C),this.ma=C&&C.xmlHttpFactory||void 0,this.Ua=C&&C.Rb||void 0,this.Aa=C&&C.useFetchStreams||!1,this.O=void 0,this.L=C&&C.supportsCrossDomainXhr||!1,this.M="",this.h=new vC(C&&C.concurrentRequestLimit),this.Ba=new Nme,this.S=C&&C.fastHandshake||!1,this.R=C&&C.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=C&&C.Pb||!1,C&&C.ua&&this.j.ua(),C&&C.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&C&&C.detectBufferingProxy||!1,this.ia=void 0,C&&C.longPollingTimeout&&C.longPollingTimeout>0&&(this.ia=C.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pU.prototype,t.ka=8,t.I=1,t.connect=function(C,F,U,J){qe(0),this.W=C,this.H=F||{},U&&J!==void 0&&(this.H.OSID=U,this.H.OAID=J),this.F=this.X,this.J=_U(this,null,this.W),AC(this)};function RO(C){if(mU(C),C.I==3){var F=C.V++,U=_u(C.J);if(Wr(U,"SID",C.M),Wr(U,"RID",F),Wr(U,"TYPE","terminate"),Aw(C,U),F=new Au(C,C.j,F),F.M=2,F.A=yC(_u(U)),U=!1,s.navigator&&s.navigator.sendBeacon)try{U=s.navigator.sendBeacon(F.A.toString(),"")}catch{}!U&&s.Image&&(new Image().src=F.A,U=!0),U||(F.g=EU(F.j,null),F.g.ea(F.A)),F.F=Date.now(),ey(F)}AU(C)}function xC(C){C.g&&(LO(C),C.g.cancel(),C.g=null)}function mU(C){xC(C),C.v&&(s.clearTimeout(C.v),C.v=null),_C(C),C.h.cancel(),C.m&&(typeof C.m=="number"&&s.clearTimeout(C.m),C.m=null)}function AC(C){if(!tm(C.h)&&!C.m){C.m=!0;var F=C.Ea;x||E(),_||(x(),_=!0),S.add(F,C),C.D=0}}function Ome(C,F){return xh(C.h)>=C.h.j-(C.m?1:0)?!1:C.m?(C.i=F.G.concat(C.i),!0):C.I==1||C.I==2||C.D>=(C.Sa?0:C.Ta)?!1:(C.m=Mn(u(C.Ea,C,F),xU(C,C.D)),C.D++,!0)}t.Ea=function(C){if(this.m)if(this.m=null,this.I==1){if(!C){this.V=Math.floor(Math.random()*1e5),C=this.V++;const be=new Au(this,this.j,C);let Ae=this.o;if(this.U&&(Ae?(Ae=ue(Ae),L(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(be.J=Ae,Ae=null),this.S)e:{for(var F=0,U=0;U<this.i.length;U++){t:{var J=this.i[U];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(F+=J,F>4096){F=U;break e}if(F===4096||U===this.i.length-1){F=U+1;break e}}F=1e3}else F=1e3;F=vU(this,be,F),U=_u(this.J),Wr(U,"RID",C),Wr(U,"CVER",22),this.G&&Wr(U,"X-HTTP-Session-Id",this.G),Aw(this,U),Ae&&(this.R?F="headers="+Jp(uU(Ae))+"&"+F:this.u&&kO(U,this.u,Ae)),MO(this.h,be),this.Ra&&Wr(U,"TYPE","init"),this.S?(Wr(U,"$req",F),Wr(U,"SID","null"),be.U=!0,fw(be,U,null)):fw(be,U,F),this.I=2}}else this.I==3&&(C?gU(this,C):this.i.length==0||tm(this.h)||gU(this))};function gU(C,F){var U;F?U=F.l:U=C.V++;const J=_u(C.J);Wr(J,"SID",C.M),Wr(J,"RID",U),Wr(J,"AID",C.K),Aw(C,J),C.u&&C.o&&kO(J,C.u,C.o),U=new Au(C,C.j,U,C.D+1),C.u===null&&(U.J=C.o),F&&(C.i=F.G.concat(C.i)),F=vU(C,U,1e3),U.H=Math.round(C.va*.5)+Math.round(C.va*.5*Math.random()),MO(C.h,U),fw(U,J,F)}function Aw(C,F){C.H&&H(C.H,function(U,J){Wr(F,J,U)}),C.l&&H({},function(U,J){Wr(F,J,U)})}function vU(C,F,U){U=Math.min(C.i.length,U);const J=C.l?u(C.l.Ka,C.l,C):null;e:{var be=C.i;let jt=-1;for(;;){const ti=["count="+U];jt==-1?U>0?(jt=be[0].g,ti.push("ofs="+jt)):jt=0:ti.push("ofs="+jt);let Ir=!0;for(let Ai=0;Ai<U;Ai++){var Ae=be[Ai].g;const Eu=be[Ai].map;if(Ae-=jt,Ae<0)jt=Math.max(0,be[Ai].g-100),Ir=!1;else try{Ae="req"+Ae+"_"||"";try{var je=Eu instanceof Map?Eu:Object.entries(Eu);for(const[im,Sh]of je){let Ch=Sh;o(Sh)&&(Ch=ge(Sh)),ti.push(Ae+im+"="+encodeURIComponent(Ch))}}catch(im){throw ti.push(Ae+"type="+encodeURIComponent("_badmap")),im}}catch{J&&J(Eu)}}if(Ir){je=ti.join("&");break e}}je=void 0}return C=C.i.splice(0,U),F.G=C,je}function yU(C){if(!C.g&&!C.v){C.Y=1;var F=C.Da;x||E(),_||(x(),_=!0),S.add(F,C),C.A=0}}function FO(C){return C.g||C.v||C.A>=3?!1:(C.Y++,C.v=Mn(u(C.Da,C),xU(C,C.A)),C.A++,!0)}t.Da=function(){if(this.v=null,bU(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var C=4*this.T;this.j.info("BP detection timer enabled: "+C),this.B=Mn(u(this.Wa,this),C)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qe(10),xC(this),bU(this))};function LO(C){C.B!=null&&(s.clearTimeout(C.B),C.B=null)}function bU(C){C.g=new Au(C,C.j,"rpc",C.Y),C.u===null&&(C.g.J=C.o),C.g.P=0;var F=_u(C.na);Wr(F,"RID","rpc"),Wr(F,"SID",C.M),Wr(F,"AID",C.K),Wr(F,"CI",C.F?"0":"1"),!C.F&&C.ia&&Wr(F,"TO",C.ia),Wr(F,"TYPE","xmlhttp"),Aw(C,F),C.u&&C.o&&kO(F,C.u,C.o),C.O&&(C.g.H=C.O);var U=C.g;C=C.ba,U.M=1,U.A=yC(_u(F)),U.u=null,U.R=!0,pC(U,C)}t.Va=function(){this.C!=null&&(this.C=null,xC(this),FO(this),qe(19))};function _C(C){C.C!=null&&(s.clearTimeout(C.C),C.C=null)}function wU(C,F){var U=null;if(C.g==F){_C(C),LO(C),C.g=null;var J=2}else if(dw(C.h,F))U=F.G,JV(C.h,F),J=1;else return;if(C.I!=0){if(F.o)if(J==1){U=F.u?F.u.length:0,F=Date.now()-F.F;var be=C.D;J=B(),Ke(J,new dt(J,U)),AC(C)}else yU(C);else if(be=F.m,be==3||be==0&&F.X>0||!(J==1&&Ome(C,F)||J==2&&FO(C)))switch(U&&U.length>0&&(F=C.h,F.i=F.i.concat(U)),be){case 1:nm(C,5);break;case 4:nm(C,10);break;case 3:nm(C,6);break;default:nm(C,2)}}}function xU(C,F){let U=C.Qa+Math.floor(Math.random()*C.Za);return C.isActive()||(U*=2),U*F}function nm(C,F){if(C.j.info("Error code "+F),F==2){var U=u(C.bb,C),J=C.Ua;const be=!J;J=new Ah(J||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||pw(J,"https"),yC(J),be?Tme(J.toString(),U):Dme(J.toString(),U)}else qe(2);C.I=0,C.l&&C.l.pa(F),AU(C),mU(C)}t.bb=function(C){C?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function AU(C){if(C.I=0,C.ja=[],C.l){const F=eU(C.h);(F.length!=0||C.i.length!=0)&&(p(C.ja,F),p(C.ja,C.i),C.h.i.length=0,d(C.i),C.i.length=0),C.l.oa()}}function _U(C,F,U){var J=U instanceof Ah?_u(U):new Ah(U);if(J.g!="")F&&(J.g=F+"."+J.g),mw(J,J.u);else{var be=s.location;J=be.protocol,F=F?F+"."+be.hostname:be.hostname,be=+be.port;const Ae=new Ah(null);J&&pw(Ae,J),F&&(Ae.g=F),be&&mw(Ae,be),U&&(Ae.h=U),J=Ae}return U=C.G,F=C.wa,U&&F&&Wr(J,U,F),Wr(J,"VER",C.ka),Aw(C,J),J}function EU(C,F,U){if(F&&!C.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=C.Aa&&!C.ma?new wn(new OO({ab:U})):new wn(C.ma),F.Fa(C.L),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SU(){}t=SU.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function EC(){}EC.prototype.g=function(C,F){return new zs(C,F)};function zs(C,F){Ve.call(this),this.g=new pU(F),this.l=C,this.h=F&&F.messageUrlParams||null,C=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(C?C["X-WebChannel-Content-Type"]=F.messageContentType:C={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(C?C["X-WebChannel-Client-Profile"]=F.sa:C={"X-WebChannel-Client-Profile":F.sa}),this.g.U=C,(C=F&&F.Qb)&&!M(C)&&(this.g.u=C),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!M(F)&&(this.g.G=F,C=this.h,C!==null&&F in C&&(C=this.h,F in C&&delete C[F])),this.j=new ry(this)}f(zs,Ve),zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zs.prototype.close=function(){RO(this.g)},zs.prototype.o=function(C){var F=this.g;if(typeof C=="string"){var U={};U.__data__=C,C=U}else this.v&&(U={},U.__data__=ge(C),C=U);F.i.push(new ba(F.Ya++,C)),F.I==3&&AC(F)},zs.prototype.N=function(){this.g.l=null,delete this.j,RO(this.g),delete this.g,zs.Z.N.call(this)};function CU(C){Mt.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var F=C.__sm__;if(F){e:{for(const U in F){C=U;break e}C=void 0}(this.i=C)&&(C=this.i,F=F!==null&&C in F?F[C]:void 0),this.data=F}else this.data=C}f(CU,Mt);function TU(){Wt.call(this),this.status=1}f(TU,Wt);function ry(C){this.g=C}f(ry,SU),ry.prototype.ra=function(){Ke(this.g,"a")},ry.prototype.qa=function(C){Ke(this.g,new CU(C))},ry.prototype.pa=function(C){Ke(this.g,new TU)},ry.prototype.oa=function(){Ke(this.g,"b")},EC.prototype.createWebChannel=EC.prototype.g,zs.prototype.send=zs.prototype.o,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,aae=function(){return new EC},iae=function(){return B()},nae=ht,LL={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jv.NO_ERROR=0,Jv.TIMEOUT=8,Jv.HTTP_ERROR=6,WD=Jv,cC.COMPLETE="complete",rae=cC,Ce.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,xx=Ce,wn.prototype.listenOnce=wn.prototype.K,wn.prototype.getLastError=wn.prototype.Ha,wn.prototype.getLastErrorCode=wn.prototype.ya,wn.prototype.getStatus=wn.prototype.ca,wn.prototype.getResponseJson=wn.prototype.La,wn.prototype.getResponseText=wn.prototype.la,wn.prototype.send=wn.prototype.ea,wn.prototype.setWithCredentials=wn.prototype.Fa,tae=wn}).apply(typeof rT<"u"?rT:typeof self<"u"?self:typeof window<"u"?window:{});const l7="@firebase/firestore",u7="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ia.UNAUTHENTICATED=new Ia(null),Ia.GOOGLE_CREDENTIALS=new Ia("google-credentials-uid"),Ia.FIRST_PARTY=new Ia("first-party-uid"),Ia.MOCK_USER=new Ia("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L1="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new d5("@firebase/firestore");function _y(){return bv.logLevel}function Xe(t,...e){if(bv.logLevel<=Kt.DEBUG){const r=e.map(S5);bv.debug(`Firestore (${L1}): ${t}`,...r)}}function Jf(t,...e){if(bv.logLevel<=Kt.ERROR){const r=e.map(S5);bv.error(`Firestore (${L1}): ${t}`,...r)}}function t1(t,...e){if(bv.logLevel<=Kt.WARN){const r=e.map(S5);bv.warn(`Firestore (${L1}): ${t}`,...r)}}function S5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,sae(t,n,r)}function sae(t,e,r){let n=`FIRESTORE (${L1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Jf(n),new Error(n)}function fr(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||sae(e,i,n)}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Tc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sDe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ia.UNAUTHENTICATED))}shutdown(){}}class oDe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lDe{constructor(e){this.t=e,this.currentUser=Ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){fr(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new Lf;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Lf,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Lf)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(fr(typeof n.accessToken=="string",31837,{l:n}),new oae(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fr(e===null||typeof e=="string",2055,{h:e}),new Ia(e)}}class uDe{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ia.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cDe{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new uDe(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ia.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fDe{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,go(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){fr(this.o===void 0,3512);const n=a=>{a.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Xe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c7(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(fr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new c7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hDe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=hDe(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function Xt(t,e){return t<e?-1:t>e?1:0}function BL(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return Hk(i)===Hk(a)?Xt(i,a):Hk(i)?1:-1}return Xt(t.length,e.length)}const dDe=55296,pDe=57343;function Hk(t){const e=t.charCodeAt(0);return e>=dDe&&e<=pDe}function r1(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7="__name__";class Mu{constructor(e,r,n){r===void 0?r=0:r>e.length&&yt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&yt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Mu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Mu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=Mu.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return Xt(e.length,r.length)}static compareSegments(e,r){const n=Mu.isNumericId(e),i=Mu.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Mu.extractNumericId(e).compare(Mu.extractNumericId(r)):BL(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return np.fromString(e.substring(4,e.length-2))}}class zr extends Mu{construct(e,r,n){return new zr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new zr(r)}static emptyPath(){return new zr([])}}const mDe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sa extends Mu{construct(e,r,n){return new sa(e,r,n)}static isValidIdentifier(e){return mDe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f7}static keyField(){return new sa([f7])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ge(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ge(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new Ge(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sa(r)}static emptyPath(){return new sa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(zr.fromString(e))}static fromName(e){return new ct(zr.fromString(e).popFirst(5))}static empty(){return new ct(zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return zr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new zr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(t,e,r){if(!r)throw new Ge(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gDe(t,e,r,n){if(e===!0&&n===!0)throw new Ge(Te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function h7(t){if(!ct.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d7(t){if(ct.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uae(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function MM(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt(12329,{type:typeof t})}function cu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ge(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=MM(t);throw new Ge(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,e){const r={typeString:t};return e&&(r.value=e),r}function bS(t,e){if(!uae(t))throw new Ge(Te.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(i&&typeof s!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new Ge(Te.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=-62135596800,m7=1e6;class Yr{static now(){return Yr.fromMillis(Date.now())}static fromDate(e){return Yr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*m7);return new Yr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<p7)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m7}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bS(e,Yr._jsonSchema))return new Yr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p7;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yr._jsonSchemaVersion="firestore/timestamp/1.0",Yr._jsonSchema={type:Yn("string",Yr._jsonSchemaVersion),seconds:Yn("number"),nanoseconds:Yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Yr(0,0))}static max(){return new Et(new Yr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=-1;function vDe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(n===1e9?new Yr(r+1,0):new Yr(r,n));return new mp(i,ct.empty(),e)}function yDe(t){return new mp(t.readTime,t.key,OA)}class mp{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mp(Et.min(),ct.empty(),OA)}static max(){return new mp(Et.max(),ct.empty(),OA)}}function bDe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ct.comparator(t.documentKey,e.documentKey),r!==0?r:Xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wDe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xDe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==wDe)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ne((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.reject(r)}static resolve(e){return new Ne((r,n)=>{r(e)})}static reject(e){return new Ne((r,n)=>{n(e)})}static waitFor(e){return new Ne((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},l=>n(l))}),s=!0,a===i&&r()})}static or(e){let r=Ne.resolve(!1);for(const n of e)r=r.next(i=>i?Ne.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new Ne((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;r(e[u]).next(c=>{s[u]=c,++o,o===a&&n(s)},c=>i(c))}})}static doWhile(e,r){return new Ne((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function ADe(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function $1(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}IM.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=-1;function OM(t){return t==null}function n2(t){return t===0&&1/t==-1/0}function _De(t){return typeof t=="number"&&Number.isInteger(t)&&!n2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cae="";function EDe(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=g7(e)),e=SDe(t.get(r),e);return g7(e)}function SDe(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case cae:r+="";break;default:r+=a}}return r}function g7(t){return t+cae+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Fp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function fae(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,r){this.comparator=e,this.root=r||ia.EMPTY}insert(e,r){return new yn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ia.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ia.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nT(this.root,e,this.comparator,!1)}getReverseIterator(){return new nT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nT(this.root,e,this.comparator,!0)}}class nT{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ia{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??ia.RED,this.left=i??ia.EMPTY,this.right=a??ia.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new ia(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ia.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ia.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ia.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ia.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}ia.EMPTY=null,ia.RED=!0,ia.BLACK=!1;ia.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new ia(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new y7(this.data.getIterator())}getIteratorFrom(e){return new y7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new hi(this.comparator);return r.data=e,r}}class y7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.fields=e,e.sort(sa.comparator)}static empty(){return new bo([])}unionWith(e){let r=new hi(sa.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new bo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return r1(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hae("Invalid base64 string: "+a):a}}(e);return new ma(r)}static fromUint8Array(e){const r=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ma(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const CDe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gp(t){if(fr(!!t,39018),typeof t=="string"){let e=0;const r=CDe.exec(t);if(fr(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ln(t.seconds),nanos:Ln(t.nanos)}}function Ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vp(t){return typeof t=="string"?ma.fromBase64String(t):ma.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae="server_timestamp",pae="__type__",mae="__previous_value__",gae="__local_write_time__";function D5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[pae])==null?void 0:n.stringValue)===dae}function kM(t){const e=t.mapValue.fields[mae];return D5(e)?kM(e):e}function kA(t){const e=gp(t.mapValue.fields[gae].timestampValue);return new Yr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TDe{constructor(e,r,n,i,a,s,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const i2="(default)";class RA{constructor(e,r){this.projectId=e,this.database=r||i2}static empty(){return new RA("","")}get isDefaultDatabase(){return this.database===i2}isEqual(e){return e instanceof RA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vae="__type__",DDe="__max__",iT={mapValue:{}},yae="__vector__",a2="value";function yp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?D5(t)?4:PDe(t)?9007199254740991:NDe(t)?10:11:yt(28295,{value:t})}function yc(t,e){if(t===e)return!0;const r=yp(t);if(r!==yp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kA(t).isEqual(kA(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=gp(i.timestampValue),o=gp(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return vp(i.bytesValue).isEqual(vp(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Ln(i.geoPointValue.latitude)===Ln(a.geoPointValue.latitude)&&Ln(i.geoPointValue.longitude)===Ln(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Ln(i.integerValue)===Ln(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Ln(i.doubleValue),o=Ln(a.doubleValue);return s===o?n2(s)===n2(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return r1(t.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(v7(s)!==v7(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!yc(s[l],o[l])))return!1;return!0}(t,e);default:return yt(52216,{left:t})}}function FA(t,e){return(t.values||[]).find(r=>yc(r,e))!==void 0}function n1(t,e){if(t===e)return 0;const r=yp(t),n=yp(e);if(r!==n)return Xt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Xt(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Ln(a.integerValue||a.doubleValue),l=Ln(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return b7(t.timestampValue,e.timestampValue);case 4:return b7(kA(t),kA(e));case 5:return BL(t.stringValue,e.stringValue);case 6:return function(a,s){const o=vp(a),l=vp(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Xt(o[u],l[u]);if(c!==0)return c}return Xt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Xt(Ln(a.latitude),Ln(s.latitude));return o!==0?o:Xt(Ln(a.longitude),Ln(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w7(t.arrayValue,e.arrayValue);case 10:return function(a,s){var h,d,p,m;const o=a.fields||{},l=s.fields||{},u=(h=o[a2])==null?void 0:h.arrayValue,c=(d=l[a2])==null?void 0:d.arrayValue,f=Xt(((p=u==null?void 0:u.values)==null?void 0:p.length)||0,((m=c==null?void 0:c.values)==null?void 0:m.length)||0);return f!==0?f:w7(u,c)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===iT.mapValue&&s===iT.mapValue)return 0;if(a===iT.mapValue)return 1;if(s===iT.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const h=BL(l[f],c[f]);if(h!==0)return h;const d=n1(o[l[f]],u[c[f]]);if(d!==0)return d}return Xt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw yt(23264,{he:r})}}function b7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xt(t,e);const r=gp(t),n=gp(e),i=Xt(r.seconds,n.seconds);return i!==0?i:Xt(r.nanos,n.nanos)}function w7(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=n1(r[i],n[i]);if(a)return a}return Xt(r.length,n.length)}function i1(t){return $L(t)}function $L(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=gp(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return vp(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ct.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=$L(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${$L(r.fields[s])}`;return i+"}"}(t.mapValue):yt(61005,{value:t})}function GD(t){switch(yp(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kM(t);return e?16+GD(e):16;case 5:return 2*t.stringValue.length;case 6:return vp(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+GD(a),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Fp(n.fields,(a,s)=>{i+=a.length+GD(s)}),i}(t.mapValue);default:throw yt(13486,{value:t})}}function x7(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jL(t){return!!t&&"integerValue"in t}function N5(t){return!!t&&"arrayValue"in t}function A7(t){return!!t&&"nullValue"in t}function _7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function KD(t){return!!t&&"mapValue"in t}function NDe(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[vae])==null?void 0:n.stringValue)===yae}function Wx(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Wx(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Wx(t.arrayValue.values[r]);return e}return{...t}}function PDe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DDe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.value=e}static empty(){return new Ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!KD(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wx(r)}setAll(e){let r=sa.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=Wx(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());KD(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];KD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Fp(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Ps(Wx(this.value))}}function bae(t){const e=[];return Fp(t.fields,(r,n)=>{const i=new sa([r]);if(KD(n)){const a=bae(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new bo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ka(e,0,Et.min(),Et.min(),Et.min(),Ps.empty(),0)}static newFoundDocument(e,r,n,i){return new ka(e,1,r,Et.min(),n,i,0)}static newNoDocument(e,r){return new ka(e,2,r,Et.min(),Et.min(),Ps.empty(),0)}static newUnknownDocument(e,r){return new ka(e,3,r,Et.min(),Et.min(),Ps.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,r){this.position=e,this.inclusive=r}}function E7(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=ct.comparator(ct.fromName(s.referenceValue),r.key):n=n1(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function S7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!yc(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,r="asc"){this.field=e,this.dir=r}}function MDe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{}class Xn extends wae{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new ODe(e,r,n):r==="array-contains"?new FDe(e,n):r==="in"?new LDe(e,n):r==="not-in"?new BDe(e,n):r==="array-contains-any"?new $De(e,n):new Xn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kDe(e,n):new RDe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(n1(r,this.value)):r!==null&&yp(this.value)===yp(r)&&this.matchesComparison(n1(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fu extends wae{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new fu(e,r)}matches(e){return xae(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xae(t){return t.op==="and"}function Aae(t){return IDe(t)&&xae(t)}function IDe(t){for(const e of t.filters)if(e instanceof fu)return!1;return!0}function VL(t){if(t instanceof Xn)return t.field.canonicalString()+t.op.toString()+i1(t.value);if(Aae(t))return t.filters.map(e=>VL(e)).join(",");{const e=t.filters.map(r=>VL(r)).join(",");return`${t.op}(${e})`}}function _ae(t,e){return t instanceof Xn?function(n,i){return i instanceof Xn&&n.op===i.op&&n.field.isEqual(i.field)&&yc(n.value,i.value)}(t,e):t instanceof fu?function(n,i){return i instanceof fu&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,s,o)=>a&&_ae(s,i.filters[o]),!0):!1}(t,e):void yt(19439)}function Eae(t){return t instanceof Xn?function(r){return`${r.field.canonicalString()} ${r.op} ${i1(r.value)}`}(t):t instanceof fu?function(r){return r.op.toString()+" {"+r.getFilters().map(Eae).join(" ,")+"}"}(t):"Filter"}class ODe extends Xn{constructor(e,r,n){super(e,r,n),this.key=ct.fromName(n.referenceValue)}matches(e){const r=ct.comparator(e.key,this.key);return this.matchesComparison(r)}}class kDe extends Xn{constructor(e,r){super(e,"in",r),this.keys=Sae("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class RDe extends Xn{constructor(e,r){super(e,"not-in",r),this.keys=Sae("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Sae(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>ct.fromName(n.referenceValue))}class FDe extends Xn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return N5(r)&&FA(r.arrayValue,this.value)}}class LDe extends Xn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&FA(this.value.arrayValue,r)}}class BDe extends Xn{constructor(e,r){super(e,"not-in",r)}matches(e){if(FA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!FA(this.value.arrayValue,r)}}class $De extends Xn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!N5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>FA(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jDe{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function C7(t,e=null,r=[],n=[],i=null,a=null,s=null){return new jDe(t,e,r,n,i,a,s)}function P5(t){const e=Nt(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>VL(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),OM(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>i1(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>i1(n)).join(",")),e.Te=r}return e.Te}function M5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!MDe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!_ae(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S7(t.startAt,e.startAt)&&S7(t.endAt,e.endAt)}function UL(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VDe(t,e,r,n,i,a,s,o){return new j1(t,e,r,n,i,a,s,o)}function I5(t){return new j1(t)}function T7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cae(t){return t.collectionGroup!==null}function Gx(t){const e=Nt(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new hi(sa.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new LA(a,n))}),r.has(sa.keyField().canonicalString())||e.Ie.push(new LA(sa.keyField(),n))}return e.Ie}function hc(t){const e=Nt(t);return e.Ee||(e.Ee=UDe(e,Gx(t))),e.Ee}function UDe(t,e){if(t.limitType==="F")return C7(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new LA(i.field,a)});const r=t.endAt?new s2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new s2(t.startAt.position,t.startAt.inclusive):null;return C7(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function zL(t,e){const r=t.filters.concat([e]);return new j1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function qL(t,e,r){return new j1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function RM(t,e){return M5(hc(t),hc(e))&&t.limitType===e.limitType}function Tae(t){return`${P5(hc(t))}|lt:${t.limitType}`}function Ey(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>Eae(i)).join(", ")}]`),OM(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>i1(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>i1(i)).join(",")),`Target(${n})`}(hc(t))}; limitType=${t.limitType})`}function FM(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ct.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Gx(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,l){const u=E7(s,o,l);return s.inclusive?u<=0:u<0}(n.startAt,Gx(n),i)||n.endAt&&!function(s,o,l){const u=E7(s,o,l);return s.inclusive?u>=0:u>0}(n.endAt,Gx(n),i))}(t,e)}function zDe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dae(t){return(e,r)=>{let n=!1;for(const i of Gx(t)){const a=qDe(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function qDe(t,e,r){const n=t.field.isKeyField()?ct.comparator(e.key,r.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?n1(l,u):yt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return yt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fp(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return fae(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HDe=new yn(ct.comparator);function eh(){return HDe}const Nae=new yn(ct.comparator);function Ax(...t){let e=Nae;for(const r of t)e=e.insert(r.key,r);return e}function Pae(t){let e=Nae;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Dm(){return Kx()}function Mae(){return Kx()}function Kx(){return new Lv(t=>t.toString(),(t,e)=>t.isEqual(e))}const WDe=new yn(ct.comparator),GDe=new hi(ct.comparator);function Yt(...t){let e=GDe;for(const r of t)e=e.add(r);return e}const KDe=new hi(Xt);function XDe(){return KDe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n2(e)?"-0":e}}function Iae(t){return{integerValue:""+t}}function Oae(t,e){return _De(e)?Iae(e):O5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this._=void 0}}function YDe(t,e,r){return t instanceof BA?function(i,a){const s={fields:{[pae]:{stringValue:dae},[gae]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&D5(a)&&(a=kM(a)),a&&(s.fields[mae]=a),{mapValue:s}}(r,e):t instanceof $A?Rae(t,e):t instanceof jA?Fae(t,e):function(i,a){const s=kae(i,a),o=D7(s)+D7(i.Ae);return jL(s)&&jL(i.Ae)?Iae(o):O5(i.serializer,o)}(t,e)}function QDe(t,e,r){return t instanceof $A?Rae(t,e):t instanceof jA?Fae(t,e):r}function kae(t,e){return t instanceof VA?function(n){return jL(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class BA extends LM{}class $A extends LM{constructor(e){super(),this.elements=e}}function Rae(t,e){const r=Lae(e);for(const n of t.elements)r.some(i=>yc(i,n))||r.push(n);return{arrayValue:{values:r}}}class jA extends LM{constructor(e){super(),this.elements=e}}function Fae(t,e){let r=Lae(e);for(const n of t.elements)r=r.filter(i=>!yc(i,n));return{arrayValue:{values:r}}}class VA extends LM{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function D7(t){return Ln(t.integerValue||t.doubleValue)}function Lae(t){return N5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(e,r){this.field=e,this.transform=r}}function ZDe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof $A&&i instanceof $A||n instanceof jA&&i instanceof jA?r1(n.elements,i.elements,yc):n instanceof VA&&i instanceof VA?yc(n.Ae,i.Ae):n instanceof BA&&i instanceof BA}(t.transform,e.transform)}class JDe{constructor(e,r){this.version=e,this.transformResults=r}}class ml{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ml}static exists(e){return new ml(void 0,e)}static updateTime(e){return new ml(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function XD(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class BM{}function $ae(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k5(t.key,ml.none()):new wS(t.key,t.data,ml.none());{const r=t.data,n=Ps.empty();let i=new hi(sa.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Lp(t.key,n,new bo(i.toArray()),ml.none())}}function eNe(t,e,r){t instanceof wS?function(i,a,s){const o=i.value.clone(),l=P7(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Lp?function(i,a,s){if(!XD(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=P7(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(jae(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Xx(t,e,r,n){return t instanceof wS?function(a,s,o,l){if(!XD(a.precondition,s))return o;const u=a.value.clone(),c=M7(a.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Lp?function(a,s,o,l){if(!XD(a.precondition,s))return o;const u=M7(a.fieldTransforms,l,s),c=s.data;return c.setAll(jae(a)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,s,o){return XD(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,r)}function tNe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=kae(n.transform,i||null);a!=null&&(r===null&&(r=Ps.empty()),r.set(n.field,a))}return r||null}function N7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&r1(n,i,(a,s)=>ZDe(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wS extends BM{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lp extends BM{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jae(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function P7(t,e,r){const n=new Map;fr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,QDe(s,o,r[i]))}return n}function M7(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,YDe(a,s,e))}return n}class k5 extends BM{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rNe extends BM{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nNe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&eNe(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Xx(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Xx(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Mae();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const l=$ae(s,o);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Yt())}isEqual(e){return this.batchId===e.batchId&&r1(this.mutations,e.mutations,(r,n)=>N7(r,n))&&r1(this.baseMutations,e.baseMutations,(r,n)=>N7(r,n))}}class R5{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){fr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return WDe}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new R5(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iNe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aNe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,rr;function sNe(t){switch(t){case Te.OK:return yt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return yt(15467,{code:t})}}function Vae(t){if(t===void 0)return Jf("GRPC error has no .code"),Te.UNKNOWN;switch(t){case qn.OK:return Te.OK;case qn.CANCELLED:return Te.CANCELLED;case qn.UNKNOWN:return Te.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Te.INTERNAL;case qn.UNAVAILABLE:return Te.UNAVAILABLE;case qn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case qn.NOT_FOUND:return Te.NOT_FOUND;case qn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case qn.ABORTED:return Te.ABORTED;case qn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case qn.DATA_LOSS:return Te.DATA_LOSS;default:return yt(39323,{code:t})}}(rr=qn||(qn={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oNe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lNe=new np([4294967295,4294967295],0);function I7(t){const e=oNe().encode(t),r=new eae;return r.update(e),new Uint8Array(r.digest())}function O7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new np([r,n],0),new np([i,a],0)]}class F5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new _x(`Invalid padding: ${r}`);if(n<0)throw new _x(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new _x(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new _x(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=np.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(np.fromNumber(n)));return i.compare(lNe)===1&&(i=new np([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=I7(e),[n,i]=O7(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);if(!this.we(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new F5(a,i,r);return n.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const r=I7(e),[n,i]=O7(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class _x extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,xS.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new $M(Et.min(),i,new yn(Xt),eh(),Yt())}}class xS{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new xS(n,r,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class Uae{constructor(e,r){this.targetId=e,this.Ce=r}}class zae{constructor(e,r,n=ma.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class k7{constructor(){this.ve=0,this.Fe=R7(),this.Me=ma.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yt(),r=Yt(),n=Yt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:yt(38017,{changeType:a})}}),new xS(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=R7()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uNe{constructor(e){this.Ge=e,this.ze=new Map,this.je=eh(),this.Je=aT(),this.He=aT(),this.Ye=new yn(Xt)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(UL(a))if(n===0){const s=new ct(a.path);this.et(r,s,ka.newNoDocument(s,Et.min()))}else fr(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const o=this.ut(e),l=o?this.ct(o,e,s):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,o;try{s=vp(n).toUint8Array()}catch(l){if(l instanceof hae)return t1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new F5(s,i,a)}catch(l){return t1(l instanceof _x?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,s)=>{const o=this.ot(s);if(o){if(a.current&&UL(o.target)){const l=new ct(o.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,ka.newNoDocument(l,e))}a.Be&&(r.set(s,a.ke()),a.qe())}});let n=Yt();this.He.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,s)=>s.setReadTime(e));const i=new $M(e,r,this.Ye,this.je,n);return this.je=eh(),this.Je=aT(),this.He=aT(),this.Ye=new yn(Xt),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new k7,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new hi(Xt),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new hi(Xt),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new k7),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function aT(){return new yn(ct.comparator)}function R7(){return new yn(ct.comparator)}const cNe={asc:"ASCENDING",desc:"DESCENDING"},fNe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hNe={and:"AND",or:"OR"};class dNe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function HL(t,e){return t.useProto3Json||OM(e)?e:{value:e}}function o2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qae(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pNe(t,e){return o2(t,e.toTimestamp())}function dc(t){return fr(!!t,49232),Et.fromTimestamp(function(r){const n=gp(r);return new Yr(n.seconds,n.nanos)}(t))}function L5(t,e){return WL(t,e).canonicalString()}function WL(t,e){const r=function(i){return new zr(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Hae(t){const e=zr.fromString(t);return fr(Yae(e),10190,{key:e.toString()}),e}function GL(t,e){return L5(t.databaseId,e.path)}function Wk(t,e){const r=Hae(e);if(r.get(1)!==t.databaseId.projectId)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ct(Gae(r))}function Wae(t,e){return L5(t.databaseId,e)}function mNe(t){const e=Hae(t);return e.length===4?zr.emptyPath():Gae(e)}function KL(t){return new zr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gae(t){return fr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F7(t,e,r){return{name:GL(t,e),fields:r.value.mapValue.fields}}function gNe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:yt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,c){return u.useProto3Json?(fr(c===void 0||typeof c=="string",58123),ma.fromBase64String(c||"")):(fr(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),ma.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const c=u.code===void 0?Te.UNKNOWN:Vae(u.code);return new Ge(c,u.message||"")}(s);r=new zae(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Wk(t,n.document.name),a=dc(n.document.updateTime),s=n.document.createTime?dc(n.document.createTime):Et.min(),o=new Ps({mapValue:{fields:n.document.fields}}),l=ka.newFoundDocument(i,a,s,o),u=n.targetIds||[],c=n.removedTargetIds||[];r=new YD(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Wk(t,n.document),a=n.readTime?dc(n.readTime):Et.min(),s=ka.newNoDocument(i,a),o=n.removedTargetIds||[];r=new YD([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Wk(t,n.document),a=n.removedTargetIds||[];r=new YD([],a,i,null)}else{if(!("filter"in e))return yt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new aNe(i,a),o=n.targetId;r=new Uae(o,s)}}return r}function vNe(t,e){let r;if(e instanceof wS)r={update:F7(t,e.key,e.value)};else if(e instanceof k5)r={delete:GL(t,e.key)};else if(e instanceof Lp)r={update:F7(t,e.key,e.data),updateMask:CNe(e.fieldMask)};else{if(!(e instanceof rNe))return yt(16599,{Vt:e.type});r={verify:GL(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,s){const o=s.transform;if(o instanceof BA)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $A)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof jA)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof VA)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw yt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:pNe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:yt(27497)}(t,e.precondition)),r}function yNe(t,e){return t&&t.length>0?(fr(e!==void 0,14353),t.map(r=>function(i,a){let s=i.updateTime?dc(i.updateTime):dc(a);return s.isEqual(Et.min())&&(s=dc(a)),new JDe(s,i.transformResults||[])}(r,e))):[]}function bNe(t,e){return{documents:[Wae(t,e.path)]}}function wNe(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Wae(t,i);const a=function(u){if(u.length!==0)return Xae(fu.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:Sy(h.field),direction:_Ne(h.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const o=HL(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:i}}function xNe(t){let e=mNe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){fr(n===1,65062);const c=r.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let a=[];r.where&&(a=function(f){const h=Kae(f);return h instanceof fu&&Aae(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(h=>function(p){return new LA(Cy(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,OM(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,d=f.values||[];return new s2(d,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,d=f.values||[];return new s2(d,h)}(r.endAt)),VDe(e,i,s,a,o,"F",l,u)}function ANe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Kae(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Cy(r.unaryFilter.field);return Xn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Cy(r.unaryFilter.field);return Xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cy(r.unaryFilter.field);return Xn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cy(r.unaryFilter.field);return Xn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Xn.create(Cy(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return fu.create(r.compositeFilter.filters.map(n=>Kae(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(r.compositeFilter.op))}(t):yt(30097,{filter:t})}function _Ne(t){return cNe[t]}function ENe(t){return fNe[t]}function SNe(t){return hNe[t]}function Sy(t){return{fieldPath:t.canonicalString()}}function Cy(t){return sa.fromServerFormat(t.fieldPath)}function Xae(t){return t instanceof Xn?function(r){if(r.op==="=="){if(_7(r.value))return{unaryFilter:{field:Sy(r.field),op:"IS_NAN"}};if(A7(r.value))return{unaryFilter:{field:Sy(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(_7(r.value))return{unaryFilter:{field:Sy(r.field),op:"IS_NOT_NAN"}};if(A7(r.value))return{unaryFilter:{field:Sy(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sy(r.field),op:ENe(r.op),value:r.value}}}(t):t instanceof fu?function(r){const n=r.getFilters().map(i=>Xae(i));return n.length===1?n[0]:{compositeFilter:{op:SNe(r.op),filters:n}}}(t):yt(54877,{filter:t})}function CNe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Yae(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,r,n,i,a=Et.min(),s=Et.min(),o=ma.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new zd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TNe{constructor(e){this.yt=e}}function DNe(t){const e=xNe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qL(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNe{constructor(){this.Cn=new PNe}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ne.resolve()}getCollectionParents(e,r){return Ne.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ne.resolve()}deleteFieldIndex(e,r){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,r){return Ne.resolve()}getDocumentsMatchingTarget(e,r){return Ne.resolve(null)}getIndexType(e,r){return Ne.resolve(0)}getFieldIndexes(e,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,r){return Ne.resolve(mp.min())}getMinOffsetFromCollectionGroup(e,r){return Ne.resolve(mp.min())}updateCollectionGroup(e,r,n){return Ne.resolve()}updateIndexEntries(e,r){return Ne.resolve()}}class PNe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new hi(zr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new hi(zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qae=41943040;class Ts{static withCacheSize(e){return new Ts(e,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts.DEFAULT_COLLECTION_PERCENTILE=10,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ts.DEFAULT=new Ts(Qae,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ts.DISABLED=new Ts(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new a1(0)}static cr(){return new a1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7="LruGarbageCollector",MNe=1048576;function $7([t,e],[r,n]){const i=Xt(t,r);return i===0?Xt(e,n):i}class INe{constructor(e){this.Ir=e,this.buffer=new hi($7),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();$7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ONe{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Xe(B7,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$1(r)?Xe(B7,"Ignoring IndexedDB error during garbage collection: ",r):await B1(r)}await this.Vr(3e5)})}}class kNe{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ne.resolve(IM.ce);const n=new INe(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(L7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L7):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,s,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(a=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),_y()<=Kt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:f})))}}function RNe(t,e){return new kNe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{constructor(){this.changes=new Lv(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ka.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LNe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BNe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Xx(n.mutation,i,bo.empty(),Yr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Yt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Yt()){const i=Dm();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=Ax();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Dm();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Yt()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=eh();const s=Kx(),o=function(){return Kx()}();return r.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Lp)?a=a.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),Xx(c.mutation,u,c.mutation.getFieldMask(),Yr.now())):s.set(u.key,bo.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,c)=>s.set(u,c)),r.forEach((u,c)=>o.set(u,new LNe(c,s.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Kx();let i=new yn((s,o)=>s-o),a=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let c=n.get(l)||bo.empty();c=o.applyToLocalView(u,c),n.set(l,c);const f=(i.get(o.batchId)||Yt()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,f=Mae();c.forEach(h=>{if(!a.has(h)){const d=$ae(r.get(h),n.get(h));d!==null&&f.set(h,d),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Cae(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Ne.resolve(Dm());let o=OA,l=a;return s.next(u=>Ne.forEach(u,(c,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,Yt())).next(c=>({batchId:o,changes:Pae(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ct(r)).next(n=>{let i=Ax();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Ax();return this.indexManager.getCollectionParents(e,a).next(o=>Ne.forEach(o,l=>{const u=function(f,h){return new j1(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(c=>{c.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(s=>{a.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,ka.newInvalidDocument(c)))});let o=Ax();return s.forEach((l,u)=>{const c=a.get(l);c!==void 0&&Xx(c.mutation,u,bo.empty(),Yr.now()),FM(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ne{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ne.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:dc(i.createTime)}}(r)),Ne.resolve()}getNamedQuery(e,r){return Ne.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:DNe(i.bundledQuery),readTime:dc(i.readTime)}}(r)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jNe{constructor(){this.overlays=new yn(ct.comparator),this.qr=new Map}getOverlay(e,r){return Ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Dm();return Ne.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.St(e,r,a)}),Ne.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,r,n){const i=Dm(),a=r.length+1,s=new ct(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new yn((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let c=a.get(u.largestBatchId);c===null&&(c=Dm(),a=a.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=Dm(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return Ne.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new iNe(r,n));let a=this.qr.get(r);a===void 0&&(a=Yt(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VNe{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.Qr=new hi(Ri.$r),this.Ur=new hi(Ri.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Ri(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Ri(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new ct(new zr([])),n=new Ri(r,e),i=new Ri(r,e+1),a=[];return this.Ur.forEachInRange([n,i],s=>{this.Gr(s),a.push(s.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new ct(new zr([])),n=new Ri(r,e),i=new Ri(r,e+1);let a=Yt();return this.Ur.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new Ri(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ri{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return ct.comparator(e.key,r.key)||Xt(e.Yr,r.Yr)}static Kr(e,r){return Xt(e.Yr,r.Yr)||ct.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UNe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new hi(Ri.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new nNe(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Ri(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(e,r){return Ne.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return Ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?T5:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ri(r,0),i=new Ri(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],s=>{const o=this.Xr(s.Yr);a.push(o)}),Ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new hi(Xt);return r.forEach(i=>{const a=new Ri(i,0),s=new Ri(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],o=>{n=n.add(o.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;ct.isDocumentKey(a)||(a=a.child(""));const s=new Ri(new ct(a),0);let o=new hi(Xt);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},s),Ne.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){fr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(r.mutations,i=>{const a=new Ri(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Ri(r,0),i=this.Zr.firstAfterOrEqual(n);return Ne.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNe{constructor(e){this.ri=e,this.docs=function(){return new yn(ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ne.resolve(n?n.document.mutableCopy():ka.newInvalidDocument(r))}getEntries(e,r){let n=eh();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():ka.newInvalidDocument(i))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=eh();const s=r.path,o=new ct(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||bDe(yDe(c),n)<=0||(i.has(c.key)||FM(r,c))&&(a=a.insert(c.key,c.mutableCopy()))}return Ne.resolve(a)}getAllFromCollectionGroup(e,r,n,i){yt(9500)}ii(e,r){return Ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new qNe(this)}getSize(e){return Ne.resolve(this.size)}}class qNe extends FNe{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ne.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HNe{constructor(e){this.persistence=e,this.si=new Lv(r=>P5(r),M5),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.oi=0,this._i=new B5,this.targetCount=0,this.ai=a1.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ne.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new a1(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ne.resolve()}updateTargetData(e,r){return this.Pr(r),Ne.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ne.waitFor(a).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ne.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ne.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Ne.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ne.resolve(n)}containsKey(e,r){return Ne.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zae{constructor(e,r){this.ui={},this.overlays={},this.ci=new IM(0),this.li=!1,this.li=!0,this.hi=new VNe,this.referenceDelegate=e(this),this.Pi=new HNe(this),this.indexManager=new NNe,this.remoteDocumentCache=function(i){return new zNe(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new TNe(r),this.Ii=new $Ne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new jNe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new UNe(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const i=new WNe(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class WNe extends xDe{constructor(e){super(),this.currentSequenceNumber=e}}class $5{constructor(e){this.persistence=e,this.Ri=new B5,this.Vi=null}static mi(e){return new $5(e)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ne.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const i=ct.fromPath(n);return this.gi(e,i).next(a=>{a||r.removeEntry(i,Et.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class l2{constructor(e,r){this.persistence=e,this.pi=new Lv(n=>EDe(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=RNe(this,r)}static mi(e,r){return new l2(e,r)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ne.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?Ne.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,r).next(o=>{o||(n++,a.removeEntry(s,Et.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=GD(e.data.value)),r}br(e,r,n){return Ne.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return Ne.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Yt(),i=Yt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new j5(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GNe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DEe()?8:ADe($a())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ws(e,r,i,n).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new GNe;return this.Ss(e,r,s).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,s,o.size)})}).next(()=>a.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(_y()<=Kt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Ey(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(_y()<=Kt.DEBUG&&Xe("QueryEngine","Query:",Ey(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(_y()<=Kt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Ey(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hc(r))):Ne.resolve())}ys(e,r){if(T7(r))return Ne.resolve(null);let n=hc(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=qL(r,null,"F"),n=hc(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=Yt(...a);return this.ps.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,s,l.readTime)?this.ys(e,qL(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,i){return T7(r)||i.isEqual(Et.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(a=>{const s=this.Ds(r,a);return this.Cs(r,s,n,i)?Ne.resolve(null):(_y()<=Kt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ey(r)),this.vs(e,s,r,vDe(i,OA)).next(o=>o))})}Ds(e,r){let n=new hi(Dae(e));return r.forEach((i,a)=>{FM(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return _y()<=Kt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Ey(r)),this.ps.getDocumentsMatchingQuery(e,r,mp.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="LocalStore",XNe=3e8;class YNe{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new yn(Xt),this.xs=new Lv(a=>P5(a),M5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BNe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function QNe(t,e,r,n){return new YNe(t,e,r,n)}async function Jae(t,e){const r=Nt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let l=Yt();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of a){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:o}))})})}function ZNe(t,e){const r=Nt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const f=u.batch,h=f.keys();let d=Ne.resolve();return h.forEach(p=>{d=d.next(()=>c.getEntry(l,p)).next(m=>{const v=u.docVersions.get(p);fr(v!==null,48541),m.version.compareTo(v)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Yt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function ese(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function JNe(t,e){const r=Nt(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((c,f)=>{const h=i.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(a,c.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(a,c.addedDocuments,f)));let d=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(ma.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,n)),i=i.insert(f,d),function(m,v,y){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=XNe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,d,c)&&o.push(r.Pi.updateTargetData(a,d))});let l=eh(),u=Yt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,c))}),o.push(e2e(a,s,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!n.isEqual(Et.min())){const c=r.Pi.getLastRemoteSnapshotVersion(a).next(f=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(c)}return Ne.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(r.Ms=i,a))}function e2e(t,e,r){let n=Yt(),i=Yt();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=eh();return r.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Xe(V5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function t2e(t,e){const r=Nt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=T5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function r2e(t,e){const r=Nt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(a=>a?(i=a,Ne.resolve(i)):r.Pi.allocateTargetId(n).next(s=>(i=new zd(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function XL(t,e,r){const n=Nt(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!$1(s))throw s;Xe(V5,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function j7(t,e,r){const n=Nt(t);let i=Et.min(),a=Yt();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const f=Nt(l),h=f.xs.get(c);return h!==void 0?Ne.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,c)}(n,s,hc(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?i:Et.min(),r?a:Yt())).next(o=>(n2e(n,zDe(e),o),{documents:o,Qs:a})))}function n2e(t,e,r){let n=t.Os.get(e)||Et.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class V7{constructor(){this.activeTargetIds=XDe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i2e{constructor(){this.Mo=new V7,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2e{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7="ConnectivityMonitor";class z7{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xe(U7,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xe(U7,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sT=null;function YL(){return sT===null?sT=function(){return 268435456+Math.round(2147483648*Math.random())}():sT++,"0x"+sT.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="RestConnection",s2e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o2e{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===i2?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const s=YL(),o=this.zo(e,r.toUriEncodedString());Xe(Gk,`Sending RPC '${e}' ${s}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,a);const{host:u}=new URL(o),c=kv(u);return this.Jo(e,o,l,n,c).then(f=>(Xe(Gk,`Received RPC '${e}' ${s}: `,f),f),f=>{throw t1(Gk,`RPC '${e}' ${s} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(e,r,n,i,a,s){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+L1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const n=s2e[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2e{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="WebChannelConnection";class u2e extends o2e{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const s=YL();return new Promise((o,l)=>{const u=new tae;u.setWithCredentials(!0),u.listenOnce(rae.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case WD.NO_ERROR:const f=u.getResponseJson();Xe(Aa,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case WD.TIMEOUT:Xe(Aa,`RPC '${e}' ${s} timed out`),l(new Ge(Te.DEADLINE_EXCEEDED,"Request time out"));break;case WD.HTTP_ERROR:const h=u.getStatus();if(Xe(Aa,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(w)>=0?w:Te.UNKNOWN}(p.status);l(new Ge(m,p.message))}else l(new Ge(Te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ge(Te.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Xe(Aa,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Xe(Aa,`RPC '${e}' ${s} sending request:`,i),u.send(r,"POST",c,n,15)})}T_(e,r,n){const i=YL(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aae(),o=iae(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const c=a.join("");Xe(Aa,`Creating RPC '${e}' stream ${i}: ${c}`,l);const f=s.createWebChannel(c,l);this.I_(f);let h=!1,d=!1;const p=new l2e({Yo:v=>{d?Xe(Aa,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(Xe(Aa,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Xe(Aa,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},Zo:()=>f.close()}),m=(v,y,w)=>{v.listen(y,b=>{try{w(b)}catch(A){setTimeout(()=>{throw A},0)}})};return m(f,xx.EventType.OPEN,()=>{d||(Xe(Aa,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),m(f,xx.EventType.CLOSE,()=>{d||(d=!0,Xe(Aa,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(f))}),m(f,xx.EventType.ERROR,v=>{d||(d=!0,t1(Aa,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),p.a_(new Ge(Te.UNAVAILABLE,"The operation could not be completed")))}),m(f,xx.EventType.MESSAGE,v=>{var y;if(!d){const w=v.data[0];fr(!!w,16349);const b=w,A=(b==null?void 0:b.error)||((y=b[0])==null?void 0:y.error);if(A){Xe(Aa,`RPC '${e}' stream ${i} received error:`,A);const x=A.status;let _=function(T){const D=qn[T];if(D!==void 0)return Vae(D)}(x),S=A.message;_===void 0&&(_=Te.INTERNAL,S="Unknown error status: "+x+" with message "+A.message),d=!0,p.a_(new Ge(_,S)),f.close()}else Xe(Aa,`RPC '${e}' stream ${i} received:`,w),p.u_(w)}}),m(o,nae.STAT_EVENT,v=>{v.stat===LL.PROXY?Xe(Aa,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===LL.NOPROXY&&Xe(Aa,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Kk(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){return new dNe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tse{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="PersistentStream";class rse{constructor(e,r,n,i,a,s,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tse(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Te.RESOURCE_EXHAUSTED?(Jf(r.toString()),Jf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new Ge(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Xe(q7,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Xe(q7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c2e extends rse{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=gNe(this.serializer,e),n=function(a){if(!("targetChange"in a))return Et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?dc(s.readTime):Et.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=KL(this.serializer),r.addTarget=function(a,s){let o;const l=s.target;if(o=UL(l)?{documents:bNe(a,l)}:{query:wNe(a,l).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=qae(a,s.resumeToken);const u=HL(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Et.min())>0){o.readTime=o2(a,s.snapshotVersion.toTimestamp());const u=HL(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=ANe(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=KL(this.serializer),r.removeTarget=e,this.q_(r)}}class f2e extends rse{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return fr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=yNe(e.writeResults,e.commitTime),n=dc(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=KL(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>vNe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2e{}class d2e extends h2e{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Go(e,WL(r,n),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ge(Te.UNKNOWN,a.toString())})}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,WL(r,n),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(Te.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class p2e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jf(r),this.aa=!1):Xe("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="RemoteStore";class m2e{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{Bv(this)&&(Xe(wv,"Restarting streams for network reachability change."),await async function(l){const u=Nt(l);u.Ea.add(4),await AS(u),u.Ra.set("Unknown"),u.Ea.delete(4),await VM(u)}(this))})}),this.Ra=new p2e(n,i)}}async function VM(t){if(Bv(t))for(const e of t.da)await e(!0)}async function AS(t){for(const e of t.da)await e(!1)}function nse(t,e){const r=Nt(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),H5(r)?q5(r):V1(r).O_()&&z5(r,e))}function U5(t,e){const r=Nt(t),n=V1(r);r.Ia.delete(e),n.O_()&&ise(r,e),r.Ia.size===0&&(n.O_()?n.L_():Bv(r)&&r.Ra.set("Unknown"))}function z5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}V1(t).Y_(e)}function ise(t,e){t.Va.Ue(e),V1(t).Z_(e)}function q5(t){t.Va=new uNe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),V1(t).start(),t.Ra.ua()}function H5(t){return Bv(t)&&!V1(t).x_()&&t.Ia.size>0}function Bv(t){return Nt(t).Ea.size===0}function ase(t){t.Va=void 0}async function g2e(t){t.Ra.set("Online")}async function v2e(t){t.Ia.forEach((e,r)=>{z5(t,e)})}async function y2e(t,e){ase(t),H5(t)?(t.Ra.ha(e),q5(t)):t.Ra.set("Unknown")}async function b2e(t,e,r){if(t.Ra.set("Online"),e instanceof zae&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){Xe(wv,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await u2(t,n)}else if(e instanceof YD?t.Va.Ze(e):e instanceof Uae?t.Va.st(e):t.Va.tt(e),!r.isEqual(Et.min()))try{const n=await ese(t.localStore);r.compareTo(n)>=0&&await function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=a.Ia.get(u);c&&a.Ia.set(u,c.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const c=a.Ia.get(l);if(!c)return;a.Ia.set(l,c.withResumeToken(ma.EMPTY_BYTE_STRING,c.snapshotVersion)),ise(a,l);const f=new zd(c.target,l,u,c.sequenceNumber);z5(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Xe(wv,"Failed to raise snapshot:",n),await u2(t,n)}}async function u2(t,e,r){if(!$1(e))throw e;t.Ea.add(1),await AS(t),t.Ra.set("Offline"),r||(r=()=>ese(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe(wv,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await VM(t)})}function sse(t,e){return e().catch(r=>u2(t,r,e))}async function UM(t){const e=Nt(t),r=bp(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:T5;for(;w2e(e);)try{const i=await t2e(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,x2e(e,i)}catch(i){await u2(e,i)}ose(e)&&lse(e)}function w2e(t){return Bv(t)&&t.Ta.length<10}function x2e(t,e){t.Ta.push(e);const r=bp(t);r.O_()&&r.X_&&r.ea(e.mutations)}function ose(t){return Bv(t)&&!bp(t).x_()&&t.Ta.length>0}function lse(t){bp(t).start()}async function A2e(t){bp(t).ra()}async function _2e(t){const e=bp(t);for(const r of t.Ta)e.ea(r.mutations)}async function E2e(t,e,r){const n=t.Ta.shift(),i=R5.from(n,e,r);await sse(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await UM(t)}async function S2e(t,e){e&&bp(t).X_&&await async function(n,i){if(function(s){return sNe(s)&&s!==Te.ABORTED}(i.code)){const a=n.Ta.shift();bp(n).B_(),await sse(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await UM(n)}}(t,e),ose(t)&&lse(t)}async function H7(t,e){const r=Nt(t);r.asyncQueue.verifyOperationInProgress(),Xe(wv,"RemoteStore received new credentials");const n=Bv(r);r.Ea.add(3),await AS(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await VM(r)}async function C2e(t,e){const r=Nt(t);e?(r.Ea.delete(2),await VM(r)):e||(r.Ea.add(2),await AS(r),r.Ra.set("Unknown"))}function V1(t){return t.ma||(t.ma=function(r,n,i){const a=Nt(r);return a.sa(),new c2e(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:g2e.bind(null,t),t_:v2e.bind(null,t),r_:y2e.bind(null,t),H_:b2e.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),H5(t)?q5(t):t.Ra.set("Unknown")):(await t.ma.stop(),ase(t))})),t.ma}function bp(t){return t.fa||(t.fa=function(r,n,i){const a=Nt(r);return a.sa(),new f2e(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:A2e.bind(null,t),r_:S2e.bind(null,t),ta:_2e.bind(null,t),na:E2e.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await UM(t)):(await t.fa.stop(),t.Ta.length>0&&(Xe(wv,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Lf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new W5(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G5(t,e){if(Jf("AsyncQueue",`${e}: ${t}`),$1(t))return new Ge(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{static emptySet(e){return new p0(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ct.comparator(r.key,n.key):(r,n)=>ct.comparator(r.key,n.key),this.keyedMap=Ax(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof p0)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new p0;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.ga=new yn(ct.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):yt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class s1{constructor(e,r,n,i,a,s,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new s1(e,r,p0.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&RM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class D2e{constructor(){this.queries=G7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Nt(r),a=i.queries;i.queries=G7(),a.forEach((s,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Ge(Te.ABORTED,"Firestore shutting down"))}}function G7(){return new Lv(t=>Tae(t),RM)}async function use(t,e){const r=Nt(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new T2e,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const o=G5(s,`Initialization of query '${Ey(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&K5(r)}async function cse(t,e){const r=Nt(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function N2e(t,e){const r=Nt(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(n=!0);s.wa=i}}n&&K5(r)}function P2e(t,e,r){const n=Nt(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function K5(t){t.Ca.forEach(e=>{e.next()})}var QL,K7;(K7=QL||(QL={})).Ma="default",K7.Cache="cache";class fse{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new s1(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=s1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==QL.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e){this.key=e}}class dse{constructor(e){this.key=e}}class M2e{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Yt(),this.mutatedKeys=Yt(),this.eu=Dae(e),this.tu=new p0(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new W7,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const h=i.get(c),d=FM(this.query,f)?f:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let v=!1;h&&d?h.data.isEqual(d.data)?p!==m&&(n.track({type:3,doc:d}),v=!0):this.su(h,d)||(n.track({type:2,doc:d}),v=!0,(l&&this.eu(d,l)>0||u&&this.eu(d,u)<0)&&(o=!0)):!h&&d?(n.track({type:0,doc:d}),v=!0):h&&!d&&(n.track({type:1,doc:h}),v=!0,(l||u)&&(o=!0)),v&&(d?(s=s.add(d),a=m?a.add(c):a.delete(c)):(s=s.delete(c),a=a.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),a=a.delete(c.key),n.track({type:1,doc:c})}return{tu:s,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((c,f)=>function(d,p){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:v})}};return m(d)-m(p)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new s1(this.query,e.tu,a,s,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W7,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Yt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new dse(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new hse(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Yt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return s1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const X5="SyncEngine";class I2e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class O2e{constructor(e){this.key=e,this.hu=!1}}class k2e{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Lv(o=>Tae(o),RM),this.Iu=new Map,this.Eu=new Set,this.du=new yn(ct.comparator),this.Au=new Map,this.Ru=new B5,this.Vu={},this.mu=new Map,this.fu=a1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R2e(t,e,r=!0){const n=bse(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await pse(n,e,r,!0),i}async function F2e(t,e){const r=bse(t);await pse(r,e,!0,!1)}async function pse(t,e,r,n){const i=await r2e(t.localStore,hc(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await L2e(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&nse(t.remoteStore,i),o}async function L2e(t,e,r,n,i){t.pu=(f,h,d)=>async function(m,v,y,w){let b=v.view.ru(y);b.Cs&&(b=await j7(m.localStore,v.query,!1).then(({documents:S})=>v.view.ru(S,b)));const A=w&&w.targetChanges.get(v.targetId),x=w&&w.targetMismatches.get(v.targetId)!=null,_=v.view.applyChanges(b,m.isPrimaryClient,A,x);return Y7(m,v.targetId,_.au),_.snapshot}(t,f,h,d);const a=await j7(t.localStore,e,!0),s=new M2e(e,a.Qs),o=s.ru(a.documents),l=xS.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,l);Y7(t,r,u.au);const c=new I2e(e,r,s);return t.Tu.set(e,c),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function B2e(t,e,r){const n=Nt(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(s=>!RM(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await XL(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&U5(n.remoteStore,i.targetId),ZL(n,i.targetId)}).catch(B1)):(ZL(n,i.targetId),await XL(n.localStore,i.targetId,!0))}async function $2e(t,e){const r=Nt(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),U5(r.remoteStore,n.targetId))}async function j2e(t,e,r){const n=G2e(t);try{const i=await function(s,o){const l=Nt(s),u=Yr.now(),c=o.reduce((d,p)=>d.add(p.key),Yt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=eh(),m=Yt();return l.Ns.getEntries(d,c).next(v=>{p=v,p.forEach((y,w)=>{w.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,p)).next(v=>{f=v;const y=[];for(const w of o){const b=tNe(w,f.get(w.key).overlayedDocument);b!=null&&y.push(new Lp(w.key,b,bae(b.value.mapValue),ml.exists(!0)))}return l.mutationQueue.addMutationBatch(d,u,y,o)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,m);return l.documentOverlayCache.saveOverlays(d,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Pae(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new yn(Xt)),u=u.insert(o,l),s.Vu[s.currentUser.toKey()]=u}(n,i.batchId,r),await _S(n,i.changes),await UM(n.remoteStore)}catch(i){const a=G5(i,"Failed to persist write");r.reject(a)}}async function mse(t,e){const r=Nt(t);try{const n=await JNe(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.Au.get(a);s&&(fr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?fr(s.hu,14607):i.removedDocuments.size>0&&(fr(s.hu,42227),s.hu=!1))}),await _S(r,n,e)}catch(n){await B1(n)}}function X7(t,e,r){const n=Nt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Nt(s);l.onlineState=o;let u=!1;l.queries.forEach((c,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&K5(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function V2e(t,e,r){const n=Nt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let s=new yn(ct.comparator);s=s.insert(a,ka.newNoDocument(a,Et.min()));const o=Yt().add(a),l=new $M(Et.min(),new Map,new yn(Xt),s,o);await mse(n,l),n.du=n.du.remove(a),n.Au.delete(e),Y5(n)}else await XL(n.localStore,e,!1).then(()=>ZL(n,e,r)).catch(B1)}async function U2e(t,e){const r=Nt(t),n=e.batch.batchId;try{const i=await ZNe(r.localStore,e);vse(r,n,null),gse(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await _S(r,i)}catch(i){await B1(i)}}async function z2e(t,e,r){const n=Nt(t);try{const i=await function(s,o){const l=Nt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(fr(f!==null,37113),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(n.localStore,e);vse(n,e,r),gse(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await _S(n,i)}catch(i){await B1(i)}}function gse(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function vse(t,e,r){const n=Nt(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function ZL(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||yse(t,n)})}function yse(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(U5(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Y5(t))}function Y7(t,e,r){for(const n of r)n instanceof hse?(t.Ru.addReference(n.key,e),q2e(t,n)):n instanceof dse?(Xe(X5,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||yse(t,n.key)):yt(19791,{wu:n})}function q2e(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Xe(X5,"New document in limbo: "+r),t.Eu.add(n),Y5(t))}function Y5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ct(zr.fromString(e)),n=t.fu.next();t.Au.set(n,new O2e(r)),t.du=t.du.insert(r,n),nse(t.remoteStore,new zd(hc(I5(r.path)),n,"TargetPurposeLimboResolution",IM.ce))}}async function _S(t,e,r){const n=Nt(t),i=[],a=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{s.push(n.pu(l,e,r).then(u=>{var c;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(c=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=j5.As(l.targetId,u);a.push(f)}}))}),await Promise.all(s),n.Pu.H_(i),await async function(l,u){const c=Nt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(u,h=>Ne.forEach(h.Es,d=>c.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>Ne.forEach(h.ds,d=>c.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!$1(f))throw f;Xe(V5,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const d=c.Ms.get(h),p=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(h,m)}}}(n.localStore,a))}async function H2e(t,e){const r=Nt(t);if(!r.currentUser.isEqual(e)){Xe(X5,"User change. New user:",e.toKey());const n=await Jae(r.localStore,e);r.currentUser=e,function(a,s){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Ge(Te.CANCELLED,s))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _S(r,n.Ls)}}function W2e(t,e){const r=Nt(t),n=r.Au.get(e);if(n&&n.hu)return Yt().add(n.key);{let i=Yt();const a=r.Iu.get(e);if(!a)return i;for(const s of a){const o=r.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function bse(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mse.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V2e.bind(null,e),e.Pu.H_=N2e.bind(null,e.eventManager),e.Pu.yu=P2e.bind(null,e.eventManager),e}function G2e(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U2e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z2e.bind(null,e),e}class c2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return QNe(this.persistence,new KNe,e.initialUser,this.serializer)}Cu(e){return new Zae($5.mi,this.serializer)}Du(e){return new i2e}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}c2.provider={build:()=>new c2};class K2e extends c2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){fr(this.persistence.referenceDelegate instanceof l2,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ONe(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Ts.withCacheSize(this.cacheSizeBytes):Ts.DEFAULT;return new Zae(n=>l2.mi(n,r),this.serializer)}}class JL{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>X7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=H2e.bind(null,this.syncEngine),await C2e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D2e}()}createDatastore(e){const r=jM(e.databaseInfo.databaseId),n=function(a){return new u2e(a)}(e.databaseInfo);return function(a,s,o,l){return new d2e(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,s,o){return new m2e(n,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,r=>X7(this.syncEngine,r,0),function(){return z7.v()?new z7:new a2e}())}createSyncEngine(e,r){return function(i,a,s,o,l,u,c){const f=new k2e(i,a,s,o,l,u);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Nt(i);Xe(wv,"RemoteStore shutting down."),a.Ea.add(5),await AS(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}JL.provider={build:()=>new JL};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="FirestoreClient";class X2e{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ia.UNAUTHENTICATED,this.clientId=C5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async s=>{Xe(wp,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Xe(wp,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=G5(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Xk(t,e){t.asyncQueue.verifyOperationInProgress(),Xe(wp,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Jae(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Q7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Y2e(t);Xe(wp,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>H7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>H7(e.remoteStore,i)),t._onlineComponents=e}async function Y2e(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe(wp,"Using user provided OfflineComponentProvider");try{await Xk(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;t1("Error using user provided cache. Falling back to memory cache: "+r),await Xk(t,new c2)}}else Xe(wp,"Using default OfflineComponentProvider"),await Xk(t,new K2e(void 0));return t._offlineComponents}async function xse(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe(wp,"Using user provided OnlineComponentProvider"),await Q7(t,t._uninitializedComponentsProvider._online)):(Xe(wp,"Using default OnlineComponentProvider"),await Q7(t,new JL))),t._onlineComponents}function Q2e(t){return xse(t).then(e=>e.syncEngine)}async function Ase(t){const e=await xse(t),r=e.eventManager;return r.onListen=R2e.bind(null,e.syncEngine),r.onUnlisten=B2e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=F2e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=$2e.bind(null,e.syncEngine),r}function Z2e(t,e,r={}){const n=new Lf;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new wse({next:h=>{c.Nu(),s.enqueueAndForget(()=>cse(a,f));const d=h.docs.has(o);!d&&h.fromCache?u.reject(new Ge(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&l&&l.source==="server"?u.reject(new Ge(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new fse(I5(o.path),c,{includeMetadataChanges:!0,qa:!0});return use(a,f)}(await Ase(t),t.asyncQueue,e,r,n)),n.promise}function J2e(t,e,r={}){const n=new Lf;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new wse({next:h=>{c.Nu(),s.enqueueAndForget(()=>cse(a,f)),h.fromCache&&l.source==="server"?u.reject(new Ge(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new fse(o,c,{includeMetadataChanges:!0,qa:!0});return use(a,f)}(await Ase(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _se(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese="firestore.googleapis.com",J7=!0;class eq{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ese,this.ssl=J7}else this.host=e.host,this.ssl=e.ssl??J7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qae;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MNe)throw new Ge(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gDe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_se(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zM{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eq({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eq(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new sDe;switch(n.type){case"firstParty":return new cDe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ge(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Z7.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),Z7.delete(r),n.terminate())}(this),Promise.resolve()}}function ePe(t,e,r,n={}){var u;t=cu(t,zM);const i=kv(e),a=t._getSettings(),s={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(f5(`https://${o}`),h5("Firestore",!0)),a.host!==Ese&&a.host!==o&&t1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:i,emulatorOptions:n};if(!mv(l,s)&&(t._setSettings(l),n.mockUserToken)){let c,f;if(typeof n.mockUserToken=="string")c=n.mockUserToken,f=Ia.MOCK_USER;else{c=die(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Ge(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ia(h)}t._authCredentials=new oDe(new oae(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $v(this.firestore,e,this._query)}}class jn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ip(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}toJSON(){return{type:jn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(bS(r,jn._jsonSchema))return new jn(e,n||null,new ct(zr.fromString(r.referencePath)))}}jn._jsonSchemaVersion="firestore/documentReference/1.0",jn._jsonSchema={type:Yn("string",jn._jsonSchemaVersion),referencePath:Yn("string")};class ip extends $v{constructor(e,r,n){super(e,r,I5(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new ct(e))}withConverter(e){return new ip(this.firestore,e,this._path)}}function xv(t,e,...r){if(t=Vi(t),lae("collection","path",e),t instanceof zM){const n=zr.fromString(e,...r);return d7(n),new ip(t,null,n)}{if(!(t instanceof jn||t instanceof ip))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zr.fromString(e,...r));return d7(n),new ip(t.firestore,null,n)}}function xp(t,e,...r){if(t=Vi(t),arguments.length===1&&(e=C5.newId()),lae("doc","path",e),t instanceof zM){const n=zr.fromString(e,...r);return h7(n),new jn(t,null,new ct(n))}{if(!(t instanceof jn||t instanceof ip))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zr.fromString(e,...r));return h7(n),new jn(t.firestore,t instanceof ip?t.converter:null,new ct(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="AsyncQueue";class rq{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tse(this,"async_queue_retry"),this._c=()=>{const n=Kk();n&&Xe(tq,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Kk();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Kk();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Lf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$1(e))throw e;Xe(tq,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Jf("INTERNAL UNHANDLED ERROR: ",nq(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=W5.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&yt(47125,{Pc:nq(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function nq(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class jv extends zM{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new rq,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rq(e),this._firestoreClient=void 0,await e}}}function tPe(t,e){const r=typeof t=="object"?t:m5(),n=typeof t=="string"?t:i2,i=TM(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=cie("firestore");a&&ePe(i,...a)}return i}function Q5(t){if(t._terminated)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rPe(t),t._firestoreClient}function rPe(t){var n,i,a;const e=t._freezeSettings(),r=function(o,l,u,c){return new TDe(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_se(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new X2e(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sl(ma.fromBase64String(e))}catch(r){throw new Ge(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new sl(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bS(e,sl._jsonSchema))return sl.fromBase64String(e.bytes)}}sl._jsonSchemaVersion="firestore/bytes/1.0",sl._jsonSchema={type:Yn("string",sl._jsonSchemaVersion),bytes:Yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ge(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ge(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ge(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pc._jsonSchemaVersion}}static fromJSON(e){if(bS(e,pc._jsonSchema))return new pc(e.latitude,e.longitude)}}pc._jsonSchemaVersion="firestore/geoPoint/1.0",pc._jsonSchema={type:Yn("string",pc._jsonSchemaVersion),latitude:Yn("number"),longitude:Yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bS(e,mc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new mc(e.vectorValues);throw new Ge(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mc._jsonSchemaVersion="firestore/vectorValue/1.0",mc._jsonSchema={type:Yn("string",mc._jsonSchemaVersion),vectorValues:Yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nPe=/^__.*__$/;class iPe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Lp(e,this.data,this.fieldMask,r,this.fieldTransforms):new wS(e,this.data,r,this.fieldTransforms)}}class Sse{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Lp(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Cse(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:t})}}class Z5{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Z5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return f2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Cse(this.Ac)&&nPe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aPe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||jM(e)}Cc(e,r,n,i=!1){return new Z5({Ac:e,methodName:r,Dc:n,path:sa.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HM(t){const e=t._freezeSettings(),r=jM(t._databaseId);return new aPe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Tse(t,e,r,n,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);t6("Data must be an object, but it was:",s,n);const o=Dse(n,s);let l,u;if(a.merge)l=new bo(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const c=[];for(const f of a.mergeFields){const h=eB(e,f,r);if(!s.contains(h))throw new Ge(Te.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Pse(c,h)||c.push(h)}l=new bo(c),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new iPe(new Ps(o),l,u)}class WM extends ES{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof WM}}class J5 extends ES{_toFieldTransform(e){return new Bae(e.path,new BA)}isEqual(e){return e instanceof J5}}class e6 extends ES{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new VA(e.serializer,Oae(e.serializer,this.Fc));return new Bae(e.path,r)}isEqual(e){return e instanceof e6&&this.Fc===e.Fc}}function sPe(t,e,r,n){const i=t.Cc(1,e,r);t6("Data must be an object, but it was:",i,n);const a=[],s=Ps.empty();Fp(n,(l,u)=>{const c=r6(e,l,r);u=Vi(u);const f=i.yc(c);if(u instanceof WM)a.push(c);else{const h=SS(u,f);h!=null&&(a.push(c),s.set(c,h))}});const o=new bo(a);return new Sse(s,o,i.fieldTransforms)}function oPe(t,e,r,n,i,a){const s=t.Cc(1,e,r),o=[eB(e,n,r)],l=[i];if(a.length%2!=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(eB(e,a[h])),l.push(a[h+1]);const u=[],c=Ps.empty();for(let h=o.length-1;h>=0;--h)if(!Pse(u,o[h])){const d=o[h];let p=l[h];p=Vi(p);const m=s.yc(d);if(p instanceof WM)u.push(d);else{const v=SS(p,m);v!=null&&(u.push(d),c.set(d,v))}}const f=new bo(u);return new Sse(c,f,s.fieldTransforms)}function lPe(t,e,r,n=!1){return SS(r,t.Cc(n?4:3,e))}function SS(t,e){if(Nse(t=Vi(t)))return t6("Unsupported field value:",e,t),Dse(t,e);if(t instanceof ES)return function(n,i){if(!Cse(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let s=0;for(const o of n){let l=SS(o,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=Vi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Oae(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Yr.fromDate(n);return{timestampValue:o2(i.serializer,a)}}if(n instanceof Yr){const a=new Yr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:o2(i.serializer,a)}}if(n instanceof pc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof sl)return{bytesValue:qae(i.serializer,n._byteString)};if(n instanceof jn){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:L5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof mc)return function(s,o){return{mapValue:{fields:{[vae]:{stringValue:yae},[a2]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return O5(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${MM(n)}`)}(t,e)}function Dse(t,e){const r={};return fae(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fp(t,(n,i)=>{const a=SS(i,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function Nse(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yr||t instanceof pc||t instanceof sl||t instanceof jn||t instanceof ES||t instanceof mc)}function t6(t,e,r){if(!Nse(r)||!uae(r)){const n=MM(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function eB(t,e,r){if((e=Vi(e))instanceof qM)return e._internalPath;if(typeof e=="string")return r6(t,e);throw f2("Field path arguments must be of type string or ",t,!1,void 0,r)}const uPe=new RegExp("[~\\*/\\[\\]]");function r6(t,e,r){if(e.search(uPe)>=0)throw f2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new qM(...e.split("."))._internalPath}catch{throw f2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function f2(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Ge(Te.INVALID_ARGUMENT,o+t+l)}function Pse(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cPe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(GM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class cPe extends Mse{data(){return super.data()}}function GM(t,e){return typeof e=="string"?r6(t,e):e instanceof qM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fPe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ge(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n6{}class Ise extends n6{}function KM(t,e,...r){let n=[];e instanceof n6&&n.push(e),n=n.concat(r),function(a){const s=a.filter(l=>l instanceof i6).length,o=a.filter(l=>l instanceof XM).length;if(s>1||s>0&&o>0)throw new Ge(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class XM extends Ise{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new XM(e,r,n)}_apply(e){const r=this._parse(e);return Rse(e._query,r),new $v(e.firestore,e.converter,zL(e._query,r))}_parse(e){const r=HM(e.firestore);return function(a,s,o,l,u,c,f){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){aq(f,c);const p=[];for(const m of f)p.push(iq(l,a,m));h={arrayValue:{values:p}}}else h=iq(l,a,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||aq(f,c),h=lPe(o,s,f,c==="in"||c==="not-in");return Xn.create(u,c,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ose(t,e,r){const n=e,i=GM("where",t);return XM._create(i,n,r)}class i6 extends n6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new i6(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:fu.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)Rse(s,l),s=zL(s,l)}(e._query,r),new $v(e.firestore,e.converter,zL(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a6 extends Ise{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new a6(e,r)}_apply(e){const r=function(i,a,s){if(i.startAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new LA(a,s)}(e._query,this._field,this._direction);return new $v(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new j1(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function kse(t,e="asc"){const r=e,n=GM("orderBy",t);return a6._create(n,r)}function iq(t,e,r){if(typeof(r=Vi(r))=="string"){if(r==="")throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cae(e)&&r.indexOf("/")!==-1)throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(zr.fromString(r));if(!ct.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return x7(t,new ct(n))}if(r instanceof jn)return x7(t,r._key);throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${MM(r)}.`)}function aq(t,e){if(!Array.isArray(t)||t.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rse(t,e){const r=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class hPe{convertValue(e,r="none"){switch(yp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(vp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Fp(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,i,a;const r=(a=(i=(n=e.fields)==null?void 0:n[a2].arrayValue)==null?void 0:i.values)==null?void 0:a.map(s=>Ln(s.doubleValue));return new mc(r)}convertGeoPoint(e){return new pc(Ln(e.latitude),Ln(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=kM(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(kA(e));default:return null}}convertTimestamp(e){const r=gp(e);return new Yr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=zr.fromString(e);fr(Yae(n),9688,{name:e});const i=new RA(n.get(1),n.get(3)),a=new ct(n.popFirst(5));return i.isEqual(r)||Jf(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fse(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Ex{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jg extends Mse{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new QD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(GM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Jg._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Jg._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jg._jsonSchema={type:Yn("string",Jg._jsonSchemaVersion),bundleSource:Yn("string","DocumentSnapshot"),bundleName:Yn("string"),bundle:Yn("string")};class QD extends Jg{data(e={}){return super.data(e)}}class m0{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ex(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new QD(this._firestore,this._userDataWriter,n.key,n,new Ex(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ge(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new QD(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ex(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new QD(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ex(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:dPe(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=m0._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=C5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dPe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lse(t){t=cu(t,jn);const e=cu(t.firestore,jv);return Z2e(Q5(e),t._key).then(r=>mPe(e,t,r))}m0._jsonSchemaVersion="firestore/querySnapshot/1.0",m0._jsonSchema={type:Yn("string",m0._jsonSchemaVersion),bundleSource:Yn("string","QuerySnapshot"),bundleName:Yn("string"),bundle:Yn("string")};class Bse extends hPe{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,r)}}function YM(t){t=cu(t,$v);const e=cu(t.firestore,jv),r=Q5(e),n=new Bse(e);return fPe(t._query),J2e(r,t._query).then(i=>new m0(e,n,t,i))}function pPe(t,e,r){t=cu(t,jn);const n=cu(t.firestore,jv),i=Fse(t.converter,e);return QM(n,[Tse(HM(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ml.none())])}function $se(t,e,r,...n){t=cu(t,jn);const i=cu(t.firestore,jv),a=HM(i);let s;return s=typeof(e=Vi(e))=="string"||e instanceof qM?oPe(a,"updateDoc",t._key,e,r,n):sPe(a,"updateDoc",t._key,e),QM(i,[s.toMutation(t._key,ml.exists(!0))])}function jse(t){return QM(cu(t.firestore,jv),[new k5(t._key,ml.none())])}function s6(t,e){const r=cu(t.firestore,jv),n=xp(t),i=Fse(t.converter,e);return QM(r,[Tse(HM(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ml.exists(!1))]).then(()=>n)}function QM(t,e){return function(n,i){const a=new Lf;return n.asyncQueue.enqueueAndForget(async()=>j2e(await Q2e(n),i,a)),a.promise}(Q5(t),e)}function mPe(t,e,r){const n=r.docs.get(e._key),i=new Bse(t);return new Jg(t,i,e._key,n,new Ex(r.hasPendingWrites,r.fromCache),e.converter)}function ap(){return new J5("serverTimestamp")}function gPe(t){return new e6("increment",t)}(function(e,r=!0){(function(i){L1=i})(Rv),gv(new pp("firestore",(n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),o=new jv(new lDe(n.getProvider("auth-internal")),new fDe(s,n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ge(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new RA(u.options.projectId,c)}(s,i),s);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),uc(l7,u7,e),uc(l7,u7,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse="firebasestorage.googleapis.com",vPe="storageBucket",yPe=2*60*1e3,bPe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Tc{constructor(e,r,n=0){super(Yk(e),`Firebase Storage: ${r} (${Yk(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bc;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bc||(bc={}));function Yk(t){return"storage/"+t}function wPe(){const t="An unknown error occurred, please check the error payload for server response.";return new Dc(bc.UNKNOWN,t)}function xPe(){return new Dc(bc.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function APe(){return new Dc(bc.CANCELED,"User canceled the upload/download.")}function _Pe(t){return new Dc(bc.INVALID_URL,"Invalid URL '"+t+"'.")}function EPe(t){return new Dc(bc.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sq(t){return new Dc(bc.INVALID_ARGUMENT,t)}function Use(){return new Dc(bc.APP_DELETED,"The Firebase app was deleted.")}function SPe(t){return new Dc(bc.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ru.makeFromUrl(e,r)}catch{return new ru(e,"")}if(n.path==="")return n;throw EPe(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const c="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",d=new RegExp(`^https?://${f}/${c}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},m=r===Vse?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${v}`,"i"),b=[{regex:o,indices:l,postModify:a},{regex:d,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<b.length;A++){const x=b[A],_=x.regex.exec(e);if(_){const S=_[x.indices.bucket];let E=_[x.indices.path];E||(E=""),n=new ru(S,E),x.postModify(n);break}}if(n==null)throw _Pe(e);return n}}class CPe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TPe(t,e,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function f(v){i=setTimeout(()=>{i=null,t(d,l())},v)}function h(){a&&clearTimeout(a)}function d(v,...y){if(u){h();return}if(v){h(),c.call(null,v,...y);return}if(l()||s){h(),c.call(null,v,...y);return}n<64&&(n*=2);let b;o===1?(o=2,b=0):b=(n+Math.random())*1e3,f(b)}let p=!1;function m(v){p||(p=!0,h(),!u&&(i!==null?(v||(o=2),clearTimeout(i),f(0)):v||(o=1)))}return f(0),a=setTimeout(()=>{s=!0,m(!0)},r),m}function DPe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NPe(t){return t!==void 0}function oq(t,e,r,n){if(n<e)throw sq(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw sq(`Invalid value for '${t}'. Expected ${r} or less.`)}function PPe(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var h2;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(h2||(h2={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MPe(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IPe{constructor(e,r,n,i,a,s,o,l,u,c,f,h=!0,d=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new oT(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===h2.NO_ERROR,l=a.getStatus();if(!o||MPe(l,this.additionalRetryCodes_)&&this.retry){const c=a.getErrorCode()===h2.ABORT;n(!1,new oT(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new oT(u,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());NPe(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=wPe();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?Use():APe();s(l)}else{const l=xPe();s(l)}};this.canceled_?r(!1,new oT(!1,null,!0)):this.backoffId_=TPe(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DPe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oT{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function OPe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kPe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RPe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FPe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LPe(t,e,r,n,i,a,s=!0,o=!1){const l=PPe(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return RPe(c,e),OPe(c,r),kPe(c,a),FPe(c,n),new IPe(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BPe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $Pe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,r){this._service=e,r instanceof ru?this._location=r:this._location=ru.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new d2(e,r)}get root(){const e=new ru(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $Pe(this._location.path)}get storage(){return this._service}get parent(){const e=BPe(this._location.path);if(e===null)return null;const r=new ru(this._location.bucket,e);return new d2(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw SPe(e)}}function lq(t,e){const r=e==null?void 0:e[vPe];return r==null?null:ru.makeFromBucketSpec(r,t)}function jPe(t,e,r,n={}){t.host=`${e}:${r}`;const i=kv(e);i&&(f5(`https://${t.host}/b`),h5("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:die(a,t.app.options.projectId))}class VPe{constructor(e,r,n,i,a,s=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=Vse,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yPe,this._maxUploadRetryTime=bPe,this._requests=new Set,i!=null?this._bucket=ru.makeFromBucketSpec(i,this._host):this._bucket=lq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ru.makeFromBucketSpec(this._url,e):this._bucket=lq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new d2(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new CPe(Use());{const s=LPe(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const uq="@firebase/storage",cq="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zse="storage";function UPe(t=m5(),e){t=Vi(t);const n=TM(t,zse).getImmediate({identifier:e}),i=cie("storage");return i&&zPe(n,...i),n}function zPe(t,e,r,n={}){jPe(t,e,r,n)}function qPe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new VPe(r,n,i,e,Rv)}function HPe(){gv(new pp(zse,qPe,"PUBLIC").setMultipleInstances(!0)),uc(uq,cq,""),uc(uq,cq,"esm2020")}HPe();const WPe={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},o6=gie(WPe),p2=iDe(o6),Os=tPe(o6);UPe(o6);function GPe(){var b;const[t,e]=O.useState([]),[r,n]=O.useState(!0),[i,a]=O.useState(""),[s,o]=O.useState(null),[l,u]=O.useState({title:"",category:((b=py[0])==null?void 0:b.id)??1,content:""}),[c,f]=O.useState(!1),[h,d]=O.useState(!1),p=fv(),m=A=>A?typeof A=="string"?A:A.toDate?A.toDate().toLocaleDateString("ko-KR"):A instanceof Date?A.toLocaleDateString("ko-KR"):new Date(A).toLocaleDateString("ko-KR"):"",v=O.useCallback(async()=>{n(!0),a("");try{const A=KM(xv(Os,"forumPosts"),kse("createdAt","desc")),_=(await YM(A)).docs.map(S=>{var T;const E=S.data();return{id:S.id,...E,createdAt:(T=E.createdAt)!=null&&T.toDate?E.createdAt.toDate():E.createdAt||new Date,replies:E.replies??0}});e(_)}catch(A){console.error("  :",A),a("  .    .")}finally{n(!1)}},[]);O.useEffect(()=>{v()},[v]);const y=async A=>{var x;if(A.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}d(!0);try{const _=(p==null?void 0:p.username)||(p==null?void 0:p.email)||" ",S={title:l.title.trim(),content:l.content.trim(),category:Number(l.category),author:_,authorEmail:(p==null?void 0:p.email)||null,replies:0,createdAt:ap(),updatedAt:ap()},E=await s6(xv(Os,"forumPosts"),S);console.log("   :",E.id);const T={id:E.id,...S,createdAt:new Date};e(D=>[T,...D]),u({title:"",category:((x=py[0])==null?void 0:x.id)??1,content:""}),f(!1),alert(" .")}catch(_){console.error("   :",_),console.error(" :",_.code),console.error(" :",_.message),alert("  : "+_.message)}finally{d(!1)}},w=s?t.filter(A=>A.category===s):t;return I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),I.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[I.jsx("button",{onClick:()=>f(!c),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:c?"":"  "}),I.jsx("button",{onClick:v,className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-100 dark:hover:bg-gray-800",children:""})]}),c&&I.jsxs("form",{onSubmit:y,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("input",{type:"text",value:l.title,onChange:A=>u({...l,title:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("select",{value:l.category,onChange:A=>u({...l,category:parseInt(A.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:py.map(A=>I.jsx("option",{value:A.id,children:A.name},A.id))})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("textarea",{rows:"6",value:l.content,onChange:A=>u({...l,content:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),I.jsx("button",{type:"submit",disabled:h,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:h?" ...":""})]}),I.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${s===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),py.map(A=>I.jsx("button",{onClick:()=>o(A.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${s===A.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:A.name},A.id))]}),I.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r&&I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ..."}),!r&&w.length===0&&I.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400 border border-dashed rounded-lg",children:"   ."}),!r&&w.map(A=>{var x;return I.jsx(Rr,{to:`/forum/${A.id}`,state:{post:A},children:I.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:I.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:I.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:((x=py.find(_=>_.id===A.category))==null?void 0:x.name)||""})}),I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:A.title}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:A.content}),I.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[A.author,"  ",m(A.createdAt)]})]}),I.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",A.replies??0]})]})})},A.id)})]}),i&&I.jsx("p",{className:"text-sm text-red-500",children:i})]})}function KPe(){var b,A,x;const{postId:t}=cee();I1();const e=M1(),{isDark:r}=Cl(),n=fv(),[i,a]=O.useState(((b=e.state)==null?void 0:b.post)||null),[s,o]=O.useState(!((A=e.state)!=null&&A.post)),[l,u]=O.useState([]),[c,f]=O.useState(""),[h,d]=O.useState(""),p=_=>_?typeof _=="string"?_:_.toDate?_.toDate().toLocaleDateString("ko-KR"):_ instanceof Date?_.toLocaleDateString("ko-KR"):new Date(_).toLocaleDateString("ko-KR"):"",m=O.useCallback(async()=>{var _;o(!0);try{const S=xp(Os,"forumPosts",t),E=await Lse(S);if(E.exists()){const T=E.data();a({id:E.id,...T,createdAt:(_=T.createdAt)!=null&&_.toDate?T.createdAt.toDate():T.createdAt||new Date})}else a(null)}catch(S){console.error("  :",S),a(null)}finally{o(!1)}},[t]),v=O.useCallback(async()=>{try{const _=xv(Os,"forumPosts",t,"replies"),S=KM(_,kse("createdAt","asc")),T=(await YM(S)).docs.map(D=>{var P;const N=D.data();return{id:D.id,...N,createdAt:(P=N.createdAt)!=null&&P.toDate?N.createdAt.toDate():N.createdAt||new Date}});u(T)}catch(_){console.error("  :",_)}},[t]);O.useEffect(()=>{var _;(_=e.state)!=null&&_.post||m()},[m,(x=e.state)==null?void 0:x.post]),O.useEffect(()=>{v()},[v]);const y=async _=>{if(_.preventDefault(),d(""),!c.trim()){d(" .");return}try{const S=xv(Os,"forumPosts",t,"replies"),T={author:(n==null?void 0:n.username)||(n==null?void 0:n.email)||" ",authorEmail:(n==null?void 0:n.email)||null,content:c.trim(),likes:0,createdAt:ap()},N={id:(await s6(S,T)).id,...T,createdAt:new Date};u(M=>[...M,N]),f("");const P=xp(Os,"forumPosts",t);await $se(P,{replies:gPe(1),updatedAt:ap()}),a(M=>M&&{...M,replies:(M.replies||0)+1})}catch(S){console.error("  :",S),d("  .    .")}};if(s)return I.jsx("div",{className:`text-center py-12 ${r?"text-gray-300":"text-gray-700"}`,children:"  ..."});if(!i)return I.jsxs("div",{className:"text-center py-12",children:[I.jsx("h1",{className:`text-2xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:"   ."}),I.jsx(Rr,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const w=py.find(_=>_.id===(i==null?void 0:i.category));return I.jsxs("div",{className:"space-y-8",children:[I.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[I.jsx(Rr,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),I.jsxs("div",{className:`p-6 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("div",{className:"mb-3",children:I.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${r?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:w==null?void 0:w.name})}),I.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:i.title}),I.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${r?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.author]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",p(i.createdAt)]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.replies||l.length,""]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.views||0,""]})]}),I.jsx("div",{className:`prose prose-sm ${r?"prose-invert":""} max-w-none mb-8`,children:I.jsx("div",{className:`${r?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:i.content})})]})]}),I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:`text-xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:" "}),I.jsxs("form",{onSubmit:y,className:"space-y-4",children:[I.jsx("textarea",{value:c,onChange:_=>f(_.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),h&&I.jsx("p",{className:"text-sm text-red-400",children:h}),I.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[I.jsxs("h2",{className:`text-2xl font-bold ${r?"text-white":"text-gray-900"}`,children:[" ",l.length,""]}),l.map(_=>I.jsxs(We.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsxs("div",{className:`flex justify-between items-start mb-2 ${r?"text-gray-300":"text-gray-600"} text-sm`,children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:_.author}),I.jsx("span",{className:"ml-4",children:p(_.createdAt)})]}),I.jsxs("button",{className:`transition ${r?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",_.likes]})]}),I.jsx("p",{className:`${r?"text-gray-200":"text-gray-700"} leading-6`,children:_.content})]},_.id))]})]})}function XPe(){const[t,e]=O.useState(""),r=i9.filter(n=>n.term.toLowerCase().includes(t.toLowerCase())||n.definition.toLowerCase().includes(t.toLowerCase()));return I.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),I.jsx("input",{type:"search",placeholder:"   ...",value:t,onChange:n=>e(n.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),I.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.map((n,i)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.term}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.definition})]},i)),r.length===0&&I.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),I.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",i9.length,"   ",r.length,"  "]})]})}function YPe(){return I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Dk.textbooks.map((t,e)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:t.title}),I.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t.authors," (",t.year,")"]})]},e))})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),I.jsx("div",{className:"space-y-3 sm:space-y-4",children:Dk.databases.map((t,e)=>I.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),I.jsx("div",{className:"space-y-3 sm:space-y-4",children:Dk.tools.map((t,e)=>I.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]})]})}function QPe(){const{isDark:t}=Cl(),e=fv(),[r,n]=O.useState({username:"",email:"",affiliation:"",bio:""}),[i,a]=O.useState(!1),[s,o]=O.useState(!0),[l,u]=O.useState(!1),[c,f]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const m=xp(Os,"profiles",e.email),v=await Lse(m),y={username:e.username||"",email:e.email,affiliation:"",bio:""};v.exists()?(n({...y,...v.data()}),console.log(" Firestore  :",e.email)):(n(y),console.log("   (Firestore )"))}catch(m){console.error(" Firestore  :",m),n({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email,e==null?void 0:e.username]);const h=p=>{const{name:m,value:v}=p.target;n(y=>({...y,[m]:v}))},d=async p=>{p.preventDefault(),u(!0);try{await pPe(xp(Os,"profiles",e.email),{username:r.username,email:r.email,affiliation:r.affiliation,bio:r.bio,updatedAt:ap()}),console.log(" Firestore :",e.email),f("  ."),a(!1),setTimeout(()=>f(""),3e3)}catch(m){console.error("  :",m.code,m.message),f("  : "+m.message)}finally{u(!1)}};return e?s?I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:"   ..."}):I.jsxs("div",{className:"max-w-2xl mx-auto",children:[I.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),c&&I.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c}),I.jsxs("div",{className:`rounded-lg p-8 ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-700":"border-gray-200"}`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:" "}),I.jsx("button",{onClick:()=>a(!i),className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?I.jsxs("form",{onSubmit:d,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("input",{type:"text",name:"username",value:r.username,onChange:h,className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("input",{type:"email",name:"email",value:r.email,onChange:h,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${t?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:" "}),I.jsx("input",{type:"text",name:"affiliation",value:r.affiliation,onChange:h,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("textarea",{name:"bio",value:r.bio,onChange:h,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${l?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:l?" ...":""})]}):I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.username})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.email})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" "}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.affiliation||""})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.bio||""})]}),I.jsx("hr",{className:t?"border-gray-700":"border-gray-200"}),I.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[I.jsxs(Rr,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[I.jsx("p",{className:"text-2xl mb-1",children:""}),I.jsx("p",{className:"font-semibold",children:""})]}),I.jsxs(Rr,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[I.jsx("p",{className:"text-2xl mb-1",children:""}),I.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:"   ."})}function ZPe(){const{isDark:t}=Cl(),e=fv(),[r,n]=O.useState([]),[i,a]=O.useState(!0),[s,o]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){a(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const c=KM(xv(Os,"bookmarks"),Ose("userEmail","==",e.email)),h=(await YM(c)).docs.map(d=>({id:d.id,...d.data()}));n(h),console.log("  :",e.email,":",h.length)}catch(c){console.error("   :",c),o("   .")}finally{a(!1)}},u=async c=>{try{const f=xp(Os,"bookmarks",c);await jse(f),n(h=>h.filter(d=>d.id!==c)),console.log("  :",c)}catch(f){o(f.message)}};return I.jsxs("div",{className:"max-w-4xl mx-auto",children:[I.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),s&&I.jsx("div",{className:`mb-4 p-4 rounded-lg ${t?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:s}),i?I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:" ..."}):r.length===0?I.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:[I.jsx("p",{className:"mb-4",children:"  ."}),I.jsx(Rr,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):I.jsx("div",{className:"space-y-4",children:r.map(c=>I.jsxs("div",{className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[I.jsxs("div",{className:"flex justify-between items-start gap-4",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("h2",{className:`text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:c.title}),I.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:[": ",I.jsx("span",{className:"font-medium",children:c.type==="paper"?"":""})]}),I.jsx("p",{className:`line-clamp-2 ${t?"text-gray-300":"text-gray-700"}`,children:c.description})]}),I.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[I.jsx(Rr,{to:c.type==="paper"?`/papers/${c.slug}`:`/concepts/${c.slug}`,className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),I.jsx("button",{onClick:()=>u(c.id),className:`px-4 py-2 rounded-lg transition ${t?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),I.jsxs("p",{className:`text-xs mt-4 ${t?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(c.created_at).toLocaleDateString("ko-KR")]})]},c.id))})]})}function JPe(){const{isDark:t}=Cl(),e=fv(),[r,n]=O.useState([]),[i,a]=O.useState(null),[s,o]=O.useState(!1),[l,u]=O.useState(""),[c,f]=O.useState(""),[h,d]=O.useState(""),[p,m]=O.useState(!0),[v,y]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){m(!1);return}(async()=>{try{const N=KM(xv(Os,"notes"),Ose("userEmail","==",e.email)),M=(await YM(N)).docs.map(j=>({id:j.id,...j.data()}));n(M),console.log("   :",e.email,":",M.length)}catch(N){console.log(" Firestore  :",N)}finally{m(!1)}})()},[e==null?void 0:e.email]);const w=()=>{o(!0),a(null),u(""),f(""),d("")},b=D=>{a(D.id),o(!1),u(D.title),f(D.content),d(D.tags.join(", "))},A=async()=>{if(!l.trim()){alert(" .");return}try{if(s){const N={id:(await s6(xv(Os,"notes"),{title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,createdAt:ap(),updatedAt:ap()})).id,title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},P=[N,...r];n(P),o(!1),a(N.id),y("  !"),setTimeout(()=>y(""),2e3),console.log("  :",e.email,l)}else if(i){const D=xp(Os,"notes",i);await $se(D,{title:l,content:c,tags:h.split(",").map(P=>P.trim()).filter(P=>P),userEmail:e.email,updatedAt:ap()});const N=r.map(P=>P.id===i?{...P,title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),updatedAt:new Date().toISOString()}:P);n(N),y("  !"),setTimeout(()=>y(""),2e3)}}catch(D){console.error("  :",D),y("  ."),setTimeout(()=>y(""),2e3)}},x=async D=>{if(confirm("  ?"))try{await jse(xp(Os,"notes",D));const N=r.filter(P=>P.id!==D);n(N),i===D&&(a(null),o(!1))}catch(N){console.error("  :",N),alert("  .")}},_=D=>new Date(D).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),S=t?"bg-gray-800 border-gray-700":"bg-white border-gray-200",E=t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",T=t?"text-gray-300":"text-gray-700";return I.jsxs("div",{className:"min-h-screen space-y-8",children:[v&&I.jsx(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${v.includes("")?"bg-red-600":"bg-green-600"}`,children:v}),I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[I.jsxs(We.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${S}`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsx("h2",{className:"text-xl font-bold",children:" "}),I.jsx("button",{onClick:w,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),I.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.length===0?I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" ."}):r.map(D=>I.jsxs("div",{onClick:()=>b(D),className:`p-3 rounded-lg cursor-pointer transition-all ${i===D.id?t?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":t?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[I.jsx("p",{className:"font-semibold text-sm truncate",children:D.title}),I.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:_(D.updatedAt)})]},D.id))})]}),I.jsx(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${S}`,children:s||i?I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${T}`,children:""}),I.jsx("input",{type:"text",value:l,onChange:D=>u(D.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${T}`,children:" ( )"}),I.jsx("input",{type:"text",value:h,onChange:D=>d(D.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${T}`,children:""}),I.jsx("textarea",{value:c,onChange:D=>f(D.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${E}`})]}),I.jsxs("div",{className:"flex gap-2 justify-end",children:[I.jsx("button",{onClick:()=>{o(!1),a(null)},className:`px-4 py-2 rounded-lg font-medium ${t?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&I.jsx("button",{onClick:()=>x(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),I.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):I.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[I.jsx("p",{className:"text-lg",children:"     "}),I.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),r.length>0&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${S}`,children:[I.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),I.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(r.flatMap(D=>D.tags).sort())].map(D=>I.jsxs("button",{onClick:()=>{const N=r.filter(P=>P.tags.includes(D));N.length>0&&b(N[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${t?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",D]},D))})]})]})}function qse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=qse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wr(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=qse(t))&&(n&&(n+=" "),n+=e);return n}var eMe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function l6(t){if(typeof t!="string")return!1;var e=eMe;return e.includes(t)}var tMe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rMe=new Set(tMe);function Hse(t){return typeof t!="string"?!1:rMe.has(t)}function Wse(t){return typeof t=="string"&&t.startsWith("data-")}function xl(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Hse(r)||Wse(r))&&(e[r]=t[r]);return e}function CS(t){if(t==null)return null;if(O.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return xl(e)}return typeof t=="object"&&!Array.isArray(t)?xl(t):null}function us(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Hse(r)||Wse(r)||l6(r))&&(e[r]=t[r]);return e}function nMe(t){return t==null?null:O.isValidElement(t)?us(t.props):typeof t=="object"&&!Array.isArray(t)?us(t):null}var iMe=["children","width","height","viewBox","className","style","title","desc"];function tB(){return tB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tB.apply(null,arguments)}function aMe(t,e){if(t==null)return{};var r,n,i=sMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function sMe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var u6=O.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:u}=t,c=aMe(t,iMe),f=a||{width:n,height:i,x:0,y:0},h=wr("recharts-surface",s);return O.createElement("svg",tB({},us(c),{className:h,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),O.createElement("title",null,l),O.createElement("desc",null,u),r)}),oMe=["children","className"];function rB(){return rB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rB.apply(null,arguments)}function lMe(t,e){if(t==null)return{};var r,n,i=uMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function uMe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var So=O.forwardRef((t,e)=>{var{children:r,className:n}=t,i=lMe(t,oMe),a=wr("recharts-layer",n);return O.createElement("g",rB({className:a},us(i),{ref:e}),r)}),Gse=O.createContext(null),cMe=()=>O.useContext(Gse);function Ur(t){return function(){return t}}const Kse=Math.cos,m2=Math.sin,pu=Math.sqrt,g2=Math.PI,ZM=2*g2,nB=Math.PI,iB=2*nB,mm=1e-6,fMe=iB-mm;function Xse(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function hMe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xse;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class dMe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xse:hMe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-e,u=i-r,c=s-e,f=o-r,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>mm)if(!(Math.abs(f*l-u*c)>mm)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-s,p=i-o,m=l*l+u*u,v=d*d+p*p,y=Math.sqrt(m),w=Math.sqrt(h),b=a*Math.tan((nB-Math.acos((m+h-v)/(2*y*w)))/2),A=b/w,x=b/y;Math.abs(A-1)>mm&&this._append`L${e+A*c},${r+A*f}`,this._append`A${a},${a},0,0,${+(f*d>c*p)},${this._x1=e+x*l},${this._y1=r+x*u}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=e+o,c=r+l,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>mm||Math.abs(this._y1-c)>mm)&&this._append`L${u},${c}`,n&&(h<0&&(h=h%iB+iB),h>fMe?this._append`A${n},${n},0,1,${f},${e-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=c}`:h>mm&&this._append`A${n},${n},0,${+(h>=nB)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function c6(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new dMe(e)}function f6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Yse(t){this._context=t}Yse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function JM(t){return new Yse(t)}function Qse(t){return t[0]}function Zse(t){return t[1]}function Jse(t,e){var r=Ur(!0),n=null,i=JM,a=null,s=c6(o);t=typeof t=="function"?t:t===void 0?Qse:Ur(t),e=typeof e=="function"?e:e===void 0?Zse:Ur(e);function o(l){var u,c=(l=f6(l)).length,f,h=!1,d;for(n==null&&(a=i(d=s())),u=0;u<=c;++u)!(u<c&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(d)return a=null,d+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ur(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ur(+l),o):e},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ur(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function lT(t,e,r){var n=null,i=Ur(!0),a=null,s=JM,o=null,l=c6(u);t=typeof t=="function"?t:t===void 0?Qse:Ur(+t),e=typeof e=="function"?e:Ur(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Zse:Ur(+r);function u(f){var h,d,p,m=(f=f6(f)).length,v,y=!1,w,b=new Array(m),A=new Array(m);for(a==null&&(o=s(w=l())),h=0;h<=m;++h){if(!(h<m&&i(v=f[h],h,f))===y)if(y=!y)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=d;--p)o.point(b[p],A[p]);o.lineEnd(),o.areaEnd()}y&&(b[h]=+t(v,h,f),A[h]=+e(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):A[h]))}if(w)return o=null,w+""||null}function c(){return Jse().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ur(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ur(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ur(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ur(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ur(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ur(+f),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(n).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ur(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class eoe{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function pMe(t){return new eoe(t,!0)}function mMe(t){return new eoe(t,!1)}const h6={draw(t,e){const r=pu(e/g2);t.moveTo(r,0),t.arc(0,0,r,0,ZM)}},gMe={draw(t,e){const r=pu(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},toe=pu(1/3),vMe=toe*2,yMe={draw(t,e){const r=pu(e/vMe),n=r*toe;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},bMe={draw(t,e){const r=pu(e),n=-r/2;t.rect(n,n,r,r)}},wMe=.8908130915292852,roe=m2(g2/10)/m2(7*g2/10),xMe=m2(ZM/10)*roe,AMe=-Kse(ZM/10)*roe,_Me={draw(t,e){const r=pu(e*wMe),n=xMe*r,i=AMe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=ZM*a/5,o=Kse(s),l=m2(s);t.lineTo(l*r,-o*r),t.lineTo(o*n-l*i,l*n+o*i)}t.closePath()}},Qk=pu(3),EMe={draw(t,e){const r=-pu(e/(Qk*3));t.moveTo(0,r*2),t.lineTo(-Qk*r,-r),t.lineTo(Qk*r,-r),t.closePath()}},Lo=-.5,Bo=pu(3)/2,aB=1/pu(12),SMe=(aB/2+1)*3,CMe={draw(t,e){const r=pu(e/SMe),n=r/2,i=r*aB,a=n,s=r*aB+r,o=-a,l=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Lo*n-Bo*i,Bo*n+Lo*i),t.lineTo(Lo*a-Bo*s,Bo*a+Lo*s),t.lineTo(Lo*o-Bo*l,Bo*o+Lo*l),t.lineTo(Lo*n+Bo*i,Lo*i-Bo*n),t.lineTo(Lo*a+Bo*s,Lo*s-Bo*a),t.lineTo(Lo*o+Bo*l,Lo*l-Bo*o),t.closePath()}};function TMe(t,e){let r=null,n=c6(i);t=typeof t=="function"?t:Ur(t||h6),e=typeof e=="function"?e:Ur(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Ur(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function v2(){}function y2(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function noe(t){this._context=t}noe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DMe(t){return new noe(t)}function ioe(t){this._context=t}ioe.prototype={areaStart:v2,areaEnd:v2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NMe(t){return new ioe(t)}function aoe(t){this._context=t}aoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PMe(t){return new aoe(t)}function soe(t){this._context=t}soe.prototype={areaStart:v2,areaEnd:v2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function MMe(t){return new soe(t)}function fq(t){return t<0?-1:1}function hq(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(fq(a)+fq(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function dq(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Zk(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-n)/3;t._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*r,a,s)}function b2(t){this._context=t}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zk(this,this._t0,dq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Zk(this,dq(this,r=hq(this,t,e)),r);break;default:Zk(this,this._t0,r=hq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function ooe(t){this._context=new loe(t)}(ooe.prototype=Object.create(b2.prototype)).point=function(t,e){b2.prototype.point.call(this,e,t)};function loe(t){this._context=t}loe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function IMe(t){return new b2(t)}function OMe(t){return new ooe(t)}function uoe(t){this._context=t}uoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=pq(t),i=pq(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function pq(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function kMe(t){return new uoe(t)}function eI(t,e){this._context=t,this._t=e}eI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function RMe(t){return new eI(t,.5)}function FMe(t){return new eI(t,0)}function LMe(t){return new eI(t,1)}function o1(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,o=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function sB(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function BMe(t,e){return t[e]}function $Me(t){const e=[];return e.key=t,e}function jMe(){var t=Ur([]),e=sB,r=o1,n=BMe;function i(a){var s=Array.from(t.apply(this,arguments),$Me),o,l=s.length,u=-1,c;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,c=f6(e(s));o<l;++o)s[c[o]].index=o;return r(s,c),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Ur(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?sB:typeof a=="function"?a:Ur(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??o1,i):r},i}function VMe(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}o1(t,e)}}function UMe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=t[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}o1(t,e)}}function zMe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,u=0;o<s;++o){for(var c=t[e[o]],f=c[n][1]||0,h=c[n-1][1]||0,d=(f-h)/2,p=0;p<o;++p){var m=t[e[p]],v=m[n][1]||0,y=m[n-1][1]||0;d+=v-y}l+=f,u+=d*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,o1(t,e)}}var tI={},coe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(coe);var d6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(d6);var rI={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(rI);var nI={},foe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(foe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=foe,r=rI;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",u="",c=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,l+=i[o]):f===u?u="":l+=f:c?f==='"'||f==="'"?u=f:f==="]"?(c=!1,a.push(l),l=""):l+=f:f==="["?(c=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}t.toPath=n})(nI);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=coe,r=d6,n=rI,i=nI;function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?r.isDeepKey(l)?a(o,i.toPath(l),u):u:c}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const c=o[l];return c===void 0?u:c}default:{if(Array.isArray(l))return s(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?u:c}}}function s(o,l,u){if(l.length===0)return u;let c=o;for(let f=0;f<l.length;f++){if(c==null||e.isUnsafeProperty(l[f]))return u;c=c[l[f]]}return c===void 0?u:c}t.get=a})(tI);var qMe=tI.get;const l1=Sl(qMe);var fl=t=>t===0?0:t>0?1:-1,wc=t=>typeof t=="number"&&t!=+t,th=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ut=t=>(typeof t=="number"||t instanceof Number)&&!wc(t),xc=t=>ut(t)||typeof t=="string",HMe=0,UA=t=>{var e=++HMe;return"".concat(t||"").concat(e)},Ap=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(e)&&typeof e!="string")return n;var a;if(th(e)){if(r==null)return n;var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return wc(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},hoe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function Bi(t,e,r){return ut(t)&&ut(e)?t+r*(e-t):e}function doe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):l1(n,e))===r)}var WMe=t=>{for(var e=t.length,r=0,n=0,i=0,a=0,s=1/0,o=-1/0,l=0,u=0,c=0;c<e;c++)l=t[c].cx||0,u=t[c].cy||0,r+=l,n+=u,i+=l*u,a+=l*l,s=Math.min(s,l),o=Math.max(o,l);var f=e*a!==r*r?(e*i-r*n)/(e*a-r*r):0;return{xmin:s,xmax:o,a:f,b:(n-f*r)/e}},sn=t=>t===null||typeof t>"u",TS=t=>sn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function GMe(t){return t!=null}function DS(){}var KMe=["type","size","sizeType"];function oB(){return oB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oB.apply(null,arguments)}function mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(r),!0).forEach(function(n){XMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XMe(t,e,r){return(e=YMe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YMe(t){var e=QMe(t,"string");return typeof e=="symbol"?e:e+""}function QMe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZMe(t,e){if(t==null)return{};var r,n,i=JMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function JMe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var poe={symbolCircle:h6,symbolCross:gMe,symbolDiamond:yMe,symbolSquare:bMe,symbolStar:_Me,symbolTriangle:EMe,symbolWye:CMe},eIe=Math.PI/180,tIe=t=>{var e="symbol".concat(TS(t));return poe[e]||h6},rIe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*eIe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},nIe=(t,e)=>{poe["symbol".concat(TS(t))]=e},iI=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=ZMe(t,KMe),a=gq(gq({},i),{},{type:e,size:r,sizeType:n}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var h=tIe(s),d=TMe().type(h).size(rIe(r,n,s)),p=d();if(p!==null)return p},{className:l,cx:u,cy:c}=a,f=us(a);return ut(u)&&ut(c)&&ut(r)?O.createElement("path",oB({},f,{className:wr("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(c,")"),d:o()})):null};iI.registerSymbol=nIe;var moe=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,p6=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(O.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{l6(i)&&(n[i]=a=>r[i](r,a))}),n},iIe=(t,e,r)=>n=>(t(e,r,n),null),m6=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];l6(i)&&typeof a=="function"&&(n||(n={}),n[i]=iIe(a,e,r))}),n},aIe=t=>Array.isArray(t)&&t.length>0;function vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sIe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(r),!0).forEach(function(n){oIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oIe(t,e,r){return(e=lIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lIe(t){var e=uIe(t,"string");return typeof e=="symbol"?e:e+""}function uIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qi(t,e){var r=sIe({},t),n=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}function w2(){return w2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w2.apply(null,arguments)}function yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cIe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(r),!0).forEach(function(n){fIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fIe(t,e,r){return(e=hIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hIe(t){var e=dIe(t,"string");return typeof e=="symbol"?e:e+""}function dIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zo=32,pIe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function mIe(t){var{data:e,iconType:r,inactiveColor:n}=t,i=zo/2,a=zo/6,s=zo/3,o=e.inactive?n:e.color,l=r??e.type;if(l==="none")return null;if(l==="plainline"){var u;return O.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:zo,y2:i,className:"recharts-legend-icon"})}if(l==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(zo,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return O.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(zo/8,"h").concat(zo,"v").concat(zo*3/4,"h").concat(-zo,"z"),className:"recharts-legend-icon"});if(O.isValidElement(e.legendIcon)){var c=cIe({},e);return delete c.legendIcon,O.cloneElement(e.legendIcon,c)}return O.createElement(iI,{fill:o,cx:i,cy:i,size:zo,sizeType:"diameter",type:l})}function gIe(t){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:s}=t,o={x:0,y:0,width:zo,height:zo},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((c,f)=>{var h=c.formatter||i,d=wr({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:c.inactive});if(c.type==="none")return null;var p=c.inactive?a:c.color,m=h?h(c.value,c,f):c.value;return O.createElement("li",w2({className:d,style:l,key:"legend-item-".concat(f)},m6(t,c,f)),O.createElement(u6,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(m," legend icon")},O.createElement(mIe,{data:c,iconType:s,inactiveColor:a})),O.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},m))})}var vIe=t=>{var e=qi(t,pIe),{payload:r,layout:n,align:i}=e;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:a},O.createElement(gIe,w2({},e,{payload:r})))},goe={},voe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(voe);var g6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(g6);var yoe={},aI={},boe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(boe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=boe;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(aI);var woe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(woe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aI,r=woe;function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(yoe);var xoe={},Aoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tI;function r(n){return function(i){return e.get(i,n)}}t.property=r})(Aoe);var _oe={},v6={},Eoe={},y6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(y6);var b6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(b6);var w6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(w6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y6,r=b6,n=w6;function i(c,f,h){return typeof h!="function"?i(c,f,()=>{}):a(c,f,function d(p,m,v,y,w,b){const A=h(p,m,v,y,w,b);return A!==void 0?!!A:a(p,m,d,b)},new Map)}function a(c,f,h,d){if(f===c)return!0;switch(typeof f){case"object":return s(c,f,h,d);case"function":return Object.keys(f).length>0?a(c,{...f},h,d):n.eq(c,f);default:return e.isObject(c)?typeof f=="string"?f==="":!0:n.eq(c,f)}}function s(c,f,h,d){if(f==null)return!0;if(Array.isArray(f))return l(c,f,h,d);if(f instanceof Map)return o(c,f,h,d);if(f instanceof Set)return u(c,f,h,d);const p=Object.keys(f);if(c==null)return p.length===0;if(p.length===0)return!0;if(d!=null&&d.has(f))return d.get(f)===c;d==null||d.set(f,c);try{for(let m=0;m<p.length;m++){const v=p[m];if(!r.isPrimitive(c)&&!(v in c)||f[v]===void 0&&c[v]!==void 0||f[v]===null&&c[v]!==null||!h(c[v],f[v],v,c,f,d))return!1}return!0}finally{d==null||d.delete(f)}}function o(c,f,h,d){if(f.size===0)return!0;if(!(c instanceof Map))return!1;for(const[p,m]of f.entries()){const v=c.get(p);if(h(v,m,p,c,f,d)===!1)return!1}return!0}function l(c,f,h,d){if(f.length===0)return!0;if(!Array.isArray(c))return!1;const p=new Set;for(let m=0;m<f.length;m++){const v=f[m];let y=!1;for(let w=0;w<c.length;w++){if(p.has(w))continue;const b=c[w];let A=!1;if(h(b,v,m,c,f,d)&&(A=!0),A){p.add(w),y=!0;break}}if(!y)return!1}return!0}function u(c,f,h,d){return f.size===0?!0:c instanceof Set?l([...c],[...f],h,d):!1}t.isMatchWith=i,t.isSetMatch=u})(Eoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eoe;function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(v6);var Soe={},x6={},Coe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(Coe);var A6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(A6);var _6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",c="[object Array]",f="[object Function]",h="[object ArrayBuffer]",d="[object Object]",p="[object Error]",m="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",A="[object BigUint64Array]",x="[object Int8Array]",_="[object Int16Array]",S="[object Int32Array]",E="[object BigInt64Array]",T="[object Float32Array]",D="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=h,t.arrayTag=c,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=A,t.booleanTag=i,t.dataViewTag=m,t.dateTag=o,t.errorTag=p,t.float32ArrayTag=T,t.float64ArrayTag=D,t.functionTag=f,t.int16ArrayTag=_,t.int32ArrayTag=S,t.int8ArrayTag=x,t.mapTag=l,t.numberTag=n,t.objectTag=d,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=s,t.uint16ArrayTag=w,t.uint32ArrayTag=b,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=y})(_6);var Toe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Toe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Coe,r=A6,n=_6,i=b6,a=Toe;function s(c,f){return o(c,void 0,c,new Map,f)}function o(c,f,h,d=new Map,p=void 0){const m=p==null?void 0:p(c,f,h,d);if(m!==void 0)return m;if(i.isPrimitive(c))return c;if(d.has(c))return d.get(c);if(Array.isArray(c)){const v=new Array(c.length);d.set(c,v);for(let y=0;y<c.length;y++)v[y]=o(c[y],y,h,d,p);return Object.hasOwn(c,"index")&&(v.index=c.index),Object.hasOwn(c,"input")&&(v.input=c.input),v}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const v=new RegExp(c.source,c.flags);return v.lastIndex=c.lastIndex,v}if(c instanceof Map){const v=new Map;d.set(c,v);for(const[y,w]of c)v.set(y,o(w,y,h,d,p));return v}if(c instanceof Set){const v=new Set;d.set(c,v);for(const y of c)v.add(o(y,void 0,h,d,p));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(a.isTypedArray(c)){const v=new(Object.getPrototypeOf(c)).constructor(c.length);d.set(c,v);for(let y=0;y<c.length;y++)v[y]=o(c[y],y,h,d,p);return v}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const v=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return d.set(c,v),l(v,c,h,d,p),v}if(typeof File<"u"&&c instanceof File){const v=new File([c],c.name,{type:c.type});return d.set(c,v),l(v,c,h,d,p),v}if(typeof Blob<"u"&&c instanceof Blob){const v=new Blob([c],{type:c.type});return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof Error){const v=new c.constructor;return d.set(c,v),v.message=c.message,v.name=c.name,v.stack=c.stack,v.cause=c.cause,l(v,c,h,d,p),v}if(c instanceof Boolean){const v=new Boolean(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof Number){const v=new Number(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof String){const v=new String(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(typeof c=="object"&&u(c)){const v=Object.create(Object.getPrototypeOf(c));return d.set(c,v),l(v,c,h,d,p),v}return c}function l(c,f,h=c,d,p){const m=[...Object.keys(f),...e.getSymbols(f)];for(let v=0;v<m.length;v++){const y=m[v],w=Object.getOwnPropertyDescriptor(c,y);(w==null||w.writable)&&(c[y]=o(f[y],y,h,d,p))}}function u(c){switch(r.getTag(c)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=l})(x6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x6;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Soe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v6,r=Soe;function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(_oe);var Doe={},Noe={},Poe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x6,r=_6;function n(i,a){return e.cloneDeepWith(i,(s,o,l,u)=>{const c=a==null?void 0:a(s,o,l,u);if(c!==void 0)return c;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(f,i),f}case r.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(Poe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Poe;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Noe);var Moe={},E6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(E6);var Ioe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A6;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Ioe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d6,r=E6,n=Ioe,i=nI;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let u=s;for(let c=0;c<l.length;c++){const f=l[c];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=a})(Moe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v6,r=rI,n=Noe,i=tI,a=Moe;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const c=i.get(u,o);return c===void 0?a.has(u,o):l===void 0?c===void 0:e.isMatch(c,l)}}t.matchesProperty=s})(Doe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=g6,r=Aoe,n=_oe,i=Doe;function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}t.iteratee=a})(xoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=voe,r=g6,n=yoe,i=xoe;function a(s,o=r.identity){return n.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(goe);var yIe=goe.uniqBy;const bq=Sl(yIe);function Ooe(t,e,r){return e===!0?bq(t,r):typeof e=="function"?bq(t,e):t}var koe={exports:{}},Roe={},Foe={exports:{}},Loe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=O;function bIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wIe=typeof Object.is=="function"?Object.is:bIe,xIe=u1.useState,AIe=u1.useEffect,_Ie=u1.useLayoutEffect,EIe=u1.useDebugValue;function SIe(t,e){var r=e(),n=xIe({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return _Ie(function(){i.value=r,i.getSnapshot=e,Jk(i)&&a({inst:i})},[t,r,e]),AIe(function(){return Jk(i)&&a({inst:i}),t(function(){Jk(i)&&a({inst:i})})},[t]),EIe(r),r}function Jk(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!wIe(t,r)}catch{return!0}}function CIe(t,e){return e()}var TIe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CIe:SIe;Loe.useSyncExternalStore=u1.useSyncExternalStore!==void 0?u1.useSyncExternalStore:TIe;Foe.exports=Loe;var DIe=Foe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=O,NIe=DIe;function PIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MIe=typeof Object.is=="function"?Object.is:PIe,IIe=NIe.useSyncExternalStore,OIe=sI.useRef,kIe=sI.useEffect,RIe=sI.useMemo,FIe=sI.useDebugValue;Roe.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=OIe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=RIe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&s.hasValue){var p=s.value;if(i(p,d))return f=p}return f=d}if(p=f,MIe(c,d))return p;var m=n(d);return i!==void 0&&i(p,m)?(c=d,p):(c=d,f=m)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var o=IIe(t,a[0],a[1]);return kIe(function(){s.hasValue=!0,s.value=o},[o]),FIe(o),o};koe.exports=Roe;var LIe=koe.exports,S6=O.createContext(null),BIe=t=>t,bn=()=>{var t=O.useContext(S6);return t?t.store.dispatch:BIe},ZD=()=>{},$Ie=()=>ZD,jIe=(t,e)=>t===e;function st(t){var e=O.useContext(S6);return LIe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:$Ie,e?e.store.getState:ZD,e?e.store.getState:ZD,e?t:ZD,jIe)}function VIe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function UIe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function zIe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var wq=t=>Array.isArray(t)?t:[t];function qIe(t){const e=Array.isArray(t[0])?t[0]:t;return zIe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function HIe(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var WIe=class{constructor(t){this.value=t}deref(){return this.value}},GIe=typeof WeakRef<"u"?WeakRef:WIe,KIe=0,xq=1;function uT(){return{s:KIe,v:void 0,o:null,p:null}}function Boe(t,e={}){let r=uT();const{resultEqualityCheck:n}=e;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let h=0,d=l;h<d;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=o.o;m===null&&(o.o=m=new WeakMap);const v=m.get(p);v===void 0?(o=uT(),m.set(p,o)):o=v}else{let m=o.p;m===null&&(o.p=m=new Map);const v=m.get(p);v===void 0?(o=uT(),m.set(p,o)):o=v}}const u=o;let c;if(o.s===xq)c=o.v;else if(c=t.apply(null,arguments),a++,n){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&n(h,c)&&(c=h,a!==0&&a--),i=typeof c=="object"&&c!==null||typeof c=="function"?new GIe(c):c}return u.s=xq,u.v=c,c}return s.clearCache=()=>{r=uT(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function XIe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,s=0,o,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),VIe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:d=Boe,argsMemoizeOptions:p=[]}=c,m=wq(h),v=wq(p),y=qIe(i),w=f(function(){return a++,u.apply(null,arguments)},...m),b=d(function(){s++;const x=HIe(y,arguments);return o=w.apply(null,x),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var _e=XIe(Boe),YIe=Object.assign((t,e=_e)=>{UIe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>YIe}),$oe={},joe={},Voe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=e(n),o=e(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=r})(Voe);var Uoe={},C6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(C6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C6,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(Uoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Voe,r=Uoe,n=nI;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(d=>String(d));const u=(d,p)=>{let m=d;for(let v=0;v<p.length&&m!=null;++v)m=m[p[v]];return m},c=(d,p)=>p==null||d==null?p:typeof d=="object"&&"key"in d?Object.hasOwn(p,d.key)?p[d.key]:u(p,d.path):typeof d=="function"?d(p):Array.isArray(d)?u(p,d):typeof p=="object"?p[d]:p,f=s.map(d=>(Array.isArray(d)&&d.length===1&&(d=d[0]),d==null||typeof d=="function"||Array.isArray(d)||r.isKey(d)?d:{key:d,path:n.toPath(d)}));return a.map(d=>({original:d,criteria:f.map(p=>c(p,d))})).slice().sort((d,p)=>{for(let m=0;m<f.length;m++){const v=e.compareValues(d.criteria[m],p.criteria[m],o[m]);if(v!==0)return v}return 0}).map(d=>d.original)}t.orderBy=i})(joe);var zoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let u=0;u<o.length;u++){const c=o[u];Array.isArray(c)&&l<a?s(c,l+1):i.push(c)}};return s(r,0),i}t.flatten=e})(zoe);var T6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E6,r=aI,n=y6,i=w6;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}t.isIterateeCall=a})(T6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=joe,r=zoe,n=T6;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,r.flatten(s),["asc"])}t.sortBy=i})($oe);var QIe=$oe.sortBy;const oI=Sl(QIe);var qoe=t=>t.legend.settings,ZIe=t=>t.legend.size,JIe=t=>t.legend.payload,eOe=_e([JIe,qoe],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?oI(n,r):n});function tOe(){return st(eOe)}var cT=1;function Hoe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=O.useState({height:0,left:0,top:0,width:0}),n=O.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>cT||Math.abs(s.left-e.left)>cT||Math.abs(s.top-e.top)>cT||Math.abs(s.width-e.width)>cT)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function ea(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var rOe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Aq=rOe,eR=()=>Math.random().toString(36).substring(7).split("").join("."),nOe={INIT:`@@redux/INIT${eR()}`,REPLACE:`@@redux/REPLACE${eR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eR()}`},x2=nOe;function D6(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Woe(t,e,r){if(typeof t!="function")throw new Error(ea(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ea(1));return r(Woe)(t,e)}let n=t,i=e,a=new Map,s=a,o=0,l=!1;function u(){s===a&&(s=new Map,a.forEach((v,y)=>{s.set(y,v)}))}function c(){if(l)throw new Error(ea(3));return i}function f(v){if(typeof v!="function")throw new Error(ea(4));if(l)throw new Error(ea(5));let y=!0;u();const w=o++;return s.set(w,v),function(){if(y){if(l)throw new Error(ea(6));y=!1,u(),s.delete(w),a=null}}}function h(v){if(!D6(v))throw new Error(ea(7));if(typeof v.type>"u")throw new Error(ea(8));if(typeof v.type!="string")throw new Error(ea(17));if(l)throw new Error(ea(9));try{l=!0,i=n(i,v)}finally{l=!1}return(a=s).forEach(w=>{w()}),v}function d(v){if(typeof v!="function")throw new Error(ea(10));n=v,h({type:x2.REPLACE})}function p(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ea(11));function w(){const A=y;A.next&&A.next(c())}return w(),{unsubscribe:v(w)}},[Aq](){return this}}}return h({type:x2.INIT}),{dispatch:h,subscribe:f,getState:c,replaceReducer:d,[Aq]:p}}function iOe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:x2.INIT})>"u")throw new Error(ea(12));if(typeof r(void 0,{type:x2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function Goe(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(r[s]=t[s])}const n=Object.keys(r);let i;try{iOe(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const u={};for(let c=0;c<n.length;c++){const f=n[c],h=r[f],d=s[f],p=h(d,o);if(typeof p>"u")throw o&&o.type,new Error(ea(14));u[f]=p,l=l||p!==d}return l=l||n.length!==Object.keys(s).length,l?u:s}}function A2(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function aOe(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(ea(15))};const s={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},o=t.map(l=>l(s));return a=A2(...o)(i.dispatch),{...i,dispatch:a}}}function Koe(t){return D6(t)&&"type"in t&&typeof t.type=="string"}var Xoe=Symbol.for("immer-nothing"),_q=Symbol.for("immer-draftable"),cs=Symbol.for("immer-state");function Zl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wo=Object,c1=wo.getPrototypeOf,_2="constructor",lI="prototype",lB="configurable",E2="enumerable",JD="writable",zA="value",rh=t=>!!t&&!!t[cs];function hu(t){var e;return t?Yoe(t)||uI(t)||!!t[_q]||!!((e=t[_2])!=null&&e[_q])||cI(t)||fI(t):!1}var sOe=wo[lI][_2].toString(),Eq=new WeakMap;function Yoe(t){if(!t||!N6(t))return!1;const e=c1(t);if(e===null||e===wo[lI])return!0;const r=wo.hasOwnProperty.call(e,_2)&&e[_2];if(r===Object)return!0;if(!Ty(r))return!1;let n=Eq.get(r);return n===void 0&&(n=Function.toString.call(r),Eq.set(r,n)),n===sOe}function NS(t,e,r=!0){PS(t)===0?(r?Reflect.ownKeys(t):wo.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function PS(t){const e=t[cs];return e?e.type_:uI(t)?1:cI(t)?2:fI(t)?3:0}var Sq=(t,e,r=PS(t))=>r===2?t.has(e):wo[lI].hasOwnProperty.call(t,e),uB=(t,e,r=PS(t))=>r===2?t.get(e):t[e],S2=(t,e,r,n=PS(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function oOe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var uI=Array.isArray,cI=t=>t instanceof Map,fI=t=>t instanceof Set,N6=t=>typeof t=="object",Ty=t=>typeof t=="function",tR=t=>typeof t=="boolean",Uc=t=>t.copy_||t.base_,P6=t=>t.modified_?t.copy_:t.base_;function cB(t,e){if(cI(t))return new Map(t);if(fI(t))return new Set(t);if(uI(t))return Array[lI].slice.call(t);const r=Yoe(t);if(e===!0||e==="class_only"&&!r){const n=wo.getOwnPropertyDescriptors(t);delete n[cs];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[JD]===!1&&(o[JD]=!0,o[lB]=!0),(o.get||o.set)&&(n[s]={[lB]:!0,[JD]:!0,[E2]:o[E2],[zA]:t[s]})}return wo.create(c1(t),n)}else{const n=c1(t);if(n!==null&&r)return{...t};const i=wo.create(n);return wo.assign(i,t)}}function M6(t,e=!1){return hI(t)||rh(t)||!hu(t)||(PS(t)>1&&wo.defineProperties(t,{set:fT,add:fT,clear:fT,delete:fT}),wo.freeze(t),e&&NS(t,(r,n)=>{M6(n,!0)},!1)),t}function lOe(){Zl(2)}var fT={[zA]:lOe};function hI(t){return t===null||!N6(t)?!0:wo.isFrozen(t)}var C2="MapSet",fB="Patches",Qoe={};function f1(t){const e=Qoe[t];return e||Zl(0,t),e}var uOe=t=>!!Qoe[t],qA,Zoe=()=>qA,cOe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:uOe(C2)?f1(C2):void 0});function Cq(t,e){e&&(t.patchPlugin_=f1(fB),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function hB(t){dB(t),t.drafts_.forEach(fOe),t.drafts_=null}function dB(t){t===qA&&(qA=t.parent_)}var Tq=t=>qA=cOe(qA,t);function fOe(t){const e=t[cs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Dq(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[cs].modified_&&(hB(e),Zl(4)),hu(t)&&(t=Nq(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[cs].base_,t,e)}else t=Nq(e,r);return hOe(e,t,!0),hB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Xoe?t:void 0}function Nq(t,e){if(hI(e))return e;const r=e[cs];if(!r)return I6(e,t.handledSet_,t);if(!dI(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);tle(r,t)}return r.copy_}function hOe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&M6(e,r)}function Joe(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var dI=(t,e)=>t.scope_===e,dOe=[];function ele(t,e,r,n){const i=Uc(t),a=t.type_;if(n!==void 0&&uB(i,n,a)===e){S2(i,n,r,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;NS(i,(l,u)=>{if(rh(u)){const c=o.get(u)||[];c.push(l),o.set(u,c)}})}const s=t.draftLocations_.get(e)??dOe;for(const o of s)S2(i,o,r,a)}function pOe(t,e,r){t.callbacks_.push(function(i){var o;const a=e;if(!a||!dI(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=P6(a);ele(t,a.draft_??a,s,r),tle(a,i)})}function tle(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const a=i.getPath(t);a&&i.generatePatches_(t,a,e)}Joe(t)}}function mOe(t,e,r){const{scope_:n}=t;if(rh(r)){const i=r[cs];dI(i,n)&&i.callbacks_.push(function(){eN(t);const s=P6(i);ele(t,r,s,e)})}else hu(r)&&t.callbacks_.push(function(){const a=Uc(t);uB(a,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&I6(uB(t.copy_,e,t.type_),n.handledSet_,n)})}function I6(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||rh(t)||e.has(t)||!hu(t)||hI(t)||(e.add(t),NS(t,(n,i)=>{if(rh(i)){const a=i[cs];if(dI(a,r)){const s=P6(a);S2(t,n,s,t.type_),Joe(a)}}else hu(i)&&I6(i,e,r)})),t}function gOe(t,e){const r=uI(t),n={type_:r?1:0,scope_:e?e.scope_:Zoe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=O6;r&&(i=[n],a=HA);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var O6={get(t,e){if(e===cs)return t;const r=Uc(t);if(!Sq(r,e,t.type_))return vOe(t,r,e);const n=r[e];if(t.finalized_||!hu(n))return n;if(n===rR(t.base_,e)){eN(t);const i=t.type_===1?+e:e,a=mB(t.scope_,n,t,i);return t.copy_[i]=a}return n},has(t,e){return e in Uc(t)},ownKeys(t){return Reflect.ownKeys(Uc(t))},set(t,e,r){const n=rle(Uc(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=rR(Uc(t),e),a=i==null?void 0:i[cs];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(oOe(r,i)&&(r!==void 0||Sq(t.base_,e,t.type_)))return!0;eN(t),pB(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),mOe(t,e,r)),!0},deleteProperty(t,e){return eN(t),rR(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),pB(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Uc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[JD]:!0,[lB]:t.type_!==1||e!=="length",[E2]:n[E2],[zA]:r[e]}},defineProperty(){Zl(11)},getPrototypeOf(t){return c1(t.base_)},setPrototypeOf(){Zl(12)}},HA={};NS(O6,(t,e)=>{HA[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}});HA.deleteProperty=function(t,e){return HA.set.call(this,t,e,void 0)};HA.set=function(t,e,r){return O6.set.call(this,t[0],e,r,t[0])};function rR(t,e){const r=t[cs];return(r?Uc(r):t)[e]}function vOe(t,e,r){var i;const n=rle(e,r);return n?zA in n?n[zA]:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function rle(t,e){if(!(e in t))return;let r=c1(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=c1(r)}}function pB(t){t.modified_||(t.modified_=!0,t.parent_&&pB(t.parent_))}function eN(t){t.copy_||(t.assigned_=new Map,t.copy_=cB(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var yOe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Ty(r)&&!Ty(n)){const s=n;n=r;const o=this;return function(u=s,...c){return o.produce(u,f=>n.call(this,f,...c))}}Ty(n)||Zl(6),i!==void 0&&!Ty(i)&&Zl(7);let a;if(hu(r)){const s=Tq(this),o=mB(s,r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?hB(s):dB(s)}return Cq(s,i),Dq(a,s)}else if(!r||!N6(r)){if(a=n(r),a===void 0&&(a=r),a===Xoe&&(a=void 0),this.autoFreeze_&&M6(a,!0),i){const s=[],o=[];f1(fB).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Zl(1,r)},this.produceWithPatches=(r,n)=>{if(Ty(r))return(o,...l)=>this.produceWithPatches(o,u=>r(u,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},tR(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),tR(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),tR(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){hu(e)||Zl(8),rh(e)&&(e=su(e));const r=Tq(this),n=mB(r,e,void 0);return n[cs].isManual_=!0,dB(r),n}finishDraft(e,r){const n=e&&e[cs];(!n||!n.isManual_)&&Zl(9);const{scope_:i}=n;return Cq(i,r),Dq(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(r=r.slice(n+1));const i=f1(fB).applyPatches_;return rh(e)?i(e,r):this.produce(e,a=>i(a,r))}};function mB(t,e,r,n){const[i,a]=cI(e)?f1(C2).proxyMap_(e,r):fI(e)?f1(C2).proxySet_(e,r):gOe(e,r);return((r==null?void 0:r.scope_)??Zoe()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?pOe(r,a,n):a.callbacks_.push(function(l){var c;(c=l.mapSetPlugin_)==null||c.fixSetContents(a);const{patchPlugin_:u}=l;a.modified_&&u&&u.generatePatches_(a,[],l)}),i}function su(t){return rh(t)||Zl(10,t),nle(t)}function nle(t){if(!hu(t)||hI(t))return t;const e=t[cs];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=cB(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=cB(t,!0);return NS(r,(i,a)=>{S2(r,i,nle(a))},n),e&&(e.finalized_=!1),r}var bOe=new yOe,ile=bOe.produce;function ale(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var wOe=ale(),xOe=ale,AOe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?A2:A2.apply(null,arguments)};function Al(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Ao(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Koe(n)&&n.type===t,r}var sle=class Sx extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Sx.prototype)}static get[Symbol.species](){return Sx}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Sx(...e[0].concat(this)):new Sx(...e.concat(this))}};function Pq(t){return hu(t)?ile(t,()=>{}):t}function hT(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function _Oe(t){return typeof t=="boolean"}var EOe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new sle;return r&&(_Oe(r)?s.push(wOe):s.push(xOe(r.extraArgument))),s},ole="RTK_autoBatch",nn=()=>t=>({payload:t,meta:{[ole]:!0}}),Mq=t=>e=>{setTimeout(e,t)},lle=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,s=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Mq(10):t.type==="callback"?t.queueNotification:Mq(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const f=()=>i&&c(),h=n.subscribe(f);return o.add(c),()=>{h(),o.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[ole]),a=!i,a&&(s||(s=!0,l(u))),n.dispatch(c)}finally{i=!0}}})},SOe=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new sle(t);return n&&i.push(lle(typeof n=="object"?n:void 0)),i};function COe(t){const e=EOe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof r=="function")o=r;else if(D6(r))o=Goe(r);else throw new Error(Ao(1));let l;typeof n=="function"?l=n(e):l=e();let u=A2;i&&(u=AOe({trace:!1,...typeof i=="object"&&i}));const c=aOe(...l),f=SOe(c);let h=typeof s=="function"?s(f):f();const d=u(...h);return Woe(o,a,d)}function ule(t){const e={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ao(28));if(o in e)throw new Error(Ao(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function TOe(t){return typeof t=="function"}function DOe(t,e){let[r,n,i]=ule(e),a;if(TOe(t))a=()=>Pq(t());else{const o=Pq(t);a=()=>o}function s(o=a(),l){let u=[r[l.type],...n.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,f)=>{if(f)if(rh(c)){const d=f(c,l);return d===void 0?c:d}else{if(hu(c))return ile(c,h=>f(h,l));{const h=f(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},o)}return s.getInitialState=a,s}var NOe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",POe=(t=21)=>{let e="",r=t;for(;r--;)e+=NOe[Math.random()*64|0];return e},MOe=Symbol.for("rtk-slice-createasyncthunk");function IOe(t,e){return`${t}/${e}`}function OOe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[MOe];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Ao(11));const o=(typeof i.reducers=="function"?i.reducers(ROe()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(A,x){const _=typeof A=="string"?A:A.type;if(!_)throw new Error(Ao(12));if(_ in u.sliceCaseReducersByType)throw new Error(Ao(13));return u.sliceCaseReducersByType[_]=x,c},addMatcher(A,x){return u.sliceMatchers.push({matcher:A,reducer:x}),c},exposeAction(A,x){return u.actionCreators[A]=x,c},exposeCaseReducer(A,x){return u.sliceCaseReducersByName[A]=x,c}};l.forEach(A=>{const x=o[A],_={reducerName:A,type:IOe(a,A),createNotation:typeof i.reducers=="function"};LOe(x)?$Oe(_,x,c,e):FOe(_,x,c)});function f(){const[A={},x=[],_=void 0]=typeof i.extraReducers=="function"?ule(i.extraReducers):[i.extraReducers],S={...A,...u.sliceCaseReducersByType};return DOe(i.initialState,E=>{for(let T in S)E.addCase(T,S[T]);for(let T of u.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of x)E.addMatcher(T.matcher,T.reducer);_&&E.addDefaultCase(_)})}const h=A=>A,d=new Map,p=new WeakMap;let m;function v(A,x){return m||(m=f()),m(A,x)}function y(){return m||(m=f()),m.getInitialState()}function w(A,x=!1){function _(E){let T=E[A];return typeof T>"u"&&x&&(T=hT(p,_,y)),T}function S(E=h){const T=hT(d,x,()=>new WeakMap);return hT(T,E,()=>{const D={};for(const[N,P]of Object.entries(i.selectors??{}))D[N]=kOe(P,E,()=>hT(p,E,y),x);return D})}return{reducerPath:A,getSelectors:S,get selectors(){return S(_)},selectSlice:_}}const b={name:a,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(s),injectInto(A,{reducerPath:x,..._}={}){const S=x??s;return A.inject({reducerPath:S,reducer:v},_),{...b,...w(S,!0)}}};return b}}function kOe(t,e,r,n){function i(a,...s){let o=e(a);return typeof o>"u"&&n&&(o=r()),t(o,...s)}return i.unwrapped=t,i}var Vs=OOe();function ROe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function FOe({type:t,reducerName:e,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!BOe(n))throw new Error(Ao(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Al(t,s):Al(t))}function LOe(t){return t._reducerDefinitionType==="asyncThunk"}function BOe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function $Oe({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Ao(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:c}=r,f=i(t,a,c);n.exposeAction(e,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:s||dT,pending:o||dT,rejected:l||dT,settled:u||dT})}function dT(){}var jOe="task",cle="listener",fle="completed",k6="cancelled",VOe=`task-${k6}`,UOe=`task-${fle}`,gB=`${cle}-${k6}`,zOe=`${cle}-${fle}`,pI=class{constructor(t){Oe(this,"name","TaskAbortError");Oe(this,"message");this.code=t,this.message=`${jOe} ${k6} (reason: ${t})`}},R6=(t,e)=>{if(typeof t!="function")throw new TypeError(Ao(32))},T2=()=>{},hle=(t,e=T2)=>(t.catch(e),t),dle=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),ev=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},tv=t=>{if(t.aborted){const{reason:e}=t;throw new pI(e)}};function ple(t,e){let r=T2;return new Promise((n,i)=>{const a=()=>i(new pI(t.reason));if(t.aborted){a();return}r=dle(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=T2})}var qOe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof pI?"cancelled":"rejected",error:r}}finally{e==null||e()}},D2=t=>e=>hle(ple(t,e).then(r=>(tv(t),r))),mle=t=>{const e=D2(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:g0}=Object,Iq={},mI="listenerMiddleware",HOe=(t,e)=>{const r=n=>dle(t,()=>ev(n,t.reason));return(n,i)=>{R6(n);const a=new AbortController;r(a);const s=qOe(async()=>{tv(t),tv(a.signal);const o=await n({pause:D2(a.signal),delay:mle(a.signal),signal:a.signal});return tv(a.signal),o},()=>ev(a,UOe));return i!=null&&i.autoJoin&&e.push(s.catch(T2)),{result:D2(t)(s),cancel(){ev(a,VOe)}}}},WOe=(t,e)=>{const r=async(n,i)=>{tv(e);let a=()=>{};const o=[new Promise((l,u)=>{let c=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{c(),u()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await ple(e,Promise.race(o));return tv(e),l}finally{a()}};return(n,i)=>hle(r(n,i))},gle=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=Al(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Ao(21));return R6(a),{predicate:i,type:e,effect:a}},vle=g0(t=>{const{type:e,predicate:r,effect:n}=gle(t);return{id:POe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ao(22))}}},{withTypes:()=>vle}),Oq=(t,e)=>{const{type:r,effect:n,predicate:i}=gle(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},vB=t=>{t.pending.forEach(e=>{ev(e,gB)})},GOe=(t,e)=>()=>{for(const r of e.keys())vB(r);t.clear()},kq=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},yle=g0(Al(`${mI}/add`),{withTypes:()=>yle}),KOe=Al(`${mI}/removeAll`),ble=g0(Al(`${mI}/remove`),{withTypes:()=>ble}),XOe=(...t)=>{console.error(`${mI}/error`,...t)},MS=(t={})=>{const e=new Map,r=new Map,n=d=>{const p=r.get(d)??0;r.set(d,p+1)},i=d=>{const p=r.get(d)??1;p===1?r.delete(d):r.set(d,p-1)},{extra:a,onError:s=XOe}=t;R6(s);const o=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p!=null&&p.cancelActive&&vB(d)}),l=d=>{const p=Oq(e,d)??vle(d);return o(p)};g0(l,{withTypes:()=>l});const u=d=>{const p=Oq(e,d);return p&&(p.unsubscribe(),d.cancelActive&&vB(p)),!!p};g0(u,{withTypes:()=>u});const c=async(d,p,m,v)=>{const y=new AbortController,w=WOe(l,y.signal),b=[];try{d.pending.add(y),n(d),await Promise.resolve(d.effect(p,g0({},m,{getOriginalState:v,condition:(A,x)=>w(A,x).then(Boolean),take:w,delay:mle(y.signal),pause:D2(y.signal),extra:a,signal:y.signal,fork:HOe(y.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((A,x,_)=>{A!==y&&(ev(A,gB),_.delete(A))})},cancel:()=>{ev(y,gB),d.pending.delete(y)},throwIfCancelled:()=>{tv(y.signal)}})))}catch(A){A instanceof pI||kq(s,A,{raisedBy:"effect"})}finally{await Promise.all(b),ev(y,zOe),i(d),d.pending.delete(y)}},f=GOe(e,r);return{middleware:d=>p=>m=>{if(!Koe(m))return p(m);if(yle.match(m))return l(m.payload);if(KOe.match(m)){f();return}if(ble.match(m))return u(m.payload);let v=d.getState();const y=()=>{if(v===Iq)throw new Error(Ao(23));return v};let w;try{if(w=p(m),e.size>0){const b=d.getState(),A=Array.from(e.values());for(const x of A){let _=!1;try{_=x.predicate(m,b,v)}catch(S){_=!1,kq(s,S,{raisedBy:"predicate"})}_&&c(x,m,d,y)}}}finally{v=Iq}return w},startListening:l,stopListening:u,clearListeners:f}};function Ao(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var YOe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},wle=Vs({name:"chartLayout",initialState:YOe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:QOe,setLayout:ZOe,setChartSize:JOe,setScale:eke}=wle.actions,tke=wle.reducer;function xle(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Rq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ky(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rq(Object(r),!0).forEach(function(n){rke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rke(t,e,r){return(e=nke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nke(t){var e=ike(t,"string");return typeof e=="symbol"?e:e+""}function ike(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qn(t,e,r){return sn(t)||sn(e)?r:xc(e)?l1(t,e,r):typeof e=="function"?e(t):r}var ake=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ut(t[a]))return Ky(Ky({},t),{},{[a]:t[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ut(t[s]))return Ky(Ky({},t),{},{[s]:t[s]+(i||0)})}return t},Bp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Ale=(t,e,r,n)=>{if(n)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(r),s},_le=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:f,niceTicks:h,axisType:d}=t;if(!s)return null;var p=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,m=i==="category"&&s.bandwidth?s.bandwidth()/p:0;if(m=d==="angleAxis"&&a&&a.length>=2?fl(a[0]-a[1])*2*m:m,f||h){var v=(f||h||[]).map((y,w)=>{var b=n?n.indexOf(y):y;return{coordinate:s(b)+m,value:y,offset:m,index:w}});return v.filter(y=>!wc(y.coordinate))}return l&&u?u.map((y,w)=>({coordinate:s(y)+m,value:y,index:w,offset:m})):s.ticks&&c!=null?s.ticks(c).map((y,w)=>({coordinate:s(y)+m,value:y,offset:m,index:w})):s.domain().map((y,w)=>({coordinate:s(y)+m,value:n?n[y]:y,index:w,offset:m}))},Fq=1e-4,ske=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-Fq,a=Math.max(n[0],n[1])+Fq,s=t(e[0]),o=t(e[r-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[r-1]])}},oke=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,s=0;s<e;++s){var o=wc(t[s][r][1])?t[s][r][0]:t[s][r][1];o>=0?(t[s][r][0]=i,t[s][r][1]=i+o,i=t[s][r][1]):(t[s][r][0]=a,t[s][r][1]=a+o,a=t[s][r][1])}},lke=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var s=wc(t[a][r][1])?t[a][r][0]:t[a][r][1];s>=0?(t[a][r][0]=i,t[a][r][1]=i+s,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},uke={sign:oke,expand:VMe,none:o1,silhouette:UMe,wiggle:zMe,positive:lke},cke=(t,e,r)=>{var n=uke[r],i=jMe().keys(e).value((a,s)=>Number(Qn(a,s,0))).order(sB).offset(n);return i(t)};function N2(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!sn(i[e.dataKey])){var o=doe(r,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Qn(i,sn(s)?e.dataKey:s);return sn(l)?null:e.scale(l)}var fke=t=>{var e=t.flat(2).filter(ut);return[Math.min(...e),Math.max(...e)]},hke=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],dke=(t,e,r)=>{if(t!=null)return hke(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:s}=a,o=s.reduce((l,u)=>{var c=xle(u,e,r),f=fke(c);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},Lq=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bq=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P2=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=oI(e,c=>c.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],u=i[s-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function $q(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return Ky(Ky({},e),{},{dataKey:r,payload:n,value:i,name:a})}function gI(t,e){if(t)return String(t);if(typeof e=="string")return e}var pke=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},mke=(t,e)=>e==="centric"?t.angle:t.radius,dh=t=>t.layout.width,ph=t=>t.layout.height,gke=t=>t.layout.scale,Ele=t=>t.layout.margin,vI=_e(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),yI=_e(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Sle="data-recharts-item-index",Cle="data-recharts-item-data-key",IS=60;function jq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(r),!0).forEach(function(n){vke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vke(t,e,r){return(e=yke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yke(t){var e=bke(t,"string");return typeof e=="symbol"?e:e+""}function bke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wke=t=>t.brush.height;function xke(t){var e=yI(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:IS;return r+i}return r},0)}function Ake(t){var e=yI(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:IS;return r+i}return r},0)}function _ke(t){var e=vI(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Eke(t){var e=vI(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var va=_e([dh,ph,Ele,wke,xke,Ake,_ke,Eke,qoe,ZIe],(t,e,r,n,i,a,s,o,l,u)=>{var c={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=pT(pT({},f),c),d=h.bottom;h.bottom+=n,h=ake(h,l,u);var p=t-h.left-h.right,m=e-h.top-h.bottom;return pT(pT({brushBottom:d},h),{},{width:Math.max(p,0),height:Math.max(m,0)})}),Ske=_e(va,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Tle=_e(dh,ph,(t,e)=>({x:0,y:0,width:t,height:e})),Cke=O.createContext(null),Va=()=>O.useContext(Cke)!=null,bI=t=>t.brush,wI=_e([bI,va,Ele],(t,e,r)=>({height:t.height,x:ut(t.x)?t.x:e.left,y:ut(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:ut(t.width)?t.width:e.width})),Dle={},Nle={},Ple={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),c=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&c(),m()};let h=null;const d=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},p=()=>{h!==null&&(clearTimeout(h),h=null)},m=()=>{p(),s=void 0,o=null},v=()=>{c()},y=function(...w){if(i!=null&&i.aborted)return;s=this,o=w;const b=h==null;d(),l&&b&&c()};return y.schedule=d,y.cancel=m,y.flush=v,i==null||i.addEventListener("abort",m,{once:!0}),y}t.debounce=e})(Ple);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ple;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let c,f=null;const h=e.debounce(function(...m){c=n.apply(this,m),f=null},i,{edges:u}),d=function(...m){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(c=n.apply(this,m),f=Date.now(),h.cancel(),h.schedule(),c):(h.apply(this,m),c)},p=()=>(h.flush(),c);return d.cancel=h.cancel,d.flush=p,d}t.debounce=r})(Nle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nle;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(n,i,{leading:s,maxWait:i,trailing:o})}t.throttle=r})(Dle);var Tke=Dle.throttle;const Dke=Sl(Tke);var M2=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},Mle=(t,e,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=th(n)?t:Number(n),l=th(i)?e:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},Nke={width:0,height:0,overflow:"visible"},Pke={width:0,overflowX:"visible"},Mke={height:0,overflowY:"visible"},Ike={},Oke=t=>{var{width:e,height:r}=t,n=th(e),i=th(r);return n&&i?Nke:n?Pke:i?Mke:Ike};function kke(t){var{width:e,height:r,aspect:n}=t,i=e,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function Ui(t){return Number.isFinite(t)}function Ac(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function yB(){return yB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yB.apply(null,arguments)}function Vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(r),!0).forEach(function(n){Rke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rke(t,e,r){return(e=Fke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fke(t){var e=Lke(t,"string");return typeof e=="symbol"?e:e+""}function Lke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ile=O.createContext({width:-1,height:-1});function Bke(t){return Ac(t.width)&&Ac(t.height)}function Ole(t){var{children:e,width:r,height:n}=t,i=O.useMemo(()=>({width:r,height:n}),[r,n]);return Bke(i)?O.createElement(Ile.Provider,{value:i},e):null}var F6=()=>O.useContext(Ile),$ke=O.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:u,debounce:c=0,id:f,className:h,onResize:d,style:p={}}=t,m=O.useRef(null),v=O.useRef();v.current=d,O.useImperativeHandle(e,()=>m.current);var[y,w]=O.useState({containerWidth:n.width,containerHeight:n.height}),b=O.useCallback((E,T)=>{w(D=>{var N=Math.round(E),P=Math.round(T);return D.containerWidth===N&&D.containerHeight===P?D:{containerWidth:N,containerHeight:P}})},[]);O.useEffect(()=>{if(m.current==null||typeof ResizeObserver>"u")return DS;var E=P=>{var M,{width:j,height:K}=P[0].contentRect;b(j,K),(M=v.current)===null||M===void 0||M.call(v,j,K)};c>0&&(E=Dke(E,c,{trailing:!0,leading:!1}));var T=new ResizeObserver(E),{width:D,height:N}=m.current.getBoundingClientRect();return b(D,N),T.observe(m.current),()=>{T.disconnect()}},[b,c]);var{containerWidth:A,containerHeight:x}=y;M2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:_,calculatedHeight:S}=Mle(A,x,{width:i,height:a,aspect:r,maxHeight:l});return M2(_!=null&&_>0||S!=null&&S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,S,i,a,s,o,r),O.createElement("div",{id:f?"".concat(f):void 0,className:wr("recharts-responsive-container",h),style:Uq(Uq({},p),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:m},O.createElement("div",{style:Oke({width:i,height:a})},O.createElement(Ole,{width:_,height:S},u)))}),sm=O.forwardRef((t,e)=>{var r=F6();if(Ac(r.width)&&Ac(r.height))return t.children;var{width:n,height:i}=kke({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=Mle(void 0,void 0,{width:n,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return ut(a)&&ut(s)?O.createElement(Ole,{width:a,height:s},t.children):O.createElement($ke,yB({},t,{width:n,height:i,ref:e}))});function kle(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var OS=()=>{var t,e=Va(),r=st(Ske),n=st(wI),i=(t=st(bI))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},jke={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Rle=()=>{var t;return(t=st(va))!==null&&t!==void 0?t:jke},L6=()=>st(dh),B6=()=>st(ph),Vke=()=>st(t=>t.layout.margin),Zr=t=>t.layout.layoutType,xI=()=>st(Zr),Uke=()=>{var t=xI();return t!==void 0},AI=t=>{var e=bn(),r=Va(),{width:n,height:i}=t,a=F6(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),O.useEffect(()=>{!r&&Ac(s)&&Ac(o)&&e(JOe({width:s,height:o}))},[e,r,s,o]),null},Fle=Symbol.for("immer-nothing"),zq=Symbol.for("immer-draftable"),Co=Symbol.for("immer-state");function Jl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var WA=Object.getPrototypeOf;function h1(t){return!!t&&!!t[Co]}function Av(t){var e;return t?Lle(t)||Array.isArray(t)||!!t[zq]||!!((e=t.constructor)!=null&&e[zq])||kS(t)||EI(t):!1}var zke=Object.prototype.constructor.toString(),qq=new WeakMap;function Lle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=qq.get(r);return n===void 0&&(n=Function.toString.call(r),qq.set(r,n)),n===zke}function I2(t,e,r=!0){_I(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function _I(t){const e=t[Co];return e?e.type_:Array.isArray(t)?1:kS(t)?2:EI(t)?3:0}function bB(t,e){return _I(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ble(t,e,r){const n=_I(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function qke(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function kS(t){return t instanceof Map}function EI(t){return t instanceof Set}function gm(t){return t.copy_||t.base_}function wB(t,e){if(kS(t))return new Map(t);if(EI(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Lle(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Co];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(WA(t),n)}else{const n=WA(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function $6(t,e=!1){return SI(t)||h1(t)||!Av(t)||(_I(t)>1&&Object.defineProperties(t,{set:mT,add:mT,clear:mT,delete:mT}),Object.freeze(t),e&&Object.values(t).forEach(r=>$6(r,!0))),t}function Hke(){Jl(2)}var mT={value:Hke};function SI(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Wke={};function _v(t){const e=Wke[t];return e||Jl(0,t),e}var GA;function $le(){return GA}function Gke(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Hq(t,e){e&&(_v("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xB(t){AB(t),t.drafts_.forEach(Kke),t.drafts_=null}function AB(t){t===GA&&(GA=t.parent_)}function Wq(t){return GA=Gke(GA,t)}function Kke(t){const e=t[Co];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Gq(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Co].modified_&&(xB(e),Jl(4)),Av(t)&&(t=O2(e,t),e.parent_||k2(e,t)),e.patches_&&_v("Patches").generateReplacementPatches_(r[Co].base_,t,e.patches_,e.inversePatches_)):t=O2(e,r,[]),xB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Fle?t:void 0}function O2(t,e,r){if(SI(e))return e;const n=t.immer_.shouldUseStrictIteration(),i=e[Co];if(!i)return I2(e,(a,s)=>Kq(t,i,e,a,s,r),n),e;if(i.scope_!==t)return e;if(!i.modified_)return k2(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),I2(s,(l,u)=>Kq(t,i,a,l,u,r,o),n),k2(t,a,!1),r&&t.patches_&&_v("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function Kq(t,e,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=SI(i);if(!(o&&!s)){if(h1(i)){const l=a&&e&&e.type_!==3&&!bB(e.assigned_,n)?a.concat(n):void 0,u=O2(t,i,l);if(Ble(r,n,u),h1(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Av(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;O2(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(kS(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&k2(t,i)}}}function k2(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$6(e,r)}function Xke(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:$le(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=j6;r&&(i=[n],a=KA);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var j6={get(t,e){if(e===Co)return t;const r=gm(t);if(!bB(r,e))return Yke(t,r,e);const n=r[e];return t.finalized_||!Av(n)?n:n===nR(t.base_,e)?(iR(t),t.copy_[e]=EB(n,t)):n},has(t,e){return e in gm(t)},ownKeys(t){return Reflect.ownKeys(gm(t))},set(t,e,r){const n=jle(gm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=nR(gm(t),e),a=i==null?void 0:i[Co];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(qke(r,i)&&(r!==void 0||bB(t.base_,e)))return!0;iR(t),_B(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return nR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,iR(t),_B(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=gm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Jl(11)},getPrototypeOf(t){return WA(t.base_)},setPrototypeOf(){Jl(12)}},KA={};I2(j6,(t,e)=>{KA[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});KA.deleteProperty=function(t,e){return KA.set.call(this,t,e,void 0)};KA.set=function(t,e,r){return j6.set.call(this,t[0],e,r,t[0])};function nR(t,e){const r=t[Co];return(r?gm(r):t)[e]}function Yke(t,e,r){var i;const n=jle(e,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function jle(t,e){if(!(e in t))return;let r=WA(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=WA(r)}}function _B(t){t.modified_||(t.modified_=!0,t.parent_&&_B(t.parent_))}function iR(t){t.copy_||(t.copy_=wB(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Qke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const s=this;return function(l=a,...u){return s.produce(l,c=>r.call(this,c,...u))}}typeof r!="function"&&Jl(6),n!==void 0&&typeof n!="function"&&Jl(7);let i;if(Av(e)){const a=Wq(this),s=EB(e,void 0);let o=!0;try{i=r(s),o=!1}finally{o?xB(a):AB(a)}return Hq(a,n),Gq(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===Fle&&(i=void 0),this.autoFreeze_&&$6(i,!0),n){const a=[],s=[];_v("Patches").generateReplacementPatches_(e,i,a,s),n(a,s)}return i}else Jl(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let n,i;return[this.produce(e,r,(s,o)=>{n=s,i=o}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Av(t)||Jl(8),h1(t)&&(t=Zke(t));const e=Wq(this),r=EB(t,void 0);return r[Co].isManual_=!0,AB(e),r}finishDraft(t,e){const r=t&&t[Co];(!r||!r.isManual_)&&Jl(9);const{scope_:n}=r;return Hq(n,e),Gq(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=_v("Patches").applyPatches_;return h1(t)?n(t,e):this.produce(t,i=>n(i,e))}};function EB(t,e){const r=kS(t)?_v("MapSet").proxyMap_(t,e):EI(t)?_v("MapSet").proxySet_(t,e):Xke(t,e);return(e?e.scope_:$le()).drafts_.push(r),r}function Zke(t){return h1(t)||Jl(10,t),Vle(t)}function Vle(t){if(!Av(t)||SI(t))return t;const e=t[Co];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=wB(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=wB(t,!0);return I2(r,(i,a)=>{Ble(r,i,Vle(a))},n),e&&(e.finalized_=!1),r}var Jke=new Qke;Jke.produce;var eRe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Ule=Vs({name:"legend",initialState:eRe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:nn()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,i=su(t).payload.indexOf(r);i>-1&&(t.payload[i]=n)},prepare:nn()},removeLegendPayload:{reducer(t,e){var r=su(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:nn()}}}),{setLegendSize:Xq,setLegendSettings:tRe,addLegendPayload:rRe,replaceLegendPayload:nRe,removeLegendPayload:iRe}=Ule.actions,aRe=Ule.reducer,sRe=["contextPayload"];function SB(){return SB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SB.apply(null,arguments)}function Yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function d1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yq(Object(r),!0).forEach(function(n){oRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oRe(t,e,r){return(e=lRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lRe(t){var e=uRe(t,"string");return typeof e=="symbol"?e:e+""}function uRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cRe(t,e){if(t==null)return{};var r,n,i=fRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function fRe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function hRe(t){return t.value}function dRe(t){var{contextPayload:e}=t,r=cRe(t,sRe),n=Ooe(e,t.payloadUniqBy,hRe),i=d1(d1({},r),{},{payload:n});return O.isValidElement(t.content)?O.cloneElement(t.content,i):typeof t.content=="function"?O.createElement(t.content,i):O.createElement(vIe,i)}function pRe(t,e,r,n,i,a){var{layout:s,align:o,verticalAlign:l}=e,u,c;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&s==="vertical"?u={left:((n||0)-a.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?c={top:((i||0)-a.height)/2}:c=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),d1(d1({},u),c)}function mRe(t){var e=bn();return O.useEffect(()=>{e(tRe(t))},[e,t]),null}function gRe(t){var e=bn();return O.useEffect(()=>(e(Xq(t)),()=>{e(Xq({width:0,height:0}))}),[e,t]),null}function vRe(t,e,r,n){return t==="vertical"&&ut(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var yRe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function tN(t){var e=qi(t,yRe),r=tOe(),n=cMe(),i=Vke(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[u,c]=Hoe([r]),f=L6(),h=B6();if(f==null||h==null)return null;var d=f-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),p=vRe(e.layout,s,a,d),m=l?o:d1(d1({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},pRe(o,e,i,f,h,u)),o),v=l??n;if(v==null||r==null)return null;var y=O.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:c},O.createElement(mRe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&O.createElement(gRe,{width:u.width,height:u.height}),O.createElement(dRe,SB({},e,p,{margin:i,chartWidth:f,chartHeight:h,contextPayload:r})));return mM.createPortal(y,v)}tN.displayName="Legend";function CB(){return CB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CB.apply(null,arguments)}function Qq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qq(Object(r),!0).forEach(function(n){bRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bRe(t,e,r){return(e=wRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wRe(t){var e=xRe(t,"string");return typeof e=="symbol"?e:e+""}function xRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ARe(t){return Array.isArray(t)&&xc(t[0])&&xc(t[1])?t.join(" ~ "):t}var _Re=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:u,label:c,labelFormatter:f,accessibilityLayer:h=!1}=t,d=()=>{if(a&&a.length){var x={padding:0,margin:0},_=(o?oI(a,o):a).map((S,E)=>{if(S.type==="none")return null;var T=S.formatter||s||ARe,{value:D,name:N}=S,P=D,M=N;if(T){var j=T(D,N,S,E,a);if(Array.isArray(j))[P,M]=j;else if(j!=null)P=j;else return null}var K=aR({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:K},xc(M)?O.createElement("span",{className:"recharts-tooltip-item-name"},M):null,xc(M)?O.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,O.createElement("span",{className:"recharts-tooltip-item-value"},P),O.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:x},_)}return null},p=aR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=aR({margin:0},i),v=!sn(c),y=v?c:"",w=wr("recharts-default-tooltip",l),b=wr("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(y=f(c,a));var A=h?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",CB({className:w,style:p},A),O.createElement("p",{className:b,style:m},O.isValidElement(y)?y:"".concat(y)),d())},Lw="recharts-tooltip-wrapper",ERe={visibility:"hidden"};function SRe(t){var{coordinate:e,translateX:r,translateY:n}=t;return wr(Lw,{["".concat(Lw,"-right")]:ut(r)&&e&&ut(e.x)&&r>=e.x,["".concat(Lw,"-left")]:ut(r)&&e&&ut(e.x)&&r<e.x,["".concat(Lw,"-bottom")]:ut(n)&&e&&ut(e.y)&&n>=e.y,["".concat(Lw,"-top")]:ut(n)&&e&&ut(e.y)&&n<e.y})}function Zq(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=t;if(a&&ut(a[n]))return a[n];var c=r[n]-o-(i>0?i:0),f=r[n]+i;if(e[n])return s[n]?c:f;var h=l[n];if(h==null)return 0;if(s[n]){var d=c,p=h;return d<p?Math.max(f,h):Math.max(c,h)}if(u==null)return 0;var m=f+o,v=h+u;return m>v?Math.max(c,h):Math.max(f,h)}function CRe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function TRe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=t,u,c,f;return s.height>0&&s.width>0&&r?(c=Zq({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=Zq({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=CRe({translateX:c,translateY:f,useTranslate3d:o})):u=ERe,{cssProperties:u,cssClasses:SRe({translateX:c,translateY:f,coordinate:r})}}function Jq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jq(Object(r),!0).forEach(function(n){TB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TB(t,e,r){return(e=DRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DRe(t){var e=NRe(t,"string");return typeof e=="symbol"?e:e+""}function NRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class PRe extends O.PureComponent{constructor(){super(...arguments),TB(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),TB(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:u,position:c,reverseDirection:f,useTranslate3d:h,viewBox:d,wrapperStyle:p,lastBoundingBox:m,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:b}=TRe({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:c,reverseDirection:f,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:d}),A=y?{}:gT(gT({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),x=gT(gT({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return O.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:x,ref:v},a)}}var zle=()=>{var t;return(t=st(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function DB(){return DB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DB.apply(null,arguments)}function eH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eH(Object(r),!0).forEach(function(n){MRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MRe(t,e,r){return(e=IRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IRe(t){var e=ORe(t,"string");return typeof e=="symbol"?e:e+""}function ORe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rH={curveBasisClosed:NMe,curveBasisOpen:PMe,curveBasis:DMe,curveBumpX:pMe,curveBumpY:mMe,curveLinearClosed:MMe,curveLinear:JM,curveMonotoneX:IMe,curveMonotoneY:OMe,curveNatural:kMe,curveStep:RMe,curveStepAfter:LMe,curveStepBefore:FMe},R2=t=>Ui(t.x)&&Ui(t.y),nH=t=>t.base!=null&&R2(t.base)&&R2(t),Bw=t=>t.x,$w=t=>t.y,kRe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(TS(t));return(r==="curveMonotone"||r==="curveBump")&&e?rH["".concat(r).concat(e==="vertical"?"Y":"X")]:rH[r]||JM},RRe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,s=kRe(e,i),o=a?r.filter(R2):r,l;if(Array.isArray(n)){var u=r.map((d,p)=>tH(tH({},d),{},{base:n[p]}));i==="vertical"?l=lT().y($w).x1(Bw).x0(d=>d.base.x):l=lT().x(Bw).y1($w).y0(d=>d.base.y);var c=l.defined(nH).curve(s),f=a?u.filter(nH):u;return c(f)}i==="vertical"&&ut(n)?l=lT().y($w).x1(Bw).x0(n):ut(n)?l=lT().x(Bw).y1($w).y0(n):l=Jse().x(Bw).y($w);var h=l.defined(R2).curve(s);return h(o)},V6=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?RRe(t):n;return O.createElement("path",DB({},xl(t),p6(t),{className:wr("recharts-curve",e),d:a===null?void 0:a,ref:i}))},FRe=["x","y","top","left","width","height","className"];function NB(){return NB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NB.apply(null,arguments)}function iH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LRe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iH(Object(r),!0).forEach(function(n){BRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BRe(t,e,r){return(e=$Re(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Re(t){var e=jRe(t,"string");return typeof e=="symbol"?e:e+""}function jRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VRe(t,e){if(t==null)return{};var r,n,i=URe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function URe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var zRe=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),qRe=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=t,l=VRe(t,FRe),u=LRe({x:e,y:r,top:n,left:i,width:a,height:s},l);return!ut(e)||!ut(r)||!ut(a)||!ut(s)||!ut(n)||!ut(i)?null:O.createElement("path",NB({},us(u),{className:wr("recharts-cross",o),d:zRe(e,r,a,s,n,i)}))};function HRe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function aH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aH(Object(r),!0).forEach(function(n){WRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WRe(t,e,r){return(e=GRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GRe(t){var e=KRe(t,"string");return typeof e=="symbol"?e:e+""}function KRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XRe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),qle=(t,e,r)=>t.map(n=>"".concat(XRe(n)," ").concat(e,"ms ").concat(r)).join(","),YRe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),XA=(t,e)=>Object.keys(e).reduce((r,n)=>sH(sH({},r),{},{[n]:t(n,e[n])}),{});function oH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function li(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oH(Object(r),!0).forEach(function(n){QRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QRe(t,e,r){return(e=ZRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZRe(t){var e=JRe(t,"string");return typeof e=="symbol"?e:e+""}function JRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F2=(t,e,r)=>t+(e-t)*r,PB=t=>{var{from:e,to:r}=t;return e!==r},Hle=(t,e,r)=>{var n=XA((i,a)=>{if(PB(a)){var[s,o]=t(a.from,a.to,a.velocity);return li(li({},a),{},{from:s,velocity:o})}return a},e);return r<1?XA((i,a)=>PB(a)?li(li({},a),{},{velocity:F2(a.velocity,n[i].velocity,r),from:F2(a.from,n[i].from,r)}):a,e):Hle(t,n,r-1)};function eFe(t,e,r,n,i,a){var s,o=n.reduce((h,d)=>li(li({},h),{},{[d]:{from:t[d],velocity:0,to:e[d]}}),{}),l=()=>XA((h,d)=>d.from,o),u=()=>!Object.values(o).filter(PB).length,c=null,f=h=>{s||(s=h);var d=h-s,p=d/r.dt;o=Hle(r,o,p),i(li(li(li({},t),e),l())),s=h,u()||(c=a.setTimeout(f))};return()=>(c=a.setTimeout(f),()=>{var h;(h=c)===null||h===void 0||h()})}function tFe(t,e,r,n,i,a,s){var o=null,l=i.reduce((f,h)=>li(li({},f),{},{[h]:[t[h],e[h]]}),{}),u,c=f=>{u||(u=f);var h=(f-u)/n,d=XA((m,v)=>F2(...v,r(h)),l);if(a(li(li(li({},t),e),d)),h<1)o=s.setTimeout(c);else{var p=XA((m,v)=>F2(...v,r(1)),l);a(li(li(li({},t),e),p))}};return()=>(o=s.setTimeout(c),()=>{var f;(f=o)===null||f===void 0||f()})}const rFe=(t,e,r,n,i,a)=>{var s=YRe(t,e);return r==null?()=>(i(li(li({},t),e)),()=>{}):r.isStepper===!0?eFe(t,e,r,s,i,a):tFe(t,e,r,n,s,i,a)};var L2=1e-4,Wle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Gle=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),lH=(t,e)=>r=>{var n=Wle(t,e);return Gle(n,r)},nFe=(t,e)=>r=>{var n=Wle(t,e),i=[...n.map((a,s)=>a*s).slice(1),0];return Gle(i,r)},iFe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},aFe=(t,e,r,n)=>{var i=lH(t,r),a=lH(e,n),s=nFe(t,r),o=u=>u>1?1:u<0?0:u,l=u=>{for(var c=u>1?1:u,f=c,h=0;h<8;++h){var d=i(f)-c,p=s(f);if(Math.abs(d-c)<L2||p<L2)return a(f);f=o(f-d/p)}return a(f)};return l.isStepper=!1,l},uH=function(){return aFe(...iFe(...arguments))},sFe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(s,o,l)=>{var u=-(s-o)*r,c=l*n,f=l+(u-c)*i/1e3,h=l*i/1e3+s;return Math.abs(h-o)<L2&&Math.abs(f)<L2?[o,0]:[h,f]};return a.isStepper=!0,a.dt=i,a},oFe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uH(t);case"spring":return sFe();default:if(t.split("(")[0]==="cubic-bezier")return uH(t)}return typeof t=="function"?t:null};function lFe(t){var e,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...u]=o;if(typeof l=="number"){i=t.setTimeout(a.bind(null,u),l);return}a(l),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,r(e)),typeof s=="object"&&(e=s,r(e)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>t}}class uFe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function cFe(){return lFe(new uFe)}var fFe=O.createContext(cFe);function hFe(t,e){var r=O.useContext(fFe);return O.useMemo(()=>e??r(t),[t,e,r])}var dFe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),RS={devToolsEnabled:!1,isSsr:dFe()},pFe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},cH={t:0},sR={t:1};function CI(t){var e=qi(t,pFe),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:u}=e,c=r==="auto"?!RS.isSsr:r,f=hFe(e.animationId,e.animationManager),[h,d]=O.useState(c?cH:sR),p=O.useRef(null);return O.useEffect(()=>{c||d(sR)},[c]),O.useEffect(()=>{if(!c||!n)return DS;var m=rFe(cH,sR,oFe(a),i,d,f.getTimeoutController()),v=()=>{p.current=m()};return f.start([l,s,v,i,o]),()=>{f.stop(),p.current&&p.current(),o()}},[c,n,i,a,s,l,o,f]),u(h.t)}function TI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=O.useRef(UA(e)),n=O.useRef(t);return n.current!==t&&(r.current=UA(e),n.current=t),r.current}var mFe=["radius"],gFe=["radius"];function fH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fH(Object(r),!0).forEach(function(n){vFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vFe(t,e,r){return(e=yFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yFe(t){var e=bFe(t,"string");return typeof e=="symbol"?e:e+""}function bFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B2(){return B2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B2.apply(null,arguments)}function dH(t,e){if(t==null)return{};var r,n,i=wFe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wFe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pH=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&i instanceof Array){for(var c=[0,0,0,0],f=0,h=4;f<h;f++)c[f]=i[f]>a?a:i[f];u="M".concat(t,",").concat(e+s*c[0]),c[0]>0&&(u+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(t+o*c[0],",").concat(e)),u+="L ".concat(t+r-o*c[1],",").concat(e),c[1]>0&&(u+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,`,
        `).concat(t+r,",").concat(e+s*c[1])),u+="L ".concat(t+r,",").concat(e+n-s*c[2]),c[2]>0&&(u+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,`,
        `).concat(t+r-o*c[2],",").concat(e+n)),u+="L ".concat(t+o*c[3],",").concat(e+n),c[3]>0&&(u+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+n-s*c[3])),u+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);u="M ".concat(t,",").concat(e+s*d,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+o*d,",").concat(e,`
            L `).concat(t+r-o*d,",").concat(e,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+r,",").concat(e+s*d,`
            L `).concat(t+r,",").concat(e+n-s*d,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+r-o*d,",").concat(e+n,`
            L `).concat(t+o*d,",").concat(e+n,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t,",").concat(e+n-s*d," Z")}else u="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},mH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kle=t=>{var e=qi(t,mH),r=O.useRef(null),[n,i]=O.useState(-1);O.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var V=r.current.getTotalLength();V&&i(V)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:u,className:c}=e,{animationEasing:f,animationDuration:h,animationBegin:d,isAnimationActive:p,isUpdateAnimationActive:m}=e,v=O.useRef(o),y=O.useRef(l),w=O.useRef(a),b=O.useRef(s),A=O.useMemo(()=>({x:a,y:s,width:o,height:l,radius:u}),[a,s,o,l,u]),x=TI(A,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var _=wr("recharts-rectangle",c);if(!m){var S=us(e),{radius:E}=S,T=dH(S,mFe);return O.createElement("path",B2({},T,{radius:typeof u=="number"?u:void 0,className:_,d:pH(a,s,o,l,u)}))}var D=v.current,N=y.current,P=w.current,M=b.current,j="0px ".concat(n===-1?1:n,"px"),K="".concat(n,"px 0px"),k=qle(["strokeDasharray"],h,typeof f=="string"?f:mH.animationEasing);return O.createElement(CI,{animationId:x,key:x,canBegin:n>0,duration:h,easing:f,isActive:m,begin:d},V=>{var q=Bi(D,o,V),H=Bi(N,l,V),te=Bi(P,a,V),ue=Bi(M,s,V);r.current&&(v.current=q,y.current=H,w.current=te,b.current=ue);var re;p?V>0?re={transition:k,strokeDasharray:K}:re={strokeDasharray:j}:re={strokeDasharray:K};var L=us(e),{radius:ie}=L,X=dH(L,gFe);return O.createElement("path",B2({},X,{radius:typeof u=="number"?u:void 0,className:_,d:pH(te,ue,q,H,u),ref:r,style:hH(hH({},re),e.style)}))})};function gH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(r),!0).forEach(function(n){xFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xFe(t,e,r){return(e=AFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AFe(t){var e=_Fe(t,"string");return typeof e=="symbol"?e:e+""}function _Fe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $2=Math.PI/180,EFe=t=>t*180/Math.PI,la=(t,e,r,n)=>({x:t+Math.cos(-$2*n)*r,y:e+Math.sin(-$2*n)*r}),SFe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},CFe=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},TFe=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,s=CFe({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:EFe(l),angleInRadian:l}},DFe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},NFe=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return t+s*360},PFe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:i,angle:a}=TFe({x:r,y:n},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:u}=DFe(e),c=a,f;if(l<=u){for(;c>u;)c-=360;for(;c<l;)c+=360;f=c>=l&&c<=u}else{for(;c>l;)c-=360;for(;c<u;)c+=360;f=c>=u&&c<=l}return f?vH(vH({},e),{},{radius:i,angle:NFe(c,e)}):null};function Xle(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,s=la(e,r,n,i),o=la(e,r,n,a);return{points:[s,o],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function MB(){return MB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MB.apply(null,arguments)}var MFe=(t,e)=>{var r=fl(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},vT=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=t,u=o*(s?1:-1)+n,c=Math.asin(o/u)/$2,f=l?i:i+a*c,h=la(e,r,u,f),d=la(e,r,n,f),p=l?i-a*c:i,m=la(e,r,u*Math.cos(c*$2),p);return{center:h,circleTangency:d,lineTangency:m,theta:c}},Yle=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=t,o=MFe(a,s),l=a+o,u=la(e,r,i,a),c=la(e,r,i,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(n>0){var h=la(e,r,n,a),d=la(e,r,n,l);f+="L ".concat(d.x,",").concat(d.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(e,",").concat(r," Z");return f},IFe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:u}=t,c=fl(u-l),{circleTangency:f,lineTangency:h,theta:d}=vT({cx:e,cy:r,radius:i,angle:l,sign:c,cornerRadius:a,cornerIsExternal:o}),{circleTangency:p,lineTangency:m,theta:v}=vT({cx:e,cy:r,radius:i,angle:u,sign:-c,cornerRadius:a,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-d-v;if(y<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Yle({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:A,theta:x}=vT({cx:e,cy:r,radius:n,angle:l,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:_,lineTangency:S,theta:E}=vT({cx:e,cy:r,radius:n,angle:u,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),T=o?Math.abs(l-u):Math.abs(l-u)-x-E;if(T<0&&a===0)return"".concat(w,"L").concat(e,",").concat(r,"Z");w+="L".concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(c>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(A.x,",").concat(A.y,"Z")}else w+="L".concat(e,",").concat(r,"Z");return w},OFe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qle=t=>{var e=qi(t,OFe),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c,className:f}=e;if(a<i||u===c)return null;var h=wr("recharts-sector",f),d=a-i,p=Ap(s,d,0,!0),m;return p>0&&Math.abs(u-c)<360?m=IFe({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(p,d/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c}):m=Yle({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:c}),O.createElement("path",MB({},us(e),{className:h,d:m}))};function kFe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(moe(e)){if(t==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,l=la(n,i,a,o),u=la(n,i,s,o);return[{x:l.x,y:l.y},{x:u.x,y:u.y}]}return Xle(e)}}var Zle={},Jle={},eue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C6;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(eue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eue;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Jle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T6,r=Jle;function n(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=i,i+=s;return l}t.range=n})(Zle);var RFe=Zle.range;const tue=Sl(RFe);function sp(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FFe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U6(t){let e,r,n;t.length!==2?(e=sp,r=(o,l)=>sp(t(o),l),n=(o,l)=>t(o)-l):(e=t===sp||t===FFe?t:LFe,r=t,n=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;r(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;r(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){const f=i(o,l,u,c-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function LFe(){return 0}function rue(t){return t===null?NaN:+t}function*BFe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const $Fe=U6(sp),FS=$Fe.right;U6(rue).center;class yH extends Map{constructor(e,r=UFe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(bH(this,e))}has(e){return super.has(bH(this,e))}set(e,r){return super.set(jFe(this,e),r)}delete(e){return super.delete(VFe(this,e))}}function bH({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function jFe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function VFe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function UFe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zFe(t=sp){if(t===sp)return nue;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function nue(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const qFe=Math.sqrt(50),HFe=Math.sqrt(10),WFe=Math.sqrt(2);function j2(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=qFe?10:a>=HFe?5:a>=WFe?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=r&&r<2?j2(t,e,r*2):[o,l,u]}function IB(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?j2(e,t,r):j2(t,e,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function OB(t,e,r){return e=+e,t=+t,r=+r,j2(t,e,r)[2]}function kB(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?OB(e,t,r):OB(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function wH(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function xH(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function iue(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?nue:zFe(i);n>r;){if(n-r>600){const l=n-r+1,u=e-r+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),d=Math.max(r,Math.floor(e-u*f/l+h)),p=Math.min(n,Math.floor(e+(l-u)*f/l+h));iue(t,e,d,p,i)}const a=t[e];let s=r,o=n;for(jw(t,r,e),i(t[n],a)>0&&jw(t,r,n);s<o;){for(jw(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[r],a)===0?jw(t,r,o):(++o,jw(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function jw(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function GFe(t,e,r){if(t=Float64Array.from(BFe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return xH(t);if(e>=1)return wH(t);var n,i=(n-1)*e,a=Math.floor(i),s=wH(iue(t,a).subarray(0,a+1)),o=xH(t.subarray(a+1));return s+(o-s)*(i-a)}}function KFe(t,e,r=rue){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),o=+r(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function XFe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Tl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RB=Symbol("implicit");function z6(){var t=new yH,e=[],r=[],n=RB;function i(a){let s=t.get(a);if(s===void 0){if(n!==RB)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new yH;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return z6(e,r).unknown(n)},Tl.apply(i,arguments),i}function q6(){var t=z6().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,o=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<n,p=d?i:n,m=d?n:i;a=(m-p)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),p+=(m-p-a*(h-l))*c,s=a*(1-l),o&&(p=Math.round(p),s=Math.round(s));var v=XFe(h).map(function(y){return p+a*y});return r(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return q6(e(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(c)},Tl.apply(f(),arguments)}function aue(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return aue(e())},t}function YFe(){return aue(q6.apply(null,arguments).paddingInner(1))}function H6(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function sue(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function LS(){}var YA=.7,V2=1/YA,v0="\\s*([+-]?\\d+)\\s*",QA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QFe=/^#([0-9a-f]{3,8})$/,ZFe=new RegExp(`^rgb\\(${v0},${v0},${v0}\\)$`),JFe=new RegExp(`^rgb\\(${gc},${gc},${gc}\\)$`),e3e=new RegExp(`^rgba\\(${v0},${v0},${v0},${QA}\\)$`),t3e=new RegExp(`^rgba\\(${gc},${gc},${gc},${QA}\\)$`),r3e=new RegExp(`^hsl\\(${QA},${gc},${gc}\\)$`),n3e=new RegExp(`^hsla\\(${QA},${gc},${gc},${QA}\\)$`),AH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H6(LS,ZA,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_H,formatHex:_H,formatHex8:i3e,formatHsl:a3e,formatRgb:EH,toString:EH});function _H(){return this.rgb().formatHex()}function i3e(){return this.rgb().formatHex8()}function a3e(){return oue(this).formatHsl()}function EH(){return this.rgb().formatRgb()}function ZA(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=QFe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?SH(e):r===3?new ks(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?yT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?yT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ZFe.exec(t))?new ks(e[1],e[2],e[3],1):(e=JFe.exec(t))?new ks(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=e3e.exec(t))?yT(e[1],e[2],e[3],e[4]):(e=t3e.exec(t))?yT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=r3e.exec(t))?DH(e[1],e[2]/100,e[3]/100,1):(e=n3e.exec(t))?DH(e[1],e[2]/100,e[3]/100,e[4]):AH.hasOwnProperty(t)?SH(AH[t]):t==="transparent"?new ks(NaN,NaN,NaN,0):null}function SH(t){return new ks(t>>16&255,t>>8&255,t&255,1)}function yT(t,e,r,n){return n<=0&&(t=e=r=NaN),new ks(t,e,r,n)}function s3e(t){return t instanceof LS||(t=ZA(t)),t?(t=t.rgb(),new ks(t.r,t.g,t.b,t.opacity)):new ks}function FB(t,e,r,n){return arguments.length===1?s3e(t):new ks(t,e,r,n??1)}function ks(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}H6(ks,FB,sue(LS,{brighter(t){return t=t==null?V2:Math.pow(V2,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?YA:Math.pow(YA,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ks(rv(this.r),rv(this.g),rv(this.b),U2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CH,formatHex:CH,formatHex8:o3e,formatRgb:TH,toString:TH}));function CH(){return`#${Nm(this.r)}${Nm(this.g)}${Nm(this.b)}`}function o3e(){return`#${Nm(this.r)}${Nm(this.g)}${Nm(this.b)}${Nm((isNaN(this.opacity)?1:this.opacity)*255)}`}function TH(){const t=U2(this.opacity);return`${t===1?"rgb(":"rgba("}${rv(this.r)}, ${rv(this.g)}, ${rv(this.b)}${t===1?")":`, ${t})`}`}function U2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nm(t){return t=rv(t),(t<16?"0":"")+t.toString(16)}function DH(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new eu(t,e,r,n)}function oue(t){if(t instanceof eu)return new eu(t.h,t.s,t.l,t.opacity);if(t instanceof LS||(t=ZA(t)),!t)return new eu;if(t instanceof eu)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-e)/o+2:s=(e-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new eu(s,o,l,t.opacity)}function l3e(t,e,r,n){return arguments.length===1?oue(t):new eu(t,e,r,n??1)}function eu(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}H6(eu,l3e,sue(LS,{brighter(t){return t=t==null?V2:Math.pow(V2,t),new eu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?YA:Math.pow(YA,t),new eu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ks(oR(t>=240?t-240:t+120,i,n),oR(t,i,n),oR(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new eu(NH(this.h),bT(this.s),bT(this.l),U2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=U2(this.opacity);return`${t===1?"hsl(":"hsla("}${NH(this.h)}, ${bT(this.s)*100}%, ${bT(this.l)*100}%${t===1?")":`, ${t})`}`}}));function NH(t){return t=(t||0)%360,t<0?t+360:t}function bT(t){return Math.max(0,Math.min(1,t||0))}function oR(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const W6=t=>()=>t;function u3e(t,e){return function(r){return t+r*e}}function c3e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function f3e(t){return(t=+t)==1?lue:function(e,r){return r-e?c3e(e,r,t):W6(isNaN(e)?r:e)}}function lue(t,e){var r=e-t;return r?u3e(t,r):W6(isNaN(t)?e:t)}const PH=function t(e){var r=f3e(e);function n(i,a){var s=r((i=FB(i)).r,(a=FB(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),u=lue(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=t,n}(1);function h3e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function d3e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function p3e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=U1(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function m3e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function z2(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function g3e(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=U1(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var LB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lR=new RegExp(LB.source,"g");function v3e(t){return function(){return t}}function y3e(t){return function(e){return t(e)+""}}function b3e(t,e){var r=LB.lastIndex=lR.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(n=LB.exec(t))&&(i=lR.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:z2(n,i)})),r=lR.lastIndex;return r<e.length&&(a=e.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?y3e(l[0].x):v3e(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function U1(t,e){var r=typeof e,n;return e==null||r==="boolean"?W6(e):(r==="number"?z2:r==="string"?(n=ZA(e))?(e=n,PH):b3e:e instanceof ZA?PH:e instanceof Date?m3e:d3e(e)?h3e:Array.isArray(e)?p3e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?g3e:z2)(t,e)}function G6(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function w3e(t,e){e===void 0&&(e=t,t=U1);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function x3e(t){return function(){return t}}function q2(t){return+t}var MH=[0,1];function ts(t){return t}function BB(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:x3e(isNaN(e)?NaN:.5)}function A3e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function _3e(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=BB(i,n),a=r(s,a)):(n=BB(n,i),a=r(a,s)),function(o){return a(n(o))}}function E3e(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=BB(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(o){var l=FS(t,o,1,n)-1;return a[l](i[l](o))}}function BS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function DI(){var t=MH,e=MH,r=U1,n,i,a,s=ts,o,l,u;function c(){var h=Math.min(t.length,e.length);return s!==ts&&(s=A3e(t[0],t[h-1])),o=h>2?E3e:_3e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(n),e,r)))(n(s(h)))}return f.invert=function(h){return s(i((u||(u=o(e,t.map(n),z2)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,q2),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=G6,c()},f.clamp=function(h){return arguments.length?(s=h?!0:ts,c()):s!==ts},f.interpolate=function(h){return arguments.length?(r=h,c()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return n=h,i=d,c()}}function K6(){return DI()(ts,ts)}function S3e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function H2(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function p1(t){return t=H2(Math.abs(t)),t?t[1]:NaN}function C3e(t,e){return function(r,n){for(var i=r.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function T3e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var D3e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function JA(t){if(!(e=D3e.exec(t)))throw new Error("invalid format: "+t);var e;return new X6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}JA.prototype=X6.prototype;function X6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}X6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N3e(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var uue;function P3e(t,e){var r=H2(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(uue=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+H2(t,Math.max(0,e+a-1))[0]}function IH(t,e){var r=H2(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const OH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:S3e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>IH(t*100,e),r:IH,s:P3e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kH(t){return t}var RH=Array.prototype.map,FH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function M3e(t){var e=t.grouping===void 0||t.thousands===void 0?kH:C3e(RH.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?kH:T3e(RH.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=JA(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,v=f.zero,y=f.width,w=f.comma,b=f.precision,A=f.trim,x=f.type;x==="n"?(w=!0,x="g"):OH[x]||(b===void 0&&(b=12),A=!0,x="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var _=m==="$"?r:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=m==="$"?n:/[%p]/.test(x)?s:"",E=OH[x],T=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(N){var P=_,M=S,j,K,k;if(x==="c")M=E(N)+M,N="";else{N=+N;var V=N<0||1/N<0;if(N=isNaN(N)?l:E(Math.abs(N),b),A&&(N=N3e(N)),V&&+N==0&&p!=="+"&&(V=!1),P=(V?p==="("?p:o:p==="-"||p==="("?"":p)+P,M=(x==="s"?FH[8+uue/3]:"")+M+(V&&p==="("?")":""),T){for(j=-1,K=N.length;++j<K;)if(k=N.charCodeAt(j),48>k||k>57){M=(k===46?i+N.slice(j+1):N.slice(j))+M,N=N.slice(0,j);break}}}w&&!v&&(N=e(N,1/0));var q=P.length+N.length+M.length,H=q<y?new Array(y-q+1).join(h):"";switch(w&&v&&(N=e(H+N,H.length?y-M.length:1/0),H=""),d){case"<":N=P+N+M+H;break;case"=":N=P+H+N+M;break;case"^":N=H.slice(0,q=H.length>>1)+P+N+M+H.slice(q);break;default:N=H+P+N+M;break}return a(N)}return D.toString=function(){return f+""},D}function c(f,h){var d=u((f=JA(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(p1(h)/3)))*3,m=Math.pow(10,-p),v=FH[8+p/3];return function(y){return d(m*y)+v}}return{format:u,formatPrefix:c}}var wT,Y6,cue;I3e({thousands:",",grouping:[3],currency:["$",""]});function I3e(t){return wT=M3e(t),Y6=wT.format,cue=wT.formatPrefix,wT}function O3e(t){return Math.max(0,-p1(Math.abs(t)))}function k3e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p1(e)/3)))*3-p1(Math.abs(t)))}function R3e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,p1(e)-p1(t))+1}function fue(t,e,r,n){var i=kB(t,e,r),a;switch(n=JA(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=k3e(i,s))&&(n.precision=a),cue(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=R3e(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=O3e(i))&&(n.precision=a-(n.type==="%")*2);break}}return Y6(n)}function $p(t){var e=t.domain;return t.ticks=function(r){var n=e();return IB(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return fue(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],o=n[a],l,u,c=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);c-- >0;){if(u=OB(s,o,r),u===l)return n[i]=s,n[a]=o,e(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function hue(){var t=K6();return t.copy=function(){return BS(t,hue())},Tl.apply(t,arguments),$p(t)}function due(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,q2),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return due(t).unknown(e)},t=arguments.length?Array.from(t,q2):[0,1],$p(r)}function pue(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function LH(t){return Math.log(t)}function BH(t){return Math.exp(t)}function F3e(t){return-Math.log(-t)}function L3e(t){return-Math.exp(-t)}function B3e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function $3e(t){return t===10?B3e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function j3e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function $H(t){return(e,r)=>-t(-e,r)}function Q6(t){const e=t(LH,BH),r=e.domain;let n=10,i,a;function s(){return i=j3e(n),a=$3e(n),r()[0]<0?(i=$H(i),a=$H(a),t(F3e,L3e)):t(LH,BH),e}return e.base=function(o){return arguments.length?(n=+o,s()):n},e.domain=function(o){return arguments.length?(r(o),s()):r()},e.ticks=o=>{const l=r();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),d=i(c),p,m;const v=o==null?10:+o;let y=[];if(!(n%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(p=1;p<n;++p)if(m=h<0?p/a(-h):p*a(h),!(m<u)){if(m>c)break;y.push(m)}}else for(;h<=d;++h)for(p=n-1;p>=1;--p)if(m=h>0?p/a(-h):p*a(h),!(m<u)){if(m>c)break;y.push(m)}y.length*2<v&&(y=IB(u,c,v))}else y=IB(h,d,Math.min(d-h,v)).map(a);return f?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=JA(l)).precision==null&&(l.trim=!0),l=Y6(l)),o===1/0)return l;const u=Math.max(1,n*o/e.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*n<n-.5&&(f*=n),f<=u?l(c):""}},e.nice=()=>r(pue(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function mue(){const t=Q6(DI()).domain([1,10]);return t.copy=()=>BS(t,mue()).base(t.base()),Tl.apply(t,arguments),t}function jH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function VH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Z6(t){var e=1,r=t(jH(e),VH(e));return r.constant=function(n){return arguments.length?t(jH(e=+n),VH(e)):e},$p(r)}function gue(){var t=Z6(DI());return t.copy=function(){return BS(t,gue()).constant(t.constant())},Tl.apply(t,arguments)}function UH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function V3e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function U3e(t){return t<0?-t*t:t*t}function J6(t){var e=t(ts,ts),r=1;function n(){return r===1?t(ts,ts):r===.5?t(V3e,U3e):t(UH(r),UH(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},$p(e)}function ej(){var t=J6(DI());return t.copy=function(){return BS(t,ej()).exponent(t.exponent())},Tl.apply(t,arguments),t}function z3e(){return ej.apply(null,arguments).exponent(.5)}function zH(t){return Math.sign(t)*t*t}function q3e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function vue(){var t=K6(),e=[0,1],r=!1,n;function i(a){var s=q3e(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(zH(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,q2)).map(zH)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vue(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Tl.apply(i,arguments),$p(i)}function yue(){var t=[],e=[],r=[],n;function i(){var s=0,o=Math.max(1,e.length);for(r=new Array(o-1);++s<o;)r[s-1]=KFe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:e[FS(r,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(sp),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return yue().domain(t).range(e).unknown(n)},Tl.apply(a,arguments)}function bue(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[FS(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return bue().domain([t,e]).range(i).unknown(a)},Tl.apply($p(s),arguments)}function wue(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[FS(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return wue().domain(t).range(e).unknown(r)},Tl.apply(i,arguments)}const uR=new Date,cR=new Date;function pi(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>pi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(uR.setTime(+a),cR.setTime(+s),t(uR),t(cR),Math.floor(r(uR,cR))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const W2=pi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);W2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):W2);W2.range;const Mf=1e3,hl=Mf*60,If=hl*60,nh=If*24,tj=nh*7,qH=nh*30,fR=nh*365,Pm=pi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Mf)},(t,e)=>(e-t)/Mf,t=>t.getUTCSeconds());Pm.range;const rj=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mf)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getMinutes());rj.range;const nj=pi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getUTCMinutes());nj.range;const ij=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mf-t.getMinutes()*hl)},(t,e)=>{t.setTime(+t+e*If)},(t,e)=>(e-t)/If,t=>t.getHours());ij.range;const aj=pi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*If)},(t,e)=>(e-t)/If,t=>t.getUTCHours());aj.range;const $S=pi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*hl)/nh,t=>t.getDate()-1);$S.range;const NI=pi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nh,t=>t.getUTCDate()-1);NI.range;const xue=pi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nh,t=>Math.floor(t/nh));xue.range;function Vv(t){return pi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*hl)/tj)}const PI=Vv(0),G2=Vv(1),H3e=Vv(2),W3e=Vv(3),m1=Vv(4),G3e=Vv(5),K3e=Vv(6);PI.range;G2.range;H3e.range;W3e.range;m1.range;G3e.range;K3e.range;function Uv(t){return pi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/tj)}const MI=Uv(0),K2=Uv(1),X3e=Uv(2),Y3e=Uv(3),g1=Uv(4),Q3e=Uv(5),Z3e=Uv(6);MI.range;K2.range;X3e.range;Y3e.range;g1.range;Q3e.range;Z3e.range;const sj=pi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sj.range;const oj=pi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());oj.range;const ih=pi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ih.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ih.range;const ah=pi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ah.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ah.range;function Aue(t,e,r,n,i,a){const s=[[Pm,1,Mf],[Pm,5,5*Mf],[Pm,15,15*Mf],[Pm,30,30*Mf],[a,1,hl],[a,5,5*hl],[a,15,15*hl],[a,30,30*hl],[i,1,If],[i,3,3*If],[i,6,6*If],[i,12,12*If],[n,1,nh],[n,2,2*nh],[r,1,tj],[e,1,qH],[e,3,3*qH],[t,1,fR]];function o(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:l(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,f){const h=Math.abs(c-u)/f,d=U6(([,,v])=>v).right(s,h);if(d===s.length)return t.every(kB(u/fR,c/fR,f));if(d===0)return W2.every(Math.max(kB(u,c,f),1));const[p,m]=s[h/s[d-1][2]<s[d][2]/h?d-1:d];return p.every(m)}return[o,l]}const[J3e,eLe]=Aue(ah,oj,MI,xue,aj,nj),[tLe,rLe]=Aue(ih,sj,PI,$S,ij,rj);function hR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vw(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function nLe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=Uw(i),c=zw(i),f=Uw(a),h=zw(a),d=Uw(s),p=zw(s),m=Uw(o),v=zw(o),y=Uw(l),w=zw(l),b={a:V,A:q,b:H,B:te,c:null,d:YH,e:YH,f:CLe,g:FLe,G:BLe,H:_Le,I:ELe,j:SLe,L:_ue,m:TLe,M:DLe,p:ue,q:re,Q:JH,s:eW,S:NLe,u:PLe,U:MLe,V:ILe,w:OLe,W:kLe,x:null,X:null,y:RLe,Y:LLe,Z:$Le,"%":ZH},A={a:L,A:ie,b:X,B:pe,c:null,d:QH,e:QH,f:zLe,g:JLe,G:tBe,H:jLe,I:VLe,j:ULe,L:Sue,m:qLe,M:HLe,p:de,q:ae,Q:JH,s:eW,S:WLe,u:GLe,U:KLe,V:XLe,w:YLe,W:QLe,x:null,X:null,y:ZLe,Y:eBe,Z:rBe,"%":ZH},x={a:D,A:N,b:P,B:M,c:j,d:KH,e:KH,f:bLe,g:GH,G:WH,H:XH,I:XH,j:mLe,L:yLe,m:pLe,M:gLe,p:T,q:dLe,Q:xLe,s:ALe,S:vLe,u:lLe,U:uLe,V:cLe,w:oLe,W:fLe,x:K,X:k,y:GH,Y:WH,Z:hLe,"%":wLe};b.x=_(r,b),b.X=_(n,b),b.c=_(e,b),A.x=_(r,A),A.X=_(n,A),A.c=_(e,A);function _(z,ne){return function(fe){var Q=[],ye=-1,me=0,De=z.length,Le,ze,Be;for(fe instanceof Date||(fe=new Date(+fe));++ye<De;)z.charCodeAt(ye)===37&&(Q.push(z.slice(me,ye)),(ze=HH[Le=z.charAt(++ye)])!=null?Le=z.charAt(++ye):ze=Le==="e"?" ":"0",(Be=ne[Le])&&(Le=Be(fe,ze)),Q.push(Le),me=ye+1);return Q.push(z.slice(me,ye)),Q.join("")}}function S(z,ne){return function(fe){var Q=Vw(1900,void 0,1),ye=E(Q,z,fe+="",0),me,De;if(ye!=fe.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ne&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(me=dR(Vw(Q.y,0,1)),De=me.getUTCDay(),me=De>4||De===0?K2.ceil(me):K2(me),me=NI.offset(me,(Q.V-1)*7),Q.y=me.getUTCFullYear(),Q.m=me.getUTCMonth(),Q.d=me.getUTCDate()+(Q.w+6)%7):(me=hR(Vw(Q.y,0,1)),De=me.getDay(),me=De>4||De===0?G2.ceil(me):G2(me),me=$S.offset(me,(Q.V-1)*7),Q.y=me.getFullYear(),Q.m=me.getMonth(),Q.d=me.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),De="Z"in Q?dR(Vw(Q.y,0,1)).getUTCDay():hR(Vw(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(De+5)%7:Q.w+Q.U*7-(De+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,dR(Q)):hR(Q)}}function E(z,ne,fe,Q){for(var ye=0,me=ne.length,De=fe.length,Le,ze;ye<me;){if(Q>=De)return-1;if(Le=ne.charCodeAt(ye++),Le===37){if(Le=ne.charAt(ye++),ze=x[Le in HH?ne.charAt(ye++):Le],!ze||(Q=ze(z,fe,Q))<0)return-1}else if(Le!=fe.charCodeAt(Q++))return-1}return Q}function T(z,ne,fe){var Q=u.exec(ne.slice(fe));return Q?(z.p=c.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function D(z,ne,fe){var Q=d.exec(ne.slice(fe));return Q?(z.w=p.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function N(z,ne,fe){var Q=f.exec(ne.slice(fe));return Q?(z.w=h.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function P(z,ne,fe){var Q=y.exec(ne.slice(fe));return Q?(z.m=w.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function M(z,ne,fe){var Q=m.exec(ne.slice(fe));return Q?(z.m=v.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function j(z,ne,fe){return E(z,e,ne,fe)}function K(z,ne,fe){return E(z,r,ne,fe)}function k(z,ne,fe){return E(z,n,ne,fe)}function V(z){return s[z.getDay()]}function q(z){return a[z.getDay()]}function H(z){return l[z.getMonth()]}function te(z){return o[z.getMonth()]}function ue(z){return i[+(z.getHours()>=12)]}function re(z){return 1+~~(z.getMonth()/3)}function L(z){return s[z.getUTCDay()]}function ie(z){return a[z.getUTCDay()]}function X(z){return l[z.getUTCMonth()]}function pe(z){return o[z.getUTCMonth()]}function de(z){return i[+(z.getUTCHours()>=12)]}function ae(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ne=_(z+="",b);return ne.toString=function(){return z},ne},parse:function(z){var ne=S(z+="",!1);return ne.toString=function(){return z},ne},utcFormat:function(z){var ne=_(z+="",A);return ne.toString=function(){return z},ne},utcParse:function(z){var ne=S(z+="",!0);return ne.toString=function(){return z},ne}}}var HH={"-":"",_:" ",0:"0"},Hi=/^\s*\d+/,iLe=/^%/,aLe=/[\\^$*+?|[\]().{}]/g;function lr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function sLe(t){return t.replace(aLe,"\\$&")}function Uw(t){return new RegExp("^(?:"+t.map(sLe).join("|")+")","i")}function zw(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function oLe(t,e,r){var n=Hi.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function lLe(t,e,r){var n=Hi.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function uLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function cLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function fLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function WH(t,e,r){var n=Hi.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function GH(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function hLe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dLe(t,e,r){var n=Hi.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function pLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function KH(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function mLe(t,e,r){var n=Hi.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function XH(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function gLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function vLe(t,e,r){var n=Hi.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function yLe(t,e,r){var n=Hi.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function bLe(t,e,r){var n=Hi.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function wLe(t,e,r){var n=iLe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function xLe(t,e,r){var n=Hi.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function ALe(t,e,r){var n=Hi.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function YH(t,e){return lr(t.getDate(),e,2)}function _Le(t,e){return lr(t.getHours(),e,2)}function ELe(t,e){return lr(t.getHours()%12||12,e,2)}function SLe(t,e){return lr(1+$S.count(ih(t),t),e,3)}function _ue(t,e){return lr(t.getMilliseconds(),e,3)}function CLe(t,e){return _ue(t,e)+"000"}function TLe(t,e){return lr(t.getMonth()+1,e,2)}function DLe(t,e){return lr(t.getMinutes(),e,2)}function NLe(t,e){return lr(t.getSeconds(),e,2)}function PLe(t){var e=t.getDay();return e===0?7:e}function MLe(t,e){return lr(PI.count(ih(t)-1,t),e,2)}function Eue(t){var e=t.getDay();return e>=4||e===0?m1(t):m1.ceil(t)}function ILe(t,e){return t=Eue(t),lr(m1.count(ih(t),t)+(ih(t).getDay()===4),e,2)}function OLe(t){return t.getDay()}function kLe(t,e){return lr(G2.count(ih(t)-1,t),e,2)}function RLe(t,e){return lr(t.getFullYear()%100,e,2)}function FLe(t,e){return t=Eue(t),lr(t.getFullYear()%100,e,2)}function LLe(t,e){return lr(t.getFullYear()%1e4,e,4)}function BLe(t,e){var r=t.getDay();return t=r>=4||r===0?m1(t):m1.ceil(t),lr(t.getFullYear()%1e4,e,4)}function $Le(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+lr(e/60|0,"0",2)+lr(e%60,"0",2)}function QH(t,e){return lr(t.getUTCDate(),e,2)}function jLe(t,e){return lr(t.getUTCHours(),e,2)}function VLe(t,e){return lr(t.getUTCHours()%12||12,e,2)}function ULe(t,e){return lr(1+NI.count(ah(t),t),e,3)}function Sue(t,e){return lr(t.getUTCMilliseconds(),e,3)}function zLe(t,e){return Sue(t,e)+"000"}function qLe(t,e){return lr(t.getUTCMonth()+1,e,2)}function HLe(t,e){return lr(t.getUTCMinutes(),e,2)}function WLe(t,e){return lr(t.getUTCSeconds(),e,2)}function GLe(t){var e=t.getUTCDay();return e===0?7:e}function KLe(t,e){return lr(MI.count(ah(t)-1,t),e,2)}function Cue(t){var e=t.getUTCDay();return e>=4||e===0?g1(t):g1.ceil(t)}function XLe(t,e){return t=Cue(t),lr(g1.count(ah(t),t)+(ah(t).getUTCDay()===4),e,2)}function YLe(t){return t.getUTCDay()}function QLe(t,e){return lr(K2.count(ah(t)-1,t),e,2)}function ZLe(t,e){return lr(t.getUTCFullYear()%100,e,2)}function JLe(t,e){return t=Cue(t),lr(t.getUTCFullYear()%100,e,2)}function eBe(t,e){return lr(t.getUTCFullYear()%1e4,e,4)}function tBe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?g1(t):g1.ceil(t),lr(t.getUTCFullYear()%1e4,e,4)}function rBe(){return"+0000"}function ZH(){return"%"}function JH(t){return+t}function eW(t){return Math.floor(+t/1e3)}var ay,Tue,Due;nBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nBe(t){return ay=nLe(t),Tue=ay.format,ay.parse,Due=ay.utcFormat,ay.utcParse,ay}function iBe(t){return new Date(t)}function aBe(t){return t instanceof Date?+t:+new Date(+t)}function lj(t,e,r,n,i,a,s,o,l,u){var c=K6(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),b=u("%B"),A=u("%Y");function x(_){return(l(_)<_?d:o(_)<_?p:s(_)<_?m:a(_)<_?v:n(_)<_?i(_)<_?y:w:r(_)<_?b:A)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?h(Array.from(_,aBe)):h().map(iBe)},c.ticks=function(_){var S=h();return t(S[0],S[S.length-1],_??10)},c.tickFormat=function(_,S){return S==null?x:u(S)},c.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=e(S[0],S[S.length-1],_??10)),_?h(pue(S,_)):c},c.copy=function(){return BS(c,lj(t,e,r,n,i,a,s,o,l,u))},c}function sBe(){return Tl.apply(lj(tLe,rLe,ih,sj,PI,$S,ij,rj,Pm,Tue).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oBe(){return Tl.apply(lj(J3e,eLe,ah,oj,MI,NI,aj,nj,Pm,Due).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function II(){var t=0,e=1,r,n,i,a,s=ts,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,s=f(d,p),u):[s(0),s(1)]}}return u.range=c(U1),u.rangeRound=c(G6),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),u}}function jp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Nue(){var t=$p(II()(ts));return t.copy=function(){return jp(t,Nue())},mh.apply(t,arguments)}function Pue(){var t=Q6(II()).domain([1,10]);return t.copy=function(){return jp(t,Pue()).base(t.base())},mh.apply(t,arguments)}function Mue(){var t=Z6(II());return t.copy=function(){return jp(t,Mue()).constant(t.constant())},mh.apply(t,arguments)}function uj(){var t=J6(II());return t.copy=function(){return jp(t,uj()).exponent(t.exponent())},mh.apply(t,arguments)}function lBe(){return uj.apply(null,arguments).exponent(.5)}function Iue(){var t=[],e=ts;function r(n){if(n!=null&&!isNaN(n=+n))return e((FS(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(sp),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>GFe(t,a/n))},r.copy=function(){return Iue(e).domain(t)},mh.apply(r,arguments)}function OI(){var t=0,e=.5,r=1,n=1,i,a,s,o,l,u=ts,c,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-a)*(n*m<n*a?o:l),u(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,r]=m,i=c(t=+t),a=c(e=+e),s=c(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,d):[t,e,r]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(v){var y,w,b;return arguments.length?([y,w,b]=v,u=w3e(m,[y,w,b]),d):[u(0),u(.5),u(1)]}}return d.range=p(U1),d.rangeRound=p(G6),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return c=m,i=m(t),a=m(e),s=m(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,d}}function Oue(){var t=$p(OI()(ts));return t.copy=function(){return jp(t,Oue())},mh.apply(t,arguments)}function kue(){var t=Q6(OI()).domain([.1,1,10]);return t.copy=function(){return jp(t,kue()).base(t.base())},mh.apply(t,arguments)}function Rue(){var t=Z6(OI());return t.copy=function(){return jp(t,Rue()).constant(t.constant())},mh.apply(t,arguments)}function cj(){var t=J6(OI());return t.copy=function(){return jp(t,cj()).exponent(t.exponent())},mh.apply(t,arguments)}function uBe(){return cj.apply(null,arguments).exponent(.5)}const Cx=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:q6,scaleDiverging:Oue,scaleDivergingLog:kue,scaleDivergingPow:cj,scaleDivergingSqrt:uBe,scaleDivergingSymlog:Rue,scaleIdentity:due,scaleImplicit:RB,scaleLinear:hue,scaleLog:mue,scaleOrdinal:z6,scalePoint:YFe,scalePow:ej,scaleQuantile:yue,scaleQuantize:bue,scaleRadial:vue,scaleSequential:Nue,scaleSequentialLog:Pue,scaleSequentialPow:uj,scaleSequentialQuantile:Iue,scaleSequentialSqrt:lBe,scaleSequentialSymlog:Mue,scaleSqrt:z3e,scaleSymlog:gue,scaleThreshold:wue,scaleTime:sBe,scaleUtc:oBe,tickFormat:fue},Symbol.toStringTag,{value:"Module"}));var Vp=t=>t.chartData,cBe=_e([Vp],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),kI=(t,e,r,n)=>n?cBe(t):Vp(t);function _p(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Ui(e)&&Ui(r))return!0}return!1}function tW(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Fue(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(Ui(r))i=r;else if(typeof r=="function")return;if(Ui(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(_p(s))return s}}function fBe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(_p(n))return tW(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(ut(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&Lq.test(i)){var l=Lq.exec(i);if(l==null||e==null)s=void 0;else{var u=+l[1];s=e[0]-u}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(ut(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&Bq.test(a)){var c=Bq.exec(a);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[1]+f}}else o=e==null?void 0:e[1];var h=[s,o];if(_p(h))return e==null?h:tW(h,e,r)}}}var z1=1e9,hBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hj,ln=!0,_l="[DecimalError] ",nv=_l+"Invalid argument: ",fj=_l+"Exponent out of range: ",q1=Math.floor,vm=Math.pow,dBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vo,Fi=1e7,Xr=7,Lue=9007199254740991,X2=q1(Lue/Xr),tt={};tt.absoluteValue=tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tt.comparedTo=tt.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Xr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};tt.dividedBy=tt.div=function(t){return Bf(this,new this.constructor(t))};tt.dividedToIntegerBy=tt.idiv=function(t){var e=this,r=e.constructor;return Br(Bf(e,new r(t),0,1),r.precision)};tt.equals=tt.eq=function(t){return!this.cmp(t)};tt.exponent=function(){return Zn(this)};tt.greaterThan=tt.gt=function(t){return this.cmp(t)>0};tt.greaterThanOrEqualTo=tt.gte=function(t){return this.cmp(t)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(t){return this.cmp(t)<0};tt.lessThanOrEqualTo=tt.lte=function(t){return this.cmp(t)<1};tt.logarithm=tt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(vo))throw Error(_l+"NaN");if(r.s<1)throw Error(_l+(r.s?"NaN":"-Infinity"));return r.eq(vo)?new n(0):(ln=!1,e=Bf(e_(r,a),e_(t,a),a),ln=!0,Br(e,i))};tt.minus=tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jue(e,t):Bue(e,(t.s=-t.s,t))};tt.modulo=tt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(_l+"NaN");return r.s?(ln=!1,e=Bf(r,t,0,1).times(t),ln=!0,r.minus(e)):Br(new n(r),i)};tt.naturalExponential=tt.exp=function(){return $ue(this)};tt.naturalLogarithm=tt.ln=function(){return e_(this)};tt.negated=tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tt.plus=tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Bue(e,t):jue(e,(t.s=-t.s,t))};tt.precision=tt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(nv+t);if(e=Zn(i)+1,n=i.d.length-1,r=n*Xr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};tt.squareRoot=tt.sqrt=function(){var t,e,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(_l+"NaN")}for(t=Zn(o),ln=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=nc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=q1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Bf(o,a,s+2)).times(.5),nc(a.d).slice(0,s)===(e=nc(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Br(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(e!="9999")break;s+=4}return ln=!0,Br(n,r)};tt.times=tt.mul=function(t){var e,r,n,i,a,s,o,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,r=c.e+t.e,l=h.length,u=d.length,l<u&&(a=h,h=d,d=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+d[n]*h[i-n-1]+e,a[i--]=o%Fi|0,e=o/Fi|0;a[i]=(a[i]+e)%Fi|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,ln?Br(t,f.precision):t};tt.toDecimalPlaces=tt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(_c(t,0,z1),e===void 0?e=n.rounding:_c(e,0,8),Br(r,t+Zn(r)+1,e))};tt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ev(n,!0):(_c(t,0,z1),e===void 0?e=i.rounding:_c(e,0,8),n=Br(new i(n),t+1,e),r=Ev(n,!0,t+1)),r};tt.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Ev(i):(_c(t,0,z1),e===void 0?e=a.rounding:_c(e,0,8),n=Br(new a(i),t+Zn(i)+1,e),r=Ev(n.abs(),!1,t+Zn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};tt.toInteger=tt.toint=function(){var t=this,e=t.constructor;return Br(new e(t),Zn(t)+1,e.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(vo);if(o=new l(o),!o.s){if(t.s<1)throw Error(_l+"Infinity");return o}if(o.eq(vo))return o;if(n=l.precision,t.eq(vo))return Br(o,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=o.s,s){if((r=c<0?-c:c)<=Lue){for(i=new l(vo),e=Math.ceil(n/Xr+4),ln=!1;r%2&&(i=i.times(o),nW(i.d,e)),r=q1(r/2),r!==0;)o=o.times(o),nW(o.d,e);return ln=!0,t.s<0?new l(vo).div(i):Br(i,n)}}else if(a<0)throw Error(_l+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,ln=!1,i=t.times(e_(o,n+u)),ln=!0,i=$ue(i),i.s=a,i};tt.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Zn(i),n=Ev(i,r<=a.toExpNeg||r>=a.toExpPos)):(_c(t,1,z1),e===void 0?e=a.rounding:_c(e,0,8),i=Br(new a(i),t,e),r=Zn(i),n=Ev(i,t<=r||r<=a.toExpNeg,t)),n};tt.toSignificantDigits=tt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(_c(t,1,z1),e===void 0?e=n.rounding:_c(e,0,8)),Br(new n(r),t,e)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Zn(t),r=t.constructor;return Ev(t,e<=r.toExpNeg||e>=r.toExpPos)};function Bue(t,e){var r,n,i,a,s,o,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),ln?Br(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,i=s,o=l.length),s=Math.ceil(f/Xr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/Fi|0,l[a]%=Fi;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,ln?Br(e,f):e}function _c(t,e,r){if(t!==~~t||t<e||t>r)throw Error(nv+t)}function nc(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=Xr-n.length,r&&(a+=Lh(r)),a+=n;s=t[e],n=s+"",r=Xr-n.length,r&&(a+=Lh(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Bf=function(){function t(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%Fi|0,s=a/Fi|0;return s&&n.unshift(s),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*Fi+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,u,c,f,h,d,p,m,v,y,w,b,A,x,_,S,E,T=n.constructor,D=n.s==i.s?1:-1,N=n.d,P=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(_l+"Division by zero");for(l=n.e-i.e,S=P.length,x=N.length,d=new T(D),p=d.d=[],u=0;P[u]==(N[u]||0);)++u;if(P[u]>(N[u]||0)&&--l,a==null?w=a=T.precision:s?w=a+(Zn(n)-Zn(i))+1:w=a,w<0)return new T(0);if(w=w/Xr+2|0,u=0,S==1)for(c=0,P=P[0],w++;(u<x||c)&&w--;u++)b=c*Fi+(N[u]||0),p[u]=b/P|0,c=b%P|0;else{for(c=Fi/(P[0]+1)|0,c>1&&(P=t(P,c),N=t(N,c),S=P.length,x=N.length),A=S,m=N.slice(0,S),v=m.length;v<S;)m[v++]=0;E=P.slice(),E.unshift(0),_=P[0],P[1]>=Fi/2&&++_;do c=0,o=e(P,m,S,v),o<0?(y=m[0],S!=v&&(y=y*Fi+(m[1]||0)),c=y/_|0,c>1?(c>=Fi&&(c=Fi-1),f=t(P,c),h=f.length,v=m.length,o=e(f,m,h,v),o==1&&(c--,r(f,S<h?E:P,h))):(c==0&&(o=c=1),f=P.slice()),h=f.length,h<v&&f.unshift(0),r(m,f,v),o==-1&&(v=m.length,o=e(P,m,S,v),o<1&&(c++,r(m,S<v?E:P,v))),v=m.length):o===0&&(c++,m=[0]),p[u++]=c,o&&m[0]?m[v++]=N[A]||0:(m=[N[A]],v=1);while((A++<x||m[0]!==void 0)&&w--)}return p[0]||p.shift(),d.e=l,Br(d,s?a+Zn(d)+1:a)}}();function $ue(t,e){var r,n,i,a,s,o,l=0,u=0,c=t.constructor,f=c.precision;if(Zn(t)>16)throw Error(fj+Zn(t));if(!t.s)return new c(vo);for(ln=!1,o=f,s=new c(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(n=Math.log(vm(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new c(vo),c.precision=o;;){if(i=Br(i.times(t),o),r=r.times(++l),s=a.plus(Bf(i,r,o)),nc(s.d).slice(0,o)===nc(a.d).slice(0,o)){for(;u--;)a=Br(a.times(a),o);return c.precision=f,e==null?(ln=!0,Br(a,f)):a}a=s}}function Zn(t){for(var e=t.e*Xr,r=t.d[0];r>=10;r/=10)e++;return e}function pR(t,e,r){if(e>t.LN10.sd())throw ln=!0,r&&(t.precision=r),Error(_l+"LN10 precision limit exceeded");return Br(new t(t.LN10),e)}function Lh(t){for(var e="";t--;)e+="0";return e}function e_(t,e){var r,n,i,a,s,o,l,u,c,f=1,h=10,d=t,p=d.d,m=d.constructor,v=m.precision;if(d.s<1)throw Error(_l+(d.s?"NaN":"-Infinity"));if(d.eq(vo))return new m(0);if(e==null?(ln=!1,u=v):u=e,d.eq(10))return e==null&&(ln=!0),pR(m,u);if(u+=h,m.precision=u,r=nc(p),n=r.charAt(0),a=Zn(d),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)d=d.times(t),r=nc(d.d),n=r.charAt(0),f++;a=Zn(d),n>1?(d=new m("0."+r),a++):d=new m(n+"."+r.slice(1))}else return l=pR(m,u+2,v).times(a+""),d=e_(new m(n+"."+r.slice(1)),u-h).plus(l),m.precision=v,e==null?(ln=!0,Br(d,v)):d;for(o=s=d=Bf(d.minus(vo),d.plus(vo),u),c=Br(d.times(d),u),i=3;;){if(s=Br(s.times(c),u),l=o.plus(Bf(s,new m(i),u)),nc(l.d).slice(0,u)===nc(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(pR(m,u+2,v).times(a+""))),o=Bf(o,new m(f),u),m.precision=v,e==null?(ln=!0,Br(o,v)):o;o=l,i+=2}}function rW(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=q1(r/Xr),t.d=[],n=(r+1)%Xr,r<0&&(n+=Xr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Xr;n<i;)t.d.push(+e.slice(n,n+=Xr));e=e.slice(n),n=Xr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),ln&&(t.e>X2||t.e<-X2))throw Error(fj+r)}else t.s=0,t.e=0,t.d=[0];return t}function Br(t,e,r){var n,i,a,s,o,l,u,c,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=Xr,i=e,u=f[c=0];else{if(c=Math.ceil((n+1)/Xr),a=f.length,c>=a)return t;for(u=a=f[c],s=1;a>=10;a/=10)s++;n%=Xr,i=n-Xr+s}if(r!==void 0&&(a=vm(10,s-i-1),o=u/a%10|0,l=e<0||f[c+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?u/vm(10,s-i):0:f[c-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(a=Zn(t),f.length=1,e=e-a-1,f[0]=vm(10,(Xr-e%Xr)%Xr),t.e=q1(-e/Xr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=c,a=1,c--):(f.length=c+1,a=vm(10,Xr-n),f[c]=i>0?(u/vm(10,s-i)%vm(10,i)|0)*a:0),l)for(;;)if(c==0){(f[0]+=a)==Fi&&(f[0]=1,++t.e);break}else{if(f[c]+=a,f[c]!=Fi)break;f[c--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(ln&&(t.e>X2||t.e<-X2))throw Error(fj+Zn(t));return t}function jue(t,e){var r,n,i,a,s,o,l,u,c,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),ln?Br(e,d):e;if(l=t.d,f=e.d,n=e.e,u=t.e,l=l.slice(),s=u-n,s){for(c=s<0,c?(r=l,s=-s,o=f.length):(r=f,n=u,o=l.length),i=Math.max(Math.ceil(d/Xr),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,c=i<o,c&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){c=l[i]<f[i];break}s=0}for(c&&(r=l,l=f,f=r,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Fi-1;--l[a],l[i]+=Fi}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,ln?Br(e,d):e):new h(0)}function Ev(t,e,r){var n,i=Zn(t),a=nc(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Lh(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Lh(-i-1)+a,r&&(n=r-s)>0&&(a+=Lh(n))):i>=s?(a+=Lh(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Lh(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Lh(n))),t.s<0?"-"+a:a}function nW(t,e){if(t.length>e)return t.length=e,!0}function Vue(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(nv+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return rW(s,a.toString())}else if(typeof a!="string")throw Error(nv+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,dBe.test(a))rW(s,a);else throw Error(nv+a)}if(i.prototype=tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Vue,i.config=i.set=pBe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function pBe(t){if(!t||typeof t!="object")throw Error(_l+"Object expected");var e,r,n,i=["precision",1,z1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(q1(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(nv+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(nv+r+": "+n);return this}var hj=Vue(hBe);vo=new hj(1);const mr=hj;var mBe=t=>t,Uue={},zue=t=>t===Uue,iW=t=>function e(){return arguments.length===0||arguments.length===1&&zue(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},que=(t,e)=>t===1?e:iW(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==Uue).length;return a>=t?e(...n):que(t-a,iW(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var u=n.map(c=>zue(c)?o.shift():c);return e(...u,...o)}))}),gBe=t=>que(t.length,t),$B=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},vBe=gBe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),yBe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return mBe;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},jB=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function Hue(t){var e;return t===0?e=1:e=Math.floor(new mr(t).abs().log(10).toNumber())+1,e}function Wue(t,e,r){for(var n=new mr(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var Gue=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},Kue=(t,e,r)=>{if(t.lte(0))return new mr(0);var n=Hue(t.toNumber()),i=new mr(10).pow(n),a=t.div(i),s=n!==1?.05:.1,o=new mr(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return e?new mr(l.toNumber()):new mr(Math.ceil(l.toNumber()))},bBe=(t,e,r)=>{var n=new mr(1),i=new mr(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new mr(10).pow(Hue(t)-1),i=new mr(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new mr(Math.floor(t)))}else t===0?i=new mr(Math.floor((e-1)/2)):r||(i=new mr(Math.floor(t)));var s=Math.floor((e-1)/2),o=yBe(vBe(l=>i.add(new mr(l-s).mul(n)).toNumber()),$B);return o(0,e)},Xue=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new mr(0),tickMin:new mr(0),tickMax:new mr(0)};var s=Kue(new mr(r).sub(e).div(n-1),i,a),o;e<=0&&r>=0?o=new mr(0):(o=new mr(e).add(r).div(2),o=o.sub(new mr(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new mr(r).sub(o).div(s).toNumber()),c=l+u+1;return c>n?Xue(e,r,n,i,a+1):(c<n&&(u=r>0?u+(n-c):u,l=r>0?l:l+(n-c)),{step:s,tickMin:o.sub(new mr(l).mul(s)),tickMax:o.add(new mr(u).mul(s))})},wBe=function(e){var[r,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=Gue([r,n]);if(o===-1/0||l===1/0){var u=l===1/0?[o,...$B(0,i-1).map(()=>1/0)]:[...$B(0,i-1).map(()=>-1/0),l];return r>n?jB(u):u}if(o===l)return bBe(o,i,a);var{step:c,tickMin:f,tickMax:h}=Xue(o,l,s,a,0),d=Wue(f,h.add(new mr(.1).mul(c)),c);return r>n?jB(d):d},xBe=function(e,r){var[n,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Gue([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(r,2),u=Kue(new mr(o).sub(s).div(l-1),a,0),c=[...Wue(new mr(s),new mr(o),u),o];return a===!1&&(c=c.map(f=>Math.round(f))),n>i?jB(c):c},ABe=t=>t.rootProps.barCategoryGap,RI=t=>t.rootProps.stackOffset,Yue=t=>t.rootProps.reverseStackOrder,dj=t=>t.options.chartName,pj=t=>t.rootProps.syncId,Que=t=>t.rootProps.syncMethod,mj=t=>t.options.eventEmitter,ua={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Sf={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ho={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},FI=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},_Be={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sf.angleAxisId,includeHidden:!1,name:void 0,reversed:Sf.reversed,scale:Sf.scale,tick:Sf.tick,tickCount:void 0,ticks:void 0,type:Sf.type,unit:void 0},EBe={allowDataOverflow:ho.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ho.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ho.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ho.scale,tick:ho.tick,tickCount:ho.tickCount,ticks:void 0,type:ho.type,unit:void 0},SBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Sf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sf.scale,tick:Sf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},CBe={allowDataOverflow:ho.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ho.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ho.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ho.scale,tick:ho.tick,tickCount:ho.tickCount,ticks:void 0,type:"category",unit:void 0},gj=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?SBe:_Be,vj=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?CBe:EBe,LI=t=>t.polarOptions,yj=_e([dh,ph,va],SFe),Zue=_e([LI,yj],(t,e)=>{if(t!=null)return Ap(t.innerRadius,e,0)}),Jue=_e([LI,yj],(t,e)=>{if(t!=null)return Ap(t.outerRadius,e,e*.8)}),TBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},ece=_e([LI],TBe);_e([gj,ece],FI);var tce=_e([yj,Zue,Jue],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});_e([vj,tce],FI);var rce=_e([Zr,LI,Zue,Jue,dh,ph],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:u}=e;return{cx:Ap(s,i,i/2),cy:Ap(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),mi=(t,e)=>e,BI=(t,e,r)=>r;function nce(t){return t==null?void 0:t.id}function ice(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var c=nce(o);u.forEach((f,h)=>{var d=a==null||i?h:String(Qn(f,a,null)),p=Qn(f,o.dataKey,0),m;s.has(d)?m=s.get(d):m={},Object.assign(m,{[c]:p}),s.set(d,m)})}}),Array.from(s.values())}function bj(t){return t.stackId!=null&&t.dataKey!=null}var $I=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function jI(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function DBe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var gi=t=>{var e=Zr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},H1=t=>t.tooltip.settings.axisId;function aW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aW(Object(r),!0).forEach(function(n){NBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NBe(t,e,r){return(e=PBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PBe(t){var e=MBe(t,"string");return typeof e=="symbol"?e:e+""}function MBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VB=[0,"auto"],Si={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ace=(t,e)=>t.cartesianAxis.xAxis[e],gh=(t,e)=>{var r=ace(t,e);return r??Si},Ci={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:VB,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:IS},sce=(t,e)=>t.cartesianAxis.yAxis[e],vh=(t,e)=>{var r=sce(t,e);return r??Ci},oce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},wj=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??oce},ps=(t,e,r)=>{switch(e){case"xAxis":return gh(t,r);case"yAxis":return vh(t,r);case"zAxis":return wj(t,r);case"angleAxis":return gj(t,r);case"radiusAxis":return vj(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},IBe=(t,e,r)=>{switch(e){case"xAxis":return gh(t,r);case"yAxis":return vh(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},jS=(t,e,r)=>{switch(e){case"xAxis":return gh(t,r);case"yAxis":return vh(t,r);case"angleAxis":return gj(t,r);case"radiusAxis":return vj(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},lce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function uce(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var xj=t=>t.graphicalItems.cartesianItems,OBe=_e([mi,BI],uce),cce=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),VS=_e([xj,ps,OBe],cce,{memoizeOptions:{resultEqualityCheck:jI}}),fce=_e([VS],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(bj)),hce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),kBe=_e([VS],hce),dce=t=>t.map(e=>e.data).filter(Boolean).flat(1),RBe=_e([VS],dce,{memoizeOptions:{resultEqualityCheck:jI}}),pce=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},Aj=_e([RBe,kI],pce),mce=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Qn(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:Qn(i,n)}))):t.map(n=>({value:n})),VI=_e([Aj,ps,VS],mce);function gce(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function rN(t){if(xc(t)||t instanceof Date){var e=Number(t);if(Ui(e))return e}}function sW(t){if(Array.isArray(t)){var e=[rN(t[0]),rN(t[1])];return _p(e)?e:void 0}var r=rN(t);if(r!=null)return[r,r]}function sh(t){return t.map(rN).filter(GMe)}function FBe(t,e,r){return!r||typeof e!="number"||wc(e)?[]:r.length?sh(r.flatMap(n=>{var i=Qn(t,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Ui(a)||!Ui(s)))return[e-a,e+s]})):[]}var vi=t=>{var e=gi(t),r=H1(t);return jS(t,e,r)},US=_e([vi],t=>t==null?void 0:t.dataKey),LBe=_e([fce,kI,vi],ice),vce=(t,e,r,n)=>{var i={},a=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,u=n?[...l].reverse():l,c=u.map(nce);return[o,{stackedData:cke(t,c,r),graphicalItems:u}]}))},BBe=_e([LBe,fce,RI,Yue],vce),yce=(t,e,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(n==null&&r!=="zAxis"){var s=dke(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},$Be=_e([ps],t=>t.allowDataOverflow),_j=t=>{var e;if(t==null||!("domain"in t))return VB;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=sh(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:VB},bce=_e([ps],_j),wce=_e([bce,$Be],Fue),jBe=_e([BBe,Vp,mi,wce],yce,{memoizeOptions:{resultEqualityCheck:$I}}),Ej=t=>t.errorBars,VBe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>gce(r,n)),Q2=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},xce=(t,e,r,n,i)=>{var a,s;if(r.length>0&&t.forEach(o=>{r.forEach(l=>{var u,c,f=(u=n[l.id])===null||u===void 0?void 0:u.filter(y=>gce(i,y)),h=Qn(o,(c=e.dataKey)!==null&&c!==void 0?c:l.dataKey),d=FBe(o,h,f);if(d.length>=2){var p=Math.min(...d),m=Math.max(...d);(a==null||p<a)&&(a=p),(s==null||m>s)&&(s=m)}var v=sW(h);v!=null&&(a=a==null?v[0]:Math.min(a,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=sW(Qn(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),Ui(a)&&Ui(s))return[a,s]},UBe=_e([Aj,ps,kBe,Ej,mi],xce,{memoizeOptions:{resultEqualityCheck:$I}});function zBe(t){var{value:e}=t;if(xc(e)||e instanceof Date)return e}var qBe=(t,e,r)=>{var n=t.map(zBe).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&hoe(n))?tue(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Ace=t=>t.referenceElements.dots,W1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),HBe=_e([Ace,mi,BI],W1),_ce=t=>t.referenceElements.areas,WBe=_e([_ce,mi,BI],W1),Ece=t=>t.referenceElements.lines,GBe=_e([Ece,mi,BI],W1),Sce=(t,e)=>{var r=sh(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KBe=_e(HBe,mi,Sce),Cce=(t,e)=>{var r=sh(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},XBe=_e([WBe,mi],Cce);function YBe(t){var e;if(t.x!=null)return sh([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:sh(r)}function QBe(t){var e;if(t.y!=null)return sh([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:sh(r)}var Tce=(t,e)=>{var r=t.flatMap(n=>e==="xAxis"?YBe(n):QBe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ZBe=_e([GBe,mi],Tce),JBe=_e(KBe,ZBe,XBe,(t,e,r)=>Q2(t,r,e)),Dce=(t,e,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=l?Q2(n,a,i):Q2(a,i);return fBe(e,u,t.allowDataOverflow)},e4e=_e([ps,bce,wce,jBe,UBe,JBe,Zr,mi],Dce,{memoizeOptions:{resultEqualityCheck:$I}}),t4e=[0,1],Nce=(t,e,r,n,i,a,s)=>{if(!((t==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=t,u=Bp(e,a);if(u&&o==null){var c;return tue(0,(c=r==null?void 0:r.length)!==null&&c!==void 0?c:0)}return l==="category"?qBe(n,t,u):i==="expand"?t4e:s}},Sj=_e([ps,Zr,Aj,VI,RI,mi,e4e],Nce),Pce=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(TS(a));return o in Cx?o:"point"}}},zS=_e([ps,Zr,lce,dj,mi],Pce);function r4e(t){if(t!=null){if(t in Cx)return Cx[t]();var e="scale".concat(TS(t));if(e in Cx)return Cx[e]()}}function Cj(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=r4e(e);if(i!=null){var a=i.domain(r).range(n);return ske(a),a}}}var Mce=(t,e,r)=>{var n=_j(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&_p(t))return wBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&_p(t))return xBe(t,e.tickCount,e.allowDecimals)}},Tj=_e([Sj,jS,zS],Mce),Ice=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&_p(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],s=e[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},n4e=_e([ps,Sj,Tj,mi],Ice),i4e=_e(VI,ps,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(sh(t.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),Oce=_e(i4e,Zr,ABe,va,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!Ui(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=Ap(r,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),a4e=(t,e)=>{var r=gh(t,e);return r==null||typeof r.padding!="string"?0:Oce(t,"xAxis",e,r.padding)},s4e=(t,e)=>{var r=vh(t,e);return r==null||typeof r.padding!="string"?0:Oce(t,"yAxis",e,r.padding)},o4e=_e(gh,a4e,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),l4e=_e(vh,s4e,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),u4e=_e([va,o4e,wI,bI,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),c4e=_e([va,Zr,l4e,wI,bI,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),qS=(t,e,r,n)=>{var i;switch(e){case"xAxis":return u4e(t,r,n);case"yAxis":return c4e(t,r,n);case"zAxis":return(i=wj(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return ece(t);case"radiusAxis":return tce(t,r);default:return}},kce=_e([ps,qS],FI),G1=_e([ps,zS,n4e,kce],Cj);_e([VS,Ej,mi],VBe);function Rce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var UI=(t,e)=>e,zI=(t,e,r)=>r,f4e=_e(vI,UI,zI,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Rce)),h4e=_e(yI,UI,zI,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Rce)),Fce=(t,e)=>({width:t.width,height:e.height}),d4e=(t,e)=>{var r=typeof e.width=="number"?e.width:IS;return{width:r,height:t.height}},p4e=_e(va,gh,Fce),m4e=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},g4e=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},v4e=_e(ph,va,f4e,UI,zI,(t,e,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=Fce(e,o);s==null&&(s=m4e(e,n,t));var u=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(u)*l.height,s+=(u?-1:1)*l.height}),a}),y4e=_e(dh,va,h4e,UI,zI,(t,e,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=d4e(e,o);s==null&&(s=g4e(e,n,t));var u=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(u)*l.width,s+=(u?-1:1)*l.width}),a}),b4e=(t,e)=>{var r=gh(t,e);if(r!=null)return v4e(t,r.orientation,r.mirror)},w4e=_e([va,gh,b4e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),x4e=(t,e)=>{var r=vh(t,e);if(r!=null)return y4e(t,r.orientation,r.mirror)},A4e=_e([va,vh,x4e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),_4e=_e(va,vh,(t,e)=>{var r=typeof e.width=="number"?e.width:IS;return{width:r,height:t.height}}),Lce=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Bp(t,n),l=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&hoe(l))return l}},Dj=_e([Zr,VI,ps,mi],Lce),Bce=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Bp(t,n);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},Nj=_e([Zr,VI,jS,mi],Bce),oW=_e([Zr,IBe,zS,G1,Dj,Nj,qS,Tj,mi],(t,e,r,n,i,a,s,o,l)=>{if(e!=null){var u=Bp(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),E4e=(t,e,r,n,i,a,s,o,l)=>{if(!(e==null||n==null)){var u=Bp(t,l),{type:c,ticks:f,tickCount:h}=e,d=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/d:0;p=l==="angleAxis"&&a!=null&&a.length>=2?fl(a[0]-a[1])*2*p:p;var m=f||i;if(m){var v=m.map((y,w)=>{var b=s?s.indexOf(y):y;return{index:w,coordinate:n(b)+p,value:y,offset:p}});return v.filter(y=>Ui(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+p,value:y,index:w,offset:p})).filter(y=>Ui(y.coordinate)):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+p,value:y,offset:p})):n.domain().map((y,w)=>({coordinate:n(y)+p,value:s?s[y]:y,index:w,offset:p}))}},$ce=_e([Zr,jS,zS,G1,Tj,qS,Dj,Nj,mi],E4e),S4e=(t,e,r,n,i,a,s)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var o=Bp(t,s),{tickCount:l}=e,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?fl(n[0]-n[1])*2*u:u,o&&a?a.map((c,f)=>({coordinate:r(c)+u,value:c,index:f,offset:u})):r.ticks?r.ticks(l).map(c=>({coordinate:r(c)+u,value:c,offset:u})):r.domain().map((c,f)=>({coordinate:r(c)+u,value:i?i[c]:c,index:f,offset:u}))}},qI=_e([Zr,jS,G1,qS,Dj,Nj,mi],S4e),HI=_e(ps,G1,(t,e)=>{if(!(t==null||e==null))return Y2(Y2({},t),{},{scale:e})}),C4e=_e([ps,zS,Sj,kce],Cj),T4e=_e((t,e,r)=>wj(t,r),C4e,(t,e)=>{if(!(t==null||e==null))return Y2(Y2({},t),{},{scale:e})}),D4e=_e([Zr,vI,yI],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),jce=t=>t.options.defaultTooltipEventType,Vce=t=>t.options.validateTooltipEventTypes;function Uce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function Pj(t,e){var r=jce(t),n=Vce(t);return Uce(e,r,n)}function N4e(t){return st(e=>Pj(e,t))}var zce=(t,e)=>{var r,n=Number(e);if(!(wc(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},P4e=t=>t.tooltip.settings,Kh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},M4e={itemInteraction:{click:Kh,hover:Kh},axisInteraction:{click:Kh,hover:Kh},keyboardInteraction:Kh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qce=Vs({name:"tooltip",initialState:M4e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:nn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,i=su(t).tooltipItemPayloads.indexOf(r);i>-1&&(t.tooltipItemPayloads[i]=n)},prepare:nn()},removeTooltipEntrySettings:{reducer(t,e){var r=su(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:nn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:I4e,replaceTooltipEntrySettings:O4e,removeTooltipEntrySettings:k4e,setTooltipSettingsState:R4e,setActiveMouseOverItemIndex:Hce,mouseLeaveItem:F4e,mouseLeaveChart:Wce,setActiveClickItemIndex:L4e,setMouseOverAxisIndex:Gce,setMouseClickAxisIndex:B4e,setSyncInteraction:UB,setKeyboardInteraction:zB}=qce.actions,$4e=qce.reducer;function lW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lW(Object(r),!0).forEach(function(n){j4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j4e(t,e,r){return(e=V4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V4e(t){var e=U4e(t,"string");return typeof e=="symbol"?e:e+""}function U4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z4e(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function q4e(t){return t.index!=null}var Kce=(t,e,r,n)=>{if(e==null)return Kh;var i=z4e(t,e,r);if(i==null)return Kh;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(q4e(i)){if(a)return xT(xT({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return xT(xT({},Kh),{},{coordinate:i.coordinate})};function H4e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function W4e(t,e){var r=H4e(t),n=e[0],i=e[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function G4e(t,e,r){if(r==null||e==null)return!0;var n=Qn(t,e);return n==null||!_p(r)?!0:W4e(n,r)}var Mj=(t,e,r,n)=>{var i=t==null?void 0:t.index;if(i==null)return null;var a=Number(i);if(!Ui(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(a,o)),u=e[l];return u==null||G4e(u,r,n)?String(l):null},Xce=(t,e,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var c=i==null?void 0:i[Number(a)];if(c)switch(r){case"horizontal":return{x:c.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:c.coordinate}}}},Yce=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},HS=t=>t.options.tooltipPayloadSearcher,K1=t=>t.tooltip;function uW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uW(Object(r),!0).forEach(function(n){K4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K4e(t,e,r){return(e=X4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X4e(t){var e=Y4e(t,"string");return typeof e=="symbol"?e:e+""}function Y4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q4e(t,e){return t??e}var Qce=(t,e,r,n,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:c}=r,f=[];return t.reduce((h,d)=>{var p,{dataDefinedOnItem:m,settings:v}=d,y=Q4e(m,o),w=Array.isArray(y)?xle(y,u,c):y,b=(p=v==null?void 0:v.dataKey)!==null&&p!==void 0?p:n,A=v==null?void 0:v.nameKey,x;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?x=doe(w,n,i):x=a(w,e,l,A),Array.isArray(x))x.forEach(S=>{var E=cW(cW({},v),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});h.push($q({tooltipEntrySettings:E,dataKey:S.dataKey,payload:S.payload,value:Qn(S.payload,S.dataKey),name:S.name}))});else{var _;h.push($q({tooltipEntrySettings:v,dataKey:b,payload:x,value:Qn(x,b),name:(_=Qn(x,A))!==null&&_!==void 0?_:v==null?void 0:v.name}))}return h},f)}},Ij=_e([vi,Zr,lce,dj,gi],Pce),Z4e=_e([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),J4e=_e([gi,H1],uce),WS=_e([Z4e,vi,J4e],cce,{memoizeOptions:{resultEqualityCheck:jI}}),e$e=_e([WS],t=>t.filter(bj)),t$e=_e([WS],dce,{memoizeOptions:{resultEqualityCheck:jI}}),X1=_e([t$e,Vp],pce),r$e=_e([e$e,Vp,vi],ice),Oj=_e([X1,vi,WS],mce),Zce=_e([vi],_j),n$e=_e([vi],t=>t.allowDataOverflow),Jce=_e([Zce,n$e],Fue),i$e=_e([WS],t=>t.filter(bj)),a$e=_e([r$e,i$e,RI,Yue],vce),s$e=_e([a$e,Vp,gi,Jce],yce),o$e=_e([WS],hce),l$e=_e([X1,vi,o$e,Ej,gi],xce,{memoizeOptions:{resultEqualityCheck:$I}}),u$e=_e([Ace,gi,H1],W1),c$e=_e([u$e,gi],Sce),f$e=_e([_ce,gi,H1],W1),h$e=_e([f$e,gi],Cce),d$e=_e([Ece,gi,H1],W1),p$e=_e([d$e,gi],Tce),m$e=_e([c$e,p$e,h$e],Q2),g$e=_e([vi,Zce,Jce,s$e,l$e,m$e,Zr,gi],Dce),GS=_e([vi,Zr,X1,Oj,RI,gi,g$e],Nce),v$e=_e([GS,vi,Ij],Mce),y$e=_e([vi,GS,v$e,gi],Ice),efe=t=>{var e=gi(t),r=H1(t),n=!1;return qS(t,e,r,n)},tfe=_e([vi,efe],FI),rfe=_e([vi,Ij,y$e,tfe],Cj),b$e=_e([Zr,Oj,vi,gi],Lce),w$e=_e([Zr,Oj,vi,gi],Bce),x$e=(t,e,r,n,i,a,s,o)=>{if(e){var{type:l}=e,u=Bp(t,o);if(n){var c=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/c:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?fl(i[0]-i[1])*2*f:f,u&&s?s.map((h,d)=>({coordinate:n(h)+f,value:h,index:d,offset:f})):n.domain().map((h,d)=>({coordinate:n(h)+f,value:a?a[h]:h,index:d,offset:f}))}}},yh=_e([Zr,vi,Ij,rfe,efe,b$e,w$e,gi],x$e),kj=_e([jce,Vce,P4e],(t,e,r)=>Uce(r.shared,t,e)),nfe=t=>t.tooltip.settings.trigger,Rj=t=>t.tooltip.settings.defaultIndex,KS=_e([K1,kj,nfe,Rj],Kce),v1=_e([KS,X1,US,GS],Mj),ife=_e([yh,v1],zce),A$e=_e([KS],t=>{if(t)return t.dataKey});_e([KS],t=>{if(t)return t.graphicalItemId});var afe=_e([K1,kj,nfe,Rj],Yce),_$e=_e([dh,ph,Zr,va,yh,Rj,afe,HS],Xce),E$e=_e([KS,_$e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),S$e=_e([KS],t=>t.active),C$e=_e([afe,v1,Vp,US,ife,HS,kj],Qce),T$e=_e([C$e],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function fW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fW(Object(r),!0).forEach(function(n){D$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D$e(t,e,r){return(e=N$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N$e(t){var e=P$e(t,"string");return typeof e=="symbol"?e:e+""}function P$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M$e=()=>st(vi),I$e=()=>{var t=M$e(),e=st(yh),r=st(rfe);return P2(!t||!r?void 0:hW(hW({},t),{},{scale:r}),e)};function dW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dW(Object(r),!0).forEach(function(n){O$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O$e(t,e,r){return(e=k$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k$e(t){var e=R$e(t,"string");return typeof e=="symbol"?e:e+""}function R$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F$e=(t,e,r,n)=>{var i=e.find(a=>a&&a.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},L$e=(t,e,r,n)=>{var i=e.find(u=>u&&u.index===r);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=n;return sy(sy(sy({},n),la(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return sy(sy(sy({},n),la(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function B$e(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var sfe=(t,e,r,n,i)=>{var a,s=-1,o=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,c=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(fl(c-u)!==fl(f-c)){var d=[];if(fl(f-c)===fl(i[1]-i[0])){h=f;var p=c+i[1]-i[0];d[0]=Math.min(p,(p+u)/2),d[1]=Math.max(p,(p+u)/2)}else{h=u;var m=f+i[1]-i[0];d[0]=Math.min(c,(m+c)/2),d[1]=Math.max(c,(m+c)/2)}var v=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(t>v[0]&&t<=v[1]||t>=d[0]&&t<=d[1]){({index:s}=r[l]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(t>(y+c)/2&&t<=(w+c)/2){({index:s}=r[l]);break}}}else if(e){for(var b=0;b<o;b++)if(b===0&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b>0&&b<o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b===o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2){({index:s}=e[b]);break}}return s},$$e=()=>st(dj),Fj=(t,e)=>e,ofe=(t,e,r)=>r,Lj=(t,e,r,n)=>n,j$e=_e(yh,t=>oI(t,e=>e.coordinate)),Bj=_e([K1,Fj,ofe,Lj],Kce),$j=_e([Bj,X1,US,GS],Mj),V$e=(t,e,r)=>{if(e!=null){var n=K1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},lfe=_e([K1,Fj,ofe,Lj],Yce),Z2=_e([dh,ph,Zr,va,yh,Lj,lfe,HS],Xce),U$e=_e([Bj,Z2],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),ufe=_e([yh,$j],zce),z$e=_e([lfe,$j,Vp,US,ufe,HS,Fj],Qce),q$e=_e([Bj,$j],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),H$e=(t,e,r,n,i,a,s)=>{if(!(!t||!r||!n||!i)&&B$e(t,s)){var o=pke(t,e),l=sfe(o,a,i,r,n),u=F$e(e,i,l,t);return{activeIndex:String(l),activeCoordinate:u}}},W$e=(t,e,r,n,i,a,s)=>{if(!(!t||!n||!i||!a||!r)){var o=PFe(t,r);if(o){var l=mke(o,e),u=sfe(l,s,a,n,i),c=L$e(e,a,u,o);return{activeIndex:String(u),activeCoordinate:c}}}},G$e=(t,e,r,n,i,a,s,o)=>{if(!(!t||!e||!n||!i||!a))return e==="horizontal"||e==="vertical"?H$e(t,e,n,i,a,s,o):W$e(t,e,r,n,i,a,s)},K$e=_e(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElementId:n.elementId}}),X$e=_e(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(ua)),r=Array.from(new Set(e));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:DBe}});function pW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pW(Object(r),!0).forEach(function(n){Y$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y$e(t,e,r){return(e=Q$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q$e(t){var e=Z$e(t,"string");return typeof e=="symbol"?e:e+""}function Z$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J$e={},e5e={zIndexMap:Object.values(ua).reduce((t,e)=>mW(mW({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),J$e)},t5e=new Set(Object.values(ua));function r5e(t){return t5e.has(t)}var cfe=Vs({name:"zIndex",initialState:e5e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:nn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!r5e(r)&&delete t.zIndexMap[r])},prepare:nn()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r,elementId:n,isPanorama:i}=e.payload;t.zIndexMap[r]?i?t.zIndexMap[r].panoramaElementId=n:t.zIndexMap[r].elementId=n:t.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:nn()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:nn()}}}),{registerZIndexPortal:n5e,unregisterZIndexPortal:i5e,registerZIndexPortalId:a5e,unregisterZIndexPortalId:s5e}=cfe.actions,o5e=cfe.reducer;function mu(t){var{zIndex:e,children:r}=t,n=Uke(),i=n&&e!==void 0&&e!==0,a=Va(),s=bn();O.useLayoutEffect(()=>i?(s(n5e({zIndex:e})),()=>{s(i5e({zIndex:e}))}):DS,[s,e,i]);var o=st(u=>K$e(u,e,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?mM.createPortal(r,l):null}function qB(){return qB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qB.apply(null,arguments)}function gW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gW(Object(r),!0).forEach(function(n){l5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l5e(t,e,r){return(e=u5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u5e(t){var e=c5e(t,"string");return typeof e=="symbol"?e:e+""}function c5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f5e(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return O.isValidElement(e)?O.cloneElement(e,n):O.createElement(r,n)}function h5e(t){var e,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:u,chartName:c}=t,f=r,h=n,d=i;if(!l||!f||c!=="ScatterChart"&&u!=="axis")return null;var p,m,v;if(c==="ScatterChart")p=f,m=qRe,v=ua.cursorLine;else if(c==="BarChart")p=HRe(o,f,a,s),m=Kle,v=ua.cursorRectangle;else if(o==="radial"&&moe(f)){var{cx:y,cy:w,radius:b,startAngle:A,endAngle:x}=Xle(f);p={cx:y,cy:w,startAngle:A,endAngle:x,innerRadius:b,outerRadius:b},m=Qle,v=ua.cursorLine}else p={points:kFe(o,f,a)},m=V6,v=ua.cursorLine;var _=typeof l=="object"&&"className"in l?l.className:void 0,S=AT(AT(AT(AT({stroke:"#ccc",pointerEvents:"none"},a),p),CS(l)),{},{payload:h,payloadIndex:d,className:wr("recharts-tooltip-cursor",_)});return O.createElement(mu,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},O.createElement(f5e,{cursor:l,cursorComp:m,cursorProps:S}))}function d5e(t){var e=I$e(),r=Rle(),n=xI(),i=$$e();return e==null||r==null||n==null||i==null?null:O.createElement(h5e,qB({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var ffe=O.createContext(null),p5e=()=>O.useContext(ffe),hfe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||l,h),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,h,d,p){var m=r?r+u:u;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,h),!0;case 5:return v.fn.call(v.context,c,f,h,d),!0;case 6:return v.fn.call(v.context,c,f,h,d,p),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var A=v.length,x;for(b=0;b<A;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,f);break;case 4:v[b].fn.call(v[b].context,c,f,h);break;default:if(!w)for(x=1,w=new Array(y-1);x<y;x++)w[x-1]=arguments[x];v[b].fn.apply(v[b].context,w)}}return!0},o.prototype.on=function(u,c,f){return a(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return a(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,h){var d=r?r+u:u;if(!this._events[d])return this;if(!c)return s(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&s(this,d);else{for(var m=0,v=[],y=p.length;m<y;m++)(p[m].fn!==c||h&&!p[m].once||f&&p[m].context!==f)&&v.push(p[m]);v.length?this._events[d]=v.length===1?v[0]:v:s(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(hfe);var m5e=hfe.exports;const g5e=Sl(m5e);var t_=new g5e,HB="recharts.syncEvent.tooltip",vW="recharts.syncEvent.brush";function jj(t,e){if(e){var r=Number.parseInt(e,10);if(!wc(r))return t==null?void 0:t[r]}}var v5e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},dfe=Vs({name:"options",initialState:v5e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),y5e=dfe.reducer,{createEventEmitter:b5e}=dfe.actions;function w5e(t){return t.tooltip.syncInteraction}var x5e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},pfe=Vs({name:"chartData",initialState:x5e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:yW,setDataStartEndIndexes:A5e,setComputedData:Vdt}=pfe.actions,_5e=pfe.reducer,E5e=["x","y"];function bW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bW(Object(r),!0).forEach(function(n){S5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S5e(t,e,r){return(e=C5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C5e(t){var e=T5e(t,"string");return typeof e=="symbol"?e:e+""}function T5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D5e(t,e){if(t==null)return{};var r,n,i=N5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function N5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function P5e(){var t=st(pj),e=st(mj),r=bn(),n=st(Que),i=st(yh),a=xI(),s=OS(),o=st(l=>l.rootProps.className);O.useEffect(()=>{if(t==null)return DS;var l=(u,c,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(s&&c!==null&&c!==void 0&&(h=c.payload)!==null&&h!==void 0&&h.coordinate&&c.payload.sourceViewBox){var d=c.payload.coordinate,{x:p,y:m}=d,v=D5e(d,E5e),{x:y,y:w,width:b,height:A}=c.payload.sourceViewBox,x=oy(oy({},v),{},{x:s.x+(b?(p-y)/b:0)*s.width,y:s.y+(A?(m-w)/A:0)*s.height});r(oy(oy({},c),{},{payload:oy(oy({},c.payload),{},{coordinate:x})}))}else r(c);return}if(i!=null){var _;if(typeof n=="function"){var S={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},E=n(i,S);_=i[E]}else n==="value"&&(_=i.find(k=>String(k.value)===c.payload.label));var{coordinate:T}=c.payload;if(_==null||c.payload.active===!1||T==null||s==null){r(UB({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:N}=T,P=Math.min(D,s.x+s.width),M=Math.min(N,s.y+s.height),j={x:a==="horizontal"?_.coordinate:P,y:a==="horizontal"?M:_.coordinate},K=UB({active:c.payload.active,coordinate:j,dataKey:c.payload.dataKey,index:String(_.index),label:c.payload.label,sourceViewBox:c.payload.sourceViewBox,graphicalItemId:c.payload.graphicalItemId});r(K)}}};return t_.on(HB,l),()=>{t_.off(HB,l)}},[o,r,e,t,n,i,a,s])}function M5e(){var t=st(pj),e=st(mj),r=bn();O.useEffect(()=>{if(t==null)return DS;var n=(i,a,s)=>{e!==s&&t===i&&r(A5e(a))};return t_.on(vW,n),()=>{t_.off(vW,n)}},[r,e,t])}function I5e(){var t=bn();O.useEffect(()=>{t(b5e())},[t]),P5e(),M5e()}function O5e(t,e,r,n,i,a){var s=st(d=>V$e(d,t,e)),o=st(mj),l=st(pj),u=st(Que),c=st(w5e),f=c==null?void 0:c.active,h=OS();O.useEffect(()=>{if(!f&&l!=null&&o!=null){var d=UB({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});t_.emit(HB,l,d,o)}},[f,r,s,i,n,o,l,u,a,h])}function wW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wW(Object(r),!0).forEach(function(n){k5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k5e(t,e,r){return(e=R5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R5e(t){var e=F5e(t,"string");return typeof e=="symbol"?e:e+""}function F5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L5e(t){return t.dataKey}function B5e(t,e){return O.isValidElement(t)?O.cloneElement(t,e):typeof t=="function"?O.createElement(t,e):O.createElement(_Re,e)}var AW=[],$5e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function om(t){var e,r,n=qi(t,$5e),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:u,isAnimationActive:c,offset:f,payloadUniqBy:h,position:d,reverseDirection:p,useTranslate3d:m,wrapperStyle:v,cursor:y,shared:w,trigger:b,defaultIndex:A,portal:x,axisId:_}=n,S=bn(),E=typeof A=="number"?String(A):A;O.useEffect(()=>{S(R4e({shared:w,trigger:b,axisId:_,active:i,defaultIndex:E}))},[S,w,b,_,i,E]);var T=OS(),D=zle(),N=N4e(w),{activeIndex:P,isActive:M}=(e=st(de=>q$e(de,N,b,E)))!==null&&e!==void 0?e:{},j=st(de=>z$e(de,N,b,E)),K=st(de=>ufe(de,N,b,E)),k=st(de=>U$e(de,N,b,E)),V=j,q=p5e(),H=(r=i??M)!==null&&r!==void 0?r:!1,[te,ue]=Hoe([V,H]),re=N==="axis"?K:void 0;O5e(N,b,k,re,P,H);var L=x??q;if(L==null||T==null||N==null)return null;var ie=V??AW;H||(ie=AW),u&&ie.length&&(ie=Ooe(ie.filter(de=>de.value!=null&&(de.hide!==!0||n.includeHidden)),h,L5e));var X=ie.length>0,pe=O.createElement(PRe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:c,active:H,coordinate:k,hasPayload:X,offset:f,position:d,reverseDirection:p,useTranslate3d:m,viewBox:T,wrapperStyle:v,lastBoundingBox:te,innerRef:ue,hasPortalFromProps:!!x},B5e(l,xW(xW({},n),{},{payload:ie,label:re,active:H,activeIndex:P,coordinate:k,accessibilityLayer:D})));return O.createElement(O.Fragment,null,mM.createPortal(pe,L),H&&O.createElement(d5e,{cursor:y,tooltipEventType:N,coordinate:k,payload:ie,index:P}))}var mfe=t=>null;mfe.displayName="Cell";function j5e(t,e,r){return(e=V5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V5e(t){var e=U5e(t,"string");return typeof e=="symbol"?e:e+""}function U5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class z5e{constructor(e){j5e(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function _W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function q5e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_W(Object(r),!0).forEach(function(n){H5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_W(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function H5e(t,e,r){return(e=W5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W5e(t){var e=G5e(t,"string");return typeof e=="symbol"?e:e+""}function G5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K5e={cacheSize:2e3,enableCache:!0},gfe=q5e({},K5e),EW=new z5e(gfe.cacheSize),X5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SW="recharts_measurement_span";function Y5e(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var CW=(t,e)=>{try{var r=document.getElementById(SW);r||(r=document.createElement("span"),r.setAttribute("id",SW),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,X5e,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Yx=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||RS.isSsr)return{width:0,height:0};if(!gfe.enableCache)return CW(e,r);var n=Y5e(e,r),i=EW.get(n);if(i)return i;var a=CW(e,r);return EW.set(n,a),a},TW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Q5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Z5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vfe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},J5e=Object.keys(vfe),Xy="NaN";function e6e(t,e){return t*vfe[e]}class Cs{static parse(e){var r,[,n,i]=(r=Z5e.exec(e))!==null&&r!==void 0?r:[];return new Cs(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,wc(e)&&(this.unit=""),r!==""&&!Q5e.test(r)&&(this.num=NaN,this.unit=""),J5e.includes(r)&&(this.num=e6e(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Cs(NaN,""):new Cs(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Cs(NaN,""):new Cs(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Cs(NaN,""):new Cs(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Cs(NaN,""):new Cs(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return wc(this.num)}}function yfe(t){if(t.includes(Xy))return Xy;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=TW.exec(e))!==null&&r!==void 0?r:[],s=Cs.parse(n??""),o=Cs.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return Xy;e=e.replace(TW,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,c,f,h]=(u=DW.exec(e))!==null&&u!==void 0?u:[],d=Cs.parse(c??""),p=Cs.parse(h??""),m=f==="+"?d.add(p):d.subtract(p);if(m.isNaN())return Xy;e=e.replace(DW,m.toString())}return e}var NW=/\(([^()]*)\)/;function t6e(t){for(var e=t,r;(r=NW.exec(e))!=null;){var[,n]=r;e=e.replace(NW,yfe(n))}return e}function r6e(t){var e=t.replace(/\s+/g,"");return e=t6e(e),e=yfe(e),e}function n6e(t){try{return r6e(t)}catch{return Xy}}function mR(t){var e=n6e(t.slice(5,-1));return e===Xy?"":e}var i6e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],a6e=["dx","dy","angle","className","breakAll"];function WB(){return WB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WB.apply(null,arguments)}function PW(t,e){if(t==null)return{};var r,n,i=s6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function s6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bfe=/[ \f\n\r\t\v\u2028\u2029]+/,wfe=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];sn(e)||(r?i=e.toString().split(""):i=e.toString().split(bfe));var a=i.map(o=>({word:o,width:Yx(o,n).width})),s=r?0:Yx("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function o6e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var xfe=(t,e,r,n)=>t.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(e==null||n||l.width+o+r<Number(e)))l.words.push(s),l.width+=o+r;else{var u={words:[s],width:o};i.push(u)}return i},[]),Afe=t=>t.reduce((e,r)=>e.width>r.width?e:r),l6e="",MW=(t,e,r,n,i,a,s,o)=>{var l=t.slice(0,e),u=wfe({breakAll:r,style:n,children:l+l6e});if(!u)return[!1,[]];var c=xfe(u.wordsWithComputedWidth,a,s,o),f=c.length>i||Afe(c).width>Number(a);return[f,c]},u6e=(t,e,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=t,u=ut(a),c=String(s),f=xfe(e,n,r,i);if(!u||i)return f;var h=f.length>a||Afe(f).width>Number(n);if(!h)return f;for(var d=0,p=c.length-1,m=0,v;d<=p&&m<=c.length-1;){var y=Math.floor((d+p)/2),w=y-1,[b,A]=MW(c,w,l,o,a,n,r,i),[x]=MW(c,y,l,o,a,n,r,i);if(!b&&!x&&(d=y+1),b&&x&&(p=y-1),!b&&x){v=A;break}m++}return v||f},IW=t=>{var e=sn(t)?[]:t.toString().split(bfe);return[{words:e,width:void 0}]},c6e=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=t;if((e||r)&&!RS.isSsr){var o,l,u=wfe({breakAll:a,children:n,style:i});if(u){var{wordsWithComputedWidth:c,spaceWidth:f}=u;o=c,l=f}else return IW(n);return u6e({breakAll:a,children:n,maxLines:s,style:i},o,l,e,!!r)}return IW(n)},_fe="#808080",f6e={angle:0,breakAll:!1,capHeight:"0.71em",fill:_fe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Vj=O.forwardRef((t,e)=>{var r=qi(t,f6e),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:u,verticalAnchor:c}=r,f=PW(r,i6e),h=O.useMemo(()=>c6e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:d,dy:p,angle:m,className:v,breakAll:y}=f,w=PW(f,a6e);if(!xc(n)||!xc(i)||h.length===0)return null;var b=Number(n)+(ut(d)?d:0),A=Number(i)+(ut(p)?p:0);if(!Ui(b)||!Ui(A))return null;var x;switch(c){case"start":x=mR("calc(".concat(s,")"));break;case"middle":x=mR("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:x=mR("calc(".concat(h.length-1," * -").concat(a,")"));break}var _=[];if(l){var S=h[0].width,{width:E}=f;_.push("scale(".concat(ut(E)&&ut(S)?E/S:1,")"))}return m&&_.push("rotate(".concat(m,", ").concat(b,", ").concat(A,")")),_.length&&(w.transform=_.join(" ")),O.createElement("text",WB({},us(w),{ref:e,x:b,y:A,className:wr("recharts-text",v),textAnchor:u,fill:o.includes("url")?_fe:o}),h.map((T,D)=>{var N=T.words.join(y?"":" ");return O.createElement("tspan",{x:b,dy:D===0?x:a,key:"".concat(N,"-").concat(D)},N)}))});Vj.displayName="Text";var h6e=["labelRef"];function d6e(t,e){if(t==null)return{};var r,n,i=p6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function p6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function OW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function In(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OW(Object(r),!0).forEach(function(n){m6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m6e(t,e,r){return(e=g6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g6e(t){var e=v6e(t,"string");return typeof e=="symbol"?e:e+""}function v6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cf.apply(null,arguments)}var Efe=O.createContext(null),y6e=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=t,l=O.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[e,r,n,i,a,s]);return O.createElement(Efe.Provider,{value:l},o)},Sfe=()=>{var t=O.useContext(Efe),e=OS();return t||kle(e)},b6e=O.createContext(null),w6e=()=>{var t=O.useContext(b6e),e=st(rce);return t||e},x6e=t=>{var{value:e,formatter:r}=t,n=sn(t.children)?e:t.children;return typeof r=="function"?r(n):n},Uj=t=>t!=null&&typeof t=="function",A6e=(t,e)=>{var r=fl(e-t),n=Math.min(Math.abs(e-t),360);return r*n},_6e=(t,e,r,n,i)=>{var{offset:a,className:s}=t,{cx:o,cy:l,innerRadius:u,outerRadius:c,startAngle:f,endAngle:h,clockWise:d}=i,p=(u+c)/2,m=A6e(f,h),v=m>=0?1:-1,y,w;switch(e){case"insideStart":y=f+v*a,w=d;break;case"insideEnd":y=h-v*a,w=!d;break;case"end":y=h+v*a,w=d;break;default:throw new Error("Unsupported position ".concat(e))}w=m<=0?w:!w;var b=la(o,l,p,y),A=la(o,l,p,y+(w?1:-1)*359),x="M".concat(b.x,",").concat(b.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(A.x,",").concat(A.y),_=sn(t.id)?UA("recharts-radial-line-"):t.id;return O.createElement("text",Cf({},n,{dominantBaseline:"central",className:wr("recharts-radial-bar-label",s)}),O.createElement("defs",null,O.createElement("path",{id:_,d:x})),O.createElement("textPath",{xlinkHref:"#".concat(_)},r))},E6e=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=t,u=(o+l)/2;if(r==="outside"){var{x:c,y:f}=la(n,i,s+e,u);return{x:c,y:f,textAnchor:c>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+s)/2,{x:d,y:p}=la(n,i,h,u);return{x:d,y:p,textAnchor:"middle",verticalAnchor:"middle"}},GB=t=>"cx"in t&&ut(t.cx),S6e=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,a;r!=null&&!GB(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:u,height:c}=e,f=s,h=s+(l-u)/2,d=(f+h)/2,p=(l+u)/2,m=f+l/2,v=c>=0?1:-1,y=v*n,w=v>0?"end":"start",b=v>0?"start":"end",A=l>=0?1:-1,x=A*n,_=A>0?"end":"start",S=A>0?"start":"end";if(i==="top"){var E={x:f+l/2,y:o-y,textAnchor:"middle",verticalAnchor:w};return In(In({},E),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var T={x:h+u/2,y:o+c+y,textAnchor:"middle",verticalAnchor:b};return In(In({},T),a?{height:Math.max(a.y+a.height-(o+c),0),width:u}:{})}if(i==="left"){var D={x:d-x,y:o+c/2,textAnchor:_,verticalAnchor:"middle"};return In(In({},D),a?{width:Math.max(D.x-a.x,0),height:c}:{})}if(i==="right"){var N={x:d+p+x,y:o+c/2,textAnchor:S,verticalAnchor:"middle"};return In(In({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:c}:{})}var P=a?{width:p,height:c}:{};return i==="insideLeft"?In({x:d+x,y:o+c/2,textAnchor:S,verticalAnchor:"middle"},P):i==="insideRight"?In({x:d+p-x,y:o+c/2,textAnchor:_,verticalAnchor:"middle"},P):i==="insideTop"?In({x:f+l/2,y:o+y,textAnchor:"middle",verticalAnchor:b},P):i==="insideBottom"?In({x:h+u/2,y:o+c-y,textAnchor:"middle",verticalAnchor:w},P):i==="insideTopLeft"?In({x:f+x,y:o+y,textAnchor:S,verticalAnchor:b},P):i==="insideTopRight"?In({x:f+l-x,y:o+y,textAnchor:_,verticalAnchor:b},P):i==="insideBottomLeft"?In({x:h+x,y:o+c-y,textAnchor:S,verticalAnchor:w},P):i==="insideBottomRight"?In({x:h+u-x,y:o+c-y,textAnchor:_,verticalAnchor:w},P):i&&typeof i=="object"&&(ut(i.x)||th(i.x))&&(ut(i.y)||th(i.y))?In({x:s+Ap(i.x,p),y:o+Ap(i.y,c),textAnchor:"end",verticalAnchor:"end"},P):In({x:m,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},P)},C6e={angle:0,offset:5,zIndex:ua.label,position:"middle",textBreakAll:!1};function Bh(t){var e=qi(t,C6e),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:u}=e,c=w6e(),f=Sfe(),h=n==="center"?f:c??f,d,p,m;if(r==null?d=h:GB(r)?d=r:d=kle(r),!d||sn(i)&&sn(a)&&!O.isValidElement(s)&&typeof s!="function")return null;var v=In(In({},e),{},{viewBox:d});if(O.isValidElement(s)){var{labelRef:y}=v,w=d6e(v,h6e);return O.cloneElement(s,w)}if(typeof s=="function"){if(p=O.createElement(s,v),O.isValidElement(p))return p}else p=x6e(e);var b=us(e);if(GB(d)){if(n==="insideStart"||n==="insideEnd"||n==="end")return _6e(e,n,p,b,d);m=E6e(d,e.offset,e.position)}else m=S6e(e,d);return O.createElement(mu,{zIndex:e.zIndex},O.createElement(Vj,Cf({ref:u,className:wr("recharts-label",o)},b,m,{textAnchor:o6e(b.textAnchor)?b.textAnchor:m.textAnchor,breakAll:l}),p))}Bh.displayName="Label";var T6e=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?O.createElement(Bh,Cf({key:"label-implicit"},n)):xc(t)?O.createElement(Bh,Cf({key:"label-implicit",value:t},n)):O.isValidElement(t)?t.type===Bh?O.cloneElement(t,In({key:"label-implicit"},n)):O.createElement(Bh,Cf({key:"label-implicit",content:t},n)):Uj(t)?O.createElement(Bh,Cf({key:"label-implicit",content:t},n)):t&&typeof t=="object"?O.createElement(Bh,Cf({},t,{key:"label-implicit"},n)):null};function D6e(t){var{label:e,labelRef:r}=t,n=Sfe();return T6e(e,n,r)||null}var Cfe={},Tfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Tfe);var Dfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Dfe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tfe,r=Dfe,n=aI;function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(Cfe);var N6e=Cfe.last;const P6e=Sl(N6e);var M6e=["valueAccessor"],I6e=["dataKey","clockWise","id","textBreakAll","zIndex"];function J2(){return J2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J2.apply(null,arguments)}function kW(t,e){if(t==null)return{};var r,n,i=O6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function O6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var k6e=t=>Array.isArray(t.value)?P6e(t.value):t.value,Nfe=O.createContext(void 0),Pfe=Nfe.Provider,Mfe=O.createContext(void 0);Mfe.Provider;function R6e(){return O.useContext(Nfe)}function F6e(){return O.useContext(Mfe)}function nN(t){var{valueAccessor:e=k6e}=t,r=kW(t,M6e),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=kW(r,I6e),u=R6e(),c=F6e(),f=u||c;return!f||!f.length?null:O.createElement(mu,{zIndex:o??ua.label},O.createElement(So,{className:"recharts-label-list"},f.map((h,d)=>{var p,m=sn(n)?e(h,d):Qn(h&&h.payload,n),v=sn(a)?{}:{id:"".concat(a,"-").concat(d)};return O.createElement(Bh,J2({key:"label-".concat(d)},us(h),l,v,{fill:(p=r.fill)!==null&&p!==void 0?p:h.fill,parentViewBox:h.parentViewBox,value:m,textBreakAll:s,viewBox:h.viewBox,index:d,zIndex:0}))})))}nN.displayName="LabelList";function Ife(t){var{label:e}=t;return e?e===!0?O.createElement(nN,{key:"labelList-implicit"}):O.isValidElement(e)||Uj(e)?O.createElement(nN,{key:"labelList-implicit",content:e}):typeof e=="object"?O.createElement(nN,J2({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function KB(){return KB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KB.apply(null,arguments)}var Ofe=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=wr("recharts-dot",i);return ut(e)&&ut(r)&&ut(n)?O.createElement("circle",KB({},xl(t),p6(t),{className:a,cx:e,cy:r,r:n})):null},L6e={radiusAxis:{},angleAxis:{}},kfe=Vs({name:"polarAxis",initialState:L6e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Udt,removeRadiusAxis:zdt,addAngleAxis:qdt,removeAngleAxis:Hdt}=kfe.actions,B6e=kfe.reducer,Rfe={exports:{}},xr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wi=typeof Symbol=="function"&&Symbol.for,zj=Wi?Symbol.for("react.element"):60103,qj=Wi?Symbol.for("react.portal"):60106,WI=Wi?Symbol.for("react.fragment"):60107,GI=Wi?Symbol.for("react.strict_mode"):60108,KI=Wi?Symbol.for("react.profiler"):60114,XI=Wi?Symbol.for("react.provider"):60109,YI=Wi?Symbol.for("react.context"):60110,Hj=Wi?Symbol.for("react.async_mode"):60111,QI=Wi?Symbol.for("react.concurrent_mode"):60111,ZI=Wi?Symbol.for("react.forward_ref"):60112,JI=Wi?Symbol.for("react.suspense"):60113,$6e=Wi?Symbol.for("react.suspense_list"):60120,eO=Wi?Symbol.for("react.memo"):60115,tO=Wi?Symbol.for("react.lazy"):60116,j6e=Wi?Symbol.for("react.block"):60121,V6e=Wi?Symbol.for("react.fundamental"):60117,U6e=Wi?Symbol.for("react.responder"):60118,z6e=Wi?Symbol.for("react.scope"):60119;function Po(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case zj:switch(t=t.type,t){case Hj:case QI:case WI:case KI:case GI:case JI:return t;default:switch(t=t&&t.$$typeof,t){case YI:case ZI:case tO:case eO:case XI:return t;default:return e}}case qj:return e}}}function Ffe(t){return Po(t)===QI}xr.AsyncMode=Hj;xr.ConcurrentMode=QI;xr.ContextConsumer=YI;xr.ContextProvider=XI;xr.Element=zj;xr.ForwardRef=ZI;xr.Fragment=WI;xr.Lazy=tO;xr.Memo=eO;xr.Portal=qj;xr.Profiler=KI;xr.StrictMode=GI;xr.Suspense=JI;xr.isAsyncMode=function(t){return Ffe(t)||Po(t)===Hj};xr.isConcurrentMode=Ffe;xr.isContextConsumer=function(t){return Po(t)===YI};xr.isContextProvider=function(t){return Po(t)===XI};xr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===zj};xr.isForwardRef=function(t){return Po(t)===ZI};xr.isFragment=function(t){return Po(t)===WI};xr.isLazy=function(t){return Po(t)===tO};xr.isMemo=function(t){return Po(t)===eO};xr.isPortal=function(t){return Po(t)===qj};xr.isProfiler=function(t){return Po(t)===KI};xr.isStrictMode=function(t){return Po(t)===GI};xr.isSuspense=function(t){return Po(t)===JI};xr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WI||t===QI||t===KI||t===GI||t===JI||t===$6e||typeof t=="object"&&t!==null&&(t.$$typeof===tO||t.$$typeof===eO||t.$$typeof===XI||t.$$typeof===YI||t.$$typeof===ZI||t.$$typeof===V6e||t.$$typeof===U6e||t.$$typeof===z6e||t.$$typeof===j6e)};xr.typeOf=Po;Rfe.exports=xr;var q6e=Rfe.exports,RW=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",FW=null,gR=null,Lfe=t=>{if(t===FW&&Array.isArray(gR))return gR;var e=[];return O.Children.forEach(t,r=>{sn(r)||(q6e.isFragment(r)?e=e.concat(Lfe(r.props.children)):e.push(r))}),gR=e,FW=t,e};function H6e(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>RW(i)):n=[RW(e)],Lfe(t).forEach(i=>{var a=l1(i,"type.displayName")||l1(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var Bfe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,$fe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})($fe);var W6e=$fe.isPlainObject;const G6e=Sl(W6e);function LW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function BW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LW(Object(r),!0).forEach(function(n){K6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K6e(t,e,r){return(e=X6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X6e(t){var e=Y6e(t,"string");return typeof e=="symbol"?e:e+""}function Y6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eP(){return eP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eP.apply(null,arguments)}var $W=(t,e,r,n,i)=>{var a=r-n,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+r,",").concat(e),s+="L ".concat(t+r-a/2,",").concat(e+i),s+="L ".concat(t+r-a/2-n,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},Q6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Z6e=t=>{var e=qi(t,Q6e),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:l,animationDuration:u,animationBegin:c,isUpdateAnimationActive:f}=e,h=O.useRef(null),[d,p]=O.useState(-1),m=O.useRef(i),v=O.useRef(a),y=O.useRef(s),w=O.useRef(r),b=O.useRef(n),A=TI(t,"trapezoid-");if(O.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var j=h.current.getTotalLength();j&&p(j)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var x=wr("recharts-trapezoid",o);if(!f)return O.createElement("g",null,O.createElement("path",eP({},us(e),{className:x,d:$W(r,n,i,a,s)})));var _=m.current,S=v.current,E=y.current,T=w.current,D=b.current,N="0px ".concat(d===-1?1:d,"px"),P="".concat(d,"px 0px"),M=qle(["strokeDasharray"],u,l);return O.createElement(CI,{animationId:A,key:A,canBegin:d>0,duration:u,easing:l,isActive:f,begin:c},j=>{var K=Bi(_,i,j),k=Bi(S,a,j),V=Bi(E,s,j),q=Bi(T,r,j),H=Bi(D,n,j);h.current&&(m.current=K,v.current=k,y.current=V,w.current=q,b.current=H);var te=j>0?{transition:M,strokeDasharray:P}:{strokeDasharray:N};return O.createElement("path",eP({},us(e),{className:x,d:$W(q,H,K,k,V),ref:h,style:BW(BW({},te),e.style)}))})},J6e=["option","shapeType","propTransformer","activeClassName"];function eje(t,e){if(t==null)return{};var r,n,i=tje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function tje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jW(Object(r),!0).forEach(function(n){rje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rje(t,e,r){return(e=nje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nje(t){var e=ije(t,"string");return typeof e=="symbol"?e:e+""}function ije(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aje(t,e){return tP(tP({},e),t)}function sje(t,e){return t==="symbols"}function VW(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return O.createElement(Kle,r);case"trapezoid":return O.createElement(Z6e,r);case"sector":return O.createElement(Qle,r);case"symbols":if(sje(e))return O.createElement(iI,r);break;case"curve":return O.createElement(V6,r);default:return null}}function oje(t){return O.isValidElement(t)?t.props:t}function XB(t){var{option:e,shapeType:r,propTransformer:n=aje,activeClassName:i="recharts-active-shape"}=t,a=eje(t,J6e),s;if(O.isValidElement(e))s=O.cloneElement(e,tP(tP({},a),oje(e)));else if(typeof e=="function")s=e(a,a.index);else if(G6e(e)&&typeof e!="boolean"){var o=n(e,a);s=O.createElement(VW,{shapeType:r,elementProps:o})}else{var l=a;s=O.createElement(VW,{shapeType:r,elementProps:l})}return a.isActive?O.createElement(So,{className:i},s):s}var lje=(t,e,r)=>{var n=bn();return(i,a)=>s=>{t==null||t(i,a,s),n(Hce({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},uje=t=>{var e=bn();return(r,n)=>i=>{t==null||t(r,n,i),e(F4e())}},cje=(t,e,r)=>{var n=bn();return(i,a)=>s=>{t==null||t(i,a,s),n(L4e({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function jfe(t){var{tooltipEntrySettings:e}=t,r=bn(),n=Va(),i=O.useRef(null);return O.useLayoutEffect(()=>{n||(i.current===null?r(I4e(e)):i.current!==e&&r(O4e({prev:i.current,next:e})),i.current=e)},[e,r,n]),O.useLayoutEffect(()=>()=>{i.current&&(r(k4e(i.current)),i.current=null)},[r]),null}function Vfe(t){var{legendPayload:e}=t,r=bn(),n=Va(),i=O.useRef(null);return O.useLayoutEffect(()=>{n||(i.current===null?r(rRe(e)):i.current!==e&&r(nRe({prev:i.current,next:e})),i.current=e)},[r,n,e]),O.useLayoutEffect(()=>()=>{i.current&&(r(iRe(i.current)),i.current=null)},[r]),null}var vR,fje=()=>{var[t]=O.useState(()=>UA("uid-"));return t},hje=(vR=rZ.useId)!==null&&vR!==void 0?vR:fje;function Ufe(t,e){var r=hje();return e||(t?"".concat(t,"-").concat(r):r)}var dje=O.createContext(void 0),zfe=t=>{var{id:e,type:r,children:n}=t,i=Ufe("recharts-".concat(r),e);return O.createElement(dje.Provider,{value:i},n(i))},pje={cartesianItems:[],polarItems:[]},qfe=Vs({name:"graphicalItems",initialState:pje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:nn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,i=su(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},prepare:nn()},removeCartesianGraphicalItem:{reducer(t,e){var r=su(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:nn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:nn()},removePolarGraphicalItem:{reducer(t,e){var r=su(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:nn()}}}),{addCartesianGraphicalItem:mje,replaceCartesianGraphicalItem:gje,removeCartesianGraphicalItem:vje,addPolarGraphicalItem:Wdt,removePolarGraphicalItem:Gdt}=qfe.actions,yje=qfe.reducer,bje=t=>{var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(mje(t)):r.current!==t&&e(gje({prev:r.current,next:t})),r.current=t},[e,t]),O.useLayoutEffect(()=>()=>{r.current&&(e(vje(r.current)),r.current=null)},[e]),null},Hfe=O.memo(bje),wje=["points"];function UW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UW(Object(r),!0).forEach(function(n){xje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xje(t,e,r){return(e=Aje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aje(t){var e=_je(t,"string");return typeof e=="symbol"?e:e+""}function _je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rP(){return rP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rP.apply(null,arguments)}function Eje(t,e){if(t==null)return{};var r,n,i=Sje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Sje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cje(t){var{option:e,dotProps:r,className:n}=t;if(O.isValidElement(e))return O.cloneElement(e,r);if(typeof e=="function")return e(r);var i=wr(n,typeof e!="boolean"?e.className:""),a=r??{},{points:s}=a,o=Eje(a,wje);return O.createElement(Ofe,rP({},o,{className:i}))}function Tje(t,e){return t==null?!1:e?!0:t.length===1}function Dje(t){var{points:e,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:u=ua.scatter}=t;if(!Tje(e,r))return null;var c=Bfe(r),f=nMe(r),h=e.map((p,m)=>{var v,y,w=yR(yR(yR({r:3},s),f),{},{index:m,cx:(v=p.x)!==null&&v!==void 0?v:void 0,cy:(y=p.y)!==null&&y!==void 0?y:void 0,dataKey:a,value:p.value,payload:p.payload,points:e});return O.createElement(Cje,{key:"dot-".concat(m),option:r,dotProps:w,className:i})}),d={};return o&&l!=null&&(d.clipPath="url(#clipPath-".concat(c?"":"dots-").concat(l,")")),O.createElement(mu,{zIndex:u},O.createElement(So,rP({className:n},d),h))}function zW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(r),!0).forEach(function(n){Nje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nje(t,e,r){return(e=Pje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pje(t){var e=Mje(t,"string");return typeof e=="symbol"?e:e+""}function Mje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ije={xAxis:{},yAxis:{},zAxis:{}},Wfe=Vs({name:"cartesianAxis",initialState:Ije,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:nn()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:nn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:nn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:nn()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:nn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:nn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:nn()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:nn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:nn()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,i=t.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);t.yAxis[r]=qW(qW({},t.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Oje,replaceXAxis:kje,removeXAxis:Rje,addYAxis:Fje,replaceYAxis:Lje,removeYAxis:Bje,addZAxis:Kdt,replaceZAxis:Xdt,removeZAxis:Ydt,updateYAxisWidth:$je}=Wfe.actions,jje=Wfe.reducer,Vje=_e([va],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Uje=_e([Vje,dh,ph],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Wj=()=>st(Uje),zje=()=>st(T$e);function HW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(r),!0).forEach(function(n){qje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qje(t,e,r){return(e=Hje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hje(t){var e=Wje(t,"string");return typeof e=="symbol"?e:e+""}function Wje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gje=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=bR(bR(bR({},o),CS(i)),p6(i)),u;return O.isValidElement(i)?u=O.cloneElement(i,l):typeof i=="function"?u=i(l):u=O.createElement(Ofe,l),O.createElement(So,{className:"recharts-active-dot",clipPath:s},u)};function Kje(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=ua.activeDot}=t,o=st(v1),l=zje();if(e==null||l==null)return null;var u=e.find(c=>l.includes(c.payload));return sn(u)?null:O.createElement(mu,{zIndex:s},O.createElement(Gje,{point:u,childIndex:Number(o),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}var Xje={},Gfe=Vs({name:"errorBars",initialState:Xje,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:Qdt,replaceErrorBar:Zdt,removeErrorBar:Jdt}=Gfe.actions,Yje=Gfe.reducer,Qje=["children"];function Zje(t,e){if(t==null)return{};var r,n,i=Jje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Jje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var eVe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tVe=O.createContext(eVe);function Kfe(t){var{children:e}=t,r=Zje(t,Qje);return O.createElement(tVe.Provider,{value:r},e)}function Gj(t,e){var r,n,i=st(u=>gh(u,t)),a=st(u=>vh(u,e)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Si.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:Ci.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function Xfe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Wj(),{needClipX:a,needClipY:s,needClip:o}=Gj(e,r);if(!o||!i)return null;var{x:l,y:u,width:c,height:f}=i;return O.createElement("clipPath",{id:"clipPath-".concat(n)},O.createElement("rect",{x:a?l:l-c/2,y:s?u:u-f/2,width:a?c:c*2,height:s?f:f*2}))}var rVe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=O;function nVe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var iVe=typeof Object.is=="function"?Object.is:nVe,aVe=XS.useSyncExternalStore,sVe=XS.useRef,oVe=XS.useEffect,lVe=XS.useMemo,uVe=XS.useDebugValue;rVe.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=sVe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=lVe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&s.hasValue){var p=s.value;if(i(p,d))return f=p}return f=d}if(p=f,iVe(c,d))return p;var m=n(d);return i!==void 0&&i(p,m)?(c=d,p):(c=d,f=m)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var o=aVe(t,a[0],a[1]);return oVe(function(){s.hasValue=!0,s.value=o},[o]),uVe(o),o};function cVe(t){t()}function fVe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){cVe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var WW={notify(){},get:()=>[]};function hVe(t,e){let r,n=WW,i=0,a=!1;function s(m){c();const v=n.subscribe(m);let y=!1;return()=>{y||(y=!0,v(),f())}}function o(){n.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return a}function c(){i++,r||(r=t.subscribe(l),n=fVe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=WW)}function h(){a||(a=!0,c())}function d(){a&&(a=!1,f())}const p={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}var dVe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pVe=dVe(),mVe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gVe=mVe(),vVe=()=>pVe||gVe?O.useLayoutEffect:O.useEffect,yVe=vVe();function GW(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function bVe(t,e){if(GW(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!GW(t[r[i]],e[r[i]]))return!1;return!0}var wR=Symbol.for("react-redux-context"),xR=typeof globalThis<"u"?globalThis:{};function wVe(){if(!O.createContext)return{};const t=xR[wR]??(xR[wR]=new Map);let e=t.get(O.createContext);return e||(e=O.createContext(null),t.set(O.createContext,e)),e}var xVe=wVe();function AVe(t){const{children:e,context:r,serverState:n,store:i}=t,a=O.useMemo(()=>{const l=hVe(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=O.useMemo(()=>i.getState(),[i]);yVe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||xVe;return O.createElement(o.Provider,{value:a},e)}var _Ve=AVe,EVe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function SVe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function rO(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(EVe.has(n)){if(t[n]==null&&e[n]==null)continue;if(!bVe(t[n],e[n]))return!1}else if(!SVe(t[n],e[n]))return!1;return!0}var CVe=t=>{var{chartData:e}=t,r=bn(),n=Va();return O.useEffect(()=>n?()=>{}:(r(yW(e)),()=>{r(yW(void 0))}),[e,r,n]),null},KW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Yfe=Vs({name:"brush",initialState:KW,reducers:{setBrushSettings(t,e){return e.payload==null?KW:e.payload}}}),{setBrushSettings:ept}=Yfe.actions,TVe=Yfe.reducer;function DVe(t,e,r){return(e=NVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NVe(t){var e=PVe(t,"string");return typeof e=="symbol"?e:e+""}function PVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Kj{static create(e){return new Kj(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}DVe(Kj,"EPS",1e-4);function MVe(t){return(t%180+180)%180}var IVe=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=MVe(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},OVe={dots:[],areas:[],lines:[]},Qfe=Vs({name:"referenceElements",initialState:OVe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=su(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=su(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=su(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:tpt,removeDot:rpt,addArea:npt,removeArea:ipt,addLine:apt,removeLine:spt}=Qfe.actions,kVe=Qfe.reducer,RVe=O.createContext(void 0),FVe=t=>{var{children:e}=t,[r]=O.useState("".concat(UA("recharts"),"-clip")),n=Wj();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return O.createElement(RVe.Provider,{value:r},O.createElement("defs",null,O.createElement("clipPath",{id:r},O.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function Zfe(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function LVe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return IVe(n,r)}function BVe(t,e,r){var n=r==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function nP(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function $Ve(t,e){return Zfe(t,e+1)}function jVe(t,e,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=e,l=0,u=1,c=s,f=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:Zfe(n,u)};var m=l,v,y=()=>(v===void 0&&(v=r(p,m)),v),w=p.coordinate,b=l===0||nP(t,w,y,c,o);b||(l=0,c=s,u+=1),b&&(c=w+t*(y()/2+i),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function XW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(r),!0).forEach(function(n){VVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VVe(t,e,r){return(e=UVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UVe(t){var e=zVe(t,"string");return typeof e=="symbol"?e:e+""}function zVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qVe(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=e,{end:l}=e,u=function(h){var d=a[h],p,m=()=>(p===void 0&&(p=r(d,h)),p);if(h===s-1){var v=t*(d.coordinate+t*m()/2-l);a[h]=d=Ma(Ma({},d),{},{tickCoord:v>0?d.coordinate-v*t:d.coordinate})}else a[h]=d=Ma(Ma({},d),{},{tickCoord:d.coordinate});if(d.tickCoord!=null){var y=nP(t,d.tickCoord,m,o,l);y&&(l=d.tickCoord-t*(m()/2+i),a[h]=Ma(Ma({},d),{},{isShow:!0}))}},c=s-1;c>=0;c--)u(c);return a}function HVe(t,e,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:u}=e;if(a){var c=n[o-1],f=r(c,o-1),h=t*(c.coordinate+t*f/2-u);if(s[o-1]=c=Ma(Ma({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate}),c.tickCoord!=null){var d=nP(t,c.tickCoord,()=>f,l,u);d&&(u=c.tickCoord-t*(f/2+i),s[o-1]=Ma(Ma({},c),{},{isShow:!0}))}}for(var p=a?o-1:o,m=function(w){var b=s[w],A,x=()=>(A===void 0&&(A=r(b,w)),A);if(w===0){var _=t*(b.coordinate-t*x()/2-l);s[w]=b=Ma(Ma({},b),{},{tickCoord:_<0?b.coordinate-_*t:b.coordinate})}else s[w]=b=Ma(Ma({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var S=nP(t,b.tickCoord,x,l,u);S&&(l=b.tickCoord+t*(x()/2+i),s[w]=Ma(Ma({},b),{},{isShow:!0}))}},v=0;v<p;v++)m(v);return s}function Xj(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:u,unit:c,angle:f}=t;if(!i||!i.length||!n)return[];if(ut(l)||RS.isSsr){var h;return(h=$Ve(i,ut(l)?l:0))!==null&&h!==void 0?h:[]}var d=[],p=o==="top"||o==="bottom"?"width":"height",m=c&&p==="width"?Yx(c,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=(b,A)=>{var x=typeof u=="function"?u(b.value,A):b.value;return p==="width"?LVe(Yx(x,{fontSize:e,letterSpacing:r}),m,f):Yx(x,{fontSize:e,letterSpacing:r})[p]},y=i.length>=2?fl(i[1].coordinate-i[0].coordinate):1,w=BVe(a,y,p);return l==="equidistantPreserveStart"?jVe(y,w,v,i,s):(l==="preserveStart"||l==="preserveStartEnd"?d=HVe(y,w,v,i,s,l==="preserveStartEnd"):d=qVe(y,w,v,i,s),d.filter(b=>b.isShow))}var WVe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(c=>{if(c){var f=c.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,u=s+l+o+(r?n:0);return Math.round(u)}return 0},GVe=["axisLine","width","height","className","hide","ticks","axisType"];function KVe(t,e){if(t==null)return{};var r,n,i=XVe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function XVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sv.apply(null,arguments)}function YW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YW(Object(r),!0).forEach(function(n){YVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YVe(t,e,r){return(e=QVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QVe(t){var e=ZVe(t,"string");return typeof e=="symbol"?e:e+""}function ZVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $f={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ua.axis};function JVe(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var u=Gn(Gn(Gn({},l),xl(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var c=+(a==="top"&&!s||a==="bottom"&&s);u=Gn(Gn({},u),{},{x1:e,y1:r+c*i,x2:e+n,y2:r+c*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=Gn(Gn({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+i})}return O.createElement("line",Sv({},u,{className:wr("recharts-cartesian-axis-line",l1(o,"className"))}))}function eUe(t,e,r,n,i,a,s,o,l){var u,c,f,h,d,p,m=o?-1:1,v=t.tickSize||s,y=ut(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=c=t.coordinate,h=r+ +!o*i,f=h-m*v,p=f-m*l,d=y;break;case"left":f=h=t.coordinate,c=e+ +!o*n,u=c-m*v,d=u-m*l,p=y;break;case"right":f=h=t.coordinate,c=e+ +o*n,u=c+m*v,d=u+m*l,p=y;break;default:u=c=t.coordinate,h=r+ +o*i,f=h+m*v,p=f+m*l,d=y;break}return{line:{x1:u,y1:f,x2:c,y2:h},tick:{x:d,y:p}}}function tUe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function rUe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function nUe(t){var{option:e,tickProps:r,value:n}=t,i,a=wr(r.className,"recharts-cartesian-axis-tick-value");if(O.isValidElement(e))i=O.cloneElement(e,Gn(Gn({},r),{},{className:a}));else if(typeof e=="function")i=e(Gn(Gn({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=wr(s,e==null?void 0:e.className)),i=O.createElement(Vj,Sv({},r,{className:s}),n)}return i}var iUe=O.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:u,orientation:c,mirror:f,x:h,y:d,width:p,height:m,tickSize:v,tickMargin:y,fontSize:w,letterSpacing:b,getTicksConfig:A,events:x,axisType:_}=t,S=Xj(Gn(Gn({},A),{},{ticks:r}),w,b),E=tUe(c,f),T=rUe(c,f),D=xl(A),N=CS(n),P={};typeof i=="object"&&(P=i);var M=Gn(Gn({},D),{},{fill:"none"},P),j=S.map(V=>Gn({entry:V},eUe(V,h,d,p,m,c,v,f,y))),K=j.map(V=>{var{entry:q,line:H}=V;return O.createElement(So,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},i&&O.createElement("line",Sv({},M,H,{className:wr("recharts-cartesian-axis-tick-line",l1(i,"className"))})))}),k=j.map((V,q)=>{var{entry:H,tick:te}=V,ue=Gn(Gn(Gn(Gn({textAnchor:E,verticalAnchor:T},D),{},{stroke:"none",fill:a},N),te),{},{index:q,payload:H,visibleTicksCount:S.length,tickFormatter:s,padding:l},u);return O.createElement(So,Sv({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},m6(x,H,q)),n&&O.createElement(nUe,{option:n,tickProps:ue,value:"".concat(typeof s=="function"?s(H.value,q):H.value).concat(o||"")}))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},k.length>0&&O.createElement(mu,{zIndex:ua.label},O.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:e},k)),K.length>0&&O.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},K))}),aUe=O.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=t,u=KVe(t,GVe),[c,f]=O.useState(""),[h,d]=O.useState(""),p=O.useRef(null);O.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return WVe({ticks:p.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var m=O.useCallback(v=>{if(v){var y=v.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=y;var w=y[0];if(w){var b=window.getComputedStyle(w),A=b.fontSize,x=b.letterSpacing;(A!==c||x!==h)&&(f(A),d(x))}}},[c,h]);return s||n!=null&&n<=0||i!=null&&i<=0?null:O.createElement(mu,{zIndex:t.zIndex},O.createElement(So,{className:wr("recharts-cartesian-axis",a)},O.createElement(JVe,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:xl(t)}),O.createElement(iUe,{ref:m,axisType:l,events:u,fontSize:c,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),O.createElement(y6e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},O.createElement(D6e,{label:t.label,labelRef:t.labelRef}),t.children)))}),Yj=O.forwardRef((t,e)=>{var r=qi(t,$f);return O.createElement(aUe,Sv({},r,{ref:e}))});Yj.displayName="CartesianAxis";var sUe=["x1","y1","x2","y2","key"],oUe=["offset"],lUe=["xAxisId","yAxisId"],uUe=["xAxisId","yAxisId"];function QW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QW(Object(r),!0).forEach(function(n){cUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cUe(t,e,r){return(e=fUe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fUe(t){var e=hUe(t,"string");return typeof e=="symbol"?e:e+""}function hUe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mm.apply(null,arguments)}function iP(t,e){if(t==null)return{};var r,n,i=dUe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function dUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pUe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=t;return O.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Jfe(t){var{option:e,lineItemProps:r}=t,n;if(O.isValidElement(e))n=O.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:u}=r,c=iP(r,sUe),f=(i=xl(c))!==null&&i!==void 0?i:{},{offset:h}=f,d=iP(f,oUe);n=O.createElement("line",Mm({},d,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:u}))}return n}function mUe(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=iP(t,lUe),l=i.map((u,c)=>{var f=Ra(Ra({},o),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(c),index:c});return O.createElement(Jfe,{key:"line-".concat(c),option:n,lineItemProps:f})});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function gUe(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=iP(t,uUe),l=i.map((u,c)=>{var f=Ra(Ra({},o),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(c),index:c});return O.createElement(Jfe,{option:n,lineItemProps:f,key:"line-".concat(c)})});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function vUe(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var d=!u[h+1],p=d?i+s-f:u[h+1]-f;if(p<=0)return null;var m=h%e.length;return O.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:p,width:a,stroke:"none",fill:e[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function yUe(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=t;if(!e||!r||!r.length)return null;var u=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var d=!u[h+1],p=d?i+s-f:u[h+1]-f;if(p<=0)return null;var m=h%r.length;return O.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:o,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var bUe=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return Ale(Xj(Ra(Ra(Ra({},$f),r),{},{ticks:_le(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},wUe=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return Ale(Xj(Ra(Ra(Ra({},$f),r),{},{ticks:_le(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},xUe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ua.grid};function Mh(t){var e=L6(),r=B6(),n=Rle(),i=Ra(Ra({},qi(t,xUe)),{},{x:ut(t.x)?t.x:n.left,y:ut(t.y)?t.y:n.top,width:ut(t.width)?t.width:n.width,height:ut(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:u,height:c,syncWithTicks:f,horizontalValues:h,verticalValues:d}=i,p=Va(),m=st(T=>oW(T,"xAxis",a,p)),v=st(T=>oW(T,"yAxis",s,p));if(!Ac(u)||!Ac(c)||!ut(o)||!ut(l))return null;var y=i.verticalCoordinatesGenerator||bUe,w=i.horizontalCoordinatesGenerator||wUe,{horizontalPoints:b,verticalPoints:A}=i;if((!b||!b.length)&&typeof w=="function"){var x=h&&h.length,_=w({yAxis:v?Ra(Ra({},v),{},{ticks:x?h:v.ticks}):void 0,width:e??u,height:r??c,offset:n},x?!0:f);M2(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(b=_)}if((!A||!A.length)&&typeof y=="function"){var S=d&&d.length,E=y({xAxis:m?Ra(Ra({},m),{},{ticks:S?d:m.ticks}):void 0,width:e??u,height:r??c,offset:n},S?!0:f);M2(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(A=E)}return O.createElement(mu,{zIndex:i.zIndex},O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(pUe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),O.createElement(vUe,Mm({},i,{horizontalPoints:b})),O.createElement(yUe,Mm({},i,{verticalPoints:A})),O.createElement(mUe,Mm({},i,{offset:n,horizontalPoints:b,xAxis:m,yAxis:v})),O.createElement(gUe,Mm({},i,{offset:n,verticalPoints:A,xAxis:m,yAxis:v}))))}Mh.displayName="CartesianGrid";var ehe=(t,e,r,n)=>HI(t,"xAxis",e,n),the=(t,e,r,n)=>qI(t,"xAxis",e,n),rhe=(t,e,r,n)=>HI(t,"yAxis",r,n),nhe=(t,e,r,n)=>qI(t,"yAxis",r,n),AUe=_e([Zr,ehe,rhe,the,nhe],(t,e,r,n,i)=>Bp(t,"xAxis")?P2(e,n,!1):P2(r,i,!1)),_Ue=(t,e,r,n,i)=>i;function EUe(t){return t.type==="line"}var SUe=_e([xj,_Ue],(t,e)=>t.filter(EUe).find(r=>r.id===e)),CUe=_e([Zr,ehe,rhe,the,nhe,SUe,AUe,kI],(t,e,r,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:c}=o;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:f,data:h}=a,d;if(h!=null&&h.length>0?d=h:d=l==null?void 0:l.slice(u,c+1),d!=null)return GUe({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:s,displayedData:d})}});function TUe(t){var e=CS(t),r=3,n=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var DUe=["id"],NUe=["type","layout","connectNulls","needClip","shape"],PUe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r_.apply(null,arguments)}function ZW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ec(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(r),!0).forEach(function(n){MUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MUe(t,e,r){return(e=IUe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IUe(t){var e=OUe(t,"string");return typeof e=="symbol"?e:e+""}function OUe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qj(t,e){if(t==null)return{};var r,n,i=kUe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var RUe=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:gI(r,e),payload:t}]},FUe=O.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:u}=t,c={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:gI(s,e),hide:o,type:u,color:n,unit:l}};return O.createElement(jfe,{tooltipEntrySettings:c})}),ihe=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function LUe(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var BUe=(t,e,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return ihe(e,t);for(var i=Math.floor(t/n),a=t%n,s=e-t,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var c=o.length%2===0?[0,s]:[s];return[...LUe(r,i),...o,...c].map(f=>"".concat(f,"px")).join(", ")};function $Ue(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,l=Qj(n,DUe),u=xl(l);return O.createElement(Dje,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:s,clipPathId:e})}function jUe(t){var{showLabels:e,children:r,points:n}=t,i=O.useMemo(()=>n==null?void 0:n.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ec(ec({},l),{},{value:a.value,payload:a.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return O.createElement(Pfe,{value:e?i:void 0},r)}function JW(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a}=t,{type:s,layout:o,connectNulls:l,needClip:u,shape:c}=a,f=Qj(a,NUe),h=ec(ec({},us(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:n,type:s,layout:o,connectNulls:l,strokeDasharray:i??a.strokeDasharray});return O.createElement(O.Fragment,null,(n==null?void 0:n.length)>1&&O.createElement(XB,r_({shapeType:"curve",option:c},h,{pathRef:r})),O.createElement($Ue,{points:n,clipPathId:e,props:a}))}function VUe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function UUe(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:c,animationEasing:f,animateNewValues:h,width:d,height:p,onAnimationEnd:m,onAnimationStart:v}=r,y=i.current,w=TI(s,"recharts-line-"),b=O.useRef(w),[A,x]=O.useState(!1),_=!A,S=O.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),E=O.useCallback(()=>{typeof v=="function"&&v(),x(!0)},[v]),T=VUe(n.current),D=O.useRef(0);b.current!==w&&(D.current=a.current,b.current=w);var N=D.current;return O.createElement(jUe,{points:s,showLabels:_},r.children,O.createElement(CI,{animationId:w,begin:u,duration:c,isActive:l,easing:f,onAnimationEnd:S,onAnimationStart:E,key:w},P=>{var M=Bi(N,T+N,P),j=Math.min(M,T),K;if(l)if(o){var k="".concat(o).split(/[,\s]+/gim).map(H=>parseFloat(H));K=BUe(j,T,k)}else K=ihe(T,j);else K=o==null?void 0:String(o);if(P>0&&T>0&&(i.current=s,a.current=Math.max(a.current,j)),y){var V=y.length/s.length,q=P===1?s:s.map((H,te)=>{var ue=Math.floor(te*V);if(y[ue]){var re=y[ue];return ec(ec({},H),{},{x:Bi(re.x,H.x,P),y:Bi(re.y,H.y,P)})}return h?ec(ec({},H),{},{x:Bi(d*2,H.x,P),y:Bi(p/2,H.y,P)}):ec(ec({},H),{},{x:H.x,y:H.y})});return i.current=q,O.createElement(JW,{props:r,points:q,clipPathId:e,pathRef:n,strokeDasharray:K})}return O.createElement(JW,{props:r,points:s,clipPathId:e,pathRef:n,strokeDasharray:K})}),O.createElement(Ife,{label:r.label}))}function zUe(t){var{clipPathId:e,props:r}=t,n=O.useRef(null),i=O.useRef(0),a=O.useRef(null);return O.createElement(UUe,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var qUe=(t,e)=>{var r,n;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(n=t.y)!==null&&n!==void 0?n:void 0,value:t.value,errorVal:Qn(t.payload,e)}};class HUe extends O.Component{render(){var{hide:e,dot:r,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:l,width:u,height:c,id:f,needClip:h,zIndex:d}=this.props;if(e)return null;var p=wr("recharts-line",i),m=f,{r:v,strokeWidth:y}=TUe(r),w=Bfe(r),b=v*2+y,A=h?"url(#clipPath-".concat(w?"":"dots-").concat(m,")"):void 0;return O.createElement(mu,{zIndex:d},O.createElement(So,{className:p},h&&O.createElement("defs",null,O.createElement(Xfe,{clipPathId:m,xAxisId:a,yAxisId:s}),!w&&O.createElement("clipPath",{id:"clipPath-dots-".concat(m)},O.createElement("rect",{x:l-b/2,y:o-b/2,width:u+b,height:c+b}))),O.createElement(Kfe,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:qUe,errorBarOffset:0},O.createElement(zUe,{props:this.props,clipPathId:m}))),O.createElement(Kje,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var ahe={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ua.line,type:"linear"};function WUe(t){var e=qi(t,ahe),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,hide:u,isAnimationActive:c,label:f,legendType:h,xAxisId:d,yAxisId:p,id:m}=e,v=Qj(e,PUe),{needClip:y}=Gj(d,p),w=Wj(),b=xI(),A=Va(),x=st(D=>CUe(D,d,p,A,m));if(b!=="horizontal"&&b!=="vertical"||x==null||w==null)return null;var{height:_,width:S,x:E,y:T}=w;return O.createElement(HUe,r_({},v,{id:m,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:c,hide:u,label:f,legendType:h,xAxisId:d,yAxisId:p,points:x,layout:b,height:_,width:S,left:E,top:T,needClip:y}))}function GUe(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=t;return l.map((u,c)=>{var f=Qn(u,s);if(e==="horizontal"){var h=N2({axis:r,ticks:i,bandSize:o,entry:u,index:c}),d=sn(f)?null:n.scale(f);return{x:h,y:d,value:f,payload:u}}var p=sn(f)?null:r.scale(f),m=N2({axis:n,ticks:a,bandSize:o,entry:u,index:c});return p==null||m==null?null:{x:p,y:m,value:f,payload:u}}).filter(Boolean)}function KUe(t){var e=qi(t,ahe),r=Va();return O.createElement(zfe,{id:e.id,type:"line"},n=>O.createElement(O.Fragment,null,O.createElement(Vfe,{legendPayload:RUe(e)}),O.createElement(FUe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),O.createElement(Hfe,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),O.createElement(WUe,r_({},e,{id:n}))))}var Nu=O.memo(KUe,rO);Nu.displayName="Line";var XUe=["option","isActive"];function Qx(){return Qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qx.apply(null,arguments)}function YUe(t,e){if(t==null)return{};var r,n,i=QUe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function QUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ZUe(t){var{option:e,isActive:r}=t,n=YUe(t,XUe);return typeof e=="string"?O.createElement(XB,Qx({option:O.createElement(iI,Qx({type:e},n)),isActive:r,shapeType:"symbols"},n)):O.createElement(XB,Qx({option:e,isActive:r,shapeType:"symbols"},n))}var JUe=(t,e,r,n,i,a,s)=>HI(t,"xAxis",e,s),e8e=(t,e,r,n,i,a,s)=>qI(t,"xAxis",e,s),t8e=(t,e,r,n,i,a,s)=>HI(t,"yAxis",r,s),r8e=(t,e,r,n,i,a,s)=>qI(t,"yAxis",r,s),n8e=(t,e,r,n)=>T4e(t,"zAxis",n,!1),i8e=(t,e,r,n,i)=>i,a8e=(t,e,r,n,i,a)=>a,s8e=(t,e,r,n,i,a,s)=>kI(t,e,r,s),o8e=_e([xj,i8e],(t,e)=>t.filter(r=>r.type==="scatter").find(r=>r.id===e)),l8e=_e([s8e,JUe,e8e,t8e,r8e,n8e,o8e,a8e],(t,e,r,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:c}=t;if(s!=null){var f;if((s==null?void 0:s.data)!=null&&s.data.length>0?f=s.data:f=l==null?void 0:l.slice(u,c+1),!(f==null||e==null||n==null||r==null||i==null||(r==null?void 0:r.length)===0||(i==null?void 0:i.length)===0))return A8e({displayedData:f,xAxis:e,yAxis:n,zAxis:a,scatterSettings:s,xAxisTicks:r,yAxisTicks:i,cells:o})}}),u8e=["onMouseEnter","onClick","onMouseLeave"],c8e=["id"],f8e=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function YB(t,e){if(t==null)return{};var r,n,i=h8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function h8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cv.apply(null,arguments)}function eG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(r),!0).forEach(function(n){d8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d8e(t,e,r){return(e=p8e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p8e(t){var e=m8e(t,"string");return typeof e=="symbol"?e:e+""}function m8e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g8e=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:gI(r,e),payload:t}]},v8e=O.memo(t=>{var{dataKey:e,points:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,tooltipType:l}=t,u={dataDefinedOnItem:r==null?void 0:r.map(c=>c.tooltipPayload),positions:r==null?void 0:r.map(c=>c.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:a,nameKey:void 0,dataKey:e,name:gI(s,e),hide:o,type:l,color:a,unit:""}};return O.createElement(jfe,{tooltipEntrySettings:u})});function y8e(t){var{points:e,props:r}=t,{line:n,lineType:i,lineJointType:a}=r;if(!n)return null;var s=xl(r),o=CS(n),l,u;if(i==="joint")l=e.map(v=>{var y,w;return{x:(y=v.cx)!==null&&y!==void 0?y:null,y:(w=v.cy)!==null&&w!==void 0?w:null}});else if(i==="fitting"){var{xmin:c,xmax:f,a:h,b:d}=WMe(e),p=v=>h*v+d;l=[{x:c,y:p(c)},{x:f,y:p(f)}]}var m=Rs(Rs(Rs({},s),{},{fill:"none",stroke:s&&s.fill},o),{},{points:l});return O.isValidElement(n)?u=O.cloneElement(n,m):typeof n=="function"?u=n(m):u=O.createElement(V6,Cv({},m,{type:a})),O.createElement(So,{className:"recharts-scatter-line",key:"recharts-scatter-line"},u)}function b8e(t){var{showLabels:e,points:r,children:n}=t,i=OS(),a=O.useMemo(()=>r==null?void 0:r.map(s=>{var o,l,u={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:s.width,height:s.height,lowerWidth:s.width,upperWidth:s.width};return Rs(Rs({},u),{},{value:void 0,payload:s.payload,viewBox:u,parentViewBox:i,fill:void 0})}),[i,r]);return O.createElement(Pfe,{value:e?a:void 0},n)}function w8e(t){var{points:e,allOtherScatterProps:r}=t,{shape:n,activeShape:i,dataKey:a}=r,s=st(v1),{onMouseEnter:o,onClick:l,onMouseLeave:u}=r,c=YB(r,u8e),f=lje(o,r.dataKey),h=uje(u),d=cje(l,r.dataKey);if(!aIe(e))return null;var{id:p}=r,m=YB(r,c8e),v=xl(m);return O.createElement(O.Fragment,null,O.createElement(y8e,{points:e,props:m}),e.map((y,w)=>{var b=i!=null&&i!==!1,A=b&&s===String(w),x=b&&A?i:n,_=Rs(Rs(Rs({},v),y),{},{[Sle]:w,[Cle]:String(a)});return O.createElement(mu,{key:"symbol-".concat(y==null?void 0:y.cx,"-").concat(y==null?void 0:y.cy,"-").concat(y==null?void 0:y.size,"-").concat(w),zIndex:A?ua.activeDot:void 0},O.createElement(So,Cv({className:"recharts-scatter-symbol"},m6(c,y,w),{onMouseEnter:f(y,w),onMouseLeave:h(y,w),onClick:d(y,w)}),O.createElement(ZUe,Cv({option:x,isActive:A},_))))}))}function x8e(t){var{previousPointsRef:e,props:r}=t,{points:n,isAnimationActive:i,animationBegin:a,animationDuration:s,animationEasing:o}=r,l=e.current,u=TI(r,"recharts-scatter-"),[c,f]=O.useState(!1),h=O.useCallback(()=>{f(!1)},[]),d=O.useCallback(()=>{f(!0)},[]),p=!c;return O.createElement(b8e,{showLabels:p,points:n},r.children,O.createElement(CI,{animationId:u,begin:a,duration:s,isActive:i,easing:o,onAnimationEnd:h,onAnimationStart:d,key:u},m=>{var v=m===1?n:n==null?void 0:n.map((y,w)=>{var b=l&&l[w];return b?Rs(Rs({},y),{},{cx:y.cx==null?void 0:Bi(b.cx,y.cx,m),cy:y.cy==null?void 0:Bi(b.cy,y.cy,m),size:Bi(b.size,y.size,m)}):Rs(Rs({},y),{},{size:Bi(0,y.size,m)})});return m>0&&(e.current=v),O.createElement(So,null,O.createElement(w8e,{points:v,allOtherScatterProps:r,showLabels:p}))}),O.createElement(Ife,{label:r.label}))}function A8e(t){var{displayedData:e,xAxis:r,yAxis:n,zAxis:i,scatterSettings:a,xAxisTicks:s,yAxisTicks:o,cells:l}=t,u=sn(r.dataKey)?a.dataKey:r.dataKey,c=sn(n.dataKey)?a.dataKey:n.dataKey,f=i&&i.dataKey,h=i?i.range:oce.range,d=h&&h[0],p=r.scale.bandwidth?r.scale.bandwidth():0,m=n.scale.bandwidth?n.scale.bandwidth():0;return e.map((v,y)=>{var w=Qn(v,u),b=Qn(v,c),A=!sn(f)&&Qn(v,f)||"-",x=[{name:sn(r.dataKey)?a.name:r.name||String(r.dataKey),unit:r.unit||"",value:w,payload:v,dataKey:u,type:a.tooltipType},{name:sn(n.dataKey)?a.name:n.name||String(n.dataKey),unit:n.unit||"",value:b,payload:v,dataKey:c,type:a.tooltipType}];A!=="-"&&x.push({name:i.name||i.dataKey,unit:i.unit||"",value:A,payload:v,dataKey:f,type:a.tooltipType});var _=N2({axis:r,ticks:s,bandSize:p,entry:v,index:y,dataKey:u}),S=N2({axis:n,ticks:o,bandSize:m,entry:v,index:y,dataKey:c}),E=A!=="-"?i.scale(A):d,T=Math.sqrt(Math.max(E,0)/Math.PI);return Rs(Rs({},v),{},{cx:_,cy:S,x:_==null?void 0:_-T,y:S==null?void 0:S-T,width:2*T,height:2*T,size:E,node:{x:w,y:b,z:A},tooltipPayload:x,tooltipPosition:{x:_,y:S},payload:v},l&&l[y]&&l[y].props)})}var _8e=(t,e,r)=>({x:t.cx,y:t.cy,value:Number(r==="x"?t.node.x:t.node.y),errorVal:Qn(t,e)});function E8e(t){var{hide:e,points:r,className:n,needClip:i,xAxisId:a,yAxisId:s,id:o}=t,l=O.useRef(null);if(e)return null;var u=wr("recharts-scatter",n),c=o;return O.createElement(mu,{zIndex:t.zIndex},O.createElement(So,{className:u,clipPath:i?"url(#clipPath-".concat(c,")"):void 0,id:o},i&&O.createElement("defs",null,O.createElement(Xfe,{clipPathId:c,xAxisId:a,yAxisId:s})),O.createElement(Kfe,{xAxisId:a,yAxisId:s,data:r,dataPointFormatter:_8e,errorBarOffset:0},O.createElement(So,{key:"recharts-scatter-symbols"},O.createElement(x8e,{props:t,previousPointsRef:l})))))}var she={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:ua.scatter};function S8e(t){var e=qi(t,she),{animationBegin:r,animationDuration:n,animationEasing:i,hide:a,isAnimationActive:s,legendType:o,lineJointType:l,lineType:u,shape:c,xAxisId:f,yAxisId:h,zAxisId:d}=e,p=YB(e,f8e),{needClip:m}=Gj(f,h),v=O.useMemo(()=>H6e(t.children,mfe),[t.children]),y=Va(),w=st(b=>l8e(b,f,h,d,t.id,v,y));return m==null||w==null?null:O.createElement(O.Fragment,null,O.createElement(v8e,{dataKey:t.dataKey,points:w,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),O.createElement(E8e,Cv({},p,{xAxisId:f,yAxisId:h,zAxisId:d,lineType:u,lineJointType:l,legendType:o,shape:c,hide:a,isAnimationActive:s,animationBegin:r,animationDuration:n,animationEasing:i,points:w,needClip:m})))}function C8e(t){var e=qi(t,she),r=Va();return O.createElement(zfe,{id:e.id,type:"scatter"},n=>O.createElement(O.Fragment,null,O.createElement(Vfe,{legendPayload:g8e(e)}),O.createElement(Hfe,{type:"scatter",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:e.zAxisId,dataKey:e.dataKey,hide:e.hide,name:e.name,tooltipType:e.tooltipType,isPanorama:r}),O.createElement(S8e,Cv({},e,{id:n}))))}var Tx=O.memo(C8e,rO);Tx.displayName="Scatter";var T8e=["domain","range"],D8e=["domain","range"];function tG(t,e){if(t==null)return{};var r,n,i=N8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function N8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function rG(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ohe(t,e){if(t===e)return!0;var{domain:r,range:n}=t,i=tG(t,T8e),{domain:a,range:s}=e,o=tG(e,D8e);return!rG(r,a)||!rG(n,s)?!1:rO(i,o)}var P8e=["dangerouslySetInnerHTML","ticks"],M8e=["id"];function QB(){return QB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QB.apply(null,arguments)}function nG(t,e){if(t==null)return{};var r,n,i=I8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function I8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function O8e(t){var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(Oje(t)):r.current!==t&&e(kje({prev:r.current,next:t})),r.current=t},[t,e]),O.useLayoutEffect(()=>()=>{r.current&&(e(Rje(r.current)),r.current=null)},[e]),null}var k8e=t=>{var{xAxisId:e,className:r}=t,n=st(Tle),i=Va(),a="xAxis",s=st(v=>G1(v,a,e,i)),o=st(v=>$ce(v,a,e,i)),l=st(v=>p4e(v,e)),u=st(v=>w4e(v,e)),c=st(v=>ace(v,e));if(l==null||u==null||c==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=t,d=nG(t,P8e),{id:p}=c,m=nG(c,M8e);return O.createElement(Yj,QB({},d,m,{scale:s,x:u.x,y:u.y,width:l.width,height:l.height,className:wr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},R8e={allowDataOverflow:Si.allowDataOverflow,allowDecimals:Si.allowDecimals,allowDuplicatedCategory:Si.allowDuplicatedCategory,angle:Si.angle,axisLine:$f.axisLine,height:Si.height,hide:!1,includeHidden:Si.includeHidden,interval:Si.interval,minTickGap:Si.minTickGap,mirror:Si.mirror,orientation:Si.orientation,padding:Si.padding,reversed:Si.reversed,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,tickLine:$f.tickLine,tickSize:$f.tickSize,type:Si.type,xAxisId:0},F8e=t=>{var e=qi(t,R8e);return O.createElement(O.Fragment,null,O.createElement(O8e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),O.createElement(k8e,e))},Ih=O.memo(F8e,ohe);Ih.displayName="XAxis";var L8e=["dangerouslySetInnerHTML","ticks"],B8e=["id"];function ZB(){return ZB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZB.apply(null,arguments)}function iG(t,e){if(t==null)return{};var r,n,i=$8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function j8e(t){var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(Fje(t)):r.current!==t&&e(Lje({prev:r.current,next:t})),r.current=t},[t,e]),O.useLayoutEffect(()=>()=>{r.current&&(e(Bje(r.current)),r.current=null)},[e]),null}var V8e=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,a=O.useRef(null),s=O.useRef(null),o=st(Tle),l=Va(),u=bn(),c="yAxis",f=st(x=>G1(x,c,e,l)),h=st(x=>_4e(x,e)),d=st(x=>A4e(x,e)),p=st(x=>$ce(x,c,e,l)),m=st(x=>sce(x,e));if(O.useLayoutEffect(()=>{if(!(n!=="auto"||!h||Uj(i)||O.isValidElement(i)||m==null)){var x=a.current;if(x){var _=x.getCalculatedWidth();Math.round(h.width)!==Math.round(_)&&u($je({id:e,width:_}))}}},[p,h,u,i,e,n,m]),h==null||d==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=t,w=iG(t,L8e),{id:b}=m,A=iG(m,B8e);return O.createElement(Yj,ZB({},w,A,{ref:a,labelRef:s,scale:f,x:d.x,y:d.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:wr("recharts-".concat(c," ").concat(c),r),viewBox:o,ticks:p,axisType:c}))},U8e={allowDataOverflow:Ci.allowDataOverflow,allowDecimals:Ci.allowDecimals,allowDuplicatedCategory:Ci.allowDuplicatedCategory,angle:Ci.angle,axisLine:$f.axisLine,hide:!1,includeHidden:Ci.includeHidden,interval:Ci.interval,minTickGap:Ci.minTickGap,mirror:Ci.mirror,orientation:Ci.orientation,padding:Ci.padding,reversed:Ci.reversed,scale:Ci.scale,tick:Ci.tick,tickCount:Ci.tickCount,tickLine:$f.tickLine,tickSize:$f.tickSize,type:Ci.type,width:Ci.width,yAxisId:0},z8e=t=>{var e=qi(t,U8e);return O.createElement(O.Fragment,null,O.createElement(j8e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),O.createElement(V8e,e))},Oh=O.memo(z8e,ohe);Oh.displayName="YAxis";var q8e=(t,e)=>e,Zj=_e([q8e,Zr,rce,gi,tfe,yh,j$e,va],G$e),Jj=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},lhe=Al("mouseClick"),uhe=MS();uhe.startListening({actionCreator:lhe,effect:(t,e)=>{var r=t.payload,n=Zj(e.getState(),Jj(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(B4e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var JB=Al("mouseMove"),che=MS(),_T=null;che.startListening({actionCreator:JB,effect:(t,e)=>{var r=t.payload;_T!==null&&cancelAnimationFrame(_T);var n=Jj(r);_T=requestAnimationFrame(()=>{var i=e.getState(),a=Pj(i,i.tooltip.settings.shared);if(a==="axis"){var s=Zj(i,n);(s==null?void 0:s.activeIndex)!=null?e.dispatch(Gce({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(Wce())}_T=null})}});var aG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},fhe=Vs({name:"rootProps",initialState:aG,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:aG.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),H8e=fhe.reducer,{updateOptions:W8e}=fhe.actions,hhe=Vs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:opt}=hhe.actions,G8e=hhe.reducer,dhe=Al("keyDown"),phe=Al("focus"),eV=MS();eV.startListening({actionCreator:dhe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Mj(i,X1(r),US(r),GS(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=yh(r);if(a==="Enter"){var u=Z2(r,"axis","hover",String(i.index));e.dispatch(zB({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var c=D4e(r),f=c==="left-to-right"?1:-1,h=a==="ArrowRight"?1:-1,d=o+h*f;if(!(l==null||d>=l.length||d<0)){var p=Z2(r,"axis","hover",String(d));e.dispatch(zB({active:!0,activeIndex:d.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}}});eV.startListening({actionCreator:phe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=Z2(r,"axis","hover",String(a));e.dispatch(zB({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Vo=Al("externalEvent"),mhe=MS(),AR=new Map;mhe.startListening({actionCreator:Vo,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var i=n.type,a=AR.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:E$e(o),activeDataKey:A$e(o),activeIndex:v1(o),activeLabel:ife(o),activeTooltipIndex:v1(o),isTooltipActive:S$e(o)};r(l,n)}finally{AR.delete(i)}});AR.set(i,s)}}});var K8e=_e([K1],t=>t.tooltipItemPayloads),X8e=_e([K8e,HS,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,r);return s}}}),ghe=Al("touchMove"),vhe=MS();vhe.startListening({actionCreator:ghe,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),i=Pj(n,n.tooltip.settings.shared);if(i==="axis"){var a=Zj(n,Jj({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(Gce({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Sle),c=(s=l.getAttribute(Cle))!==null&&s!==void 0?s:void 0,f=X8e(e.getState(),u,c);e.dispatch(Hce({activeDataKey:c,activeIndex:u,activeCoordinate:f}))}}}});var Y8e=Goe({brush:TVe,cartesianAxis:jje,chartData:_5e,errorBars:Yje,graphicalItems:yje,layout:tke,legend:aRe,options:y5e,polarAxis:B6e,polarOptions:G8e,referenceElements:kVe,rootProps:H8e,tooltip:$4e,zIndex:o5e}),Q8e=function(e){return COe({reducer:Y8e,preloadedState:e,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([uhe.middleware,che.middleware,eV.middleware,mhe.middleware,vhe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(lle({type:"raf"}))},devTools:RS.devToolsEnabled})};function Z8e(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=Va(),a=O.useRef(null);if(i)return r;a.current==null&&(a.current=Q8e(e));var s=S6;return O.createElement(_Ve,{context:s,store:a.current},r)}function J8e(t){var{layout:e,margin:r}=t,n=bn(),i=Va();return O.useEffect(()=>{i||(n(ZOe(e)),n(QOe(r)))},[n,i,e,r]),null}var eze=O.memo(J8e,rO);function tze(t){var e=bn();return O.useEffect(()=>{e(W8e(t))},[e,t]),null}function sG(t){var{zIndex:e,isPanorama:r}=t,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=Ufe("".concat(n).concat(e)),a=bn();return O.useLayoutEffect(()=>(a(a5e({zIndex:e,elementId:i,isPanorama:r})),()=>{a(s5e({zIndex:e,isPanorama:r}))}),[a,e,i,r]),O.createElement("g",{tabIndex:-1,id:i})}function oG(t){var{children:e,isPanorama:r}=t,n=st(X$e);if(!n||n.length===0)return e;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return O.createElement(O.Fragment,null,i.map(s=>O.createElement(sG,{key:s,zIndex:s,isPanorama:r})),e,a.map(s=>O.createElement(sG,{key:s,zIndex:s,isPanorama:r})))}var rze=["children"];function nze(t,e){if(t==null)return{};var r,n,i=ize(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ize(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aP.apply(null,arguments)}var aze={width:"100%",height:"100%",display:"block"},sze=O.forwardRef((t,e)=>{var r=L6(),n=B6(),i=zle();if(!Ac(r)||!Ac(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=t,u,c;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?c=s.role:c=i?"application":void 0),O.createElement(u6,aP({},s,{title:o,desc:l,role:c,tabIndex:u,width:r,height:n,style:aze,ref:e}),a)}),oze=t=>{var{children:e}=t,r=st(wI);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return O.createElement(u6,{width:n,height:i,x:s,y:a},e)},lG=O.forwardRef((t,e)=>{var{children:r}=t,n=nze(t,rze),i=Va();return i?O.createElement(oze,null,O.createElement(oG,{isPanorama:!0},r)):O.createElement(sze,aP({ref:e},n),O.createElement(oG,{isPanorama:!1},r))});function lze(){var t=bn(),[e,r]=O.useState(null),n=st(gke);return O.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Ui(a)&&a!==n&&t(eke(a))}},[e,t,n]),r}function uG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uze(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uG(Object(r),!0).forEach(function(n){cze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cze(t,e,r){return(e=fze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fze(t){var e=hze(t,"string");return typeof e=="symbol"?e:e+""}function hze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tv.apply(null,arguments)}var dze=()=>(I5e(),null);function sP(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var pze=O.forwardRef((t,e)=>{var r,n,i=O.useRef(null),[a,s]=O.useState({containerWidth:sP((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:sP((n=t.style)===null||n===void 0?void 0:n.height)}),o=O.useCallback((u,c)=>{s(f=>{var h=Math.round(u),d=Math.round(c);return f.containerWidth===h&&f.containerHeight===d?f:{containerWidth:h,containerHeight:d}})},[]),l=O.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:c,height:f}=u.getBoundingClientRect();o(c,f);var h=p=>{var{width:m,height:v}=p[0].contentRect;o(m,v)},d=new ResizeObserver(h);d.observe(u),i.current=d}},[e,o]);return O.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),O.createElement(O.Fragment,null,O.createElement(AI,{width:a.containerWidth,height:a.containerHeight}),O.createElement("div",Tv({ref:l},t)))}),mze=O.forwardRef((t,e)=>{var{width:r,height:n}=t,[i,a]=O.useState({containerWidth:sP(r),containerHeight:sP(n)}),s=O.useCallback((l,u)=>{a(c=>{var f=Math.round(l),h=Math.round(u);return c.containerWidth===f&&c.containerHeight===h?c:{containerWidth:f,containerHeight:h}})},[]),o=O.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:u,height:c}=l.getBoundingClientRect();s(u,c)}},[e,s]);return O.createElement(O.Fragment,null,O.createElement(AI,{width:i.containerWidth,height:i.containerHeight}),O.createElement("div",Tv({ref:o},t)))}),gze=O.forwardRef((t,e)=>{var{width:r,height:n}=t;return O.createElement(O.Fragment,null,O.createElement(AI,{width:r,height:n}),O.createElement("div",Tv({ref:e},t)))}),vze=O.forwardRef((t,e)=>{var{width:r,height:n}=t;return th(r)||th(n)?O.createElement(mze,Tv({},t,{ref:e})):O.createElement(gze,Tv({},t,{ref:e}))});function yze(t){return t===!0?pze:vze}var bze=O.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:c,onMouseMove:f,onMouseUp:h,onTouchEnd:d,onTouchMove:p,onTouchStart:m,style:v,width:y,responsive:w,dispatchTouchEvents:b=!0}=t,A=O.useRef(null),x=bn(),[_,S]=O.useState(null),[E,T]=O.useState(null),D=lze(),N=F6(),P=(N==null?void 0:N.width)>0?N.width:y,M=(N==null?void 0:N.height)>0?N.height:i,j=O.useCallback(z=>{D(z),typeof e=="function"&&e(z),S(z),T(z),z!=null&&(A.current=z)},[D,e,S,T]),K=O.useCallback(z=>{x(lhe(z)),x(Vo({handler:a,reactEvent:z}))},[x,a]),k=O.useCallback(z=>{x(JB(z)),x(Vo({handler:u,reactEvent:z}))},[x,u]),V=O.useCallback(z=>{x(Wce()),x(Vo({handler:c,reactEvent:z}))},[x,c]),q=O.useCallback(z=>{x(JB(z)),x(Vo({handler:f,reactEvent:z}))},[x,f]),H=O.useCallback(()=>{x(phe())},[x]),te=O.useCallback(z=>{x(dhe(z.key))},[x]),ue=O.useCallback(z=>{x(Vo({handler:s,reactEvent:z}))},[x,s]),re=O.useCallback(z=>{x(Vo({handler:o,reactEvent:z}))},[x,o]),L=O.useCallback(z=>{x(Vo({handler:l,reactEvent:z}))},[x,l]),ie=O.useCallback(z=>{x(Vo({handler:h,reactEvent:z}))},[x,h]),X=O.useCallback(z=>{x(Vo({handler:m,reactEvent:z}))},[x,m]),pe=O.useCallback(z=>{b&&x(ghe(z)),x(Vo({handler:p,reactEvent:z}))},[x,b,p]),de=O.useCallback(z=>{x(Vo({handler:d,reactEvent:z}))},[x,d]),ae=yze(w);return O.createElement(ffe.Provider,{value:_},O.createElement(Gse.Provider,{value:E},O.createElement(ae,{width:P??(v==null?void 0:v.width),height:M??(v==null?void 0:v.height),className:wr("recharts-wrapper",n),style:uze({position:"relative",cursor:"default",width:P,height:M},v),onClick:K,onContextMenu:ue,onDoubleClick:re,onFocus:H,onKeyDown:te,onMouseDown:L,onMouseEnter:k,onMouseLeave:V,onMouseMove:q,onMouseUp:ie,onTouchEnd:de,onTouchMove:pe,onTouchStart:X,ref:j},O.createElement(dze,null),r)))}),wze=["width","height","responsive","children","className","style","compact","title","desc"];function xze(t,e){if(t==null)return{};var r,n,i=Aze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Aze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _ze=O.forwardRef((t,e)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:u,desc:c}=t,f=xze(t,wze),h=xl(f);return l?O.createElement(O.Fragment,null,O.createElement(AI,{width:r,height:n}),O.createElement(lG,{otherAttributes:h,title:u,desc:c},a)):O.createElement(bze,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},O.createElement(lG,{otherAttributes:h,title:u,desc:c,ref:e},O.createElement(FVe,null,a)))});function e4(){return e4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e4.apply(null,arguments)}var Eze={top:5,right:5,bottom:5,left:5},Sze={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Eze,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},tV=O.forwardRef(function(e,r){var n,i=qi(e.categoricalChartProps,Sze),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:u}=e,c={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return O.createElement(Z8e,{preloadedState:{options:c},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:a},O.createElement(CVe,{chartData:u.data}),O.createElement(eze,{layout:i.layout,margin:i.margin}),O.createElement(tze,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),O.createElement(_ze,e4({},i,{ref:r})))}),Cze=["axis"],_R=O.forwardRef((t,e)=>O.createElement(tV,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cze,tooltipPayloadSearcher:jj,categoricalChartProps:t,ref:e})),Tze=["item"],Dze=O.forwardRef((t,e)=>O.createElement(tV,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Tze,tooltipPayloadSearcher:jj,categoricalChartProps:t,ref:e})),Nze=["axis"],ER=O.forwardRef((t,e)=>O.createElement(tV,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Nze,tooltipPayloadSearcher:jj,categoricalChartProps:t,ref:e}));function Pze(){const{isDark:t}=Cl(),[e,r]=O.useState("cmb"),n=[{l:2,Cl:1200},{l:10,Cl:2400},{l:20,Cl:3200},{l:30,Cl:3800},{l:50,Cl:5e3},{l:75,Cl:5300},{l:100,Cl:5500},{l:120,Cl:5400},{l:150,Cl:5200},{l:180,Cl:5100},{l:200,Cl:4800},{l:250,Cl:4200},{l:300,Cl:3500},{l:400,Cl:3100},{l:500,Cl:2800},{l:650,Cl:2400},{l:800,Cl:2200},{l:1e3,Cl:1800},{l:1250,Cl:1400},{l:1500,Cl:1200},{l:1800,Cl:900},{l:2e3,Cl:800},{l:2500,Cl:500}],i=[{r:.5,v_obs:60,v_disk:60,v_dm:0},{r:1,v_obs:100,v_disk:100,v_dm:0},{r:1.5,v_obs:120,v_disk:115,v_dm:20},{r:2,v_obs:140,v_disk:130,v_dm:40},{r:2.5,v_obs:150,v_disk:138,v_dm:60},{r:3,v_obs:160,v_disk:145,v_dm:80},{r:3.5,v_obs:165,v_disk:150,v_dm:100},{r:4,v_obs:170,v_disk:155,v_dm:110},{r:4.5,v_obs:172,v_disk:157,v_dm:120},{r:5,v_obs:175,v_disk:160,v_dm:130},{r:6,v_obs:178,v_disk:162,v_dm:145},{r:7,v_obs:179,v_disk:163,v_dm:155},{r:8,v_obs:180,v_disk:165,v_dm:160},{r:10,v_obs:180,v_disk:166,v_dm:170},{r:12,v_obs:180,v_disk:166.5,v_dm:175},{r:15,v_obs:180,v_disk:168,v_dm:175},{r:18,v_obs:179.5,v_disk:168.5,v_dm:176},{r:20,v_obs:180,v_disk:169,v_dm:178}],a=[{temp:2500,mag:16,type:"Main Sequence"},{temp:3e3,mag:15,type:"Main Sequence"},{temp:3500,mag:12,type:"Main Sequence"},{temp:4e3,mag:10,type:"Main Sequence"},{temp:5e3,mag:6,type:"Main Sequence"},{temp:5500,mag:4.8,type:"Main Sequence"},{temp:6e3,mag:3.5,type:"Main Sequence"},{temp:6500,mag:3,type:"Main Sequence"},{temp:7500,mag:1.8,type:"Main Sequence"},{temp:8e3,mag:1.5,type:"Main Sequence"},{temp:9e3,mag:.5,type:"Main Sequence"},{temp:1e4,mag:-1,type:"Main Sequence"},{temp:3e3,mag:-2,type:"Giants"},{temp:3500,mag:-2.5,type:"Giants"},{temp:4e3,mag:-2.8,type:"Giants"},{temp:4500,mag:-3,type:"Giants"},{temp:5e3,mag:-3.2,type:"Giants"},{temp:5500,mag:-4,type:"Giants"},{temp:3e3,mag:-6,type:"Supergiants"},{temp:3500,mag:-6.5,type:"Supergiants"},{temp:4e3,mag:-7,type:"Supergiants"},{temp:4500,mag:-7.3,type:"Supergiants"},{temp:7e3,mag:11,type:"White Dwarfs"},{temp:8e3,mag:12,type:"White Dwarfs"},{temp:1e4,mag:10,type:"White Dwarfs"},{temp:15e3,mag:10,type:"White Dwarfs"},{temp:2e4,mag:8,type:"White Dwarfs"}],s=[{t:0,h:.2},{t:.05,h:.8},{t:.1,h:1.5},{t:.15,h:2},{t:.2,h:2.5},{t:.25,h:3.2},{t:.3,h:4},{t:.35,h:5.2},{t:.4,h:6.5},{t:.45,h:8.2},{t:.5,h:10},{t:.55,h:12.5},{t:.6,h:15},{t:.65,h:18.5},{t:.7,h:22},{t:.75,h:26},{t:.8,h:32},{t:.85,h:38},{t:.9,h:45},{t:.95,h:48},{t:1,h:50}],o=Array.from({length:100},(f,h)=>{const d=(h-50)/50,v=1-.01*Math.max(0,1-Math.abs(d)*1.5);return{phase:d.toFixed(3),flux:parseFloat(v.toFixed(6))}}),l=[{day:-15,mag:22},{day:-10,mag:20},{day:-5,mag:18},{day:-2,mag:-18.5},{day:0,mag:-19.3},{day:2,mag:-19.1},{day:5,mag:-18.5},{day:8,mag:-18},{day:10,mag:-17.8},{day:15,mag:-16.5},{day:20,mag:-15.2},{day:25,mag:-13.5},{day:30,mag:-12},{day:40,mag:-8},{day:50,mag:-4},{day:60,mag:-1}],u=[{mass:5,currentLimit:50,futureLimit:.05},{mass:10,currentLimit:100,futureLimit:.1},{mass:20,currentLimit:120,futureLimit:.11},{mass:50,currentLimit:150,futureLimit:.12},{mass:75,currentLimit:140,futureLimit:.11},{mass:100,currentLimit:10,futureLimit:.01},{mass:200,currentLimit:15,futureLimit:.012},{mass:500,currentLimit:20,futureLimit:.015},{mass:1e3,currentLimit:1,futureLimit:.001},{mass:2e3,currentLimit:.5,futureLimit:5e-4}],c={grid:t?"#374151":"#e5e7eb",text:t?"#d1d5db":"#374151"};return I.jsxs("div",{className:"space-y-12",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-green-600 to-blue-600 dark:from-green-400 dark:to-blue-400 bg-clip-text text-transparent",children:"  "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:", , ,     (7 )"})]}),I.jsx("div",{className:"overflow-x-auto flex gap-2 border-b border-gray-300 dark:border-gray-700 pb-2",children:[{id:"cmb",label:"CMB ",icon:""},{id:"rotation",label:"",icon:""},{id:"hr",label:"HR ",icon:""},{id:"gw",label:"",icon:""},{id:"exoplanet",label:"",icon:""},{id:"supernovae",label:"SN Ia",icon:""},{id:"dm-wimp",label:"",icon:""}].map(f=>I.jsxs("button",{onClick:()=>r(f.id),className:`px-3 py-2 text-xs sm:text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${e===f.id?t?"text-blue-400 border-blue-400":"text-blue-600 border-blue-600":t?"text-gray-400 border-transparent hover:text-gray-300":"text-gray-600 border-transparent hover:text-gray-700"}`,children:[f.icon," ",f.label]},f.id))}),e==="cmb"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"   "}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"      .      (_k=0),     ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(_R,{data:n,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"l",label:{value:" ( )",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:"C_",angle:-90,position:"insideLeft"},tick:{fill:c.text}}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff",border:`1px solid ${t?"#374151":"#d1d5db"}`}}),I.jsx(tN,{}),I.jsx(Nu,{type:"monotone",dataKey:"Cl",stroke:"#ef4444",strokeWidth:2,dot:{r:4},name:"CMB Power"})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:"  "})," (~220):  ,   "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:""}),":    "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"_ h=0.1197, _m h=0.1220"})," (Planck 2018)"]})]})]})]}),e==="rotation"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"   "}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"  (v_obs)   .  (v_dm)    ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(ER,{data:i,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"r",label:{value:" r (kpc)",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:" (km/s)",angle:-90,position:"insideLeft"},tick:{fill:c.text}}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(tN,{}),I.jsx(Nu,{type:"monotone",dataKey:"v_obs",stroke:"#3b82f6",strokeWidth:3,name:" (Total)",dot:{r:3}}),I.jsx(Nu,{type:"monotone",dataKey:"v_disk",stroke:"#f59e0b",strokeWidth:2,name:" "}),I.jsx(Nu,{type:"monotone",dataKey:"v_dm",stroke:"#8b5cf6",strokeWidth:2,name:"",strokeDasharray:"5 5"})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:"Flat rotation curve"}),":    "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),":  90% "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"CDM "}),":    "]})]})]})]}),e==="hr"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Hertzsprung-Russell "}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:" () ( ) .    ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(Dze,{data:a,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{type:"number",dataKey:"temp",name:" (K)",label:{value:"  (K)",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{type:"number",dataKey:"mag",name:"",label:{value:"  ( -)",angle:-90,position:"insideLeft"},tick:{fill:c.text}}),I.jsx(om,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(Tx,{name:"",data:a.filter(f=>f.type==="Main Sequence"),fill:"#ef4444"}),I.jsx(Tx,{name:"",data:a.filter(f=>f.type==="Giants"),fill:"#f59e0b"}),I.jsx(Tx,{name:"",data:a.filter(f=>f.type==="Supergiants"),fill:"#ec4899"}),I.jsx(Tx,{name:"",data:a.filter(f=>f.type==="White Dwarfs"),fill:"#8b5cf6"})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:""}),":     "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"/"}),":    ,    "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:""}),":   ,    "]})]})]})]}),e==="gw"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  (Binary BH Merger)"}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"    LIGO     h(t). Chirp   ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(ER,{data:s,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"t",label:{value:" ()",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:" h(t)  10^-21",angle:-90,position:"insideLeft"},tick:{fill:c.text}}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(Nu,{type:"monotone",dataKey:"h",stroke:"#06b6d4",strokeWidth:2,dot:{r:3}})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:"Chirp "}),":   +   ( )"]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"GW150914"}),": 36+29 M BH , SNR=24"]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),": LIGO (35-250 Hz) ~100"]})]})]})]}),e==="exoplanet"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"    (Transit)"}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"     ~0.01% . Kepler, TESS 5500+  ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(_R,{data:o,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"phase",label:{value:" ",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:" ",angle:-90,position:"insideLeft"},tick:{fill:c.text},domain:[.989,1.001]}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(Nu,{type:"monotone",dataKey:"flux",stroke:"#10b981",strokeWidth:2,dot:!1})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),": F/F = (R_p/R_*) ~ 0.01% ()"]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),":   "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"TESS "}),": 600+   ( )"]})]})]})]}),e==="supernovae"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Type Ia   ()"}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"   .   M_V  -19.3. Phillips      ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(_R,{data:l,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"day",label:{value:" ( )",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:"  ( +)",angle:-90,position:"insideLeft"},reversed:!0,tick:{fill:c.text}}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(Nu,{type:"monotone",dataKey:"mag",stroke:"#f97316",strokeWidth:2,dot:{r:4}})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:""}),": Phillips     "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"  "}),": 1998 Riess, Perlmutter (Nobel 2011)"]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:"H "}),": SH0ES H = 73.041.04 km/s/Mpc (2022)"]})]})]})]}),e==="dm-wimp"&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-2",children:"WIMP    (XENON, LUX)"}),I.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"WIMP-    (  vs  ).  100 GeV   ."}),I.jsx(sm,{width:"100%",height:350,children:I.jsxs(ER,{data:u,children:[I.jsx(Mh,{strokeDasharray:"3 3",stroke:c.grid}),I.jsx(Ih,{dataKey:"mass",label:{value:"WIMP  (GeV/c)",position:"bottom",offset:10},tick:{fill:c.text}}),I.jsx(Oh,{label:{value:"  ( )",angle:-90,position:"insideLeft"},tick:{fill:c.text}}),I.jsx(om,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),I.jsx(tN,{}),I.jsx(Nu,{type:"monotone",dataKey:"currentLimit",stroke:"#ef4444",strokeWidth:2,name:"  (XENON1T)"}),I.jsx(Nu,{type:"monotone",dataKey:"futureLimit",stroke:"#06b6d4",strokeWidth:2,strokeDasharray:"5 5",name:"  (DARWIN)"})]})}),I.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[I.jsx("p",{className:"font-semibold mb-2",children:" :"}),I.jsxs("ul",{className:"space-y-1 text-xs",children:[I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),": WIMP-     "]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:""}),":  ~ 10 cm (), 10 cm ( )"]}),I.jsxs("li",{children:[" ",I.jsx("strong",{children:" "}),":  WIMP       ,   "]})]})]})]})]})}function Bn(){return Bn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bn.apply(null,arguments)}var yhe={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function is(t,e){if(oP(t,e))return t[e];throw typeof t[e]=="function"&&rV(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function y1(t,e,r){if(oP(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function oP(t,e){return!Ize(t)&&!Array.isArray(t)?!1:Je(Oze,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Mze(t,e){if(!rV(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function rV(t,e){return t==null||typeof t[e]!="function"||Je(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Je(kze,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Ize(t){return typeof t=="object"&&t&&t.constructor===Object}var Oze={length:!0,name:!0},kze={toString:!0,valueOf:!0,toLocaleString:!0};class nO{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return is(this.wrappedObject,e)}set(e,r){return y1(this.wrappedObject,e,r),this}has(e){return oP(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return whe(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){oP(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class bhe{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return whe(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function whe(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function n_(){return new Map}function y0(t){if(!t)return n_();if(_he(t))return t;if(aO(t))return new nO(t);throw new Error("createMap can create maps from objects or Maps")}function Rze(t){if(t instanceof nO)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);y1(e,r,n)}return e}function ot(t){return typeof t=="number"}function St(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Zx(t){return typeof t=="bigint"}function jf(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function YS(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function po(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Nn(t){return typeof t=="string"}var gr=Array.isArray;function ft(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function To(t){return Array.isArray(t)||ft(t)}function lP(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Im(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function nV(t){return t&&t.constructor.prototype.isRange===!0||!1}function iO(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Fze(t){return typeof t=="boolean"}function Lze(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function xhe(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Ahe(t){return typeof t=="function"}function Bze(t){return t instanceof Date}function $ze(t){return t instanceof RegExp}function aO(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!jf(t)&&!YS(t))}function _he(t){return t?t instanceof Map||t instanceof nO||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function jze(t){return t===null}function Vze(t){return t===void 0}function oh(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function nl(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Uze(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function zze(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function qze(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function qt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function t4(t){return qt(t)||Fn(t)&&t.args.length===1&&qt(t.args[0])&&"-+~".includes(t.op)}function QS(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ep(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Y1(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function cr(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function sO(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fn(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function lh(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hze(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wze(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function $i(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ehe(t){return t&&t.constructor.prototype.isChain===!0||!1}function yr(t){var e=typeof t;return e==="object"?t===null?"null":St(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function wt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return wt(r)});if(t instanceof Date)return new Date(t.valueOf());if(St(t))return t;if(aO(t))return Gze(t,wt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Gze(t,e){var r={};for(var n in t)Je(t,n)&&(r[n]=e(t[n]));return r}function She(t,e){for(var r in e)Je(e,r)&&(t[r]=e[r]);return t}function uh(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!uh(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!uh(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Kze(t,e,r){var n=!0,i;Object.defineProperty(t,e,{get:function(){return n&&(i=r(),n=!1),i},set:function(s){i=s,n=!1},configurable:!0,enumerable:!0})}function Je(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Xze(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Yze=["Matrix","Array"],Qze=["number","BigNumber","bigint","Fraction"],Ee=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(yhe)};Bn(Ee,yhe,{MATRIX_OPTIONS:Yze,NUMBER_OPTIONS:Qze});function cG(){return!0}function $o(){return!1}function ly(){}const fG="Argument is not a typed-function.";function Che(){function t(G){return typeof G=="object"&&G!==null&&G.constructor===Object}const e=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],r={name:"any",test:cG,isAny:!0};let n,i,a=0,s={createCount:0};function o(G){const Z=n.get(G);if(Z)return Z;let oe='Unknown type "'+G+'"';const he=G.toLowerCase();let ve;for(ve of i)if(ve.toLowerCase()===he){oe+='. Did you mean "'+ve+'" ?';break}throw new TypeError(oe)}function l(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const oe=Z?o(Z).index:i.length,he=[];for(let ge=0;ge<G.length;++ge){if(!G[ge]||typeof G[ge].name!="string"||typeof G[ge].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Pe=G[ge].name;if(n.has(Pe))throw new TypeError('Duplicate type name "'+Pe+'"');he.push(Pe),n.set(Pe,{name:Pe,test:G[ge].test,isAny:G[ge].isAny,index:oe+ge,conversionsTo:[]})}const ve=i.slice(oe);i=i.slice(0,oe).concat(he).concat(ve);for(let ge=oe+he.length;ge<i.length;++ge)n.get(i[ge]).index=ge}function u(){n=new Map,i=[],a=0,l([r],!1)}u(),l(e);function c(){let G;for(G of i)n.get(G).conversionsTo=[];a=0}function f(G){const Z=i.filter(oe=>{const he=n.get(oe);return!he.isAny&&he.test(G)});return Z.length?Z:["any"]}function h(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function d(G,Z,oe){if(!h(G))throw new TypeError(fG);const he=oe&&oe.exact,ve=Array.isArray(Z)?Z.join(","):Z,ge=A(ve),Pe=v(ge);if(!he||Pe in G.signatures){const rt=G._typedFunctionData.signatureMap.get(Pe);if(rt)return rt}const Se=ge.length;let $e;if(he){$e=[];let rt;for(rt in G.signatures)$e.push(G._typedFunctionData.signatureMap.get(rt))}else $e=G._typedFunctionData.signatures;for(let rt=0;rt<Se;++rt){const Mt=ge[rt],Wt=[];let ht;for(ht of $e){const _r=E(ht.params,rt);if(!(!_r||Mt.restParam&&!_r.restParam)){if(!_r.hasAny){const B=b(_r);if(Mt.types.some(le=>!B.has(le.name)))continue}Wt.push(ht)}}if($e=Wt,$e.length===0)break}let Ce;for(Ce of $e)if(Ce.params.length<=Se)return Ce;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+v(ge,", ")+"))")}function p(G,Z,oe){return d(G,Z,oe).implementation}function m(G,Z){const oe=o(Z);if(oe.test(G))return G;const he=oe.conversionsTo;if(he.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(let ve=0;ve<he.length;ve++)if(o(he[ve].from).test(G))return he[ve].convert(G);throw new Error("Cannot convert "+G+" to "+Z)}function v(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(oe=>oe.name).join(Z)}function y(G){const Z=G.indexOf("...")===0,he=(Z?G.length>3?G.slice(3):"any":G).split("|").map(Se=>o(Se.trim()));let ve=!1,ge=Z?"...":"";return{types:he.map(function(Se){return ve=Se.isAny||ve,ge+=Se.name+"|",{name:Se.name,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:null,conversionIndex:-1}}),name:ge.slice(0,-1),hasAny:ve,hasConversion:!1,restParam:Z}}function w(G){const Z=G.types.map(Pe=>Pe.name),oe=V(Z);let he=G.hasAny,ve=G.name;const ge=oe.map(function(Pe){const Se=o(Pe.from);return he=Se.isAny||he,ve+="|"+Pe.from,{name:Pe.from,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:Pe,conversionIndex:Pe.index}});return{types:G.types.concat(ge),name:ve,hasAny:he,hasConversion:ge.length>0,restParam:G.restParam}}function b(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(Z=>G.typeSet.add(Z.name))),G.typeSet}function A(G){const Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");const oe=G.trim();if(oe==="")return Z;const he=oe.split(",");for(let ve=0;ve<he.length;++ve){const ge=y(he[ve].trim());if(ge.restParam&&ve!==he.length-1)throw new SyntaxError('Unexpected rest parameter "'+he[ve]+'": only allowed for the last parameter');if(ge.types.length===0)return null;Z.push(ge)}return Z}function x(G){const Z=z(G);return Z?Z.restParam:!1}function _(G){if(!G||G.types.length===0)return cG;if(G.types.length===1)return o(G.types[0].name).test;if(G.types.length===2){const Z=o(G.types[0].name).test,oe=o(G.types[1].name).test;return function(ve){return Z(ve)||oe(ve)}}else{const Z=G.types.map(function(oe){return o(oe.name).test});return function(he){for(let ve=0;ve<Z.length;ve++)if(Z[ve](he))return!0;return!1}}}function S(G){let Z,oe,he;if(x(G)){Z=ae(G).map(_);const ve=Z.length,ge=_(z(G)),Pe=function(Se){for(let $e=ve;$e<Se.length;$e++)if(!ge(Se[$e]))return!1;return!0};return function($e){for(let Ce=0;Ce<Z.length;Ce++)if(!Z[Ce]($e[Ce]))return!1;return Pe($e)&&$e.length>=ve+1}}else return G.length===0?function(ge){return ge.length===0}:G.length===1?(oe=_(G[0]),function(ge){return oe(ge[0])&&ge.length===1}):G.length===2?(oe=_(G[0]),he=_(G[1]),function(ge){return oe(ge[0])&&he(ge[1])&&ge.length===2}):(Z=G.map(_),function(ge){for(let Pe=0;Pe<Z.length;Pe++)if(!Z[Pe](ge[Pe]))return!1;return ge.length===Z.length})}function E(G,Z){return Z<G.length?G[Z]:x(G)?z(G):null}function T(G,Z){const oe=E(G,Z);return oe?b(oe):new Set}function D(G){return G.conversion===null||G.conversion===void 0}function N(G,Z){const oe=new Set;return G.forEach(he=>{const ve=T(he.params,Z);let ge;for(ge of ve)oe.add(ge)}),oe.has("any")?["any"]:Array.from(oe)}function P(G,Z,oe){let he,ve;const ge=G||"unnamed";let Pe=oe,Se;for(Se=0;Se<Z.length;Se++){const Mt=[];if(Pe.forEach(Wt=>{const ht=E(Wt.params,Se),_r=_(ht);(Se<Wt.params.length||x(Wt.params))&&_r(Z[Se])&&Mt.push(Wt)}),Mt.length===0){if(ve=N(Pe,Se),ve.length>0){const Wt=f(Z[Se]);return he=new TypeError("Unexpected type of argument in function "+ge+" (expected: "+ve.join(" or ")+", actual: "+Wt.join(" | ")+", index: "+Se+")"),he.data={category:"wrongType",fn:ge,index:Se,actual:Wt,expected:ve},he}}else Pe=Mt}const $e=Pe.map(function(Mt){return x(Mt.params)?1/0:Mt.params.length});if(Z.length<Math.min.apply(null,$e))return ve=N(Pe,Se),he=new TypeError("Too few arguments in function "+ge+" (expected: "+ve.join(" or ")+", index: "+Z.length+")"),he.data={category:"tooFewArgs",fn:ge,index:Z.length,expected:ve},he;const Ce=Math.max.apply(null,$e);if(Z.length>Ce)return he=new TypeError("Too many arguments in function "+ge+" (expected: "+Ce+", actual: "+Z.length+")"),he.data={category:"tooManyArgs",fn:ge,index:Z.length,expectedLength:Ce},he;const rt=[];for(let Mt=0;Mt<Z.length;++Mt)rt.push(f(Z[Mt]).join("|"));return he=new TypeError('Arguments of type "'+rt.join(", ")+'" do not match any of the defined signatures of function '+ge+"."),he.data={category:"mismatch",actual:rt},he}function M(G){let Z=i.length+1;for(let oe=0;oe<G.types.length;oe++)Z=Math.min(Z,G.types[oe].typeIndex);return Z}function j(G){let Z=a+1;for(let oe=0;oe<G.types.length;oe++)D(G.types[oe])||(Z=Math.min(Z,G.types[oe].conversionIndex));return Z}function K(G,Z){if(G.hasAny){if(!Z.hasAny)return .1}else if(Z.hasAny)return-.1;if(G.restParam){if(!Z.restParam)return .01}else if(Z.restParam)return-.01;const oe=M(G)-M(Z);if(oe<0)return-.001;if(oe>0)return .001;const he=j(G),ve=j(Z);if(G.hasConversion){if(!Z.hasConversion)return(1+he)*1e-6}else if(Z.hasConversion)return-(1+ve)*1e-6;const ge=he-ve;return ge<0?-1e-7:ge>0?1e-7:0}function k(G,Z){const oe=G.params,he=Z.params,ve=z(oe),ge=z(he),Pe=x(oe),Se=x(he);if(Pe&&ve.hasAny){if(!Se||!ge.hasAny)return 1e7}else if(Se&&ge.hasAny)return-1e7;let $e=0,Ce=0,rt;for(rt of oe)rt.hasAny&&++$e,rt.hasConversion&&++Ce;let Mt=0,Wt=0;for(rt of he)rt.hasAny&&++Mt,rt.hasConversion&&++Wt;if($e!==Mt)return($e-Mt)*1e6;if(Pe&&ve.hasConversion){if(!Se||!ge.hasConversion)return 1e5}else if(Se&&ge.hasConversion)return-1e5;if(Ce!==Wt)return(Ce-Wt)*1e4;if(Pe){if(!Se)return 1e3}else if(Se)return-1e3;const ht=(oe.length-he.length)*(Pe?-100:100);if(ht!==0)return ht;const _r=[];let B=0;for(let qe=0;qe<oe.length;++qe){const dt=K(oe[qe],he[qe]);_r.push(dt),B+=dt}if(B!==0)return(B<0?-10:10)+B;let le,we=9;const Ie=we/(_r.length+1);for(le of _r){if(le!==0)return(le<0?-we:we)+le;we-=Ie}return 0}function V(G){if(G.length===0)return[];const Z=G.map(o);if(G.length===1)return Z[0].conversionsTo;const oe=new Set(G),he=new Set;for(let ge=0;ge<Z.length;++ge)for(const Pe of Z[ge].conversionsTo)oe.has(Pe.from)||he.add(Pe.from);const ve=[];for(const ge of he){let Pe=a+1,Se=null;for(let $e=0;$e<Z.length;++$e)for(const Ce of Z[$e].conversionsTo)Ce.from===ge&&Ce.index<Pe&&(Pe=Ce.index,Se=Ce);ve.push(Se)}return ve}function q(G,Z){let oe=Z,he="";if(G.some(ge=>ge.hasConversion)){const ge=x(G),Pe=G.map(H);he=Pe.map(Se=>Se.name).join(";"),oe=function(){const $e=[],Ce=ge?arguments.length-1:arguments.length;for(let rt=0;rt<Ce;rt++)$e[rt]=Pe[rt](arguments[rt]);return ge&&($e[Ce]=arguments[Ce].map(Pe[Ce])),Z.apply(this,$e)}}let ve=oe;if(x(G)){const ge=G.length-1;ve=function(){return oe.apply(this,ne(arguments,0,ge).concat([ne(arguments,ge)]))}}return he&&Object.defineProperty(ve,"name",{value:he}),ve}function H(G){let Z,oe,he,ve;const ge=[],Pe=[];let Se="";G.types.forEach(function(Ce){Ce.conversion&&(Se+=Ce.conversion.from+"~>"+Ce.conversion.to+",",ge.push(o(Ce.conversion.from).test),Pe.push(Ce.conversion.convert))}),Se?Se=Se.slice(0,-1):Se="pass";let $e=Ce=>Ce;switch(Pe.length){case 0:break;case 1:Z=ge[0],he=Pe[0],$e=function(rt){return Z(rt)?he(rt):rt};break;case 2:Z=ge[0],oe=ge[1],he=Pe[0],ve=Pe[1],$e=function(rt){return Z(rt)?he(rt):oe(rt)?ve(rt):rt};break;default:$e=function(rt){for(let Mt=0;Mt<Pe.length;Mt++)if(ge[Mt](rt))return Pe[Mt](rt);return rt}}return Object.defineProperty($e,"name",{value:Se}),$e}function te(G){function Z(oe,he,ve){if(he<oe.length){const ge=oe[he];let Pe=[];if(ge.restParam){const Se=ge.types.filter(D);Se.length<ge.types.length&&Pe.push({types:Se,name:"..."+Se.map($e=>$e.name).join("|"),hasAny:Se.some($e=>$e.isAny),hasConversion:!1,restParam:!0}),Pe.push(ge)}else Pe=ge.types.map(function(Se){return{types:[Se],name:Se.name,hasAny:Se.isAny,hasConversion:Se.conversion,restParam:!1}});return Q(Pe,function(Se){return Z(oe,he+1,ve.concat([Se]))})}else return[ve]}return Z(G,0,[])}function ue(G,Z){const oe=Math.max(G.length,Z.length);for(let Se=0;Se<oe;Se++){const $e=T(G,Se),Ce=T(Z,Se);let rt=!1,Mt;for(Mt of Ce)if($e.has(Mt)){rt=!0;break}if(!rt)return!1}const he=G.length,ve=Z.length,ge=x(G),Pe=x(Z);return ge?Pe?he===ve:ve>=he:Pe?he>=ve:he===ve}function re(G){return G.map(Z=>ze(Z)?De(Z.referToSelf.callback):Le(Z)?me(Z.referTo.references,Z.referTo.callback):Z)}function L(G,Z,oe){const he=[];let ve;for(ve of G){let ge=oe[ve];if(typeof ge!="number")throw new TypeError('No definition for referenced signature "'+ve+'"');if(ge=Z[ge],typeof ge!="function")return!1;he.push(ge)}return he}function ie(G,Z,oe){const he=re(G),ve=new Array(he.length).fill(!1);let ge=!0;for(;ge;){ge=!1;let Pe=!0;for(let Se=0;Se<he.length;++Se){if(ve[Se])continue;const $e=he[Se];if(ze($e))he[Se]=$e.referToSelf.callback(oe),he[Se].referToSelf=$e.referToSelf,ve[Se]=!0,Pe=!1;else if(Le($e)){const Ce=L($e.referTo.references,he,Z);Ce?(he[Se]=$e.referTo.callback.apply(this,Ce),he[Se].referTo=$e.referTo,ve[Se]=!0,Pe=!1):ge=!0}}if(Pe&&ge)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return he}function X(G){const Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(oe=>{const he=G[oe];if(Z.test(he.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pe(G,Z){if(s.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&X(Z);const oe=[],he=[],ve={},ge=[];let Pe;for(Pe in Z){if(!Object.prototype.hasOwnProperty.call(Z,Pe))continue;const nr=A(Pe);if(!nr)continue;oe.forEach(function(xh){if(ue(xh,nr))throw new TypeError('Conflicting signatures "'+v(xh)+'" and "'+v(nr)+'".')}),oe.push(nr);const ba=he.length;he.push(Z[Pe]);const vC=nr.map(w);let tm;for(tm of te(vC)){const xh=v(tm);ge.push({params:tm,name:xh,fn:ba}),tm.every(dw=>!dw.hasConversion)&&(ve[xh]=ba)}}ge.sort(k);const Se=ie(he,ve,Us);let $e;for($e in ve)Object.prototype.hasOwnProperty.call(ve,$e)&&(ve[$e]=Se[ve[$e]]);const Ce=[],rt=new Map;for($e of ge)rt.has($e.name)||($e.fn=Se[$e.fn],Ce.push($e),rt.set($e.name,$e));const Mt=Ce[0]&&Ce[0].params.length<=2&&!x(Ce[0].params),Wt=Ce[1]&&Ce[1].params.length<=2&&!x(Ce[1].params),ht=Ce[2]&&Ce[2].params.length<=2&&!x(Ce[2].params),_r=Ce[3]&&Ce[3].params.length<=2&&!x(Ce[3].params),B=Ce[4]&&Ce[4].params.length<=2&&!x(Ce[4].params),le=Ce[5]&&Ce[5].params.length<=2&&!x(Ce[5].params),we=Mt&&Wt&&ht&&_r&&B&&le;for(let nr=0;nr<Ce.length;++nr)Ce[nr].test=S(Ce[nr].params);const Ie=Mt?_(Ce[0].params[0]):$o,qe=Wt?_(Ce[1].params[0]):$o,dt=ht?_(Ce[2].params[0]):$o,Mn=_r?_(Ce[3].params[0]):$o,Oo=B?_(Ce[4].params[0]):$o,lw=le?_(Ce[5].params[0]):$o,SO=Mt?_(Ce[0].params[1]):$o,wh=Wt?_(Ce[1].params[1]):$o,CO=ht?_(Ce[2].params[1]):$o,TO=_r?_(Ce[3].params[1]):$o,Jv=B?_(Ce[4].params[1]):$o,cC=le?_(Ce[5].params[1]):$o;for(let nr=0;nr<Ce.length;++nr)Ce[nr].implementation=q(Ce[nr].params,Ce[nr].fn);const fC=Mt?Ce[0].implementation:ly,uw=Wt?Ce[1].implementation:ly,Jp=ht?Ce[2].implementation:ly,DO=_r?Ce[3].implementation:ly,Au=B?Ce[4].implementation:ly,hC=le?Ce[5].implementation:ly,dC=Mt?Ce[0].params.length:-1,cw=Wt?Ce[1].params.length:-1,fw=ht?Ce[2].params.length:-1,pC=_r?Ce[3].params.length:-1,NO=B?Ce[4].params.length:-1,mC=le?Ce[5].params.length:-1,PO=we?6:0,ey=Ce.length,gC=Ce.map(nr=>nr.test),hw=Ce.map(nr=>nr.implementation),em=function(){for(let ba=PO;ba<ey;ba++)if(gC[ba](arguments))return hw[ba].apply(this,arguments);return s.onMismatch(G,arguments,Ce)};function Us(nr,ba){return arguments.length===dC&&Ie(nr)&&SO(ba)?fC.apply(this,arguments):arguments.length===cw&&qe(nr)&&wh(ba)?uw.apply(this,arguments):arguments.length===fw&&dt(nr)&&CO(ba)?Jp.apply(this,arguments):arguments.length===pC&&Mn(nr)&&TO(ba)?DO.apply(this,arguments):arguments.length===NO&&Oo(nr)&&Jv(ba)?Au.apply(this,arguments):arguments.length===mC&&lw(nr)&&cC(ba)?hC.apply(this,arguments):em.apply(this,arguments)}try{Object.defineProperty(Us,"name",{value:G})}catch{}return Us.signatures=ve,Us._typedFunctionData={signatures:Ce,signatureMap:rt},Us}function de(G,Z,oe){throw P(G,Z,oe)}function ae(G){return ne(G,0,G.length-1)}function z(G){return G[G.length-1]}function ne(G,Z,oe){return Array.prototype.slice.call(G,Z,oe)}function fe(G,Z){for(let oe=0;oe<G.length;oe++)if(Z(G[oe]))return G[oe]}function Q(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function ye(){const G=ae(arguments).map(oe=>v(A(oe))),Z=z(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return me(G,Z)}function me(G,Z){return{referTo:{references:G,callback:Z}}}function De(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function Le(G){return G&&typeof G.referTo=="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function ze(G){return G&&typeof G.referToSelf=="object"&&typeof G.referToSelf.callback=="function"}function Be(G,Z){if(!G)return Z;if(Z&&Z!==G){const oe=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw oe.data={actual:Z,expected:G},oe}return G}function Ve(G){let Z;for(const oe in G)Object.prototype.hasOwnProperty.call(G,oe)&&(h(G[oe])||typeof G[oe].signature=="string")&&(Z=Be(Z,G[oe].name));return Z}function Ke(G,Z){let oe;for(oe in Z)if(Object.prototype.hasOwnProperty.call(Z,oe)){if(oe in G&&Z[oe]!==G[oe]){const he=new Error('Signature "'+oe+'" is defined twice');throw he.data={signature:oe,sourceFunction:Z[oe],destFunction:G[oe]},he}G[oe]=Z[oe]}}const ee=s;s=function(G){const Z=typeof G=="string",oe=Z?1:0;let he=Z?G:"";const ve={};for(let ge=oe;ge<arguments.length;++ge){const Pe=arguments[ge];let Se={},$e;if(typeof Pe=="function"?($e=Pe.name,typeof Pe.signature=="string"?Se[Pe.signature]=Pe:h(Pe)&&(Se=Pe.signatures)):t(Pe)&&(Se=Pe,Z||($e=Ve(Pe))),Object.keys(Se).length===0){const Ce=new TypeError("Argument to 'typed' at index "+ge+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ce.data={index:ge,argument:Pe},Ce}Z||(he=Be(he,$e)),Ke(ve,Se)}return pe(he||"",ve)},s.create=Che,s.createCount=ee.createCount,s.onMismatch=de,s.throwMismatchError=de,s.createError=P,s.clear=u,s.clearConversions=c,s.addTypes=l,s._findType=o,s.referTo=ye,s.referToSelf=De,s.convert=m,s.findSignature=d,s.find=p,s.isTypedFunction=h,s.warnAgainstDeprecatedThis=!0,s.addType=function(G,Z){let oe="any";Z!==!1&&n.has("Object")&&(oe="Object"),s.addTypes([G],oe)};function ce(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return s.addConversion=function(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ce(G);const oe=o(G.to),he=oe.conversionsTo.find(ve=>ve.from===G.from);if(he)if(Z&&Z.override)s.removeConversion({from:he.from,to:G.to,convert:he.convert});else throw new Error('There is already a conversion from "'+G.from+'" to "'+oe.name+'"');oe.conversionsTo.push({from:G.from,to:oe.name,convert:G.convert,index:a++})},s.addConversions=function(G,Z){G.forEach(oe=>s.addConversion(oe,Z))},s.removeConversion=function(G){ce(G);const Z=o(G.to),oe=fe(Z.conversionsTo,ve=>ve.from===G.from);if(!oe)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(oe.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");const he=Z.conversionsTo.indexOf(oe);Z.conversionsTo.splice(he,1)},s.resolve=function(G,Z){if(!h(G))throw new TypeError(fG);const oe=G._typedFunctionData.signatures;for(let he=0;he<oe.length;++he)if(oe[he].test(Z))return oe[he];return null},s}const uP=Che();function Y(t,e,r,n){function i(a){var s=Xze(a,e.map(e9e));return Zze(t,e,a),r(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Zze(t,e,r){var n=e.filter(a=>!Jze(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Jze(t){return t&&t[0]==="?"}function e9e(t){return t&&t[0]==="?"?t.slice(1):t}function nt(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function Up(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var qd=Math.sign||function(t){return t>0?1:t<0?-1:0},t9e=Math.log2||function(e){return Math.log(e)/Math.LN2},r9e=Math.log10||function(e){return Math.log(e)/Math.LN10},n9e=Math.log1p||function(t){return Math.log(t+1)},i9e=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),Number.isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},a9e=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function SR(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!nt(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!nt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function iv(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:i}=The(e);switch(r){case"fixed":return Dhe(t,n);case"exponential":return Nhe(t,n);case"engineering":return s9e(t,n);case"bin":return SR(t,2,i);case"oct":return SR(t,8,i);case"hex":return SR(t,16,i);case"auto":return o9e(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function The(t){var e="auto",r,n;if(t!==void 0)if(ot(t))r=t;else if(St(t))r=t.toNumber();else if(aO(t))t.precision!==void 0&&(r=hG(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=hG(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function ZS(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:r,coefficients:s,exponent:i}}function s9e(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=ZS(t),n=oO(r,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(ot(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),l=0;l<o;l++)a.push(0);for(var u=Math.abs(i-s),c=1;u>0;)c++,u--;var f=a.slice(c).join(""),h=ot(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+s.toString();return n.sign+d}function Dhe(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=ZS(t),n=typeof e=="number"?oO(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(b0(s-i.length))),a<0&&(i=b0(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Nhe(t,e){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var r=ZS(t),n=e?oO(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(b0(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function o9e(t,e,r){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=dG(r==null?void 0:r.lowerExp,-3),i=dG(r==null?void 0:r.upperExp,5),a=ZS(t),s=e?oO(a,e):a;if(s.exponent<n||s.exponent>=i)return Nhe(t,e);var o=s.coefficients,l=s.exponent;o.length<e&&(o=o.concat(b0(e-o.length))),o=o.concat(b0(l-o.length+1+(o.length<e?e-o.length:0))),o=b0(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),s.sign+o.join("")}function oO(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function b0(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function l9e(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function zi(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!Number.isFinite(t)||!Number.isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var u9e=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},c9e=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},f9e=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},h9e=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},d9e=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},p9e=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function m9e(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-t:t}function hG(t,e){if(ot(t))return t;if(St(t))return t.toNumber();e()}function dG(t,e){return ot(t)?t:St(t)?t.toNumber():e}var Phe=function(){return Phe=uP.create,uP},g9e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],v9e=Y("typed",g9e,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,s=Phe();return s.clear(),s.addTypes([{name:"number",test:ot},{name:"Complex",test:jf},{name:"BigNumber",test:St},{name:"bigint",test:Zx},{name:"Fraction",test:YS},{name:"Unit",test:po},{name:"identifier",test:o=>Nn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Nn},{name:"Chain",test:Ehe},{name:"Array",test:gr},{name:"Matrix",test:ft},{name:"DenseMatrix",test:lP},{name:"SparseMatrix",test:Im},{name:"Range",test:nV},{name:"Index",test:iO},{name:"boolean",test:Fze},{name:"ResultSet",test:Lze},{name:"Help",test:xhe},{name:"function",test:Ahe},{name:"Date",test:Bze},{name:"RegExp",test:$ze},{name:"null",test:jze},{name:"undefined",test:Vze},{name:"AccessorNode",test:oh},{name:"ArrayNode",test:nl},{name:"AssignmentNode",test:Uze},{name:"BlockNode",test:zze},{name:"ConditionalNode",test:qze},{name:"ConstantNode",test:qt},{name:"FunctionNode",test:Ep},{name:"FunctionAssignmentNode",test:QS},{name:"IndexNode",test:Y1},{name:"Node",test:cr},{name:"ObjectNode",test:sO},{name:"OperatorNode",test:Fn},{name:"ParenthesisNode",test:lh},{name:"RangeNode",test:Hze},{name:"RelationalNode",test:Wze},{name:"SymbolNode",test:$i},{name:"Map",test:_he},{name:"Object",test:aO}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||ET(l),l9e(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ST(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ST(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return r||ET(l),new r(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return a||CT(l),new a(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ST(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||CT(l);var u=new a(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){r||ET(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){a||CT(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ST(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||ET(l),new r(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||CT(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||y9e(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&To(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&To(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function ET(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ST(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function y9e(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function CT(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var b9e="ResultSet",w9e=[],x9e=Y(b9e,w9e,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Yy=9e15,zp=1e9,r4="0123456789abcdef",cP="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",fP="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",n4={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Yy,maxE:Yy,crypto:!1},Mhe,Of,_t=!0,lO="[DecimalError] ",Sp=lO+"Invalid argument: ",Ihe=lO+"Precision limit exceeded",Ohe=lO+"crypto unavailable",khe="[object Decimal]",ja=Math.floor,ui=Math.pow,A9e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,_9e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E9e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Rhe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ou=1e7,pt=7,S9e=9007199254740991,C9e=cP.length-1,i4=fP.length-1,Me={toStringTag:khe};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),lt(t)};Me.ceil=function(){return lt(new this.constructor(this),this.e+1,2)};Me.clampedTo=Me.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Sp+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Me.comparedTo=Me.cmp=function(t){var e,r,n,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,l=a.s,u=t.s;if(!s||!o)return!l||!u?NaN:l!==u?l:s===o?0:!s^l<0?1:-1;if(!s[0]||!o[0])return s[0]?l:o[0]?-u:0;if(l!==u)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=s.length,i=o.length,e=0,r=n<i?n:i;e<r;++e)if(s[e]!==o[e])return s[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Me.cosine=Me.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+pt,n.rounding=1,r=T9e(n,jhe(n,r)),n.precision=t,n.rounding=e,lt(Of==2||Of==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Me.cubeRoot=Me.cbrt=function(){var t,e,r,n,i,a,s,o,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(_t=!1,a=c.s*ui(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=ca(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=ui(r,1/3),t=ja((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),s=(t=f.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=$r(u.plus(c).times(o),u.plus(l),s+2,1),ca(o.d).slice(0,s)===(r=ca(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!i&&r=="4999"){if(!i&&(lt(o,t+1,0),o.times(o).times(o).eq(c))){n=o;break}s+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(lt(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return _t=!0,lt(n,t,f.rounding,e)};Me.decimalPlaces=Me.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-ja(this.e/pt))*pt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Me.dividedBy=Me.div=function(t){return $r(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.divToInt=function(t){var e=this,r=e.constructor;return lt($r(e,new r(t),0,1,1),r.precision,r.rounding)};Me.equals=Me.eq=function(t){return this.cmp(t)===0};Me.floor=function(){return lt(new this.constructor(this),this.e+1,3)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){var e=this.cmp(t);return e==1||e===0};Me.hyperbolicCosine=Me.cosh=function(){var t,e,r,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/cO(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=b1(s,1,a.times(e),new s(1),!0);for(var l,u=t,c=new s(8);u--;)l=a.times(a),a=o.minus(l.times(c.minus(l.times(c))));return lt(a,s.precision=r,s.rounding=n,!0)};Me.hyperbolicSine=Me.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=b1(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/cO(5,t)),i=b1(a,2,i,i,!0);for(var s,o=new a(5),l=new a(16),u=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(l.times(s).plus(u))))}return a.precision=e,a.rounding=r,lt(i,e,r,!0)};Me.hyperbolicTangent=Me.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,$r(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Me.inverseCosine=Me.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,i=e.rounding;return r!==-1?r===0?t.isNeg()?ic(e,n,i):new e(0):new e(NaN):t.isZero()?ic(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,t.times(2))};Me.inverseHyperbolicCosine=Me.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,_t=!1,r=r.times(r).minus(1).sqrt().plus(r),_t=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Me.inverseHyperbolicSine=Me.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,_t=!1,r=r.times(r).plus(1).sqrt().plus(r),_t=!0,n.precision=t,n.rounding=e,r.ln())};Me.inverseHyperbolicTangent=Me.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?lt(new a(i),t,e,!0):(a.precision=r=n-i.e,i=$r(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Me.inverseSine=Me.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=ic(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Me.inverseTangent=Me.atan=function(){var t,e,r,n,i,a,s,o,l,u=this,c=u.constructor,f=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=i4)return s=ic(c,f+4,h).times(.25),s.s=u.s,s}else{if(!u.s)return new c(NaN);if(f+4<=i4)return s=ic(c,f+4,h).times(.5),s.s=u.s,s}for(c.precision=o=f+10,c.rounding=1,r=Math.min(28,o/pt+2|0),t=r;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(_t=!1,e=Math.ceil(o/pt),n=1,l=u.times(u),s=new c(u),i=u;t!==-1;)if(i=i.times(l),a=s.minus(i.div(n+=2)),i=i.times(l),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),_t=!0,lt(s,c.precision=f,c.rounding=h,!0)};Me.isFinite=function(){return!!this.d};Me.isInteger=Me.isInt=function(){return!!this.d&&ja(this.e/pt)>this.d.length-2};Me.isNaN=function(){return!this.s};Me.isNegative=Me.isNeg=function(){return this.s<0};Me.isPositive=Me.isPos=function(){return this.s>0};Me.isZero=function(){return!!this.d&&this.d[0]===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,r,n,i,a,s,o,l,u=this,c=u.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(_t=!1,o=f+d,s=Hd(u,o),n=e?hP(c,o+10):Hd(t,o),l=$r(s,n,o,1),i_(l.d,i=f,h))do if(o+=10,s=Hd(u,o),n=e?hP(c,o+10):Hd(t,o),l=$r(s,n,o,1),!a){+ca(l.d).slice(i+1,i+15)+1==1e14&&(l=lt(l,f+1,0));break}while(i_(l.d,i+=10,h));return _t=!0,lt(l,f,h)};Me.minus=Me.sub=function(t){var e,r,n,i,a,s,o,l,u,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(u=d.d,h=t.d,o=p.precision,l=p.rounding,!u[0]||!h[0]){if(h[0])t.s=-t.s;else if(u[0])t=new p(d);else return new p(l===3?-0:0);return _t?lt(t,o,l):t}if(r=ja(t.e/pt),c=ja(d.e/pt),u=u.slice(),a=c-r,a){for(f=a<0,f?(e=u,a=-a,s=h.length):(e=h,r=c,s=u.length),n=Math.max(Math.ceil(o/pt),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=u.length,s=h.length,f=n<s,f&&(s=n),n=0;n<s;n++)if(u[n]!=h[n]){f=u[n]<h[n];break}a=0}for(f&&(e=u,u=h,h=e,t.s=-t.s),s=u.length,n=h.length-s;n>0;--n)u[s++]=0;for(n=h.length;n>a;){if(u[--n]<h[n]){for(i=n;i&&u[--i]===0;)u[i]=ou-1;--u[i],u[n]+=ou}u[n]-=h[n]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=uO(u,r),_t?lt(t,o,l):t):new p(l===3?-0:0)};Me.modulo=Me.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?lt(new n(r),n.precision,n.rounding):(_t=!1,n.modulo==9?(e=$r(r,t.abs(),0,3,1),e.s*=t.s):e=$r(r,t,0,n.modulo,1),e=e.times(t),_t=!0,r.minus(e))};Me.naturalExponential=Me.exp=function(){return a4(this)};Me.naturalLogarithm=Me.ln=function(){return Hd(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s,lt(t)};Me.plus=Me.add=function(t){var e,r,n,i,a,s,o,l,u,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(u=f.d,c=t.d,o=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(t=new h(f)),_t?lt(t,o,l):t;if(a=ja(f.e/pt),n=ja(t.e/pt),u=u.slice(),i=a-n,i){for(i<0?(r=u,i=-i,s=c.length):(r=c,n=a,s=u.length),a=Math.ceil(o/pt),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=u.length,i=c.length,s-i<0&&(i=s,r=c,c=u,u=r),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/ou|0,u[i]%=ou;for(e&&(u.unshift(e),++n),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=uO(u,n),_t?lt(t,o,l):t};Me.precision=Me.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sp+t);return r.d?(e=Fhe(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Me.round=function(){var t=this,e=t.constructor;return lt(new e(t),t.e+1,e.rounding)};Me.sine=Me.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+pt,n.rounding=1,r=N9e(n,jhe(n,r)),n.precision=t,n.rounding=e,lt(Of>2?r.neg():r,t,e,!0)):new n(NaN)};Me.squareRoot=Me.sqrt=function(){var t,e,r,n,i,a,s=this,o=s.d,l=s.e,u=s.s,c=s.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(_t=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=ca(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=ja((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus($r(s,a,r+2,1)).times(.5),ca(a.d).slice(0,r)===(e=ca(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(lt(a,l+1,0),a.times(a).eq(s))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(lt(n,l+1,1),t=!n.times(n).eq(s));break}return _t=!0,lt(n,l,c.rounding,t)};Me.tangent=Me.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=$r(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,lt(Of==2||Of==4?r.neg():r,t,e,!0)):new n(NaN)};Me.times=Me.mul=function(t){var e,r,n,i,a,s,o,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(r=ja(c.e/pt)+ja(t.e/pt),l=h.length,u=d.length,l<u&&(a=h,h=d,d=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+d[n]*h[i-n-1]+e,a[i--]=o%ou|0,e=o/ou|0;a[i]=(a[i]+e)%ou|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=uO(a,r),_t?lt(t,f.precision,f.rounding):t};Me.toBinary=function(t,e){return iV(this,2,t,e)};Me.toDecimalPlaces=Me.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(js(t,0,zp),e===void 0?e=n.rounding:js(e,0,8),lt(r,t+r.e+1,e))};Me.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ec(n,!0):(js(t,0,zp),e===void 0?e=i.rounding:js(e,0,8),n=lt(new i(n),t+1,e),r=Ec(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Ec(i):(js(t,0,zp),e===void 0?e=a.rounding:js(e,0,8),n=lt(new a(i),t+i.e+1,e),r=Ec(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Me.toFraction=function(t){var e,r,n,i,a,s,o,l,u,c,f,h,d=this,p=d.d,m=d.constructor;if(!p)return new m(d);if(u=r=new m(1),n=l=new m(0),e=new m(n),a=e.e=Fhe(p)-d.e-1,s=a%pt,e.d[0]=ui(10,s<0?pt+s:s),t==null)t=a>0?e:u;else{if(o=new m(t),!o.isInt()||o.lt(u))throw Error(Sp+o);t=o.gt(e)?a>0?e:u:o}for(_t=!1,o=new m(ca(p)),c=m.precision,m.precision=a=p.length*pt*2;f=$r(o,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=o.minus(f.times(i)),o=i;return i=$r(t.minus(r),n,0,1,1),l=l.plus(i.times(u)),r=r.plus(i.times(n)),l.s=u.s=d.s,h=$r(u,n,a,1).minus(d).abs().cmp($r(l,r,a,1).minus(d).abs())<1?[u,n]:[l,r],m.precision=c,_t=!0,h};Me.toHexadecimal=Me.toHex=function(t,e){return iV(this,16,t,e)};Me.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:js(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(_t=!1,r=$r(r,t,0,e,1).times(t),_t=!0,lt(r)):(t.s=r.s,r=t),r};Me.toNumber=function(){return+this};Me.toOctal=function(t,e){return iV(this,8,t,e)};Me.toPower=Me.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,u=+(t=new l(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new l(ui(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,a=l.rounding,t.eq(1))return lt(o,n,a);if(e=ja(t.e/pt),e>=t.d.length-1&&(r=u<0?-u:u)<=S9e)return i=Lhe(l,o,r,n),t.s<0?new l(1).div(i):lt(i,n,a);if(s=o.s,s<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return r=ui(+o,u),e=r==0||!isFinite(r)?ja(u*(Math.log("0."+ca(o.d))/Math.LN10+o.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(_t=!1,l.rounding=o.s=1,r=Math.min(12,(e+"").length),i=a4(t.times(Hd(o,n+r)),n),i.d&&(i=lt(i,n+5,1),i_(i.d,n,a)&&(e=n+10,i=lt(a4(t.times(Hd(o,e+r)),e),e+5,1),+ca(i.d).slice(n+1,n+15)+1==1e14&&(i=lt(i,n+1,0)))),i.s=s,_t=!0,l.rounding=a,lt(i,n,a))};Me.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ec(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(js(t,1,zp),e===void 0?e=i.rounding:js(e,0,8),n=lt(new i(n),t,e),r=Ec(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toSignificantDigits=Me.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(js(t,1,zp),e===void 0?e=n.rounding:js(e,0,8)),lt(new n(r),t,e)};Me.toString=function(){var t=this,e=t.constructor,r=Ec(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Me.truncated=Me.trunc=function(){return lt(new this.constructor(this),this.e+1,1)};Me.valueOf=Me.toJSON=function(){var t=this,e=t.constructor,r=Ec(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function ca(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=pt-n.length,r&&(a+=$h(r)),a+=n;s=t[e],n=s+"",r=pt-n.length,r&&(a+=$h(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function js(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Sp+t)}function i_(t,e,r,n){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=pt,i=0):(i=Math.ceil((e+1)/pt),e%=pt),a=ui(10,pt-e),o=t[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):s=(r<4&&o+1==a||r>3&&o+1==a/2)&&(t[i+1]/a/100|0)==ui(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||r<4)&&o==9999||!n&&r>3&&o==4999):s=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==ui(10,e-3)-1,s}function iN(t,e,r){for(var n,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=r4.indexOf(t.charAt(s++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function T9e(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/cO(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=b1(t,1,e.times(i),new t(1));for(var a=r;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var $r=function(){function t(n,i,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,l){var u,c,f,h,d,p,m,v,y,w,b,A,x,_,S,E,T,D,N,P,M=n.constructor,j=n.s==i.s?1:-1,K=n.d,k=i.d;if(!K||!K[0]||!k||!k[0])return new M(!n.s||!i.s||(K?k&&K[0]==k[0]:!k)?NaN:K&&K[0]==0||!k?j*0:j/0);for(l?(d=1,c=n.e-i.e):(l=ou,d=pt,c=ja(n.e/d)-ja(i.e/d)),N=k.length,T=K.length,y=new M(j),w=y.d=[],f=0;k[f]==(K[f]||0);f++);if(k[f]>(K[f]||0)&&c--,a==null?(_=a=M.precision,s=M.rounding):o?_=a+(n.e-i.e)+1:_=a,_<0)w.push(1),p=!0;else{if(_=_/d+2|0,f=0,N==1){for(h=0,k=k[0],_++;(f<T||h)&&_--;f++)S=h*l+(K[f]||0),w[f]=S/k|0,h=S%k|0;p=h||f<T}else{for(h=l/(k[0]+1)|0,h>1&&(k=t(k,h,l),K=t(K,h,l),N=k.length,T=K.length),E=N,b=K.slice(0,N),A=b.length;A<N;)b[A++]=0;P=k.slice(),P.unshift(0),D=k[0],k[1]>=l/2&&++D;do h=0,u=e(k,b,N,A),u<0?(x=b[0],N!=A&&(x=x*l+(b[1]||0)),h=x/D|0,h>1?(h>=l&&(h=l-1),m=t(k,h,l),v=m.length,A=b.length,u=e(m,b,v,A),u==1&&(h--,r(m,N<v?P:k,v,l))):(h==0&&(u=h=1),m=k.slice()),v=m.length,v<A&&m.unshift(0),r(b,m,A,l),u==-1&&(A=b.length,u=e(k,b,N,A),u<1&&(h++,r(b,N<A?P:k,A,l))),A=b.length):u===0&&(h++,b=[0]),w[f++]=h,u&&b[0]?b[A++]=K[E]||0:(b=[K[E]],A=1);while((E++<T||b[0]!==void 0)&&_--);p=b[0]!==void 0}w[0]||w.shift()}if(d==1)y.e=c,Mhe=p;else{for(f=1,h=w[0];h>=10;h/=10)f++;y.e=f+c*d-1,lt(y,o?a+y.e+1:a,s,p)}return y}}();function lt(t,e,r,n){var i,a,s,o,l,u,c,f,h,d=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,o=f[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=pt,s=e,c=f[h=0],l=c/ui(10,i-s-1)%10|0;else if(h=Math.ceil((a+1)/pt),o=f.length,h>=o)if(n){for(;o++<=h;)f.push(0);c=l=0,i=1,a%=pt,s=a-pt+1}else break e;else{for(c=o=f[h],i=1;o>=10;o/=10)i++;a%=pt,s=a-pt+i,l=s<0?0:c/ui(10,i-s-1)%10|0}if(n=n||e<0||f[h+1]!==void 0||(s<0?c:c%ui(10,i-s-1)),u=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?s>0?c/ui(10,i-s):0:f[h-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=t.e+1,f[0]=ui(10,(pt-e%pt)%pt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=h,o=1,h--):(f.length=h+1,o=ui(10,pt-a),f[h]=s>0?(c/ui(10,i-s)%ui(10,s)|0)*o:0),u)for(;;)if(h==0){for(a=1,s=f[0];s>=10;s/=10)a++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,f[0]==ou&&(f[0]=1));break}else{if(f[h]+=o,f[h]!=ou)break;f[h--]=0,o=1}for(a=f.length;f[--a]===0;)f.pop()}return _t&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function Ec(t,e,r){if(!t.isFinite())return $he(t);var n,i=t.e,a=ca(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+$h(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+$h(-i-1)+a,r&&(n=r-s)>0&&(a+=$h(n))):i>=s?(a+=$h(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+$h(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=$h(n))),a}function uO(t,e){var r=t[0];for(e*=pt;r>=10;r/=10)e++;return e}function hP(t,e,r){if(e>C9e)throw _t=!0,r&&(t.precision=r),Error(Ihe);return lt(new t(cP),e,1,!0)}function ic(t,e,r){if(e>i4)throw Error(Ihe);return lt(new t(fP),e,r,!0)}function Fhe(t){var e=t.length-1,r=e*pt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function $h(t){for(var e="";t--;)e+="0";return e}function Lhe(t,e,r,n){var i,a=new t(1),s=Math.ceil(n/pt+4);for(_t=!1;;){if(r%2&&(a=a.times(e),mG(a.d,s)&&(i=!0)),r=ja(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),mG(e.d,s)}return _t=!0,a}function pG(t){return t.d[t.d.length-1]&1}function Bhe(t,e,r){for(var n,i,a=new t(e[0]),s=0;++s<e.length;){if(i=new t(e[s]),!i.s){a=i;break}n=a.cmp(i),(n===r||n===0&&a.s===r)&&(a=i)}return a}function a4(t,e){var r,n,i,a,s,o,l,u=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(_t=!1,l=p):l=e,o=new h(.03125);t.e>-2;)t=t.times(o),f+=5;for(n=Math.log(ui(2,f))/Math.LN10*2+5|0,l+=n,r=a=s=new h(1),h.precision=l;;){if(a=lt(a.times(t),l,1),r=r.times(++c),o=s.plus($r(a,r,l,1)),ca(o.d).slice(0,l)===ca(s.d).slice(0,l)){for(i=f;i--;)s=lt(s.times(s),l,1);if(e==null)if(u<3&&i_(s.d,l-n,d,u))h.precision=l+=10,r=a=o=new h(1),c=0,u++;else return lt(s,h.precision=p,d,_t=!0);else return h.precision=p,s}s=o}}function Hd(t,e){var r,n,i,a,s,o,l,u,c,f,h,d=1,p=10,m=t,v=m.d,y=m.constructor,w=y.rounding,b=y.precision;if(m.s<0||!v||!v[0]||!m.e&&v[0]==1&&v.length==1)return new y(v&&!v[0]?-1/0:m.s!=1?NaN:v?0:m);if(e==null?(_t=!1,c=b):c=e,y.precision=c+=p,r=ca(v),n=r.charAt(0),Math.abs(a=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=ca(m.d),n=r.charAt(0),d++;a=m.e,n>1?(m=new y("0."+r),a++):m=new y(n+"."+r.slice(1))}else return u=hP(y,c+2,b).times(a+""),m=Hd(new y(n+"."+r.slice(1)),c-p).plus(u),y.precision=b,e==null?lt(m,b,w,_t=!0):m;for(f=m,l=s=m=$r(m.minus(1),m.plus(1),c,1),h=lt(m.times(m),c,1),i=3;;){if(s=lt(s.times(h),c,1),u=l.plus($r(s,new y(i),c,1)),ca(u.d).slice(0,c)===ca(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(hP(y,c+2,b).times(a+""))),l=$r(l,new y(d),c,1),e==null)if(i_(l.d,c-p,w,o))y.precision=c+=p,u=s=m=$r(f.minus(1),f.plus(1),c,1),h=lt(m.times(m),c,1),i=o=1;else return lt(l,y.precision=b,w,_t=!0);else return y.precision=b,l;l=u,i+=2}}function $he(t){return String(t.s*t.s/0)}function aN(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%pt,r<0&&(n+=pt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=pt;n<i;)t.d.push(+e.slice(n,n+=pt));e=e.slice(n),n=pt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),_t&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function D9e(t,e){var r,n,i,a,s,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Rhe.test(e))return aN(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(_9e.test(e))r=16,e=e.toLowerCase();else if(A9e.test(e))r=2;else if(E9e.test(e))r=8;else throw Error(Sp+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=Lhe(n,new n(r),a,a*2)),u=iN(e,r,ou),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new n(t.s*0):(t.e=uO(u,c),t.d=u,_t=!1,s&&(t=$r(t,i,o*4)),l&&(t=t.times(Math.abs(l)<54?ui(2,l):Cp.pow(2,l))),_t=!0,t)}function N9e(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:b1(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/cO(5,r)),e=b1(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function b1(t,e,r,n,i){var a,s,o,l,u=t.precision,c=Math.ceil(u/pt);for(_t=!1,l=r.times(r),o=new t(n);;){if(s=$r(o.times(l),new t(e++*e++),u,1),o=i?n.plus(s):n.minus(s),n=$r(s.times(l),new t(e++*e++),u,1),s=o.plus(n),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return _t=!0,s.d.length=c+1,s}function cO(t,e){for(var r=t;--e;)r*=t;return r}function jhe(t,e){var r,n=e.s<0,i=ic(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Of=n?4:1,e;if(r=e.divToInt(i),r.isZero())Of=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return Of=pG(r)?n?2:3:n?4:1,e;Of=pG(r)?n?1:4:n?3:2}return e.minus(i).abs()}function iV(t,e,r,n){var i,a,s,o,l,u,c,f,h,d=t.constructor,p=r!==void 0;if(p?(js(r,1,zp),n===void 0?n=d.rounding:js(n,0,8)):(r=d.precision,n=d.rounding),!t.isFinite())c=$he(t);else{for(c=Ec(t),s=c.indexOf("."),p?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,s>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-s,h.d=iN(Ec(h),10,i),h.e=h.d.length),f=iN(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(s<0?a--:(t=new d(t),t.d=f,t.e=a,t=$r(t,h,r,n,0,i),f=t.d,a=t.e,u=Mhe),s=f[r],o=i/2,u=u||f[r+1]!==void 0,u=n<4?(s!==void 0||u)&&(n===0||n===(t.s<0?3:2)):s>o||s===o&&(n===4||u||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,u)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,c="";s<l;s++)c+=r4.charAt(f[s]);if(p){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(f=iN(c,i,e),l=f.length;!f[l-1];--l);for(s=1,c="1.";s<l;s++)c+=r4.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function mG(t,e){if(t.length>e)return t.length=e,!0}function P9e(t){return new this(t).abs()}function M9e(t){return new this(t).acos()}function I9e(t){return new this(t).acosh()}function O9e(t,e){return new this(t).plus(e)}function k9e(t){return new this(t).asin()}function R9e(t){return new this(t).asinh()}function F9e(t){return new this(t).atan()}function L9e(t){return new this(t).atanh()}function B9e(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=ic(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?ic(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=ic(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan($r(t,e,a,1)),e=ic(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan($r(t,e,a,1)),r}function $9e(t){return new this(t).cbrt()}function j9e(t){return lt(t=new this(t),t.e+1,2)}function V9e(t,e,r){return new this(t).clamp(e,r)}function U9e(t){if(!t||typeof t!="object")throw Error(lO+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,zp,"rounding",0,8,"toExpNeg",-Yy,0,"toExpPos",0,Yy,"maxE",0,Yy,"minE",-Yy,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=n4[r]),(n=t[r])!==void 0)if(ja(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Sp+r+": "+n);if(r="crypto",i&&(this[r]=n4[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Ohe);else this[r]=!1;else throw Error(Sp+r+": "+n);return this}function z9e(t){return new this(t).cos()}function q9e(t){return new this(t).cosh()}function Vhe(t){var e,r,n;function i(a){var s,o,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,gG(a)){u.s=a.s,_t?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;_t?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return aN(u,a.toString())}if(l==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),Rhe.test(a)?aN(u,a):D9e(u,a);if(l==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,aN(u,a.toString());throw Error(Sp+a)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=U9e,i.clone=Vhe,i.isDecimal=gG,i.abs=P9e,i.acos=M9e,i.acosh=I9e,i.add=O9e,i.asin=k9e,i.asinh=R9e,i.atan=F9e,i.atanh=L9e,i.atan2=B9e,i.cbrt=$9e,i.ceil=j9e,i.clamp=V9e,i.cos=z9e,i.cosh=q9e,i.div=H9e,i.exp=W9e,i.floor=G9e,i.hypot=K9e,i.ln=X9e,i.log=Y9e,i.log10=Z9e,i.log2=Q9e,i.max=J9e,i.min=e7e,i.mod=t7e,i.mul=r7e,i.pow=n7e,i.random=i7e,i.round=a7e,i.sign=s7e,i.sin=o7e,i.sinh=l7e,i.sqrt=u7e,i.sub=c7e,i.sum=f7e,i.tan=h7e,i.tanh=d7e,i.trunc=p7e,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function H9e(t,e){return new this(t).div(e)}function W9e(t){return new this(t).exp()}function G9e(t){return lt(t=new this(t),t.e+1,3)}function K9e(){var t,e,r=new this(0);for(_t=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return _t=!0,new this(1/0);r=e}return _t=!0,r.sqrt()}function gG(t){return t instanceof Cp||t&&t.toStringTag===khe||!1}function X9e(t){return new this(t).ln()}function Y9e(t,e){return new this(t).log(e)}function Q9e(t){return new this(t).log(2)}function Z9e(t){return new this(t).log(10)}function J9e(){return Bhe(this,arguments,-1)}function e7e(){return Bhe(this,arguments,1)}function t7e(t,e){return new this(t).mod(e)}function r7e(t,e){return new this(t).mul(e)}function n7e(t,e){return new this(t).pow(e)}function i7e(t){var e,r,n,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:js(t,1,zp),n=Math.ceil(t/pt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(Ohe);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],t%=pt,n&&t&&(i=ui(10,pt-t),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=pt)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<pt&&(r-=pt-n)}return s.e=r,s.d=o,s}function a7e(t){return lt(t=new this(t),t.e+1,this.rounding)}function s7e(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function o7e(t){return new this(t).sin()}function l7e(t){return new this(t).sinh()}function u7e(t){return new this(t).sqrt()}function c7e(t,e){return new this(t).sub(e)}function f7e(){var t=0,e=arguments,r=new this(e[t]);for(_t=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return _t=!0,lt(r,this.precision,this.rounding)}function h7e(t){return new this(t).tan()}function d7e(t){return new this(t).tanh()}function p7e(t){return lt(t=new this(t),t.e+1,1)}Me[Symbol.for("nodejs.util.inspect.custom")]=Me.toString;Me[Symbol.toStringTag]="Decimal";var Cp=Me.constructor=Vhe(n4);cP=new Cp(cP);fP=new Cp(fP);var m7e="BigNumber",g7e=["?on","config"],v7e=Y(m7e,g7e,t=>{var{on:e,config:r}=t,n=Cp.clone({precision:r.precision,modulo:Cp.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const _a=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},jo=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},y7e=t=>{const e=Math.sin(.5*t);return-2*e*e},CR=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},uy=function(){throw SyntaxError("Invalid Param")};function TR(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const b7e={re:0,im:0},ym=function(t,e){const r=b7e;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return xe.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return xe.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):uy();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&uy();for(let s=0;s<n.length;s++){const o=n[s];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?a++:o==="i"||o==="I"?(i+a===0&&uy(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((a%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(o))&&uy(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((a%2?"-":"")+o),s++):r.re+=parseFloat((a%2?"-":"")+o),i=a=0))}i+a>0&&uy();break;case"number":r.im=0,r.re=t;break;default:uy()}return isNaN(r.re)||isNaN(r.im),r};function xe(t,e){if(!(this instanceof xe))return new xe(t,e);const r=ym(t,e);this.re=r.re,this.im=r.im}xe.prototype={re:0,im:0,sign:function(){const t=CR(this.re,this.im);return new xe(this.re/t,this.im/t)},add:function(t,e){const r=ym(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=ym(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=ym(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||i&&a?xe.NAN:n||i?xe.INFINITY:r.im===0&&this.im===0?new xe(this.re*r.re,0):new xe(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=ym(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(a&&s||n&&i)return xe.NAN;if(s||n)return xe.INFINITY;if(a||i)return xe.ZERO;if(r.im===0)return new xe(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const o=r.re/r.im,l=r.re*o+r.im;return new xe((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=r.im/r.re,l=r.im*o+r.re;return new xe((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(t,e){const r=ym(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return xe.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new xe(Math.pow(this.im,r.re),0);case 1:return new xe(0,Math.pow(this.im,r.re));case 2:return new xe(-Math.pow(this.im,r.re),0);case 3:return new xe(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return xe.ZERO;const a=Math.atan2(this.im,this.re),s=TR(this.re,this.im);let o=Math.exp(r.re*s-r.im*a),l=r.im*s+r.re*a;return new xe(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new xe(Math.sqrt(t),0):new xe(0,Math.sqrt(-t));const r=CR(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),i=Math.abs(e)/(2*n);return t>=0?new xe(n,e<0?-i:i):new xe(i,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new xe(t,0):new xe(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new xe(Math.expm1(t)*Math.cos(e)+y7e(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new xe(Math.log(t),0):new xe(TR(t,e),Math.atan2(e,t))},abs:function(){return CR(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new xe(Math.sin(t)*_a(e),Math.cos(t)*jo(e))},cos:function(){const t=this.re,e=this.im;return new xe(Math.cos(t)*_a(e),-Math.sin(t)*jo(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+_a(e);return new xe(Math.sin(t)/r,jo(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-_a(e);return new xe(-Math.sin(t)/r,jo(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*_a(2*e)+.5*Math.cos(2*t);return new xe(Math.cos(t)*_a(e)/r,Math.sin(t)*jo(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*_a(2*e)-.5*Math.cos(2*t);return new xe(Math.sin(t)*_a(e)/r,-Math.cos(t)*jo(e)/r)},asin:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new xe((1-e*e-t*t)/r,-2*t/r).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atan():new xe(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acos():new xe(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asin():new xe(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new xe(jo(t)*Math.cos(e),_a(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new xe(_a(t)*Math.cos(e),jo(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=_a(t)+Math.cos(e);return new xe(jo(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=_a(t)-Math.cos(e);return new xe(jo(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-_a(2*t);return new xe(-2*jo(t)*Math.cos(e)/r,2*_a(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+_a(2*t);return new xe(2*_a(t)*Math.cos(e)/r,-2*jo(t)*Math.sin(e)/r)},asinh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(0,0);const a=Math.abs(t),s=Math.log(a+Math.sqrt(a*a+1));return new xe(t<0?-s:s,0)}const r=t*t-e*e+1,n=2*t*e,i=new xe(r,n).sqrt();return new xe(t+i.re,e+i.im).log()},acosh:function(){const t=this.re,e=this.im;if(e===0){if(t>1)return new xe(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const i=Math.sqrt(t*t-1);return new xe(Math.log(-t+i),Math.PI)}return new xe(0,Math.acos(t))}const r=new xe(t-1,e).sqrt(),n=new xe(t+1,e).sqrt();return new xe(t+r.re*n.re-r.im*n.im,e+r.re*n.im+r.im*n.re).log()},atanh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(0,0);if(t===1)return new xe(1/0,0);if(t===-1)return new xe(-1/0,0);if(-1<t&&t<1)return new xe(.5*Math.log((1+t)/(1-t)),0);if(t>1){const l=(t+1)/(t-1);return new xe(.5*Math.log(l),-Math.PI/2)}const o=(1+t)/(1-t);return new xe(.5*Math.log(-o),Math.PI/2)}const r=1-t,n=1+t,i=r*r+e*e;if(i===0)return new xe(t!==-1?t/0:0,e!==0?e/0:0);const a=(n*r-e*e)/i,s=(e*r+n*e)/i;return new xe(TR(a,s)/2,Math.atan2(s,a)/2)},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,Math.PI/2);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atanh():new xe(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(1/0,0);const n=1/t;return new xe(Math.log(n+Math.sqrt(n*n+1)),0)}const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asinh():new xe(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acosh():new xe(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new xe(t/r,-e/r)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new xe(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new xe(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new xe(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=ym(t,e);return Math.abs(r.re-this.re)<=xe.EPSILON&&Math.abs(r.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<xe.EPSILON&&(t=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var w7e="Complex",x7e=[],A7e=Y(w7e,x7e,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(t){var e="",r=this.im,n=this.re,i=iv(this.re,t),a=iv(this.im,t),s=ot(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},xe.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(ot(r)){if(po(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),ot(n))return new xe({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(t){return new xe(t)},xe.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const at=BigInt(0),Vt=BigInt(1),ki=BigInt(2),Jx=BigInt(3),Qy=BigInt(5),Ds=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const _7e=2e3,Ue={s:Vt,n:at,d:Vt};function Oc(t,e){try{t=BigInt(t)}catch{throw kh()}return t*e}function Il(t){return typeof t=="bigint"?t:Math.floor(t)}function Jr(t,e){if(e===at)throw aV();const r=Object.create(qo.prototype);r.s=t<at?-Vt:Vt,t=t<at?-t:t;const n=bm(t,e);return r.n=t/n,r.d=e/n,r}const E7e=[ki*ki,ki,ki*ki,ki,ki*ki,ki*Jx,ki,ki*Jx];function cy(t){const e=Object.create(null);if(t<=Vt)return e[t]=Vt,e;const r=n=>{e[n]=(e[n]||at)+Vt};for(;t%ki===at;)r(ki),t/=ki;for(;t%Jx===at;)r(Jx),t/=Jx;for(;t%Qy===at;)r(Qy),t/=Qy;for(let n=0,i=ki+Qy;i*i<=t;){for(;t%i===at;)r(i),t/=i;i+=E7e[n],n=n+1&7}return t>Vt&&r(t),e}const Ei=function(t,e){let r=at,n=Vt,i=Vt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw kh();if(t%1!==0)throw vG();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw kh();if(e%1!==0)throw vG();n=BigInt(e)}i=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw kh();i=r*n}else if(typeof t=="number"){if(isNaN(t))throw kh();if(t<0&&(i=-Vt,t=-t),t%1===0)r=BigInt(t);else{let a=1,s=0,o=1,l=1,u=1,c=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);o<=c&&u<=c;){let f=(s+l)/(o+u);if(t===f){o+u<=c?(r=s+l,n=o+u):u>o?(r=l,n=u):(r=s,n=o);break}else t>f?(s+=l,o+=u):(l+=s,u+=o),o>c?(r=l,n=u):(r=s,n=o)}r=BigInt(r)*BigInt(a),n=BigInt(n)}}else if(typeof t=="string"){let a=0,s=at,o=at,l=at,u=Vt,c=Vt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw kh();if(f[a]==="-"?(i=-Vt,a++):f[a]==="+"&&a++,f.length===a+1?o=Oc(f[a++],i):f[a+1]==="."||f[a]==="."?(f[a]!=="."&&(s=Oc(f[a++],i)),a++,(a+1===f.length||f[a+1]==="("&&f[a+3]===")"||f[a+1]==="'"&&f[a+3]==="'")&&(o=Oc(f[a],i),u=Ds**BigInt(f[a].length),a++),(f[a]==="("&&f[a+2]===")"||f[a]==="'"&&f[a+2]==="'")&&(l=Oc(f[a+1],i),c=Ds**BigInt(f[a+1].length)-Vt,a+=3)):f[a+1]==="/"||f[a+1]===":"?(o=Oc(f[a],i),u=Oc(f[a+2],Vt),a+=3):f[a+3]==="/"&&f[a+1]===" "&&(s=Oc(f[a],i),o=Oc(f[a+2],i),u=Oc(f[a+4],Vt),a+=5),f.length<=a)n=u*c,i=r=l+n*s+c*o;else throw kh()}else if(typeof t=="bigint")r=t,i=t,n=Vt;else throw kh();if(n===at)throw aV();Ue.s=i<at?-Vt:Vt,Ue.n=r<at?-r:r,Ue.d=n<at?-n:n};function S7e(t,e,r){let n=Vt;for(;e>at;t=t*t%r,e>>=Vt)e&Vt&&(n=n*t%r);return n}function C7e(t,e){for(;e%ki===at;e/=ki);for(;e%Qy===at;e/=Qy);if(e===Vt)return at;let r=Ds%e,n=1;for(;r!==Vt;n++)if(r=r*Ds%e,n>_7e)return at;return BigInt(n)}function T7e(t,e,r){let n=Vt,i=S7e(Ds,r,e);for(let a=0;a<300;a++){if(n===i)return BigInt(a);n=n*Ds%e,i=i*Ds%e}return 0}function bm(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function qo(t,e){if(Ei(t,e),this instanceof qo)t=bm(Ue.d,Ue.n),this.s=Ue.s,this.n=Ue.n/t,this.d=Ue.d/t;else return Jr(Ue.s*Ue.n,Ue.d)}const aV=function(){return new Error("Division by Zero")},kh=function(){return new Error("Invalid argument")},vG=function(){return new Error("Parameters must be integer")};qo.prototype={s:Vt,n:at,d:Vt,abs:function(){return Jr(this.n,this.d)},neg:function(){return Jr(-this.s*this.n,this.d)},add:function(t,e){return Ei(t,e),Jr(this.s*this.n*Ue.d+Ue.s*this.d*Ue.n,this.d*Ue.d)},sub:function(t,e){return Ei(t,e),Jr(this.s*this.n*Ue.d-Ue.s*this.d*Ue.n,this.d*Ue.d)},mul:function(t,e){return Ei(t,e),Jr(this.s*Ue.s*this.n*Ue.n,this.d*Ue.d)},div:function(t,e){return Ei(t,e),Jr(this.s*Ue.s*this.n*Ue.d,this.d*Ue.n)},clone:function(){return Jr(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Jr(this.s*this.n%this.d,Vt);if(Ei(t,e),at===Ue.n*this.d)throw aV();return Jr(this.s*(Ue.d*this.n)%(Ue.n*this.d),Ue.d*this.d)},gcd:function(t,e){return Ei(t,e),Jr(bm(Ue.n,this.n)*bm(Ue.d,this.d),Ue.d*this.d)},lcm:function(t,e){return Ei(t,e),Ue.n===at&&this.n===at?Jr(at,Vt):Jr(Ue.n*this.n,bm(Ue.n,this.n)*bm(Ue.d,this.d))},inverse:function(){return Jr(this.s*this.d,this.n)},pow:function(t,e){if(Ei(t,e),Ue.d===Vt)return Ue.s<at?Jr((this.s*this.d)**Ue.n,this.n**Ue.n):Jr((this.s*this.n)**Ue.n,this.d**Ue.n);if(this.s<at)return null;let r=cy(this.n),n=cy(this.d),i=Vt,a=Vt;for(let s in r)if(s!=="1"){if(s==="0"){i=at;break}if(r[s]*=Ue.n,r[s]%Ue.d===at)r[s]/=Ue.d;else return null;i*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=Ue.n,n[s]%Ue.d===at)n[s]/=Ue.d;else return null;a*=BigInt(s)**n[s]}return Ue.s<at?Jr(a,i):Jr(i,a)},log:function(t,e){if(Ei(t,e),this.s<=at||Ue.s<=at)return null;const r=Object.create(null),n=cy(Ue.n),i=cy(Ue.d),a=cy(this.n),s=cy(this.d);for(const u in i)n[u]=(n[u]||at)-i[u];for(const u in s)a[u]=(a[u]||at)-s[u];for(const u in n)u!=="1"&&(r[u]=!0);for(const u in a)u!=="1"&&(r[u]=!0);let o=null,l=null;for(const u in r){const c=n[u]||at,f=a[u]||at;if(c===at){if(f!==at)return null;continue}let h=f,d=c;const p=bm(h,d);if(h/=p,d/=p,o===null&&l===null)o=h,l=d;else if(h*l!==o*d)return null}return o!==null&&l!==null?Jr(o,l):null},equals:function(t,e){return Ei(t,e),this.s*this.n*Ue.d===Ue.s*Ue.n*this.d},lt:function(t,e){return Ei(t,e),this.s*this.n*Ue.d<Ue.s*Ue.n*this.d},lte:function(t,e){return Ei(t,e),this.s*this.n*Ue.d<=Ue.s*Ue.n*this.d},gt:function(t,e){return Ei(t,e),this.s*this.n*Ue.d>Ue.s*Ue.n*this.d},gte:function(t,e){return Ei(t,e),this.s*this.n*Ue.d>=Ue.s*Ue.n*this.d},compare:function(t,e){Ei(t,e);let r=this.s*this.n*Ue.d-Ue.s*Ue.n*this.d;return(at<r)-(r<at)},ceil:function(t){return t=Ds**BigInt(t||0),Jr(Il(this.s*t*this.n/this.d)+(t*this.n%this.d>at&&this.s>=at?Vt:at),t)},floor:function(t){return t=Ds**BigInt(t||0),Jr(Il(this.s*t*this.n/this.d)-(t*this.n%this.d>at&&this.s<at?Vt:at),t)},round:function(t){return t=Ds**BigInt(t||0),Jr(Il(this.s*t*this.n/this.d)+this.s*((this.s>=at?Vt:at)+ki*(t*this.n%this.d)>this.d?Vt:at),t)},roundTo:function(t,e){Ei(t,e);const r=this.n*Ue.d,n=this.d*Ue.n,i=r%n;let a=Il(r/n);return i+i>=n&&a++,Jr(this.s*a*Ue.n,Ue.d)},divisible:function(t,e){return Ei(t,e),Ue.n===at?!1:this.n*Ue.d%(Ue.n*this.d)===at},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=C7e(e,r),i=T7e(e,r,n),a=this.s<at?"-":"";if(a+=Il(e/r),e%=r,e*=Ds,e&&(a+="."),n){for(let s=i;s--;)a+=Il(e/r),e%=r,e*=Ds;a+="(";for(let s=n;s--;)a+=Il(e/r),e%=r,e*=Ds;a+=")"}else for(let s=t;e&&s--;)a+=Il(e/r),e%=r,e*=Ds;return a},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<at?"-":"";if(r===Vt)n+=e;else{const i=Il(e/r);t&&i>at&&(n+=i,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<at?"-":"";if(r===Vt)n+=e;else{const i=Il(e/r);t&&i>at&&(n+=i,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(Il(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let a=Jr(n[i-1],Vt);for(let o=i-2;o>=0;o--)a=a.inverse().add(n[o]);let s=a.sub(r);if(s.n*e<s.d)return a.mul(this.s)}return this}};var D7e="Fraction",N7e=[],P7e=Y(D7e,N7e,()=>(Object.defineProperty(qo,"name",{value:"Fraction"}),qo.prototype.constructor=qo,qo.prototype.type="Fraction",qo.prototype.isFraction=!0,qo.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},qo.fromJSON=function(t){return new qo(t)},qo),{isClass:!0}),M7e="Range",I7e=[],O7e=Y(M7e,I7e,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=r!=null,s=n!=null;if(i){if(St(e))e=e.toNumber();else if(typeof e!="number"&&!Zx(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(St(r))r=r.toNumber();else if(typeof r!="number"&&!Zx(r))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(St(n))n=n.toNumber();else if(typeof n!="number"&&!Zx(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=a?parseFloat(r):0,this.step=s?parseFloat(n):1,s&&zi(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,i=this.end,a=i-r;return qd(n)===qd(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;r<i;)e(r,[a],this),r+=n,a++;else if(n<0)for(;r>i;)e(r,[a],this),r+=n,a++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,i,a){r[i[0]]=e(n,i,a)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=iv(this.start,e);return this.step!==1&&(r+=":"+iv(this.step,e)),r+=":"+iv(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),k7e="Matrix",R7e=[],F7e=Y(k7e,R7e,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function DR(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!nt(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function L7e(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=The(e);switch(r){case"fixed":return $7e(t,n);case"exponential":return yG(t,n);case"engineering":return B7e(t,n);case"bin":return DR(t,2,i);case"oct":return DR(t,8,i);case"hex":return DR(t,16,i);case"auto":{var a=bG(e==null?void 0:e.lowerExp,-3),s=bG(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,l=t.toSignificantDigits(n),u=l.e;return u>=a&&u<s?o=l.toFixed():o=yG(t,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function B7e(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var s=t.constructor;a=new s(a).toFixed()}return a+"e"+(r>=0?"+":"")+n.toString()}function yG(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function $7e(t,e){return t.toFixed(e)}function bG(t,e){return ot(t)?t:St(t)?t.toNumber():e}function j7e(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function Ft(t,e){var r=V7e(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function V7e(t,e){if(typeof t=="number")return iv(t,e);if(St(t))return L7e(t,e);if(U7e(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return Uhe(t,e);if(Nn(t))return Zy(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>Zy(n)+": "+Ft(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Zy(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);r+=i in wG?wG[i]:i,n++}return'"'+r+'"'}var wG={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ol(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function Uhe(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Uhe(t[i],e);return r+="]",r}else return Ft(t,e)}function U7e(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function s4(t,e){if(!Nn(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+yr(t)+", index: 0)");if(!Nn(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+yr(e)+", index: 1)");return t===e?0:t>e?1:-1}function kt(t,e,r){if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}kt.prototype=new RangeError;kt.prototype.constructor=RangeError;kt.prototype.name="DimensionError";kt.prototype.isDimensionError=!0;function gu(t,e,r){if(!(this instanceof gu))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}gu.prototype=new RangeError;gu.prototype.constructor=RangeError;gu.prototype.name="IndexError";gu.prototype.isIndexError=!0;function xt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function zhe(t,e,r){var n,i=t.length;if(i!==e[r])throw new kt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var s=t[n];if(!Array.isArray(s))throw new kt(e.length-1,e.length,"<");zhe(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new kt(e.length+1,e.length,">")}function xG(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new kt(t.length,0)}else zhe(t,e,0)}function dP(t,e){var r=t.isMatrix?t._size:xt(t),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==r[a])throw new kt(i,r[a])})}function Nr(t,e){if(t!==void 0){if(!ot(t)||!nt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new gu(t,e)}}function w1(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&gr(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(Nn(r)&&r.length===0)return!0}return!1}function x1(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!ot(i)||!nt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(e)+")")}),(ot(t)||St(t))&&(t=[t]);var n=r!==void 0?r:0;return o4(t,e,0,n),t}function o4(t,e,r,n){var i,a,s=t.length,o=e[r],l=Math.min(s,o);if(t.length=o,r<e.length-1){var u=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),o4(a,e,u,n);for(i=l;i<o;i++)a=[],t[i]=a,o4(a,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<o;i++)t[i]=n}}function sV(t,e){var r=er(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new kt(0,n,"!=");e=oV(e,n);var i=qhe(e);if(n!==i)throw new kt(i,n,"!=");try{return z7e(r,e)}catch(a){throw a instanceof kt?new kt(i,n,"!="):a}}function oV(t,e){var r=qhe(t),n=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,l=e%r===0;if(o)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function qhe(t){return t.reduce((e,r)=>e*r,1)}function z7e(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=r.length/a,o=0;o<s;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function pP(t,e){for(var r=xt(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=Hhe(t,n,0),r.length=n),t}function Hhe(t,e,r){var n,i;if(r<e){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Hhe(t[n],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function Whe(t,e,r,n){var i=n||xt(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Ghe(t,e,0);i.length<e;)i.push(1);return t}function Ghe(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Ghe(t[n],e,a)}else for(var s=r;s<e;s++)t=[t];return t}function er(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?i(t):n(t),r;function n(a){for(var s=0;s<a.length;s++){var o=a[s];Array.isArray(o)?n(o):r.push(o)}}function i(a){if(Array.isArray(a[0]))for(var s=0;s<a.length;s++)i(a[s]);else for(var o=0;o<a.length;o++)r.push(a[o])}}function op(t,e){return Array.prototype.map.call(t,e)}function Khe(t,e){Array.prototype.forEach.call(t,e)}function AG(t,e){if(xt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function _G(t,e){if(xt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function EG(t,e){return Array.prototype.join.call(t,e)}function A1(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function mP(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function fO(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?fO(a,e):e(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function Xhe(t,e,r,n){if(n<r){if(t.length!==e.length)throw new kt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=Xhe(t[a],e[a],r,n+1);return i}else return t.concat(e)}function Yhe(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return Xhe(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function gP(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(h=>h.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],l=n[s],u=0;u<l;u++){var c=i-l+u;o[u]>a[c]&&(a[c]=o[u])}for(var f=0;f<e.length;f++)Qhe(e[f],a);return a}function Qhe(t,e){for(var r=e.length,n=t.length,i=0;i<n;i++){var a=r-n+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[i]," to size ").concat(e[a]))}}function Om(t,e){var r=xt(t);if(uh(r,e))return t;Qhe(r,e);var n=gP(r,e),i=n.length,a=[...Array(i-r.length).fill(1),...r],s=H7e(t);r.length<i&&(s=sV(s,a),r=xt(s));for(var o=0;o<i;o++)r[o]<n[o]&&(s=q7e(s,n[o],o),r=xt(s));return s}function q7e(t,e,r){return Yhe(...Array(e).fill(t),r)}function vP(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=xt(t);if(e.length!==r.length)throw new kt(e.length,r.length);for(var n=0;n<e.length;n++)Nr(e[n],r[n]);return e.reduce((i,a)=>i[a],t)}function l4(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return a(t);var n=[];return i(t,0);function i(s,o){if(Array.isArray(s)){for(var l=s.length,u=Array(l),c=0;c<l;c++)n[o]=c,u[c]=i(s[c],o+1);return u}else return e(s,n.slice(0,o),t)}function a(s){if(Array.isArray(s)){for(var o=s.length,l=Array(o),u=0;u<o;u++)l[u]=a(s[u]);return l}else return e(s)}}function Zhe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){a(t);return}var n=[];i(t,0);function i(s,o){if(Array.isArray(s))for(var l=s.length,u=0;u<l;u++)n[o]=u,i(s[u],o+1);else e(s,n.slice(0,o),t)}function a(s){if(Array.isArray(s))for(var o=s.length,l=0;l<o;l++)a(s[l]);else e(s)}}function H7e(t){return Bn([],t)}function Dv(t,e,r,n){if(uP.isTypedFunction(t)){var i;if(n)i=1;else{var a=e.isMatrix?e.size():xt(e),s=a.length?a[a.length-1]===0:!0;if(s)return{isUnary:n,fn:t};var o=a.map(()=>0),l=e.isMatrix?e.get(o):vP(e,o);i=K7e(t,l,o,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=W7e(t,i);u=c!==void 0?c:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return SG(u,d.slice(0,i),r,t.name)}}:{isUnary:!1,fn:function(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return SG(u,d,r,t.name)}}}return n===void 0?{isUnary:G7e(t),fn:t}:{isUnary:n,fn:t}}function W7e(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[i,a]=n;i.split(",").length===e&&r.push(a)}),r.length===1)return r[0]}function G7e(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function K7e(t,e,r,n){for(var i=[e,r,n],a=3;a>0;a--){var s=i.slice(0,a);if(uP.resolve(t,s)!==null)return a}}function SG(t,e,r,n){try{return t(...e)}catch(i){X7e(i,e,r,n)}}function X7e(t,e,r,n){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(yr(e[0]))),e.length>=2&&a.push("index: ".concat(yr(e[1]))),e.length>=3&&a.push("array: ".concat(yr(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var Y7e="DenseMatrix",Q7e=["Matrix","config"],Z7e=Y(Y7e,Q7e,t=>{var{Matrix:e,config:r}=t;function n(f,h){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Nn(h))throw new Error("Invalid datatype: "+h);if(ft(f))f.type==="DenseMatrix"?(this._data=wt(f._data),this._size=wt(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&gr(f.data)&&gr(f.size))this._data=f.data,this._size=f.size,xG(this._data,this._size),this._datatype=h||f.datatype;else if(gr(f))this._data=c(f),this._size=xt(this._data),xG(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+yr(f)+")");this._data=[],this._size=[0],this._datatype=h}}n.prototype=new e,n.prototype.createDenseMatrix=function(f,h){return new n(f,h)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return fO(this._data,yr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(f,h){return new n(f,h)},n.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return i(this,f);case 2:case 3:return s(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(f){return vP(this._data,f)},n.prototype.set=function(f,h,d){if(!gr(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new kt(f.length,this._size.length,"<");var p,m,v,y=f.map(function(b){return b+1});u(this,y,d);var w=this._data;for(p=0,m=f.length-1;p<m;p++)v=f[p],Nr(v,w.length),w=w[v];return v=f[f.length-1],Nr(v,w.length),w[v]=h,this};function i(f,h){if(!iO(h))throw new TypeError("Invalid index");var d=r.legacySubset?h.size().every(x=>x===1):h.isScalar();if(d)return f.get(h.min());var p=h.size();if(p.length!==f._size.length)throw new kt(p.length,f._size.length);for(var m=h.min(),v=h.max(),y=0,w=f._size.length;y<w;y++)Nr(m[y],f._size[y]),Nr(v[y],f._size[y]);var b=new n,A=a(f._data,h);return b._size=A.size,b._datatype=f._datatype,b._data=A.data,r.legacySubset?b.reshape(h.size()):b}function a(f,h){var d=h.size().length-1,p=Array(d);return{data:m(f),size:p.filter(v=>v!==null)};function m(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=h.dimension(y);function b(A,x){return ot(A)?x(A):A.map(x).valueOf()}return ot(w)?p[y]=null:p[y]=w.size()[0],y<d?b(w,A=>(Nr(A,v.length),m(v[A],y+1))):b(w,A=>(Nr(A,v.length),v[A]))}}function s(f,h,d,p){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var m=h.size(),v=h.isScalar(),y;if(ft(d)?(y=d.size(),d=d.valueOf()):y=xt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,p)}else{if(!uh(y,m)){if(y.length===0)d=Om([d],m);else try{d=Om(d,m)}catch{}y=xt(d)}if(m.length<f._size.length)throw new kt(m.length,f._size.length,"<");if(y.length<m.length){for(var w=0,b=0;m[w]===1&&y[w]===1;)w++;for(;m[w]===1;)b++,w++;d=Whe(d,m.length,b,y)}if(!uh(m,y))throw new kt(m,y,">");var A=h.max().map(function(x){return x+1});u(f,A,p),o(f._data,h,d)}return f}function o(f,h,d){var p=h.size().length-1;m(f,d);function m(v,y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=h.dimension(w),A=(_,S)=>{Nr(_,v.length),m(v[_],y[S[0]],w+1)},x=(_,S)=>{Nr(_,v.length),v[_]=y[S[0]]};w<p?ot(b)?A(b,[0]):b.forEach(A):ot(b)?x(b,[0]):b.forEach(x)}}n.prototype.resize=function(f,h,d){if(!To(f))throw new TypeError("Array or Matrix expected");var p=f.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return l(m,p,h)};function l(f,h,d){if(h.length===0){for(var p=f._data;gr(p);)p=p[0];return p}return f._size=h.slice(0),f._data=x1(f._data,f._size,d),f}n.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=sV(d._data,f);var p=d._size.reduce((m,v)=>m*v);return d._size=oV(f,p),d};function u(f,h,d){for(var p=f._size.slice(0),m=!1;p.length<h.length;)p.push(0),m=!0;for(var v=0,y=h.length;v<y;v++)h[v]>p[v]&&(p[v]=h[v],m=!0);m&&l(f,p,d)}n.prototype.clone=function(){var f=new n({data:wt(this._data),size:wt(this._size),datatype:this._datatype});return f},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return d.clone();var m=Dv(f,d,"map",h),v=m.fn,y=d.create(void 0,d._datatype);if(y._size=d._size,h||m.isUnary)return y._data=S(d._data),y;if(p===0){for(var w=d.valueOf(),b=Array(w.length),A=0;A<w.length;A++)b[A]=v(w[A],[A],d);return y._data=b,y}var x=[];return y._data=_(d._data),y;function _(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(E.length);if(T<p)for(var N=0;N<E.length;N++)x[T]=N,D[N]=_(E[N],T+1);else for(var P=0;P<E.length;P++)x[T]=P,D[P]=v(E[P],x.slice(),d);return D}function S(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(E.length);if(T<p)for(var N=0;N<E.length;N++)D[N]=S(E[N],T+1);else for(var P=0;P<E.length;P++)D[P]=v(E[P]);return D}},n.prototype.forEach=function(f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return;var m=Dv(f,d,"map",h),v=m.fn;if(h||m.isUnary){A(d._data);return}if(p===0){for(var y=0;y<d._data.length;y++)v(d._data[y],[y],d);return}var w=[];b(d._data);function b(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<x.length;S++)w[_]=S,b(x[S],_+1);else for(var E=0;E<x.length;E++)w[_]=E,v(x[E],w.slice(),d)}function A(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<x.length;S++)A(x[S],_+1);else for(var E=0;E<x.length;E++)v(x[E])}},n.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var h=0;h<this._data.length;h++)yield{value:this._data[h],index:[h]};return}for(var d=Array(f+1).fill(0),p=this._size.reduce((b,A)=>b*A,1),m=0;m<p;m++){for(var v=this._data,y=0;y<f;y++)v=v[d[y]];yield{value:v[d[f]],index:d.slice()};for(var w=f;w>=0&&(d[w]++,!(d[w]<this._size[w]));w--)d[w]=0}}},n.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var p of d)f.push(new n([p],this._datatype));return f},n.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,m=function(w){var b=p.map(A=>[A[w]]);h.push(new n(b,f._datatype))},v=0;v<d[1];v++)m(v);return h},n.prototype.toArray=function(){return wt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(f){return Ft(this._data,f)},n.prototype.toString=function(){return Ft(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(f){if(f){if(St(f)&&(f=f.toNumber()),!ot(f)||!nt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,p=this._size[0],m=this._size[1],v=Math.min(p-d,m-h),y=[],w=0;w<v;w++)y[w]=this._data[w+d][w+h];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(f,h,d,p){if(!gr(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(E){if(St(E)&&(E=E.toNumber()),!ot(E)||!nt(E)||E<1)throw new Error("Size values must be positive integers");return E}),d){if(St(d)&&(d=d.toNumber()),!ot(d)||!nt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=f[0],w=f[1],b=Math.min(y-v,w-m),A;if(gr(h)){if(h.length!==b)throw new Error("Invalid value array length");A=function(T){return h[T]}}else if(ft(h)){var x=h.size();if(x.length!==1||x[0]!==b)throw new Error("Invalid matrix length");A=function(T){return h.get([T])}}else A=function(){return h};p||(p=St(A(0))?A(0).mul(0):0);var _=[];if(f.length>0){_=x1(_,f,p);for(var S=0;S<b;S++)_[S+v][S+m]=A(S)}return new n({data:_,size:[y,w]})},n.fromJSON=function(f){return new n(f)},n.prototype.swapRows=function(f,h){if(!ot(f)||!nt(f)||!ot(h)||!nt(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Nr(f,this._size[0]),Nr(h,this._size[0]),n._swapRows(f,h,this._data),this},n._swapRows=function(f,h,d){var p=d[f];d[f]=d[h],d[h]=p};function c(f){return ft(f)?c(f.valueOf()):gr(f)?f.map(c):f}return n},{isClass:!0}),CG="clone",J7e=["typed"],eqe=Y(CG,J7e,t=>{var{typed:e}=t;return e(CG,{any:wt})});function Jhe(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var s=[];for(n=0;n<e;n++)s.push(t[n][i]);a.push(s)}return a}function Q1(t){for(var e=0;e<t.length;e++)if(To(t[e]))return!0;return!1}function Tp(t,e){ft(t)?t.forEach(r=>e(r),!1,!0):Zhe(t,e,!0)}function Ct(t,e,r){if(!r)return ft(t)?t.map(i=>e(i),!1,!0):l4(t,e,!0);var n=i=>i===0?i:e(i);return ft(t)?t.map(i=>n(i),!1,!0):l4(t,n,!0)}function hO(t,e,r){var n=Array.isArray(t)?xt(t):t.size();if(e<0||e>=n.length)throw new gu(e,n.length);return ft(t)?t.create(yP(t.valueOf(),e,r),t.datatype()):yP(t,e,r)}function yP(t,e,r){var n,i,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=Jhe(t),i=[],n=0;n<s.length;n++)i[n]=yP(s[n],e-1,r);return i}else{for(a=t[0],n=1;n<t.length;n++)a=r(a,t[n]);return a}else{for(i=[],n=0;n<t.length;n++)i[n]=yP(t[n],e-1,r);return i}}function TG(t,e,r,n,i,a,s,o,l,u,c){var f=t._values,h=t._index,d=t._ptr,p,m,v,y;if(n)for(m=d[e],v=d[e+1],p=m;p<v;p++)y=h[p],r[y]!==a?(r[y]=a,s.push(y),n[y]=f[p]):(n[y]=o(n[y],f[p]),i[y]=a);else for(m=d[e],v=d[e+1],p=m;p<v;p++)y=h[p],r[y]!==a?(r[y]=a,s.push(y)):i[y]=a}var DG="isInteger",tqe=["typed","equal"],rqe=Y(DG,tqe,t=>{var{typed:e,equal:r}=t;return e(DG,{number:n=>Number.isFinite(n)?r(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?r(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),vu="number",Z1="number, number";function ede(t){return Math.abs(t)}ede.signature=vu;function tde(t,e){return t+e}tde.signature=Z1;function rde(t,e){return t-e}rde.signature=Z1;function nde(t,e){return t*e}nde.signature=Z1;function ide(t){return-t}ide.signature=vu;function ade(t){return t}ade.signature=vu;function Dx(t){return i9e(t)}Dx.signature=vu;function sde(t){return t*t*t}sde.signature=vu;function ode(t){return Math.exp(t)}ode.signature=vu;function lde(t){return a9e(t)}lde.signature=vu;function ude(t,e){if(!nt(t)||!nt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}ude.signature=Z1;function NG(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function bP(t){return r9e(t)}bP.signature=vu;function u4(t){return t9e(t)}u4.signature=vu;function PG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function c4(t){return qd(t)}c4.signature=vu;function cde(t){return t*t}cde.signature=vu;function fde(t,e){var r,n,i,a=0,s=1,o=1,l=0;if(!nt(t)||!nt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),i=t-n*e,r=a,a=s-n*a,s=r,r=o,o=l-n*o,l=r,t=e,e=i;var u;return t<0?u=[-t,-s,-l]:u=[t,t?s:0,l],u}fde.signature=Z1;function hde(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}hde.signature=Z1;function qw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!nt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Dhe(t,e))}var nqe="number",J1="number, number";function dde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitAnd");return t&e}dde.signature=J1;function pde(t){if(!nt(t))throw new Error("Integer expected in function bitNot");return~t}pde.signature=nqe;function mde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitOr");return t|e}mde.signature=J1;function gde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitXor");return t^e}gde.signature=J1;function vde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function leftShift");return t<<e}vde.signature=J1;function yde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}yde.signature=J1;function bde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}bde.signature=J1;function kf(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return kf(t,r)*kf(r+1,e)}function wde(t,e){if(!nt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!nt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=e<r?r+1:e+1,a=2,s=e<r?e:r,o=i;o<=t;++o)for(n*=o;a<=s&&n%a===0;)n/=a,++a;return a<=s&&(n/=kf(a,s)),n}wde.signature="number, number";var iqe=Math.PI,aqe=2*Math.PI,sqe=Math.E,oqe=1.618033988749895,lqe="number",lV="number, number";function xde(t){return!t}xde.signature=lqe;function f4(t,e){return!!(t||e)}f4.signature=lV;function h4(t,e){return!!t!=!!e}h4.signature=lV;function d4(t,e){return!!(t&&e)}d4.signature=lV;function wP(t){var e;if(nt(t))return t<=0?Number.isFinite(t)?1/0:NaN:t>171?1/0:kf(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*wP(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,i=n*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=w0[0];for(var s=1;s<w0.length;++s)e+=w0[s]/(t+s);var o=t+Ade+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}wP.signature="number";var Ade=4.7421875,w0=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],_de=.9189385332046728,uqe=5,cqe=7,MG=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function xP(t){if(t<0)return NaN;if(t===0)return 1/0;if(!Number.isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-xP(1-t);t=t-1;for(var e=t+uqe+.5,r=MG[0],n=cqe-1;n>=1;n--)r+=MG[n]/(t+n);return _de+(t+.5)*Math.log(e)-e+Math.log(r)}xP.signature="number";var Ua="number";function Ede(t){return u9e(t)}Ede.signature=Ua;function Sde(t){return Math.atan(1/t)}Sde.signature=Ua;function Cde(t){return Number.isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}Cde.signature=Ua;function Tde(t){return Math.asin(1/t)}Tde.signature=Ua;function Dde(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}Dde.signature=Ua;function Nde(t){return Math.acos(1/t)}Nde.signature=Ua;function Pde(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}Pde.signature=Ua;function Mde(t){return c9e(t)}Mde.signature=Ua;function Ide(t){return f9e(t)}Ide.signature=Ua;function Ode(t){return 1/Math.tan(t)}Ode.signature=Ua;function kde(t){var e=Math.exp(2*t);return(e+1)/(e-1)}kde.signature=Ua;function Rde(t){return 1/Math.sin(t)}Rde.signature=Ua;function Fde(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*qd(t)}Fde.signature=Ua;function Lde(t){return 1/Math.cos(t)}Lde.signature=Ua;function Bde(t){return 2/(Math.exp(t)+Math.exp(-t))}Bde.signature=Ua;function $de(t){return d9e(t)}$de.signature=Ua;var uV="number";function jde(t){return t<0}jde.signature=uV;function Vde(t){return t>0}Vde.signature=uV;function Ude(t){return Number.isNaN(t)}Ude.signature=uV;function El(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var IG="isNegative",fqe=["typed","config"],hqe=Y(IG,fqe,t=>{var{typed:e,config:r}=t;return e(IG,{number:n=>zi(n,0,r.relTol,r.absTol)?!1:jde(n),BigNumber:n=>El(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),OG="isNumeric",dqe=["typed"],pqe=Y(OG,dqe,t=>{var{typed:e}=t;return e(OG,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),kG="hasNumericValue",mqe=["typed","isNumeric"],gqe=Y(kG,mqe,t=>{var{typed:e,isNumeric:r}=t;return e(kG,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return r(i)}})}),RG="isPositive",vqe=["typed","config"],yqe=Y(RG,vqe,t=>{var{typed:e,config:r}=t;return e(RG,{number:n=>zi(n,0,r.relTol,r.absTol)?!1:Vde(n),BigNumber:n=>El(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),FG="isZero",bqe=["typed","equalScalar"],wqe=Y(FG,bqe,t=>{var{typed:e,equalScalar:r}=t;return e(FG,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),LG="isNaN",xqe=["typed"],Aqe=Y(LG,xqe,t=>{var{typed:e}=t;return e(LG,{number:Ude,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),BG="isBounded",_qe=["typed"],Eqe=Y(BG,_qe,t=>{var{typed:e}=t;return e(BG,{number:r=>Number.isFinite(r),"BigNumber | Complex":r=>r.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(r=>n=>r(n.value)),"Array | Matrix":e.referToSelf(r=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(i=>r(i))))})}),$G="isFinite",Sqe=["typed","isBounded","map"],Cqe=Y($G,Sqe,t=>{var{typed:e,isBounded:r,map:n}=t;return e($G,{"Array | Matrix":i=>n(i,r),any:i=>r(i)})}),jG="typeOf",Tqe=["typed"],Dqe=Y(jG,Tqe,t=>{var{typed:e}=t;return e(jG,{any:yr})});function Nqe(t,e,r,n){return zi(t.re,e.re,r,n)&&zi(t.im,e.im,r,n)}var ew=Y("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),AP="equalScalar",Pqe=["typed","config"],Mqe=Y(AP,Pqe,t=>{var{typed:e,config:r}=t,n=ew({typed:e});return e(AP,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return zi(a,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||El(a,s,r.relTol,r.absTol)},"bigint, bigint":function(a,s){return a===s},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return Nqe(a,s,r.relTol,r.absTol)}},n)});Y(AP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(AP,{"number, number":function(i,a){return zi(i,a,r.relTol,r.absTol)}})});var Iqe="SparseMatrix",Oqe=["typed","equalScalar","Matrix"],kqe=Y(Iqe,Oqe,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(m,v){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(v&&!Nn(v))throw new Error("Invalid datatype: "+v);if(ft(m))a(this,m,v);else if(m&&gr(m.index)&&gr(m.ptr)&&gr(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=v||m.datatype;else if(gr(m))s(this,m,v);else{if(m)throw new TypeError("Unsupported type of data ("+yr(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=v}}function a(m,v,y){v.type==="SparseMatrix"?(m._values=v._values?wt(v._values):void 0,m._index=wt(v._index),m._ptr=wt(v._ptr),m._size=wt(v._size),m._datatype=y||v._datatype):s(m,v.valueOf(),y||v._datatype)}function s(m,v,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var w=v.length,b=0,A=r,x=0;if(Nn(y)&&(A=e.find(r,[y,y])||r,x=e.convert(0,y)),w>0){var _=0;do{m._ptr.push(m._index.length);for(var S=0;S<w;S++){var E=v[S];if(gr(E)){if(_===0&&b<E.length&&(b=E.length),_<E.length){var T=E[_];A(T,x)||(m._values.push(T),m._index.push(S))}}else _===0&&b<1&&(b=1),A(E,x)||(m._values.push(E),m._index.push(S))}_++}while(_<b)}for(;m._ptr.length<=b;)m._ptr.push(m._index.length);m._size=[w,b]}i.prototype=new n,i.prototype.createSparseMatrix=function(m,v){return new i(m,v)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return fO(this._values,yr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,v){return new i(m,v)},i.prototype.density=function(){var m=this._size[0],v=this._size[1];return m!==0&&v!==0?this._index.length/(m*v):0},i.prototype.subset=function(m,v,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,m);case 2:case 3:return l(this,m,v,y);default:throw new SyntaxError("Wrong number of arguments")}};function o(m,v){if(!iO(v))throw new TypeError("Invalid index");var y=v.isScalar();if(y)return m.get(v.min());var w=v.size();if(w.length!==m._size.length)throw new kt(w.length,m._size.length);var b,A,x,_,S=v.min(),E=v.max();for(b=0,A=m._size.length;b<A;b++)Nr(S[b],m._size[b]),Nr(E[b],m._size[b]);var T=m._values,D=m._index,N=m._ptr,P=v.dimension(0),M=v.dimension(1),j=[],K=[];function k(ue,re){K[ue]=re[0],j[ue]=!0}Number.isInteger(P)?k(P,[0]):P.forEach(k);var V=T?[]:void 0,q=[],H=[];function te(ue){for(H.push(q.length),x=N[ue],_=N[ue+1];x<_;x++)b=D[x],j[b]===!0&&(q.push(K[b]),V&&V.push(T[x]))}return Number.isInteger(M)?te(M):M.forEach(te),H.push(q.length),new i({values:V,index:q,ptr:H,size:w,datatype:m._datatype})}function l(m,v,y,w){if(!v||v.isIndex!==!0)throw new TypeError("Invalid index");var b=v.size(),A=v.isScalar(),x;if(ft(y)?(x=y.size(),y=y.toArray()):x=xt(y),A){if(x.length!==0)throw new TypeError("Scalar expected");m.set(v.min(),y,w)}else{if(b.length!==1&&b.length!==2)throw new kt(b.length,m._size.length,"<");if(x.length<b.length){for(var _=0,S=0;b[_]===1&&x[_]===1;)_++;for(;b[_]===1;)S++,_++;y=Whe(y,b.length,S,x)}if(!uh(b,x))throw new kt(b,x,">");if(b.length===1){var E=v.dimension(0);N(E,(P,M)=>{Nr(P),m.set([P,0],y[M[0]],w)})}else{var T=v.dimension(0),D=v.dimension(1);N(T,(P,M)=>{Nr(P),N(D,(j,K)=>{Nr(j),m.set([P,j],y[M[0]][K[0]],w)})})}}return m;function N(P,M){ot(P)?M(P,[0]):P.forEach(M)}}i.prototype.get=function(m){if(!gr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new kt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var v=m[0],y=m[1];Nr(v,this._size[0]),Nr(y,this._size[1]);var w=u(v,this._ptr[y],this._ptr[y+1],this._index);return w<this._ptr[y+1]&&this._index[w]===v?this._values[w]:0},i.prototype.set=function(m,v,y){if(!gr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new kt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=m[0],b=m[1],A=this._size[0],x=this._size[1],_=r,S=0;Nn(this._datatype)&&(_=e.find(r,[this._datatype,this._datatype])||r,S=e.convert(0,this._datatype)),(w>A-1||b>x-1)&&(h(this,Math.max(w+1,A),Math.max(b+1,x),y),A=this._size[0],x=this._size[1]),Nr(w,A),Nr(b,x);var E=u(w,this._ptr[b],this._ptr[b+1],this._index);return E<this._ptr[b+1]&&this._index[E]===w?_(v,S)?c(E,b,this._values,this._index,this._ptr):this._values[E]=v:_(v,S)||f(E,w,b,v,this._values,this._index,this._ptr),this};function u(m,v,y,w){if(y-v===0)return y;for(var b=v;b<y;b++)if(w[b]===m)return b;return v}function c(m,v,y,w,b){y.splice(m,1),w.splice(m,1);for(var A=v+1;A<b.length;A++)b[A]--}function f(m,v,y,w,b,A,x){b.splice(m,0,w),A.splice(m,0,v);for(var _=y+1;_<x.length;_++)x[_]++}i.prototype.resize=function(m,v,y){if(!To(m))throw new TypeError("Array or Matrix expected");var w=m.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(A){if(!ot(A)||!nt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(w)+")")});var b=y?this.clone():this;return h(b,w[0],w[1],v)};function h(m,v,y,w){var b=w||0,A=r,x=0;Nn(m._datatype)&&(A=e.find(r,[m._datatype,m._datatype])||r,x=e.convert(0,m._datatype),b=e.convert(b,m._datatype));var _=!A(b,x),S=m._size[0],E=m._size[1],T,D,N;if(y>E){for(D=E;D<y;D++)if(m._ptr[D]=m._values.length,_)for(T=0;T<S;T++)m._values.push(b),m._index.push(T);m._ptr[y]=m._values.length}else y<E&&(m._ptr.splice(y+1,E-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(E=y,v>S){if(_){var P=0;for(D=0;D<E;D++){m._ptr[D]=m._ptr[D]+P,N=m._ptr[D+1]+P;var M=0;for(T=S;T<v;T++,M++)m._values.splice(N+M,0,b),m._index.splice(N+M,0,T),P++}m._ptr[E]=m._values.length}}else if(v<S){var j=0;for(D=0;D<E;D++){m._ptr[D]=m._ptr[D]-j;var K=m._ptr[D],k=m._ptr[D+1]-j;for(N=K;N<k;N++)T=m._index[N],T>v-1&&(m._values.splice(N,1),m._index.splice(N,1),j++)}m._ptr[D]=m._values.length}return m._size[0]=v,m._size[1]=y,m}i.prototype.reshape=function(m,v){if(!gr(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(H){if(!ot(H)||!nt(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ft(m)+")")});var y=this._size[0]*this._size[1];m=oV(m,y);var w=m[0]*m[1];if(y!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=v?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var A=[],x=0;x<b._ptr.length;x++)for(var _=0;_<b._ptr[x+1]-b._ptr[x];_++)A.push(x);for(var S=b._values.slice(),E=b._index.slice(),T=0;T<b._index.length;T++){var D=E[T],N=A[T],P=D*b._size[1]+N;A[T]=P%m[1],E[T]=Math.floor(P/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var M=0;M<b._ptr.length;M++)b._ptr[M]=0;for(var j=0;j<S.length;j++){var K=E[j],k=A[j],V=S[j],q=u(K,b._ptr[k],b._ptr[k+1],b._index);f(q,K,k,V,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?wt(this._values):void 0,index:wt(this._index),ptr:wt(this._ptr),size:wt(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,v){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,w=this._size[0],b=this._size[1],A=Dv(m,y,"map"),x=function(S,E,T){return A.fn(S,[E,T],y)};return d(this,0,w-1,0,b-1,x,v)};function d(m,v,y,w,b,A,x){var _=[],S=[],E=[],T=r,D=0;Nn(m._datatype)&&(T=e.find(r,[m._datatype,m._datatype])||r,D=e.convert(0,m._datatype));for(var N=function(L,ie,X){var pe=A(L,ie,X);T(pe,D)||(_.push(pe),S.push(ie))},P=w;P<=b;P++){E.push(_.length);var M=m._ptr[P],j=m._ptr[P+1];if(x)for(var K=M;K<j;K++){var k=m._index[K];k>=v&&k<=y&&N(m._values[K],k-v,P-w)}else{for(var V={},q=M;q<j;q++){var H=m._index[q];V[H]=m._values[q]}for(var te=v;te<=y;te++){var ue=te in V?V[te]:0;N(ue,te-v,P-w)}}}return E.push(_.length),new i({values:_,index:S,ptr:E,size:[y-v+1,b-w+1]})}i.prototype.forEach=function(m,v){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,w=this._size[0],b=this._size[1],A=Dv(m,y,"forEach"),x=0;x<b;x++){var _=this._ptr[x],S=this._ptr[x+1];if(v)for(var E=_;E<S;E++){var T=this._index[E];A.fn(this._values[E],[T,x],y)}else{for(var D={},N=_;N<S;N++){var P=this._index[N];D[P]=this._values[N]}for(var M=0;M<w;M++){var j=M in D?D[M]:0;A.fn(j,[M,x],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],v=0;v<m;v++)for(var y=this._ptr[v],w=this._ptr[v+1],b=y;b<w;b++){var A=this._index[b];yield{value:this._values[b],index:[A,v]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,v,y,w,b){var A=w[0],x=w[1],_=[],S,E;for(S=0;S<A;S++)for(_[S]=[],E=0;E<x;E++)_[S][E]=0;for(E=0;E<x;E++)for(var T=y[E],D=y[E+1],N=T;N<D;N++)S=v[N],_[S][E]=m?b?wt(m[N]):m[N]:1;return _}return i.prototype.format=function(m){for(var v=this._size[0],y=this._size[1],w=this.density(),b="Sparse Matrix ["+Ft(v,m)+" x "+Ft(y,m)+"] density: "+Ft(w,m)+`
`,A=0;A<y;A++)for(var x=this._ptr[A],_=this._ptr[A+1],S=x;S<_;S++){var E=this._index[S];b+=`
    (`+Ft(E,m)+", "+Ft(A,m)+") ==> "+(this._values?Ft(this._values[S],m):"X")}return b},i.prototype.toString=function(){return Ft(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(St(m)&&(m=m.toNumber()),!ot(m)||!nt(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var v=m>0?m:0,y=m<0?-m:0,w=this._size[0],b=this._size[1],A=Math.min(w-y,b-v),x=[],_=[],S=[];S[0]=0;for(var E=v;E<b&&x.length<A;E++)for(var T=this._ptr[E],D=this._ptr[E+1],N=T;N<D;N++){var P=this._index[N];if(P===E-v+y){x.push(this._values[N]),_[x.length-1]=P-y;break}}return S.push(x.length),new i({values:x,index:_,ptr:S,size:[A,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,v,y,w,b){if(!gr(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(H){if(St(H)&&(H=H.toNumber()),!ot(H)||!nt(H)||H<1)throw new Error("Size values must be positive integers");return H}),y){if(St(y)&&(y=y.toNumber()),!ot(y)||!nt(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var A=r,x=0;Nn(b)&&(A=e.find(r,[b,b])||r,x=e.convert(0,b));var _=y>0?y:0,S=y<0?-y:0,E=m[0],T=m[1],D=Math.min(E-S,T-_),N;if(gr(v)){if(v.length!==D)throw new Error("Invalid value array length");N=function(te){return v[te]}}else if(ft(v)){var P=v.size();if(P.length!==1||P[0]!==D)throw new Error("Invalid matrix length");N=function(te){return v.get([te])}}else N=function(){return v};for(var M=[],j=[],K=[],k=0;k<T;k++){K.push(M.length);var V=k-_;if(V>=0&&V<D){var q=N(V);A(q,x)||(j.push(V+S),M.push(q))}}return K.push(M.length),new i({values:M,index:j,ptr:K,size:[E,T]})},i.prototype.swapRows=function(m,v){if(!ot(m)||!nt(m)||!ot(v)||!nt(v))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Nr(m,this._size[0]),Nr(v,this._size[0]),i._swapRows(m,v,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,v,y,w,b){for(var A=w[m],x=w[m+1],_=A;_<x;_++)b(y[_],v[_])},i._swapRows=function(m,v,y,w,b,A){for(var x=0;x<y;x++){var _=A[x],S=A[x+1],E=u(m,_,S,b),T=u(v,_,S,b);if(E<S&&T<S&&b[E]===m&&b[T]===v){if(w){var D=w[E];w[E]=w[T],w[T]=D}continue}if(E<S&&b[E]===m&&(T>=S||b[T]!==v)){var N=w?w[E]:void 0;b.splice(T,0,v),w&&w.splice(T,0,N),b.splice(T<=E?E+1:E,1),w&&w.splice(T<=E?E+1:E,1);continue}if(T<S&&b[T]===v&&(E>=S||b[E]!==m)){var P=w?w[T]:void 0;b.splice(E,0,m),w&&w.splice(E,0,P),b.splice(E<=T?T+1:T,1),w&&w.splice(E<=T?T+1:T,1)}}},i},{isClass:!0}),Rqe="number",Fqe=["typed"];function Lqe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function Bqe(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var a=e+r;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var $qe=Y(Rqe,Fqe,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=Lqe(i);if(a)return Bqe(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),jqe="bigint",Vqe=["typed"],Uqe=Y(jqe,Vqe,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),VG="string",zqe=["typed"],qqe=Y(VG,zqe,t=>{var{typed:e}=t;return e(VG,{"":function(){return""},number:iv,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r)),any:function(n){return String(n)}})}),UG="boolean",Hqe=["typed"],Wqe=Y(UG,Hqe,t=>{var{typed:e}=t;return e(UG,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),Gqe="bignumber",Kqe=["typed","BigNumber"],Xqe=Y(Gqe,Kqe,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=r(a[1]),l=new r(2).pow(Number(s));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new r(2).pow(Number(s)-1);return o.gte(u)?o.sub(l):o}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),Yqe="complex",Qqe=["typed","Complex"],Zqe=Y(Yqe,Qqe,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,a){return new r(i,a)},"BigNumber, BigNumber":function(i,a){return new r(i.toNumber(),a.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),Jqe="fraction",eHe=["typed","Fraction"],tHe=Y(Jqe,eHe,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,a){return new r(i,a)},"bigint, bigint":function(i,a){return new r(i,a)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),zG="matrix",rHe=["typed","Matrix","DenseMatrix","SparseMatrix"],nHe=Y(zG,rHe,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(zG,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,l){return a([],o,l)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(s,l);if(o==="sparse")return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),qG="matrixFromFunction",iHe=["typed","matrix","isZero"],aHe=Y(qG,iHe,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(qG,{"Array | Matrix, function, string, string":function(s,o,l,u){return i(s,o,l,u)},"Array | Matrix, function, string":function(s,o,l){return i(s,o,l)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,l){return i(s,l,o)},"Array | Matrix, string, string, function":function(s,o,l,u){return i(s,u,o,l)}});function i(a,s,o,l){var u;return l!==void 0?u=r(o,l):u=r(o),u.resize(a),u.forEach(function(c,f){var h=s(f);n(h)||u.set(f,h)}),u}}),HG="matrixFromRows",sHe=["typed","matrix","flatten","size"],oHe=Y(HG,sHe,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(HG,{"...Array":function(l){return a(l)},"...Matrix":function(l){return r(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(o[0]),u=[];for(var c of o){var f=s(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));u.push(n(c))}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),WG="matrixFromColumns",lHe=["typed","matrix","flatten","size"],uHe=Y(WG,lHe,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(WG,{"...Array":function(l){return a(l)},"...Matrix":function(l){return r(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of o){var h=s(f);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));for(var d=n(f),p=0;p<l;p++)u[p].push(d[p])}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),GG="splitUnit",cHe=["typed"],fHe=Y(GG,cHe,t=>{var{typed:e}=t;return e(GG,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),KG="unaryMinus",hHe=["typed"],dHe=Y(KG,hHe,t=>{var{typed:e}=t;return e(KG,{number:ide,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r,!0))})}),XG="unaryPlus",pHe=["typed","config","numeric"],mHe=Y(XG,pHe,t=>{var{typed:e,config:r,numeric:n}=t;return e(XG,{number:ade,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>Ct(a,i,!0)),boolean:function(a){return n(a?1:0,r.number)},string:function(a){return n(a,Up(a,r))}})}),YG="abs",gHe=["typed"],vHe=Y(YG,gHe,t=>{var{typed:e}=t;return e(YG,{number:ede,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r,!0))})}),QG="mapSlices",yHe=["typed","isInteger"],p4=Y(QG,yHe,t=>{var{typed:e,isInteger:r}=t;return e(QG,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!r(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?xt(i):i.size();if(a<0||a>=o.length)throw new gu(a,o.length);return ft(i)?i.create(_P(i.valueOf(),a,s),i.datatype()):_P(i,a,s)}})},{formerly:"apply"});function _P(t,e,r){var n,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=bHe(t),i=[],n=0;n<a.length;n++)i[n]=_P(a[n],e-1,r);return i}else return r(t);else{for(i=[],n=0;n<t.length;n++)i[n]=_P(t[n],e-1,r);return i}}function bHe(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var s=[];for(n=0;n<e;n++)s.push(t[n][i]);a.push(s)}return a}var ZG="addScalar",wHe=["typed"],xHe=Y(ZG,wHe,t=>{var{typed:e}=t;return e(ZG,{"number, number":tde,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),JG="subtractScalar",AHe=["typed"],_He=Y(JG,AHe,t=>{var{typed:e}=t;return e(JG,{"number, number":rde,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),eK="cbrt",EHe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],SHe=Y(eK,EHe,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:l}=t;return r(eK,{number:Dx,Complex:u,"Complex, boolean":u,BigNumber:function(h){return h.cbrt()},Unit:c});function u(f,h){var d=f.arg()/3,p=f.abs(),m=new s(Dx(p),0).mul(new s(0,d).exp());if(h){var v=[m,new s(Dx(p),0).mul(new s(0,d+Math.PI*2/3).exp()),new s(Dx(p),0).mul(new s(0,d-Math.PI*2/3).exp())];return e.matrix==="Array"?v:a(v)}else return m}function c(f){if(f.value&&jf(f.value)){var h=f.clone();return h.value=1,h=h.pow(1/3),h.value=u(f.value),h}else{var d=n(f.value);d&&(f.value=i(f.value));var p;St(f.value)?p=new o(1).div(3):YS(f.value)?p=new l(1,3):p=1/3;var m=f.pow(p);return d&&(m.value=i(m.value)),m}}}),CHe="matAlgo11xS0s",THe=["typed","equalScalar"],ya=Y(CHe,THe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=r,y=0,w=s;typeof h=="string"&&(m=h,v=e.find(r,[m,m]),y=e.convert(0,m),a=e.convert(a,m),w=e.find(s,[m,m]));for(var b=[],A=[],x=[],_=0;_<p;_++){x[_]=A.length;for(var S=c[_],E=c[_+1],T=S;T<E;T++){var D=u[T],N=o?w(a,l[T]):w(l[T],a);v(N,y)||(A.push(D),b.push(N))}}return x[p]=A.length,i.createSparseMatrix({values:b,index:A,ptr:x,size:[d,p],datatype:m})}}),DHe="matAlgo12xSfs",NHe=["typed","DenseMatrix"],yi=Y(DHe,NHe,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=s;typeof h=="string"&&(m=h,a=e.convert(a,m),v=e.find(s,[m,m]));for(var y=[],w=[],b=[],A=0;A<p;A++){for(var x=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var T=u[E];w[T]=l[E],b[T]=x}for(var D=0;D<d;D++)A===0&&(y[D]=[]),b[D]===x?y[D][A]=o?v(a,w[D]):v(w[D],a):y[D][A]=o?v(a,0):v(0,a)}return new r({data:y,size:[d,p],datatype:m})}}),PHe="matAlgo14xDs",MHe=["typed"],Dl=Y(PHe,MHe,t=>{var{typed:e}=t;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype,f,h=s;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(s,[f,f]));var d=u.length>0?r(h,0,u,u[0],l,a,o):[];return i.createDenseMatrix({data:d,size:wt(u),datatype:f})};function r(n,i,a,s,o,l,u){var c=[];if(i===a.length-1)for(var f=0;f<s;f++)c[f]=u?n(l,o[f]):n(o[f],l);else for(var h=0;h<s;h++)c[h]=r(n,i+1,a,a[i+1],o[h],l,u);return c}}),m4="ceil",IHe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],OHe=new Cp(10),kHe=Y(m4,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var s=Math.ceil(a),o=n(a);return s===o?s:zi(a,o,r.relTol,r.absTol)&&!zi(a,s,r.relTol,r.absTol)?o:s}return e(m4,{number:i,"number, number":function(s,o){if(!nt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**o;return i(s*l)/l}})}),RHe=Y(m4,IHe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:a}),u=yi({typed:e,DenseMatrix:o}),c=Dl({typed:e}),f=kHe({typed:e,config:r,round:n});function h(d){var p=(y,w)=>El(y,w,r.relTol,r.absTol),m=d.ceil(),v=n(d);return m.eq(v)?m:p(d,v)&&!p(d,m)?v:m}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,m){return p.ceil(m)},"Complex, BigNumber":function(p,m){return p.ceil(m.toNumber())},BigNumber:h,"BigNumber, BigNumber":function(p,m){var v=OHe.pow(m);return h(p.mul(v)).div(v)},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,m){return p.ceil(m)},"Fraction, BigNumber":function(p,m){return p.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(p,m,v){var y=p.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>d(p,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>Ct(p,y=>d(y,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,m)=>d(p,0,m)),"Array | Matrix":e.referToSelf(d=>p=>Ct(p,d,!0)),"Array, number | BigNumber":e.referToSelf(d=>(p,m)=>Ct(p,v=>d(v,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>l(p,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>c(p,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(p,m)=>c(i(m),p,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,p,d,!0):u(m,p,d,!0))})}),tK="cube",FHe=["typed"],LHe=Y(tK,FHe,t=>{var{typed:e}=t;return e(tK,{number:sde,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),rK="exp",BHe=["typed"],$He=Y(rK,BHe,t=>{var{typed:e}=t;return e(rK,{number:ode,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),nK="expm1",jHe=["typed","Complex"],VHe=Y(nK,jHe,t=>{var{typed:e,Complex:r}=t;return e(nK,{number:lde,Complex:function(i){var a=Math.exp(i.re);return new r(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),g4="fix",UHe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],zHe=Y(g4,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(g4,{number:function(a){return a>0?n(a):r(a)},"number, number":function(a,s){return a>0?n(a,s):r(a,s)}})}),qHe=Y(g4,UHe,t=>{var{typed:e,Complex:r,matrix:n,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:l}=t,u=yi({typed:e,DenseMatrix:l}),c=Dl({typed:e}),f=zHe({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(d){return new r(d.re>0?Math.floor(d.re):Math.ceil(d.re),d.im>0?Math.floor(d.im):Math.ceil(d.im))},"Complex, number":function(d,p){return new r(d.re>0?a(d.re,p):i(d.re,p),d.im>0?a(d.im,p):i(d.im,p))},"Complex, BigNumber":function(d,p){var m=p.toNumber();return new r(d.re>0?a(d.re,m):i(d.re,m),d.im>0?a(d.im,m):i(d.im,m))},BigNumber:function(d){return d.isNegative()?i(d):a(d)},"BigNumber, number | BigNumber":function(d,p){return d.isNegative()?i(d,p):a(d,p)},bigint:h=>h,"bigint, number":(h,d)=>h,"bigint, BigNumber":(h,d)=>h,Fraction:function(d){return d.s<0n?d.ceil():d.floor()},"Fraction, number | BigNumber":function(d,p){return d.s<0n?i(d,p):a(d,p)},"Unit, number, Unit":e.referToSelf(h=>function(d,p,m){var v=d.toNumeric(m);return m.multiply(h(v,p))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>h(d,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>Ct(d,v=>h(v,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(d,p)=>h(d,0,p)),"Array | Matrix":e.referToSelf(h=>d=>Ct(d,h,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(h=>(d,p)=>Ct(d,m=>h(m,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(d,p)=>c(n(p),d,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(d,p)=>s(d,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,d,h,!0):u(p,d,h,!0))})}),v4="floor",HHe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],WHe=new Cp(10),GHe=Y(v4,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var s=Math.floor(a),o=n(a);return s===o?s:zi(a,o,r.relTol,r.absTol)&&!zi(a,s,r.relTol,r.absTol)?o:s}return e(v4,{number:i,"number, number":function(s,o){if(!nt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**o;return i(s*l)/l}})}),zde=Y(v4,HHe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:a}),u=yi({typed:e,DenseMatrix:o}),c=Dl({typed:e}),f=GHe({typed:e,config:r,round:n});function h(d){var p=(y,w)=>El(y,w,r.relTol,r.absTol),m=d.floor(),v=n(d);return m.eq(v)?m:p(d,v)&&!p(d,m)?v:m}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,m){return p.floor(m)},"Complex, BigNumber":function(p,m){return p.floor(m.toNumber())},BigNumber:h,"BigNumber, BigNumber":function(p,m){var v=WHe.pow(m);return h(p.mul(v)).div(v)},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.floor()},"Fraction, number":function(p,m){return p.floor(m)},"Fraction, BigNumber":function(p,m){return p.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(p,m,v){var y=p.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>d(p,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>Ct(p,y=>d(y,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,m)=>d(p,0,m)),"Array | Matrix":e.referToSelf(d=>p=>Ct(p,d,!0)),"Array, number | BigNumber":e.referToSelf(d=>(p,m)=>Ct(p,v=>d(v,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>l(p,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>c(p,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(p,m)=>c(i(m),p,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,p,d,!0):u(m,p,d,!0))})}),KHe="matAlgo02xDS0",XHe=["typed","equalScalar"],yu=Y(KHe,XHe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=a._values,h=a._index,d=a._ptr,p=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==p.length)throw new kt(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],w,b=r,A=0,x=s;typeof c=="string"&&c===m&&c!=="mixed"&&(w=c,b=e.find(r,[w,w]),A=e.convert(0,w),x=e.find(s,[w,w]));for(var _=[],S=[],E=[],T=0;T<y;T++){E[T]=S.length;for(var D=d[T],N=d[T+1],P=D;P<N;P++){var M=h[P],j=o?x(f[P],l[M][T]):x(l[M][T],f[P]);b(j,A)||(S.push(M),_.push(j))}}return E[y]=S.length,a.createSparseMatrix({values:_,index:S,ptr:E,size:[v,y],datatype:c===i._datatype&&m===a._datatype?w:void 0})}}),YHe="matAlgo03xDSf",QHe=["typed"],za=Y(YHe,QHe,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==d.length)throw new kt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],v=l[1],y,w=0,b=a;typeof u=="string"&&u===p&&u!=="mixed"&&(y=u,w=e.convert(0,y),b=e.find(a,[y,y]));for(var A=[],x=0;x<m;x++)A[x]=[];for(var _=[],S=[],E=0;E<v;E++){for(var T=E+1,D=h[E],N=h[E+1],P=D;P<N;P++){var M=f[P];_[M]=s?b(c[P],o[M][E]):b(o[M][E],c[P]),S[M]=T}for(var j=0;j<m;j++)S[j]===T?A[j][E]=_[j]:A[j][E]=s?b(w,o[j][E]):b(o[j][E],w)}return n.createDenseMatrix({data:A,size:[m,v],datatype:u===n._datatype&&p===i._datatype?y:void 0})}}),ZHe="matAlgo05xSfSf",JHe=["typed","equalScalar"],dO=Y(ZHe,JHe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,A=r,x=0,_=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,A=e.find(r,[b,b]),x=e.convert(0,b),_=e.find(s,[b,b]));var S=o&&h?[]:void 0,E=[],T=[],D=S?[]:void 0,N=S?[]:void 0,P=[],M=[],j,K,k,V;for(K=0;K<w;K++){T[K]=E.length;var q=K+1;for(k=u[K],V=u[K+1];k<V;k++)j=l[k],E.push(j),P[j]=q,D&&(D[j]=o[k]);for(k=p[K],V=p[K+1];k<V;k++)j=d[k],P[j]!==q&&E.push(j),M[j]=q,N&&(N[j]=h[k]);if(S)for(k=T[K];k<E.length;){j=E[k];var H=P[j],te=M[j];if(H===q||te===q){var ue=H===q?D[j]:x,re=te===q?N[j]:x,L=_(ue,re);A(L,x)?E.splice(k,1):(S.push(L),k++)}}}return T[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:T,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),eWe="matAlgo13xDD",tWe=["typed"],qde=Y(eWe,tWe,t=>{var{typed:e}=t;return function(i,a,s){var o=i._data,l=i._size,u=i._datatype,c=a._data,f=a._size,h=a._datatype,d=[];if(l.length!==f.length)throw new kt(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");d[p]=l[p]}var m,v=s;typeof u=="string"&&u===h&&(m=u,v=e.find(s,[m,m]));var y=d.length>0?r(v,0,d,d[0],o,c):[];return i.createDenseMatrix({data:y,size:d,datatype:m})};function r(n,i,a,s,o,l){var u=[];if(i===a.length-1)for(var c=0;c<s;c++)u[c]=n(o[c],l[c]);else for(var f=0;f<s;f++)u[f]=r(n,i+1,a,a[i+1],o[f],l[f]);return u}});function _i(t,e){if(uh(t.size(),e.size()))return[t,e];var r=gP(t.size(),e.size());return[t,e].map(n=>rWe(n,r))}function rWe(t,e){return uh(t.size(),e)?t:t.create(Om(t.valueOf(),e),t.datatype())}var nWe="matrixAlgorithmSuite",iWe=["typed","matrix"],Mr=Y(nWe,iWe,t=>{var{typed:e,matrix:r}=t,n=qde({typed:e}),i=Dl({typed:e});return function(s){var o=s.elop,l=s.SD||s.DS,u;o?(u={"DenseMatrix, DenseMatrix":(d,p)=>n(..._i(d,p),o),"Array, Array":(d,p)=>n(..._i(r(d),r(p)),o).valueOf(),"Array, DenseMatrix":(d,p)=>n(..._i(r(d),p),o),"DenseMatrix, Array":(d,p)=>n(..._i(d,r(p)),o)},s.SS&&(u["SparseMatrix, SparseMatrix"]=(d,p)=>s.SS(..._i(d,p),o,!1)),s.DS&&(u["DenseMatrix, SparseMatrix"]=(d,p)=>s.DS(..._i(d,p),o,!1),u["Array, SparseMatrix"]=(d,p)=>s.DS(..._i(r(d),p),o,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(d,p)=>l(..._i(p,d),o,!0),u["SparseMatrix, Array"]=(d,p)=>l(..._i(r(p),d),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(d=>(p,m)=>n(..._i(p,m),d)),"Array, Array":e.referToSelf(d=>(p,m)=>n(..._i(r(p),r(m)),d).valueOf()),"Array, DenseMatrix":e.referToSelf(d=>(p,m)=>n(..._i(r(p),m),d)),"DenseMatrix, Array":e.referToSelf(d=>(p,m)=>n(..._i(p,r(m)),d))},s.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.SS(..._i(p,m),d,!1))),s.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.DS(..._i(p,m),d,!1)),u["Array, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.DS(..._i(r(p),m),d,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(d=>(p,m)=>l(..._i(m,p),d,!0)),u["SparseMatrix, Array"]=e.referToSelf(d=>(p,m)=>l(..._i(r(m),p),d,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(o?(u["DenseMatrix,"+c]=(d,p)=>i(d,p,o,!1),u[c+", DenseMatrix"]=(d,p)=>i(p,d,o,!0),u["Array,"+c]=(d,p)=>i(r(d),p,o,!1).valueOf(),u[c+", Array"]=(d,p)=>i(r(p),d,o,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(d=>(p,m)=>i(p,m,d,!1)),u[c+", DenseMatrix"]=e.referToSelf(d=>(p,m)=>i(m,p,d,!0)),u["Array,"+c]=e.referToSelf(d=>(p,m)=>i(r(p),m,d,!1).valueOf()),u[c+", Array"]=e.referToSelf(d=>(p,m)=>i(r(m),p,d,!0).valueOf())));var h=s.sS!==void 0?s.sS:s.Ss;return o?(s.Ss&&(u["SparseMatrix,"+c]=(d,p)=>s.Ss(d,p,o,!1)),h&&(u[c+", SparseMatrix"]=(d,p)=>h(p,d,o,!0))):(s.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(d=>(p,m)=>s.Ss(p,m,d,!1))),h&&(u[c+", SparseMatrix"]=e.referToSelf(d=>(p,m)=>h(m,p,d,!0)))),o&&o.signatures&&She(u,o.signatures),u}}),iK="mod",aWe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],Hde=Y(iK,aWe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:l}=t,u=zde({typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),c=yu({typed:e,equalScalar:a}),f=za({typed:e}),h=dO({typed:e,equalScalar:a}),d=ya({typed:e,equalScalar:a}),p=yi({typed:e,DenseMatrix:o}),m=Mr({typed:e,matrix:i,concat:l});return e(iK,{"number, number":v,"BigNumber, BigNumber":function(w,b){return b.isZero()?w:w.sub(b.mul(u(w.div(b))))},"bigint, bigint":function(w,b){if(b===0n)return w;if(w<0){var A=w%b;return A===0n?A:A+b}return w%b},"Fraction, Fraction":function(w,b){return b.equals(0)?w:w.sub(b.mul(u(w.div(b))))}},m({SS:h,DS:f,SD:c,Ss:d,sS:p}));function v(y,w){return w===0?y:y-w*u(y/w)}}),sWe="matAlgo01xDSid",oWe=["typed"],qp=Y(sWe,oWe,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==d.length)throw new kt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],v=l[1],y=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,w=y?e.find(a,[y,y]):a,b,A,x=[];for(b=0;b<m;b++)x[b]=[];var _=[],S=[];for(A=0;A<v;A++){for(var E=A+1,T=h[A],D=h[A+1],N=T;N<D;N++)b=f[N],_[b]=s?w(c[N],o[b][A]):w(o[b][A],c[N]),S[b]=E;for(b=0;b<m;b++)S[b]===E?x[b][A]=_[b]:x[b][A]=o[b][A]}return n.createDenseMatrix({data:x,size:[m,v],datatype:u===n._datatype&&p===i._datatype?y:void 0})}}),lWe="matAlgo04xSidSid",uWe=["typed","equalScalar"],cV=Y(lWe,uWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,A=r,x=0,_=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,A=e.find(r,[b,b]),x=e.convert(0,b),_=e.find(s,[b,b]));var S=o&&h?[]:void 0,E=[],T=[],D=o&&h?[]:void 0,N=o&&h?[]:void 0,P=[],M=[],j,K,k,V,q;for(K=0;K<w;K++){T[K]=E.length;var H=K+1;for(V=u[K],q=u[K+1],k=V;k<q;k++)j=l[k],E.push(j),P[j]=H,D&&(D[j]=o[k]);for(V=p[K],q=p[K+1],k=V;k<q;k++)if(j=d[k],P[j]===H){if(D){var te=_(D[j],h[k]);A(te,x)?P[j]=null:D[j]=te}}else E.push(j),M[j]=H,N&&(N[j]=h[k]);if(D&&N)for(k=T[K];k<E.length;)j=E[k],P[j]===H?(S[k]=D[j],k++):M[j]===H?(S[k]=N[j],k++):E.splice(k,1)}return T[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:T,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),cWe="matAlgo10xSids",fWe=["typed","DenseMatrix"],zv=Y(cWe,fWe,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=s;typeof h=="string"&&(m=h,a=e.convert(a,m),v=e.find(s,[m,m]));for(var y=[],w=[],b=[],A=0;A<p;A++){for(var x=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var T=u[E];w[T]=l[E],b[T]=x}for(var D=0;D<d;D++)A===0&&(y[D]=[]),b[D]===x?y[D][A]=o?v(a,w[D]):v(w[D],a):y[D][A]=a}return new r({data:y,size:[d,p],datatype:m})}});function qv(t,e,r,n){if(!(this instanceof qv))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}qv.prototype=new Error;qv.prototype.constructor=Error;qv.prototype.name="ArgumentsError";qv.prototype.isArgumentsError=!0;var aK="gcd",hWe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],NR="number | BigNumber | Fraction | Matrix | Array",dWe="".concat(NR,", ").concat(NR,", ...").concat(NR);function sK(t){return!t.some(e=>Array.isArray(e))}var pWe=Y(aK,hWe,t=>{var{typed:e,matrix:r,config:n,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:l,concat:u}=t,c=Hde({typed:e,config:n,round:i,matrix:r,equalScalar:a,zeros:s,DenseMatrix:l,concat:u}),f=qp({typed:e}),h=cV({typed:e,equalScalar:a}),d=zv({typed:e,DenseMatrix:l}),p=Mr({typed:e,matrix:r,concat:u});return e(aK,{"number, number":m,"BigNumber, BigNumber":v,"Fraction, Fraction":(y,w)=>y.gcd(w)},p({SS:h,DS:f,Ss:d}),{[dWe]:e.referToSelf(y=>(w,b,A)=>{for(var x=y(w,b),_=0;_<A.length;_++)x=y(x,A[_]);return x}),Array:e.referToSelf(y=>w=>{if(w.length===1&&Array.isArray(w[0])&&sK(w[0]))return y(...w[0]);if(sK(w))return y(...w);throw new qv("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(y=>w=>y(w.toArray()))});function m(y,w){if(!nt(y)||!nt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var b;w!==0;)b=c(y,w),y=w,w=b;return y<0?-y:y}function v(y,w){if(!y.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new o(0);!w.isZero();){var A=c(y,w);y=w,w=A}return y.lt(b)?y.neg():y}}),mWe="matAlgo06xS0S0",gWe=["typed","equalScalar"],pO=Y(mWe,gWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,f=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==f.length)throw new kt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var d=l[0],p=l[1],m,v=r,y=0,w=s;typeof u=="string"&&u===h&&u!=="mixed"&&(m=u,v=e.find(r,[m,m]),y=e.convert(0,m),w=e.find(s,[m,m]));for(var b=o&&c?[]:void 0,A=[],x=[],_=b?[]:void 0,S=[],E=[],T=0;T<p;T++){x[T]=A.length;var D=T+1;if(TG(i,T,S,_,E,D,A,w),TG(a,T,S,_,E,D,A,w),_)for(var N=x[T];N<A.length;){var P=A[N];if(E[P]===D){var M=_[P];v(M,y)?A.splice(N,1):(b.push(M),N++)}else A.splice(N,1)}else for(var j=x[T];j<A.length;){var K=A[j];E[K]!==D?A.splice(j,1):j++}}return x[p]=A.length,i.createSparseMatrix({values:b,index:A,ptr:x,size:[d,p],datatype:u===i._datatype&&h===a._datatype?m:void 0})}}),oK="lcm",vWe=["typed","matrix","equalScalar","concat"],yWe=Y(oK,vWe,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=yu({typed:e,equalScalar:n}),s=pO({typed:e,equalScalar:n}),o=ya({typed:e,equalScalar:n}),l=Mr({typed:e,matrix:r,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(h=>(d,p,m)=>{for(var v=h(d,p),y=0;y<m.length;y++)v=h(v,m[y]);return v}),e(oK,{"number, number":ude,"BigNumber, BigNumber":f,"Fraction, Fraction":(h,d)=>h.lcm(d)},l({SS:s,DS:a,Ss:o}),c);function f(h,d){if(!h.isInt()||!d.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(h.isZero())return h;if(d.isZero())return d;for(var p=h.times(d);!d.isZero();){var m=d;d=h.mod(m),h=m}return p.div(h).abs()}});function fV(t,e,r,n){return function(i){if(i>0||r.predictable){if(i<=0)return NaN;var a=i.toString(16),s=a.substring(0,15);return t*(a.length-s.length)+e(+("0x"+s))}return n(i.toNumber())}}var lK="log10",bWe=["typed","config","Complex"],wWe=bP(16),xWe=Y(lK,bWe,t=>{var{typed:e,config:r,Complex:n}=t;function i(s){return s.log().div(Math.LN10)}function a(s){return i(new n(s,0))}return e(lK,{number:function(o){return o>=0||r.predictable?bP(o):a(o)},bigint:fV(wWe,bP,r,a),Complex:i,BigNumber:function(o){return!o.isNegative()||r.predictable?o.log():a(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Ct(o,s))})}),uK="log2",AWe=["typed","config","Complex"],_We=Y(uK,AWe,t=>{var{typed:e,config:r,Complex:n}=t;function i(s){return a(new n(s,0))}return e(uK,{number:function(o){return o>=0||r.predictable?u4(o):i(o)},bigint:fV(4,u4,r,i),Complex:a,BigNumber:function(o){return!o.isNegative()||r.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Ct(o,s))});function a(s){var o=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),EWe="multiplyScalar",SWe=["typed"],CWe=Y(EWe,SWe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":nde,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),cK="multiply",TWe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],DWe=Y(cK,TWe,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=t,o=ya({typed:e,equalScalar:a}),l=Dl({typed:e});function u(x,_){switch(x.length){case 1:switch(_.length){case 1:if(x[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(x[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+_[0]+")");break;case 2:if(x[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,_,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return s(x,_)}function f(x,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(x,_)}function h(x,_){var S=x._data,E=x._size,T=x._datatype||x.getDataType(),D=_._data,N=_._size,P=_._datatype||_.getDataType(),M=E[0],j=N[1],K,k=n,V=i;T&&P&&T===P&&typeof T=="string"&&T!=="mixed"&&(K=T,k=e.find(n,[K,K]),V=e.find(i,[K,K]));for(var q=[],H=0;H<j;H++){for(var te=V(S[0],D[0][H]),ue=1;ue<M;ue++)te=k(te,V(S[ue],D[ue][H]));q[H]=te}return x.createDenseMatrix({data:q,size:[j],datatype:T===x._datatype&&P===_._datatype?K:void 0})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":w}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":v,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":A});function m(x,_){var S=x._data,E=x._size,T=x._datatype||x.getDataType(),D=_._data,N=_._datatype||_.getDataType(),P=E[0],M=E[1],j,K=n,k=i;T&&N&&T===N&&typeof T=="string"&&T!=="mixed"&&(j=T,K=e.find(n,[j,j]),k=e.find(i,[j,j]));for(var V=[],q=0;q<P;q++){for(var H=S[q],te=k(H[0],D[0]),ue=1;ue<M;ue++)te=K(te,k(H[ue],D[ue]));V[q]=te}return x.createDenseMatrix({data:V,size:[P],datatype:T===x._datatype&&N===_._datatype?j:void 0})}function v(x,_){var S=x._data,E=x._size,T=x._datatype||x.getDataType(),D=_._data,N=_._size,P=_._datatype||_.getDataType(),M=E[0],j=E[1],K=N[1],k,V=n,q=i;T&&P&&T===P&&typeof T=="string"&&T!=="mixed"&&T!=="mixed"&&(k=T,V=e.find(n,[k,k]),q=e.find(i,[k,k]));for(var H=[],te=0;te<M;te++){var ue=S[te];H[te]=[];for(var re=0;re<K;re++){for(var L=q(ue[0],D[0][re]),ie=1;ie<j;ie++)L=V(L,q(ue[ie],D[ie][re]));H[te][re]=L}}return x.createDenseMatrix({data:H,size:[M,K],datatype:T===x._datatype&&P===_._datatype?k:void 0})}function y(x,_){var S=x._data,E=x._size,T=x._datatype||x.getDataType(),D=_._values,N=_._index,P=_._ptr,M=_._size,j=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var K=E[0],k=M[1],V,q=n,H=i,te=a,ue=0;T&&j&&T===j&&typeof T=="string"&&T!=="mixed"&&(V=T,q=e.find(n,[V,V]),H=e.find(i,[V,V]),te=e.find(a,[V,V]),ue=e.convert(0,V));for(var re=[],L=[],ie=[],X=_.createSparseMatrix({values:re,index:L,ptr:ie,size:[K,k],datatype:T===x._datatype&&j===_._datatype?V:void 0}),pe=0;pe<k;pe++){ie[pe]=L.length;var de=P[pe],ae=P[pe+1];if(ae>de)for(var z=0,ne=0;ne<K;ne++){for(var fe=ne+1,Q=void 0,ye=de;ye<ae;ye++){var me=N[ye];z!==fe?(Q=H(S[ne][me],D[ye]),z=fe):Q=q(Q,H(S[ne][me],D[ye]))}z===fe&&!te(Q,ue)&&(L.push(ne),re.push(Q))}}return ie[k]=L.length,X}function w(x,_){var S=x._values,E=x._index,T=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=_._data,P=_._datatype||_.getDataType(),M=x._size[0],j=_._size[0],K=[],k=[],V=[],q,H=n,te=i,ue=a,re=0;D&&P&&D===P&&typeof D=="string"&&D!=="mixed"&&(q=D,H=e.find(n,[q,q]),te=e.find(i,[q,q]),ue=e.find(a,[q,q]),re=e.convert(0,q));var L=[],ie=[];V[0]=0;for(var X=0;X<j;X++){var pe=N[X];if(!ue(pe,re))for(var de=T[X],ae=T[X+1],z=de;z<ae;z++){var ne=E[z];ie[ne]?L[ne]=H(L[ne],te(pe,S[z])):(ie[ne]=!0,k.push(ne),L[ne]=te(pe,S[z]))}}for(var fe=k.length,Q=0;Q<fe;Q++){var ye=k[Q];K[Q]=L[ye]}return V[1]=k.length,x.createSparseMatrix({values:K,index:k,ptr:V,size:[M,1],datatype:D===x._datatype&&P===_._datatype?q:void 0})}function b(x,_){var S=x._values,E=x._index,T=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=_._data,P=_._datatype||_.getDataType(),M=x._size[0],j=_._size[0],K=_._size[1],k,V=n,q=i,H=a,te=0;D&&P&&D===P&&typeof D=="string"&&D!=="mixed"&&(k=D,V=e.find(n,[k,k]),q=e.find(i,[k,k]),H=e.find(a,[k,k]),te=e.convert(0,k));for(var ue=[],re=[],L=[],ie=x.createSparseMatrix({values:ue,index:re,ptr:L,size:[M,K],datatype:D===x._datatype&&P===_._datatype?k:void 0}),X=[],pe=[],de=0;de<K;de++){L[de]=re.length;for(var ae=de+1,z=0;z<j;z++){var ne=N[z][de];if(!H(ne,te))for(var fe=T[z],Q=T[z+1],ye=fe;ye<Q;ye++){var me=E[ye];pe[me]!==ae?(pe[me]=ae,re.push(me),X[me]=q(ne,S[ye])):X[me]=V(X[me],q(ne,S[ye]))}}for(var De=L[de],Le=re.length,ze=De;ze<Le;ze++){var Be=re[ze];ue[ze]=X[Be]}}return L[K]=re.length,ie}function A(x,_){var S=x._values,E=x._index,T=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType(),N=_._values,P=_._index,M=_._ptr,j=_._datatype||_._data===void 0?_._datatype:_.getDataType(),K=x._size[0],k=_._size[1],V=S&&N,q,H=n,te=i;D&&j&&D===j&&typeof D=="string"&&D!=="mixed"&&(q=D,H=e.find(n,[q,q]),te=e.find(i,[q,q]));for(var ue=V?[]:void 0,re=[],L=[],ie=x.createSparseMatrix({values:ue,index:re,ptr:L,size:[K,k],datatype:D===x._datatype&&j===_._datatype?q:void 0}),X=V?[]:void 0,pe=[],de,ae,z,ne,fe,Q,ye,me,De=0;De<k;De++){L[De]=re.length;var Le=De+1;for(fe=M[De],Q=M[De+1],ne=fe;ne<Q;ne++)if(me=P[ne],V)for(ae=T[me],z=T[me+1],de=ae;de<z;de++)ye=E[de],pe[ye]!==Le?(pe[ye]=Le,re.push(ye),X[ye]=te(N[ne],S[de])):X[ye]=H(X[ye],te(N[ne],S[de]));else for(ae=T[me],z=T[me+1],de=ae;de<z;de++)ye=E[de],pe[ye]!==Le&&(pe[ye]=Le,re.push(ye));if(V)for(var ze=L[De],Be=re.length,Ve=ze;Ve<Be;Ve++){var Ke=re[Ve];ue[Ve]=X[Ke]}}return L[k]=re.length,ie}return e(cK,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(_,S)=>{u(xt(_),xt(S));var E=x(r(_),r(S));return ft(E)?E.valueOf():E}),"Matrix, Matrix":function(_,S){var E=_.size(),T=S.size();return u(E,T),E.length===1?T.length===1?c(_,S,E[0]):f(_,S):T.length===1?d(_,S):p(_,S)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(_,S)=>x(_,r(S))),"Array, Matrix":e.referToSelf(x=>(_,S)=>x(r(_,S.storage()),S)),"SparseMatrix, any":function(_,S){return o(_,S,i,!1)},"DenseMatrix, any":function(_,S){return l(_,S,i,!1)},"any, SparseMatrix":function(_,S){return o(S,_,i,!0)},"any, DenseMatrix":function(_,S){return l(S,_,i,!0)},"Array, any":function(_,S){return l(r(_),S,i,!1).valueOf()},"any, Array":function(_,S){return l(r(S),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(_,S,E)=>{for(var T=x(_,S),D=0;D<E.length;D++)T=x(T,E[D]);return T})})}),fK="nthRoot",NWe=["typed","matrix","equalScalar","BigNumber","concat"],PWe=Y(fK,NWe,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,concat:a}=t,s=qp({typed:e}),o=yu({typed:e,equalScalar:n}),l=pO({typed:e,equalScalar:n}),u=ya({typed:e,equalScalar:n}),c=Mr({typed:e,matrix:r,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(fK,{number:PG,"number, number":PG,BigNumber:d=>h(d,new i(2)),"BigNumber, BigNumber":h,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",d=>p=>d(r(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",d=>p=>d(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",d=>p=>d(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return l(p,m,d);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return s(p,m,d,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",d=>(p,m)=>d(r(p),m)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return u(m,p,d,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function h(d,p){var m=i.precision,v=i.clone({precision:m+2}),y=new i(0),w=new v(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(d.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(d.isZero())return b?new v(1/0):0;if(!d.isFinite())return b?y:d;var A=d.abs().pow(w.div(p));return A=d.isNeg()?A.neg():A,new i((b?w.div(A):A).toPrecision(m))}}),hK="sign",MWe=["typed","BigNumber","Fraction","complex"],IWe=Y(hK,MWe,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:i}=t;return e(hK,{number:c4,Complex:function(s){return s.im===0?n(c4(s.re)):s.sign()},BigNumber:function(s){return new r(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new i(0):new i(s.s)},"Array | Matrix":e.referToSelf(a=>s=>Ct(s,a,!0)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),OWe="sqrt",kWe=["config","typed","Complex"],RWe=Y(OWe,kWe,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),dK="square",FWe=["typed"],LWe=Y(dK,FWe,t=>{var{typed:e}=t;return e(dK,{number:cde,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),pK="subtract",BWe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],$We=Y(pK,BWe,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=t,l=qp({typed:e}),u=za({typed:e}),c=dO({typed:e,equalScalar:n}),f=zv({typed:e,DenseMatrix:s}),h=yi({typed:e,DenseMatrix:s}),d=Mr({typed:e,matrix:r,concat:o});return e(pK,{"any, any":i},d({elop:i,SS:c,DS:l,SD:u,Ss:h,sS:f}))}),mK="xgcd",jWe=["typed","config","matrix","BigNumber"],VWe=Y(mK,jWe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(mK,{"number, number":function(o,l){var u=fde(o,l);return r.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":a});function a(s,o){var l,u,c,f=new i(0),h=new i(1),d=f,p=h,m=h,v=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=s.div(o).floor(),c=s.mod(o),l=d,d=p.minus(u.times(d)),p=l,l=m,m=v.minus(u.times(m)),v=l,s=o,o=c;var y;return s.lt(f)?y=[s.neg(),p.neg(),v.neg()]:y=[s,s.isZero()?0:p,v],r.matrix==="Array"?y:n(y)}}),gK="invmod",UWe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],zWe=Y(gK,UWe,t=>{var{typed:e,config:r,BigNumber:n,xgcd:i,equal:a,smaller:s,mod:o,add:l,isInteger:u}=t;return e(gK,{"number, number":c,"BigNumber, BigNumber":c});function c(f,h){if(!u(f)||!u(h))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,h),a(h,0))throw new Error("Divisor must be non zero");var d=i(f,h);d=d.valueOf();var[p,m]=d;return a(p,n(1))?(m=o(m,h),s(m,n(0))&&(m=l(m,h)),m):NaN}}),qWe="matAlgo09xS0Sf",HWe=["typed","equalScalar"],Wde=Y(qWe,HWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,A=r,x=0,_=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,A=e.find(r,[b,b]),x=e.convert(0,b),_=e.find(s,[b,b]));var S=o&&h?[]:void 0,E=[],T=[],D=S?[]:void 0,N=[],P,M,j,K,k;for(M=0;M<w;M++){T[M]=E.length;var V=M+1;if(D)for(K=p[M],k=p[M+1],j=K;j<k;j++)P=d[j],N[P]=V,D[P]=h[j];for(K=u[M],k=u[M+1],j=K;j<k;j++)if(P=l[j],D){var q=N[P]===V?D[P]:x,H=_(o[j],q);A(H,x)||(E.push(P),S.push(H))}else E.push(P)}return T[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:T,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),vK="dotMultiply",WWe=["typed","matrix","equalScalar","multiplyScalar","concat"],GWe=Y(vK,WWe,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:i,concat:a}=t,s=yu({typed:e,equalScalar:n}),o=Wde({typed:e,equalScalar:n}),l=ya({typed:e,equalScalar:n}),u=Mr({typed:e,matrix:r,concat:a});return e(vK,u({elop:i,SS:o,DS:s,Ss:l}))});function KWe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return hV(t,e,function(n,i){return n&i})}function a_(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function XWe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:hV(t,e,function(i,a){return i|a})}function hV(t,e,r){var n=t.constructor,i,a,s=+(t.s<0),o=+(e.s<0);if(s){i=TT(a_(t));for(var l=0;l<i.length;++l)i[l]^=1}else i=TT(t);if(o){a=TT(a_(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=TT(e);var c,f,h;i.length<=a.length?(c=i,f=a,h=s):(c=a,f=i,h=o);var d=c.length,p=f.length,m=r(s,o)^1,v=new n(m^1),y=new n(1),w=new n(2),b=n.precision;for(n.config({precision:1e9});d>0;)r(c[--d],f[--p])===m&&(v=v.plus(y)),y=y.times(w);for(;p>0;)r(h,f[--p])===m&&(v=v.plus(y)),y=y.times(w);return n.config({precision:b}),m===0&&(v.s=-v.s),v}function TT(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;r+=i}for(var s=r.length;r.charAt(s)==="0";)s--;var o=t.e,l=r.slice(0,s+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],f=0;f<l.length;){for(var h=c.length;h--;)c[h]*=10;c[0]+=parseInt(l.charAt(f++));for(var d=0;d<c.length;++d)c[d]>1&&((c[d+1]===null||c[d+1]===void 0)&&(c[d+1]=0),c[d+1]+=c[d]>>1,c[d]&=1)}return c.reverse()}function YWe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?a_(e):e.eq(n)?a_(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):hV(t,e,function(i,a){return i^a})}function QWe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function ZWe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var yK="bitAnd",JWe=["typed","matrix","equalScalar","concat"],Gde=Y(yK,JWe,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=yu({typed:e,equalScalar:n}),s=pO({typed:e,equalScalar:n}),o=ya({typed:e,equalScalar:n}),l=Mr({typed:e,matrix:r,concat:i});return e(yK,{"number, number":dde,"BigNumber, BigNumber":KWe,"bigint, bigint":(u,c)=>u&c},l({SS:s,DS:a,Ss:o}))}),bK="bitNot",eGe=["typed"],tGe=Y(bK,eGe,t=>{var{typed:e}=t;return e(bK,{number:pde,BigNumber:a_,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),wK="bitOr",rGe=["typed","matrix","equalScalar","DenseMatrix","concat"],Kde=Y(wK,rGe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=qp({typed:e}),o=cV({typed:e,equalScalar:n}),l=zv({typed:e,DenseMatrix:i}),u=Mr({typed:e,matrix:r,concat:a});return e(wK,{"number, number":mde,"BigNumber, BigNumber":XWe,"bigint, bigint":(c,f)=>c|f},u({SS:o,DS:s,Ss:l}))}),nGe="matAlgo07xSSf",iGe=["typed","SparseMatrix"],Nc=Y(nGe,iGe,t=>{var{typed:e,SparseMatrix:r}=t;return function(a,s,o){var l=a._size,u=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new kt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var h=l[0],d=l[1],p,m=0,v=o;typeof u=="string"&&u===f&&u!=="mixed"&&(p=u,m=e.convert(0,p),v=e.find(o,[p,p]));for(var y=[],w=[],b=new Array(d+1).fill(0),A=[],x=[],_=[],S=[],E=0;E<d;E++){var T=E+1,D=0;n(a,E,_,A,T),n(s,E,S,x,T);for(var N=0;N<h;N++){var P=_[N]===T?A[N]:m,M=S[N]===T?x[N]:m,j=v(P,M);j!==0&&j!==!1&&(w.push(N),y.push(j),D++)}b[E+1]=b[E]+D}return new r({values:y,index:w,ptr:b,size:[h,d],datatype:u===a._datatype&&f===s._datatype?p:void 0})};function n(i,a,s,o,l){for(var u=i._values,c=i._index,f=i._ptr,h=f[a],d=f[a+1];h<d;h++){var p=c[h];s[p]=l,o[p]=u[h]}}}),xK="bitXor",aGe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],sGe=Y(xK,aGe,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,s=za({typed:e}),o=Nc({typed:e,SparseMatrix:a}),l=yi({typed:e,DenseMatrix:n}),u=Mr({typed:e,matrix:r,concat:i});return e(xK,{"number, number":gde,"BigNumber, BigNumber":YWe,"bigint, bigint":(c,f)=>c^f},u({SS:o,DS:s,Ss:l}))}),AK="arg",oGe=["typed"],lGe=Y(AK,oGe,t=>{var{typed:e}=t;return e(AK,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),_K="conj",uGe=["typed"],cGe=Y(_K,uGe,t=>{var{typed:e}=t;return e(_K,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),EK="im",fGe=["typed"],hGe=Y(EK,fGe,t=>{var{typed:e}=t;return e(EK,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),SK="re",dGe=["typed"],pGe=Y(SK,dGe,t=>{var{typed:e}=t;return e(SK,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),CK="not",mGe=["typed"],gGe=Y(CK,mGe,t=>{var{typed:e}=t;return e(CK,{"null | undefined":()=>!0,number:xde,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),TK="nullish",vGe=["typed","matrix","size","flatten","deepEqual"],Xde=Y(TK,vGe,t=>{var{typed:e,matrix:r,size:n,flatten:i,deepEqual:a}=t,s=za({typed:e}),o=Dl({typed:e}),l=qde({typed:e});return e(TK,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var f=n(u),h=n(c);if(a(f,h))return u;throw new kt(f,h)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,f)=>l(c,f,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,f)=>s(c,f,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,f)=>l(c,r(f),u)),"DenseMatrix, any":e.referToSelf(u=>(c,f)=>o(c,f,u,!1)),"Array, Array":e.referToSelf(u=>(c,f)=>l(r(c),r(f),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,f)=>l(r(c),f,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,f)=>s(r(c),f,u,!1)),"Array, any":e.referToSelf(u=>(c,f)=>o(r(c),f,u,!1).valueOf())})}),DK="or",yGe=["typed","matrix","equalScalar","DenseMatrix","concat"],Yde=Y(DK,yGe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=za({typed:e}),o=dO({typed:e,equalScalar:n}),l=yi({typed:e,DenseMatrix:i}),u=Mr({typed:e,matrix:r,concat:a});return e(DK,{"number, number":f4,"Complex, Complex":function(f,h){return f.re!==0||f.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(f,h){return!f.isZero()&&!f.isNaN()||!h.isZero()&&!h.isNaN()},"bigint, bigint":f4,"Unit, Unit":e.referToSelf(c=>(f,h)=>c(f.value||0,h.value||0))},u({SS:o,DS:s,Ss:l}))}),NK="xor",bGe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],wGe=Y(NK,bGe,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,s=za({typed:e}),o=Nc({typed:e,SparseMatrix:a}),l=yi({typed:e,DenseMatrix:n}),u=Mr({typed:e,matrix:r,concat:i});return e(NK,{"number, number":h4,"Complex, Complex":function(f,h){return(f.re!==0||f.im!==0)!=(h.re!==0||h.im!==0)},"bigint, bigint":h4,"BigNumber, BigNumber":function(f,h){return(!f.isZero()&&!f.isNaN())!=(!h.isZero()&&!h.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,h)=>c(f.value||0,h.value||0))},u({SS:o,DS:s,Ss:l}))}),PK="concat",xGe=["typed","matrix","isInteger"],Qde=Y(PK,xGe,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(PK,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,l=-1,u,c=!1,f=[];for(s=0;s<o;s++){var h=a[s];if(ft(h)&&(c=!0),ot(h)||St(h)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=h.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>u)throw new gu(l,u+1)}else{var d=wt(h).valueOf(),p=xt(d);if(f[s]=d,u=l,l=p.length-1,s>0&&l!==u)throw new kt(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=Yhe(m,f.shift(),l);return c?r(m):m},"...string":function(a){return a.join("")}})}),MK="column",AGe=["typed","Index","matrix","range"],Zde=Y(MK,AGe,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(MK,{"Matrix, number":a,"Array, number":function(o,l){return a(n(wt(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Nr(o,s.size()[1]);var l=i(0,s.size()[0]),u=new r(l,[o]),c=s.subset(u);return ft(c)?c:n([[c]])}}),IK="count",_Ge=["typed","size","prod"],EGe=Y(IK,_Ge,t=>{var{typed:e,size:r,prod:n}=t;return e(IK,{string:function(a){return a.length},"Matrix | Array":function(a){return n(r(a))}})}),OK="cross",SGe=["typed","matrix","subtract","multiply"],CGe=Y(OK,SGe,t=>{var{typed:e,matrix:r,subtract:n,multiply:i}=t;return e(OK,{"Matrix, Matrix":function(o,l){return r(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return r(a(o.toArray(),l))},"Array, Matrix":function(o,l){return r(a(o,l.toArray()))},"Array, Array":a});function a(s,o){var l=Math.max(xt(s).length,xt(o).length);s=pP(s),o=pP(o);var u=xt(s),c=xt(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(i(s[1],o[2]),i(s[2],o[1])),n(i(s[2],o[0]),i(s[0],o[2])),n(i(s[0],o[1]),i(s[1],o[0]))];return l>1?[f]:f}}),kK="diag",TGe=["typed","matrix","DenseMatrix","SparseMatrix"],DGe=Y(kK,TGe,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(kK,{Array:function(u){return a(u,0,xt(u),null)},"Array, number":function(u,c){return a(u,c,xt(u),null)},"Array, BigNumber":function(u,c){return a(u,c.toNumber(),xt(u),null)},"Array, string":function(u,c){return a(u,0,xt(u),c)},"Array, number, string":function(u,c,f){return a(u,c,xt(u),f)},"Array, BigNumber, string":function(u,c,f){return a(u,c.toNumber(),xt(u),f)},Matrix:function(u){return a(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return a(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return a(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return a(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return a(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return a(u,c.toNumber(),u.size(),f)}});function a(l,u,c,f){if(!nt(u))throw new TypeError("Second parameter in function diag must be an integer");var h=u>0?u:0,d=u<0?-u:0;switch(c.length){case 1:return s(l,u,f,c[0],d,h);case 2:return o(l,u,f,c,d,h)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,u,c,f,h,d){var p=[f+h,f+d];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?m:m.valueOf()}function o(l,u,c,f,h,d){if(ft(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?r(p,c):p:p.valueOf()}for(var m=Math.min(f[0]-h,f[1]-d),v=[],y=0;y<m;y++)v[y]=l[y+h][y+d];return c!==null?r(v):v}}),NGe="filter",PGe=["typed"],Jde=Y(NGe,PGe,t=>{var{typed:e}=t;return e("filter",{"Array, function":RK,"Matrix, function":function(n,i){return n.create(RK(n.valueOf(),i),n.datatype())},"Array, RegExp":_G,"Matrix, RegExp":function(n,i){return n.create(_G(n.valueOf(),i),n.datatype())}})});function RK(t,e){var r=Dv(e,t,"filter");return r.isUnary?AG(t,r.fn):AG(t,function(n,i,a){return r.fn(n,[i],a)})}var FK="flatten",MGe=["typed"],IGe=Y(FK,MGe,t=>{var{typed:e}=t;return e(FK,{Array:function(n){return er(n)},DenseMatrix:function(n){return n.create(er(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),y4="forEach",OGe=["typed"],epe=Y(y4,OGe,t=>{var{typed:e}=t;return e(y4,{"Array, function":kGe,"Matrix, function":function(n,i){n.forEach(i)}})});function kGe(t,e){var r=Dv(e,t,y4);Zhe(t,r.fn,r.isUnary)}var LK="getMatrixDataType",RGe=["typed"],FGe=Y(LK,RGe,t=>{var{typed:e}=t;return e(LK,{Array:function(n){return fO(n,yr)},Matrix:function(n){return n.getDataType()}})}),BK="identity",LGe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],BGe=Y(BK,LGe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=t;return e(BK,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return l(c,f,h)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var h=St(u)||St(c)?i:null;if(St(u)&&(u=u.toNumber()),St(c)&&(c=c.toNumber()),!nt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!nt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var d=h?new i(1):1,p=h?new h(0):0,m=[u,c];if(f){if(f==="sparse")return s.diagonal(m,d,0,p);if(f==="dense")return a.diagonal(m,d,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var v=x1([],m,p),y=u<c?u:c,w=0;w<y;w++)v[w][w]=d;return v}}),$K="kron",$Ge=["typed","matrix","multiplyScalar"],jGe=Y($K,$Ge,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e($K,{"Matrix, Matrix":function(o,l){return r(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return r(a(o.toArray(),l))},"Array, Matrix":function(o,l){return r(a(o,l.toArray()))},"Array, Array":a});function i(s,o){return s.flatMap(l=>o.map(u=>n(l,u)))}function a(s,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=xt(s).length,c=xt(o).length;for(l=Math.max(u,c);u++<l;)s=[s];for(;c++<l;)o=[o]}return l===1?i(s,o):s.flatMap(f=>o.map(h=>a(f,h,l-1)))}}),PR="map",VGe=["typed"],tpe=Y(PR,VGe,t=>{var{typed:e}=t;return e(PR,{"Array, function":o,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>r([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function r(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,f=l.map(x=>x.isMatrix?x.size():xt(x)),h=gP(...f),d=l.length,p=c?(x,_)=>x.get(_):vP,m=l.map((x,_)=>{var S=f[_].map(()=>0);return x.isMatrix?x.get(S):vP(x,S)}),v=e.isTypedFunction(u)?s(u,m,h.map(()=>0),l):a(u,d);if(v<2){var y=i(v,u,null);return n(l,y)}var w=c?l.map(x=>x.isMatrix?x.create(Om(x.toArray(),h),x.datatype()):l[0].create(Om(x.valueOf(),h))):l.map(x=>x.isMatrix?Om(x.toArray(),h):Om(x,h)),b=i(v,u,w),A=(x,_)=>b([x,...w.slice(1).map(S=>p(S,_))],_);return c?w[0].map(A):o(w[0],A)}function n(l,u){var c=l[0],f=l.map(x=>x.isMatrix?x.valueOf():x),h=l.map(x=>x.isMatrix?x.size():xt(x)),d=gP(...h),p=h.map(x=>d.length-x.length),m=d.length-1,v=u.length>1,y=v?[]:null,w=A(f,0);if(c.isMatrix){var b=c.create();return b._data=w,b._size=d,b}else return w;function A(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=d[_],E=Array(S);if(_<m)for(var T=function(j){y&&(y[_]=j),E[j]=A(x.map((K,k)=>p[k]>_?K:K.length===1?K[0]:K[j]),_+1)},D=0;D<S;D++)T(D);else for(var N=function(j){y&&(y[_]=j),E[j]=u(x.map(K=>K.length===1?K[0]:K[j]),y?y.slice():void 0)},P=0;P<S;P++)N(P);return E}}function i(l,u,c){switch(l){case 0:return f=>u(...f);case 1:return(f,h)=>u(...f,h);case 2:return(f,h)=>u(...f,h,...c)}}function a(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var f=c.match(/\(.*?\)/);return/\.\.\./.test(f)||l.length>u+1?2:l.length===u+1?1:0}function s(l,u,c,f){return e.resolve(l,[...u,c,...f])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function o(l,u){var c=Dv(u,l,PR);return l4(l,c.fn,c.isUnary)}}),jK="diff",UGe=["typed","matrix","subtract","number"],rpe=Y(jK,UGe,t=>{var{typed:e,matrix:r,subtract:n,number:i}=t;return e(jK,{"Array | Matrix":function(c){return ft(c)?r(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!nt(f))throw new RangeError("Dimension must be a whole number");return ft(c)?r(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function a(u,c){if(ft(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(h=>{f.push(a(h,c-1))}),f}else{if(c===0)return s(u);throw RangeError("Cannot have negative dimension")}}function s(u){for(var c=[],f=u.length,h=1;h<f;h++)c.push(o(u[h-1],u[h]));return c}function o(u,c){ft(u)&&(u=u.toArray()),ft(c)&&(c=c.toArray());var f=Array.isArray(u),h=Array.isArray(c);if(f&&h)return l(u,c);if(!f&&!h)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],h=u.length,d=0;d<h;d++)f.push(o(u[d],c[d]));return f}}),zGe="ones",qGe=["typed","config","matrix","BigNumber"],HGe=Y(zGe,qGe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return a(u,f)}else return r.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),f=c?new i(1):1;if(o(l),u){var h=n(u);return l.length>0?h.resize(l,f):h}else{var d=[];return l.length>0?x1(d,l,f):d}}function s(l){var u=!1;return l.forEach(function(c,f,h){St(c)&&(u=!0,h[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!nt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function dV(){throw new Error('No "bignumber" implementation available')}function npe(){throw new Error('No "fraction" implementation available')}function WGe(){throw new Error('No "matrix" implementation available')}var VK="range",GGe=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],ipe=Y(VK,GGe,t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:l,add:u,isZero:c,isPositive:f}=t;return e(VK,{string:d,"string, boolean":d,number:function(y){throw new TypeError("Too few arguments to function range(): ".concat(y))},boolean:function(y){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(y,", number|bigint|BigNumber|Fraction"))},"number, number":function(y,w){return h(p(y,w,1,!1))},"number, number, number":function(y,w,b){return h(p(y,w,b,!1))},"number, number, boolean":function(y,w,b){return h(p(y,w,1,b))},"number, number, number, boolean":function(y,w,b,A){return h(p(y,w,b,A))},"bigint, bigint|number":function(y,w){return h(p(y,w,1n,!1))},"number, bigint":function(y,w){return h(p(BigInt(y),w,1n,!1))},"bigint, bigint|number, bigint|number":function(y,w,b){return h(p(y,w,BigInt(b),!1))},"number, bigint, bigint|number":function(y,w,b){return h(p(BigInt(y),w,BigInt(b),!1))},"bigint, bigint|number, boolean":function(y,w,b){return h(p(y,w,1n,b))},"number, bigint, boolean":function(y,w,b){return h(p(BigInt(y),w,1n,b))},"bigint, bigint|number, bigint|number, boolean":function(y,w,b,A){return h(p(y,w,BigInt(b),A))},"number, bigint, bigint|number, boolean":function(y,w,b,A){return h(p(BigInt(y),w,BigInt(b),A))},"BigNumber, BigNumber":function(y,w){var b=y.constructor;return h(p(y,w,new b(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,w,b){return h(p(y,w,b,!1))},"BigNumber, BigNumber, boolean":function(y,w,b){var A=y.constructor;return h(p(y,w,new A(1),b))},"BigNumber, BigNumber, BigNumber, boolean":function(y,w,b,A){return h(p(y,w,b,A))},"Fraction, Fraction":function(y,w){return h(p(y,w,1,!1))},"Fraction, Fraction, Fraction":function(y,w,b){return h(p(y,w,b,!1))},"Fraction, Fraction, boolean":function(y,w,b){return h(p(y,w,1,b))},"Fraction, Fraction, Fraction, boolean":function(y,w,b,A){return h(p(y,w,b,A))},"Unit, Unit, Unit":function(y,w,b){return h(p(y,w,b,!1))},"Unit, Unit, Unit, boolean":function(y,w,b,A){return h(p(y,w,b,A))}});function h(v){return r.matrix==="Matrix"?n?n(v):WGe():v}function d(v,y){var w=m(v);if(!w)throw new SyntaxError('String "'+v+'" is no valid range');return r.number==="BigNumber"?(i===void 0&&dV(),h(p(i(w.start),i(w.end),i(w.step)))):h(p(w.start,w.end,w.step,y))}function p(v,y,w,b){var A=[];if(c(w))throw new Error("Step must be non-zero");for(var x=f(w)?b?s:a:b?l:o,_=v;x(_,y);)A.push(_),_=u(_,w);return A}function m(v){var y=v.split(":"),w=y.map(function(A){return Number(A)}),b=w.some(function(A){return isNaN(A)});if(b)return null;switch(w.length){case 2:return{start:w[0],end:w[1],step:1};case 3:return{start:w[0],end:w[2],step:w[1]};default:return null}}}),UK="reshape",KGe=["typed","isInteger","matrix"],XGe=Y(UK,KGe,t=>{var{typed:e,isInteger:r}=t;return e(UK,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),sV(i,a)}})}),YGe="resize",QGe=["config","matrix"],ZGe=Y(YGe,QGe,t=>{var{config:e,matrix:r}=t;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new qv("resize",arguments.length,2,3);if(ft(s)&&(s=s.valueOf()),St(s[0])&&(s=s.map(function(c){return St(c)?c.toNumber():c})),ft(a))return a.resize(s,o,!0);if(typeof a=="string")return n(a,s,o);var l=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return wt(a)}else{Array.isArray(a)||(a=[a]),a=wt(a);var u=x1(a,s,o);return l?r(u):u}};function n(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new kt(a.length,1);var o=a[0];if(typeof o!="number"||!nt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=s;return l}else return i}}),zK="rotate",JGe=["typed","multiply","rotationMatrix"],eKe=Y(zK,JGe,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(zK,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var l=r(n(o),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),r(n(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){i(s,3);var u=r(n(o,l),s);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){return i(s,3),r(n(o,l),s)}});function i(a,s){var o=Array.isArray(a)?xt(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),qK="rotationMatrix",tKe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],rKe=Y(qK,tKe,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:h}=t;return e(qK,{"":function(){return r.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return d(b,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,A){return d(b,A)},"number | BigNumber | Complex | Unit, Array":function(b,A){var x=l(A);return p(x),y(b,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,A){p(A);var x=A.storage()||(r.matrix==="Matrix"?"dense":void 0);return y(b,A,x)},"number | BigNumber | Complex | Unit, Array, string":function(b,A,x){var _=l(A);return p(_),y(b,_,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,A,x){return p(A),y(b,A,x)}});function d(w,b){var A=St(w),x=A?new o(-1):-1,_=f(w),S=h(w),E=[[_,n(x,S)],[S,_]];return v(E,b)}function p(w){var b=w.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function m(w){return w.reduce((b,A)=>n(b,A))}function v(w,b){if(b){if(b==="sparse")return new c(w);if(b==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return w}function y(w,b,A){var x=s(b);if(x===0)throw new RangeError("Rotation around zero vector");var _=St(w)?o:null,S=_?new _(1):1,E=_?new _(-1):-1,T=_?new _(b.get([0])/x):b.get([0])/x,D=_?new _(b.get([1])/x):b.get([1])/x,N=_?new _(b.get([2])/x):b.get([2])/x,P=f(w),M=i(S,a(P)),j=h(w),K=i(P,m([T,T,M])),k=i(m([T,D,M]),m([E,N,j])),V=i(m([T,N,M]),m([D,j])),q=i(m([T,D,M]),m([N,j])),H=i(P,m([D,D,M])),te=i(m([D,N,M]),m([E,T,j])),ue=i(m([T,N,M]),m([E,D,j])),re=i(m([D,N,M]),m([T,j])),L=i(P,m([N,N,M])),ie=[[K,k,V],[q,H,te],[ue,re,L]];return v(ie,A)}}),HK="row",nKe=["typed","Index","matrix","range"],ape=Y(HK,nKe,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(HK,{"Matrix, number":a,"Array, number":function(o,l){return a(n(wt(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Nr(o,s.size()[0]);var l=i(0,s.size()[1]),u=new r([o],l),c=s.subset(u);return ft(c)?c:n([[c]])}}),WK="size",iKe=["typed"],aKe=Y(WK,iKe,t=>{var{typed:e}=t;return e(WK,{Matrix:r=>r.size(),Array:xt,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),GK="squeeze",sKe=["typed"],oKe=Y(GK,sKe,t=>{var{typed:e}=t;return e(GK,{Array:function(n){return pP(wt(n))},Matrix:function(n){var i=pP(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return wt(n)}})}),KK="subset",lKe=["typed","matrix","zeros","add"],spe=Y(KK,lKe,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t;return e(KK,{"Matrix, Index":function(o,l){return w1(l)?r():(dP(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,l){var u=s(r(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":cKe,"string, Index":uKe,"Matrix, Index, any, any":function(o,l,u,c){return w1(l)?o:(dP(o,l),o.clone().subset(l,a(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u,c){var f=s(r(o),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(r(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(o,l,u,void 0)}}),"string, Index, string":XK,"string, Index, string, string":XK,"Object, Index, any":fKe});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o.isScalar())return s;var l=o.size();if(l.every(u=>u>0))try{return i(s,n(l))}catch{return s}else return s}});function uKe(t,e){if(!iO(e))throw new TypeError("Index expected");if(w1(e))return"";if(dP(Array.from(t),e),e.size().length!==1)throw new kt(e.size().length,1);var r=t.length;Nr(e.min()[0],r),Nr(e.max()[0],r);var n=e.dimension(0),i="";function a(s){i+=t.charAt(s)}return Number.isInteger(n)?a(n):n.forEach(a),i}function XK(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(w1(e))return t;if(dP(Array.from(t),e),e.size().length!==1)throw new kt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=Number.isInteger(i)?1:i.size()[0];if(a!==r.length)throw new kt(i.size()[0],r.length);var s=t.length;Nr(e.min()[0]),Nr(e.max()[0]);for(var o=[],l=0;l<s;l++)o[l]=t.charAt(l);function u(h,d){o[h]=r.charAt(d[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>s)for(var c=s-1,f=o.length;c<f;c++)o[c]||(o[c]=n);return o.join("")}function cKe(t,e){if(!w1(e)){if(e.size().length!==1)throw new kt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return is(t,r)}}function fKe(t,e,r){if(w1(e))return t;if(e.size().length!==1)throw new kt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=wt(t);return y1(i,n,r),i}var YK="transpose",hKe=["typed","matrix"],dKe=Y(YK,hKe,t=>{var{typed:e,matrix:r}=t;return e(YK,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:wt});function n(s){var o=s.size(),l;switch(o.length){case 1:l=s.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Ft(o)+")");switch(s.storage()){case"dense":l=i(s,u,c);break;case"sparse":l=a(s,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Ft(o)+")")}return l}function i(s,o,l){for(var u=s._data,c=[],f,h=0;h<l;h++){f=c[h]=[];for(var d=0;d<o;d++)f[d]=wt(u[d][h])}return s.createDenseMatrix({data:c,size:[l,o],datatype:s._datatype})}function a(s,o,l){for(var u=s._values,c=s._index,f=s._ptr,h=u?[]:void 0,d=[],p=[],m=[],v=0;v<o;v++)m[v]=0;var y,w,b;for(y=0,w=c.length;y<w;y++)m[c[y]]++;for(var A=0,x=0;x<o;x++)p.push(A),A+=m[x],m[x]=p[x];for(p.push(A),b=0;b<l;b++)for(var _=f[b],S=f[b+1],E=_;E<S;E++){var T=m[c[E]]++;d[T]=b,u&&(h[T]=wt(u[E]))}return s.createSparseMatrix({values:h,index:d,ptr:p,size:[l,o],datatype:s._datatype})}}),QK="ctranspose",pKe=["typed","transpose","conj"],mKe=Y(QK,pKe,t=>{var{typed:e,transpose:r,conj:n}=t;return e(QK,{any:function(a){return n(r(a))}})}),ZK="zeros",gKe=["typed","config","matrix","BigNumber"],vKe=Y(ZK,gKe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(ZK,{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return a(u,f)}else return r.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),f=c?new i(0):0;if(o(l),u){var h=n(u);return l.length>0?h.resize(l,f):h}else{var d=[];return l.length>0?x1(d,l,f):d}}function s(l){var u=!1;return l.forEach(function(c,f,h){St(c)&&(u=!0,h[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!nt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),JK="fft",yKe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],bKe=Y(JK,yKe,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:l,dotDivide:u,conj:c,pow:f,ceil:h,log2:d}=t;return e(JK,{Array:p,Matrix:function(b){return b.create(p(b.valueOf()),b.datatype())}});function p(w){var b=xt(w);return b.length===1?y(w,b[0]):m(w.map(A=>p(A,b.slice(1))),0)}function m(w,b){var A=xt(w);if(b!==0)return new Array(A[0]).fill(0).map((_,S)=>m(w[S],b-1));if(A.length===1)return y(w);function x(_){var S=xt(_);return new Array(S[1]).fill(0).map((E,T)=>new Array(S[0]).fill(0).map((D,N)=>_[N][T]))}return x(m(x(w),1))}function v(w){for(var b=w.length,A=s(a(i(-1,i(l,o)),b)),x=[],_=1-b;_<b;_++)x.push(f(A,a(f(_,2),2)));for(var S=f(2,h(d(b+b-1))),E=[...new Array(b).fill(0).map((k,V)=>i(w[V],x[b-1+V])),...new Array(S-b).fill(0)],T=[...new Array(b+b-1).fill(0).map((k,V)=>a(1,x[V])),...new Array(S-(b+b-1)).fill(0)],D=y(E),N=y(T),P=new Array(S).fill(0).map((k,V)=>i(D[V],N[V])),M=u(c(p(c(P))),S),j=[],K=b-1;K<b+b-1;K++)j.push(i(M[K],x[K]));return j}function y(w){var b=w.length;if(b===1)return[w[0]];if(b%2===0){for(var A=[...y(w.filter((E,T)=>T%2===0)),...y(w.filter((E,T)=>T%2===1))],x=0;x<b/2;x++){var _=A[x],S=i(A[x+b/2],s(i(i(o,l),a(-x,b))));A[x]=n(_,S),A[x+b/2]=n(_,i(-1,S))}return A}else return v(w)}}),eX="ifft",wKe=["typed","fft","dotDivide","conj"],xKe=Y(eX,wKe,t=>{var{typed:e,fft:r,dotDivide:n,conj:i}=t;return e(eX,{"Array | Matrix":function(s){var o=ft(s)?s.size():xt(s);return n(i(r(i(s))),o.reduce((l,u)=>l*u,1))}})});function s_(t){"@babel/helpers - typeof";return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(t)}function AKe(t,e){if(s_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(s_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ke(t){var e=AKe(t,"string");return s_(e)=="symbol"?e:e+""}function Jn(t,e,r){return(e=_Ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EKe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tX(Object(r),!0).forEach(function(n){Jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var SKe="solveODE",CKe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],TKe=Y(SKe,CKe,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,max:s,map:o,abs:l,isPositive:u,isNegative:c,larger:f,smaller:h,matrix:d,bignumber:p,unaryMinus:m}=t;function v(E){return function(T,D,N,P){var M=!(D.length===2&&(D.every(_)||D.every(po)));if(M)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var j=D[0],K=D[1],k=f(K,j),V=P.firstStep;if(V!==void 0&&!u(V))throw new Error('"firstStep" must be positive');var q=P.maxStep;if(q!==void 0&&!u(q))throw new Error('"maxStep" must be positive');var H=P.minStep;if(H&&c(H))throw new Error('"minStep" must be positive or zero');var te=[j,K,V,H,q].filter(G=>G!==void 0);if(!(te.every(_)||te.every(po)))throw new Error('Inconsistent type of "t" dependant variables');for(var ue=1,re=P.tol?P.tol:1e-4,L=P.minDelta?P.minDelta:.2,ie=P.maxDelta?P.maxDelta:5,X=P.maxIter?P.maxIter:1e4,pe=[j,K,...N,q,H].some(St),[de,ae,z,ne]=pe?[p(E.a),p(E.c),p(E.b),p(E.bp)]:[E.a,E.c,E.b,E.bp],fe=V?k?V:m(V):a(n(K,j),ue),Q=[j],ye=[N],me=n(z,ne),De=0,Le=0,ze=A(k),Be=x(k);ze(Q[De],K);){var Ve=[];fe=Be(Q[De],K,fe),Ve.push(T(Q[De],ye[De]));for(var Ke=1;Ke<ae.length;++Ke)Ve.push(T(r(Q[De],i(ae[Ke],fe)),r(ye[De],i(fe,de[Ke],Ve))));var ee=s(l(o(i(me,Ve),G=>po(G)?G.value:G)));ee<re&&re/ee>1/4&&(Q.push(r(Q[De],fe)),ye.push(r(ye[De],i(fe,z,Ve))),De++);var ce=.84*(re/ee)**(1/5);if(h(ce,L)?ce=L:f(ce,ie)&&(ce=ie),ce=pe?p(ce):ce,fe=i(fe,ce),q&&f(l(fe),q)?fe=k?q:m(q):H&&h(l(fe),H)&&(fe=k?H:m(H)),Le++,Le>X)throw new Error("Maximum number of iterations reached, try changing options")}return{t:Q,y:ye}}}function y(E,T,D,N){var P=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],M=[null,1/2,3/4,1],j=[2/9,1/3,4/9,0],K=[7/24,1/4,1/3,1/8],k={a:P,c:M,b:j,bp:K};return v(k)(E,T,D,N)}function w(E,T,D,N){var P=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],M=[null,1/5,3/10,4/5,8/9,1,1],j=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],K=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],k={a:P,c:M,b:j,bp:K};return v(k)(E,T,D,N)}function b(E,T,D,N){var P=N.method?N.method:"RK45",M={RK23:y,RK45:w};if(P.toUpperCase()in M){var j=EKe({},N);return delete j.method,M[P.toUpperCase()](E,T,D,j)}else{var K=Object.keys(M).map(V=>'"'.concat(V,'"')),k="".concat(K.slice(0,-1).join(", ")," and ").concat(K.slice(-1));throw new Error('Unavailable method "'.concat(P,'". Available methods are ').concat(k))}}function A(E){return E?h:f}function x(E){var T=E?f:h;return function(D,N,P){var M=r(D,P);return T(M,N)?n(N,D):P}}function _(E){return St(E)||ot(E)}function S(E,T,D,N){var P=b(E,T.toArray(),D.toArray(),N);return{t:d(P.t),y:d(P.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":S,"function, Array, Array":(E,T,D)=>b(E,T,D,{}),"function, Matrix, Matrix":(E,T,D)=>S(E,T,D,{}),"function, Array, number | BigNumber | Unit":(E,T,D)=>{var N=b(E,T,[D],{});return{t:N.t,y:N.y.map(P=>P[0])}},"function, Matrix, number | BigNumber | Unit":(E,T,D)=>{var N=b(E,T.toArray(),[D],{});return{t:d(N.t),y:d(N.y.map(P=>P[0]))}},"function, Array, number | BigNumber | Unit, Object":(E,T,D,N)=>{var P=b(E,T,[D],N);return{t:P.t,y:P.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit, Object":(E,T,D,N)=>{var P=b(E,T.toArray(),[D],N);return{t:d(P.t),y:d(P.y.map(M=>M[0]))}}})}),DKe="erf",NKe=["typed"],PKe=Y(DKe,NKe,t=>{var{typed:e}=t;return e("name",{number:function(s){var o=Math.abs(s);return o>=OKe?qd(s):o<=MKe?qd(s)*r(o):o<=4?qd(s)*(1-n(o)):qd(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>Ct(s,a))});function r(a){var s=a*a,o=kc[0][4]*s,l=s,u;for(u=0;u<3;u+=1)o=(o+kc[0][u])*s,l=(l+fy[0][u])*s;return a*(o+kc[0][3])/(l+fy[0][3])}function n(a){var s=kc[1][8]*a,o=a,l;for(l=0;l<7;l+=1)s=(s+kc[1][l])*a,o=(o+fy[1][l])*a;var u=(s+kc[1][7])/(o+fy[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(a){var s=1/(a*a),o=kc[2][5]*s,l=s,u;for(u=0;u<4;u+=1)o=(o+kc[2][u])*s,l=(l+fy[2][u])*s;var c=s*(o+kc[2][4])/(l+fy[2][4]);c=(IKe-c)/a,s=parseInt(a*16)/16;var f=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),MKe=.46875,IKe=.5641895835477563,kc=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],fy=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],OKe=Math.pow(2,53),rX="zeta",kKe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],RKe=Y(rX,kKe,t=>{var{typed:e,config:r,multiply:n,pow:i,divide:a,factorial:s,equal:o,smallerEq:l,isBounded:u,isNegative:c,gamma:f,sin:h,subtract:d,add:p,Complex:m,BigNumber:v,pi:y}=t;return e(rX,{number:S=>w(S,E=>E,()=>20),BigNumber:S=>w(S,E=>new v(E),()=>Math.abs(Math.log10(r.relTol))),Complex:b});function w(S,E,T){return o(S,0)?E(-.5):o(S,1)?E(NaN):u(S)?A(S,E,T,D=>D):c(S)?E(NaN):E(1)}function b(S){return S.re===0&&S.im===0?new m(-.5):S.re===1?new m(NaN,NaN):S.re===1/0&&S.im===0?new m(1):S.im===1/0||S.re===-1/0?new m(NaN,NaN):A(S,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function A(S,E,T,D){var N=T(S);if(D(S)>-(N-1)/2)return _(S,E(N),E);var P=n(i(2,S),i(E(y),d(S,1)));return P=n(P,h(n(a(E(y),2),S))),P=n(P,f(d(1,S))),n(P,A(d(1,S),E,T,D))}function x(S,E){for(var T=S,D=S;l(D,E);D=p(D,1)){var N=a(n(s(p(E,d(D,1))),i(4,D)),n(s(d(E,D)),s(n(2,D))));T=p(T,N)}return n(E,T)}function _(S,E,T){for(var D=a(1,n(x(T(0),E),d(1,i(2,d(1,S))))),N=T(0),P=T(1);l(P,E);P=p(P,1))N=p(N,a(n((-1)**(P-1),x(P,E)),i(P,S)));return n(D,N)}}),nX="mode",FKe=["typed","isNaN","isNumeric"],LKe=Y(nX,FKe,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(nX,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=er(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<a.length;c++){var f=a[c];if(n(f)&&r(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===u?l.push(f):o[f]>u&&(u=o[f],l=[f])}return l}});function fs(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+yr(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+yr(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var iX="prod",BKe=["typed","config","multiplyScalar","numeric"],$Ke=Y(iX,BKe,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:i}=t;return e(iX,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(Tp(s,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw fs(u,"prod",l)}}),typeof o=="string"&&(o=i(o,Up(o,r))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),aX="format",jKe=["typed"],VKe=Y(aX,jKe,t=>{var{typed:e}=t;return e(aX,{any:Ft,"any, Object | function | number | BigNumber":Ft})}),sX="bin",UKe=["typed","format"],zKe=Y(sX,UKe,t=>{var{typed:e,format:r}=t;return e(sX,{"number | BigNumber":function(i){return r(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"bin",wordSize:a})}})}),oX="oct",qKe=["typed","format"],HKe=Y(oX,qKe,t=>{var{typed:e,format:r}=t;return e(oX,{"number | BigNumber":function(i){return r(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"oct",wordSize:a})}})}),lX="hex",WKe=["typed","format"],GKe=Y(lX,WKe,t=>{var{typed:e,format:r}=t;return e(lX,{"number | BigNumber":function(i){return r(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"hex",wordSize:a})}})}),ope=/\$([\w.]+)/g,uX="print",KKe=["typed"],lpe=Y(uX,KKe,t=>{var{typed:e}=t;return e(uX,{"string, Object | Array":cX,"string, Object | Array, number | Object":cX})});function cX(t,e,r){return t.replace(ope,function(n,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?Nn(s)?s:Ft(s,r):n})}var fX="to",XKe=["typed","matrix","concat"],YKe=Y(fX,XKe,t=>{var{typed:e,matrix:r,concat:n}=t,i=Mr({typed:e,matrix:r,concat:n});return e(fX,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),hX="toBest",QKe=["typed"],ZKe=Y(hX,QKe,t=>{var{typed:e}=t;return e(hX,{Unit:r=>r.toBest(),"Unit, string":(r,n)=>r.toBest(n.split(",")),"Unit, string, Object":(r,n,i)=>r.toBest(n.split(","),i),"Unit, Array":(r,n)=>r.toBest(n),"Unit, Array, Object":(r,n,i)=>r.toBest(n,i)})}),dX="isPrime",JKe=["typed"],eXe=Y(dX,JKe,t=>{var{typed:e}=t;return e(dX,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(w,b,A){for(var x=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),w=w.mul(w).mod(A)):(b=b.sub(1),x=w.mul(x).mod(A));return x}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var h=2;h<=f;h+=1)c.push(f)}for(var d=0;d<c.length;d+=1){var p=c[d],m=s(n.sub(n).add(p),u,n);if(!m.eq(1)){for(var v=0,y=m;!y.eq(n.sub(1));v+=1,y=y.mul(y).mod(n))if(v===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),tXe="numeric",rXe=["number","?bignumber","?fraction"],nXe=Y(tXe,rXe,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:r?s=>r(s):dV,bigint:s=>BigInt(s),Fraction:n?s=>n(s):npe};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=yr(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in a))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(a).join(", "));return l===c?o:a[l](o)}}),pX="divideScalar",iXe=["typed","numeric"],aXe=Y(pX,iXe,t=>{var{typed:e,numeric:r}=t;return e(pX,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),mX="pow",sXe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],oXe=Y(mX,sXe,t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:a,inv:s,number:o,fraction:l,Complex:u}=t;return e(mX,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||r.predictable?p.pow(m):new u(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(d,p)=>d**p,"Fraction, Fraction":function(p,m){var v=p.pow(m);if(v!=null)return v;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(p,m){return h(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(d,p){if(r.predictable&&!nt(p)&&d<0)try{var m=l(p),v=o(m);if((p===v||Math.abs((p-v)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-d,p)}catch{}return r.predictable&&(d<-1&&p===1/0||d>-1&&d<0&&p===-1/0)?NaN:nt(p)||d>=0||r.predictable?hde(d,p):d*d<1&&p===1/0||d*d>1&&p===-1/0?0:new u(d,0).pow(p,0)}function f(d,p){if(!nt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=xt(d);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(s(d),-p)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):w}for(var v=n(m[0]).valueOf(),y=d;p>=1;)(p&1)===1&&(v=i(y,v)),p>>=1,y=i(y,y);return v}function h(d,p){return a(f(d.valueOf(),p))}}),hy="Number of decimals in function round must be an integer",gX="round",lXe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],uXe=Y(gX,lXe,t=>{var{typed:e,config:r,matrix:n,equalScalar:i,zeros:a,BigNumber:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:i}),u=yi({typed:e,DenseMatrix:o}),c=Dl({typed:e});function f(h){return Math.abs(ZS(h).exponent)}return e(gX,{number:function(d){var p=qw(d,f(r.relTol)),m=zi(d,p,r.relTol,r.absTol)?p:d;return qw(m)},"number, number":function(d,p){var m=f(r.relTol);if(p>=m)return qw(d,p);var v=qw(d,m),y=zi(d,v,r.relTol,r.absTol)?v:d;return qw(y,p)},"number, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(hy);return new s(d).toDecimalPlaces(p.toNumber())},Complex:function(d){return d.round()},"Complex, number":function(d,p){if(p%1)throw new TypeError(hy);return d.round(p)},"Complex, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(hy);var m=p.toNumber();return d.round(m)},BigNumber:function(d){var p=new s(d).toDecimalPlaces(f(r.relTol)),m=El(d,p,r.relTol,r.absTol)?p:d;return m.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(hy);var m=f(r.relTol);if(p>=m)return d.toDecimalPlaces(p.toNumber());var v=d.toDecimalPlaces(m),y=El(d,v,r.relTol,r.absTol)?v:d;return y.toDecimalPlaces(p.toNumber())},bigint:h=>h,"bigint, number":(h,d)=>h,"bigint, BigNumber":(h,d)=>h,Fraction:function(d){return d.round()},"Fraction, number":function(d,p){if(p%1)throw new TypeError(hy);return d.round(p)},"Fraction, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(hy);return d.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(d,p,m){var v=d.toNumeric(m);return m.multiply(h(v,p))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>h(d,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>Ct(d,v=>h(v,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(d,p)=>h(d,0,p)),"Array | Matrix":e.referToSelf(h=>d=>Ct(d,h,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(d,p)=>l(d,p,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(d,p)=>c(d,p,h,!1)),"Array, number | BigNumber":e.referToSelf(h=>(d,p)=>c(n(d),p,h,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(h=>(d,p)=>i(d,0)?a(p.size(),p.storage()):u(p,d,h,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(h=>(d,p)=>i(d,0)?a(p.size(),p.storage()):c(p,d,h,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(h=>(d,p)=>c(n(p),d,h,!0).valueOf())})}),vX="log",cXe=["config","typed","typeOf","divideScalar","Complex"],fXe=Math.log(16),hXe=Y(vX,cXe,t=>{var{typed:e,typeOf:r,config:n,divideScalar:i,Complex:a}=t;function s(l){return l.log()}function o(l){return s(new a(l,0))}return e(vX,{number:function(u){return u>=0||n.predictable?NG(u):o(u)},bigint:fV(fXe,NG,n,o),Complex:s,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(r(u)==="Fraction"&&r(c)==="Fraction"){var f=u.log(c);if(f!==null)return f}return i(l(u),l(c))})})}),yX="log1p",dXe=["typed","config","divideScalar","log","Complex"],pXe=Y(yX,dXe,t=>{var{typed:e,config:r,divideScalar:n,log:i,Complex:a}=t;return e(yX,{number:function(l){return l>=-1||r.predictable?n9e(l):s(new a(l,0))},Complex:s,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||r.predictable?u.ln():s(new a(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>Ct(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function s(o){var l=o.re+1;return new a(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),bX="nthRoots",mXe=["config","typed","divideScalar","Complex"],gXe=Y(bX,mXe,t=>{var{typed:e,config:r,divideScalar:n,Complex:i}=t,a=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function s(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),h=o.abs(),d=[],p=Math.pow(h,1/l),m=0;m<l;m++){var v=(c+4*m)/l;if(v===Math.round(v)){d.push(a[v%4](p));continue}d.push(new i({r:p,phi:(f+2*Math.PI*m)/l}))}return d}return e(bX,{Complex:function(l){return s(l,2)},"Complex, number":s})}),wX="dotPow",vXe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],yXe=Y(wX,vXe,t=>{var{typed:e,equalScalar:r,matrix:n,pow:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=za({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=ya({typed:e,equalScalar:r}),f=yi({typed:e,DenseMatrix:a}),h=Mr({typed:e,matrix:n,concat:s}),d={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(d[p]=i.signatures[p]);var m=e(d);return e(wX,h({elop:m,SS:u,DS:l,Ss:c,sS:f}))}),xX="dotDivide",bXe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],wXe=Y(xX,bXe,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=yu({typed:e,equalScalar:n}),u=za({typed:e}),c=Nc({typed:e,SparseMatrix:o}),f=ya({typed:e,equalScalar:n}),h=yi({typed:e,DenseMatrix:a}),d=Mr({typed:e,matrix:r,concat:s});return e(xX,d({elop:i,SS:c,DS:u,SD:l,Ss:f,sS:h}))});function JS(t){var{DenseMatrix:e}=t;return function(n,i,a){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Ft(s)+")");var o=s[0],l=s[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+Ft(s)+")");var u=[];if(ft(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)u[h]=[f[h]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(lP(i)){if(a){u=[];for(var d=0;d<o;d++)u[d]=[f[d][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Im(i)){for(var p=0;p<o;p++)u[p]=[0];for(var m=i._values,v=i._index,y=i._ptr,w=y[1],b=y[0];b<w;b++){var A=v[b];u[A][0]=m[b]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(gr(i)){var x=xt(i);if(x.length===1){if(x[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<o;_++)u[_]=[i[_]];return new e({data:u,size:[o,1]})}if(x.length===2){if(x[0]!==o||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)u[S]=[i[S][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var AX="lsolve",xXe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],AXe=Y(AX,xXe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=JS({DenseMatrix:o});return e(AX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.valueOf()}});function u(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=[],y=f._data,w=0;w<m;w++){var b=d[w][0]||0,A=void 0;if(s(b,0))A=0;else{var x=y[w][w];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(b,x);for(var _=w+1;_<p;_++)d[_]=[a(d[_][0]||0,i(A,y[_][w]))]}v[w]=[A]}return new o({data:v,size:[p,1]})}function c(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=[],A=0;A<m;A++){var x=d[A][0]||0;if(s(x,0))b[A]=[0];else{for(var _=0,S=[],E=[],T=w[A],D=w[A+1],N=T;N<D;N++){var P=y[N];P===A?_=v[N]:P>A&&(S.push(v[N]),E.push(P))}if(s(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var M=n(x,_),j=0,K=E.length;j<K;j++){var k=E[j];d[k]=[a(d[k][0]||0,i(M,S[j]))]}b[A]=[M]}}return new o({data:b,size:[p,1]})}}),_X="usolve",_Xe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],EXe=Y(_X,_Xe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=JS({DenseMatrix:o});return e(_X,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.valueOf()}});function u(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=[],y=f._data,w=m-1;w>=0;w--){var b=d[w][0]||0,A=void 0;if(s(b,0))A=0;else{var x=y[w][w];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(b,x);for(var _=w-1;_>=0;_--)d[_]=[a(d[_][0]||0,i(A,y[_][w]))]}v[w]=[A]}return new o({data:v,size:[p,1]})}function c(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=[],A=m-1;A>=0;A--){var x=d[A][0]||0;if(s(x,0))b[A]=[0];else{for(var _=0,S=[],E=[],T=w[A],D=w[A+1],N=D-1;N>=T;N--){var P=y[N];P===A?_=v[N]:P<A&&(S.push(v[N]),E.push(P))}if(s(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var M=n(x,_),j=0,K=E.length;j<K;j++){var k=E[j];d[k]=[a(d[k][0],i(M,S[j]))]}b[A]=[M]}}return new o({data:b,size:[p,1]})}}),EX="lsolveAll",SXe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],CXe=Y(EX,SXe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=JS({DenseMatrix:o});return e(EX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.map(v=>v.valueOf())}});function u(f,h){for(var d=[l(f,h,!0)._data.map(E=>E[0])],p=f._data,m=f._size[0],v=f._size[1],y=0;y<v;y++)for(var w=d.length,b=0;b<w;b++){var A=d[b];if(s(p[y][y],0))if(s(A[y],0)){if(b===0){var _=[...A];_[y]=1;for(var S=y+1;S<v;S++)_[S]=a(_[S],p[S][y]);d.push(_)}}else{if(b===0)return[];d.splice(b,1),b-=1,w-=1}else{A[y]=n(A[y],p[y][y]);for(var x=y+1;x<v;x++)A[x]=a(A[x],i(A[y],p[x][y]))}}return d.map(E=>new o({data:E.map(T=>[T]),size:[m,1]}))}function c(f,h){for(var d=[l(f,h,!0)._data.map(ue=>ue[0])],p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=0;b<m;b++)for(var A=d.length,x=0;x<A;x++){for(var _=d[x],S=[],E=[],T=w[b],D=w[b+1],N=0,P=T;P<D;P++){var M=y[P];M===b?N=v[P]:M>b&&(S.push(v[P]),E.push(M))}if(s(N,0))if(s(_[b],0)){if(x===0){var V=[..._];V[b]=1;for(var q=0,H=E.length;q<H;q++){var te=E[q];V[te]=a(V[te],S[q])}d.push(V)}}else{if(x===0)return[];d.splice(x,1),x-=1,A-=1}else{_[b]=n(_[b],N);for(var j=0,K=E.length;j<K;j++){var k=E[j];_[k]=a(_[k],i(_[b],S[j]))}}}return d.map(ue=>new o({data:ue.map(re=>[re]),size:[p,1]}))}}),SX="usolveAll",TXe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],DXe=Y(SX,TXe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=JS({DenseMatrix:o});return e(SX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.map(v=>v.valueOf())}});function u(f,h){for(var d=[l(f,h,!0)._data.map(E=>E[0])],p=f._data,m=f._size[0],v=f._size[1],y=v-1;y>=0;y--)for(var w=d.length,b=0;b<w;b++){var A=d[b];if(s(p[y][y],0))if(s(A[y],0)){if(b===0){var _=[...A];_[y]=1;for(var S=y-1;S>=0;S--)_[S]=a(_[S],p[S][y]);d.push(_)}}else{if(b===0)return[];d.splice(b,1),b-=1,w-=1}else{A[y]=n(A[y],p[y][y]);for(var x=y-1;x>=0;x--)A[x]=a(A[x],i(A[y],p[x][y]))}}return d.map(E=>new o({data:E.map(T=>[T]),size:[m,1]}))}function c(f,h){for(var d=[l(f,h,!0)._data.map(ue=>ue[0])],p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=m-1;b>=0;b--)for(var A=d.length,x=0;x<A;x++){for(var _=d[x],S=[],E=[],T=w[b],D=w[b+1],N=0,P=D-1;P>=T;P--){var M=y[P];M===b?N=v[P]:M<b&&(S.push(v[P]),E.push(M))}if(s(N,0))if(s(_[b],0)){if(x===0){var V=[..._];V[b]=1;for(var q=0,H=E.length;q<H;q++){var te=E[q];V[te]=a(V[te],S[q])}d.push(V)}}else{if(x===0)return[];d.splice(x,1),x-=1,A-=1}else{_[b]=n(_[b],N);for(var j=0,K=E.length;j<K;j++){var k=E[j];_[k]=a(_[k],i(_[b],S[j]))}}}return d.map(ue=>new o({data:ue.map(re=>[re]),size:[p,1]}))}}),NXe="matAlgo08xS0Sid",PXe=["typed","equalScalar"],pV=Y(NXe,PXe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!o||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=c[0],w=c[1],b,A=r,x=0,_=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,A=e.find(r,[b,b]),x=e.convert(0,b),_=e.find(s,[b,b]));for(var S=[],E=[],T=[],D=[],N=[],P,M,j,K,k=0;k<w;k++){T[k]=E.length;var V=k+1;for(M=u[k],j=u[k+1],P=M;P<j;P++)K=l[P],N[K]=V,D[K]=o[P],E.push(K);for(M=p[k],j=p[k+1],P=M;P<j;P++)K=d[P],N[K]===V&&(D[K]=_(D[K],h[P]));for(P=T[k];P<E.length;){K=E[P];var q=D[K];A(q,x)?E.splice(P,1):(S.push(q),P++)}}return T[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:T,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),mV=Y("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(r(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(r(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf())}}),CX="leftShift",MXe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],IXe=Y(CX,MXe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=qp({typed:e}),l=yu({typed:e,equalScalar:n}),u=pV({typed:e,equalScalar:n}),c=zv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Dl({typed:e}),d=Mr({typed:e,matrix:r,concat:s}),p=mV({typed:e,matrix:r});return e(CX,{"number, number":vde,"BigNumber, BigNumber":QWe,"bigint, bigint":(m,v)=>m<<v,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),TX="rightArithShift",OXe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],kXe=Y(TX,OXe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=qp({typed:e}),l=yu({typed:e,equalScalar:n}),u=pV({typed:e,equalScalar:n}),c=zv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Dl({typed:e}),d=Mr({typed:e,matrix:r,concat:s}),p=mV({typed:e,matrix:r});return e(TX,{"number, number":yde,"BigNumber, BigNumber":ZWe,"bigint, bigint":(m,v)=>m>>v,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),DX="rightLogShift",RXe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],FXe=Y(DX,RXe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=qp({typed:e}),l=yu({typed:e,equalScalar:n}),u=pV({typed:e,equalScalar:n}),c=zv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Dl({typed:e}),d=Mr({typed:e,matrix:r,concat:s}),p=mV({typed:e,matrix:r});return e(DX,{"number, number":bde,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),NX="and",LXe=["typed","matrix","equalScalar","zeros","not","concat"],upe=Y(NX,LXe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=yu({typed:e,equalScalar:n}),l=pO({typed:e,equalScalar:n}),u=ya({typed:e,equalScalar:n}),c=Dl({typed:e}),f=Mr({typed:e,matrix:r,concat:s});return e(NX,{"number, number":d4,"Complex, Complex":function(d,p){return(d.re!==0||d.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(d,p){return!d.isZero()&&!p.isZero()&&!d.isNaN()&&!p.isNaN()},"bigint, bigint":d4,"Unit, Unit":e.referToSelf(h=>(d,p)=>h(d.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(h=>(d,p)=>a(p)?i(d.size(),d.storage()):u(d,p,h,!1)),"DenseMatrix, any":e.referToSelf(h=>(d,p)=>a(p)?i(d.size(),d.storage()):c(d,p,h,!1)),"any, SparseMatrix":e.referToSelf(h=>(d,p)=>a(d)?i(d.size(),d.storage()):u(p,d,h,!0)),"any, DenseMatrix":e.referToSelf(h=>(d,p)=>a(d)?i(d.size(),d.storage()):c(p,d,h,!0)),"Array, any":e.referToSelf(h=>(d,p)=>h(r(d),p).valueOf()),"any, Array":e.referToSelf(h=>(d,p)=>h(d,r(p)).valueOf())},f({SS:l,DS:o}))}),EP="compare",BXe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],$Xe=Y(EP,BXe,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:l}=t,u=za({typed:e}),c=dO({typed:e,equalScalar:n}),f=yi({typed:e,DenseMatrix:o}),h=Mr({typed:e,matrix:i,concat:l}),d=ew({typed:e});return e(EP,jXe({typed:e,config:r}),{"boolean, boolean":function(m,v){return m===v?0:m>v?1:-1},"BigNumber, BigNumber":function(m,v){return El(m,v,r.relTol,r.absTol)?new a(0):new a(m.cmp(v))},"bigint, bigint":function(m,v){return m===v?0n:m>v?1n:-1n},"Fraction, Fraction":function(m,v){return new s(m.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:c,DS:u,Ss:f}))}),jXe=Y(EP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(EP,{"number, number":function(i,a){return zi(i,a,r.relTol,r.absTol)?0:i>a?1:-1}})}),VXe=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,l=function(b){return t.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(r).replace(i,"")||"",f=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(u.match(s),16)||f.length!==1&&u.match(a)&&Date.parse(u),p=parseInt(c.match(s),16)||d&&c.match(a)&&Date.parse(c)||null,m,v;if(p){if(d<p)return-1;if(d>p)return 1}for(var y=0,w=Math.max(f.length,h.length);y<w;y++){if(m=!(f[y]||"").match(o)&&parseFloat(f[y])||f[y]||0,v=!(h[y]||"").match(o)&&parseFloat(h[y])||h[y]||0,isNaN(m)!==isNaN(v))return isNaN(m)?1:-1;if(typeof m!=typeof v&&(m+="",v+=""),m<v)return-1;if(m>v)return 1}return 0};const dy=Sl(VXe);var PX="compareNatural",UXe=["typed","compare"],zXe=Y(PX,UXe,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(PX,{"any, any":i});function i(l,u){var c=yr(l),f=yr(u),h;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return h=r(l,u),h.toString()!=="0"?h>0?1:-1:dy(c,f);var d=["Array","DenseMatrix","SparseMatrix"];if(d.includes(c)||d.includes(f))return h=a(i,l,u),h!==0?h:dy(c,f);if(c!==f)return dy(c,f);if(c==="Complex")return qXe(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):s(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return dy(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(l,u,c){return Im(u)&&Im(c)?s(l,u.toJSON().values,c.toJSON().values):Im(u)?a(l,u.toArray(),c):Im(c)?a(l,u,c.toArray()):lP(u)?a(l,u.toJSON().data,c):lP(c)?a(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?s(l,u,c):a(l,u,[c]):a(l,[u],c)}function s(l,u,c){for(var f=0,h=Math.min(u.length,c.length);f<h;f++){var d=l(u[f],c[f]);if(d!==0)return d}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var f=Object.keys(u),h=Object.keys(c);f.sort(dy),h.sort(dy);var d=s(l,f,h);if(d!==0)return d;for(var p=0;p<f.length;p++){var m=l(u[f[p]],c[h[p]]);if(m!==0)return m}return 0}});function qXe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var MX="compareText",HXe=["typed","matrix","concat"];s4.signature="any, any";var WXe=Y(MX,HXe,t=>{var{typed:e,matrix:r,concat:n}=t,i=Mr({typed:e,matrix:r,concat:n});return e(MX,s4,i({elop:s4,Ds:!0}))}),SP="equal",GXe=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],KXe=Y(SP,GXe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=za({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=yi({typed:e,DenseMatrix:i}),c=Mr({typed:e,matrix:r});return e(SP,XXe({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:o,Ss:u}))}),XXe=Y(SP,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(SP,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:r(i,a)}})}),IX="equalText",YXe=["typed","compareText","isZero"],QXe=Y(IX,YXe,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(IX,{"any, any":function(a,s){return n(r(a,s))}})}),CP="smaller",ZXe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],JXe=Y(CP,ZXe,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=za({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=yi({typed:e,DenseMatrix:a}),f=Mr({typed:e,matrix:i,concat:s}),h=ew({typed:e});function d(p,m){return p.lt(m)&&!El(p,m,r.relTol,r.absTol)}return e(CP,eYe({typed:e,config:r}),{"boolean, boolean":(p,m)=>p<m,"BigNumber, BigNumber":d,"bigint, bigint":(p,m)=>p<m,"Fraction, Fraction":(p,m)=>p.compare(m)===-1,"Fraction, BigNumber":function(m,v){return d(n(m),v)},"BigNumber, Fraction":function(m,v){return d(m,n(v))},"Complex, Complex":function(m,v){throw new TypeError("No ordering relation is defined for complex numbers")}},h,f({SS:u,DS:l,Ss:c}))}),eYe=Y(CP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(CP,{"number, number":function(i,a){return i<a&&!zi(i,a,r.relTol,r.absTol)}})}),TP="smallerEq",tYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],rYe=Y(TP,tYe,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=za({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=yi({typed:e,DenseMatrix:i}),c=Mr({typed:e,matrix:n,concat:a}),f=ew({typed:e});return e(TP,nYe({typed:e,config:r}),{"boolean, boolean":(h,d)=>h<=d,"BigNumber, BigNumber":function(d,p){return d.lte(p)||El(d,p,r.relTol,r.absTol)},"bigint, bigint":(h,d)=>h<=d,"Fraction, Fraction":(h,d)=>h.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:o,Ss:u}))}),nYe=Y(TP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(TP,{"number, number":function(i,a){return i<=a||zi(i,a,r.relTol,r.absTol)}})}),DP="larger",iYe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],aYe=Y(DP,iYe,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=za({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=yi({typed:e,DenseMatrix:a}),f=Mr({typed:e,matrix:i,concat:s}),h=ew({typed:e});function d(p,m){return p.gt(m)&&!El(p,m,r.relTol,r.absTol)}return e(DP,sYe({typed:e,config:r}),{"boolean, boolean":(p,m)=>p>m,"BigNumber, BigNumber":d,"bigint, bigint":(p,m)=>p>m,"Fraction, Fraction":(p,m)=>p.compare(m)===1,"Fraction, BigNumber":function(m,v){return d(n(m),v)},"BigNumber, Fraction":function(m,v){return d(m,n(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,f({SS:u,DS:l,Ss:c}))}),sYe=Y(DP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(DP,{"number, number":function(i,a){return i>a&&!zi(i,a,r.relTol,r.absTol)}})}),NP="largerEq",oYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],lYe=Y(NP,oYe,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=za({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=yi({typed:e,DenseMatrix:i}),c=Mr({typed:e,matrix:n,concat:a}),f=ew({typed:e});return e(NP,uYe({typed:e,config:r}),{"boolean, boolean":(h,d)=>h>=d,"BigNumber, BigNumber":function(d,p){return d.gte(p)||El(d,p,r.relTol,r.absTol)},"bigint, bigint":function(d,p){return d>=p},"Fraction, Fraction":(h,d)=>h.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:o,Ss:u}))}),uYe=Y(NP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(NP,{"number, number":function(i,a){return i>=a||zi(i,a,r.relTol,r.absTol)}})}),OX="deepEqual",cYe=["typed","equal"],fYe=Y(OX,cYe,t=>{var{typed:e,equal:r}=t;return e(OX,{"any, any":function(a,s){return n(a.valueOf(),s.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!n(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:r(i,a)}}),PP="unequal",hYe=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],dYe=Y(PP,hYe,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=za({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=yi({typed:e,DenseMatrix:a}),f=Mr({typed:e,matrix:i,concat:s});return e(PP,pYe({typed:e,equalScalar:n}),f({elop:h,SS:u,DS:l,Ss:c}));function h(d,p){return!n(d,p)}}),pYe=Y(PP,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(PP,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!r(i,a)}})}),kX="partitionSelect",mYe=["typed","isNumeric","isNaN","compare"],gYe=Y(kX,mYe,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:i}=t,a=i,s=(u,c)=>-i(u,c);return e(kX,{"Array | Matrix, number":function(c,f){return o(c,f,a)},"Array | Matrix, number, string":function(c,f,h){if(h==="asc")return o(c,f,a);if(h==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,f){if(!nt(c)||c<0)throw new Error("k must be a non-negative integer");if(ft(u)){var h=u.size();if(h.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var h=0;h<u.length;h++)if(r(u[h])&&n(u[h]))return u[h];for(var d=0,p=u.length-1;d<p;){for(var m=d,v=p,y=u[Math.floor(Math.random()*(p-d+1))+d];m<v;)if(f(u[m],y)>=0){var w=u[v];u[v]=u[m],u[m]=w,--v}else++m;f(u[m],y)>0&&--m,c<=m?p=m:d=m+1}return u[c]}}),RX="sort",vYe=["typed","matrix","compare","compareNatural"],yYe=Y(RX,vYe,t=>{var{typed:e,matrix:r,compare:n,compareNatural:i}=t,a=n,s=(c,f)=>-n(c,f);return e(RX,{Array:function(f){return l(f),f.sort(a)},Matrix:function(f){return u(f),r(f.toArray().sort(a),f.storage())},"Array, function":function(f,h){return l(f),f.sort(h)},"Matrix, function":function(f,h){return u(f),r(f.toArray().sort(h),f.storage())},"Array, string":function(f,h){return l(f),f.sort(o(h))},"Matrix, string":function(f,h){return u(f),r(f.toArray().sort(o(h)),f.storage())}});function o(c){if(c==="asc")return a;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(xt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),FX="max",bYe=["typed","config","numeric","larger","isNaN"],cpe=Y(FX,bYe,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t;return e(FX,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return hO(u,c.valueOf(),s)},"...":function(u){if(Q1(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function s(l,u){try{return i(l,u)?l:u}catch(c){throw fs(c,"max",u)}}function o(l){var u;if(Tp(l,function(c){try{(a(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw fs(f,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,Up(u,r))),u}}),LX="min",wYe=["typed","config","numeric","smaller","isNaN"],fpe=Y(LX,wYe,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t;return e(LX,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return hO(u,c.valueOf(),s)},"...":function(u){if(Q1(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function s(l,u){try{return i(l,u)?l:u}catch(c){throw fs(c,"min",u)}}function o(l){var u;if(Tp(l,function(c){try{(a(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw fs(f,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,Up(u,r))),u}}),xYe="ImmutableDenseMatrix",AYe=["smaller","DenseMatrix"],_Ye=Y(xYe,AYe,t=>{var{smaller:e,DenseMatrix:r}=t;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Nn(a))throw new Error("Invalid datatype: "+a);if(ft(i)||gr(i)){var s=new r(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&gr(i.data)&&gr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+yr(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=r.prototype.subset.call(this,i);return ft(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:wt(this._data),size:wt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),EYe="Index",SYe=["ImmutableDenseMatrix","getMatrixDataType"],CYe=Y(EYe,SYe,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,s=arguments.length;a<s;a++){var o=a<0||arguments.length<=a?void 0:arguments[a],l=gr(o),u=ft(o),c=typeof o,f=null;if(nV(o))this._dimensions.push(o),this._isScalar=!1;else if(l||u){var h=void 0;this._isScalar=!1,r(o)==="boolean"?(l&&(h=i(BX(o).valueOf())),u&&(h=i(BX(o._data).valueOf())),f=o.valueOf().length):h=i(o.valueOf()),this._dimensions.push(h)}else if(c==="number")this._dimensions.push(o);else if(c==="bigint")this._dimensions.push(Number(o));else if(c==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(!ot(a[s])||!nt(a[s]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=a,l._size=[a.length],l}return n.prototype.clone=function(){var a=new n;return a._dimensions=wt(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Nn(l)||ot(l)?1:l.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Nn(l)||ot(l)?l:l.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Nn(l)||ot(l)?l:l.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){var s;return ot(a)&&(s=this._dimensions[a])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&Nn(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a.push(Nn(l)||ot(l)?l:l.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];Nn(l)?a.push(JSON.stringify(l)):a.push(l.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function BX(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var TYe="FibonacciHeap",DYe=["smaller","larger"],NYe=Y(TYe,DYe,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var h={key:c,value:f,degree:0};if(this._minimum){var d=this._minimum;h.left=d,h.right=d.right,d.right=h,h.right.left=h,e(c,d.key)&&(this._minimum=h)}else h.left=h,h.right=h,this._minimum=h;return this._size++,h},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,h=c.degree,d=c.child;h>0;){var p=d.right;d.left.right=d.right,d.right.left=d.left,d.left=f,d.right=f.right,f.right=d,d.right.left=d,d.parent=null,d=p,h--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,h){f.key=h;var d=f.parent;return d&&e(f.key,d.key)&&(s(c,f,d),o(c,d)),e(f.key,c.key)&&(c=f),c}function s(c,f,h){f.left.right=f.right,f.right.left=f.left,h.degree--,h.child===f&&(h.child=f.right),h.degree===0&&(h.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var h=f.parent;h&&(f.mark?(s(c,f,h),o(h)):f.mark=!0)}var l=function(f,h){f.left.right=f.right,f.right.left=f.left,f.parent=h,h.child?(f.left=h.child,f.right=h.child.right,h.child.right=f,f.right.left=f):(h.child=f,f.right=f,f.left=f),h.degree++,f.mark=!1};function u(c,f){var h=Math.floor(Math.log(f)*n)+1,d=new Array(h),p=0,m=c;if(m)for(p++,m=m.right;m!==c;)p++,m=m.right;for(var v;p>0;){for(var y=m.degree,w=m.right;v=d[y],!!v;){if(r(m.key,v.key)){var b=v;v=m,m=b}l(v,m),d[y]=null,y++}d[y]=m,m=w,p--}c=null;for(var A=0;A<h;A++)v=d[A],v&&(c?(v.left.right=v.right,v.right.left=v.left,v.left=c,v.right=c.right,c.right=v,v.right.left=v,e(v.key,c.key)&&(c=v)):c=v);return c}return i},{isClass:!0}),PYe="Spa",MYe=["addScalar","equalScalar","FibonacciHeap"],IYe=Y(PYe,MYe,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=a&&(r(f.value,0)||o(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var h=0;h<c.length;h++){var d=c[h];f=l.insert(d.key,d.value),u[f.key]=f}},i.prototype.swap=function(a,s){var o=this._values[a],l=this._values[s];if(!o&&l)o=this._heap.insert(a,l.value),this._heap.remove(l),this._values[a]=o,this._values[s]=void 0;else if(o&&!l)l=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=l,this._values[a]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0});function OYe(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),a=0,s=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,r===u)){if(!e){a=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(l){var u=i[l],c=++a;if(n[c]=l,i[l]=c,!u)return++e,e<=t?void 0:(l=n[r],s(l),l);if(delete n[u],r===u)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:s,clear:function(){e=a=0,r=1,n=Object.create(null),i=Object.create(null)}}}function eC(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:OYe(r||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var o=t.apply(t,i);return n.cache.values.set(s,o),n.cache.values.delete(n.cache.lru.hit(s)),o}}var kYe=eC(function(t){return new t(1).exp()},{hasher:mO}),RYe=eC(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:mO}),gV=eC(function(t){return t.acos(-1)},{hasher:mO}),FYe=eC(function(t){return gV(t).times(2)},{hasher:mO});function mO(t){return t[0].precision}function $X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$X(Object(r),!0).forEach(function(n){Jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$X(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var LYe="Unit",BYe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],$Ye=Y(LYe,BYe,t=>{var{on:e,config:r,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:s,pow:o,abs:l,fix:u,round:c,equal:f,isNumeric:h,format:d,number:p,Complex:m,BigNumber:v,Fraction:y}=t,w=p,b=!1,A=!0;function x(ee,ce){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(ee==null||h(ee)||jf(ee)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=b,this.skipAutomaticSimplification=A,ce===void 0)this.units=[],this.dimensions=ie.map(Z=>0);else if(typeof ce=="string"){var G=x.parse(ce);this.units=G.units,this.dimensions=G.dimensions}else if(po(ce)&&ce.value===null)this.fixPrefix=ce.fixPrefix,this.skipAutomaticSimplification=ce.skipAutomaticSimplification,this.dimensions=ce.dimensions.slice(0),this.units=ce.units.map(Z=>Bn({},Z));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(ee)}Object.defineProperty(x,"name",{value:"Unit"}),x.prototype.constructor=x,x.prototype.type="Unit",x.prototype.isUnit=!0;var _,S,E;function T(){for(;E===" "||E==="	";)P()}function D(ee){return ee>="0"&&ee<="9"||ee==="."}function N(ee){return ee>="0"&&ee<="9"}function P(){S++,E=_.charAt(S)}function M(ee){S=ee,E=_.charAt(S)}function j(){var ee="",ce=S;if(E==="+"?P():E==="-"&&(ee+=E,P()),!D(E))return M(ce),null;if(E==="."){if(ee+=E,P(),!N(E))return M(ce),null}else{for(;N(E);)ee+=E,P();E==="."&&(ee+=E,P())}for(;N(E);)ee+=E,P();if(E==="E"||E==="e"){var G="",Z=S;if(G+=E,P(),(E==="+"||E==="-")&&(G+=E,P()),!N(E))return M(Z),ee;for(ee=ee+G;N(E);)ee+=E,P()}return ee}function K(){for(var ee="";N(E)||x.isValidAlpha(E);)ee+=E,P();var ce=ee.charAt(0);return x.isValidAlpha(ce)?ee:null}function k(ee){return E===ee?(P(),ee):null}x.parse=function(ee,ce){if(ce=ce||{},_=ee,S=-1,E="",typeof _!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var G=new x;G.units=[];var Z=1,oe=!1;P(),T();var he=j(),ve=null;if(he){if(r.number==="BigNumber")ve=new v(he);else if(r.number==="Fraction")try{ve=new y(he)}catch{ve=parseFloat(he)}else ve=parseFloat(he);T(),k("*")?(Z=1,oe=!0):k("/")&&(Z=-1,oe=!0)}for(var ge=[],Pe=1;;){for(T();E==="(";)ge.push(Z),Pe*=Z,Z=1,P(),T();var Se=void 0;if(E){var $e=E;if(Se=K(),Se===null)throw new SyntaxError('Unexpected "'+$e+'" in "'+_+'" at index '+S.toString())}else break;var Ce=V(Se);if(Ce===null)throw new SyntaxError('Unit "'+Se+'" not found.');var rt=Z*Pe;if(T(),k("^")){T();var Mt=j();if(Mt===null)throw new SyntaxError('In "'+ee+'", "^" must be followed by a floating-point number');rt*=Mt}G.units.push({unit:Ce.unit,prefix:Ce.prefix,power:rt});for(var Wt=0;Wt<ie.length;Wt++)G.dimensions[Wt]+=(Ce.unit.dimensions[Wt]||0)*rt;for(T();E===")";){if(ge.length===0)throw new SyntaxError('Unmatched ")" in "'+_+'" at index '+S.toString());Pe/=ge.pop(),P(),T()}if(oe=!1,k("*")?(Z=1,oe=!0):k("/")?(Z=-1,oe=!0):Z=1,Ce.unit.base){var ht=Ce.unit.base.key;Q.auto[ht]={unit:Ce.unit,prefix:Ce.prefix}}}if(T(),E)throw new SyntaxError('Could not parse: "'+ee+'"');if(oe)throw new SyntaxError('Trailing characters: "'+ee+'"');if(ge.length!==0)throw new SyntaxError('Unmatched "(" in "'+_+'"');if(G.units.length===0&&!ce.allowNoUnits)throw new SyntaxError('"'+ee+'" contains no units');return G.value=ve!==void 0?G._normalize(ve):null,G},x.prototype.clone=function(){var ee=new x;ee.fixPrefix=this.fixPrefix,ee.skipAutomaticSimplification=this.skipAutomaticSimplification,ee.value=wt(this.value),ee.dimensions=this.dimensions.slice(0),ee.units=[];for(var ce=0;ce<this.units.length;ce++){ee.units[ce]={};for(var G in this.units[ce])Je(this.units[ce],G)&&(ee.units[ce][G]=this.units[ce][G])}return ee},x.prototype.valueType=function(){return yr(this.value)},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(ee){if(ee==null||this.units.length===0)return ee;for(var ce=ee,G=x._getNumberConverter(yr(ee)),Z=0;Z<this.units.length;Z++){var oe=G(this.units[Z].unit.value),he=G(this.units[Z].prefix.value),ve=G(this.units[Z].power);ce=a(ce,o(a(oe,he),ve))}return ce},x.prototype._denormalize=function(ee,ce){if(ee==null||this.units.length===0)return ee;for(var G=ee,Z=x._getNumberConverter(yr(ee)),oe=0;oe<this.units.length;oe++){var he=Z(this.units[oe].unit.value),ve=Z(this.units[oe].prefix.value),ge=Z(this.units[oe].power);G=s(G,o(a(he,ve),ge))}return G};var V=eC(ee=>{if(Je(z,ee)){var ce=z[ee],G=ce.prefixes[""];return{unit:ce,prefix:G}}for(var Z in z)if(Je(z,Z)&&j7e(ee,Z)){var oe=z[Z],he=ee.length-Z.length,ve=ee.substring(0,he),ge=Je(oe.prefixes,ve)?oe.prefixes[ve]:void 0;if(ge!==void 0)return{unit:oe,prefix:ge}}return null},{hasher:ee=>ee[0],limit:100});x.isValuelessUnit=function(ee){return V(ee)!==null},x.prototype.hasBase=function(ee){if(typeof ee=="string"&&(ee=X[ee]),!ee)return!1;for(var ce=0;ce<ie.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(ee.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(ee){for(var ce=0;ce<ie.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(ee.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equals=function(ee){return this.equalBase(ee)&&f(this.value,ee.value)},x.prototype.multiply=function(ee){for(var ce=this.clone(),G=po(ee)?ee:new x(ee),Z=0;Z<ie.length;Z++)ce.dimensions[Z]=(this.dimensions[Z]||0)+(G.dimensions[Z]||0);for(var oe=0;oe<G.units.length;oe++){var he=MR({},G.units[oe]);ce.units.push(he)}if(this.value!==null||G.value!==null){var ve=this.value===null?this._normalize(H(G.value)):this.value,ge=G.value===null?G._normalize(H(this.value)):G.value;ce.value=a(ve,ge)}else ce.value=null;return po(ee)&&(ce.skipAutomaticSimplification=!1),q(ce)},x.prototype.divideInto=function(ee){return new x(ee).divide(this)},x.prototype.divide=function(ee){for(var ce=this.clone(),G=po(ee)?ee:new x(ee),Z=0;Z<ie.length;Z++)ce.dimensions[Z]=(this.dimensions[Z]||0)-(G.dimensions[Z]||0);for(var oe=0;oe<G.units.length;oe++){var he=MR(MR({},G.units[oe]),{},{power:-G.units[oe].power});ce.units.push(he)}if(this.value!==null||G.value!==null){var ve=this.value===null?this._normalize(H(G.value)):this.value,ge=G.value===null?G._normalize(H(this.value)):G.value;ce.value=s(ve,ge)}else ce.value=null;return po(ee)&&(ce.skipAutomaticSimplification=!1),q(ce)},x.prototype.pow=function(ee){for(var ce=this.clone(),G=0;G<ie.length;G++)ce.dimensions[G]=(this.dimensions[G]||0)*ee;for(var Z=0;Z<ce.units.length;Z++)ce.units[Z].power*=ee;return ce.value!==null?ce.value=o(ce.value,ee):ce.value=null,ce.skipAutomaticSimplification=!1,q(ce)};function q(ee){return ee.equalBase(X.NONE)&&ee.value!==null&&!r.predictable?ee.value:ee}function H(ee){var ce=x._getNumberConverter(yr(ee));return ce(1)}x.prototype.abs=function(){var ee=this.clone();if(ee.value!==null)if(ee._isDerived()||ee.units.length===0||ee.units[0].unit.offset===0)ee.value=l(ee.value);else{var ce=ee._numberConverter(),G=ce(ee.units[0].unit.value),Z=ce(ee.units[0].unit.offset),oe=a(G,Z);ee.value=i(l(n(ee.value,oe)),oe)}for(var he in ee.units)(ee.units[he].unit.name==="VA"||ee.units[he].unit.name==="VAR")&&(ee.units[he].unit=z.W);return ee},x.prototype.to=function(ee){var ce=this.value===null?this._normalize(1):this.value,G;if(typeof ee=="string")G=x.parse(ee);else if(po(ee))G=ee.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(G))throw new Error("Units do not match ('".concat(G.toString(),"' != '").concat(this.toString(),"')"));if(G.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||G.units.length===0||this.units[0].unit.offset===G.units[0].unit.offset)G.value=wt(ce);else{var Z=x._getNumberConverter(yr(ce)),oe=this.units[0].unit.value,he=this.units[0].unit.offset,ve=a(oe,he),ge=G.units[0].unit.value,Pe=G.units[0].unit.offset,Se=a(ge,Pe);G.value=n(ce,Z(i(ve,Se)))}return G.fixPrefix=!0,G.skipAutomaticSimplification=!0,G},x.prototype.toNumber=function(ee){return w(this.toNumeric(ee))},x.prototype.toNumeric=function(ee){var ce;return ee?ce=this.to(ee):ce=this.clone(),ce._isDerived()||ce.units.length===0?ce._denormalize(ce.value):ce._denormalize(ce.value,ce.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},x.fromJSON=function(ee){var ce,G,Z,oe=new x(ee.value,(ce=ee.unit)!==null&&ce!==void 0?ce:void 0);return oe.fixPrefix=(G=ee.fixPrefix)!==null&&G!==void 0?G:b,oe.skipAutomaticSimplification=(Z=ee.skipSimp)!==null&&Z!==void 0?Z:A,oe},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var ee=this.clone(),ce=[],G;for(var Z in ye)if(Je(ye,Z)&&ee.hasBase(X[Z])){G=Z;break}if(G==="NONE")ee.units=[];else{var oe;if(G&&Je(ye,G)&&(oe=ye[G]),oe)ee.units=[{unit:oe.unit,prefix:oe.prefix,power:1}];else{for(var he=!1,ve=0;ve<ie.length;ve++){var ge=ie[ve];Math.abs(ee.dimensions[ve]||0)>1e-12&&(Je(ye,ge)?ce.push({unit:ye[ge].unit,prefix:ye[ge].prefix,power:ee.dimensions[ve]||0}):he=!0)}ce.length<ee.units.length&&!he&&(ee.units=ce)}}return ee},x.prototype.toSI=function(){for(var ee=this.clone(),ce=[],G=0;G<ie.length;G++){var Z=ie[G];if(Math.abs(ee.dimensions[G]||0)>1e-12)if(Je(Q.si,Z))ce.push({unit:Q.si[Z].unit,prefix:Q.si[Z].prefix,power:ee.dimensions[G]||0});else throw new Error("Cannot express custom unit "+Z+" in SI units")}return ee.units=ce,ee.fixPrefix=!0,ee.skipAutomaticSimplification=!0,this.value!==null?(ee.value=null,this.to(ee)):ee},x.prototype.formatUnits=function(){for(var ee="",ce="",G=0,Z=0,oe=0;oe<this.units.length;oe++)this.units[oe].power>0?(G++,ee+=" "+this.units[oe].prefix.name+this.units[oe].unit.name,Math.abs(this.units[oe].power-1)>1e-15&&(ee+="^"+this.units[oe].power)):this.units[oe].power<0&&Z++;if(Z>0)for(var he=0;he<this.units.length;he++)this.units[he].power<0&&(G>0?(ce+=" "+this.units[he].prefix.name+this.units[he].unit.name,Math.abs(this.units[he].power+1)>1e-15&&(ce+="^"+-this.units[he].power)):(ce+=" "+this.units[he].prefix.name+this.units[he].unit.name,ce+="^"+this.units[he].power));ee=ee.substr(1),ce=ce.substr(1),G>1&&Z>0&&(ee="("+ee+")"),Z>1&&G>0&&(ce="("+ce+")");var ve=ee;return G>0&&Z>0&&(ve+=" / "),ve+=ce,ve},x.prototype.toBest=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ee&&!Array.isArray(ee))throw new Error("Invalid unit type. Expected string or Unit.");var G=this.units[0].unit.prefixes;if(ee&&ee.length>0){var Z=ee.map(ve=>{var ge=null;if(typeof ve=="string"){if(ge=x.parse(ve),!ge)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!po(ve))throw new Error("Invalid unit type. Expected compatible string or Unit.");ge===null&&(ge=ve.clone());try{return this.to(ge.formatUnits()),ge}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),oe=Z.map(ve=>ve.units[0].prefix);this.units[0].unit.prefixes=oe.reduce((ve,ge)=>(ve[ge.name]=ge,ve),{}),this.units[0].prefix=oe[0]}var he=te(this,ce).simp;return this.units[0].unit.prefixes=G,he.fixPrefix=!0,he},x.prototype.format=function(ee){var{simp:ce,valueStr:G,unitStr:Z}=te(this,ee),oe=G;return ce.value&&jf(ce.value)&&(oe="("+oe+")"),Z.length>0&&oe.length>0&&(oe+=" "),oe+=Z,oe};function te(ee){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=ee.skipAutomaticSimplification||ee.value===null?ee.clone():ee.simplify();ue(G),re(G,ce.offset);var Z=G._denormalize(G.value),oe=G.value!==null?d(Z,ce||{}):"",he=G.formatUnits();return{simp:G,valueStr:oe,unitStr:he}}function ue(ee){var ce=!1;typeof ee.value<"u"&&ee.value!==null&&jf(ee.value)&&(ce=Math.abs(ee.value.re)<1e-14);for(var G in ee.units)Je(ee.units,G)&&ee.units[G].unit&&(ee.units[G].unit.name==="VA"&&ce?ee.units[G].unit=z.VAR:ee.units[G].unit.name==="VAR"&&!ce&&(ee.units[G].unit=z.VA))}function re(ee,ce){ee.units.length===1&&!ee.fixPrefix&&Math.abs(ee.units[0].power-Math.round(ee.units[0].power))<1e-14&&(ee.units[0].prefix=ee._bestPrefix(ce))}x.prototype._bestPrefix=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ce=this.value!==null?l(this.value):0,G=l(this.units[0].unit.value),Z=this.units[0].prefix;if(ce===0)return Z;var oe=this.units[0].power,he=Math.log(ce/Math.pow(Z.value*G,oe))/Math.LN10-ee;if(he>-2.200001&&he<1.800001)return Z;he=Math.abs(he);var ve=this.units[0].unit.prefixes;for(var ge in ve)if(Je(ve,ge)){var Pe=ve[ge];if(Pe.scientific){var Se=Math.abs(Math.log(ce/Math.pow(Pe.value*G,oe))/Math.LN10-ee);(Se<he||Se===he&&Pe.name.length<Z.name.length)&&(Z=Pe,he=Se)}}return Z},x.prototype.splitUnit=function(ee){for(var ce=this.clone(),G=[],Z=0;Z<ee.length&&(ce=ce.to(ee[Z]),Z!==ee.length-1);Z++){var oe=ce.toNumeric(),he=c(oe),ve=void 0,ge=f(he,oe);ge?ve=he:ve=u(ce.toNumeric());var Pe=new x(ve,ee[Z].toString());G.push(Pe),ce=i(ce,Pe)}for(var Se=0,$e=0;$e<G.length;$e++)Se=n(Se,G[$e].value);return f(Se,this.value)&&(ce.value=0),G.push(ce),G};var L={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};L.SHORTLONG=Bn({},L.SHORT,L.LONG),L.BINARY_SHORT=Bn({},L.BINARY_SHORT_SI,L.BINARY_SHORT_IEC),L.BINARY_LONG=Bn({},L.BINARY_LONG_SI,L.BINARY_LONG_IEC);var ie=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],X={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var pe in X)Je(X,pe)&&(X[pe].key=pe);var de={},ae={name:"",base:de,value:1,offset:0,dimensions:ie.map(ee=>0)},z={meter:{name:"meter",base:X.LENGTH,prefixes:L.LONG,value:1,offset:0},inch:{name:"inch",base:X.LENGTH,prefixes:L.NONE,value:.0254,offset:0},foot:{name:"foot",base:X.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yard:{name:"yard",base:X.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mile:{name:"mile",base:X.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},link:{name:"link",base:X.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rod:{name:"rod",base:X.LENGTH,prefixes:L.NONE,value:5.0292,offset:0},chain:{name:"chain",base:X.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:X.LENGTH,prefixes:L.NONE,value:1e-10,offset:0},m:{name:"m",base:X.LENGTH,prefixes:L.SHORT,value:1,offset:0},in:{name:"in",base:X.LENGTH,prefixes:L.NONE,value:.0254,offset:0},ft:{name:"ft",base:X.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yd:{name:"yd",base:X.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mi:{name:"mi",base:X.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},li:{name:"li",base:X.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rd:{name:"rd",base:X.LENGTH,prefixes:L.NONE,value:5.02921,offset:0},ch:{name:"ch",base:X.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},mil:{name:"mil",base:X.LENGTH,prefixes:L.NONE,value:254e-7,offset:0},m2:{name:"m2",base:X.SURFACE,prefixes:L.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:X.SURFACE,prefixes:L.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:X.SURFACE,prefixes:L.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:X.SURFACE,prefixes:L.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:X.SURFACE,prefixes:L.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:X.SURFACE,prefixes:L.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:X.SURFACE,prefixes:L.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:X.SURFACE,prefixes:L.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:X.SURFACE,prefixes:L.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:X.SURFACE,prefixes:L.NONE,value:1e4,offset:0},m3:{name:"m3",base:X.VOLUME,prefixes:L.CUBIC,value:1,offset:0},L:{name:"L",base:X.VOLUME,prefixes:L.SHORT,value:.001,offset:0},l:{name:"l",base:X.VOLUME,prefixes:L.SHORT,value:.001,offset:0},litre:{name:"litre",base:X.VOLUME,prefixes:L.LONG,value:.001,offset:0},cuin:{name:"cuin",base:X.VOLUME,prefixes:L.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:X.VOLUME,prefixes:L.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:X.VOLUME,prefixes:L.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:X.VOLUME,prefixes:L.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:X.VOLUME,prefixes:L.NONE,value:15e-6,offset:0},drop:{name:"drop",base:X.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:X.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},minim:{name:"minim",base:X.VOLUME,prefixes:L.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:X.VOLUME,prefixes:L.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:X.VOLUME,prefixes:L.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:X.VOLUME,prefixes:L.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:X.VOLUME,prefixes:L.NONE,value:1e-6,offset:0},cup:{name:"cup",base:X.VOLUME,prefixes:L.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:X.VOLUME,prefixes:L.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:X.VOLUME,prefixes:L.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:X.VOLUME,prefixes:L.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:X.VOLUME,prefixes:L.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:X.VOLUME,prefixes:L.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:X.VOLUME,prefixes:L.NONE,value:.238480942392,offset:0},g:{name:"g",base:X.MASS,prefixes:L.SHORT,value:.001,offset:0},gram:{name:"gram",base:X.MASS,prefixes:L.LONG,value:.001,offset:0},ton:{name:"ton",base:X.MASS,prefixes:L.SHORT,value:907.18474,offset:0},t:{name:"t",base:X.MASS,prefixes:L.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:X.MASS,prefixes:L.LONG,value:1e3,offset:0},grain:{name:"grain",base:X.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:X.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:X.MASS,prefixes:L.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:X.MASS,prefixes:L.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:X.MASS,prefixes:L.NONE,value:45.359237,offset:0},stick:{name:"stick",base:X.MASS,prefixes:L.NONE,value:.115,offset:0},stone:{name:"stone",base:X.MASS,prefixes:L.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:X.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:X.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:X.MASS,prefixes:L.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:X.MASS,prefixes:L.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:X.MASS,prefixes:L.NONE,value:45.359237,offset:0},s:{name:"s",base:X.TIME,prefixes:L.SHORT,value:1,offset:0},min:{name:"min",base:X.TIME,prefixes:L.NONE,value:60,offset:0},h:{name:"h",base:X.TIME,prefixes:L.NONE,value:3600,offset:0},second:{name:"second",base:X.TIME,prefixes:L.LONG,value:1,offset:0},sec:{name:"sec",base:X.TIME,prefixes:L.LONG,value:1,offset:0},minute:{name:"minute",base:X.TIME,prefixes:L.NONE,value:60,offset:0},hour:{name:"hour",base:X.TIME,prefixes:L.NONE,value:3600,offset:0},day:{name:"day",base:X.TIME,prefixes:L.NONE,value:86400,offset:0},week:{name:"week",base:X.TIME,prefixes:L.NONE,value:7*86400,offset:0},month:{name:"month",base:X.TIME,prefixes:L.NONE,value:2629800,offset:0},year:{name:"year",base:X.TIME,prefixes:L.NONE,value:31557600,offset:0},decade:{name:"decade",base:X.TIME,prefixes:L.NONE,value:315576e3,offset:0},century:{name:"century",base:X.TIME,prefixes:L.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:X.TIME,prefixes:L.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:X.FREQUENCY,prefixes:L.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:X.FREQUENCY,prefixes:L.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:X.ANGLE,prefixes:L.SHORT,value:1,offset:0},radian:{name:"radian",base:X.ANGLE,prefixes:L.LONG,value:1,offset:0},deg:{name:"deg",base:X.ANGLE,prefixes:L.SHORT,value:null,offset:0},degree:{name:"degree",base:X.ANGLE,prefixes:L.LONG,value:null,offset:0},grad:{name:"grad",base:X.ANGLE,prefixes:L.SHORT,value:null,offset:0},gradian:{name:"gradian",base:X.ANGLE,prefixes:L.LONG,value:null,offset:0},cycle:{name:"cycle",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},A:{name:"A",base:X.CURRENT,prefixes:L.SHORT,value:1,offset:0},ampere:{name:"ampere",base:X.CURRENT,prefixes:L.LONG,value:1,offset:0},K:{name:"K",base:X.TEMPERATURE,prefixes:L.SHORT,value:1,offset:0},degC:{name:"degC",base:X.TEMPERATURE,prefixes:L.SHORT,value:1,offset:273.15},degF:{name:"degF",base:X.TEMPERATURE,prefixes:L.SHORT,value:new y(5,9),offset:459.67},degR:{name:"degR",base:X.TEMPERATURE,prefixes:L.SHORT,value:new y(5,9),offset:0},kelvin:{name:"kelvin",base:X.TEMPERATURE,prefixes:L.LONG,value:1,offset:0},celsius:{name:"celsius",base:X.TEMPERATURE,prefixes:L.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:X.TEMPERATURE,prefixes:L.LONG,value:new y(5,9),offset:459.67},rankine:{name:"rankine",base:X.TEMPERATURE,prefixes:L.LONG,value:new y(5,9),offset:0},mol:{name:"mol",base:X.AMOUNT_OF_SUBSTANCE,prefixes:L.SHORT,value:1,offset:0},mole:{name:"mole",base:X.AMOUNT_OF_SUBSTANCE,prefixes:L.LONG,value:1,offset:0},cd:{name:"cd",base:X.LUMINOUS_INTENSITY,prefixes:L.SHORT,value:1,offset:0},candela:{name:"candela",base:X.LUMINOUS_INTENSITY,prefixes:L.LONG,value:1,offset:0},N:{name:"N",base:X.FORCE,prefixes:L.SHORT,value:1,offset:0},newton:{name:"newton",base:X.FORCE,prefixes:L.LONG,value:1,offset:0},dyn:{name:"dyn",base:X.FORCE,prefixes:L.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:X.FORCE,prefixes:L.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:X.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:X.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:X.FORCE,prefixes:L.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:X.FORCE,prefixes:L.NONE,value:9.80665,offset:0},J:{name:"J",base:X.ENERGY,prefixes:L.SHORT,value:1,offset:0},joule:{name:"joule",base:X.ENERGY,prefixes:L.LONG,value:1,offset:0},erg:{name:"erg",base:X.ENERGY,prefixes:L.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:X.ENERGY,prefixes:L.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:X.ENERGY,prefixes:L.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:X.ENERGY,prefixes:L.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:X.ENERGY,prefixes:L.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:X.POWER,prefixes:L.SHORT,value:1,offset:0},watt:{name:"watt",base:X.POWER,prefixes:L.LONG,value:1,offset:0},hp:{name:"hp",base:X.POWER,prefixes:L.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:X.POWER,prefixes:L.SHORT,value:m.I,offset:0},VA:{name:"VA",base:X.POWER,prefixes:L.SHORT,value:1,offset:0},Pa:{name:"Pa",base:X.PRESSURE,prefixes:L.SHORT,value:1,offset:0},psi:{name:"psi",base:X.PRESSURE,prefixes:L.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:X.PRESSURE,prefixes:L.NONE,value:101325,offset:0},bar:{name:"bar",base:X.PRESSURE,prefixes:L.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:X.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:X.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:X.PRESSURE,prefixes:L.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:X.PRESSURE,prefixes:L.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:X.ELECTRIC_CHARGE,prefixes:L.LONG,value:1,offset:0},C:{name:"C",base:X.ELECTRIC_CHARGE,prefixes:L.SHORT,value:1,offset:0},farad:{name:"farad",base:X.ELECTRIC_CAPACITANCE,prefixes:L.LONG,value:1,offset:0},F:{name:"F",base:X.ELECTRIC_CAPACITANCE,prefixes:L.SHORT,value:1,offset:0},volt:{name:"volt",base:X.ELECTRIC_POTENTIAL,prefixes:L.LONG,value:1,offset:0},V:{name:"V",base:X.ELECTRIC_POTENTIAL,prefixes:L.SHORT,value:1,offset:0},ohm:{name:"ohm",base:X.ELECTRIC_RESISTANCE,prefixes:L.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:X.ELECTRIC_INDUCTANCE,prefixes:L.LONG,value:1,offset:0},H:{name:"H",base:X.ELECTRIC_INDUCTANCE,prefixes:L.SHORT,value:1,offset:0},siemens:{name:"siemens",base:X.ELECTRIC_CONDUCTANCE,prefixes:L.LONG,value:1,offset:0},S:{name:"S",base:X.ELECTRIC_CONDUCTANCE,prefixes:L.SHORT,value:1,offset:0},weber:{name:"weber",base:X.MAGNETIC_FLUX,prefixes:L.LONG,value:1,offset:0},Wb:{name:"Wb",base:X.MAGNETIC_FLUX,prefixes:L.SHORT,value:1,offset:0},tesla:{name:"tesla",base:X.MAGNETIC_FLUX_DENSITY,prefixes:L.LONG,value:1,offset:0},T:{name:"T",base:X.MAGNETIC_FLUX_DENSITY,prefixes:L.SHORT,value:1,offset:0},b:{name:"b",base:X.BIT,prefixes:L.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:X.BIT,prefixes:L.BINARY_LONG,value:1,offset:0},B:{name:"B",base:X.BIT,prefixes:L.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:X.BIT,prefixes:L.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe(ee){if(ee.number==="BigNumber"){var ce=gV(v);z.rad.value=new v(1),z.deg.value=ce.div(180),z.grad.value=ce.div(200),z.cycle.value=ce.times(2),z.arcsec.value=ce.div(648e3),z.arcmin.value=ce.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=Math.PI*2,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}fe(r),e&&e("config",function(ee,ce){ee.number!==ce.number&&fe(ee)});var Q={si:{NONE:{unit:ae,prefix:L.NONE[""]},LENGTH:{unit:z.m,prefix:L.SHORT[""]},MASS:{unit:z.g,prefix:L.SHORT.k},TIME:{unit:z.s,prefix:L.SHORT[""]},CURRENT:{unit:z.A,prefix:L.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:L.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:L.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:L.SHORT[""]},ANGLE:{unit:z.rad,prefix:L.SHORT[""]},BIT:{unit:z.bits,prefix:L.SHORT[""]},FORCE:{unit:z.N,prefix:L.SHORT[""]},ENERGY:{unit:z.J,prefix:L.SHORT[""]},POWER:{unit:z.W,prefix:L.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:L.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:L.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:L.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:L.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:L.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:L.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:L.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:L.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:L.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:L.SHORT[""]}}};Q.cgs=JSON.parse(JSON.stringify(Q.si)),Q.cgs.LENGTH={unit:z.m,prefix:L.SHORT.c},Q.cgs.MASS={unit:z.g,prefix:L.SHORT[""]},Q.cgs.FORCE={unit:z.dyn,prefix:L.SHORT[""]},Q.cgs.ENERGY={unit:z.erg,prefix:L.NONE[""]},Q.us=JSON.parse(JSON.stringify(Q.si)),Q.us.LENGTH={unit:z.ft,prefix:L.NONE[""]},Q.us.MASS={unit:z.lbm,prefix:L.NONE[""]},Q.us.TEMPERATURE={unit:z.degF,prefix:L.NONE[""]},Q.us.FORCE={unit:z.lbf,prefix:L.NONE[""]},Q.us.ENERGY={unit:z.BTU,prefix:L.BTU[""]},Q.us.POWER={unit:z.hp,prefix:L.NONE[""]},Q.us.PRESSURE={unit:z.psi,prefix:L.NONE[""]},Q.auto=JSON.parse(JSON.stringify(Q.si));var ye=Q.auto;x.setUnitSystem=function(ee){if(Je(Q,ee))ye=Q[ee];else throw new Error("Unit system "+ee+" does not exist. Choices are: "+Object.keys(Q).join(", "))},x.getUnitSystem=function(){for(var ee in Q)if(Je(Q,ee)&&Q[ee]===ye)return ee},x.typeConverters={BigNumber:function(ce){return ce!=null&&ce.isFraction?new v(String(ce.n)).div(String(ce.d)).times(String(ce.s)):new v(ce+"")},Fraction:function(ce){return new y(ce)},Complex:function(ce){return ce},number:function(ce){return ce!=null&&ce.isFraction?p(ce):ce}},x.prototype._numberConverter=function(){var ee=x.typeConverters[this.valueType()];if(ee)return ee;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},x._getNumberConverter=function(ee){if(!x.typeConverters[ee])throw new TypeError('Unsupported type "'+ee+'"');return x.typeConverters[ee]};for(var me in z)if(Je(z,me)){var De=z[me];De.dimensions=De.base.dimensions}for(var Le in ne)if(Je(ne,Le)){var ze=z[ne[Le]],Be={};for(var Ve in ze)Je(ze,Ve)&&(Be[Ve]=ze[Ve]);Be.name=Le,z[Le]=Be}x.isValidAlpha=function(ce){return/^[a-zA-Z]$/.test(ce)};function Ke(ee){for(var ce=0;ce<ee.length;ce++){if(E=ee.charAt(ce),ce===0&&!x.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+ee+'"');if(ce>0&&!(x.isValidAlpha(E)||N(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+ee+'"')}}return x.createUnit=function(ee,ce){if(typeof ee!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ce&&ce.override){for(var G in ee)if(Je(ee,G)&&x.deleteUnit(G),ee[G].aliases)for(var Z=0;Z<ee[G].aliases.length;Z++)x.deleteUnit(ee[G].aliases[Z])}var oe;for(var he in ee)Je(ee,he)&&(oe=x.createUnitSingle(he,ee[he]));return oe},x.createUnitSingle=function(ee,ce){if((typeof ce>"u"||ce===null)&&(ce={}),typeof ee!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Je(z,ee))throw new Error('Cannot create unit "'+ee+'": a unit with that name already exists');Ke(ee);var G=null,Z=[],oe=0,he,ve,ge;if(ce&&ce.type==="Unit")G=ce.clone();else if(typeof ce=="string")ce!==""&&(he=ce);else if(typeof ce=="object")he=ce.definition,ve=ce.prefixes,oe=ce.offset,ge=ce.baseName,ce.aliases&&(Z=ce.aliases.valueOf());else throw new TypeError('Cannot create unit "'+ee+'" from "'+ce.toString()+'": expecting "string" or "Unit" or "Object"');if(Z){for(var Pe=0;Pe<Z.length;Pe++)if(Je(z,Z[Pe]))throw new Error('Cannot create alias "'+Z[Pe]+'": a unit with that name already exists')}if(he&&typeof he=="string"&&!G)try{G=x.parse(he,{allowNoUnits:!0})}catch(dt){throw dt.message='Could not create unit "'+ee+'" from "'+he+'": '+dt.message,dt}else he&&he.type==="Unit"&&(G=he.clone());Z=Z||[],oe=oe||0,ve&&ve.toUpperCase?ve=L[ve.toUpperCase()]||L.NONE:ve=L.NONE;var Se={};if(G){Se={name:ee,value:G.value,dimensions:G.dimensions.slice(0),prefixes:ve,offset:oe};var Mt=!1;for(var Wt in X)if(Je(X,Wt)){for(var ht=!0,_r=0;_r<ie.length;_r++)if(Math.abs((Se.dimensions[_r]||0)-(X[Wt].dimensions[_r]||0))>1e-12){ht=!1;break}if(ht){Mt=!0,Se.base=X[Wt];break}}if(!Mt){ge=ge||ee+"_STUFF";var B={dimensions:G.dimensions.slice(0)};B.key=ge,X[ge]=B,ye[ge]={unit:Se,prefix:L.NONE[""]},Se.base=X[ge]}}else{if(ge=ge||ee+"_STUFF",ie.indexOf(ge)>=0)throw new Error('Cannot create new base unit "'+ee+'": a base unit with that name already exists (and cannot be overridden)');ie.push(ge);for(var $e in X)Je(X,$e)&&(X[$e].dimensions[ie.length-1]=0);for(var Ce={dimensions:[]},rt=0;rt<ie.length;rt++)Ce.dimensions[rt]=0;Ce.dimensions[ie.length-1]=1,Ce.key=ge,X[ge]=Ce,Se={name:ee,value:1,dimensions:X[ge].dimensions.slice(0),prefixes:ve,offset:oe,base:X[ge]},ye[ge]={unit:Se,prefix:L.NONE[""]}}x.UNITS[ee]=Se;for(var le=0;le<Z.length;le++){var we=Z[le],Ie={};for(var qe in Se)Je(Se,qe)&&(Ie[qe]=Se[qe]);Ie.name=we,x.UNITS[we]=Ie}return delete V.cache,new x(null,ee)},x.deleteUnit=function(ee){delete x.UNITS[ee],delete V.cache},x.PREFIXES=L,x.BASE_DIMENSIONS=ie,x.BASE_UNITS=X,x.UNIT_SYSTEMS=Q,x.UNITS=z,x},{isClass:!0}),jX="unit",jYe=["typed","Unit"],VYe=Y(jX,jYe,t=>{var{typed:e,Unit:r}=t;return e(jX,{Unit:function(i){return i.clone()},string:function(i){return r.isValuelessUnit(i)?new r(null,i):r.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new r(i,a)},"number | BigNumber | Fraction":function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),VX="sparse",UYe=["typed","SparseMatrix"],zYe=Y(VX,UYe,t=>{var{typed:e,SparseMatrix:r}=t;return e(VX,{"":function(){return new r([])},string:function(i){return new r([],i)},"Array | Matrix":function(i){return new r(i)},"Array | Matrix, string":function(i,a){return new r(i,a)}})}),UX="createUnit",qYe=["typed","Unit"],HYe=Y(UX,qYe,t=>{var{typed:e,Unit:r}=t;return e(UX,{"Object, Object":function(i,a){return r.createUnit(i,a)},Object:function(i){return r.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,r.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,r.createUnit(s,{})},string:function(i){var a={};return a[i]={},r.createUnit(a,{})}})}),zX="acos",WYe=["typed","config","Complex"],GYe=Y(zX,WYe,t=>{var{typed:e,config:r,Complex:n}=t;return e(zX,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),qX="acosh",KYe=["typed","config","Complex"],XYe=Y(qX,KYe,t=>{var{typed:e,config:r,Complex:n}=t;return e(qX,{number:function(a){return a>=1||r.predictable?Ede(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),HX="acot",YYe=["typed","BigNumber"],QYe=Y(HX,YYe,t=>{var{typed:e,BigNumber:r}=t;return e(HX,{number:Sde,Complex:function(i){return i.acot()},BigNumber:function(i){return new r(1).div(i).atan()}})}),WX="acoth",ZYe=["typed","config","Complex","BigNumber"],JYe=Y(WX,ZYe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(WX,{number:function(s){return s>=1||s<=-1||r.predictable?Cde(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),GX="acsc",eQe=["typed","config","Complex","BigNumber"],tQe=Y(GX,eQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(GX,{number:function(s){return s<=-1||s>=1||r.predictable?Tde(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),KX="acsch",rQe=["typed","BigNumber"],nQe=Y(KX,rQe,t=>{var{typed:e,BigNumber:r}=t;return e(KX,{number:Dde,Complex:function(i){return i.acsch()},BigNumber:function(i){return new r(1).div(i).asinh()}})}),XX="asec",iQe=["typed","config","Complex","BigNumber"],aQe=Y(XX,iQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(XX,{number:function(s){return s<=-1||s>=1||r.predictable?Nde(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),YX="asech",sQe=["typed","config","Complex","BigNumber"],oQe=Y(YX,sQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(YX,{number:function(s){if(s<=1&&s>=-1||r.predictable){var o=1/s;if(o>0||r.predictable)return Pde(s);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),QX="asin",lQe=["typed","config","Complex"],uQe=Y(QX,lQe,t=>{var{typed:e,config:r,Complex:n}=t;return e(QX,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),cQe="asinh",fQe=["typed"],hQe=Y(cQe,fQe,t=>{var{typed:e}=t;return e("asinh",{number:Mde,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),dQe="atan",pQe=["typed"],mQe=Y(dQe,pQe,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),ZX="atan2",gQe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],vQe=Y(ZX,gQe,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:s}=t,o=yu({typed:e,equalScalar:n}),l=za({typed:e}),u=Wde({typed:e,equalScalar:n}),c=ya({typed:e,equalScalar:n}),f=yi({typed:e,DenseMatrix:a}),h=Mr({typed:e,matrix:r,concat:s});return e(ZX,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,p)=>i.atan2(d,p)},h({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:f}))}),JX="atanh",yQe=["typed","config","Complex"],bQe=Y(JX,yQe,t=>{var{typed:e,config:r,Complex:n}=t;return e(JX,{number:function(a){return a<=1&&a>=-1||r.predictable?Ide(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),tw=Y("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),eY="cos",wQe=["typed"],xQe=Y(eY,wQe,t=>{var{typed:e}=t,r=tw({typed:e});return e(eY,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),tY="cosh",AQe=["typed"],_Qe=Y(tY,AQe,t=>{var{typed:e}=t;return e(tY,{number:h9e,"Complex | BigNumber":r=>r.cosh()})}),rY="cot",EQe=["typed","BigNumber"],SQe=Y(rY,EQe,t=>{var{typed:e,BigNumber:r}=t,n=tw({typed:e});return e(rY,{number:Ode,Complex:i=>i.cot(),BigNumber:i=>new r(1).div(i.tan())},n)}),nY="coth",CQe=["typed","BigNumber"],TQe=Y(nY,CQe,t=>{var{typed:e,BigNumber:r}=t;return e(nY,{number:kde,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),iY="csc",DQe=["typed","BigNumber"],NQe=Y(iY,DQe,t=>{var{typed:e,BigNumber:r}=t,n=tw({typed:e});return e(iY,{number:Rde,Complex:i=>i.csc(),BigNumber:i=>new r(1).div(i.sin())},n)}),aY="csch",PQe=["typed","BigNumber"],MQe=Y(aY,PQe,t=>{var{typed:e,BigNumber:r}=t;return e(aY,{number:Fde,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),sY="sec",IQe=["typed","BigNumber"],OQe=Y(sY,IQe,t=>{var{typed:e,BigNumber:r}=t,n=tw({typed:e});return e(sY,{number:Lde,Complex:i=>i.sec(),BigNumber:i=>new r(1).div(i.cos())},n)}),oY="sech",kQe=["typed","BigNumber"],RQe=Y(oY,kQe,t=>{var{typed:e,BigNumber:r}=t;return e(oY,{number:Bde,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),lY="sin",FQe=["typed"],LQe=Y(lY,FQe,t=>{var{typed:e}=t,r=tw({typed:e});return e(lY,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),uY="sinh",BQe=["typed"],$Qe=Y(uY,BQe,t=>{var{typed:e}=t;return e(uY,{number:$de,"Complex | BigNumber":r=>r.sinh()})}),cY="tan",jQe=["typed"],VQe=Y(cY,jQe,t=>{var{typed:e}=t,r=tw({typed:e});return e(cY,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),UQe="tanh",zQe=["typed"],qQe=Y(UQe,zQe,t=>{var{typed:e}=t;return e("tanh",{number:p9e,"Complex | BigNumber":r=>r.tanh()})}),fY="setCartesian",HQe=["typed","size","subset","compareNatural","Index","DenseMatrix"],WQe=Y(fY,HQe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(fY,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(r(l),new a(0))!==0&&n(r(u),new a(0))!==0){var f=er(Array.isArray(l)?l:l.toArray()).sort(i),h=er(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var d=0;d<f.length;d++)for(var p=0;p<h.length;p++)c.push([f[d],h[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new s(c)}})}),hY="setDifference",GQe=["typed","size","subset","compareNatural","Index","DenseMatrix"],KQe=Y(hY,GQe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(hY,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(r(l),new a(0))===0)c=[];else{if(n(r(u),new a(0))===0)return er(l.toArray());var f=A1(er(Array.isArray(l)?l:l.toArray()).sort(i)),h=A1(er(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var d,p=0;p<f.length;p++){d=!1;for(var m=0;m<h.length;m++)if(i(f[p].value,h[m].value)===0&&f[p].identifier===h[m].identifier){d=!0;break}d||c.push(f[p])}}return Array.isArray(l)&&Array.isArray(u)?mP(c):new s(mP(c))}})}),dY="setDistinct",XQe=["typed","size","subset","compareNatural","Index","DenseMatrix"],YQe=Y(dY,XQe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(dY,{"Array | Matrix":function(l){var u;if(n(r(l),new a(0))===0)u=[];else{var c=er(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new s(u)}})}),pY="setIntersect",QQe=["typed","size","subset","compareNatural","Index","DenseMatrix"],ZQe=Y(pY,QQe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(pY,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(r(l),new a(0))===0||n(r(u),new a(0))===0)c=[];else{var f=A1(er(Array.isArray(l)?l:l.toArray()).sort(i)),h=A1(er(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var d=0;d<f.length;d++)for(var p=0;p<h.length;p++)if(i(f[d].value,h[p].value)===0&&f[d].identifier===h[p].identifier){c.push(f[d]);break}}return Array.isArray(l)&&Array.isArray(u)?mP(c):new s(mP(c))}})}),mY="setIsSubset",JQe=["typed","size","subset","compareNatural","Index"],eZe=Y(mY,JQe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(mY,{"Array | Matrix, Array | Matrix":function(o,l){if(n(r(o),new a(0))===0)return!0;if(n(r(l),new a(0))===0)return!1;for(var u=A1(er(Array.isArray(o)?o:o.toArray()).sort(i)),c=A1(er(Array.isArray(l)?l:l.toArray()).sort(i)),f,h=0;h<u.length;h++){f=!1;for(var d=0;d<c.length;d++)if(i(u[h].value,c[d].value)===0&&u[h].identifier===c[d].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),gY="setMultiplicity",tZe=["typed","size","subset","compareNatural","Index"],rZe=Y(gY,tZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(gY,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(r(l),new a(0))===0)return 0;for(var u=er(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],o)===0&&c++;return c}})}),vY="setPowerset",nZe=["typed","size","subset","compareNatural","Index"],iZe=Y(vY,nZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(vY,{"Array | Matrix":function(u){if(n(r(u),new a(0))===0)return[];for(var c=er(Array.isArray(u)?u:u.toArray()).sort(i),f=[],h=0;h.toString(2).length<=c.length;)f.push(s(c,h.toString(2).split("").reverse())),h++;return o(f)}});function s(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),yY="setSize",aZe=["typed","compareNatural"],sZe=Y(yY,aZe,t=>{var{typed:e,compareNatural:r}=t;return e(yY,{"Array | Matrix":function(i){return Array.isArray(i)?er(i).length:er(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?er(i).length:er(i.toArray()).length;for(var s=er(Array.isArray(i)?i:i.toArray()).sort(r),o=1,l=1;l<s.length;l++)r(s[l],s[l-1])!==0&&o++;return o}})}),bY="setSymDifference",oZe=["typed","size","concat","subset","setDifference","Index"],lZe=Y(bY,oZe,t=>{var{typed:e,size:r,concat:n,subset:i,setDifference:a,Index:s}=t;return e(bY,{"Array | Matrix, Array | Matrix":function(l,u){if(i(r(l),new s(0))===0)return er(u);if(i(r(u),new s(0))===0)return er(l);var c=er(l),f=er(u);return n(a(c,f),a(f,c))}})}),wY="setUnion",uZe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],cZe=Y(wY,uZe,t=>{var{typed:e,size:r,concat:n,subset:i,setIntersect:a,setSymDifference:s,Index:o}=t;return e(wY,{"Array | Matrix, Array | Matrix":function(u,c){if(i(r(u),new o(0))===0)return er(c);if(i(r(c),new o(0))===0)return er(u);var f=er(u),h=er(c);return n(s(f,h),a(f,h))}})}),xY="add",fZe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],hZe=Y(xY,fZe,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=t,l=qp({typed:e}),u=cV({typed:e,equalScalar:i}),c=zv({typed:e,DenseMatrix:a}),f=Mr({typed:e,matrix:r,concat:o});return e(xY,{"any, any":n,"any, any, ...any":e.referToSelf(h=>(d,p,m)=>{for(var v=h(d,p),y=0;y<m.length;y++)v=h(v,m[y]);return v})},f({elop:n,DS:l,SS:u,Ss:c}))}),AY="hypot",dZe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],pZe=Y(AY,dZe,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:l}=t;return e(AY,{"... number | BigNumber":u,Array:u,Matrix:c=>u(er(c.toArray(),!0))});function u(c){for(var f=0,h=0,d=0;d<c.length;d++){if(jf(c[d]))throw new TypeError("Unexpected type of argument to hypot");var p=r(c[d]);o(h,p)?(f=a(f,a(i(h,p),i(h,p))),f=n(f,1),h=p):f=n(f,l(p)?a(i(p,h),i(p,h)):p)}return a(h,s(f))}}),_Y="norm",mZe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],gZe=Y(_Y,mZe,t=>{var{typed:e,abs:r,add:n,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:h,eigs:d}=t;return e(_Y,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return _(f(E),2)},Matrix:function(E){return _(E,2)},"Array, number | BigNumber | string":function(E,T){return _(f(E),T)},"Matrix, number | BigNumber | string":function(E,T){return _(E,T)}});function p(S){var E=0;return S.forEach(function(T){var D=r(T);u(D,E)&&(E=D)},!0),E}function m(S){var E;return S.forEach(function(T){var D=r(T);(!E||c(D,E))&&(E=D)},!0),E||0}function v(S,E){if(E===Number.POSITIVE_INFINITY||E==="inf")return p(S);if(E===Number.NEGATIVE_INFINITY||E==="-inf")return m(S);if(E==="fro")return _(S,2);if(typeof E=="number"&&!isNaN(E)){if(!l(E,0)){var T=0;return S.forEach(function(D){T=n(i(r(D),E),T)},!0),i(T,1/E)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function y(S){var E=0;return S.forEach(function(T,D){E=n(E,o(T,a(T)))}),r(s(E))}function w(S){var E=[],T=0;return S.forEach(function(D,N){var P=N[1],M=n(E[P]||0,r(D));u(M,T)&&(T=M),E[P]=M},!0),T}function b(S){var E=S.size();if(E[0]!==E[1])throw new RangeError("Invalid matrix dimensions");var T=h(S),D=o(T,S),N=d(D).values.toArray(),P=N[N.length-1];return r(s(P))}function A(S){var E=[],T=0;return S.forEach(function(D,N){var P=N[0],M=n(E[P]||0,r(D));u(M,T)&&(T=M),E[P]=M},!0),T}function x(S,E){if(E===1)return w(S);if(E===Number.POSITIVE_INFINITY||E==="inf")return A(S);if(E==="fro")return y(S);if(E===2)return b(S);throw new Error("Unsupported parameter value "+E)}function _(S,E){var T=S.size();if(T.length===1)return v(S,E);if(T.length===2){if(T[0]&&T[1])return x(S,E);throw new RangeError("Invalid matrix dimensions")}}}),EY="dot",vZe=["typed","addScalar","multiplyScalar","conj","size"],yZe=Y(EY,vZe,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(EY,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function s(u,c){var f=a(u),h=a(c),d,p;if(f.length===1)d=f[0];else if(f.length===2&&f[1]===1)d=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d!==p)throw new RangeError("Vectors must have equal length ("+d+" != "+p+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function o(u,c){var f=s(u,c),h=ft(u)?u._data:u,d=ft(u)?u._datatype||u.getDataType():void 0,p=ft(c)?c._data:c,m=ft(c)?c._datatype||c.getDataType():void 0,v=a(u).length===2,y=a(c).length===2,w=r,b=n;if(d&&m&&d===m&&typeof d=="string"&&d!=="mixed"){var A=d;w=e.find(r,[A,A]),b=e.find(n,[A,A])}if(!v&&!y){for(var x=b(i(h[0]),p[0]),_=1;_<f;_++)x=w(x,b(i(h[_]),p[_]));return x}if(!v&&y){for(var S=b(i(h[0]),p[0][0]),E=1;E<f;E++)S=w(S,b(i(h[E]),p[E][0]));return S}if(v&&!y){for(var T=b(i(h[0][0]),p[0]),D=1;D<f;D++)T=w(T,b(i(h[D][0]),p[D]));return T}if(v&&y){for(var N=b(i(h[0][0]),p[0][0]),P=1;P<f;P++)N=w(N,b(i(h[P][0]),p[P][0]));return N}}function l(u,c){s(u,c);for(var f=u._index,h=u._values,d=c._index,p=c._values,m=0,v=r,y=n,w=0,b=0;w<f.length&&b<d.length;){var A=f[w],x=d[b];if(A<x){w++;continue}if(A>x){b++;continue}A===x&&(m=v(m,y(h[w],p[b])),w++,b++)}return m}}),bZe="trace",wZe=["typed","matrix","add"],xZe=Y(bZe,wZe,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(o){return i(r(o))},SparseMatrix:a,DenseMatrix:i,any:wt});function i(s){var o=s._size,l=s._data;switch(o.length){case 1:if(o[0]===1)return wt(l[0]);throw new RangeError("Matrix must be square (size: "+Ft(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var f=0,h=0;h<u;h++)f=n(f,l[h][h]);return f}else throw new RangeError("Matrix must be square (size: "+Ft(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(o)+")")}}function a(s){var o=s._values,l=s._index,u=s._ptr,c=s._size,f=c[0],h=c[1];if(f===h){var d=0;if(o.length>0)for(var p=0;p<h;p++)for(var m=u[p],v=u[p+1],y=m;y<v;y++){var w=l[y];if(w===p){d=n(d,o[y]);break}if(w>p)break}return d}throw new RangeError("Matrix must be square (size: "+Ft(c)+")")}}),SY="index",AZe=["typed","Index"],_Ze=Y(SY,AZe,t=>{var{typed:e,Index:r}=t;return e(SY,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return St(o)?o.toNumber():gr(o)||ft(o)?o.map(function(l){return St(l)?l.toNumber():l}):o}),s=new r;return r.apply(s,a),s}})}),hpe=new Set(["end"]),EZe="Node",SZe=["mathWithTransform"],CZe=Y(EZe,SZe,t=>{var{mathWithTransform:e}=t;function r(i){for(var a of[...hpe])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function l(u){var c=y0(u);return r(c),a(c,s,o)}return{evaluate:l}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!cr(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,l){o.forEach(function(u,c,f){l(u,c,f),s(u,l)})}s(this,a)}transform(a){function s(o,l,u){var c=a(o,l,u);return c!==o?c:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,l,u){a(o,l,u)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&uh(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function ms(t){return t&&t.isIndexError?new gu(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function dpe(t){var{subset:e}=t;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return is(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw ms(a)}}}var DT="AccessorNode",TZe=["subset","Node"],DZe=Y(DT,TZe,t=>{var{subset:e,Node:r}=t,n=dpe({subset:e});function i(s){return!(oh(s)||nl(s)||qt(s)||Ep(s)||sO(s)||lh(s)||$i(s))}class a extends r{constructor(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!cr(o))throw new TypeError('Node expected for parameter "object"');if(!Y1(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return DT}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l),f=this.optionalChaining,h=oh(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(m,v,y){var w=y||{},b=u(m,v,w);if(f&&b==null){w.optionalShortCircuit=!0;return}if(!(h&&w!==null&&w!==void 0&&w.optionalShortCircuit))return is(b,d)}}else return function(m,v,y){var w=y||{},b=u(m,v,w);if(f&&b==null){w.optionalShortCircuit=!0;return}if(!(h&&w!==null&&w!==void 0&&w.optionalShortCircuit)){var A=c(m,v,b);return n(b,A)}}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)),this.optionalChaining)}clone(){return new a(this.object,this.index,this.optionalChaining)}_toString(o){var l=this.object.toString(o);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:DT,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(o){return new a(o.object,o.index,o.optionalChaining)}}return Jn(a,"name",DT),a},{isClass:!0,isNode:!0}),NT="ArrayNode",NZe=["Node"],PZe=Y(NT,NZe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(cr))throw new TypeError("Array containing Nodes expected")}get type(){return NT}get isArrayNode(){return!0}_compile(i,a){var s=op(this.items,function(u){return u._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,f,h){return l(op(s,function(d){return d(c,f,h)}))}}else return function(c,f,h){return op(s,function(d){return d(c,f,h)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new r(a)}clone(){return new r(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:NT,items:this.items}}static fromJSON(i){return new r(i.items)}_toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var l=s.some(nl)&&!s.every(nl),u=o||l,c=u?"&":"\\\\",f=s.map(function(h){return h.items?a(h.items,!o):h.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return Jn(r,"name",NT),r},{isClass:!0,isNode:!0});function MZe(t){var{subset:e,matrix:r}=t;return function(i,a,s){try{if(Array.isArray(i)){var o=r(i).subset(a,s).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return y1(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw ms(l)}}}var Ql=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function PT(t,e){if(!e||e!=="auto")return t;for(var r=t;lh(r);)r=r.content;return r}function vr(t,e,r,n){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<Ql.length;o++)if(a in Ql[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&r!=="show"){var l=PT(i.args[0],e);!(qt(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&t4(PT(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&t4(PT(l.args[0],e))&&qt(PT(l.args[1])))&&(s+=1)}return s}function Hw(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),i=vr(r,e);if(i===null)return null;var a=Ql[i][n];if(Je(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function IR(t,e,r){var n=r!=="keep"?t.getContent():t,i=r!=="keep"?t.getContent():e,a=n.getIdentifier(),s=i.getIdentifier(),o=vr(n,r);if(o===null)return null;var l=Ql[o][a];if(Je(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===s)return!0;return!1}return null}function IZe(t){var e="OperatorNode:"+t;for(var r of Ql)if(e in r)return r[e].op;return null}var MT="AssignmentNode",OZe=["subset","?matrix","Node"],kZe=Y(MT,OZe,t=>{var{subset:e,matrix:r,Node:n}=t,i=dpe({subset:e}),a=MZe({subset:e,matrix:r});function s(l,u,c){u||(u="keep");var f=vr(l,u,c),h=vr(l.value,u,c);return u==="all"||h!==null&&h<=f}class o extends n{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!$i(u)&&!oh(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if($i(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Y1(this.index))throw new TypeError('IndexNode expected as "index"');if(!cr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return MT}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),h=this.index?this.index._compile(u,c):null,d=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(A,x,_){var S=f(A,x,_),E=d(A,x,_);return y1(S,m,E),E}}else{if($i(this.object))return function(A,x,_){var S=f(A,x,_),E=d(A,x,_),T=h(A,x,S);return A.set(p,a(S,T,E)),E};var v=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var y=this.object.index.getObjectProperty();return function(A,x,_){var S=v(A,x,_),E=is(S,y),T=h(A,x,E),D=d(A,x,_);return y1(S,y,a(E,T,D)),D}}else{var w=this.object.index._compile(u,c);return function(A,x,_){var S=v(A,x,_),E=w(A,x,S),T=i(S,E),D=h(A,x,T),N=d(A,x,_);return a(S,E,a(T,D,N)),N}}}else{if(!$i(this.object))throw new TypeError("SymbolNode expected as object");return function(A,x,_){var S=d(A,x,_);return A.set(p,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,h=this._ifNode(u(this.value,"value",this));return new o(c,f,h)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",h=this.value.toString(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h="("+h+")"),c+f+" = "+h}toJSON(){return{mathjs:MT,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",h=this.value.toHTML(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h='<span class="math-paranthesis math-round-parenthesis">(</span>'+h+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+h}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",h=this.value.toTex(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h="\\left(".concat(h,"\\right)")),c+f+"="+h}}return Jn(o,"name",MT),o},{isClass:!0,isNode:!0}),IT="BlockNode",RZe=["ResultSet","Node"],FZe=Y(IT,RZe,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!cr(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return IT}get isBlockNode(){return!0}_compile(a,s){var o=op(this.blocks,function(l){return{evaluate:l.node._compile(a,s),visible:l.visible}});return function(u,c,f){var h=[];return Khe(o,function(p){var m=p.evaluate(u,c,f);p.visible&&h.push(m)}),new e(h)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(a(l.node,"blocks["+o+"].node",this));s[o]={node:u,visible:l.visible}}return new n(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:IT,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Jn(n,"name",IT),n},{isClass:!0,isNode:!0}),OT="ConditionalNode",LZe=["Node"],BZe=Y(OT,LZe,t=>{var{Node:e}=t;function r(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(St(i))return!i.isZero();if(jf(i))return!!(i.re||i.im);if(po(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+yr(i)+'"')}class n extends e{constructor(a,s,o){if(super(),!cr(a))throw new TypeError("Parameter condition must be a Node");if(!cr(s))throw new TypeError("Parameter trueExpr must be a Node");if(!cr(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return OT}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),l=this.trueExpr._compile(a,s),u=this.falseExpr._compile(a,s);return function(f,h,d){return r(o(f,h,d))?l(f,h,d):u(f,h,d)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=vr(this,s,a&&a.implicit),l=this.condition.toString(a),u=vr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(a),f=vr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var h=this.falseExpr.toString(a),d=vr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h="("+h+")"),l+" ? "+c+" : "+h}toJSON(){return{mathjs:OT,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=vr(this,s,a&&a.implicit),l=this.condition.toHTML(a),u=vr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=vr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var h=this.falseExpr.toHTML(a),d=vr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+h}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Jn(n,"name",OT),n},{isClass:!0,isNode:!0}),b4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$Ze={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},jZe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},VZe=function(e,r){return b4({},e,r)},UZe=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.preserveFormatting,n=r===void 0?!1:r,i=e.escapeMapFn,a=i===void 0?VZe:i,s=String(t),o="",l=a(b4({},$Ze),n?b4({},jZe):{}),u=Object.keys(l),c=function(){var h=!1;u.forEach(function(d,p){h||s.length>=d.length&&s.slice(0,d.length)===d&&(o+=l[u[p]],s=s.slice(d.length,s.length),h=!0)}),h||(o+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return o};const zZe=Sl(UZe);var w4={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Qt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},CY={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Qt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Qt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Qt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Qt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Qt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Qt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Qt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Qt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Qt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Qt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Qt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Qt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Qt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Qt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Qt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Qt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Qt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Qt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Qt.and,"${args[1]}\\right)")},not:{1:Qt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Qt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Qt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Qt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Qt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Qt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Qt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Qt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Qt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Qt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Qt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Qt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Qt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Qt.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(w4.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},qZe="\\mathrm{${name}}\\left(${args}\\right)",TY={deg:"^\\circ"};function x4(t){return zZe(t,{preserveFormatting:!0})}function ppe(t,e){return e=typeof e>"u"?!1:e,e?Je(TY,t)?TY[t]:"\\mathrm{"+x4(t)+"}":Je(w4,t)?w4[t]:x4(t)}var kT="ConstantNode",HZe=["Node","isBounded"],WZe=Y(kT,HZe,t=>{var{Node:e,isBounded:r}=t;class n extends e{constructor(a){super(),this.value=a}get type(){return kT}get isConstantNode(){return!0}_compile(a,s){var o=this.value;return function(){return o}}forEach(a){}map(a){return this.clone()}clone(){return new n(this.value)}_toString(a){return Ft(this.value,a)}_toHTML(a){var s=this._toString(a);switch(yr(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:kT,value:this.value}}static fromJSON(a){return new n(a.value)}_toTex(a){var s=this._toString(a),o=yr(this.value);switch(o){case"string":return"\\mathtt{"+x4(s)+"}";case"number":case"BigNumber":{if(!r(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=s.toLowerCase().indexOf("e");return l!==-1?s.substring(0,l)+"\\cdot10^{"+s.substring(l+1)+"}":s}case"bigint":return s.toString();case"Fraction":return this.value.toLatex();default:return s}}}return Jn(n,"name",kT),n},{isClass:!0,isNode:!0}),RT="FunctionAssignmentNode",GZe=["typed","Node"],KZe=Y(RT,GZe,t=>{var{typed:e,Node:r}=t;function n(a,s,o){var l=vr(a,s,o),u=vr(a.expr,s,o);return s==="all"||u!==null&&u<=l}class i extends r{constructor(s,o,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!cr(l))throw new TypeError('Node expected for parameter "expr"');if(hpe.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var u=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=s,this.params=o.map(function(h){return h&&h.name||h}),this.types=o.map(function(h){return h&&h.type||"any"}),this.expr=l}get type(){return RT}get isFunctionAssignmentNode(){return!0}_compile(s,o){var l=Object.create(o);Khe(this.params,function(m){l[m]=!0});var u=this.expr,c=u._compile(s,l),f=this.name,h=this.params,d=EG(this.types,","),p=f+"("+EG(this.params,", ")+")";return function(v,y,w){var b={};b[d]=function(){for(var x=Object.create(y),_=0;_<h.length;_++)x[h[_]]=arguments[_];return c(v,x,w)};var A=e(f,b);return A.syntax=p,A.expr=u.toString(),v.set(f,A),A}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return n(this,o,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:RT,name:this.name,params:this.params.map(function(o,l){return{name:o,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ol(this.params[u])+"</span>");var c=this.expr.toHTML(s);return n(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ol(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return n(this,o,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(ppe).join(",")+"\\right)="+l}}return Jn(i,"name",RT),i},{isClass:!0,isNode:!0}),FT="IndexNode",XZe=["Node","size"],YZe=Y(FT,XZe,t=>{var{Node:e,size:r}=t;class n extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(cr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return FT}get isIndexNode(){return!0}_compile(a,s){var o=op(this.dimensions,function(u,c){var f=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var h=Object.create(s);h.end=!0;var d=u._compile(a,h);return function(m,v,y){if(!ft(y)&&!gr(y)&&!Nn(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+yr(y));var w=r(y),b=Object.create(v);return b.end=w[c],d(m,b,y)}}else return u._compile(a,s)}),l=is(a,"index");return function(c,f,h){var d=op(o,function(p){return p(c,f,h)});return l(...d)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&qt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:FT,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ol(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Jn(n,"name",FT),n},{isClass:!0,isNode:!0}),LT="ObjectNode",QZe=["Node"],ZZe=Y(LT,QZe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return cr(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return LT}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(Je(this.properties,o)){var l=Zy(o),u=JSON.parse(l),c=is(this.properties,o);s[u]=c._compile(i,a)}return function(h,d,p){var m={};for(var v in s)Je(s,v)&&(m[v]=s[v](h,d,p));return m}}forEach(i){for(var a in this.properties)Je(this.properties,a)&&i(this.properties[a],"properties["+Zy(a)+"]",this)}map(i){var a={};for(var s in this.properties)Je(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+Zy(s)+"]",this)));return new r(a)}clone(){var i={};for(var a in this.properties)Je(this.properties,a)&&(i[a]=this.properties[a]);return new r(i)}_toString(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push(Zy(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:LT,properties:this.properties}}static fromJSON(i){return new r(i.properties)}_toHTML(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push('<span class="math-symbol math-property">'+ol(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return Jn(r,"name",LT),r},{isClass:!0,isNode:!0});function Nx(t,e){return new bhe(t,new nO(e),new Set(Object.keys(e)))}var BT="OperatorNode",JZe=["Node"],eJe=Y(BT,JZe,t=>{var{Node:e}=t;function r(a,s){var o=a;if(s==="auto")for(;lh(o);)o=o.content;return qt(o)?!0:Fn(o)?r(o.args[0],s):!1}function n(a,s,o,l,u){var c=vr(a,s,o),f=Hw(a,s);if(s==="all"||l.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return l.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var h;switch(l.length){case 0:h=[];break;case 1:{var d=vr(l[0],s,o,a);if(u&&d!==null){var p,m;if(s==="keep"?(p=l[0].getIdentifier(),m=a.getIdentifier()):(p=l[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),Ql[c][m].latexLeftParens===!1){h=[!1];break}if(Ql[d][p].latexParens===!1){h=[!1];break}}if(d===null){h=[!1];break}if(d<=c){h=[!0];break}h=[!1]}break;case 2:{var v,y=vr(l[0],s,o,a),w=IR(a,l[0],s);y===null?v=!1:y===c&&f==="right"&&!w||y<c?v=!0:v=!1;var b,A=vr(l[1],s,o,a),x=IR(a,l[1],s);if(A===null?b=!1:A===c&&f==="left"&&!x||A<c?b=!0:b=!1,u){var _,S,E;s==="keep"?(_=a.getIdentifier(),S=a.args[0].getIdentifier(),E=a.args[1].getIdentifier()):(_=a.getContent().getIdentifier(),S=a.args[0].getContent().getIdentifier(),E=a.args[1].getContent().getIdentifier()),y!==null&&(Ql[c][_].latexLeftParens===!1&&(v=!1),Ql[y][S].latexParens===!1&&(v=!1)),A!==null&&(Ql[c][_].latexRightParens===!1&&(b=!1),Ql[A][E].latexParens===!1&&(b=!1))}h=[v,b]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(h=l.map(function(D){var N=vr(D,s,o,a),P=IR(a,D,s),M=Hw(D,s);return N===null?!1:c===N&&f===M&&!P?!0:N<c}));break}if(l.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var T=1;T<h.length;++T)r(l[T],s)&&!h[T-1]&&(s!=="keep"||!lh(l[T-1]))&&(h[T]=!0);return h}class i extends e{constructor(s,o,l,u,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(cr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=l||[]}get type(){return BT}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!rV(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=is(s,this.fn),u=op(this.args,function(p){return p._compile(s,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(m,v,y){return l(c,s,Nx(m,v))}}else if(u.length===1){var f=u[0];return function(m,v,y){return l(f(m,v,y))}}else if(u.length===2){var h=u[0],d=u[1];return function(m,v,y){return l(h(m,v,y),d(m,v,y))}}else return function(m,v,y){return l.apply(null,op(u,function(w){return w(m,v,y)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var f=Hw(this,o),h=u[0].toString(s);c[0]&&(h="("+h+")");var d=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(d?" ":"")+h:f==="left"?h+(d?" ":"")+this.op:h+this.op}else if(u.length===2){var p=u[0].toString(s),m=u[1].toString(s);return c[0]&&(p="("+p+")"),c[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+m:p+" "+this.op+" "+m}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var v=u.map(function(y,w){return y=y.toString(s),c[w]&&(y="("+y+")"),y});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join(" "):v.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:BT,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var f=Hw(this,o),h=u[0].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ol(this.op)+"</span>"+h:h+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ol(this.op)+"</span>"}else if(u.length===2){var d=u[0].toHTML(s),p=u[1].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?d+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:d+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ol(this.op)+"</span>"+p}else{var m=u.map(function(v,y){return v=v.toHTML(s),c[y]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),v});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ol(this.op)+"</span>"):'<span class="math-function">'+ol(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),f=Qt[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var h=Hw(this,o),d=u[0].toTex(s);return c[0]&&(d="\\left(".concat(d,"\\right)")),h==="right"?f+d:d+f}else if(u.length===2){var p=u[0],m=p.toTex(s);c[0]&&(m="\\left(".concat(m,"\\right)"));var v=u[1],y=v.toTex(s);c[1]&&(y="\\left(".concat(y,"\\right)"));var w;switch(o==="keep"?w=p.getIdentifier():w=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+m+"}{"+y+"}";case"OperatorNode:pow":switch(m="{"+m+"}",y="{"+y+"}",w){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return m+"~"+y}return m+f+y}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(A,x){return A=A.toTex(s),c[x]&&(A="\\left(".concat(A,"\\right)")),A});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(A){return A.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Jn(i,"name",BT),i},{isClass:!0,isNode:!0}),$T="ParenthesisNode",tJe=["Node"],rJe=Y($T,tJe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),!cr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return $T}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new r(a)}clone(){return new r(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:$T,content:this.content}}static fromJSON(i){return new r(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Jn(r,"name",$T),r},{isClass:!0,isNode:!0}),jT="RangeNode",nJe=["Node"],iJe=Y(jT,nJe,t=>{var{Node:e}=t;function r(i,a,s){var o=vr(i,a,s),l={},u=vr(i.start,a,s);if(l.start=u!==null&&u<=o||a==="all",i.step){var c=vr(i.step,a,s);l.step=c!==null&&c<=o||a==="all"}var f=vr(i.end,a,s);return l.end=f!==null&&f<=o||a==="all",l}class n extends e{constructor(a,s,o){if(super(),!cr(a))throw new TypeError("Node expected");if(!cr(s))throw new TypeError("Node expected");if(o&&!cr(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return jT}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return $i(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,l=this.start._compile(a,s),u=this.end._compile(a,s);if(this.step){var c=this.step._compile(a,s);return function(h,d,p){return o(l(h,d,p),u(h,d,p),c(h,d,p))}}else return function(h,d,p){return o(l(h,d,p),u(h,d,p))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l,u=this.start.toString(a);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(a);o.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(a);return o.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:jT,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l,u=this.start.toHTML(a);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(a);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l=this.start.toTex(a);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(a);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(a);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return Jn(n,"name",jT),n},{isClass:!0,isNode:!0}),VT="RelationalNode",aJe=["Node"],sJe=Y(VT,aJe,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return VT}get isRelationalNode(){return!0}_compile(a,s){var o=this,l=this.params.map(u=>u._compile(a,s));return function(c,f,h){for(var d,p=l[0](c,f,h),m=0;m<o.conditionals.length;m++){d=p,p=l[m+1](c,f,h);var v=is(a,o.conditionals[m]);if(!v(d,p))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=vr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=vr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"("+f.toString(a)+")":f.toString(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+r[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:VT,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=vr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=vr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ol(r[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=vr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=vr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Qt[this.conditionals[c]]+l[c+1];return u}}return Jn(n,"name",VT),n},{isClass:!0,isNode:!0}),oJe="SymbolNode",lJe=["math","?Unit","Node"],uJe=Y(oJe,lJe,t=>{var{math:e,Unit:r,Node:n}=t;function i(s){return r?r.isValuelessUnit(s):!1}class a extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(f,h,d){return is(h,u)};if(u in o)return function(f,h,d){return f.has(u)?f.get(u):is(o,u)};var c=i(u);return function(f,h,d){return f.has(u)?f.get(u):c?new r(null,u):a.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}_toHTML(o){var l=ol(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=ppe(this.name,l);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),UT="FunctionNode",cJe=["math","Node","SymbolNode"],fJe=Y(UT,cJe,t=>{var e,{math:r,Node:n,SymbolNode:i}=t,a=l=>Ft(l,{truncate:78});function s(l,u,c){for(var f="",h=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,d=0,p;(p=h.exec(l))!==null;)if(f+=l.substring(d,p.index),d=p.index,p[0]==="$$")f+="$",d++;else{d+=p[0].length;var m=u[p[1]];if(!m)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof m){case"string":f+=m;break;case"object":if(cr(m))f+=m.toTex(c);else if(Array.isArray(m))f+=m.map(function(v,y){if(cr(v))return v.toTex(c);throw new TypeError("Template: "+p[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(cr(m[p[2]]&&m[p[2]]))f+=m[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=l.slice(d),f}class o extends n{constructor(u,c,f){if(super(),typeof u=="string"&&(u=new i(u)),!cr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(cr))throw new TypeError('Array containing Nodes expected for parameter "args"');var h=typeof f;if(!(h==="undefined"||h==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!f}get name(){return this.fn.name||""}get type(){return UT}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(T=>T._compile(u,c)),h=this.optional||oh(this.fn)&&this.fn.optionalChaining;if($i(this.fn)){var d=this.fn.name;if(c[d]){var w=this.args;return function(D,N,P){var M=is(N,d);if(!(h&&M===void 0)){if(typeof M!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(M)));if(M.rawArgs)return M(w,u,Nx(D,N));var j=f.map(K=>K(D,N,P));return M.apply(M,j)}}}else{var p=d in u?is(u,d):void 0,m=typeof p=="function"&&p.rawArgs===!0,v=T=>{var D;if(T.has(d))D=T.get(d);else if(d in u)D=is(u,d);else if(h)D=void 0;else return o.onUndefinedFunction(d);if(typeof D=="function"||h&&D===void 0)return D;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(D)))};if(m){var y=this.args;return function(D,N,P){var M=v(D);if(M.rawArgs===!0)return M(y,u,Nx(D,N));var j=f.map(K=>K(D,N,P));return M(...j)}}else switch(f.length){case 0:return function(D,N,P){var M=v(D);if(!(h&&M===void 0))return M()};case 1:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f[0];return M(j(D,N,P))}};case 2:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f[0],K=f[1];return M(j(D,N,P),K(D,N,P))}};default:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f.map(K=>K(D,N,P));return M(...j)}}}}}else if(oh(this.fn)&&Y1(this.fn.index)&&this.fn.index.isObjectProperty()){var b=this.fn.object._compile(u,c),A=this.fn.index.getObjectProperty(),x=this.args;return function(D,N,P){var M=b(D,N,P);if(!(h&&(M==null||M[A]===void 0))){var j=Mze(M,A);if(j!=null&&j.rawArgs)return j(x,u,Nx(D,N));var K=f.map(k=>k(D,N,P));return j.apply(M,K)}}}else{var _=this.fn.toString(),S=this.fn._compile(u,c),E=this.args;return function(D,N,P){var M=S(D,N,P);if(!(h&&M===void 0)){if(typeof M!="function")throw new TypeError("Expression '".concat(_,"' did not evaluate to a function; value is:")+`
  `.concat(a(M)));if(M.rawArgs)return M(E,u,Nx(D,N));var j=f.map(K=>K(D,N,P));return M.apply(M,j)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],h=0;h<this.args.length;h++)f[h]=this._ifNode(u(this.args[h],"args["+h+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&Je(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(h){return h.toString(u)}),f=QS(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:UT,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+ol(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&Je(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(d){return d.toTex(u)}),f;CY[this.name]&&(f=CY[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(f=r[this.name].toTex);var h;switch(typeof f){case"function":h=f(this,u);break;case"string":h=s(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":h=f[c.length](this,u);break;case"string":h=s(f[c.length],this,u);break}}return typeof h<"u"?h:s(qZe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,Jn(o,"name",UT),Jn(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),Jn(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),DY="parse",hJe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],dJe=Y(DY,hJe,t=>{var{typed:e,numeric:r,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:h,ObjectNode:d,OperatorNode:p,ParenthesisNode:m,RangeNode:v,RelationalNode:y,SymbolNode:w}=t,b=e(DY,{string:function(le){return ue(le,{})},"Array | Matrix":function(le){return A(le,{})},"string, Object":function(le,we){var Ie=we.nodes!==void 0?we.nodes:{};return ue(le,Ie)},"Array | Matrix, Object":A});function A(B){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=le.nodes!==void 0?le.nodes:{};return Ct(B,function(Ie){if(typeof Ie!="string")throw new TypeError("String expected");return ue(Ie,we)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},T=["NaN","Infinity"],D={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function N(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function P(B,le){return B.expression.substr(B.index,le)}function M(B){return P(B,1)}function j(B){B.index++}function K(B){return B.expression.charAt(B.index-1)}function k(B){return B.expression.charAt(B.index+1)}function V(B){for(B.tokenType=x.NULL,B.token="",B.comment="";;){if(M(B)==="#")for(;M(B)!==`
`&&M(B)!=="";)B.comment+=M(B),j(B);if(b.isWhitespace(M(B),B.nestingLevel))j(B);else break}if(M(B)===""){B.tokenType=x.DELIMITER;return}if(M(B)===`
`&&!B.nestingLevel){B.tokenType=x.DELIMITER,B.token=M(B),j(B);return}var le=M(B),we=P(B,2),Ie=P(B,3);if(Ie.length===3&&_[Ie]){B.tokenType=x.DELIMITER,B.token=Ie,j(B),j(B),j(B);return}if(we.length===2&&_[we]&&(we!=="?."||!b.isDigit(B.expression.charAt(B.index+2)))){B.tokenType=x.DELIMITER,B.token=we,j(B),j(B);return}if(_[le]){B.tokenType=x.DELIMITER,B.token=le,j(B);return}if(b.isDigitDot(le)){B.tokenType=x.NUMBER;var qe=P(B,2);if(qe==="0b"||qe==="0o"||qe==="0x"){for(B.token+=M(B),j(B),B.token+=M(B),j(B);b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);if(M(B)===".")for(B.token+=".",j(B);b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);else if(M(B)==="i")for(B.token+="i",j(B);b.isDigit(M(B));)B.token+=M(B),j(B);return}if(M(B)==="."){if(B.token+=M(B),j(B),!b.isDigit(M(B))){B.tokenType=x.DELIMITER;return}}else{for(;b.isDigit(M(B));)B.token+=M(B),j(B);b.isDecimalMark(M(B),k(B))&&(B.token+=M(B),j(B))}for(;b.isDigit(M(B));)B.token+=M(B),j(B);if(M(B)==="E"||M(B)==="e"){if(b.isDigit(k(B))||k(B)==="-"||k(B)==="+"){if(B.token+=M(B),j(B),(M(B)==="+"||M(B)==="-")&&(B.token+=M(B),j(B)),!b.isDigit(M(B)))throw ht(B,'Digit expected, got "'+M(B)+'"');for(;b.isDigit(M(B));)B.token+=M(B),j(B);if(b.isDecimalMark(M(B),k(B)))throw ht(B,'Digit expected, got "'+M(B)+'"')}else if(b.isDecimalMark(k(B),B.expression.charAt(B.index+2)))throw j(B),ht(B,'Digit expected, got "'+M(B)+'"')}return}if(b.isAlpha(M(B),K(B),k(B))){for(;b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);Je(S,B.token)?B.tokenType=x.DELIMITER:B.tokenType=x.SYMBOL;return}for(B.tokenType=x.UNKNOWN;M(B)!=="";)B.token+=M(B),j(B);throw ht(B,'Syntax error in part "'+B.token+'"')}function q(B){do V(B);while(B.token===`
`)}function H(B){B.nestingLevel++}function te(B){B.nestingLevel--}b.isAlpha=function(le,we,Ie){return b.isValidLatinOrGreek(le)||b.isValidMathSymbol(le,Ie)||b.isValidMathSymbol(we,le)},b.isValidLatinOrGreek=function(le){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(le)},b.isValidMathSymbol=function(le,we){return/^[\uD835]$/.test(le)&&/^[\uDC00-\uDFFF]$/.test(we)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(we)},b.isWhitespace=function(le,we){return le===" "||le==="	"||le===""||le===`
`&&we>0},b.isDecimalMark=function(le,we){return le==="."&&we!=="/"&&we!=="*"&&we!=="^"},b.isDigitDot=function(le){return le>="0"&&le<="9"||le==="."},b.isDigit=function(le){return le>="0"&&le<="9"};function ue(B,le){var we=N();Bn(we,{expression:B,extraNodes:le}),V(we);var Ie=re(we);if(we.token!=="")throw we.tokenType===x.DELIMITER?_r(we,"Unexpected operator "+we.token):ht(we,'Unexpected part "'+we.token+'"');return Ie}function re(B){var le,we=[],Ie;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(le=L(B),B.comment&&(le.comment=B.comment));B.token===`
`||B.token===";";)we.length===0&&le&&(Ie=B.token!==";",we.push({node:le,visible:Ie})),V(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(le=L(B),B.comment&&(le.comment=B.comment),Ie=B.token!==";",we.push({node:le,visible:Ie}));return we.length>0?new o(we):(le||(le=new u(void 0),B.comment&&(le.comment=B.comment)),le)}function L(B){var le,we,Ie,qe,dt=ie(B);if(B.token==="="){if($i(dt))return le=dt.name,q(B),Ie=L(B),new s(new w(le),Ie);if(oh(dt)){if(dt.optionalChaining)throw ht(B,"Cannot assign to optional chain");return q(B),Ie=L(B),new s(dt.object,dt.index,Ie)}else if(Ep(dt)&&$i(dt.fn)&&(qe=!0,we=[],le=dt.name,dt.args.forEach(function(Mn,Oo){$i(Mn)?we[Oo]=Mn.name:qe=!1}),qe))return q(B),Ie=L(B),new c(le,we,Ie);throw ht(B,"Invalid left hand side of assignment operator =")}return dt}function ie(B){for(var le=X(B);B.token==="?";){var we=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,q(B);var Ie=le,qe=L(B);if(B.token!==":")throw ht(B,"False part of conditional expression expected");B.conditionalLevel=null,q(B);var dt=L(B);le=new l(Ie,qe,dt),B.conditionalLevel=we}return le}function X(B){for(var le=pe(B);B.token==="or";)q(B),le=new p("or","or",[le,pe(B)]);return le}function pe(B){for(var le=de(B);B.token==="xor";)q(B),le=new p("xor","xor",[le,de(B)]);return le}function de(B){for(var le=ae(B);B.token==="and";)q(B),le=new p("and","and",[le,ae(B)]);return le}function ae(B){for(var le=z(B);B.token==="|";)q(B),le=new p("|","bitOr",[le,z(B)]);return le}function z(B){for(var le=ne(B);B.token==="^|";)q(B),le=new p("^|","bitXor",[le,ne(B)]);return le}function ne(B){for(var le=fe(B);B.token==="&";)q(B),le=new p("&","bitAnd",[le,fe(B)]);return le}function fe(B){for(var le=[Q(B)],we=[],Ie={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Je(Ie,B.token);){var qe={name:B.token,fn:Ie[B.token]};we.push(qe),q(B),le.push(Q(B))}return le.length===1?le[0]:le.length===2?new p(we[0].name,we[0].fn,le):new y(we.map(dt=>dt.fn),le)}function Q(B){var le,we,Ie,qe;le=ye(B);for(var dt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Je(dt,B.token);)we=B.token,Ie=dt[we],q(B),qe=[le,ye(B)],le=new p(we,Ie,qe);return le}function ye(B){var le,we,Ie,qe;le=me(B);for(var dt={to:"to",in:"to"};Je(dt,B.token);)we=B.token,Ie=dt[we],q(B),we==="in"&&"])},;".includes(B.token)?le=new p("*","multiply",[le,new w("in")],!0):(qe=[le,me(B)],le=new p(we,Ie,qe));return le}function me(B){var le,we=[];if(B.token===":"?le=new u(1):le=De(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(we.push(le);B.token===":"&&we.length<3;)q(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?we.push(new w("end")):we.push(De(B));we.length===3?le=new v(we[0],we[2],we[1]):le=new v(we[0],we[1])}return le}function De(B){var le,we,Ie,qe;le=Le(B);for(var dt={"+":"add","-":"subtract"};Je(dt,B.token);){we=B.token,Ie=dt[we],q(B);var Mn=Le(B);Mn.isPercentage?qe=[le,new p("*","multiply",[le,Mn])]:qe=[le,Mn],le=new p(we,Ie,qe)}return le}function Le(B){var le,we,Ie,qe;le=ze(B),we=le;for(var dt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Je(dt,B.token);)Ie=B.token,qe=dt[Ie],q(B),we=ze(B),le=new p(Ie,qe,[le,we]);return le}function ze(B){var le,we;for(le=Be(B),we=le;B.tokenType===x.SYMBOL||B.token==="in"&&qt(le)||B.token==="in"&&Fn(le)&&le.fn==="unaryMinus"&&qt(le.args[0])||B.tokenType===x.NUMBER&&!qt(we)&&(!Fn(we)||we.op==="!")||B.token==="(";)we=Be(B),le=new p("*","multiply",[le,we],!0);return le}function Be(B){for(var le=Ve(B),we=le,Ie=[];B.token==="/"&&t4(we);)if(Ie.push(Bn({},B)),q(B),B.tokenType===x.NUMBER)if(Ie.push(Bn({},B)),q(B),B.tokenType===x.SYMBOL||B.token==="("||B.token==="in")Bn(B,Ie.pop()),Ie.pop(),we=Ve(B),le=new p("/","divide",[le,we]);else{Ie.pop(),Bn(B,Ie.pop());break}else{Bn(B,Ie.pop());break}return le}function Ve(B){var le=Ke(B);if(B.token==="%"){var we=Bn({},B);q(B);try{Ke(B),Bn(B,we)}catch{le=new p("/","divide",[le,new u(100)],!1,!0)}}return le}function Ke(B){var le,we,Ie,qe={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Je(qe,B.token)?(Ie=qe[B.token],le=B.token,q(B),we=[Ke(B)],new p(le,Ie,we)):ee(B)}function ee(B){var le,we,Ie,qe;return le=ce(B),(B.token==="^"||B.token===".^")&&(we=B.token,Ie=we==="^"?"pow":"dotPow",q(B),qe=[le,Ke(B)],le=new p(we,Ie,qe)),le}function ce(B){for(var le=G(B);B.token==="??";)q(B),le=new p("??","nullish",[le,G(B)]);return le}function G(B){var le,we,Ie,qe;le=Z(B);for(var dt={"!":"factorial","'":"ctranspose"};Je(dt,B.token);)we=B.token,Ie=dt[we],V(B),qe=[le],le=new p(we,Ie,qe),le=he(B,le);return le}function Z(B){var le=[];if(B.tokenType===x.SYMBOL&&Je(B.extraNodes,B.token)){var we=B.extraNodes[B.token];if(V(B),B.token==="("){if(le=[],H(B),V(B),B.token!==")")for(le.push(L(B));B.token===",";)V(B),le.push(L(B));if(B.token!==")")throw ht(B,"Parenthesis ) expected");te(B),V(B)}return new we(le)}return oe(B)}function oe(B){var le,we;return B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S?(we=B.token,V(B),Je(E,we)?le=new u(E[we]):T.includes(we)?le=new u(r(we,"number")):le=new w(we),le=he(B,le),le):ve(B)}function he(B,le,we){for(var Ie;;){var qe=!1;B.token==="?."&&(qe=!0,V(B));var dt=(B.token==="("||B.token==="["||B.token===".")&&!0;if(!(qe||dt))break;if(Ie=[],B.token==="(")if(qe||$i(le)||oh(le)){if(H(B),V(B),B.token!==")")for(Ie.push(L(B));B.token===",";)V(B),Ie.push(L(B));if(B.token!==")")throw ht(B,"Parenthesis ) expected");te(B),V(B),le=new f(le,Ie,qe)}else return le;else if(B.token==="["){if(H(B),V(B),B.token!=="]")for(Ie.push(L(B));B.token===",";)V(B),Ie.push(L(B));if(B.token!=="]")throw ht(B,"Parenthesis ] expected");te(B),V(B),le=new i(le,new h(Ie),qe)}else{qe||V(B);var Mn=B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S;if(!Mn){var Oo="Property name expected after ";throw Oo+=qe?"optional chain":"dot",ht(B,Oo)}Ie.push(new u(B.token)),V(B);var lw=!0;le=new i(le,new h(Ie,lw),qe)}}return le}function ve(B){var le,we;return B.token==='"'||B.token==="'"?(we=ge(B,B.token),le=new u(we),le=he(B,le),le):Pe(B)}function ge(B,le){for(var we="";M(B)!==""&&M(B)!==le;)if(M(B)==="\\"){j(B);var Ie=M(B),qe=D[Ie];if(qe!==void 0)we+=qe,B.index+=1;else if(Ie==="u"){var dt=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(dt))we+=String.fromCharCode(parseInt(dt,16)),B.index+=5;else throw ht(B,"Invalid unicode character \\u".concat(dt))}else throw ht(B,"Bad escape character \\".concat(Ie))}else we+=M(B),j(B);if(V(B),B.token!==le)throw ht(B,"End of string ".concat(le," expected"));return V(B),we}function Pe(B){var le,we,Ie,qe;if(B.token==="["){if(H(B),V(B),B.token!=="]"){var dt=Se(B);if(B.token===";"){for(Ie=1,we=[dt];B.token===";";)V(B),B.token!=="]"&&(we[Ie]=Se(B),Ie++);if(B.token!=="]")throw ht(B,"End of matrix ] expected");te(B),V(B),qe=we[0].items.length;for(var Mn=1;Mn<Ie;Mn++)if(we[Mn].items.length!==qe)throw _r(B,"Column dimensions mismatch ("+we[Mn].items.length+" !== "+qe+")");le=new a(we)}else{if(B.token!=="]")throw ht(B,"End of matrix ] expected");te(B),V(B),le=dt}}else te(B),V(B),le=new a([]);return he(B,le)}return $e(B)}function Se(B){for(var le=[L(B)],we=1;B.token===",";)V(B),B.token!=="]"&&B.token!==";"&&(le[we]=L(B),we++);return new a(le)}function $e(B){if(B.token==="{"){H(B);var le,we={};do if(V(B),B.token!=="}"){if(B.token==='"'||B.token==="'")le=ge(B,B.token);else if(B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S)le=B.token,V(B);else throw ht(B,"Symbol or string expected as object key");if(B.token!==":")throw ht(B,"Colon : expected after object key");V(B),we[le]=L(B)}while(B.token===",");if(B.token!=="}")throw ht(B,"Comma , or bracket } expected after object value");te(B),V(B);var Ie=new d(we);return Ie=he(B,Ie),Ie}return Ce(B)}function Ce(B){var le;if(B.tokenType===x.NUMBER){le=B.token,V(B);var we=Up(le,n),Ie=r(le,we);return new u(Ie)}return rt(B)}function rt(B){var le;if(B.token==="("){if(H(B),V(B),le=L(B),B.token!==")")throw ht(B,"Parenthesis ) expected");return te(B),V(B),le=new m(le),le=he(B,le),le}return Mt(B)}function Mt(B){throw B.token===""?ht(B,"Unexpected end of expression"):ht(B,"Value expected")}function Wt(B){return B.index-B.token.length+1}function ht(B,le){var we=Wt(B),Ie=new SyntaxError(le+" (char "+we+")");return Ie.char=we,Ie}function _r(B,le){var we=Wt(B),Ie=new SyntaxError(le+" (char "+we+")");return Ie.char=we,Ie}return e.addConversion({from:"string",to:"Node",convert:b}),b}),NY="compile",pJe=["typed","parse"],mJe=Y(NY,pJe,t=>{var{typed:e,parse:r}=t;return e(NY,{string:function(i){return r(i).compile()},"Array | Matrix":function(i){return Ct(i,function(a){return r(a).compile()})}})}),PY="evaluate",gJe=["typed","parse"],vJe=Y(PY,gJe,t=>{var{typed:e,parse:r}=t;return e(PY,{string:function(i){var a=n_();return r(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return r(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=n_();return Ct(i,function(s){return r(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return Ct(i,function(s){return r(s).compile().evaluate(a)})}})}),yJe="Parser",bJe=["evaluate","parse"],wJe=Y(yJe,bJe,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:n_(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(a){return e(a,this.scope)},n.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},n.prototype.getAll=function(){return Rze(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var s=0;s<a.length;s++){var o=a.charAt(s-1),l=a.charAt(s),u=a.charAt(s+1),c=r.isAlpha(l,o,u)||s>0&&r.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(a,s){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,s),s},n.prototype.remove=function(a){this.scope.delete(a)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var a={mathjs:"Parser",variables:{},functions:{}};for(var[s,o]of this.scope)if(Ahe(o)){if(!xJe(o))throw new Error("Cannot serialize external function ".concat(s));a.functions[s]="".concat(o.syntax," = ").concat(o.expr)}else a.variables[s]=o;return a},n.fromJSON=function(a){var s=new n;return Object.entries(a.variables).forEach(o=>{var[l,u]=o;return s.set(l,u)}),Object.entries(a.functions).forEach(o=>{var[l,u]=o;return s.evaluate(u)}),s},n},{isClass:!0});function xJe(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var MY="parser",AJe=["typed","Parser"],_Je=Y(MY,AJe,t=>{var{typed:e,Parser:r}=t;return e(MY,{"":function(){return new r}})}),IY="lup",EJe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],SJe=Y(IY,EJe,t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:a,multiplyScalar:s,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:h,Spa:d}=t;return e(IY,{DenseMatrix:function(y){return p(y)},SparseMatrix:function(y){return m(y)},Array:function(y){var w=r(y),b=p(w);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function p(v){var y=v._size[0],w=v._size[1],b=Math.min(y,w),A=wt(v._data),x=[],_=[y,b],S=[],E=[b,w],T,D,N,P=[];for(T=0;T<y;T++)P[T]=T;for(D=0;D<w;D++){if(D>0)for(T=0;T<y;T++){var M=Math.min(T,D),j=0;for(N=0;N<M;N++)j=i(j,s(A[T][N],A[N][D]));A[T][D]=o(A[T][D],j)}var K=D,k=0,V=0;for(T=D;T<y;T++){var q=A[T][D],H=n(q);l(H,k)&&(K=T,k=H,V=q)}if(D!==K&&(P[D]=[P[K],P[K]=P[D]][0],f._swapRows(D,K,A)),D<y)for(T=D+1;T<y;T++){var te=A[T][D];u(te,0)||(A[T][D]=a(A[T][D],V))}}for(D=0;D<w;D++)for(T=0;T<y;T++){if(D===0&&(T<w&&(S[T]=[]),x[T]=[]),T<D){T<w&&(S[T][D]=A[T][D]),D<y&&(x[T][D]=0);continue}if(T===D){T<w&&(S[T][D]=A[T][D]),D<y&&(x[T][D]=1);continue}T<w&&(S[T][D]=0),D<y&&(x[T][D]=A[T][D])}var ue=new f({data:x,size:_}),re=new f({data:S,size:E}),L=[];for(T=0,b=P.length;T<b;T++)L[P[T]]=T;return{L:ue,U:re,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(v){var y=v._size[0],w=v._size[1],b=Math.min(y,w),A=v._values,x=v._index,_=v._ptr,S=[],E=[],T=[],D=[y,b],N=[],P=[],M=[],j=[b,w],K,k,V,q=[],H=[];for(K=0;K<y;K++)q[K]=K,H[K]=K;var te=function(L,ie){var X=H[L],pe=H[ie];q[X]=ie,q[pe]=L,H[L]=pe,H[ie]=X},ue=function(){var L=new d;k<y&&(T.push(S.length),S.push(1),E.push(k)),M.push(N.length);var ie=_[k],X=_[k+1];for(V=ie;V<X;V++)K=x[V],L.set(q[K],A[V]);k>0&&L.forEach(0,k-1,function(z,ne){h._forEachRow(z,S,E,T,function(fe,Q){fe>z&&L.accumulate(fe,c(s(Q,ne)))})});var pe=k,de=L.get(k),ae=n(de);L.forEach(k+1,y-1,function(z,ne){var fe=n(ne);l(fe,ae)&&(pe=z,ae=fe,de=ne)}),k!==pe&&(h._swapRows(k,pe,D[1],S,E,T),h._swapRows(k,pe,j[1],N,P,M),L.swap(k,pe),te(k,pe)),L.forEach(0,y-1,function(z,ne){z<=k?(N.push(ne),P.push(z)):(ne=a(ne,de),u(ne,0)||(S.push(ne),E.push(z)))})};for(k=0;k<w;k++)ue();return M.push(N.length),T.push(S.length),{L:new h({values:S,index:E,ptr:T,size:D}),U:new h({values:N,index:P,ptr:M,size:j}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),OY="qr",CJe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],TJe=Y(OY,CJe,t=>{var{typed:e,matrix:r,zeros:n,identity:i,isZero:a,equal:s,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:h,multiplyScalar:d,subtractScalar:p,complex:m}=t;return Bn(e(OY,{DenseMatrix:function(A){return y(A)},SparseMatrix:function(A){return w()},Array:function(A){var x=r(A),_=y(x);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:v});function v(b){var A=b._size[0],x=b._size[1],_=i([A],"dense"),S=_._data,E=b.clone(),T=E._data,D,N,P,M=n([A],"");for(P=0;P<Math.min(x,A);++P){var j=T[P][P],K=c(s(j,0)?1:o(j)),k=u(K),V=0;for(D=P;D<A;D++)V=f(V,d(T[D][P],u(T[D][P])));var q=d(K,l(V));if(!a(q)){var H=p(j,q);for(M[P]=1,D=P+1;D<A;D++)M[D]=h(T[D][P],H);var te=c(u(h(H,q))),ue=void 0;for(N=P;N<x;N++){for(ue=0,D=P;D<A;D++)ue=f(ue,d(u(M[D]),T[D][N]));for(ue=d(ue,te),D=P;D<A;D++)T[D][N]=d(p(T[D][N],d(M[D],ue)),k)}for(D=0;D<A;D++){for(ue=0,N=P;N<A;N++)ue=f(ue,d(S[D][N],M[N]));for(ue=d(ue,te),N=P;N<A;++N)S[D][N]=h(p(S[D][N],d(ue,u(M[N]))),k)}}}return{Q:_,R:E,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(b){var A=v(b),x=A.R._data;if(b._data.length>0)for(var _=x[0][0].type==="Complex"?m(0):0,S=0;S<x.length;++S)for(var E=0;E<S&&E<(x[0]||[]).length;++E)x[S][E]=_;return A}function w(b){throw new Error("qr not implemented for sparse matrices yet")}});function DJe(t,e,r,n){t._values;for(var i=t._index,a=t._ptr,s=t._size,o=t._datatype,l=s[0],u=s[1],c=null,f=[],h=[],d=0,p=0;p<u;p++){h[p]=d;for(var m=r?r[p]:p,v=a[m],y=a[m+1],w=v;w<y;w++){var b=i[w];f[d]=b,d++}}return h[u]=d,t.createSparseMatrix({values:c,index:f,ptr:h,size:[l,u],datatype:o})}function mpe(t,e,r,n,i,a,s){var o=0;for(r[s]=t;o>=0;){var l=r[s+o],u=r[n+l];u===-1?(o--,a[e++]=l):(r[n+l]=r[i+u],++o,r[s+o]=u)}return e}function NJe(t,e){if(!t)return null;var r=0,n,i=[],a=[],s=0,o=e,l=2*e;for(n=0;n<e;n++)a[s+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(a[o+n]=a[s+t[n]],a[s+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=mpe(n,r,a,s,o,i,l));return i}function PJe(t,e){if(!t)return null;var r=t._index,n=t._ptr,i=t._size,a=i[0],s=i[1],o=[],l=[],u=0,c=s,f,h;for(f=0;f<a;f++)l[c+f]=-1;for(var d=0;d<s;d++){o[d]=-1,l[u+d]=-1;for(var p=n[d],m=n[d+1],v=p;v<m;v++){var y=r[v];for(f=l[c+y];f!==-1&&f<d;f=h)h=l[u+f],l[u+f]=d,h===-1&&(o[f]=d);l[c+y]=d}}return o}function MJe(t,e,r){for(var n=t._values,i=t._index,a=t._ptr,s=t._size,o=s[1],l=0,u=0;u<o;u++){var c=a[u];for(a[u]=l;c<a[u+1];c++)e(i[c],u,n?n[c]:1,r)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return a[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function jh(t){return-t-2}var IJe="csAmd",OJe=["add","multiply","transpose"],kJe=Y(IJe,OJe,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,f){if(!f||c<=0||c>3)return null;var h=f._size,d=h[0],p=h[1],m=0,v=Math.max(16,10*Math.sqrt(p));v=Math.min(p-2,v);var y=i(c,f,d,p,v);MJe(y,l,null);for(var w=y._index,b=y._ptr,A=b[p],x=[],_=[],S=0,E=p+1,T=2*(p+1),D=3*(p+1),N=4*(p+1),P=5*(p+1),M=6*(p+1),j=7*(p+1),K=x,k=a(p,b,_,S,D,K,T,j,E,M,N,P),V=s(p,b,_,P,N,M,v,E,D,K,T),q=0,H,te,ue,re,L,ie,X,pe,de,ae,z,ne,fe,Q,ye,me;V<p;){for(ue=-1;q<p&&(ue=_[D+q])===-1;q++);_[T+ue]!==-1&&(K[_[T+ue]]=-1),_[D+q]=_[T+ue];var De=_[N+ue],Le=_[E+ue];V+=Le;var ze=0;_[E+ue]=-Le;var Be=b[ue],Ve=De===0?Be:A,Ke=Ve;for(re=1;re<=De+1;re++){for(re>De?(ie=ue,X=Be,pe=_[S+ue]-De):(ie=w[Be++],X=b[ie],pe=_[S+ie]),L=1;L<=pe;L++)H=w[X++],!((de=_[E+H])<=0)&&(ze+=de,_[E+H]=-de,w[Ke++]=H,_[T+H]!==-1&&(K[_[T+H]]=K[H]),K[H]!==-1?_[T+K[H]]=_[T+H]:_[D+_[P+H]]=_[T+H]);ie!==ue&&(b[ie]=jh(ue),_[M+ie]=0)}for(De!==0&&(A=Ke),_[P+ue]=ze,b[ue]=Ve,_[S+ue]=Ke-Ve,_[N+ue]=-2,k=o(k,m,_,M,p),ae=Ve;ae<Ke;ae++)if(H=w[ae],!((z=_[N+H])<=0)){de=-_[E+H];var ee=k-de;for(Be=b[H],ne=b[H]+z-1;Be<=ne;Be++)ie=w[Be],_[M+ie]>=k?_[M+ie]-=de:_[M+ie]!==0&&(_[M+ie]=_[P+ie]+ee)}for(ae=Ve;ae<Ke;ae++){for(H=w[ae],ne=b[H],fe=ne+_[N+H]-1,Q=ne,ye=0,me=0,Be=ne;Be<=fe;Be++)if(ie=w[Be],_[M+ie]!==0){var ce=_[M+ie]-k;ce>0?(me+=ce,w[Q++]=ie,ye+=ie):(b[ie]=jh(ue),_[M+ie]=0)}_[N+H]=Q-ne+1;var G=Q,Z=ne+_[S+H];for(Be=fe+1;Be<Z;Be++){te=w[Be];var oe=_[E+te];oe<=0||(me+=oe,w[Q++]=te,ye+=te)}me===0?(b[H]=jh(ue),de=-_[E+H],ze-=de,Le+=de,V+=de,_[E+H]=0,_[N+H]=-1):(_[P+H]=Math.min(_[P+H],me),w[Q]=w[G],w[G]=w[ne],w[ne]=ue,_[S+H]=Q-ne+1,ye=(ye<0?-ye:ye)%p,_[T+H]=_[j+ye],_[j+ye]=H,K[H]=ye)}for(_[P+ue]=ze,m=Math.max(m,ze),k=o(k+m,m,_,M,p),ae=Ve;ae<Ke;ae++)if(H=w[ae],!(_[E+H]>=0))for(ye=K[H],H=_[j+ye],_[j+ye]=-1;H!==-1&&_[T+H]!==-1;H=_[T+H],k++){for(pe=_[S+H],z=_[N+H],Be=b[H]+1;Be<=b[H]+pe-1;Be++)_[M+w[Be]]=k;var he=H;for(te=_[T+H];te!==-1;){var ve=_[S+te]===pe&&_[N+te]===z;for(Be=b[te]+1;ve&&Be<=b[te]+pe-1;Be++)_[M+w[Be]]!==k&&(ve=0);ve?(b[te]=jh(H),_[E+H]+=_[E+te],_[E+te]=0,_[N+te]=-1,te=_[T+te],_[T+he]=te):(he=te,te=_[T+te])}}for(Be=Ve,ae=Ve;ae<Ke;ae++)H=w[ae],!((de=-_[E+H])<=0)&&(_[E+H]=de,me=_[P+H]+ze-de,me=Math.min(me,p-V-de),_[D+me]!==-1&&(K[_[D+me]]=H),_[T+H]=_[D+me],K[H]=-1,_[D+me]=H,q=Math.min(q,me),_[P+H]=me,w[Be++]=H);_[E+ue]=Le,(_[S+ue]=Be-Ve)===0&&(b[ue]=-1,_[M+ue]=0),De!==0&&(A=Be)}for(H=0;H<p;H++)b[H]=jh(b[H]);for(te=0;te<=p;te++)_[D+te]=-1;for(te=p;te>=0;te--)_[E+te]>0||(_[T+te]=_[D+b[te]],_[D+b[te]]=te);for(ie=p;ie>=0;ie--)_[E+ie]<=0||b[ie]!==-1&&(_[T+ie]=_[D+b[ie]],_[D+b[ie]]=ie);for(ue=0,H=0;H<=p;H++)b[H]===-1&&(ue=mpe(H,ue,_,D,T,x,M));return x.splice(x.length-1,1),x};function i(u,c,f,h,d){var p=n(c);if(u===1&&h===f)return e(c,p);if(u===2){for(var m=p._index,v=p._ptr,y=0,w=0;w<f;w++){var b=v[w];if(v[w]=y,!(v[w+1]-b>d))for(var A=v[w+1];b<A;b++)m[y++]=m[b]}return v[f]=y,c=n(p),r(p,c)}return r(p,c)}function a(u,c,f,h,d,p,m,v,y,w,b,A){for(var x=0;x<u;x++)f[h+x]=c[x+1]-c[x];f[h+u]=0;for(var _=0;_<=u;_++)f[d+_]=-1,p[_]=-1,f[m+_]=-1,f[v+_]=-1,f[y+_]=1,f[w+_]=1,f[b+_]=0,f[A+_]=f[h+_];var S=o(0,0,f,w,u);return f[b+u]=-2,c[u]=-1,f[w+u]=0,S}function s(u,c,f,h,d,p,m,v,y,w,b){for(var A=0,x=0;x<u;x++){var _=f[h+x];if(_===0)f[d+x]=-2,A++,c[x]=-1,f[p+x]=0;else if(_>m)f[v+x]=0,f[d+x]=-1,A++,c[x]=jh(u),f[v+u]++;else{var S=f[y+_];S!==-1&&(w[S]=x),f[b+x]=f[y+_],f[y+_]=x}}return A}function o(u,c,f,h,d){if(u<2||u+c<0){for(var p=0;p<d;p++)f[h+p]!==0&&(f[h+p]=1);u=2}return u}function l(u,c){return u!==c}});function RJe(t,e,r,n,i,a,s){var o,l,u=0,c;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var f=r[a+t];if(r[a+t]=e,f===-1)u=1,c=t;else{for(u=2,c=f;c!==r[s+c];c=r[s+c]);for(o=f;o!==c;o=l)l=r[s+o],r[s+o]=c}return{jleaf:u,q:c}}var FJe="csCounts",LJe=["transpose"],BJe=Y(FJe,LJe,t=>{var{transpose:e}=t;return function(r,n,i,a){if(!r||!n||!i)return null;var s=r._size,o=s[0],l=s[1],u,c,f,h,d,p,m,v=4*l+(a?l+o+1:0),y=[],w=0,b=l,A=2*l,x=3*l,_=4*l,S=5*l+1;for(f=0;f<v;f++)y[f]=-1;var E=[],T=e(r),D=T._index,N=T._ptr;for(f=0;f<l;f++)for(c=i[f],E[c]=y[x+c]===-1?1:0;c!==-1&&y[x+c]===-1;c=n[c])y[x+c]=f;if(a){for(f=0;f<l;f++)y[i[f]]=f;for(u=0;u<o;u++){for(f=l,p=N[u],m=N[u+1],d=p;d<m;d++)f=Math.min(f,y[D[d]]);y[S+u]=y[_+f],y[_+f]=u}}for(u=0;u<l;u++)y[w+u]=u;for(f=0;f<l;f++){for(c=i[f],n[c]!==-1&&E[n[c]]--,h=a?y[_+f]:c;h!==-1;h=a?y[S+h]:-1)for(d=N[h];d<N[h+1];d++){u=D[d];var P=RJe(u,c,y,x,b,A,w);P.jleaf>=1&&E[c]++,P.jleaf===2&&E[P.q]--}n[c]!==-1&&(y[w+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(E[n[c]]+=E[c]);return E}}),$Je="csSqr",jJe=["add","multiply","transpose"],VJe=Y($Je,jJe,t=>{var{add:e,multiply:r,transpose:n}=t,i=kJe({add:e,multiply:r,transpose:n}),a=BJe({transpose:n});return function(l,u,c){var f=u._ptr,h=u._size,d=h[1],p,m={};if(m.q=i(l,u),l&&!m.q)return null;if(c){var v=l?DJe(u,null,m.q):u;m.parent=PJe(v);var y=NJe(m.parent,d);if(m.cp=a(v,m.parent,y,1),v&&m.parent&&m.cp&&s(v,m))for(m.unz=0,p=0;p<d;p++)m.unz+=m.cp[p]}else m.unz=4*f[d]+d,m.lnz=m.unz;return m};function s(o,l){var u=o._ptr,c=o._index,f=o._size,h=f[0],d=f[1];l.pinv=[],l.leftmost=[];var p=l.parent,m=l.pinv,v=l.leftmost,y=[],w=0,b=h,A=h+d,x=h+2*d,_,S,E,T,D;for(S=0;S<d;S++)y[b+S]=-1,y[A+S]=-1,y[x+S]=0;for(_=0;_<h;_++)v[_]=-1;for(S=d-1;S>=0;S--)for(T=u[S],D=u[S+1],E=T;E<D;E++)v[c[E]]=S;for(_=h-1;_>=0;_--)m[_]=-1,S=v[_],S!==-1&&(y[x+S]++===0&&(y[A+S]=_),y[w+_]=y[b+S],y[b+S]=_);for(l.lnz=0,l.m2=h,S=0;S<d;S++)if(_=y[b+S],l.lnz++,_<0&&(_=l.m2++),m[_]=S,!(--x[S]<=0)){l.lnz+=y[x+S];var N=p[S];N!==-1&&(y[x+N]===0&&(y[A+N]=y[A+S]),y[w+y[A+S]]=y[b+N],y[b+N]=y[w+_],y[x+N]+=y[x+S])}for(_=0;_<h;_++)m[_]<0&&(m[_]=S++);return!0}});function A4(t,e){return t[e]<0}function gpe(t,e){t[e]=jh(t[e])}function kY(t){return t<0?jh(t):t}function UJe(t,e,r,n,i){var a=e._index,s=e._ptr,o=e._size,l=o[1],u,c,f,h=0;for(n[0]=t;h>=0;){t=n[h];var d=i?i[t]:t;A4(s,t)||(gpe(s,t),n[l+h]=d<0?0:kY(s[d]));var p=1;for(c=n[l+h],f=d<0?0:kY(s[d+1]);c<f;c++)if(u=a[c],!A4(s,u)){n[l+h]=c,n[++h]=u,p=0;break}p&&(h--,n[--r]=t)}return r}function zJe(t,e,r,n,i){var a=t._ptr,s=t._size,o=e._index,l=e._ptr,u=s[1],c,f,h,d=u;for(f=l[r],h=l[r+1],c=f;c<h;c++){var p=o[c];A4(a,p)||(d=UJe(p,t,d,n,i))}for(c=d;c<u;c++)gpe(a,n[c]);return d}var qJe="csSpsolve",HJe=["divideScalar","multiply","subtract"],WJe=Y(qJe,HJe,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(a,s,o,l,u,c,f){var h=a._values,d=a._index,p=a._ptr,m=a._size,v=m[1],y=s._values,w=s._index,b=s._ptr,A,x,_,S,E=zJe(a,s,o,l,c);for(A=E;A<v;A++)u[l[A]]=0;for(x=b[o],_=b[o+1],A=x;A<_;A++)u[w[A]]=y[A];for(var T=E;T<v;T++){var D=l[T],N=c?c[D]:D;if(!(N<0))for(x=p[N],_=p[N+1],u[D]=e(u[D],h[f?x:_-1]),A=f?x+1:x,S=f?_:_-1;A<S;A++){var P=d[A];u[P]=n(u[P],r(h[A],u[D]))}}return E}}),GJe="csLu",KJe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],XJe=Y(GJe,KJe,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=t,l=WJe({divideScalar:r,multiply:n,subtract:i});return function(c,f,h){if(!c)return null;var d=c._size,p=d[1],m,v=100,y=100;f&&(m=f.q,v=f.lnz||v,y=f.unz||y);var w=[],b=[],A=[],x=new o({values:w,index:b,ptr:A,size:[p,p]}),_=[],S=[],E=[],T=new o({values:_,index:S,ptr:E,size:[p,p]}),D=[],N,P,M=[],j=[];for(N=0;N<p;N++)M[N]=0,D[N]=-1,A[N+1]=0;v=0,y=0;for(var K=0;K<p;K++){A[K]=v,E[K]=y;var k=m?m[K]:K,V=l(x,c,k,j,M,D,1),q=-1,H=-1;for(P=V;P<p;P++)if(N=j[P],D[N]<0){var te=e(M[N]);a(te,H)&&(H=te,q=N)}else S[y]=D[N],_[y++]=M[N];if(q===-1||H<=0)return null;D[k]<0&&s(e(M[k]),n(H,h))&&(q=k);var ue=M[q];for(S[y]=K,_[y++]=ue,D[q]=K,b[v]=q,w[v++]=1,P=V;P<p;P++)N=j[P],D[N]<0&&(b[v]=N,w[v++]=r(M[N],ue)),M[N]=0}for(A[p]=v,E[p]=y,P=0;P<v;P++)b[P]=D[b[P]];return w.splice(v,w.length-v),b.splice(v,b.length-v),_.splice(y,_.length-y),S.splice(y,S.length-y),{L:x,U:T,pinv:D}}}),RY="slu",YJe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],QJe=Y(RY,YJe,t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=t,f=VJe({add:n,multiply:i,transpose:a}),h=XJe({abs:r,divideScalar:s,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(RY,{"SparseMatrix, number, number":function(p,m,v){if(!nt(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=f(m,p,!1),w=h(p,y,v);return{L:w.L,U:w.U,p:w.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function FY(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var LY="lusolve",ZJe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],JJe=Y(LY,ZJe,t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=t,l=JS({DenseMatrix:o});return e(LY,{"Array, Array | Matrix":function(h,d){h=r(h);var p=n(h),m=c(p.L,p.U,p.p,null,d);return m.valueOf()},"DenseMatrix, Array | Matrix":function(h,d){var p=n(h);return c(p.L,p.U,p.p,null,d)},"SparseMatrix, Array | Matrix":function(h,d){var p=n(h);return c(p.L,p.U,p.p,null,d)},"SparseMatrix, Array | Matrix, number, number":function(h,d,p,m){var v=i(h,p,m);return c(v.L,v.U,v.p,v.q,d)},"Object, Array | Matrix":function(h,d){return c(h.L,h.U,h.p,h.q,d)}});function u(f){if(ft(f))return f;if(gr(f))return r(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,h,d,p,m){f=u(f),h=u(h),d&&(m=l(f,m,!0),m._data=FY(d,m._data));var v=s(f,m),y=a(h,v);return p&&(y._data=FY(p,y._data)),y}}),BY="polynomialRoot",eet=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],tet=Y(BY,eet,t=>{var{typed:e,isZero:r,equalScalar:n,add:i,subtract:a,multiply:s,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:h,re:d}=t;return e(BY,{"number|Complex, ...number|Complex":(p,m)=>{for(var v=[p,...m];v.length>0&&r(v[v.length-1]);)v.pop();if(v.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(m,"] must have a non-zero non-constant coefficient"));switch(v.length){case 2:return[u(o(v[0],v[1]))];case 3:{var[y,w,b]=v,A=s(2,b),x=s(w,w),_=s(4,b,y);if(n(x,_))return[o(u(w),A)];var S=l(a(x,_));return[o(a(S,w),A),o(a(u(S),w),A)]}case 4:{var[E,T,D,N]=v,P=u(s(3,N)),M=s(D,D),j=s(3,N,T),K=i(s(2,D,D,D),s(27,N,N,E)),k=s(9,N,D,T);if(n(M,j)&&n(K,k))return[o(D,P)];var V=a(M,j),q=a(K,k),H=i(s(18,N,D,T,E),s(D,D,T,T)),te=i(s(4,D,D,D,E),s(4,N,T,T,T),s(27,N,N,E,E));if(n(H,te))return[o(a(s(4,N,D,T),i(s(9,N,N,E),s(D,D,D))),s(N,V)),o(a(s(9,N,E),s(D,T)),s(2,V))];var ue;n(M,j)?ue=q:ue=o(i(q,l(a(s(q,q),s(4,V,V,V)))),2);var re=!0,L=c(ue,re).toArray().map(ie=>o(i(D,ie,o(V,ie)),P));return L.map(ie=>f(ie)==="Complex"&&n(d(ie),d(ie)+h(ie))?d(ie):ie)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(v))}}})}),ret="Help",net=["evaluate"],iet=Y(ret,net,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,s=e("config()"),o={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(f){c=f}c!==void 0&&!xhe(c)&&(i+="        "+Ft(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},r.prototype.toJSON=function(){var n=wt(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new r(i)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),aet="Chain",set=["?on","math","typed"],oet=Y(aet,set,t=>{var{on:e,math:r,typed:n}=t;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Ehe(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Ft(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function s(u,c){Kze(i.prototype,u,function(){var h=c();if(typeof h=="function")return o(h)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(u)){var h=n.resolve(u,c);if(h.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(h.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")a(u,c);else{var f=function(p){Je(u,p)&&l[p]===void 0&&s(p,()=>u[p])};for(var h in u)f(h)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(r),e&&e("import",function(u,c,f){f||s(u,c)}),i},{isClass:!0}),$Y={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},uet={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},cet={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},fet={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},het={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},det={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},pet={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},met={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},get={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},vet={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},yet={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},jY={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},bet={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},wet={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},xet={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},Aet={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},_et={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},Eet={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},Cet={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},Tet={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},Det={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},Net={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},Pet={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},Met={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},Iet={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},Oet={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},ket={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},Ret={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Fet={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},Let={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Bet={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},$et={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},jet={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},Vet={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},Uet={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},zet={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},qet={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},Het={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Wet={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Get={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Ket={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},Xet={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},Yet={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},Qet={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Zet={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},Jet={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},ett={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},ttt={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},rtt={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},ntt={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},itt={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},att={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},stt={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ott={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},ltt={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},utt={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},ctt={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},ftt={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},htt={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},dtt={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},ptt={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},mtt={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},gtt={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},vtt={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},ytt={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},btt={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},wtt={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},xtt={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},Att={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},_tt={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},Ett={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},Stt={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},Ctt={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},Ttt={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},Dtt={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},Ntt={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},Ptt={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},Mtt={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},Itt={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},Ott={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},ktt={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},Rtt={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},Ftt={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},Ltt={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},Btt={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},$tt={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},jtt={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},Vtt={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Utt={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},ztt={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},qtt={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Htt={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Wtt={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Gtt={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Ktt={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},Xtt={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},Ytt={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Qtt={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Ztt={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},Jtt={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},ert={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},trt={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},rrt={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},nrt={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},irt={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},art={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},srt={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},ort={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},lrt={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},urt={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},crt={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},frt={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},hrt={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},drt={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},prt={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},mrt={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},grt={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},vrt={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},yrt={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},brt={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},wrt={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},xrt={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Art={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},_rt={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Ert={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Srt={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},Crt={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Trt={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},Drt={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},Nrt={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},Prt={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Mrt={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Irt={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Ort={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},krt={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Rrt={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Frt={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},Lrt={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},Brt={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},$rt={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},jrt={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Vrt={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Urt={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},zrt={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},qrt={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Hrt={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Wrt={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Grt={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Krt={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Xrt={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Yrt={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Qrt={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Zrt={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Jrt={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},ent={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},tnt={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},rnt={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},nnt={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},int={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},ant={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},snt={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},ont={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},lnt={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},unt={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},cnt={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},fnt={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},hnt={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},dnt={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},pnt={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},mnt={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},gnt={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},vnt={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},ynt={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},bnt={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},wnt={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},xnt={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Ant={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},_nt={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},Ent={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},Snt={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},Cnt={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},Tnt={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},Dnt={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},Nnt={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},Pnt={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Mnt={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Int={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},Ont={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},knt={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},Rnt={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Fnt={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Lnt={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Bnt={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},$nt={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},jnt={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},Vnt={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},Unt={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},znt={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},qnt={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},Hnt={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},Wnt={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},Gnt={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},Knt={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},Xnt={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Ynt={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},Qnt={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Znt={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},Jnt={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},eit={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},tit={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},rit={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},nit={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},iit={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},ait={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},sit={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},oit={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},lit={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},uit={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},cit={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},fit={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},hit={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},dit={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},pit={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},mit={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},git={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},vit={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},yit={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},bit={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},wit={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},xit={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Ait={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},_it={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},Eit={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},Sit={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},Cit={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},Tit={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},Dit={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},Nit={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},Pit={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},Mit={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Iit={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},Oit={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},kit={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},Rit={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},Fit={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},Lit={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Bit={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},$it={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},jit={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},Vit={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Uit={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},zit={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},qit={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Hit={bignumber:Eet,bigint:Cet,boolean:Tet,complex:Det,createUnit:Net,fraction:Pet,index:Met,matrix:Iet,number:Oet,sparse:ket,splitUnit:Ret,string:Fet,unit:Let,e:$Y,E:$Y,false:uet,i:cet,Infinity:fet,LN2:det,LN10:het,LOG2E:met,LOG10E:pet,NaN:get,null:vet,pi:jY,PI:jY,phi:yet,SQRT1_2:bet,SQRT2:wet,tau:xet,true:Aet,version:_et,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Vet,lsolve:zet,lsolveAll:qet,lup:Het,lusolve:Wet,leafCount:Uet,polynomialRoot:Get,resolve:Yet,simplify:Qet,simplifyConstant:Zet,simplifyCore:Jet,symbolicEqual:ttt,rationalize:Xet,slu:ett,usolve:rtt,usolveAll:ntt,qr:Ket,abs:itt,add:att,cbrt:stt,ceil:ott,cube:ltt,divide:utt,dotDivide:ctt,dotMultiply:ftt,dotPow:htt,exp:dtt,expm:ptt,expm1:mtt,fix:gtt,floor:vtt,gcd:ytt,hypot:btt,lcm:xtt,log:Att,log2:Stt,log1p:Ett,log10:_tt,mod:Ctt,multiply:Ttt,norm:Dtt,nthRoot:Ntt,nthRoots:Ptt,pow:Mtt,round:Itt,sign:Ott,sqrt:ktt,sqrtm:Rtt,square:$tt,subtract:jtt,unaryMinus:Vtt,unaryPlus:Utt,xgcd:ztt,invmod:wtt,bitAnd:qtt,bitNot:Htt,bitOr:Wtt,bitXor:Gtt,leftShift:Ktt,rightArithShift:Xtt,rightLogShift:Ytt,bellNumbers:Qtt,catalan:Ztt,composition:Jtt,stirlingS2:ert,config:Bet,import:$et,typed:jet,arg:trt,conj:rrt,re:irt,im:nrt,evaluate:art,help:urt,parse:ort,parser:srt,compile:lrt,distance:crt,intersect:frt,and:hrt,not:drt,nullish:prt,or:mrt,xor:grt,mapSlices:vrt,concat:brt,count:wrt,cross:xrt,column:yrt,ctranspose:Art,det:_rt,diag:Ert,diff:Srt,dot:Crt,getMatrixDataType:Mrt,identity:Irt,filter:Drt,flatten:Nrt,forEach:Prt,inv:Ort,pinv:krt,eigs:Trt,kron:Rrt,matrixFromFunction:Brt,matrixFromRows:$rt,matrixFromColumns:Lrt,map:Frt,ones:jrt,partitionSelect:Vrt,range:Urt,resize:qrt,reshape:zrt,rotate:Hrt,rotationMatrix:Wrt,row:Grt,size:Krt,sort:Xrt,squeeze:Yrt,subset:Qrt,trace:Zrt,transpose:Jrt,zeros:ent,fft:tnt,ifft:rnt,sylvester:Ftt,schur:Ltt,lyap:Btt,solveODE:qit,bernoulli:nnt,combinations:int,combinationsWithRep:ant,factorial:snt,gamma:ont,kldivergence:unt,lgamma:lnt,multinomial:cnt,permutations:fnt,pickRandom:hnt,random:dnt,randomInt:pnt,compare:mnt,compareNatural:gnt,compareText:vnt,deepEqual:ynt,equal:bnt,equalText:wnt,larger:xnt,largerEq:Ant,smaller:_nt,smallerEq:Ent,unequal:Snt,setCartesian:Cnt,setDifference:Tnt,setDistinct:Dnt,setIntersect:Nnt,setIsSubset:Pnt,setMultiplicity:Mnt,setPowerset:Int,setSize:Ont,setSymDifference:knt,setUnion:Rnt,zpk2tf:Fnt,freqz:Lnt,erf:Bnt,zeta:$nt,cumsum:Xnt,mad:jnt,max:Vnt,mean:Unt,median:znt,min:qnt,mode:Hnt,prod:Wnt,quantileSeq:Gnt,std:Knt,sum:Ynt,variance:Qnt,corr:Znt,acos:Jnt,acosh:eit,acot:tit,acoth:rit,acsc:nit,acsch:iit,asec:ait,asech:sit,asin:oit,asinh:lit,atan:uit,atanh:fit,atan2:cit,cos:hit,cosh:dit,cot:pit,coth:mit,csc:git,csch:vit,sec:yit,sech:bit,sin:wit,sinh:xit,tan:Ait,tanh:_it,to:Eit,toBest:Sit,clone:Tit,format:Dit,bin:Cit,oct:Vit,hex:Pit,isNaN:Iit,isBounded:Oit,isFinite:kit,isInteger:Mit,isNegative:Rit,isNumeric:Fit,hasNumericValue:Nit,isPositive:Lit,isPrime:Bit,isZero:$it,print:Uit,typeOf:zit,numeric:jit},VY="help",Wit=["typed","mathWithTransform","Help"],Git=Y(VY,Wit,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(VY,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in r)if(Je(r,s)&&a===r[s]){o=s;break}}var l=is(Hit,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),UY="chain",Kit=["typed","Chain"],Xit=Y(UY,Kit,t=>{var{typed:e,Chain:r}=t;return e(UY,{"":function(){return new r},any:function(i){return new r(i)}})}),zY="det",Yit=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Qit=Y(zY,Yit,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=t;return e(zY,{any:function(c){return wt(c)},"Array | Matrix":function(c){var f;switch(ft(c)?f=c.size():Array.isArray(c)?(c=r(c),f=c.size()):f=[],f.length){case 0:return wt(c);case 1:if(f[0]===1)return wt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ft(f)+")");case 2:{var h=f[0],d=f[1];if(h===d)return l(c.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+Ft(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(f)+")")}}});function l(u,c,f){if(c===1)return wt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var h=!1,d=new Array(c).fill(0).map((S,E)=>E),p=0;p<c;p++){var m=d[p];if(s(u[m][p])){var v=void 0;for(v=p+1;v<c;v++)if(!s(u[d[v]][p])){m=d[v],d[v]=d[p],d[p]=m,h=!h;break}if(v===c)return u[m][p]}for(var y=u[m][p],w=p===0?1:u[d[p-1]][p-1],b=p+1;b<c;b++)for(var A=d[b],x=p+1;x<c;x++)u[A][x]=a(n(i(u[A][x],y),i(u[A][p],u[m][x])),w)}var _=u[d[c-1]][c-1];return h?o(_):_}}),qY="inv",Zit=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Jit=Y(qY,Zit,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:l,abs:u}=t;return e(qY,{"Array | Matrix":function(h){var d=ft(h)?h.size():xt(h);switch(d.length){case 1:if(d[0]===1)return ft(h)?r([n(1,h.valueOf()[0])]):[n(1,h[0])];throw new RangeError("Matrix must be square (size: "+Ft(d)+")");case 2:{var p=d[0],m=d[1];if(p===m)return ft(h)?r(c(h.valueOf(),p,m),h.storage()):c(h,p,m);throw new RangeError("Matrix must be square (size: "+Ft(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(d)+")")}},any:function(h){return n(1,h)}});function c(f,h,d){var p,m,v,y,w;if(h===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(h===2){var b=o(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],b),n(s(f[0][1]),b)],[n(s(f[1][0]),b),n(f[0][0],b)]]}else{var A=f.concat();for(p=0;p<h;p++)A[p]=A[p].concat();for(var x=l(h).valueOf(),_=0;_<d;_++){var S=u(A[_][_]),E=_;for(p=_+1;p<h;)u(A[p][_])>S&&(S=u(A[p][_]),E=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=E,p!==_&&(w=A[_],A[_]=A[p],A[p]=w,w=x[_],x[_]=x[p],x[p]=w);var T=A[_],D=x[_];for(p=0;p<h;p++){var N=A[p],P=x[p];if(p!==_){if(N[_]!==0){for(v=n(s(N[_]),T[_]),m=_;m<d;m++)N[m]=i(N[m],a(v,T[m]));for(m=0;m<d;m++)P[m]=i(P[m],a(v,D[m]))}}else{for(v=T[_],m=_;m<d;m++)N[m]=n(N[m],v);for(m=0;m<d;m++)P[m]=n(P[m],v)}}}return x}}}),HY="pinv",eat=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],tat=Y(HY,eat,t=>{var{typed:e,matrix:r,inv:n,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:h}=t;return e(HY,{"Array | Matrix":function(b){var A=ft(b)?b.size():xt(b);switch(A.length){case 1:return y(b)?l(b):A[0]===1?n(b):s(l(b),o(b,b));case 2:{if(y(b))return l(b);var x=A[0],_=A[1];if(x===_)try{return n(b)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return ft(b)?r(d(b.valueOf(),x,_),b.storage()):d(b,x,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(A)+")")}},any:function(b){return a(b,0)?wt(b):u(1,b)}});function d(w,b,A){var{C:x,F:_}=m(w,b,A),S=c(n(c(l(x),x)),l(x)),E=c(l(_),n(c(_,l(_))));return c(E,S)}function p(w,b,A){for(var x=wt(w),_=0,S=0;S<b;S++){if(A<=_)return x;for(var E=S;v(x[E][_]);)if(E++,b===E&&(E=S,_++,A===_))return x;[x[E],x[S]]=[x[S],x[E]];for(var T=x[S][_],D=0;D<A;D++)x[S][D]=s(x[S][D],T);for(var N=0;N<b;N++)if(N!==S){T=x[N][_];for(var P=0;P<A;P++)x[N][P]=f(x[N][P],c(-1,c(T,x[S][P])))}_++}return x}function m(w,b,A){var x=p(w,b,A),_=w.map((E,T)=>E.filter((D,N)=>N<b&&!v(o(x[N],x[N])))),S=x.filter((E,T)=>!v(o(x[T],x[T])));return{C:_,F:S}}function v(w){return a(f(w,h(1,1)),f(0,h(1,1)))}function y(w){return i(f(w,h(1,1)),f(c(w,0),h(1,1)))}});function rat(t){var{addScalar:e,subtract:r,flatten:n,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:l,bignumber:u,diag:c,size:f,reshape:h,inv:d,qr:p,usolve:m,usolveAll:v,equal:y,complex:w,larger:b,smaller:A,matrixFromColumns:x,dot:_}=t;function S(re,L,ie,X){var pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,de=E(re,L,ie,X,pe);T(re,L,ie,X,pe,de);var{values:ae,C:z}=D(re,L,ie,X,pe);if(pe){var ne=N(re,L,z,de,ae,ie,X);return{values:ae,eigenvectors:ne}}return{values:ae}}function E(re,L,ie,X,pe){var de=X==="BigNumber",ae=X==="Complex",z=de?u(0):0,ne=de?u(1):ae?w(1):1,fe=de?u(1):1,Q=de?u(10):2,ye=a(Q,Q),me;pe&&(me=Array(L).fill(ne));for(var De=!1;!De;){De=!0;for(var Le=0;Le<L;Le++){for(var ze=z,Be=z,Ve=0;Ve<L;Ve++)Le!==Ve&&(ze=e(ze,l(re[Ve][Le])),Be=e(Be,l(re[Le][Ve])));if(!y(ze,0)&&!y(Be,0)){for(var Ke=fe,ee=ze,ce=s(Be,Q),G=a(Be,Q);A(ee,ce);)ee=a(ee,ye),Ke=a(Ke,Q);for(;b(ee,G);)ee=s(ee,ye),Ke=s(Ke,Q);var Z=A(s(e(ee,Be),Ke),a(e(ze,Be),.95));if(Z){De=!1;for(var oe=s(1,Ke),he=0;he<L;he++)Le!==he&&(re[Le][he]=a(re[Le][he],oe),re[he][Le]=a(re[he][Le],Ke));pe&&(me[Le]=a(me[Le],oe))}}}}return pe?c(me):null}function T(re,L,ie,X,pe,de){var ae=X==="BigNumber",z=X==="Complex",ne=ae?u(0):z?w(0):0;ae&&(ie=u(ie));for(var fe=0;fe<L-2;fe++){for(var Q=0,ye=ne,me=fe+1;me<L;me++){var De=re[me][fe];A(l(ye),l(De))&&(ye=De,Q=me)}if(!A(l(ye),ie)){if(Q!==fe+1){var Le=re[Q];re[Q]=re[fe+1],re[fe+1]=Le;for(var ze=0;ze<L;ze++){var Be=re[ze][Q];re[ze][Q]=re[ze][fe+1],re[ze][fe+1]=Be}if(pe){var Ve=de[Q];de[Q]=de[fe+1],de[fe+1]=Ve}}for(var Ke=fe+2;Ke<L;Ke++){var ee=s(re[Ke][fe],ye);if(ee!==0){for(var ce=0;ce<L;ce++)re[Ke][ce]=r(re[Ke][ce],a(ee,re[fe+1][ce]));for(var G=0;G<L;G++)re[G][fe+1]=e(re[G][fe+1],a(ee,re[G][Ke]));if(pe)for(var Z=0;Z<L;Z++)de[Ke][Z]=r(de[Ke][Z],a(ee,de[fe+1][Z]))}}}}return de}function D(re,L,ie,X,pe){var de=X==="BigNumber",ae=X==="Complex",z=de?u(1):ae?w(1):1;de&&(ie=u(ie));for(var ne=wt(re),fe=[],Q=L,ye=[],me=pe?c(Array(L).fill(z)):void 0,De=pe?c(Array(Q).fill(z)):void 0,Le=0;Le<=100;){Le+=1;for(var ze=ne[Q-1][Q-1],Be=0;Be<Q;Be++)ne[Be][Be]=r(ne[Be][Be],ze);var{Q:Ve,R:Ke}=p(ne);ne=i(Ke,Ve);for(var ee=0;ee<Q;ee++)ne[ee][ee]=e(ne[ee][ee],ze);if(pe&&(De=i(De,Ve)),Q===1||A(l(ne[Q-1][Q-2]),ie)){Le=0,fe.push(ne[Q-1][Q-1]),pe&&(ye.unshift([[1]]),j(De,L),me=i(me,De),Q>1&&(De=c(Array(Q-1).fill(z)))),Q-=1,ne.pop();for(var ce=0;ce<Q;ce++)ne[ce].pop()}else if(Q===2||A(l(ne[Q-2][Q-3]),ie)){Le=0;var G=P(ne[Q-2][Q-2],ne[Q-2][Q-1],ne[Q-1][Q-2],ne[Q-1][Q-1]);fe.push(...G),pe&&(ye.unshift(M(ne[Q-2][Q-2],ne[Q-2][Q-1],ne[Q-1][Q-2],ne[Q-1][Q-1],G[0],G[1],ie,X)),j(De,L),me=i(me,De),Q>2&&(De=c(Array(Q-2).fill(z)))),Q-=2,ne.pop(),ne.pop();for(var Z=0;Z<Q;Z++)ne[Z].pop(),ne[Z].pop()}if(Q===0)break}if(fe.sort((ve,ge)=>+r(l(ve),l(ge))),Le>100){var oe=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+fe.join(", "));throw oe.values=fe,oe.vectors=[],oe}var he=pe?i(me,K(ye,L)):void 0;return{values:fe,C:he}}function N(re,L,ie,X,pe,de,ae){var z=d(ie),ne=i(z,re,ie),fe=ae==="BigNumber",Q=ae==="Complex",ye=fe?u(0):Q?w(0):0,me=fe?u(1):Q?w(1):1,De=[],Le=[];for(var ze of pe){var Be=k(De,ze,y);Be===-1?(De.push(ze),Le.push(1)):Le[Be]+=1}for(var Ve=[],Ke=De.length,ee=Array(L).fill(ye),ce=c(Array(L).fill(me)),G=function(){var he=De[Z],ve=r(ne,i(he,ce)),ge=v(ve,ee);for(ge.shift();ge.length<Le[Z];){var Pe=V(ve,L,ge,de,ae);if(Pe===null)break;ge.push(Pe)}var Se=i(d(X),ie);ge=ge.map($e=>i(Se,$e)),Ve.push(...ge.map($e=>({value:he,vector:n($e)})))},Z=0;Z<Ke;Z++)G();return Ve}function P(re,L,ie,X){var pe=e(re,X),de=r(a(re,X),a(L,ie)),ae=a(pe,.5),z=a(o(r(a(pe,pe),a(4,de))),.5);return[e(ae,z),r(ae,z)]}function M(re,L,ie,X,pe,de,ae,z){var ne=z==="BigNumber",fe=z==="Complex",Q=ne?u(0):fe?w(0):0,ye=ne?u(1):fe?w(1):1;if(A(l(ie),ae))return[[ye,Q],[Q,ye]];if(b(l(r(pe,de)),ae))return[[r(pe,X),r(de,X)],[ie,ie]];var me=r(re,pe),De=r(X,pe);return A(l(L),ae)&&A(l(De),ae)?[[me,ye],[ie,Q]]:[[L,Q],[De,ye]]}function j(re,L){for(var ie=0;ie<re.length;ie++)re[ie].push(...Array(L-re[ie].length).fill(0));for(var X=re.length;X<L;X++)re.push(Array(L).fill(0)),re[X][X]=1;return re}function K(re,L){for(var ie=[],X=0;X<L;X++)ie[X]=Array(L).fill(0);var pe=0;for(var de of re){for(var ae=de.length,z=0;z<ae;z++)for(var ne=0;ne<ae;ne++)ie[pe+z][pe+ne]=de[z][ne];pe+=ae}return ie}function k(re,L,ie){for(var X=0;X<re.length;X++)if(ie(re[X],L))return X;return-1}function V(re,L,ie,X,pe){for(var de=pe==="BigNumber"?u(1e3):1e3,ae,z=0;z<5;++z){ae=q(L,ie,pe);try{ae=m(re,ae)}catch{continue}if(b(te(ae),de))break}if(z>=5)return null;for(z=0;;){var ne=m(re,ae);if(A(te(H(ae,[ne])),X))break;if(++z>=10)return null;ae=ue(ne)}return ae}function q(re,L,ie){var X=ie==="BigNumber",pe=ie==="Complex",de=Array(re).fill(0).map(ae=>2*Math.random()-1);return X&&(de=de.map(ae=>u(ae))),pe&&(de=de.map(ae=>w(ae))),de=H(de,L),ue(de,ie)}function H(re,L){var ie=f(re);for(var X of L)X=h(X,ie),re=r(re,i(s(_(X,re),_(X,X)),X));return re}function te(re){return l(o(_(re,re)))}function ue(re,L){var ie=L==="BigNumber",X=L==="Complex",pe=ie?u(1):X?w(1):1;return i(s(pe,te(re)),re)}return S}function nat(t){var{config:e,addScalar:r,subtract:n,abs:i,atan:a,cos:s,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:h}=t;function d(T,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,P=arguments.length>3?arguments[3]:void 0,M=arguments.length>4?arguments[4]:void 0;if(P==="number")return p(T,N,M);if(P==="BigNumber")return m(T,N,M);throw TypeError("Unsupported data type: "+P)}function p(T,D,N){var P=T.length,M=Math.abs(D/P),j,K;if(N){K=new Array(P);for(var k=0;k<P;k++)K[k]=Array(P).fill(0),K[k][k]=1}for(var V=_(T);Math.abs(V[1])>=Math.abs(M);){var q=V[0][0],H=V[0][1];j=v(T[q][q],T[H][H],T[q][H]),T=x(T,j,q,H),N&&(K=w(K,j,q,H)),V=_(T)}for(var te=Array(P).fill(0),ue=0;ue<P;ue++)te[ue]=T[ue][ue];return E(wt(te),K,N)}function m(T,D,N){var P=T.length,M=i(D/P),j,K;if(N){K=new Array(P);for(var k=0;k<P;k++)K[k]=Array(P).fill(0),K[k][k]=1}for(var V=S(T);i(V[1])>=i(M);){var q=V[0][0],H=V[0][1];j=y(T[q][q],T[H][H],T[q][H]),T=A(T,j,q,H),N&&(K=b(K,j,q,H)),V=S(T)}for(var te=Array(P).fill(0),ue=0;ue<P;ue++)te[ue]=T[ue][ue];return E(wt(te),K,N)}function v(T,D,N){var P=D-T;return Math.abs(P)<=e.relTol?Math.PI/4:.5*Math.atan(2*N/(D-T))}function y(T,D,N){var P=n(D,T);return i(P)<=e.relTol?c(-1).acos().div(4):l(.5,a(f(2,N,u(P))))}function w(T,D,N,P){for(var M=T.length,j=Math.cos(D),K=Math.sin(D),k=Array(M).fill(0),V=Array(M).fill(0),q=0;q<M;q++)k[q]=j*T[q][N]-K*T[q][P],V[q]=K*T[q][N]+j*T[q][P];for(var H=0;H<M;H++)T[H][N]=k[H],T[H][P]=V[H];return T}function b(T,D,N,P){for(var M=T.length,j=s(D),K=o(D),k=Array(M).fill(c(0)),V=Array(M).fill(c(0)),q=0;q<M;q++)k[q]=n(l(j,T[q][N]),l(K,T[q][P])),V[q]=r(l(K,T[q][N]),l(j,T[q][P]));for(var H=0;H<M;H++)T[H][N]=k[H],T[H][P]=V[H];return T}function A(T,D,N,P){for(var M=T.length,j=c(s(D)),K=c(o(D)),k=l(j,j),V=l(K,K),q=Array(M).fill(c(0)),H=Array(M).fill(c(0)),te=f(c(2),j,K,T[N][P]),ue=r(n(l(k,T[N][N]),te),l(V,T[P][P])),re=h(l(V,T[N][N]),te,l(k,T[P][P])),L=0;L<M;L++)q[L]=n(l(j,T[N][L]),l(K,T[P][L])),H[L]=r(l(K,T[N][L]),l(j,T[P][L]));T[N][N]=ue,T[P][P]=re,T[N][P]=c(0),T[P][N]=c(0);for(var ie=0;ie<M;ie++)ie!==N&&ie!==P&&(T[N][ie]=q[ie],T[ie][N]=q[ie],T[P][ie]=H[ie],T[ie][P]=H[ie]);return T}function x(T,D,N,P){for(var M=T.length,j=Math.cos(D),K=Math.sin(D),k=j*j,V=K*K,q=Array(M).fill(0),H=Array(M).fill(0),te=k*T[N][N]-2*j*K*T[N][P]+V*T[P][P],ue=V*T[N][N]+2*j*K*T[N][P]+k*T[P][P],re=0;re<M;re++)q[re]=j*T[N][re]-K*T[P][re],H[re]=K*T[N][re]+j*T[P][re];T[N][N]=te,T[P][P]=ue,T[N][P]=0,T[P][N]=0;for(var L=0;L<M;L++)L!==N&&L!==P&&(T[N][L]=q[L],T[L][N]=q[L],T[P][L]=H[L],T[L][P]=H[L]);return T}function _(T){for(var D=T.length,N=0,P=[0,1],M=0;M<D;M++)for(var j=M+1;j<D;j++)Math.abs(N)<Math.abs(T[M][j])&&(N=Math.abs(T[M][j]),P=[M,j]);return[P,N]}function S(T){for(var D=T.length,N=0,P=[0,1],M=0;M<D;M++)for(var j=M+1;j<D;j++)i(N)<i(T[M][j])&&(N=i(T[M][j]),P=[M,j]);return[P,N]}function E(T,D,N){var P=T.length,M=Array(P),j;if(N){j=Array(P);for(var K=0;K<P;K++)j[K]=Array(P)}for(var k=0;k<P;k++){for(var V=0,q=T[0],H=0;H<T.length;H++)i(T[H])<i(q)&&(V=H,q=T[V]);if(M[k]=T.splice(V,1)[0],N)for(var te=0;te<P;te++)j[k][te]=D[te][V],D[te].splice(V,1)}if(!N)return{values:M};var ue=j.map((re,L)=>({value:M[L],vector:re}));return{values:M,eigenvectors:ue}}return d}var iat="eigs",aat=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],sat=Y(iat,aat,t=>{var{config:e,typed:r,matrix:n,addScalar:i,subtract:a,equal:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:h,inv:d,bignumber:p,multiply:m,add:v,larger:y,column:w,flatten:b,number:A,complex:x,sqrt:_,diag:S,size:E,reshape:T,qr:D,usolve:N,usolveAll:P,im:M,re:j,smaller:K,matrixFromColumns:k,dot:V}=t,q=nat({config:e,addScalar:i,subtract:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,inv:d,bignumber:p,multiply:m,add:v}),H=rat({addScalar:i,subtract:a,multiply:m,multiplyScalar:f,flatten:b,divideScalar:h,sqrt:_,abs:o,bignumber:p,diag:S,size:E,reshape:T,qr:D,inv:d,usolve:N,usolveAll:P,equal:s,complex:x,larger:y,smaller:K,matrixFromColumns:k,dot:V});return r("eigs",{Array:function(de){return te(n(de))},"Array, number|BigNumber":function(de,ae){return te(n(de),{precision:ae})},"Array, Object"(pe,de){return te(n(pe),de)},Matrix:function(de){return te(de,{matricize:!0})},"Matrix, number|BigNumber":function(de,ae){return te(de,{precision:ae,matricize:!0})},"Matrix, Object":function(de,ae){var z={matricize:!0};return Bn(z,ae),te(de,z)}});function te(pe){var de,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z="eigenvectors"in ae?ae.eigenvectors:!0,ne=(de=ae.precision)!==null&&de!==void 0?de:e.relTol,fe=ue(pe,ne,z);return ae.matricize&&(fe.values=n(fe.values),z&&(fe.eigenvectors=fe.eigenvectors.map(Q=>{var{value:ye,vector:me}=Q;return{value:ye,vector:n(me)}}))),z&&Object.defineProperty(fe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),fe}function ue(pe,de,ae){var z=pe.toArray(),ne=pe.size();if(ne.length!==2||ne[0]!==ne[1])throw new RangeError("Matrix must be square (size: ".concat(Ft(ne),")"));var fe=ne[0];if(L(z,fe,de)&&(ie(z,fe),re(z,fe,de))){var Q=X(pe,z,fe);return q(z,fe,de,Q,ae)}var ye=X(pe,z,fe);return H(z,fe,de,ye,ae)}function re(pe,de,ae){for(var z=0;z<de;z++)for(var ne=z;ne<de;ne++)if(y(p(o(a(pe[z][ne],pe[ne][z]))),ae))return!1;return!0}function L(pe,de,ae){for(var z=0;z<de;z++)for(var ne=0;ne<de;ne++)if(y(p(o(M(pe[z][ne]))),ae))return!1;return!0}function ie(pe,de){for(var ae=0;ae<de;ae++)for(var z=0;z<de;z++)pe[ae][z]=j(pe[ae][z])}function X(pe,de,ae){var z=pe.datatype();if(z==="number"||z==="BigNumber"||z==="Complex")return z;for(var ne=!1,fe=!1,Q=!1,ye=0;ye<ae;ye++)for(var me=0;me<ae;me++){var De=de[ye][me];if(ot(De)||YS(De))ne=!0;else if(St(De))fe=!0;else if(jf(De))Q=!0;else throw TypeError("Unsupported type in Matrix: "+yr(De))}if(fe&&Q&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Q){for(var Le=0;Le<ae;Le++)for(var ze=0;ze<ae;ze++)de[Le][ze]=x(de[Le][ze]);return"Complex"}if(fe){for(var Be=0;Be<ae;Be++)for(var Ve=0;Ve<ae;Ve++)de[Be][Ve]=p(de[Be][Ve]);return"BigNumber"}if(ne){for(var Ke=0;Ke<ae;Ke++)for(var ee=0;ee<ae;ee++)de[Ke][ee]=A(de[Ke][ee]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),WY="expm",oat=["typed","abs","add","identity","inv","multiply"],lat=Y(WY,oat,t=>{var{typed:e,abs:r,add:n,identity:i,inv:a,multiply:s}=t;return e(WY,{Matrix:function(f){var h=f.size();if(h.length!==2||h[0]!==h[1])throw new RangeError("Matrix must be square (size: "+Ft(h)+")");for(var d=h[0],p=1e-15,m=o(f),v=l(m,p),y=v.q,w=v.j,b=s(f,Math.pow(2,-w)),A=i(d),x=i(d),_=1,S=b,E=-1,T=1;T<=y;T++)T>1&&(S=s(S,b),E=-E),_=_*(y-T+1)/((2*y-T+1)*T),A=n(A,s(_,S)),x=n(x,s(_*E,S));for(var D=s(a(x),A),N=0;N<w;N++)D=s(D,D);return Im(f)?f.createSparseMatrix(D):D}});function o(c){for(var f=c.size()[0],h=0,d=0;d<f;d++){for(var p=0,m=0;m<f;m++)p+=r(c.get([d,m]));h=Math.max(p,h)}return h}function l(c,f){for(var h=30,d=0;d<h;d++)for(var p=0;p<=d;p++){var m=d-p;if(u(c,p,m)<f)return{q:p,j:m}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,h){for(var d=1,p=2;p<=f;p++)d*=p;for(var m=d,v=f+1;v<=2*f;v++)m*=v;var y=m*(2*f+1);return 8*Math.pow(c/Math.pow(2,h),2*f)*d*d/(m*y)}}),GY="sqrtm",uat=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],cat=Y(GY,uat,t=>{var{typed:e,abs:r,add:n,multiply:i,map:a,sqrt:s,subtract:o,inv:l,size:u,max:c,identity:f}=t,h=1e3,d=1e-6;function p(m){var v,y=0,w=m,b=f(u(m));do{var A=w;if(w=i(.5,n(A,l(b))),b=i(.5,n(b,l(A))),v=c(r(o(w,A))),v>d&&++y>h)throw new Error("computing square root of matrix: iterative method could not converge")}while(v>d);return w}return e(GY,{"Array | Matrix":function(v){var y=ft(v)?v.size():xt(v);switch(y.length){case 1:if(y[0]===1)return a(v,s);throw new RangeError("Matrix must be square (size: "+Ft(y)+")");case 2:{var w=y[0],b=y[1];if(w===b)return p(v);throw new RangeError("Matrix must be square (size: "+Ft(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Ft(y)+")")}}})}),KY="sylvester",fat=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],hat=Y(KY,fat,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:i,multiply:a,range:s,concat:o,transpose:l,index:u,subset:c,add:f,subtract:h,identity:d,lusolve:p,abs:m,config:v}=t;return e(KY,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(b,A,x){return y(i(b),A,x)},"Array, Array, Matrix":function(b,A,x){return y(i(b),i(A),x)},"Array, Matrix, Array":function(b,A,x){return y(i(b),A,i(x))},"Matrix, Array, Matrix":function(b,A,x){return y(b,i(A),x)},"Matrix, Array, Array":function(b,A,x){return y(b,i(A),i(x))},"Matrix, Matrix, Array":function(b,A,x){return y(b,A,i(x))},"Array, Array, Array":function(b,A,x){return y(i(b),i(A),i(x)).toArray()}});function y(w,b,A){for(var x=b.size()[0],_=w.size()[0],S=r(w),E=S.T,T=S.U,D=r(a(-1,b)),N=D.T,P=D.U,M=a(a(l(T),A),P),j=s(0,_),K=[],k=(ye,me)=>o(ye,me,1),V=(ye,me)=>o(ye,me,0),q=0;q<x;q++)if(q<x-1&&m(c(N,u(q+1,q)))>1e-5){for(var H=V(c(M,u(j,[q])),c(M,u(j,[q+1]))),te=0;te<q;te++)H=f(H,V(a(K[te],c(N,u(te,q))),a(K[te],c(N,u(te,q+1)))));var ue=a(d(_),a(-1,c(N,u(q,q)))),re=a(d(_),a(-1,c(N,u(q+1,q)))),L=a(d(_),a(-1,c(N,u(q,q+1)))),ie=a(d(_),a(-1,c(N,u(q+1,q+1)))),X=V(k(f(E,ue),re),k(L,f(E,ie))),pe=p(X,H);K[q]=pe.subset(u(s(0,_),[0])),K[q+1]=pe.subset(u(s(_,2*_),[0])),q++}else{for(var de=c(M,u(j,[q])),ae=0;ae<q;ae++)de=f(de,a(K[ae],c(N,u(ae,q))));var z=c(N,u(q,q)),ne=h(E,a(z,d(_)));K[q]=p(ne,de)}var fe=i(n(...K)),Q=a(T,a(fe,l(P)));return Q}}),XY="schur",dat=["typed","matrix","identity","multiply","qr","norm","subtract"],pat=Y(XY,dat,t=>{var{typed:e,matrix:r,identity:n,multiply:i,qr:a,norm:s,subtract:o}=t;return e(XY,{Array:function(c){var f=l(r(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,h=n(c),d=0,p;do{p=f;var m=a(f),v=m.Q,y=m.R;if(f=i(y,v),h=i(h,v),d++>100)break}while(s(o(f,p))>1e-4);return{U:h,T:f}}}),YY="lyap",mat=["typed","matrix","sylvester","multiply","transpose"],gat=Y(YY,mat,t=>{var{typed:e,matrix:r,sylvester:n,multiply:i,transpose:a}=t;return e(YY,{"Matrix, Matrix":function(o,l){return n(o,a(o),i(-1,l))},"Array, Matrix":function(o,l){return n(r(o),a(r(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,a(r(o)),r(i(-1,l)))},"Array, Array":function(o,l){return n(r(o),a(r(o)),r(i(-1,l))).toArray()}})}),vat="divide",yat=["typed","matrix","multiply","equalScalar","divideScalar","inv"],bat=Y(vat,yat,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:a,inv:s}=t,o=ya({typed:e,equalScalar:i}),l=Dl({typed:e});return e("divide",She({"Array | Matrix, Array | Matrix":function(c,f){return n(c,s(f))},"DenseMatrix, any":function(c,f){return l(c,f,a,!1)},"SparseMatrix, any":function(c,f){return o(c,f,a,!1)},"Array, any":function(c,f){return l(r(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,s(f))}},a.signatures))}),QY="distance",wat=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],xat=Y(QY,wat,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:l}=t;return e(QY,{"Array, Array, Array":function(x,_,S){if(x.length===2&&_.length===2&&S.length===2){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(_,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var E=n(S[1],_[1]),T=n(_[0],S[0]),D=n(i(S[0],_[1]),i(_[0],S[1]));return v(x[0],x[1],E,T,D)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,_,S){if(Object.keys(x).length===2&&Object.keys(_).length===2&&Object.keys(S).length===2){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(p(_),p(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var E=n(S.lineTwoPtY,_.lineOnePtY),T=n(_.lineOnePtX,S.lineTwoPtX),D=n(i(S.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,S.lineTwoPtY));return v(x.pointX,x.pointY,E,T,D)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,_){if(x.length===2&&_.length===3){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return v(x[0],x[1],_[0],_[1],_[2])}else if(x.length===3&&_.length===6){if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!d(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(x[0],x[1],x[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(x.length===_.length&&x.length>0){if(!h(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(x,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,_){if(Object.keys(x).length===2&&Object.keys(_).length===3){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return v(x.pointX,x.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(_).length===6){if(!f(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!d(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return y(x.pointX,x.pointY,x.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(_).length===2){if(!c(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in _&&"pointTwoY"in _)return w([x.pointOneX,x.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(_).length===3){if(!f(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return w([x.pointOneX,x.pointOneY,x.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!m(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(x)}});function u(A){return typeof A=="number"||St(A)}function c(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])}function f(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])}function h(A){return Array.isArray(A)||(A=p(A)),A.every(u)}function d(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])&&u(A[3])&&u(A[4])&&u(A[5])}function p(A){for(var x=Object.keys(A),_=[],S=0;S<x.length;S++)_.push(A[x[S]]);return _}function m(A){if(A[0].length===2&&u(A[0][0])&&u(A[0][1])){if(A.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(A[0].length===3&&u(A[0][0])&&u(A[0][1])&&u(A[0][2])){if(A.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function v(A,x,_,S,E){var T=l(r(r(i(_,A),i(S,x)),E)),D=o(r(i(_,_),i(S,S)));return a(T,D)}function y(A,x,_,S,E,T,D,N,P){var M=[n(i(n(E,x),P),i(n(T,_),N)),n(i(n(T,_),D),i(n(S,A),P)),n(i(n(S,A),N),i(n(E,x),D))];M=o(r(r(i(M[0],M[0]),i(M[1],M[1])),i(M[2],M[2])));var j=o(r(r(i(D,D),i(N,N)),i(P,P)));return a(M,j)}function w(A,x){for(var _=A.length,S=0,E=0,T=0;T<_;T++)E=n(A[T],x[T]),S=r(i(E,E),S);return o(S)}function b(A){for(var x=[],_=[],S=[],E=0;E<A.length-1;E++)for(var T=E+1;T<A.length;T++)A[0].length===2?(_=[A[E][0],A[E][1]],S=[A[T][0],A[T][1]]):A[0].length===3&&(_=[A[E][0],A[E][1],A[E][2]],S=[A[T][0],A[T][1],A[T][2]]),x.push(w(_,S));return x}}),Aat="intersect",_at=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Eat=Y(Aat,_at,t=>{var{typed:e,config:r,abs:n,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:h,flatten:d,isZero:p,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":y,"Matrix, Matrix, Matrix":function(N,P,M){var j=v(N.valueOf(),P.valueOf(),M.valueOf());return j===null?null:s(j)},"Matrix, Matrix, Matrix, Matrix":function(N,P,M,j){var K=y(N.valueOf(),P.valueOf(),M.valueOf(),j.valueOf());return K===null?null:s(K)}});function v(D,N,P){if(D=w(D),N=w(N),P=w(P),!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(P))throw new TypeError("Array with 4 numbers expected as third argument");return T(D[0],D[1],D[2],N[0],N[1],N[2],P[0],P[1],P[2],P[3])}function y(D,N,P,M){if(D=w(D),N=w(N),P=w(P),M=w(M),D.length===2){if(!b(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(P))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(D,N,P,M)}else if(D.length===3){if(!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!A(P))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!A(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(D[0],D[1],D[2],N[0],N[1],N[2],P[0],P[1],P[2],M[0],M[1],M[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(N=>Array.isArray(N)&&N.length===1)?d(D):D}function b(D){return D.length===2&&m(D[0])&&m(D[1])}function A(D){return D.length===3&&m(D[0])&&m(D[1])&&m(D[2])}function x(D){return D.length===4&&m(D[0])&&m(D[1])&&m(D[2])&&m(D[3])}function _(D,N,P,M){var j=D,K=P,k=c(j,N),V=c(K,M),q=c(l(k[0],V[1]),l(V[0],k[1]));if(p(q)||f(n(q),r.relTol))return null;var H=l(V[0],j[1]),te=l(V[1],j[0]),ue=l(V[0],K[1]),re=l(V[1],K[0]),L=u(a(c(c(H,te),ue),re),q);return i(o(k,L),j)}function S(D,N,P,M,j,K,k,V,q,H,te,ue){var re=l(c(D,N),c(P,M)),L=l(c(j,K),c(k,V)),ie=l(c(q,H),c(te,ue));return a(a(re,L),ie)}function E(D,N,P,M,j,K,k,V,q,H,te,ue){var re=S(D,k,H,k,N,V,te,V,P,q,ue,q),L=S(H,k,M,D,te,V,j,N,ue,q,K,P),ie=S(D,k,M,D,N,V,j,N,P,q,K,P),X=S(H,k,H,k,te,V,te,V,ue,q,ue,q),pe=S(M,D,M,D,j,N,j,N,K,P,K,P),de=c(l(re,L),l(ie,X)),ae=c(l(pe,X),l(L,L));if(p(ae))return null;var z=u(de,ae),ne=u(a(re,l(z,L)),X),fe=a(D,l(z,c(M,D))),Q=a(N,l(z,c(j,N))),ye=a(P,l(z,c(K,P))),me=a(k,l(ne,c(H,k))),De=a(V,l(ne,c(te,V))),Le=a(q,l(ne,c(ue,q)));return h(fe,me)&&h(Q,De)&&h(ye,Le)?[fe,Q,ye]:null}function T(D,N,P,M,j,K,k,V,q,H){var te=l(D,k),ue=l(M,k),re=l(N,V),L=l(j,V),ie=l(P,q),X=l(K,q),pe=c(c(c(H,te),re),ie),de=c(c(c(a(a(ue,L),X),te),re),ie),ae=u(pe,de),z=a(D,l(ae,c(M,D))),ne=a(N,l(ae,c(j,N))),fe=a(P,l(ae,c(K,P)));return[z,ne,fe]}}),ZY="sum",Sat=["typed","config","add","numeric"],vpe=Y(ZY,Sat,t=>{var{typed:e,config:r,add:n,numeric:i}=t;return e(ZY,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(l){if(Q1(l))throw new TypeError("Scalar values expected in function sum");return a(l)}});function a(o){var l;return Tp(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw fs(c,"sum",u)}}),l===void 0&&(l=i(0,r.number)),typeof l=="string"&&(l=i(l,Up(l,r))),l}function s(o,l){try{var u=hO(o,l,n);return u}catch(c){throw fs(c,"sum")}}}),zT="cumsum",Cat=["typed","add","unaryPlus"],ype=Y(zT,Cat,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(zT,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(u,c){return u.create(s(u.valueOf(),c),u.datatype())},"...":function(u){if(Q1(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return a(l)}catch(u){throw fs(u,zT)}}function a(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(r(u[c-1],l[c]));return u}function s(l,u){var c=xt(l);if(u<0||u>=c.length)throw new gu(u,c.length);try{return o(l,u)}catch(f){throw fs(f,zT)}}function o(l,u){var c,f,h;if(u<=0){var d=l[0][0];if(Array.isArray(d)){for(h=Jhe(l),f=[],c=0;c<h.length;c++)f[c]=o(h[c],u-1);return f}else return a(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=o(l[c],u-1);return f}}}),JY="mean",Tat=["typed","add","divide"],bpe=Y(JY,Tat,t=>{var{typed:e,add:r,divide:n}=t;return e(JY,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Q1(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var l=hO(s,o,r),u=Array.isArray(s)?xt(s):s.size();return n(l,u[o])}catch(c){throw fs(c,"mean")}}function a(s){var o,l=0;if(Tp(s,function(u){try{o=o===void 0?u:r(o,u),l++}catch(c){throw fs(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),eQ="median",Dat=["typed","add","divide","compare","partitionSelect"],Nat=Y(eQ,Dat,t=>{var{typed:e,add:r,divide:n,compare:i,partitionSelect:a}=t;function s(u){try{u=er(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,h=a(u,f+1),d=u[f],p=0;p<f;++p)i(u[p],d)>0&&(d=u[p]);return l(d,h)}else{var m=a(u,(c-1)/2);return o(m)}}catch(v){throw fs(v,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(r(c,f),2)}});return e(eQ,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Q1(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),tQ="mad",Pat=["typed","abs","map","median","subtract"],Mat=Y(tQ,Pat,t=>{var{typed:e,abs:r,map:n,median:i,subtract:a}=t;return e(tQ,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(o){if(o=er(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return r(a(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):fs(u,"mad")}}}),OR="unbiased",rQ="variance",Iat=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],wpe=Y(rQ,Iat,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=t;return e(rQ,{"Array | Matrix":function(f){return l(f,OR)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,h){return u(f,h,OR)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,OR)}});function l(c,f){var h,d=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Tp(c,function(v){try{h=h===void 0?v:r(h,v),d++}catch(y){throw fs(y,"variance",v)}}),d===0)throw new Error("Cannot calculate variance of an empty array");var p=a(h,d);if(h=void 0,Tp(c,function(v){var y=n(v,p);h=h===void 0?i(y,y):r(h,i(y,y))}),o(h))return h;switch(f){case"uncorrected":return a(h,d);case"biased":return a(h,d+1);case"unbiased":{var m=St(h)?h.mul(0):0;return d===1?m:a(h,d-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,h){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,d=>l(d,h))}catch(d){throw fs(d,"variance")}}}),nQ="quantileSeq",Oat=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],xpe=Y(nQ,Oat,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d}=t;return e(nQ,{"Array | Matrix, number | BigNumber":(w,b)=>m(w,b,!1),"Array | Matrix, number | BigNumber, number":(w,b,A)=>p(w,b,!1,A,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(w,b,A,x)=>p(w,b,A,x,m),"Array | Matrix, Array | Matrix":(w,b)=>v(w,b,!1),"Array | Matrix, Array | Matrix, number":(w,b,A)=>p(w,b,!1,A,v),"Array | Matrix, Array | Matrix, boolean":v,"Array | Matrix, Array | Matrix, boolean, number":(w,b,A,x)=>p(w,b,A,x,v)});function p(w,b,A,x,_){return d(w,x,S=>_(S,b,A))}function m(w,b,A){var x,_=w.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(f(b,1))return ot(b)?y(_,b,A):r(y(_,b,A));if(h(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(h(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var S=n(b,1);x=[];for(var E=0;c(E,b);E++){var T=a(E+1,S);x.push(y(_,T,A))}return ot(b)?x:r(x)}}function v(w,b,A){for(var x=w.valueOf(),_=b.valueOf(),S=[],E=0;E<_.length;++E)S.push(y(x,_[E],A));return S}function y(w,b,A){var x=er(w),_=x.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var S=ot(b)?b*(_-1):b.times(_-1),E=ot(b)?Math.floor(S):S.floor().toNumber(),T=ot(b)?S%1:S.minus(E);if(u(S))return A?x[S]:o(x,ot(b)?S:S.valueOf());var D,N;if(A)D=x[E],N=x[E+1];else{N=o(x,E+1),D=x[E];for(var P=0;P<E;++P)l(x[P],D)>0&&(D=x[P])}return n(s(D,i(1,T)),s(N,T))}}),iQ="std",kat=["typed","map","sqrt","variance"],Ape=Y(iQ,kat,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t;return e(iQ,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return To(l)?r(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),aQ="corr",Rat=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Fat=Y(aQ,Rat,t=>{var{typed:e,matrix:r,sqrt:n,sum:i,add:a,subtract:s,multiply:o,pow:l,divide:u}=t;return e(aQ,{"Array, Array":function(d,p){return c(d,p)},"Matrix, Matrix":function(d,p){var m=c(d.toArray(),p.toArray());return Array.isArray(m)?r(m):m}});function c(h,d){var p=[];if(Array.isArray(h[0])&&Array.isArray(d[0])){if(h.length!==d.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var m=0;m<h.length;m++){if(h[m].length!==d[m].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(h[m],d[m]))}return p}else{if(h.length!==d.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(h,d)}}function f(h,d){var p=h.length,m=i(h),v=i(d),y=h.reduce((_,S,E)=>a(_,o(S,d[E])),0),w=i(h.map(_=>l(_,2))),b=i(d.map(_=>l(_,2))),A=s(o(p,y),o(m,v)),x=n(o(s(o(p,w),l(m,2)),s(o(p,b),l(v,2))));return u(A,x)}}),sQ="bernoulli",Lat=["typed","config","isInteger","number","?BigNumber","?Fraction"],Bat=Y(sQ,Lat,t=>{var{typed:e,config:r,number:n,BigNumber:i,Fraction:a}=t,s=[void 0],o=[void 0],l=[void 0],u=50;return e(sQ,{number:c=>kR(c,f=>f,s,(f,h)=>f+h,(f,h)=>f*h,(f,h)=>f/h),"bigint | Fraction":c=>kR(n(c),f=>new a(f),o,(f,h)=>f.add(h),(f,h)=>f.mul(h),(f,h)=>f.div(h)),BigNumber:c=>(r.precision!==u&&(l=[void 0],u=r.precision),kR(n(c),f=>new i(f),l,(f,h)=>f.add(h),(f,h)=>f.mul(h),(f,h)=>f.div(h)))})});function kR(t,e,r,n,i,a){if(t<0||!nt(t))throw new RangeError("Bernoulli index must be nonnegative integer");if(t===0)return e(1);if(t===1)return a(e(-1),e(2));if(t%2===1)return e(0);var s=e(1);r.length===1&&r.push([a(s,e(-3)),a(s,e(-2)),a(s,e(6))]);for(var o=t/2,l=e(0),u=e(2);r.length<=o;){for(var c=r.length,f=Math.floor((c+1)/2),h=l,d=1;d<f;++d)h=n(h,i(r[d][0],r[c-d][0]));h=i(h,u),c%2===0&&(h=n(h,i(r[f][0],r[f][0]))),h=a(h,e(-(2*c+1)));var p=a(i(r[c-1][1],e(-c*(2*c-1))),u);r.push([h,p,i(p,h)])}return r[o][2]}var oQ="combinations",$at=["typed"],jat=Y(oQ,$at,t=>{var{typed:e}=t;return e(oQ,{"number, number":wde,"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=n.minus(i),u=new a(1);if(!lQ(n)||!lQ(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function lQ(t){return t.isInteger()&&t.gte(0)}var uQ="combinationsWithRep",Vat=["typed"],Uat=Y(uQ,Vat,t=>{var{typed:e}=t;return e(uQ,{"number, number":function(n,i){if(!nt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!nt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=kf(n,n+i-1);return a/kf(1,i)}var s=kf(i+1,n+i-1);return s/kf(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=new a(1),u=n.minus(l);if(!cQ(n)||!cQ(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function cQ(t){return t.isInteger()&&t.gte(0)}var fQ="gamma",zat=["typed","config","multiplyScalar","pow","BigNumber","Complex"],qat=Y(fQ,zat,t=>{var{typed:e,config:r,multiplyScalar:n,pow:i,BigNumber:a,Complex:s}=t;function o(u){if(u.im===0)return wP(u.re);if(u.re<.5){var c=new s(1-u.re,-u.im),f=new s(Math.PI*u.re,Math.PI*u.im);return new s(Math.PI).div(f.sin()).div(o(c))}u=new s(u.re-1,u.im);for(var h=new s(w0[0],0),d=1;d<w0.length;++d){var p=new s(w0[d],0);h=h.add(p.div(u.add(d)))}var m=new s(u.re+Ade+.5,u.im),v=Math.sqrt(2*Math.PI),y=m.pow(u.add(.5)),w=m.neg().exp();return h.mul(v).mul(y).mul(w)}return e(fQ,{number:wP,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):l(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var c=r.precision+(Math.log(u.toNumber())|0),f=a.clone({precision:c});if(u%2===1)return u.times(l(new a(u-1)));for(var h=u,d=new f(u),p=u.toNumber();h>2;)h-=2,p+=h,d=d.times(p);return new a(d.toPrecision(a.precision))}}),hQ="lgamma",Hat=["Complex","typed"],Wat=Y(hQ,Hat,t=>{var{Complex:e,typed:r}=t,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(hQ,{number:xP,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(u){var c=6.283185307179586,f=1.1447298858494002,h=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(xP(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=h){var d=m9e(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),m=s(new e(1-u.re,-u.im));return new e(f,d).sub(p).sub(m)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(_de),f=new e(1,0).div(u),h=f.div(u),d=a[0],p=a[1],m=2*h.re,v=h.re*h.re+h.im*h.im,y=2;y<8;y++){var w=p;p=-v*d+a[y],d=m*d+w}var b=f.mul(h.mul(d).add(p));return c.add(b)}function l(u){var c=0,f=0,h=u;for(u=u.add(1);u.re<=n;){h=h.mul(u);var d=h.im<0?1:0;d!==0&&f===0&&c++,f=d,u=u.add(1)}return o(u).sub(h.log()).sub(new e(0,c*2*Math.PI*1))}}),dQ="factorial",Gat=["typed","gamma"],Kat=Y(dQ,Gat,t=>{var{typed:e,gamma:r}=t;return e(dQ,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return r(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return r(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),pQ="kldivergence",Xat=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],Yat=Y(pQ,Xat,t=>{var{typed:e,matrix:r,divide:n,sum:i,multiply:a,map:s,dotDivide:o,log:l,isNumeric:u}=t;return e(pQ,{"Array, Array":function(h,d){return c(r(h),r(d))},"Matrix, Array":function(h,d){return c(h,r(d))},"Array, Matrix":function(h,d){return c(r(h),d)},"Matrix, Matrix":function(h,d){return c(h,d)}});function c(f,h){var d=h.size().length,p=f.size().length;if(d>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(d!==p)throw new Error("Length of two vectors must be equal");var m=i(f);if(m===0)throw new Error("Sum of elements in first object must be non zero");var v=i(h);if(v===0)throw new Error("Sum of elements in second object must be non zero");var y=n(f,i(f)),w=n(h,i(h)),b=i(a(y,s(o(y,w),A=>l(A))));return u(b)?b:Number.NaN}}),mQ="multinomial",Qat=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Zat=Y(mQ,Qat,t=>{var{typed:e,add:r,divide:n,multiply:i,factorial:a,isInteger:s,isPositive:o}=t;return e(mQ,{"Array | Matrix":function(u){var c=0,f=1;return Tp(u,function(h){if(!s(h)||!o(h))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,h),f=i(f,a(h))}),n(a(c),f)}})}),gQ="permutations",Jat=["typed","factorial"],est=Y(gQ,Jat,t=>{var{typed:e,factorial:r}=t;return e(gQ,{"number | BigNumber":r,"number, number":function(i,a){if(!nt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!nt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return kf(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!vQ(i)||!vQ(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(s=l,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function vQ(t){return t.isInteger()&&t.gte(0)}var vV={exports:{}};vV.exports;(function(t){(function(e,r,n){function i(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new i(l),f=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function o(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:this.alea=s})(Nv,t)})(vV);var tst=vV.exports,yV={exports:{}};yV.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xor128=s})(Nv,t)})(yV);var rst=yV.exports,bV={exports:{}};bV.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xorwow=s})(Nv,t)})(bV);var nst=bV.exports,wV={exports:{}};wV.exports;(function(t){(function(e,r,n){function i(o){var l=this;l.next=function(){var c=l.x,f=l.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,l.i=f+1&7,d};function u(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}u(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xorshift7=s})(Nv,t)})(wV);var ist=wV.exports,xV={exports:{}};xV.exports;(function(t){(function(e,r,n){function i(o){var l=this;l.next=function(){var c=l.w,f=l.X,h=l.i,d,p;return l.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,l.i=h,p+(c^c>>>16)|0};function u(c,f){var h,d,p,m,v,y=[],w=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,w=Math.max(w,f.length)),p=0,m=-32;m<w;++m)f&&(d^=f.charCodeAt((m+32)%f.length)),m===0&&(v=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(v=v+1640531527|0,h=y[m&127]^=d+v,p=h==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],h=y[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,y[p]=d^h;c.w=v,c.X=y,c.i=p}u(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xor4096=s})(Nv,t)})(xV);var ast=xV.exports,AV={exports:{}};AV.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.next=function(){var f=l.b,h=l.c,d=l.d,p=l.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^h,l.c=h=h-d|0,l.d=d<<16^h>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.tychei=s})(Nv,t)})(AV);var sst=AV.exports,_pe={exports:{}};const ost={},lst=Object.freeze(Object.defineProperty({__proto__:null,default:ost},Symbol.toStringTag,{value:"Module"})),ust=Lme(lst);(function(t){(function(e,r,n){var i=256,a=6,s=52,o="random",l=n.pow(i,a),u=n.pow(2,s),c=u*2,f=i-1,h;function d(A,x,_){var S=[];x=x==!0?{entropy:!0}:x||{};var E=y(v(x.entropy?[A,b(r)]:A??w(),3),S),T=new p(S),D=function(){for(var N=T.g(a),P=l,M=0;N<u;)N=(N+M)*i,P*=i,M=T.g(1);for(;N>=c;)N/=2,P/=2,M>>>=1;return(N+M)/P};return D.int32=function(){return T.g(4)|0},D.quick=function(){return T.g(4)/4294967296},D.double=D,y(b(T.S),r),(x.pass||_||function(N,P,M,j){return j&&(j.S&&m(j,T),N.state=function(){return m(T,{})}),M?(n[o]=N,P):N})(D,E,"global"in x?x.global:this==n,x.state)}function p(A){var x,_=A.length,S=this,E=0,T=S.i=S.j=0,D=S.S=[];for(_||(A=[_++]);E<i;)D[E]=E++;for(E=0;E<i;E++)D[E]=D[T=f&T+A[E%_]+(x=D[E])],D[T]=x;(S.g=function(N){for(var P,M=0,j=S.i,K=S.j,k=S.S;N--;)P=k[j=f&j+1],M=M*i+k[f&(k[j]=k[K=f&K+P])+(k[K]=P)];return S.i=j,S.j=K,M})(i)}function m(A,x){return x.i=A.i,x.j=A.j,x.S=A.S.slice(),x}function v(A,x){var _=[],S=typeof A,E;if(x&&S=="object")for(E in A)try{_.push(v(A[E],x-1))}catch{}return _.length?_:S=="string"?A:A+"\0"}function y(A,x){for(var _=A+"",S,E=0;E<_.length;)x[f&E]=f&(S^=x[f&E]*19)+_.charCodeAt(E++);return b(x)}function w(){try{var A;return h&&(A=h.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),b(A)}catch{var x=e.navigator,_=x&&x.plugins;return[+new Date,e,_,e.screen,b(r)]}}function b(A){return String.fromCharCode.apply(0,A)}if(y(n.random(),r),t.exports){t.exports=d;try{h=ust}catch{}}else n["seed"+o]=d})(typeof self<"u"?self:Nv,[],Math)})(_pe);var cst=_pe.exports,fst=tst,hst=rst,dst=nst,pst=ist,mst=ast,gst=sst,Hv=cst;Hv.alea=fst;Hv.xor128=hst;Hv.xorwow=dst;Hv.xorshift7=pst;Hv.xor4096=mst;Hv.tychei=gst;var vst=Hv;const Epe=Sl(vst);var yst=Epe(Date.now());function _1(t){var e;function r(i){e=i===null?yst:Epe(String(i))}r(t);function n(){return e()}return n}var yQ="pickRandom",bst=["typed","config","?on"],wst=Y(yQ,bst,t=>{var{typed:e,config:r,on:n}=t,i=_1(r.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=_1(s.randomSeed))}),e(yQ,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,l){return a(o,l)},"Array | Matrix, number":function(o,l){return a(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return a(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return a(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return a(o,{number:l,weights:u})}});function a(s,o){var{number:l,weights:u,elementWise:c=!0}=o,f=typeof l>"u";f&&(l=1);var h=ft(s)?s.create:ft(u)?u.create:null;s=s.valueOf(),u&&(u=u.valueOf()),c===!0&&(s=er(s),u=er(u));var d=0;if(typeof u<"u"){if(u.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var p=0,m=u.length;p<m;p++){if(!ot(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");d+=u[p]}}for(var v=s.length,y=[],w;y.length<l;){if(typeof u>"u")w=s[Math.floor(i()*v)];else for(var b=i()*d,A=0,x=s.length;A<x;A++)if(b-=u[A],b<0){w=s[A];break}y.push(w)}return f?y[0]:h?h(y):y}});function _V(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,i=t.shift();n<i;n++)r.push(_V(t,e));else for(var a=0,s=t.shift();a<s;a++)r.push(e());return r}var bQ="random",xst=["typed","config","?on"],Ast=Y(bQ,xst,t=>{var{typed:e,config:r,on:n}=t,i=_1(r.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=_1(o.randomSeed))}),e(bQ,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,l)=>s(o,l),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,l)=>a(o,0,l),"Array | Matrix, number, number":(o,l,u)=>a(o,l,u)});function a(o,l,u){var c=_V(o.valueOf(),()=>s(l,u));return ft(o)?o.create(c,"number"):c}function s(o,l){return o+i()*(l-o)}}),wQ="randomInt",_st=["typed","config","log2","?on"],Est=Y(wQ,_st,t=>{var{typed:e,config:r,log2:n,on:i}=t,a=_1(r.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(a=_1(u.randomSeed))}),e(wQ,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,c)=>o(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>s(u,0,1),"Array | Matrix, number":(u,c)=>s(u,0,c),"Array | Matrix, number, number":(u,c,f)=>s(u,c,f)});function s(u,c,f){var h=_V(u.valueOf(),()=>o(c,f));return ft(u)?u.create(h,"number"):h}function o(u,c){return Math.floor(u+a()*(c-u))}function l(u,c){var f=2n**30n,h=c-u;if(h<=f)return u+BigInt(o(0,Number(h)));for(var d=n(h),p=h;p>=h;){p=0n;for(var m=0;m<d;++m)p=2n*p+(a()<.5?0n:1n)}return u+p}}),xQ="stirlingS2",Sst=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],Cst=Y(xQ,Sst,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:h,larger:d}=t,p=[],m=[];return e(xQ,{"number | BigNumber, number | BigNumber":function(y,w){if(!c(y)||u(y)||!c(w)||u(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(d(w,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(ot(y)&&ot(w)),A=b?m:p,x=b?h:f,_=f(y),S=f(w);if(A[_]&&A[_].length>S)return A[_][S];for(var E=0;E<=_;++E)if(A[E]||(A[E]=[x(E===0?1:0)]),E!==0)for(var T=A[E],D=A[E-1],N=T.length;N<=E&&N<=S;++N)N===E?T[N]=1:T[N]=r(i(x(N),D[N]),D[N-1]);return A[_][S]}})}),AQ="bellNumbers",Tst=["typed","addScalar","isNegative","isInteger","stirlingS2"],Dst=Y(AQ,Tst,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:i,stirlingS2:a}=t;return e(AQ,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=r(l,a(o,u));return l}})}),_Q="catalan",Nst=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Pst=Y(_Q,Nst,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=t;return e(_Q,{"number | BigNumber":function(u){if(!o(u)||s(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(u,2),u),r(u,1))}})}),EQ="composition",Mst=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],Ist=Y(EQ,Mst,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:i,isNegative:a,isInteger:s,larger:o}=t;return e(EQ,{"number | BigNumber, number | BigNumber":function(u,c){if(!s(u)||!i(u)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(r(u,-1),r(c,-1))}})}),SQ="leafCount",Ost=["parse","typed"],kst=Y(SQ,Ost,t=>{var{parse:e,typed:r}=t;function n(i){var a=0;return i.forEach(s=>{a+=n(s)}),a||1}return r(SQ,{Node:function(a){return n(a)}})});function CQ(t){return qt(t)||Fn(t)&&t.isUnary()&&qt(t.args[0])}function MP(t){return!!(qt(t)||(Ep(t)||Fn(t))&&t.args.every(MP)||lh(t)&&MP(t.content))}function TQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TQ(Object(r),!0).forEach(function(n){Jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Rst="simplifyUtil",Fst=["FunctionNode","OperatorNode","SymbolNode"],EV=Y(Rst,Fst,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},l={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(b,A){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,_=s;if(typeof b=="string"?_=b:Fn(b)?_=b.fn.toString():Ep(b)?_=b.name:lh(b)&&(_="paren"),Je(x,_)){var S=x[_];if(Je(S,A))return S[A];if(Je(o,_))return o[_][A]}if(Je(x,s)){var E=x[s];return Je(E,A)?E[A]:o[s][A]}if(Je(o,_)){var T=o[_];if(Je(T,A))return T[A]}return o[s][A]}function f(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"commutative",A)}function h(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"associative",A)}function d(b,A){var x=RR({},b);for(var _ in A)Je(b,_)?x[_]=RR(RR({},A[_]),b[_]):x[_]=A[_];return x}function p(b,A){if(!b.args||b.args.length===0)return b;b.args=m(b,A);for(var x=0;x<b.args.length;x++)p(b.args[x],A)}function m(b,A){var x,_=[],S=function(T){for(var D=0;D<T.args.length;D++){var N=T.args[D];Fn(N)&&x===N.op?S(N):_.push(N)}};return h(b,A)?(x=b.op,S(b),_):b.args}function v(b,A){if(!(!b.args||b.args.length===0)){for(var x=w(b),_=b.args.length,S=0;S<_;S++)v(b.args[S],A);if(_>2&&h(b,A)){for(var E=b.args.pop();b.args.length>0;)E=x([b.args.pop(),E]);b.args=E.args}}}function y(b,A){if(!(!b.args||b.args.length===0)){for(var x=w(b),_=b.args.length,S=0;S<_;S++)y(b.args[S],A);if(_>2&&h(b,A)){for(var E=b.args.shift();b.args.length>0;)E=x([E,b.args.shift()]);b.args=E.args}}}function w(b){return Fn(b)?function(A){try{return new r(b.op,b.fn,A,b.implicit)}catch(x){return console.error(x),[]}}:function(A){return new e(new n(b.name),A)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:f,isAssociative:h,mergeContext:d,flatten:p,allChildren:m,unflattenr:v,unflattenl:y,defaultContext:o,realContext:l,positiveContext:u}}),Lst="simplify",Bst=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],$st=Y(Lst,Bst,t=>{var{typed:e,parse:r,equal:n,resolve:i,simplifyConstant:a,simplifyCore:s,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:h,OperatorNode:d,ParenthesisNode:p,SymbolNode:m,replacer:v}=t,{hasProperty:y,isCommutative:w,isAssociative:b,mergeContext:A,flatten:x,unflattenr:_,unflattenl:S,createMakeNodeFunction:E,defaultContext:T,realContext:D,positiveContext:N}=EV({FunctionNode:c,OperatorNode:d,SymbolNode:m});e.addConversion({from:"Object",to:"Map",convert:y0});var P=e("simplify",{Node:H,"Node, Map":(ae,z)=>H(ae,!1,z),"Node, Map, Object":(ae,z,ne)=>H(ae,!1,z,ne),"Node, Array":H,"Node, Array, Map":H,"Node, Array, Map, Object":H});e.removeConversion({from:"Object",to:"Map",convert:y0}),P.defaultContext=T,P.realContext=D,P.positiveContext=N;function M(ae){return ae.transform(function(z){return lh(z)?M(z.content):z})}var j={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};P.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function K(ae,z){var ne={};if(ae.s){var fe=ae.s.split("->");if(fe.length===2)ne.l=fe[0],ne.r=fe[1];else throw SyntaxError("Could not parse rule: "+ae.s)}else ne.l=ae.l,ne.r=ae.r;ne.l=M(r(ne.l)),ne.r=M(r(ne.r));for(var Q of["imposeContext","repeat","assuming"])Q in ae&&(ne[Q]=ae[Q]);if(ae.evaluate&&(ne.evaluate=r(ae.evaluate)),b(ne.l,z)){var ye=!w(ne.l,z),me;ye&&(me=q());var De=E(ne.l),Le=q();ne.expanded={},ne.expanded.l=De([ne.l,Le]),x(ne.expanded.l,z),_(ne.expanded.l,z),ne.expanded.r=De([ne.r,Le]),ye&&(ne.expandedNC1={},ne.expandedNC1.l=De([me,ne.l]),ne.expandedNC1.r=De([me,ne.r]),ne.expandedNC2={},ne.expandedNC2.l=De([me,ne.expanded.l]),ne.expandedNC2.r=De([me,ne.expanded.r]))}return ne}function k(ae,z){for(var ne=[],fe=0;fe<ae.length;fe++){var Q=ae[fe],ye=void 0,me=typeof Q;switch(me){case"string":Q={s:Q};case"object":ye=K(Q,z);break;case"function":ye=Q;break;default:throw TypeError("Unsupported type of rule: "+me)}ne.push(ye)}return ne}var V=0;function q(){return new m("_p"+V++)}function H(ae,z){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n_(),fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Q=fe.consoleDebug;z=k(z||P.rules,fe.context);var ye=i(ae,ne);ye=M(ye);for(var me={},De=ye.toString({parenthesis:"all"});!me[De];){me[De]=!0,V=0;var Le=De;Q&&console.log("Working on: ",De);for(var ze=0;ze<z.length;ze++){var Be="";if(typeof z[ze]=="function"?(ye=z[ze](ye,fe),Q&&(Be=z[ze].name)):(x(ye,fe.context),ye=ue(ye,z[ze],fe.context),Q&&(Be="".concat(z[ze].l.toString()," -> ").concat(z[ze].r.toString()))),Q){var Ve=ye.toString({parenthesis:"all"});Ve!==Le&&(console.log("Applying",Be,"produced",Ve),Le=Ve)}S(ye,fe.context)}De=ye.toString({parenthesis:"all"})}return ye}function te(ae,z,ne){var fe=ae;if(ae)for(var Q=0;Q<ae.length;++Q){var ye=ue(ae[Q],z,ne);ye!==ae[Q]&&(fe===ae&&(fe=ae.slice()),fe[Q]=ye)}return fe}function ue(ae,z,ne){if(z.assuming){for(var fe in z.assuming)for(var Q in z.assuming[fe])if(y(fe,Q,ne)!==z.assuming[fe][Q])return ae}var ye=A(z.imposeContext,ne),me=ae;if(me instanceof d||me instanceof c){var De=te(me.args,z,ne);De!==me.args&&(me=me.clone(),me.args=De)}else if(me instanceof p){if(me.content){var Le=ue(me.content,z,ne);Le!==me.content&&(me=new p(Le))}}else if(me instanceof l){var ze=te(me.items,z,ne);ze!==me.items&&(me=new l(ze))}else if(me instanceof o){var Be=me.object;me.object&&(Be=ue(me.object,z,ne));var Ve=me.index;me.index&&(Ve=ue(me.index,z,ne)),(Be!==me.object||Ve!==me.index)&&(me=new o(Be,Ve))}else if(me instanceof f){var Ke=te(me.dimensions,z,ne);Ke!==me.dimensions&&(me=new f(Ke))}else if(me instanceof h){var ee=!1,ce={};for(var G in me.properties)ce[G]=ue(me.properties[G],z,ne),ce[G]!==me.properties[G]&&(ee=!0);ee&&(me=new h(ce))}var Z=z.r,oe=pe(z.l,me,ye)[0];if(!oe&&z.expanded&&(Z=z.expanded.r,oe=pe(z.expanded.l,me,ye)[0]),!oe&&z.expandedNC1&&(Z=z.expandedNC1.r,oe=pe(z.expandedNC1.l,me,ye)[0],oe||(Z=z.expandedNC2.r,oe=pe(z.expandedNC2.l,me,ye)[0])),oe){var he=me.implicit;me=Z.clone(),he&&"implicit"in Z&&(me.implicit=!0),me=me.transform(function(ve){return ve.isSymbolNode&&Je(oe.placeholders,ve.name)?oe.placeholders[ve.name].clone():ve})}return z.repeat&&me!==ae&&(me=ue(me,z,ne)),me}function re(ae,z){var ne=[],fe,Q,ye=E(ae);if(w(ae,z))for(var me=0;me<ae.args.length;me++)Q=ae.args.slice(0),Q.splice(me,1),fe=Q.length===1?Q[0]:ye(Q),ne.push(ye([ae.args[me],fe]));else for(var De=1;De<ae.args.length;De++){var Le=ae.args[0];De>1&&(Le=ye(ae.args.slice(0,De))),Q=ae.args.slice(De),fe=Q.length===1?Q[0]:ye(Q),ne.push(ye([Le,fe]))}return ne}function L(ae,z){var ne={placeholders:{}};if(!ae.placeholders&&!z.placeholders)return ne;if(ae.placeholders){if(!z.placeholders)return ae}else return z;for(var fe in ae.placeholders)if(Je(ae.placeholders,fe)&&(ne.placeholders[fe]=ae.placeholders[fe],Je(z.placeholders,fe)&&!de(ae.placeholders[fe],z.placeholders[fe])))return null;for(var Q in z.placeholders)Je(z.placeholders,Q)&&(ne.placeholders[Q]=z.placeholders[Q]);return ne}function ie(ae,z){var ne=[];if(ae.length===0||z.length===0)return ne;for(var fe,Q=0;Q<ae.length;Q++)for(var ye=0;ye<z.length;ye++)fe=L(ae[Q],z[ye]),fe&&ne.push(fe);return ne}function X(ae){if(ae.length===0)return ae;for(var z=ae.reduce(ie),ne=[],fe={},Q=0;Q<z.length;Q++){var ye=JSON.stringify(z[Q],v);fe[ye]||(fe[ye]=!0,ne.push(z[Q]))}return ne}function pe(ae,z,ne,fe){var Q=[{placeholders:{}}];if(ae instanceof d&&z instanceof d||ae instanceof c&&z instanceof c){if(ae instanceof d){if(ae.op!==z.op||ae.fn!==z.fn)return[]}else if(ae instanceof c&&ae.name!==z.name)return[];if(z.args.length===1&&ae.args.length===1||!b(z,ne)&&z.args.length===ae.args.length||fe){for(var ye=[],me=0;me<ae.args.length;me++){var De=pe(ae.args[me],z.args[me],ne);if(De.length===0)break;ye.push(De)}if(ye.length!==ae.args.length){if(!w(z,ne)||ae.args.length===1)return[];if(ae.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Le=pe(ae.args[0],z.args[1],ne);if(Le.length===0)return[];var ze=pe(ae.args[1],z.args[0],ne);if(ze.length===0)return[];ye=[Le,ze]}Q=X(ye)}else if(z.args.length>=2&&ae.args.length===2){for(var Be=re(z,ne),Ve=[],Ke=0;Ke<Be.length;Ke++){var ee=pe(ae,Be[Ke],ne,!0);Ve=Ve.concat(ee)}return Ve}else{if(ae.args.length>2)throw Error("Unexpected non-binary associative function: "+ae.toString());return[]}}else if(ae instanceof m){if(ae.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(j[ae.name]){if(ae.name!==z.name)return[]}else switch(ae.name[1]>="a"&&ae.name[1]<="z"?ae.name.substring(0,2):ae.name[0]){case"n":case"_p":Q[0].placeholders[ae.name]=z;break;case"c":case"cl":if(qt(z))Q[0].placeholders[ae.name]=z;else return[];break;case"v":if(!qt(z))Q[0].placeholders[ae.name]=z;else return[];break;case"vl":if($i(z))Q[0].placeholders[ae.name]=z;else return[];break;case"cd":if(CQ(z))Q[0].placeholders[ae.name]=z;else return[];break;case"vd":if(!CQ(z))Q[0].placeholders[ae.name]=z;else return[];break;case"ce":if(MP(z))Q[0].placeholders[ae.name]=z;else return[];break;case"ve":if(!MP(z))Q[0].placeholders[ae.name]=z;else return[];break;default:throw new Error("Invalid symbol in rule: "+ae.name)}}else if(ae instanceof u){if(!n(ae.value,z.value))return[]}else return[];return Q}function de(ae,z){if(ae instanceof u&&z instanceof u){if(!n(ae.value,z.value))return!1}else if(ae instanceof m&&z instanceof m){if(ae.name!==z.name)return!1}else if(ae instanceof d&&z instanceof d||ae instanceof c&&z instanceof c){if(ae instanceof d){if(ae.op!==z.op||ae.fn!==z.fn)return!1}else if(ae instanceof c&&ae.name!==z.name)return!1;if(ae.args.length!==z.args.length)return!1;for(var ne=0;ne<ae.args.length;ne++)if(!de(ae.args[ne],z.args[ne]))return!1}else return!1;return!0}return P}),jst="simplifyConstant",Vst=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Ust=Y(jst,Vst,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:i,isBounded:a,fraction:s,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:f,IndexNode:h,ObjectNode:d,OperatorNode:p,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:w,createMakeNodeFunction:b}=EV({FunctionNode:f,OperatorNode:p,SymbolNode:m}),A=e("simplifyConstant",{Node:k=>E(K(k,{})),"Node, Object":function(V,q){return E(K(V,q))}});function x(k){return YS(k)?k.valueOf():k instanceof Array?k.map(x):ft(k)?i(x(k.valueOf())):k}function _(k,V,q){try{return n[k].apply(null,V)}catch{return V=V.map(x),D(n[k].apply(null,V),q)}}var S=e({Fraction:P,number:function(V){return V<0?N(new c(-V)):new c(V)},BigNumber:function(V){return V<0?N(new c(-V)):new c(V)},bigint:function(V){return V<0n?N(new c(-V)):new c(V)},Complex:function(V){throw new Error("Cannot convert Complex number to Node")},string:function(V){return new c(V)},Matrix:function(V){return new u(V.valueOf().map(q=>S(q)))}});function E(k){return cr(k)?k:S(k)}function T(k,V){var q=V&&V.exactFractions!==!1;if(q&&a(k)&&s){var H=s(k),te=V&&typeof V.fractionsLimit=="number"?V.fractionsLimit:1/0;if(H.valueOf()===k&&H.n<te&&H.d<te)return H}return k}var D=e({"string, Object":function(V,q){var H=Up(V,r);if(H==="BigNumber")return o===void 0&&dV(),o(V);if(H==="bigint")return BigInt(V);if(H==="Fraction")return s===void 0&&npe(),s(V);var te=parseFloat(V);return T(te,q)},"Fraction, Object":function(V,q){return V},"BigNumber, Object":function(V,q){return V},"number, Object":function(V,q){return T(V,q)},"bigint, Object":function(V,q){return V},"Complex, Object":function(V,q){return V.im!==0?V:T(V.re,q)},"Matrix, Object":function(V,q){return i(T(V.valueOf()))},"Array, Object":function(V,q){return V.map(T)}});function N(k){return new p("-","unaryMinus",[k])}function P(k){var V=te=>r.number==="BigNumber"&&o?o(te):Number(te),q=k.s*k.n,H=q<0n?new p("-","unaryMinus",[new c(-V(q))]):new c(V(q));return k.d===1n?H:new p("/","divide",[H,new c(V(k.d))])}function M(k,V,q){if(!Y1(V))return new l(E(k),E(V));if(nl(k)||ft(k)){for(var H=Array.from(V.dimensions);H.length>0;)if(qt(H[0])&&typeof H[0].value!="string"){var te=D(H.shift().value,q);nl(k)?k=k.items[te-1]:(k=k.valueOf()[te-1],k instanceof Array&&(k=i(k)))}else if(H.length>1&&qt(H[1])&&typeof H[1].value!="string"){var ue=D(H[1].value,q),re=[],L=nl(k)?k.items:k.valueOf();for(var ie of L)if(nl(ie))re.push(ie.items[ue-1]);else if(ft(k))re.push(ie[ue-1]);else break;if(re.length===L.length)nl(k)?k=new u(re):k=i(re),H.splice(1,1);else break}else break;return H.length===V.dimensions.length?new l(E(k),V):H.length>0?(V=new h(H),new l(E(k),V)):k}if(sO(k)&&V.dimensions.length===1&&qt(V.dimensions[0])){var X=V.dimensions[0].value;return X in k.properties?k.properties[X]:new c}return new l(E(k),V)}function j(k,V,q,H){var te=V.shift(),ue=V.reduce((re,L)=>{if(!cr(L)){var ie=re.pop();if(cr(ie))return[ie,L];try{return re.push(_(k,[ie,L],H)),re}catch{re.push(ie)}}re.push(E(re.pop()));var X=re.length===1?re[0]:q(re);return[q([X,E(L)])]},[te]);return ue.length===1?ue[0]:q([ue[0],S(ue[1])])}function K(k,V){switch(k.type){case"SymbolNode":return k;case"ConstantNode":switch(typeof k.value){case"number":return D(k.value,V);case"bigint":return D(k.value,V);case"string":return k.value;default:if(!isNaN(k.value))return D(k.value,V)}return k;case"FunctionNode":if(n[k.name]&&n[k.name].rawArgs)return k;{var q=["add","multiply"];if(!q.includes(k.name)){var H=k.args.map(Q=>K(Q,V));if(!H.some(cr))try{return _(k.name,H,V)}catch{}if(k.name==="size"&&H.length===1&&nl(H[0])){for(var te=[],ue=H[0];nl(ue);)te.push(ue.items.length),ue=ue.items[0];return i(te)}return new f(k.name,H.map(E))}}case"OperatorNode":{var re=k.fn.toString(),L,ie,X=b(k);if(Fn(k)&&k.isUnary())L=[K(k.args[0],V)],cr(L[0])?ie=X(L):ie=_(re,L,V);else if(y(k,V.context))if(L=w(k,V.context),L=L.map(Q=>K(Q,V)),v(re,V.context)){for(var pe=[],de=[],ae=0;ae<L.length;ae++)cr(L[ae])?de.push(L[ae]):pe.push(L[ae]);pe.length>1?(ie=j(re,pe,X,V),de.unshift(ie),ie=j(re,de,X,V)):ie=j(re,L,X,V)}else ie=j(re,L,X,V);else L=k.args.map(Q=>K(Q,V)),ie=j(re,L,X,V);return ie}case"ParenthesisNode":return K(k.content,V);case"AccessorNode":return M(K(k.object,V),K(k.index,V),V);case"ArrayNode":{var z=k.items.map(Q=>K(Q,V));return z.some(cr)?new u(z.map(E)):i(z)}case"IndexNode":return new h(k.dimensions.map(Q=>A(Q,V)));case"ObjectNode":{var ne={};for(var fe in k.properties)ne[fe]=A(k.properties[fe],V);return new d(ne)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(k.type))}}return A}),DQ="simplifyCore",zst=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],qst=Y(DQ,zst,t=>{var{typed:e,parse:r,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:h,FunctionNode:d,IndexNode:p,ObjectNode:m,OperatorNode:v,ParenthesisNode:y,SymbolNode:w}=t,b=new h(0),A=new h(1),x=new h(!0),_=new h(!1);function S(N){return Fn(N)&&["and","not","or"].includes(N.op)}var{hasProperty:E,isCommutative:T}=EV({FunctionNode:d,OperatorNode:v,SymbolNode:w});function D(N){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=P?P.context:void 0;if(E(N,"trivial",M)){if(Ep(N)&&N.args.length===1)return D(N.args[0],P);var j=!1,K=0;if(N.forEach(pe=>{++K,K===1&&(j=D(pe,P))}),K===1)return j}var k=N;if(Ep(k)){var V=IZe(k.name);if(V){if(k.args.length>2&&E(k,"associative",M))for(;k.args.length>2;){var q=k.args.pop(),H=k.args.pop();k.args.push(new v(V,k.name,[q,H]))}k=new v(V,k.name,k.args)}else return new d(D(k.fn),k.args.map(pe=>D(pe,P)))}if(Fn(k)&&k.isUnary()){var te=D(k.args[0],P);if(k.op==="~"&&Fn(te)&&te.isUnary()&&te.op==="~"||k.op==="not"&&Fn(te)&&te.isUnary()&&te.op==="not"&&S(te.args[0]))return te.args[0];var ue=!0;if(k.op==="-"&&Fn(te)&&(te.isBinary()&&te.fn==="subtract"&&(k=new v("-","subtract",[te.args[1],te.args[0]]),ue=!1),te.isUnary()&&te.op==="-"))return te.args[0];if(ue)return new v(k.op,k.fn,[te])}if(Fn(k)&&k.isBinary()){var re=D(k.args[0],P),L=D(k.args[1],P);if(k.op==="+"){if(qt(re)&&i(re.value))return L;if(qt(L)&&i(L.value))return re;Fn(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],k=new v("-","subtract",[re,L]))}if(k.op==="-")return Fn(L)&&L.isUnary()&&L.op==="-"?D(new v("+","add",[re,L.args[0]]),P):qt(re)&&i(re.value)?D(new v("-","unaryMinus",[L])):qt(L)&&i(L.value)?re:new v(k.op,k.fn,[re,L]);if(k.op==="*"){if(qt(re)){if(i(re.value))return b;if(n(re.value,1))return L}if(qt(L)){if(i(L.value))return b;if(n(L.value,1))return re;if(T(k,M))return new v(k.op,k.fn,[L,re],k.implicit)}return new v(k.op,k.fn,[re,L],k.implicit)}if(k.op==="/")return qt(re)&&i(re.value)?b:qt(L)&&n(L.value,1)?re:new v(k.op,k.fn,[re,L]);if(k.op==="^"&&qt(L)){if(i(L.value))return A;if(n(L.value,1))return re}if(k.op==="and"){if(qt(re))if(re.value){if(S(L))return L;if(qt(L))return L.value?x:_}else return _;if(qt(L))if(L.value){if(S(re))return re}else return _}if(k.op==="or"){if(qt(re)){if(re.value)return x;if(S(L))return L}if(qt(L)){if(L.value)return x;if(S(re))return re}}return new v(k.op,k.fn,[re,L])}if(Fn(k))return new v(k.op,k.fn,k.args.map(pe=>D(pe,P)));if(nl(k))return new f(k.items.map(pe=>D(pe,P)));if(oh(k))return new c(D(k.object,P),D(k.index,P));if(Y1(k))return new p(k.dimensions.map(pe=>D(pe,P)));if(sO(k)){var ie={};for(var X in k.properties)ie[X]=D(k.properties[X],P);return new m(ie)}return k}return e(DQ,{Node:D,"Node,Object":D})}),Hst="resolve",Wst=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Gst=Y(Hst,Wst,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=t;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if($i(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var h=u.get(l.name);if(cr(h)){var d=new Set(c);return d.add(l.name),o(h,u,d)}else return typeof h=="number"?r(String(h)):h!==void 0?new n(h):l}else if(Fn(l)){var p=l.args.map(function(v){return o(v,u,c)});return new a(l.op,l.fn,p,l.implicit)}else{if(lh(l))return new s(o(l.content,u,c));if(Ep(l)){var m=l.args.map(function(v){return o(v,u,c)});return new i(l.name,m)}}return l.map(v=>o(v,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,y0(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,y0(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,y0(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),NQ="symbolicEqual",Kst=["parse","simplify","typed","OperatorNode"],Xst=Y(NQ,Kst,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:i}=t;function a(s,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[s,o]),c=r(u,{},l);return qt(c)&&!c.value}return n(NQ,{"Node, Node":a,"Node, Node, Object":a})}),PQ="derivative",Yst=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Qst=Y(PQ,Yst,t=>{var{typed:e,config:r,parse:n,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:h}=t;function d(A,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S=new Map,E=x.name;function T(N){var P=S.get(N);if(P!==void 0)return P;var M=y(T,N,E);return S.set(N,M),M}var D=w(A,T);return _.simplify?i(D):D}function p(A){var x=n(A);if(!x.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(A)," into a variable in function derivative"));return x}var m=e(PQ,{"Node, SymbolNode":d,"Node, SymbolNode, Object":d,"Node, string":(A,x)=>d(A,p(x)),"Node, string, Object":(A,x,_)=>d(A,p(x),_)});m._simplify=!0,m.toTex=function(A){return v.apply(null,A.args)};var v=e("_derivTex",{"Node, SymbolNode":function(x,_){return qt(x)&&yr(x.value)==="string"?v(n(x.value).toString(),_.toString(),1):v(x.toTex(),_.toString(),1)},"Node, ConstantNode":function(x,_){if(yr(_.value)==="string")return v(x,n(_.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,_,S){return v(x.toString(),_.name,S.value)},"string, string, number":function(x,_,S){var E;return S===1?E="{d\\over d"+_+"}":E="{d^{"+S+"}\\over d"+_+"^{"+S+"}}",E+"\\left[".concat(x,"\\right]")}}),y=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(x,_,S){return _.name!==S},"function, ParenthesisNode, string":function(x,_,S){return x(_.content,S)},"function, FunctionAssignmentNode, string":function(x,_,S){return _.params.includes(S)?x(_.expr,S):!0},"function, FunctionNode | OperatorNode, string":function(x,_,S){return _.args.every(E=>x(E,S))}}),w=e("_derivative",{"ConstantNode, function":function(){return b(0)},"SymbolNode, function":function(x,_){return _(x)?b(0):b(1)},"ParenthesisNode, function":function(x,_){return new f(w(x.content,_))},"FunctionAssignmentNode, function":function(x,_){return _(x)?b(0):w(x.expr,_)},"FunctionNode, function":function(x,_){if(_(x))return b(0);var S=x.args[0],E,T=!1,D=!1,N;switch(x.name){case"cbrt":T=!0,N=new c("*","multiply",[b(3),new c("^","pow",[S,new c("/","divide",[b(2),b(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)T=!0,N=new c("*","multiply",[b(2),new u("sqrt",[S])]);else if(x.args.length===2)return E=new c("/","divide",[b(1),x.args[1]]),w(new c("^","pow",[S,E]),_);break;case"log10":E=b(10);case"log":if(!E&&x.args.length===1)N=S.clone(),T=!0;else if(x.args.length===1&&E||x.args.length===2&&_(x.args[1]))N=new c("*","multiply",[S.clone(),new u("log",[E||x.args[1]])]),T=!0;else if(x.args.length===2)return w(new c("/","divide",[new u("log",[S]),new u("log",[x.args[1]])]),_);break;case"pow":if(x.args.length===2)return w(new c("^","pow",[S,x.args[1]]),_);break;case"exp":N=new u("exp",[S.clone()]);break;case"sin":N=new u("cos",[S.clone()]);break;case"cos":N=new c("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":N=new c("^","pow",[new u("sec",[S.clone()]),b(2)]);break;case"sec":N=new c("*","multiply",[x,new u("tan",[S.clone()])]);break;case"csc":D=!0,N=new c("*","multiply",[x,new u("cot",[S.clone()])]);break;case"cot":D=!0,N=new c("^","pow",[new u("csc",[S.clone()]),b(2)]);break;case"asin":T=!0,N=new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[S.clone(),b(2)])])]);break;case"acos":T=!0,D=!0,N=new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[S.clone(),b(2)])])]);break;case"atan":T=!0,N=new c("+","add",[new c("^","pow",[S.clone(),b(2)]),b(1)]);break;case"asec":T=!0,N=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),b(2)]),b(1)])])]);break;case"acsc":T=!0,D=!0,N=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),b(2)]),b(1)])])]);break;case"acot":T=!0,D=!0,N=new c("+","add",[new c("^","pow",[S.clone(),b(2)]),b(1)]);break;case"sinh":N=new u("cosh",[S.clone()]);break;case"cosh":N=new u("sinh",[S.clone()]);break;case"tanh":N=new c("^","pow",[new u("sech",[S.clone()]),b(2)]);break;case"sech":D=!0,N=new c("*","multiply",[x,new u("tanh",[S.clone()])]);break;case"csch":D=!0,N=new c("*","multiply",[x,new u("coth",[S.clone()])]);break;case"coth":D=!0,N=new c("^","pow",[new u("csch",[S.clone()]),b(2)]);break;case"asinh":T=!0,N=new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),b(2)]),b(1)])]);break;case"acosh":T=!0,N=new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),b(2)]),b(1)])]);break;case"atanh":T=!0,N=new c("-","subtract",[b(1),new c("^","pow",[S.clone(),b(2)])]);break;case"asech":T=!0,D=!0,N=new c("*","multiply",[S.clone(),new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[S.clone(),b(2)])])])]);break;case"acsch":T=!0,D=!0,N=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),b(2)]),b(1)])])]);break;case"acoth":T=!0,D=!0,N=new c("-","subtract",[b(1),new c("^","pow",[S.clone(),b(2)])]);break;case"abs":N=new c("/","divide",[new u(new h("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+x.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var P,M;T?(P="/",M="divide"):(P="*",M="multiply");var j=w(S,_);return D&&(j=new c("-","unaryMinus",[j])),new c(P,M,[j,N])},"OperatorNode, function":function(x,_){if(_(x))return b(0);if(x.op==="+")return new c(x.op,x.fn,x.args.map(function(k){return w(k,_)}));if(x.op==="-"){if(x.isUnary())return new c(x.op,x.fn,[w(x.args[0],_)]);if(x.isBinary())return new c(x.op,x.fn,[w(x.args[0],_),w(x.args[1],_)])}if(x.op==="*"){var S=x.args.filter(function(k){return _(k)});if(S.length>0){var E=x.args.filter(function(k){return!_(k)}),T=E.length===1?E[0]:new c("*","multiply",E),D=S.concat(w(T,_));return new c("*","multiply",D)}return new c("+","add",x.args.map(function(k){return new c("*","multiply",x.args.map(function(V){return V===k?w(V,_):V.clone()}))}))}if(x.op==="/"&&x.isBinary()){var N=x.args[0],P=x.args[1];return _(P)?new c("/","divide",[w(N,_),P]):_(N)?new c("*","multiply",[new c("-","unaryMinus",[N]),new c("/","divide",[w(P,_),new c("^","pow",[P.clone(),b(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[w(N,_),P.clone()]),new c("*","multiply",[N.clone(),w(P,_)])]),new c("^","pow",[P.clone(),b(2)])])}if(x.op==="^"&&x.isBinary()){var M=x.args[0],j=x.args[1];if(_(M))return qt(M)&&(s(M.value)||a(M.value,1))?b(0):new c("*","multiply",[x,new c("*","multiply",[new u("log",[M.clone()]),w(j.clone(),_)])]);if(_(j)){if(qt(j)){if(s(j.value))return b(0);if(a(j.value,1))return w(M,_)}var K=new c("^","pow",[M.clone(),new c("-","subtract",[j,b(1)])]);return new c("*","multiply",[j.clone(),new c("*","multiply",[w(M,_),K])])}return new c("*","multiply",[new c("^","pow",[M.clone(),j.clone()]),new c("+","add",[new c("*","multiply",[w(M,_),new c("/","divide",[j.clone(),M.clone()])]),new c("*","multiply",[w(j,_),new u("log",[M.clone()])])])])}throw new Error('Cannot process operator "'+x.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function b(A,x){return new l(o(A,Up(String(A),r)))}return m}),MQ="rationalize",Zst=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Jst=Y(MQ,Zst,t=>{var{config:e,typed:r,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:h,simplify:d,fraction:p,bignumber:m,mathWithTransform:v,matrix:y,AccessorNode:w,ArrayNode:b,ConstantNode:A,FunctionNode:x,IndexNode:_,ObjectNode:S,OperatorNode:E,SymbolNode:T,ParenthesisNode:D}=t;function N(k){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,H=M(),te=P(k,V,!0,H.firstRules),ue=te.variables.length,re={exactFractions:!1},L={exactFractions:!0};if(k=te.expression,ue>=1){k=j(k);var ie,X,pe=!0,de=!1;k=d(k,H.firstRules,{},re);for(var ae;X=pe?H.distrDivRules:H.sucDivRules,k=d(k,X,{},L),pe=!pe,ae=k.toString(),ae!==ie;)de=!0,ie=ae;de&&(k=d(k,H.firstRulesAgain,{},re)),k=d(k,H.finalRules,{},re)}var z=[],ne={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(ue===1&&(k.args[0]=K(k.args[0],z),k.args[1]=K(k.args[1])),q&&(ne.numerator=k.args[0],ne.denominator=k.args[1])):(ue===1&&(k=K(k,z)),q&&(ne.numerator=k,ne.denominator=null)),q?(ne.coefficients=z,ne.variables=te.variables,ne.expression=k,ne):k}return r(MQ,{Node:N,"Node, boolean":(k,V)=>N(k,{},V),"Node, Object":N,"Node, Object, boolean":N});function P(k,V,q,H){var te=[],ue=d(k,H,V,{exactFractions:!1});q=!!q;var re="+-*"+(q?"/":"");ie(ue);var L={};return L.expression=ue,L.variables=te,L;function ie(X){var pe=X.type;if(pe==="FunctionNode")throw new Error("There is an unsolved function call");if(pe==="OperatorNode")if(X.op==="^"){if(X.args[1].type!=="ConstantNode"||!nt(parseFloat(X.args[1].value)))throw new Error("There is a non-integer exponent");ie(X.args[0])}else{if(!re.includes(X.op))throw new Error("Operator "+X.op+" invalid in polynomial expression");for(var de=0;de<X.args.length;de++)ie(X.args[de])}else if(pe==="SymbolNode"){var ae=X.name,z=te.indexOf(ae);z===-1&&te.push(ae)}else if(pe==="ParenthesisNode")ie(X.content);else if(pe!=="ConstantNode")throw new Error("type "+pe+" is not allowed in polynomial expression")}}function M(){var k=[h,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],V=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],H=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],te={};return te.firstRules=k.concat(V,H),te.distrDivRules=q,te.sucDivRules=H,te.firstRulesAgain=k.concat(V),te.finalRules=[h,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],te}function j(k,V,q){var H=k.type,te=arguments.length>1;if(H==="OperatorNode"&&k.isBinary()){var ue=!1,re;if(k.op==="^"&&(k.args[0].type==="ParenthesisNode"||k.args[0].type==="OperatorNode")&&k.args[1].type==="ConstantNode"&&(re=parseFloat(k.args[1].value),ue=re>=2&&nt(re)),ue){if(re>2){var L=k.args[0],ie=new E("^","pow",[k.args[0].cloneDeep(),new A(re-1)]);k=new E("*","multiply",[L,ie])}else k=new E("*","multiply",[k.args[0],k.args[0].cloneDeep()]);te&&(q==="content"?V.content=k:V.args[q]=k)}}if(H==="ParenthesisNode")j(k.content,k,"content");else if(H!=="ConstantNode"&&H!=="SymbolNode")for(var X=0;X<k.args.length;X++)j(k.args[X],k,X);if(!te)return k}function K(k,V){V===void 0&&(V=[]),V[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var H=0,te="";ae(k,null,q),H=V.length-1;for(var ue=!0,re,L=H;L>=0;L--)if(V[L]!==0){var ie=new A(ue?V[L]:Math.abs(V[L])),X=V[L]<0?"-":"+";if(L>0){var pe=new T(te);if(L>1){var de=new A(L);pe=new E("^","pow",[pe,de])}V[L]===-1&&ue?ie=new E("-","unaryMinus",[pe]):Math.abs(V[L])===1?ie=pe:ie=new E("*","multiply",[ie,pe])}ue?re=ie:X==="+"?re=new E("+","add",[re,ie]):re=new E("-","subtract",[re,ie]),ue=!1}if(ue)return new A(0);return re;function ae(z,ne,fe){var Q=z.type;if(Q==="FunctionNode")throw new Error("There is an unsolved function call");if(Q==="OperatorNode"){if(!"+-*^".includes(z.op))throw new Error("Operator "+z.op+" invalid");if(ne!==null){if((z.fn==="unaryMinus"||z.fn==="pow")&&ne.fn!=="add"&&ne.fn!=="subtract"&&ne.fn!=="multiply")throw new Error("Invalid "+z.op+" placing");if((z.fn==="subtract"||z.fn==="add"||z.fn==="multiply")&&ne.fn!=="add"&&ne.fn!=="subtract")throw new Error("Invalid "+z.op+" placing");if((z.fn==="subtract"||z.fn==="add"||z.fn==="unaryMinus")&&fe.noFil!==0)throw new Error("Invalid "+z.op+" placing")}(z.op==="^"||z.op==="*")&&(fe.fire=z.op);for(var ye=0;ye<z.args.length;ye++)z.fn==="unaryMinus"&&(fe.oper="-"),(z.op==="+"||z.fn==="subtract")&&(fe.fire="",fe.cte=1,fe.oper=ye===0?"+":z.op),fe.noFil=ye,ae(z.args[ye],z,fe)}else if(Q==="SymbolNode"){if(z.name!==te&&te!=="")throw new Error("There is more than one variable");if(te=z.name,ne===null){V[1]=1;return}if(ne.op==="^"&&fe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ne.op==="*"&&fe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(fe.fire===""||fe.fire==="*")&&(H<1&&(V[1]=0),V[1]+=fe.cte*(fe.oper==="+"?1:-1),H=Math.max(1,H))}else if(Q==="ConstantNode"){var me=parseFloat(z.value);if(ne===null){V[0]=me;return}if(ne.op==="^"){if(fe.noFil!==1)throw new Error("Constant cannot be powered");if(!nt(me)||me<=0)throw new Error("Non-integer exponent is not allowed");for(var De=H+1;De<me;De++)V[De]=0;me>H&&(V[me]=0),V[me]+=fe.cte*(fe.oper==="+"?1:-1),H=Math.max(me,H);return}fe.cte=me,fe.fire===""&&(V[0]+=fe.cte*(fe.oper==="+"?1:-1))}else throw new Error("Type "+Q+" is not allowed")}}}),IQ="zpk2tf",eot=["typed","add","multiply","Complex","number"],tot=Y(IQ,eot,t=>{var{typed:e,add:r,multiply:n,Complex:i,number:a}=t;return e(IQ,{"Array,Array,number":function(u,c,f){return s(u,c,f)},"Array,Array":function(u,c){return s(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return s(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return s(u.valueOf(),c.valueOf(),1)}});function s(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>a(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>a(w)));for(var f=[i(1,0)],h=[i(1,0)],d=0;d<l.length;d++){var p=l[d];typeof p=="number"&&(p=i(p,0)),f=o(f,[i(1,0),i(-p.re,-p.im)])}for(var m=0;m<u.length;m++){var v=u[m];typeof v=="number"&&(v=i(v,0)),h=o(h,[i(1,0),i(-v.re,-v.im)])}for(var y=0;y<f.length;y++)f[y]=n(f[y],c);return[f,h]}function o(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var h=0;h<l.length;h++)f-h>=0&&f-h<u.length&&(c[f]=r(c[f],n(l[h],u[f-h])))}return c}}),OQ="freqz",rot=["typed","add","multiply","Complex","divide","matrix"],not=Y(OQ,rot,t=>{var{typed:e,add:r,multiply:n,Complex:i,divide:a,matrix:s}=t;return e(OQ,{"Array, Array":function(c,f){var h=l(512);return o(c,f,h)},"Array, Array, Array":function(c,f,h){return o(c,f,h)},"Array, Array, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=l(h);return o(c,f,d)},"Matrix, Matrix":function(c,f){var h=l(512),{w:d,h:p}=o(c.valueOf(),f.valueOf(),h);return{w:s(d),h:s(p)}},"Matrix, Matrix, Matrix":function(c,f,h){var{h:d}=o(c.valueOf(),f.valueOf(),h.valueOf());return{h:s(d),w:s(h)}},"Matrix, Matrix, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=l(h),{h:p}=o(c.valueOf(),f.valueOf(),d);return{h:s(p),w:s(d)}}});function o(u,c,f){for(var h=[],d=[],p=0;p<f.length;p++){for(var m=i(0,0),v=i(0,0),y=0;y<u.length;y++)m=r(m,n(u[y],i(Math.cos(-y*f[p]),Math.sin(-y*f[p]))));for(var w=0;w<c.length;w++)v=r(v,n(c[w],i(Math.cos(-w*f[p]),Math.sin(-w*f[p]))));h.push(m),d.push(v)}for(var b=[],A=0;A<h.length;A++)b.push(a(h[A],d[A]));return{h:b,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),iot="reviver",aot=["classes"],sot=Y(iot,aot,t=>{var{classes:e}=t;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),oot="replacer",lot=[],uot=Y(oot,lot,()=>function(e,r){return typeof r=="number"&&(!Number.isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),cot="15.1.0",fot=Y("true",[],()=>!0),hot=Y("false",[],()=>!1),dot=Y("null",[],()=>null),pot=Mo("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),mot=Mo("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),got=Mo("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?gV(r):iqe}),vot=Mo("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?FYe(r):aqe}),yot=Mo("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?kYe(r):sqe}),bot=Mo("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?RYe(r):oqe}),wot=Mo("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),xot=Mo("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),Aot=Mo("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),_ot=Mo("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),Eot=Mo("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),Sot=Mo("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),Cot=Mo("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),Tot=Y("version",[],()=>cot);function Mo(t,e,r){return Y(t,e,r,{recreateOnConfigChange:!0})}var Dot=At("speedOfLight","299792458","m s^-1"),Not=At("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Pot=At("planckConstant","6.62607015e-34","J s"),Mot=At("reducedPlanckConstant","1.0545718176461565e-34","J s"),Iot=At("magneticConstant","1.25663706212e-6","N A^-2"),Oot=At("electricConstant","8.8541878128e-12","F m^-1"),kot=At("vacuumImpedance","376.730313667","ohm"),Rot=At("coulomb","8.987551792261171e9","N m^2 C^-2"),Fot=At("coulombConstant","8.987551792261171e9","N m^2 C^-2"),Lot=At("elementaryCharge","1.602176634e-19","C"),Bot=At("bohrMagneton","9.2740100783e-24","J T^-1"),$ot=At("conductanceQuantum","7.748091729863649e-5","S"),jot=At("inverseConductanceQuantum","12906.403729652257","ohm"),Vot=At("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Uot=At("nuclearMagneton","5.0507837461e-27","J T^-1"),zot=At("klitzing","25812.807459304513","ohm"),qot=At("bohrRadius","5.29177210903e-11","m"),Hot=At("classicalElectronRadius","2.8179403262e-15","m"),Wot=At("electronMass","9.1093837015e-31","kg"),Got=At("fermiCoupling","1.1663787e-5","GeV^-2"),Kot=gO("fineStructure",.0072973525693),Xot=At("hartreeEnergy","4.3597447222071e-18","J"),Yot=At("protonMass","1.67262192369e-27","kg"),Qot=At("deuteronMass","3.3435830926e-27","kg"),Zot=At("neutronMass","1.6749271613e-27","kg"),Jot=At("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),elt=At("rydberg","10973731.568160","m^-1"),tlt=At("thomsonCrossSection","6.6524587321e-29","m^2"),rlt=gO("weakMixingAngle",.2229),nlt=gO("efimovFactor",22.7),ilt=At("atomicMass","1.66053906660e-27","kg"),alt=At("avogadro","6.02214076e23","mol^-1"),slt=At("boltzmann","1.380649e-23","J K^-1"),olt=At("faraday","96485.33212331001","C mol^-1"),llt=At("firstRadiation","3.7417718521927573e-16","W m^2"),ult=At("loschmidt","2.686780111798444e25","m^-3"),clt=At("gasConstant","8.31446261815324","J K^-1 mol^-1"),flt=At("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),hlt=At("molarVolume","0.022413969545014137","m^3 mol^-1"),dlt=gO("sackurTetrode",-1.16487052358),plt=At("secondRadiation","0.014387768775039337","m K"),mlt=At("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),glt=At("wienDisplacement","2.897771955e-3","m K"),vlt=At("molarMass","0.99999999965e-3","kg mol^-1"),ylt=At("molarMassC12","11.9999999958e-3","kg mol^-1"),blt=At("gravity","9.80665","m s^-2"),wlt=At("planckLength","1.616255e-35","m"),xlt=At("planckMass","2.176435e-8","kg"),Alt=At("planckTime","5.391245e-44","s"),_lt=At("planckCharge","1.87554603778e-18","C"),Elt=At("planckTemperature","1.416785e+32","K");function At(t,e,r){var n=["config","Unit","BigNumber"];return Y(t,n,i=>{var{config:a,Unit:s,BigNumber:o}=i,l=a.number==="BigNumber"?new o(e):parseFloat(e),u=new s(l,r);return u.fixPrefix=!0,u})}function gO(t,e){var r=["config","BigNumber"];return Y(t,r,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}function kQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Slt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kQ(Object(r),!0).forEach(function(n){Jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Clt="mapSlices",Tlt=["typed","isInteger"],Dlt=Y(Clt,Tlt,t=>{var{typed:e,isInteger:r}=t,n=p4({typed:e,isInteger:r});return e("mapSlices",{"...any":function(a){var s=a[1];ot(s)?a[1]=s-1:St(s)&&(a[1]=s.minus(1));try{return n.apply(null,a)}catch(o){throw ms(o)}}})},Slt({isTransformFunction:!0},p4.meta)),Nlt="column",Plt=["typed","Index","matrix","range"],Mlt=Y(Nlt,Plt,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=Zde({typed:e,Index:r,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];ot(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw ms(c)}}})},{isTransformFunction:!0});function SV(t,e,r){var n=t.filter(function(l){return $i(l)&&!(l.name in e)&&!r.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=n.name,a=new Map,s=new bhe(r,a,new Set([i])),o=t.compile();return function(u){return a.set(i,u),o.evaluate(s)}}var Ilt="transformCallback",Olt=["typed"],CV=Y(Ilt,Olt,t=>{var{typed:e}=t;return function(n,i){return e.isTypedFunction(n)?r(n,i):RQ(n,n.length,i)};function r(n,i){var a=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[o,l]=s,u=o.split(",").length;return e.isTypedFunction(l)?[o,r(l,i)]:[o,RQ(l,u,i)]}));return typeof n.name=="string"?e(n.name,a):e(a)}});function RQ(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,r),o=FQ(i[r]);return t(...s,o)}:e>r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,r),o=FQ(i[r]),l=i.slice(r+1);return t(...s,o,...l)}:t}function FQ(t){return t.map(e=>e+1)}var klt="filter",Rlt=["typed"],Flt=Y(klt,Rlt,t=>{var{typed:e}=t;function r(i,a,s){var o=Jde({typed:e}),l=CV({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var c=i.length-1,f=i[c];return u&&(u=n(u,s)),f&&($i(f)||QS(f)?f=n(f,s):f=SV(f,a,s)),o(u,l(f,c))}r.rawArgs=!0;function n(i,a){return i.compile().evaluate(a)}return r},{isTransformFunction:!0}),Llt="forEach",Blt=["typed"],$lt=Y(Llt,Blt,t=>{var{typed:e}=t,r=epe({typed:e}),n=CV({typed:e});function i(s,o,l){if(s.length===0)return r();var u=s[0];if(s.length===1)return r(u);var c=s.length-1,f=s[c];return u&&(u=a(u,l)),f&&($i(f)||QS(f)?f=a(f,l):f=SV(f,o,l)),r(u,n(f,c))}i.rawArgs=!0;function a(s,o){return s.compile().evaluate(o)}return i},{isTransformFunction:!0}),jlt="index",Vlt=["Index","getMatrixDataType"],Ult=Y(jlt,Vlt,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(nV(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(gr(o)||ft(o))r(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(ot(o)||Zx(o))o--;else if(St(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),zlt="map",qlt=["typed"],Hlt=Y(zlt,qlt,t=>{var{typed:e}=t,r=tpe({typed:e}),n=CV({typed:e});function i(a,s,o){if(a.length===0)return r();if(a.length===1)return r(a[0]);var l=a.length-1,u=a.slice(0,l),c=a[l];return u=u.map(h=>f(h,o)),c&&($i(c)||QS(c)?c=f(c,o):c=SV(c,s,o)),r(...u,n(c,l));function f(h,d){return h.compile().evaluate(d)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function Wlt(t){return ot(t)?t-1:St(t)?t.minus(1):t}function Glt(t){return ot(t)||St(t)}function Hp(t){if(t.length===2&&To(t[0])){t=t.slice();var e=t[1];Glt(e)&&(t[1]=Wlt(e))}return t}var Klt="max",Xlt=["typed","config","numeric","larger","isNaN"],Ylt=Y(Klt,Xlt,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t,s=cpe({typed:e,config:r,numeric:n,larger:i,isNaN:a});return e("max",{"...any":function(l){l=Hp(l);try{return s.apply(null,l)}catch(u){throw ms(u)}}})},{isTransformFunction:!0}),Qlt="mean",Zlt=["typed","add","divide"],Jlt=Y(Qlt,Zlt,t=>{var{typed:e,add:r,divide:n}=t,i=bpe({typed:e,add:r,divide:n});return e("mean",{"...any":function(s){s=Hp(s);try{return i.apply(null,s)}catch(o){throw ms(o)}}})},{isTransformFunction:!0}),eut="min",tut=["typed","config","numeric","smaller","isNaN"],rut=Y(eut,tut,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t,s=fpe({typed:e,config:r,numeric:n,smaller:i,isNaN:a});return e("min",{"...any":function(l){l=Hp(l);try{return s.apply(null,l)}catch(u){throw ms(u)}}})},{isTransformFunction:!0}),nut="range",iut=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],aut=Y(nut,iut,t=>{var{typed:e,config:r,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isZero:f,isPositive:h}=t,d=ipe({typed:e,config:r,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isZero:f,isPositive:h});return e("range",{"...any":function(m){var v=m.length-1,y=m[v];return typeof y!="boolean"&&m.push(!0),d.apply(null,m)}})},{isTransformFunction:!0}),sut="row",out=["typed","Index","matrix","range"],lut=Y(sut,out,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=ape({typed:e,Index:r,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];ot(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw ms(c)}}})},{isTransformFunction:!0}),uut="subset",cut=["typed","matrix","zeros","add"],fut=Y(uut,cut,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=spe({typed:e,matrix:r,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(l){throw ms(l)}}})},{isTransformFunction:!0}),hut="concat",dut=["typed","matrix","isInteger"],put=Y(hut,dut,t=>{var{typed:e,matrix:r,isInteger:n}=t,i=Qde({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(s){var o=s.length-1,l=s[o];ot(l)?s[o]=l-1:St(l)&&(s[o]=l.minus(1));try{return i.apply(null,s)}catch(u){throw ms(u)}}})},{isTransformFunction:!0}),LQ="diff",mut=["typed","matrix","subtract","number","bignumber"],gut=Y(LQ,mut,t=>{var{typed:e,matrix:r,subtract:n,number:i,bignumber:a}=t,s=rpe({typed:e,matrix:r,subtract:n,number:i,bignumber:a});return e(LQ,{"...any":function(l){l=Hp(l);try{return s.apply(null,l)}catch(u){throw ms(u)}}})},{isTransformFunction:!0}),vut="std",yut=["typed","map","sqrt","variance"],but=Y(vut,yut,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t,a=Ape({typed:e,map:r,sqrt:n,variance:i});return e("std",{"...any":function(o){o=Hp(o);try{return a.apply(null,o)}catch(l){throw ms(l)}}})},{isTransformFunction:!0}),BQ="sum",wut=["typed","config","add","numeric"],xut=Y(BQ,wut,t=>{var{typed:e,config:r,add:n,numeric:i}=t,a=vpe({typed:e,config:r,add:n,numeric:i});return e(BQ,{"...any":function(o){o=Hp(o);try{return a.apply(null,o)}catch(l){throw ms(l)}}})},{isTransformFunction:!0}),Aut="quantileSeq",_ut=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],Eut=Y(Aut,_ut,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d}=t,p=xpe({typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(v,y,w)=>p(v,y,m(w)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(v,y,w,b)=>p(v,y,w,m(b)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(v,y,w)=>p(v,y,m(w)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(v,y,w,b)=>p(v,y,w,m(b))});function m(v){return Hp([[],v])[1]}},{isTransformFunction:!0}),$Q="cumsum",Sut=["typed","add","unaryPlus"],Cut=Y($Q,Sut,t=>{var{typed:e,add:r,unaryPlus:n}=t,i=ype({typed:e,add:r,unaryPlus:n});return e($Q,{"...any":function(s){if(s.length===2&&To(s[0])){var o=s[1];ot(o)?s[1]=o-1:St(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(l){throw ms(l)}}})},{isTransformFunction:!0}),jQ="variance",Tut=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Dut=Y(jQ,Tut,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=t,l=wpe({typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o});return e(jQ,{"...any":function(c){c=Hp(c);try{return l.apply(null,c)}catch(f){throw ms(f)}}})},{isTransformFunction:!0}),VQ="print",Nut=["typed","matrix","zeros","add"],Put=Y(VQ,Nut,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=lpe({typed:e,matrix:r,zeros:n,add:i});return e(VQ,{"string, Object | Array":function(l,u){return a(s(l),u)},"string, Object | Array, number | Object":function(l,u,c){return a(s(l),u,c)}});function s(o){return o.replace(ope,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),Mut="and",Iut=["typed","matrix","zeros","add","equalScalar","not","concat"],Out=Y(Mut,Iut,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=upe({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,f){var h=u[0].compile().evaluate(f);if(!To(h)&&!o(h,!0))return!1;var d=u[1].compile().evaluate(f);return o(h,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),kut="or",Rut=["typed","matrix","equalScalar","DenseMatrix","concat"],Fut=Y(kut,Rut,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=Yde({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!To(f)&&s(f,!1))return!0;var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Lut="nullish",But=["typed","matrix","size","flatten","deepEqual"],$ut=Y(Lut,But,t=>{var{typed:e,matrix:r,size:n,flatten:i,deepEqual:a}=t,s=Xde({typed:e,matrix:r,size:n,flatten:i,deepEqual:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!To(f)&&f!=null&&f!==void 0)return f;var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),jut="bitAnd",Vut=["typed","matrix","zeros","add","equalScalar","not","concat"],Uut=Y(jut,Vut,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=Gde({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,f){var h=u[0].compile().evaluate(f);if(!To(h)){if(isNaN(h))return NaN;if(h===0||h===!1)return 0}var d=u[1].compile().evaluate(f);return o(h,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),zut="bitOr",qut=["typed","matrix","equalScalar","DenseMatrix","concat"],Hut=Y(zut,qut,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=Kde({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!To(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Re=v7e({config:Ee}),Ar=A7e({}),UQ=yot({BigNumber:Re,config:Ee}),Wut=hot({}),Gut=Kot({BigNumber:Re,config:Ee}),Wp=P7e({}),Spe=Cot({Complex:Ar}),Kut=pot({BigNumber:Re,config:Ee}),Xut=xot({BigNumber:Re,config:Ee}),Yut=_ot({BigNumber:Re,config:Ee}),vO=F7e({}),Qut=mot({BigNumber:Re,config:Ee}),Zut=dot({}),Jut=bot({BigNumber:Re,config:Ee}),ect=O7e({}),Cpe=x9e({}),tct=Eot({BigNumber:Re,config:Ee}),rct=dlt({BigNumber:Re,config:Ee}),Tpe=vot({BigNumber:Re,config:Ee}),nct=fot({}),ict=Tot({}),Pt=Z7e({Matrix:vO,config:Ee}),act=nlt({BigNumber:Re,config:Ee}),sct=wot({BigNumber:Re,config:Ee}),_4=got({BigNumber:Re,config:Ee}),Dpe=uot({}),oct=Sot({BigNumber:Re,config:Ee}),se=v9e({BigNumber:Re,Complex:Ar,DenseMatrix:Pt,Fraction:Wp}),lct=rlt({BigNumber:Re,config:Ee}),ga=vHe({typed:se}),uct=GYe({Complex:Ar,config:Ee,typed:se}),cct=QYe({BigNumber:Re,typed:se}),fct=tQe({BigNumber:Re,Complex:Ar,config:Ee,typed:se}),bi=xHe({typed:se}),hct=lGe({typed:se}),dct=oQe({BigNumber:Re,Complex:Ar,config:Ee,typed:se}),pct=hQe({typed:se}),Npe=mQe({typed:se}),mct=bQe({Complex:Ar,config:Ee,typed:se}),gct=Uqe({typed:se}),vct=tGe({typed:se}),yct=Wqe({typed:se}),bct=eqe({typed:se}),yO=jat({typed:se}),av=Zqe({Complex:Ar,typed:se}),Wv=cGe({typed:se}),TV=xQe({typed:se}),wct=SQe({BigNumber:Re,typed:se}),xct=NQe({BigNumber:Re,typed:se}),Act=LHe({typed:se}),Lt=Mqe({config:Ee,typed:se}),_ct=PKe({typed:se}),Ppe=$He({typed:se}),Ect=VHe({Complex:Ar,typed:se}),Sct=Jde({typed:se}),Gv=IGe({typed:se}),Cct=epe({typed:se}),tC=VKe({typed:se}),DV=FGe({typed:se}),Tct=GKe({format:tC,typed:se}),NV=hGe({typed:se}),rC=Eqe({typed:se}),Vf=Aqe({typed:se}),Kv=pqe({typed:se}),Dct=eXe({typed:se}),Nct=Aot({BigNumber:Re,config:Ee}),Pct=Wat({Complex:Ar,typed:se}),Mct=xWe({Complex:Ar,config:Ee,typed:se}),PV=_We({Complex:Ar,config:Ee,typed:se}),Gp=tpe({typed:se}),Ict=LKe({isNaN:Vf,isNumeric:Kv,typed:se}),Pn=CWe({typed:se}),IP=gGe({typed:se}),Pc=$qe({typed:se}),Oct=HKe({format:tC,typed:se}),kct=wst({config:Ee,typed:se}),Rct=lpe({typed:se}),Fct=Ast({config:Ee,typed:se}),MV=pGe({typed:se}),Lct=OQe({BigNumber:Re,typed:se}),Mpe=IWe({BigNumber:Re,Fraction:Wp,complex:av,typed:se}),bO=LQe({typed:se}),wi=aKe({typed:se}),xi=kqe({Matrix:vO,equalScalar:Lt,typed:se}),Bct=fHe({typed:se}),$ct=LWe({typed:se}),jct=qqe({typed:se}),Nl=_He({typed:se}),Vct=VQe({typed:se}),Uct=ZKe({typed:se}),wO=Dqe({typed:se}),zct=XYe({Complex:Ar,config:Ee,typed:se}),qct=nQe({BigNumber:Re,typed:se}),Hct=aQe({BigNumber:Re,Complex:Ar,config:Ee,typed:se}),$s=Xqe({BigNumber:Re,typed:se}),Wct=Uat({typed:se}),Gct=_Qe({typed:se}),Kct=MQe({BigNumber:Re,typed:se}),xO=yZe({addScalar:bi,conj:Wv,multiplyScalar:Pn,size:wi,typed:se}),Xct=gqe({isNumeric:Kv,typed:se}),Yct=Cqe({isBounded:rC,map:Gp,typed:se}),Kp=hqe({config:Ee,typed:se}),Pl=wqe({equalScalar:Lt,typed:se}),ke=nHe({DenseMatrix:Pt,Matrix:vO,SparseMatrix:xi,typed:se}),Qct=aHe({isZero:Pl,matrix:ke,typed:se}),or=DWe({addScalar:bi,dot:xO,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,typed:se}),Zct=HGe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),Jct=Est({config:Ee,log2:PV,typed:se}),eft=ZGe({config:Ee,matrix:ke}),tft=RQe({BigNumber:Re,typed:se}),rft=$Qe({typed:se}),nft=zYe({SparseMatrix:xi,typed:se}),bu=RWe({Complex:Ar,config:Ee,typed:se}),ift=oKe({typed:se}),aft=qQe({typed:se}),nC=dKe({matrix:ke,typed:se}),Ipe=VWe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),fa=vKe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),sft=JYe({BigNumber:Re,Complex:Ar,config:Ee,typed:se}),oft=uQe({Complex:Ar,config:Ee,typed:se}),lft=zKe({format:tC,typed:se}),uft=TQe({BigNumber:Re,typed:se}),IV=mKe({conj:Wv,transpose:nC,typed:se}),Ope=DGe({DenseMatrix:Pt,SparseMatrix:xi,matrix:ke,typed:se}),qa=KXe({DenseMatrix:Pt,SparseMatrix:xi,equalScalar:Lt,matrix:ke,typed:se}),iC=tHe({Fraction:Wp,typed:se}),Xp=BGe({BigNumber:Re,DenseMatrix:Pt,SparseMatrix:xi,config:Ee,matrix:ke,typed:se}),as=rqe({equal:qa,typed:se}),cft=jGe({matrix:ke,multiplyScalar:Pn,typed:se}),o_=p4({isInteger:as,typed:se}),OV=uHe({flatten:Gv,matrix:ke,size:wi,typed:se}),gl=nXe({bignumber:$s,fraction:iC,number:Pc}),kpe=$Ke({config:Ee,multiplyScalar:Pn,numeric:gl,typed:se}),Rpe=XGe({isInteger:as,matrix:ke,typed:se}),rw=uXe({BigNumber:Re,DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),Mc=dHe({typed:se}),fft=Bat({BigNumber:Re,Fraction:Wp,config:Ee,isInteger:as,number:Pc,typed:se}),Fpe=SHe({BigNumber:Re,Complex:Ar,Fraction:Wp,config:Ee,isNegative:Kp,matrix:ke,typed:se,unaryMinus:Mc}),tr=Qde({isInteger:as,matrix:ke,typed:se}),hft=EGe({prod:kpe,size:wi,typed:se}),aC=fYe({equal:qa,typed:se}),un=aXe({numeric:gl,typed:se}),dft=GWe({concat:tr,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,typed:se}),Lpe=zde({DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,round:rw,typed:se,zeros:fa}),pft=pWe({BigNumber:Re,DenseMatrix:Pt,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,round:rw,typed:se,zeros:fa}),Xv=yqe({config:Ee,typed:se}),ss=aYe({DenseMatrix:Pt,SparseMatrix:xi,bignumber:$s,concat:tr,config:Ee,matrix:ke,typed:se}),mft=yWe({concat:tr,equalScalar:Lt,matrix:ke,typed:se}),gft=IXe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),Bpe=AXe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,subtractScalar:Nl,typed:se}),kV=cpe({config:Ee,isNaN:Vf,larger:ss,numeric:gl,typed:se}),$pe=Hde({DenseMatrix:Pt,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,round:rw,typed:se,zeros:fa}),vft=PWe({BigNumber:Re,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),yft=Xde({deepEqual:aC,flatten:Gv,matrix:ke,size:wi,typed:se}),bft=Yde({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),RV=TJe({addScalar:bi,complex:av,conj:Wv,divideScalar:un,equal:qa,identity:Xp,isZero:Pl,matrix:ke,multiplyScalar:Pn,sign:Mpe,sqrt:bu,subtractScalar:Nl,typed:se,unaryMinus:Mc,zeros:fa}),wft=kXe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),os=JXe({DenseMatrix:Pt,SparseMatrix:xi,bignumber:$s,concat:tr,config:Ee,matrix:ke,typed:se}),gn=$We({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,subtractScalar:Nl,typed:se,unaryMinus:Mc}),xft=YKe({concat:tr,matrix:ke,typed:se}),FV=mHe({config:Ee,numeric:gl,typed:se}),LV=EXe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,subtractScalar:Nl,typed:se}),Aft=wGe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,matrix:ke,typed:se}),Ut=hZe({DenseMatrix:Pt,SparseMatrix:xi,addScalar:bi,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),_ft=vQe({BigNumber:Re,DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),Eft=Gde({concat:tr,equalScalar:Lt,matrix:ke,typed:se}),Sft=Kde({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),Cft=sGe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,matrix:ke,typed:se}),Tft=Pst({addScalar:bi,combinations:yO,divideScalar:un,isInteger:as,isNegative:Kp,multiplyScalar:Pn,typed:se}),Yv=$Xe({BigNumber:Re,DenseMatrix:Pt,Fraction:Wp,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,typed:se}),jpe=WXe({concat:tr,matrix:ke,typed:se}),Dft=Ist({addScalar:bi,combinations:yO,isInteger:as,isNegative:Kp,isPositive:Xv,larger:ss,typed:se}),Nft=CGe({matrix:ke,multiply:or,subtract:gn,typed:se}),Vpe=Qit({divideScalar:un,isZero:Pl,matrix:ke,multiply:or,subtractScalar:Nl,typed:se,unaryMinus:Mc}),Pft=rpe({matrix:ke,number:Pc,subtract:gn,typed:se}),Mft=xat({abs:ga,addScalar:bi,deepEqual:aC,divideScalar:un,multiplyScalar:Pn,sqrt:bu,subtractScalar:Nl,typed:se}),sC=wXe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,divideScalar:un,equalScalar:Lt,matrix:ke,typed:se}),Ift=QXe({compareText:jpe,isZero:Pl,typed:se}),Upe=NYe({larger:ss,smaller:os}),Oft=pZe({abs:ga,addScalar:bi,divideScalar:un,isPositive:Xv,multiplyScalar:Pn,smaller:os,sqrt:bu,typed:se}),zpe=_Ye({DenseMatrix:Pt,smaller:os}),La=CYe({ImmutableDenseMatrix:zpe,getMatrixDataType:DV}),kft=Eat({abs:ga,add:Ut,addScalar:bi,config:Ee,divideScalar:un,equalScalar:Lt,flatten:Gv,isNumeric:Kv,isZero:Pl,matrix:ke,multiply:or,multiplyScalar:Pn,smaller:os,subtract:gn,typed:se}),Rft=zWe({BigNumber:Re,add:Ut,config:Ee,equal:qa,isInteger:as,mod:$pe,smaller:os,typed:se,xgcd:Ipe}),AO=lYe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,config:Ee,matrix:ke,typed:se}),BV=hXe({Complex:Ar,config:Ee,divideScalar:un,typeOf:wO,typed:se}),Fft=CXe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,subtractScalar:Nl,typed:se}),Lft=oHe({flatten:Gv,matrix:ke,size:wi,typed:se}),Bft=fpe({config:Ee,isNaN:Vf,numeric:gl,smaller:os,typed:se}),$ft=gXe({Complex:Ar,config:Ee,divideScalar:un,typed:se}),_O=gYe({compare:Yv,isNaN:Vf,isNumeric:Kv,typed:se}),jft=FXe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),qpe=QJe({SparseMatrix:xi,abs:ga,add:Ut,divideScalar:un,larger:ss,largerEq:AO,multiply:or,subtract:gn,transpose:nC,typed:se}),Hpe=IYe({FibonacciHeap:Upe,addScalar:bi,equalScalar:Lt}),Io=spe({add:Ut,matrix:ke,typed:se,zeros:fa}),$V=vpe({add:Ut,config:Ee,numeric:gl,typed:se}),Vft=xZe({add:Ut,matrix:ke,typed:se}),Wpe=DXe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:Pn,subtractScalar:Nl,typed:se}),Uft=tot({Complex:Ar,add:Ut,multiply:or,number:Pc,typed:se}),jV=RHe({DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,round:rw,typed:se,zeros:fa}),Ic=zXe({compare:Yv,typed:se}),zft=ype({add:Ut,typed:se,unaryPlus:FV}),Gpe=qHe({Complex:Ar,DenseMatrix:Pt,ceil:jV,equalScalar:Lt,floor:Lpe,matrix:ke,typed:se,zeros:fa}),Kpe=_Ze({Index:La,typed:se}),Qv=Jit({abs:ga,addScalar:bi,det:Vpe,divideScalar:un,identity:Xp,matrix:ke,multiply:or,typed:se,unaryMinus:Mc}),qft=pXe({Complex:Ar,config:Ee,divideScalar:un,log:BV,typed:se}),Xpe=SJe({DenseMatrix:Pt,Spa:Hpe,SparseMatrix:xi,abs:ga,addScalar:bi,divideScalar:un,equalScalar:Lt,larger:ss,matrix:ke,multiplyScalar:Pn,subtractScalar:Nl,typed:se,unaryMinus:Mc}),Hft=tat({Complex:Ar,add:Ut,ctranspose:IV,deepEqual:aC,divideScalar:un,dot:xO,dotDivide:sC,equal:qa,inv:Qv,matrix:ke,multiply:or,typed:se}),wu=oXe({Complex:Ar,config:Ee,fraction:iC,identity:Xp,inv:Qv,matrix:ke,multiply:or,number:Pc,typed:se}),Wft=WQe({DenseMatrix:Pt,Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),Gft=YQe({DenseMatrix:Pt,Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),Kft=eZe({Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),Xft=iZe({Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),E1=rYe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,config:Ee,matrix:ke,typed:se}),Yft=yYe({compare:Yv,compareNatural:Ic,matrix:ke,typed:se}),Qft=cat({abs:ga,add:Ut,identity:Xp,inv:Qv,map:Gp,max:kV,multiply:or,size:wi,sqrt:bu,subtract:gn,typed:se}),Zft=dYe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,typed:se}),Jft=upe({concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),di=bat({divideScalar:un,equalScalar:Lt,inv:Qv,matrix:ke,multiply:or,typed:se}),eht=lat({abs:ga,add:Ut,identity:Xp,inv:Qv,multiply:or,typed:se}),Ype=bKe({addScalar:bi,ceil:jV,conj:Wv,divideScalar:un,dotDivide:sC,exp:Ppe,i:Spe,log2:PV,matrix:ke,multiplyScalar:Pn,pow:wu,tau:Tpe,typed:se}),tht=not({Complex:Ar,add:Ut,divide:di,matrix:ke,multiply:or,typed:se}),VV=qat({BigNumber:Re,Complex:Ar,config:Ee,multiplyScalar:Pn,pow:wu,typed:se}),rht=xKe({conj:Wv,dotDivide:sC,fft:Ype,typed:se}),nht=Yat({divide:di,dotDivide:sC,isNumeric:Kv,log:BV,map:Gp,matrix:ke,multiply:or,sum:$V,typed:se}),Qpe=JJe({DenseMatrix:Pt,lsolve:Bpe,lup:Xpe,matrix:ke,slu:qpe,typed:se,usolve:LV}),Zpe=bpe({add:Ut,divide:di,typed:se}),Jpe=Nat({add:Ut,compare:Yv,divide:di,partitionSelect:_O,typed:se}),iht=tet({add:Ut,cbrt:Fpe,divide:di,equalScalar:Lt,im:NV,isZero:Pl,multiply:or,re:MV,sqrt:bu,subtract:gn,typeOf:wO,typed:se,unaryMinus:Mc}),aht=xpe({bignumber:$s,add:Ut,compare:Yv,divide:di,isInteger:as,larger:ss,mapSlices:o_,multiply:or,partitionSelect:_O,smaller:os,smallerEq:E1,subtract:gn,typed:se}),S1=ipe({bignumber:$s,matrix:ke,add:Ut,config:Ee,equal:qa,isPositive:Xv,isZero:Pl,larger:ss,largerEq:AO,smaller:os,smallerEq:E1,typed:se}),sht=ape({Index:La,matrix:ke,range:S1,typed:se}),eme=KQe({DenseMatrix:Pt,Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),oht=rZe({Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),tme=lZe({Index:La,concat:tr,setDifference:eme,size:wi,subset:Io,typed:se}),lht=TKe({abs:ga,add:Ut,bignumber:$s,divide:di,isNegative:Kp,isPositive:Xv,larger:ss,map:Gp,matrix:ke,max:kV,multiply:or,smaller:os,subtract:gn,typed:se,unaryMinus:Mc}),gt=$Ye({BigNumber:Re,Complex:Ar,Fraction:Wp,abs:ga,addScalar:bi,config:Ee,divideScalar:un,equal:qa,fix:Gpe,format:tC,isNumeric:Kv,multiplyScalar:Pn,number:Pc,pow:wu,round:rw,subtractScalar:Nl}),uht=kot({BigNumber:Re,Unit:gt,config:Ee}),cht=ilt({BigNumber:Re,Unit:gt,config:Ee}),fht=Bot({BigNumber:Re,Unit:gt,config:Ee}),hht=slt({BigNumber:Re,Unit:gt,config:Ee}),rme=Zde({Index:La,matrix:ke,range:S1,typed:se}),dht=$ot({BigNumber:Re,Unit:gt,config:Ee}),pht=Rot({BigNumber:Re,Unit:gt,config:Ee}),mht=HYe({Unit:gt,typed:se}),ght=Qot({BigNumber:Re,Unit:gt,config:Ee}),nme=sat({abs:ga,add:Ut,addScalar:bi,atan:Npe,bignumber:$s,column:rme,complex:av,config:Ee,cos:TV,diag:Ope,divideScalar:un,dot:xO,equal:qa,flatten:Gv,im:NV,inv:Qv,larger:ss,matrix:ke,matrixFromColumns:OV,multiply:or,multiplyScalar:Pn,number:Pc,qr:RV,re:MV,reshape:Rpe,sin:bO,size:wi,smaller:os,sqrt:bu,subtract:gn,typed:se,usolve:LV,usolveAll:Wpe}),vht=Wot({BigNumber:Re,Unit:gt,config:Ee}),oC=Kat({gamma:VV,typed:se}),yht=Got({BigNumber:Re,Unit:gt,config:Ee}),bht=clt({BigNumber:Re,Unit:gt,config:Ee}),wht=blt({BigNumber:Re,Unit:gt,config:Ee}),xht=zot({BigNumber:Re,Unit:gt,config:Ee}),Aht=ult({BigNumber:Re,Unit:gt,config:Ee}),_ht=Mat({abs:ga,map:Gp,median:Jpe,subtract:gn,typed:se}),Eht=Vot({BigNumber:Re,Unit:gt,config:Ee}),Sht=vlt({BigNumber:Re,Unit:gt,config:Ee}),Cht=flt({BigNumber:Re,Unit:gt,config:Ee}),Tht=Zat({add:Ut,divide:di,factorial:oC,isInteger:as,isPositive:Xv,multiply:or,typed:se}),UV=gZe({abs:ga,add:Ut,conj:Wv,ctranspose:IV,eigs:nme,equalScalar:Lt,larger:ss,matrix:ke,multiply:or,pow:wu,smaller:os,sqrt:bu,typed:se}),Dht=est({factorial:oC,typed:se}),Nht=Pot({BigNumber:Re,Unit:gt,config:Ee}),Pht=xlt({BigNumber:Re,Unit:gt,config:Ee}),Mht=Alt({BigNumber:Re,Unit:gt,config:Ee}),Iht=Mot({BigNumber:Re,Unit:gt,config:Ee}),ime=rKe({BigNumber:Re,DenseMatrix:Pt,SparseMatrix:xi,addScalar:bi,config:Ee,cos:TV,matrix:ke,multiplyScalar:Pn,norm:UV,sin:bO,typed:se,unaryMinus:Mc}),Oht=elt({BigNumber:Re,Unit:gt,config:Ee}),kht=plt({BigNumber:Re,Unit:gt,config:Ee}),Rht=sZe({compareNatural:Ic,typed:se}),Fht=Dot({BigNumber:Re,Unit:gt,config:Ee}),Lht=mlt({BigNumber:Re,Unit:gt,config:Ee}),Bht=tlt({BigNumber:Re,Unit:gt,config:Ee}),zV=wpe({add:Ut,divide:di,isNaN:Vf,mapSlices:o_,multiply:or,subtract:gn,typed:se}),$ht=RKe({BigNumber:Re,Complex:Ar,add:Ut,config:Ee,divide:di,equal:qa,factorial:oC,gamma:VV,isBounded:rC,isNegative:Kp,multiply:or,pi:_4,pow:wu,sin:bO,smallerEq:E1,subtract:gn,typed:se}),jht=alt({BigNumber:Re,Unit:gt,config:Ee}),Vht=qot({BigNumber:Re,Unit:gt,config:Ee}),Uht=Fat({add:Ut,divide:di,matrix:ke,mean:Zpe,multiply:or,pow:wu,sqrt:bu,subtract:gn,sum:$V,typed:se}),zht=yXe({DenseMatrix:Pt,SparseMatrix:xi,concat:tr,equalScalar:Lt,matrix:ke,pow:wu,typed:se}),qht=Lot({BigNumber:Re,Unit:gt,config:Ee}),Hht=olt({BigNumber:Re,Unit:gt,config:Ee}),Wht=Xot({BigNumber:Re,Unit:gt,config:Ee}),Ght=jot({BigNumber:Re,Unit:gt,config:Ee}),Kht=Iot({BigNumber:Re,Unit:gt,config:Ee}),Xht=ylt({BigNumber:Re,Unit:gt,config:Ee}),Yht=Zot({BigNumber:Re,Unit:gt,config:Ee}),Qht=_lt({BigNumber:Re,Unit:gt,config:Ee}),Zht=Elt({BigNumber:Re,Unit:gt,config:Ee}),Jht=Jot({BigNumber:Re,Unit:gt,config:Ee}),ame=ZQe({DenseMatrix:Pt,Index:La,compareNatural:Ic,size:wi,subset:Io,typed:se}),edt=Ape({map:Gp,sqrt:bu,typed:se,variance:zV}),sme=Cst({bignumber:$s,addScalar:bi,combinations:yO,divideScalar:un,factorial:oC,isInteger:as,isNegative:Kp,larger:ss,multiplyScalar:Pn,number:Pc,pow:wu,subtractScalar:Nl,typed:se}),tdt=VYe({Unit:gt,typed:se}),rdt=Dst({addScalar:bi,isInteger:as,isNegative:Kp,stirlingS2:sme,typed:se}),ndt=Oot({BigNumber:Re,Unit:gt,config:Ee}),idt=llt({BigNumber:Re,Unit:gt,config:Ee}),adt=Uot({BigNumber:Re,Unit:gt,config:Ee}),sdt=wlt({BigNumber:Re,Unit:gt,config:Ee}),odt=eKe({multiply:or,rotationMatrix:ime,typed:se}),ldt=cZe({Index:La,concat:tr,setIntersect:ame,setSymDifference:tme,size:wi,subset:Io,typed:se}),udt=glt({BigNumber:Re,Unit:gt,config:Ee}),cdt=Hot({BigNumber:Re,Unit:gt,config:Ee}),fdt=hlt({BigNumber:Re,Unit:gt,config:Ee}),ome=pat({identity:Xp,matrix:ke,multiply:or,norm:UV,qr:RV,subtract:gn,typed:se}),hdt=Fot({BigNumber:Re,Unit:gt,config:Ee}),ddt=Not({BigNumber:Re,Unit:gt,config:Ee}),pdt=Yot({BigNumber:Re,Unit:gt,config:Ee}),lme=hat({abs:ga,add:Ut,concat:tr,identity:Xp,index:Kpe,lusolve:Qpe,matrix:ke,matrixFromColumns:OV,multiply:or,range:S1,schur:ome,subset:Io,subtract:gn,transpose:nC,typed:se}),mdt=gat({matrix:ke,multiply:or,sylvester:lme,transpose:nC,typed:se}),nw={},lC={},ume={},Ha=CZe({mathWithTransform:lC}),iw=ZZe({Node:Ha}),bh=eJe({Node:Ha}),Zv=rJe({Node:Ha}),cme=sJe({Node:Ha}),aw=PZe({Node:Ha}),fme=FZe({Node:Ha,ResultSet:Cpe}),hme=BZe({Node:Ha}),dme=iJe({Node:Ha}),gdt=sot({classes:ume}),qV=oet({math:nw,typed:se}),pme=KZe({Node:Ha,typed:se}),vdt=Xit({Chain:qV,typed:se}),Yp=WZe({Node:Ha,isBounded:rC}),sw=YZe({Node:Ha,size:wi}),ow=DZe({Node:Ha,subset:Io}),mme=kZe({matrix:ke,Node:Ha,subset:Io}),Qp=uJe({Unit:gt,Node:Ha,math:nw}),Zp=fJe({Node:Ha,SymbolNode:Qp,math:nw}),xu=dJe({AccessorNode:ow,ArrayNode:aw,AssignmentNode:mme,BlockNode:fme,ConditionalNode:hme,ConstantNode:Yp,FunctionAssignmentNode:pme,FunctionNode:Zp,IndexNode:sw,ObjectNode:iw,OperatorNode:bh,ParenthesisNode:Zv,RangeNode:dme,RelationalNode:cme,SymbolNode:Qp,config:Ee,numeric:gl,typed:se}),gme=Gst({ConstantNode:Yp,FunctionNode:Zp,OperatorNode:bh,ParenthesisNode:Zv,parse:xu,typed:se}),HV=Ust({bignumber:$s,fraction:iC,AccessorNode:ow,ArrayNode:aw,ConstantNode:Yp,FunctionNode:Zp,IndexNode:sw,ObjectNode:iw,OperatorNode:bh,SymbolNode:Qp,config:Ee,isBounded:rC,mathWithTransform:lC,matrix:ke,typed:se}),ydt=mJe({parse:xu,typed:se}),bdt=kst({parse:xu,typed:se}),WV=qst({AccessorNode:ow,ArrayNode:aw,ConstantNode:Yp,FunctionNode:Zp,IndexNode:sw,ObjectNode:iw,OperatorNode:bh,ParenthesisNode:Zv,SymbolNode:Qp,add:Ut,divide:di,equal:qa,isZero:Pl,multiply:or,parse:xu,pow:wu,subtract:gn,typed:se}),uC=vJe({parse:xu,typed:se}),vme=iet({evaluate:uC}),yme=wJe({evaluate:uC,parse:xu}),wdt=_Je({Parser:yme,typed:se}),EO=$st({AccessorNode:ow,ArrayNode:aw,ConstantNode:Yp,FunctionNode:Zp,IndexNode:sw,ObjectNode:iw,OperatorNode:bh,ParenthesisNode:Zv,SymbolNode:Qp,equal:qa,parse:xu,replacer:Dpe,resolve:gme,simplifyConstant:HV,simplifyCore:WV,typed:se}),xdt=Xst({OperatorNode:bh,parse:xu,simplify:EO,typed:se}),bme=Qst({ConstantNode:Yp,FunctionNode:Zp,OperatorNode:bh,ParenthesisNode:Zv,SymbolNode:Qp,config:Ee,equal:qa,isZero:Pl,numeric:gl,parse:xu,simplify:EO,typed:se}),Adt=Git({Help:vme,mathWithTransform:lC,typed:se}),_dt=Jst({bignumber:$s,fraction:iC,AccessorNode:ow,ArrayNode:aw,ConstantNode:Yp,FunctionNode:Zp,IndexNode:sw,ObjectNode:iw,OperatorNode:bh,ParenthesisNode:Zv,SymbolNode:Qp,add:Ut,config:Ee,divide:di,equal:qa,isZero:Pl,mathWithTransform:lC,matrix:ke,multiply:or,parse:xu,pow:wu,simplify:EO,simplifyConstant:HV,simplifyCore:WV,subtract:gn,typed:se});Bn(nw,{e:UQ,false:Wut,fineStructure:Gut,i:Spe,Infinity:Kut,LN10:Xut,LOG10E:Yut,NaN:Qut,null:Zut,phi:Jut,SQRT1_2:tct,sackurTetrode:rct,tau:Tpe,true:nct,E:UQ,version:ict,efimovFactor:act,LN2:sct,pi:_4,replacer:Dpe,reviver:gdt,SQRT2:oct,typed:se,PI:_4,weakMixingAngle:lct,abs:ga,acos:uct,acot:cct,acsc:fct,addScalar:bi,arg:hct,asech:dct,asinh:pct,atan:Npe,atanh:mct,bigint:gct,bitNot:vct,boolean:yct,clone:bct,combinations:yO,complex:av,conj:Wv,cos:TV,cot:wct,csc:xct,cube:Act,equalScalar:Lt,erf:_ct,exp:Ppe,expm1:Ect,filter:Sct,flatten:Gv,forEach:Cct,format:tC,getMatrixDataType:DV,hex:Tct,im:NV,isBounded:rC,isNaN:Vf,isNumeric:Kv,isPrime:Dct,LOG2E:Nct,lgamma:Pct,log10:Mct,log2:PV,map:Gp,mode:Ict,multiplyScalar:Pn,not:IP,number:Pc,oct:Oct,pickRandom:kct,print:Rct,random:Fct,re:MV,sec:Lct,sign:Mpe,sin:bO,size:wi,splitUnit:Bct,square:$ct,string:jct,subtractScalar:Nl,tan:Vct,toBest:Uct,typeOf:wO,acosh:zct,acsch:qct,asec:Hct,bignumber:$s,chain:vdt,combinationsWithRep:Wct,cosh:Gct,csch:Kct,dot:xO,hasNumericValue:Xct,isFinite:Yct,isNegative:Kp,isZero:Pl,matrix:ke,matrixFromFunction:Qct,multiply:or,ones:Zct,randomInt:Jct,resize:eft,sech:tft,sinh:rft,sparse:nft,sqrt:bu,squeeze:ift,tanh:aft,transpose:nC,xgcd:Ipe,zeros:fa,acoth:sft,asin:oft,bin:lft,coth:uft,ctranspose:IV,diag:Ope,equal:qa,fraction:iC,identity:Xp,isInteger:as,kron:cft,mapSlices:o_,matrixFromColumns:OV,numeric:gl,prod:kpe,reshape:Rpe,round:rw,unaryMinus:Mc,bernoulli:fft,cbrt:Fpe,concat:tr,count:hft,deepEqual:aC,divideScalar:un,dotMultiply:dft,floor:Lpe,gcd:pft,isPositive:Xv,larger:ss,lcm:mft,leftShift:gft,lsolve:Bpe,max:kV,mod:$pe,nthRoot:vft,nullish:yft,or:bft,qr:RV,rightArithShift:wft,smaller:os,subtract:gn,to:xft,unaryPlus:FV,usolve:LV,xor:Aft,add:Ut,atan2:_ft,bitAnd:Eft,bitOr:Sft,bitXor:Cft,catalan:Tft,compare:Yv,compareText:jpe,composition:Dft,cross:Nft,det:Vpe,diff:Pft,distance:Mft,dotDivide:sC,equalText:Ift,hypot:Oft,intersect:kft,invmod:Rft,largerEq:AO,log:BV,lsolveAll:Fft,matrixFromRows:Lft,min:Bft,nthRoots:$ft,partitionSelect:_O,rightLogShift:jft,slu:qpe,subset:Io,sum:$V,trace:Vft,usolveAll:Wpe,zpk2tf:Uft,ceil:jV,compareNatural:Ic,cumsum:zft,fix:Gpe,index:Kpe,inv:Qv,log1p:qft,lup:Xpe,pinv:Hft,pow:wu,setCartesian:Wft,setDistinct:Gft,setIsSubset:Kft,setPowerset:Xft,smallerEq:E1,sort:Yft,sqrtm:Qft,unequal:Zft,and:Jft,divide:di,expm:eht,fft:Ype,freqz:tht,gamma:VV,ifft:rht,kldivergence:nht,lusolve:Qpe,mean:Zpe,median:Jpe,polynomialRoot:iht,quantileSeq:aht,range:S1,row:sht,setDifference:eme,setMultiplicity:oht,setSymDifference:tme,solveODE:lht,vacuumImpedance:uht,atomicMass:cht,bohrMagneton:fht,boltzmann:hht,column:rme,conductanceQuantum:dht,coulomb:pht,createUnit:mht,deuteronMass:ght,eigs:nme,electronMass:vht,factorial:oC,fermiCoupling:yht,gasConstant:bht,gravity:wht,klitzing:xht,loschmidt:Aht,mad:_ht,magneticFluxQuantum:Eht,molarMass:Sht,molarPlanckConstant:Cht,multinomial:Tht,norm:UV,permutations:Dht,planckConstant:Nht,planckMass:Pht,planckTime:Mht,reducedPlanckConstant:Iht,rotationMatrix:ime,rydberg:Oht,secondRadiation:kht,setSize:Rht,speedOfLight:Fht,stefanBoltzmann:Lht,thomsonCrossSection:Bht,variance:zV,zeta:$ht,avogadro:jht,bohrRadius:Vht,corr:Uht,dotPow:zht,elementaryCharge:qht,faraday:Hht,hartreeEnergy:Wht,inverseConductanceQuantum:Ght,magneticConstant:Kht,molarMassC12:Xht,neutronMass:Yht,parse:xu,planckCharge:Qht,planckTemperature:Zht,quantumOfCirculation:Jht,resolve:gme,setIntersect:ame,simplifyConstant:HV,std:edt,stirlingS2:sme,unit:tdt,bellNumbers:rdt,compile:ydt,electricConstant:ndt,firstRadiation:idt,leafCount:bdt,nuclearMagneton:adt,planckLength:sdt,rotate:odt,setUnion:ldt,simplifyCore:WV,wienDisplacement:udt,classicalElectronRadius:cdt,evaluate:uC,molarVolume:fdt,schur:ome,coulombConstant:hdt,gravitationConstant:ddt,parser:wdt,simplify:EO,symbolicEqual:xdt,derivative:bme,protonMass:pdt,sylvester:lme,help:Adt,rationalize:_dt,lyap:mdt,config:Ee});Bn(lC,nw,{map:Hlt({typed:se}),filter:Flt({typed:se}),forEach:$lt({typed:se}),mapSlices:Dlt({isInteger:as,typed:se}),and:Out({add:Ut,concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),cumsum:Cut({add:Ut,typed:se,unaryPlus:FV}),nullish:$ut({deepEqual:aC,flatten:Gv,matrix:ke,size:wi,typed:se}),print:Put({add:Ut,matrix:ke,typed:se,zeros:fa}),bitAnd:Uut({add:Ut,concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),concat:put({isInteger:as,matrix:ke,typed:se}),diff:gut({bignumber:$s,matrix:ke,number:Pc,subtract:gn,typed:se}),max:Ylt({config:Ee,isNaN:Vf,larger:ss,numeric:gl,typed:se}),min:rut({config:Ee,isNaN:Vf,numeric:gl,smaller:os,typed:se}),or:Fut({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),subset:fut({add:Ut,matrix:ke,typed:se,zeros:fa}),bitOr:Hut({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),sum:xut({add:Ut,config:Ee,numeric:gl,typed:se}),variance:Dut({add:Ut,divide:di,isNaN:Vf,mapSlices:o_,multiply:or,subtract:gn,typed:se}),index:Ult({Index:La,getMatrixDataType:DV}),quantileSeq:Eut({add:Ut,bignumber:$s,compare:Yv,divide:di,isInteger:as,larger:ss,mapSlices:o_,multiply:or,partitionSelect:_O,smaller:os,smallerEq:E1,subtract:gn,typed:se}),range:aut({bignumber:$s,matrix:ke,add:Ut,config:Ee,equal:qa,isPositive:Xv,isZero:Pl,larger:ss,largerEq:AO,smaller:os,smallerEq:E1,typed:se}),column:Mlt({Index:La,matrix:ke,range:S1,typed:se}),row:lut({Index:La,matrix:ke,range:S1,typed:se}),mean:Jlt({add:Ut,divide:di,typed:se}),std:but({map:Gp,sqrt:bu,typed:se,variance:zV})});Bn(ume,{BigNumber:Re,Complex:Ar,Fraction:Wp,Matrix:vO,Node:Ha,ObjectNode:iw,OperatorNode:bh,ParenthesisNode:Zv,Range:ect,RelationalNode:cme,ResultSet:Cpe,ArrayNode:aw,BlockNode:fme,ConditionalNode:hme,DenseMatrix:Pt,RangeNode:dme,Chain:qV,FunctionAssignmentNode:pme,SparseMatrix:xi,ConstantNode:Yp,IndexNode:sw,FibonacciHeap:Upe,ImmutableDenseMatrix:zpe,Index:La,Spa:Hpe,AccessorNode:ow,AssignmentNode:mme,Unit:gt,SymbolNode:Qp,FunctionNode:Zp,Help:vme,Parser:yme});qV.createProxy(nw);const Edt=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["(",")","ANS","DEL"]],Sdt=[["sin(","cos(","tan(","asin(","acos("],["log(","ln(","exp(","sqrt(","^"],["pi","e","i","abs(","pow("]],Cdt=(t,e)=>t.reduce((r,n)=>Ut(or(r,e),n)),zQ=t=>{if(typeof t=="number")return t.toFixed(6).replace(/\.0+$/,"");const e=t.re||0,r=t.im||0,n=Math.abs(e)<1e-9?"0":e.toFixed(6).replace(/\.0+$/,""),i=Math.abs(r)<1e-9?"0":r.toFixed(6).replace(/\.0+$/,"");if(Math.abs(r)<1e-9)return n;const a=r>=0?"+":"-";return`${n} ${a} ${Math.abs(i)}i`},Tdt=t=>{const e=t.map(o=>av(o,0)),r=e[0];if(qa(r,0))throw new Error("  0   .");const n=e.map(o=>di(o,r)),i=n.length-1,a=1+Math.max(...n.slice(1).map(o=>ga(o))),s=Array.from({length:i},(o,l)=>av({r:a,phi:2*Math.PI*l/i}));for(let o=0;o<80;o++){let l=0;for(let u=0;u<s.length;u++){let c=Cdt(n,s[u]),f=av(1,0);for(let d=0;d<s.length;d++)u!==d&&(f=or(f,gn(s[u],s[d])));const h=di(c,f);s[u]=gn(s[u],h),l=Math.max(l,ga(h))}if(l<1e-9)break}return s},Ddt=(t,e,r,n,i=600)=>{i%2!==0&&(i+=1);const a={},s=(n-r)/i;let o=0;for(let l=0;l<=i;l++){const u=r+l*s;a[e]=u;const c=uC(t,a);l===0||l===i?o+=c:l%2===0?o+=2*c:o+=4*c}return s/3*o};function Ndt(){const{isDark:t}=Cl(),[e,r]=O.useState(""),[n,i]=O.useState(""),[a,s]=O.useState([]),[o,l]=O.useState("basic"),[u,c]=O.useState("1,-3,2"),[f,h]=O.useState([]),[d,p]=O.useState(""),[m,v]=O.useState("x^3 + 2*x"),[y,w]=O.useState("x"),[b,A]=O.useState(""),[x,_]=O.useState("sin(x)"),[S,E]=O.useState("x"),[T,D]=O.useState({from:"0",to:"3.14159"}),[N,P]=O.useState(""),[M,j]=O.useState(""),K=t?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900",k=t?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900",V=t?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white",q=L=>{if(L==="DEL"){r(ie=>ie.slice(0,-1));return}if(L==="="){H();return}if(L==="ANS"){a.length>0&&r(ie=>ie+a[a.length-1].result);return}r(ie=>ie+L)},H=()=>{if(e.trim())try{const L=e.replace(//g,"pi").replace(//g,"sqrt");let ie=uC(L);typeof ie=="number"?ie=ie.toPrecision(10).replace(/\.0+$/,""):wO(ie)==="Complex"&&(ie=zQ(ie)),i(String(ie)),s(X=>[...X.slice(-9),{expression:e,result:String(ie)}])}catch(L){i(`: ${L.message}`)}},te=()=>{p("");try{const L=u.split(",").map(X=>X.trim()).filter(X=>X.length>0).map(X=>Number(X));if(L.length<2)throw new Error(" 2  . (: 1,-3,2)");if(L.some(X=>Number.isNaN(X)))throw new Error("   .");const ie=Tdt(L);h(ie.map(X=>zQ(X)))}catch(L){p(L.message),h([])}},ue=()=>{try{const L=bme(m,y).toString();A(`d/d${y} = ${L}`)}catch(L){A(` : ${L.message}`)}},re=()=>{j("");try{const L=Number(T.from),ie=Number(T.to);if(Number.isNaN(L)||Number.isNaN(ie))throw new Error("  .");if(L===ie)throw new Error("  0.");const X=Ddt(x,S,L,ie);P(` ${x} d${S} = ${Number(X).toPrecision(8)}`)}catch(L){j(L.message),P("")}};return I.jsxs("div",{className:"space-y-8",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"  ,   , /      ."})]}),I.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[I.jsxs(We.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:`xl:col-span-2 p-6 rounded-2xl border shadow-sm ${K}`,children:[I.jsx("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-gray-300 dark:border-gray-700 pb-3",children:[{id:"basic",label:" "},{id:"scientific",label:" "},{id:"history",label:""}].map(L=>I.jsx("button",{onClick:()=>l(L.id),className:`px-4 py-2 rounded-full text-sm font-medium transition ${o===L.id?t?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-600":t?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900"}`,children:L.label},L.id))}),I.jsxs("div",{className:`rounded-xl p-4 mb-4 ${t?"bg-gray-800":"bg-gray-100"}`,children:[I.jsx("input",{className:`w-full bg-transparent text-right text-3xl font-semibold mb-3 focus:outline-none ${t?"text-white":"text-gray-900"}`,value:e,onChange:L=>r(L.target.value),placeholder:"  (: (3+4i)*(2-i) + sin(pi/3))"}),n&&I.jsxs("p",{className:`text-right text-lg font-mono ${n.startsWith("")?"text-red-400":"text-green-500"}`,children:["= ",n]})]}),o==="basic"&&I.jsx("div",{className:"grid grid-cols-4 gap-3",children:Edt.map((L,ie)=>I.jsx("div",{className:"contents",children:L.map(X=>I.jsx("button",{onClick:()=>q(X==="pi"?"":X),className:`py-3 rounded-xl font-semibold text-lg transition ${["/","*","-","+","=","ANS"].includes(X)?V:k}`,children:X},X))},`basic-${ie}`))}),o==="scientific"&&I.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[Sdt.map((L,ie)=>I.jsx("div",{className:"contents",children:L.map(X=>I.jsx("button",{onClick:()=>q(X==="pi"?"":X),className:`py-3 rounded-xl font-semibold text-sm transition ${V}`,children:X},X))},`sci-${ie}`)),I.jsx("button",{onClick:H,className:`col-span-5 py-3 rounded-xl font-semibold text-lg ${V}`,children:" (=)"})]}),o==="history"&&I.jsxs("div",{children:[I.jsxs("div",{className:"flex items-center justify-between mb-2",children:[I.jsx("p",{className:"font-semibold",children:" 10 "}),I.jsx("button",{onClick:()=>s([]),className:`text-sm ${t?"text-red-300":"text-red-500"}`,children:" "})]}),I.jsxs("div",{className:"max-h-72 overflow-y-auto space-y-2",children:[a.length===0&&I.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.map((L,ie)=>I.jsxs("div",{className:`p-3 rounded-xl cursor-pointer ${t?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,onClick:()=>{r(L.expression),i(L.result)},children:[I.jsx("p",{className:"text-sm break-words",children:L.expression}),I.jsxs("p",{className:"text-sm font-semibold text-green-500",children:["= ",L.result]})]},`${L.expression}-${ie}`))]})]})]}),I.jsxs(We.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-6",children:[I.jsxs("div",{className:`p-6 rounded-2xl border shadow-sm ${K}`,children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),I.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-300":"text-gray-600"}`,children:["   (: x - 3x + 2  ",I.jsx("span",{className:"font-mono",children:"1,-3,2"}),")"]}),I.jsx("input",{value:u,onChange:L=>c(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsx("button",{onClick:te,className:`w-full py-3 rounded-xl font-semibold ${V}`,children:" "}),d&&I.jsx("p",{className:"text-sm text-red-400 mt-3",children:d}),f.length>0&&I.jsx("ul",{className:"mt-4 space-y-1 text-sm font-mono",children:f.map((L,ie)=>I.jsxs("li",{children:["x",ie+1," = ",L]},ie))})]}),I.jsxs("div",{className:`p-6 rounded-2xl border shadow-sm ${K}`,children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),I.jsx("input",{value:m,onChange:L=>v(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x) = "}),I.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I.jsx("label",{className:"text-sm",children:""}),I.jsx("input",{value:y,onChange:L=>w(L.target.value),className:`w-16 text-center px-2 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsxs("button",{onClick:ue,className:`flex-1 py-2 rounded-xl font-semibold ${V}`,children:["d/d",y]})]}),b&&I.jsx("p",{className:"text-sm font-mono text-green-400",children:b})]}),I.jsxs("div",{className:`p-6 rounded-2xl border shadow-sm ${K}`,children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),I.jsx("input",{value:x,onChange:L=>_(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x)"}),I.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I.jsx("label",{className:"text-sm",children:""}),I.jsx("input",{value:S,onChange:L=>E(L.target.value),className:`w-20 text-center px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsx("input",{value:T.from,onChange:L=>D(ie=>({...ie,from:L.target.value})),className:`flex-1 px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""}),I.jsx("input",{value:T.to,onChange:L=>D(ie=>({...ie,to:L.target.value})),className:`flex-1 px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""})]}),I.jsx("button",{onClick:re,className:`w-full py-3 rounded-xl font-semibold ${V}`,children:" "}),M&&I.jsx("p",{className:"text-sm text-red-400 mt-3",children:M}),N&&I.jsx("p",{className:"text-sm font-mono text-green-400 mt-3",children:N})]}),I.jsxs("div",{className:`p-6 rounded-2xl border shadow-sm ${K}`,children:[I.jsx("h2",{className:"text-xl font-bold mb-3",children:"  "}),I.jsxs("ul",{className:`text-sm space-y-2 ${t?"text-gray-300":"text-gray-600"}`,children:[I.jsx("li",{children:"   (: (3+4i)*(2-i))"}),I.jsx("li",{children:"   ( 10, Durand-Kerner )"}),I.jsx("li",{children:"   (math.js )"}),I.jsx("li",{children:"   (Simpson rule)"}),I.jsx("li",{children:"    : , e, i, trig/log, pow"})]})]})]})]})]})}const OP=t=>{const e=t.code||t.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||t.message||"  ."},Pdt=async(t,e,r)=>{try{const n=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(t);if(n[i])throw new Error("  .");await zie(p2,A5);let a=null,s=!1;try{a=(await Promise.race([HCe(p2,t,e),new Promise((u,c)=>setTimeout(()=>c(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",OP(l)),l.code==="auth/email-already-in-use")throw l;s=!0}const o={uid:(a==null?void 0:a.uid)||"local-"+Date.now(),email:t,password:btoa(e),username:r.username,affiliation:r.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:s||!a};return n[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(n)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(n){throw console.error(" :",n),new Error(OP(n))}},Mdt=async(t,e)=>{try{await zie(p2,A5);let r=null,n=!1;try{r=(await Promise.race([WCe(p2,t,e),new Promise((a,s)=>setTimeout(()=>s(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",OP(i));const a=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),s=btoa(t);if(a[s]){const o=a[s];if(btoa(e)===o.password)n=!0,r={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!r)throw new Error(" ");return{uid:r.uid,email:r.email,username:r.displayName||t.split("@")[0],isLocal:n}}catch(r){throw console.error(" :",r),new Error(OP(r))}},Idt=t=>{localStorage.setItem("currentUser",JSON.stringify(t)),localStorage.setItem("authToken",t.uid)};function Odt(){const t=I1(),{isDark:e}=Cl(),[r,n]=O.useState({email:"",password:""}),[i,a]=O.useState(""),[s,o]=O.useState(!1),l="auto",u=f=>{const{name:h,value:d}=f.target;n(p=>({...p,[h]:d})),a("")},c=async f=>{f.preventDefault(),o(!0),a("");try{if(!r.email||!r.password){a("  ."),o(!1);return}if(!r.email.includes("@")){a("   ."),o(!1);return}let h=null;if(l==="auto"||l==="firebase")try{h=await Mdt(r.email,r.password);const d={uid:h.uid,email:h.email,username:h.username,role:"user",authProvider:h.isLocal?"firebase-local":"firebase"};Idt(d),localStorage.setItem("user",JSON.stringify(d)),localStorage.setItem("authToken",h.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${h.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>t("/"),500);return}catch(d){console.warn("Firebase  :",d.message)}a(" :     .")}catch(h){console.error(" :",h),a("   .")}finally{o(!1)}};return I.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:I.jsxs(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[I.jsxs("div",{className:"text-center",children:[I.jsx(We.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),I.jsxs(We.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:r.email,onChange:u,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:r.password,onChange:u,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsx(We.button,{type:"submit",disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${s?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:s?" ...":""})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",I.jsx(Rr,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function kdt(){const t=I1(),{isDark:e}=Cl(),[r,n]=O.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,a]=O.useState({}),[s,o]=O.useState(!1),[l,u]=O.useState(""),c="auto",f=p=>{const{name:m,value:v,type:y,checked:w}=p.target;n(b=>({...b,[m]:y==="checkbox"?w:v})),i[m]&&a(b=>({...b,[m]:""}))},h=()=>{const p={};return r.username.trim()?r.username.length<3&&(p.username=" 3  ."):p.username=" .",r.email?r.email.includes("@")||(p.email="   ."):p.email=" .",r.password?r.password.length<8?p.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(r.password)||(p.password=" , ,   ."):p.password=" .",r.password!==r.confirmPassword&&(p.confirmPassword="  ."),r.agreeTerms||(p.agreeTerms=" ."),p},d=async p=>{p.preventDefault();const m=h();if(Object.keys(m).length>0){a(m);return}o(!0),u("");try{let v=!1,y=null;if(c==="auto"||c==="firebase")try{const w=await Pdt(r.email,r.password,{username:r.username,affiliation:r.affiliation});console.log("  :",w.username),v=!0}catch(w){console.warn("Firebase  :",w.message),y=w.message}if(!v&&(c==="auto"||c==="local")){const w=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),b=btoa(r.email);if(w[b]){a({submit:"  ."}),o(!1);return}const A={uid:"local-"+Date.now(),email:r.email,password:btoa(r.password),username:r.username,affiliation:r.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};w[b]=A,localStorage.setItem("firebaseUsers",JSON.stringify(w)),console.log("    "),v=!0}v&&(u(" .   ..."),setTimeout(()=>{t("/login")},2e3))}catch(v){console.error(" :",v),a({submit:"   .  ."})}finally{o(!1)}};return I.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:I.jsxs(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[I.jsxs("div",{className:"text-center",children:[I.jsx(We.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),I.jsxs(We.form,{onSubmit:d,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:r.username,onChange:f,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:r.email,onChange:f,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:r.affiliation,onChange:f,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:r.password,onChange:f,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),I.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:f,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:r.agreeTerms,onChange:f,className:"h-4 w-4 rounded"}),I.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),I.jsx(We.button,{type:"submit",disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${s?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:s?" ...":""})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",I.jsx(Rr,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const Ww=({children:t})=>IF()?t:I.jsx(t0e,{to:"/login",replace:!0});function Rdt(){return I.jsx(m0e,{children:I.jsx(f0e,{basename:"/1201-project/",children:I.jsxs(i0e,{children:[I.jsx(Gi,{path:"/login",element:I.jsx(Odt,{})}),I.jsx(Gi,{path:"/signup",element:I.jsx(kdt,{})}),I.jsxs(Gi,{element:I.jsx(A0e,{}),children:[I.jsx(Gi,{path:"/",element:I.jsx(rAe,{})}),I.jsx(Gi,{path:"/concepts",element:I.jsx(nAe,{})}),I.jsx(Gi,{path:"/concepts/:slug",element:I.jsx(aAe,{})}),I.jsx(Gi,{path:"/papers",element:I.jsx(cEe,{})}),I.jsx(Gi,{path:"/visualizations",element:I.jsx(Pze,{})}),I.jsx(Gi,{path:"/calculator",element:I.jsx(Ndt,{})}),I.jsx(Gi,{path:"/forum",element:I.jsx(Ww,{children:I.jsx(GPe,{})})}),I.jsx(Gi,{path:"/forum/:postId",element:I.jsx(Ww,{children:I.jsx(KPe,{})})}),I.jsx(Gi,{path:"/profile",element:I.jsx(Ww,{children:I.jsx(QPe,{})})}),I.jsx(Gi,{path:"/bookmarks",element:I.jsx(Ww,{children:I.jsx(ZPe,{})})}),I.jsx(Gi,{path:"/notes",element:I.jsx(Ww,{children:I.jsx(JPe,{})})}),I.jsx(Gi,{path:"/glossary",element:I.jsx(XPe,{})}),I.jsx(Gi,{path:"/references",element:I.jsx(YPe,{})})]})]})})})}FR.createRoot(document.getElementById("root")).render(I.jsx(tZ.StrictMode,{children:I.jsx(Rdt,{})}));
