var Zme=Object.defineProperty;var OU=t=>{throw TypeError(t)};var Jme=(t,e,r)=>e in t?Zme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Oe=(t,e,r)=>Jme(t,typeof e!="symbol"?e+"":e,r),VO=(t,e,r)=>e.has(t)||OU("Cannot "+r);var g=(t,e,r)=>(VO(t,e,"read from private field"),r?r.call(t):e.get(t)),$=(t,e,r)=>e.has(t)?OU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),R=(t,e,r,n)=>(VO(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),W=(t,e,r)=>(VO(t,e,"access private method"),r);var ni=(t,e,r,n)=>({set _(i){R(t,e,i,r)},get _(){return g(t,e,n)}});function ege(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tge(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var aZ={exports:{}},JP={},sZ={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=Symbol.for("react.element"),rge=Symbol.for("react.portal"),nge=Symbol.for("react.fragment"),ige=Symbol.for("react.strict_mode"),age=Symbol.for("react.profiler"),sge=Symbol.for("react.provider"),oge=Symbol.for("react.context"),lge=Symbol.for("react.forward_ref"),uge=Symbol.for("react.suspense"),cge=Symbol.for("react.memo"),fge=Symbol.for("react.lazy"),kU=Symbol.iterator;function hge(t){return t===null||typeof t!="object"?null:(t=kU&&t[kU]||t["@@iterator"],typeof t=="function"?t:null)}var oZ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lZ=Object.assign,uZ={};function _w(t,e,r){this.props=t,this.context=e,this.refs=uZ,this.updater=r||oZ}_w.prototype.isReactComponent={};_w.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cZ(){}cZ.prototype=_w.prototype;function T4(t,e,r){this.props=t,this.context=e,this.refs=uZ,this.updater=r||oZ}var D4=T4.prototype=new cZ;D4.constructor=T4;lZ(D4,_w.prototype);D4.isPureReactComponent=!0;var RU=Array.isArray,fZ=Object.prototype.hasOwnProperty,N4={current:null},hZ={key:!0,ref:!0,__self:!0,__source:!0};function dZ(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)fZ.call(e,n)&&!hZ.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:GE,type:t,key:a,ref:s,props:i,_owner:N4.current}}function dge(t,e){return{$$typeof:GE,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P4(t){return typeof t=="object"&&t!==null&&t.$$typeof===GE}function pge(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var FU=/\/+/g;function UO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pge(""+t.key):e.toString(36)}function zT(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case GE:case rge:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+UO(s,0):n,RU(i)?(r="",t!=null&&(r=t.replace(FU,"$&/")+"/"),zT(i,e,r,"",function(u){return u})):i!=null&&(P4(i)&&(i=dge(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(FU,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",RU(t))for(var o=0;o<t.length;o++){a=t[o];var l=n+UO(a,o);s+=zT(a,e,r,l,i)}else if(l=hge(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=n+UO(a,o++),s+=zT(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function EC(t,e,r){if(t==null)return t;var n=[],i=0;return zT(t,n,"","",function(a){return e.call(r,a,i++)}),n}function mge(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ps={current:null},qT={transition:null},gge={ReactCurrentDispatcher:ps,ReactCurrentBatchConfig:qT,ReactCurrentOwner:N4};function pZ(){throw Error("act(...) is not supported in production builds of React.")}Ht.Children={map:EC,forEach:function(t,e,r){EC(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return EC(t,function(){e++}),e},toArray:function(t){return EC(t,function(e){return e})||[]},only:function(t){if(!P4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=_w;Ht.Fragment=nge;Ht.Profiler=age;Ht.PureComponent=T4;Ht.StrictMode=ige;Ht.Suspense=uge;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gge;Ht.act=pZ;Ht.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=lZ({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=N4.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)fZ.call(e,l)&&!hZ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:GE,type:t.type,key:i,ref:a,props:n,_owner:s}};Ht.createContext=function(t){return t={$$typeof:oge,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sge,_context:t},t.Consumer=t};Ht.createElement=dZ;Ht.createFactory=function(t){var e=dZ.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:lge,render:t}};Ht.isValidElement=P4;Ht.lazy=function(t){return{$$typeof:fge,_payload:{_status:-1,_result:t},_init:mge}};Ht.memo=function(t,e){return{$$typeof:cge,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=qT.transition;qT.transition={};try{t()}finally{qT.transition=e}};Ht.unstable_act=pZ;Ht.useCallback=function(t,e){return ps.current.useCallback(t,e)};Ht.useContext=function(t){return ps.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return ps.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return ps.current.useEffect(t,e)};Ht.useId=function(){return ps.current.useId()};Ht.useImperativeHandle=function(t,e,r){return ps.current.useImperativeHandle(t,e,r)};Ht.useInsertionEffect=function(t,e){return ps.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return ps.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return ps.current.useMemo(t,e)};Ht.useReducer=function(t,e,r){return ps.current.useReducer(t,e,r)};Ht.useRef=function(t){return ps.current.useRef(t)};Ht.useState=function(t){return ps.current.useState(t)};Ht.useSyncExternalStore=function(t,e,r){return ps.current.useSyncExternalStore(t,e,r)};Ht.useTransition=function(){return ps.current.useTransition()};Ht.version="18.3.1";sZ.exports=Ht;var O=sZ.exports;const mZ=Sl(O),gZ=ege({__proto__:null,default:mZ},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vge=O,yge=Symbol.for("react.element"),bge=Symbol.for("react.fragment"),wge=Object.prototype.hasOwnProperty,xge=vge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Age={key:!0,ref:!0,__self:!0,__source:!0};function vZ(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)wge.call(e,n)&&!Age.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:yge,type:t,key:a,ref:s,props:i,_owner:xge.current}}JP.Fragment=bge;JP.jsx=vZ;JP.jsxs=vZ;aZ.exports=JP;var I=aZ.exports,FR={},yZ={exports:{}},No={},bZ={exports:{}},wZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,H){var ee=q.length;q.push(H);e:for(;0<ee;){var le=ee-1>>>1,re=q[le];if(0<i(re,H))q[le]=H,q[ee]=re,ee=le;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var H=q[0],ee=q.pop();if(ee!==H){q[0]=ee;e:for(var le=0,re=q.length,L=re>>>1;le<L;){var ie=2*(le+1)-1,X=q[ie],pe=ie+1,de=q[pe];if(0>i(X,ee))pe<re&&0>i(de,X)?(q[le]=de,q[pe]=ee,le=pe):(q[le]=X,q[ie]=ee,le=ie);else if(pe<re&&0>i(de,ee))q[le]=de,q[pe]=ee,le=pe;else break e}}return H}function i(q,H){var ee=q.sortIndex-H.sortIndex;return ee!==0?ee:q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=q)n(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(u)}}function _(q){if(m=!1,b(q),!p)if(r(l)!==null)p=!0,k(x);else{var H=r(u);H!==null&&V(_,H.startTime-q)}}function x(q,H){p=!1,m&&(m=!1,y(S),S=-1),d=!0;var ee=h;try{for(b(H),f=r(l);f!==null&&(!(f.expirationTime>H)||q&&!N());){var le=f.callback;if(typeof le=="function"){f.callback=null,h=f.priorityLevel;var re=le(f.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?f.callback=re:f===r(l)&&n(l),b(H)}else n(l);f=r(l)}if(f!==null)var L=!0;else{var ie=r(u);ie!==null&&V(_,ie.startTime-H),L=!1}return L}finally{f=null,h=ee,d=!1}}var A=!1,E=null,S=-1,C=5,D=-1;function N(){return!(t.unstable_now()-D<C)}function P(){if(E!==null){var q=t.unstable_now();D=q;var H=!0;try{H=E(!0,q)}finally{H?M():(A=!1,E=null)}}else A=!1}var M;if(typeof w=="function")M=function(){w(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,K=j.port2;j.port1.onmessage=P,M=function(){K.postMessage(null)}}else M=function(){v(P,0)};function k(q){E=q,A||(A=!0,M())}function V(q,H){S=v(function(){q(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,k(x))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(q){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var ee=h;h=H;try{return q()}finally{h=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=h;h=q;try{return H()}finally{h=ee}},t.unstable_scheduleCallback=function(q,H,ee){var le=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ee+re,q={id:c++,callback:H,priorityLevel:q,startTime:ee,expirationTime:re,sortIndex:-1},ee>le?(q.sortIndex=ee,e(u,q),r(l)===null&&q===r(u)&&(m?(y(S),S=-1):m=!0,V(_,ee-le))):(q.sortIndex=re,e(l,q),p||d||(p=!0,k(x))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var H=h;return function(){var ee=h;h=H;try{return q.apply(this,arguments)}finally{h=ee}}}})(wZ);bZ.exports=wZ;var _ge=bZ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ege=O,Co=_ge;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xZ=new Set,Yx={};function Pv(t,e){zb(t,e),zb(t+"Capture",e)}function zb(t,e){for(Yx[t]=e,t=0;t<e.length;t++)xZ.add(e[t])}var Wf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LR=Object.prototype.hasOwnProperty,Sge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LU={},BU={};function Cge(t){return LR.call(BU,t)?!0:LR.call(LU,t)?!1:Sge.test(t)?BU[t]=!0:(LU[t]=!0,!1)}function Tge(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Dge(t,e,r,n){if(e===null||typeof e>"u"||Tge(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ms(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var pa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pa[t]=new ms(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pa[e]=new ms(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pa[t]=new ms(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pa[t]=new ms(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pa[t]=new ms(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pa[t]=new ms(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pa[t]=new ms(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pa[t]=new ms(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pa[t]=new ms(t,5,!1,t.toLowerCase(),null,!1,!1)});var M4=/[\-:]([a-z])/g;function I4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(M4,I4);pa[e]=new ms(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(M4,I4);pa[e]=new ms(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(M4,I4);pa[e]=new ms(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pa[t]=new ms(t,1,!1,t.toLowerCase(),null,!1,!1)});pa.xlinkHref=new ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pa[t]=new ms(t,1,!1,t.toLowerCase(),null,!0,!0)});function O4(t,e,r,n){var i=pa.hasOwnProperty(e)?pa[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dge(e,r,i,n)&&(r=null),n||i===null?Cge(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var gh=Ege.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,SC=Symbol.for("react.element"),Cy=Symbol.for("react.portal"),Ty=Symbol.for("react.fragment"),k4=Symbol.for("react.strict_mode"),BR=Symbol.for("react.profiler"),AZ=Symbol.for("react.provider"),_Z=Symbol.for("react.context"),R4=Symbol.for("react.forward_ref"),$R=Symbol.for("react.suspense"),jR=Symbol.for("react.suspense_list"),F4=Symbol.for("react.memo"),Lh=Symbol.for("react.lazy"),EZ=Symbol.for("react.offscreen"),$U=Symbol.iterator;function w1(t){return t===null||typeof t!="object"?null:(t=$U&&t[$U]||t["@@iterator"],typeof t=="function"?t:null)}var vn=Object.assign,zO;function H1(t){if(zO===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);zO=e&&e[1]||""}return`
`+zO+t}var qO=!1;function HO(t,e){if(!t||qO)return"";qO=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{qO=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?H1(t):""}function Nge(t){switch(t.tag){case 5:return H1(t.type);case 16:return H1("Lazy");case 13:return H1("Suspense");case 19:return H1("SuspenseList");case 0:case 2:case 15:return t=HO(t.type,!1),t;case 11:return t=HO(t.type.render,!1),t;case 1:return t=HO(t.type,!0),t;default:return""}}function VR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ty:return"Fragment";case Cy:return"Portal";case BR:return"Profiler";case k4:return"StrictMode";case $R:return"Suspense";case jR:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _Z:return(t.displayName||"Context")+".Consumer";case AZ:return(t._context.displayName||"Context")+".Provider";case R4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F4:return e=t.displayName||null,e!==null?e:VR(t.type)||"Memo";case Lh:e=t._payload,t=t._init;try{return VR(t(e))}catch{}}return null}function Pge(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VR(e);case 8:return e===k4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function up(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SZ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mge(t){var e=SZ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function CC(t){t._valueTracker||(t._valueTracker=Mge(t))}function CZ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=SZ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function iN(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function UR(t,e){var r=e.checked;return vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function jU(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=up(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TZ(t,e){e=e.checked,e!=null&&O4(t,"checked",e,!1)}function zR(t,e){TZ(t,e);var r=up(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qR(t,e.type,r):e.hasOwnProperty("defaultValue")&&qR(t,e.type,up(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function VU(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qR(t,e,r){(e!=="number"||iN(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var W1=Array.isArray;function t0(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+up(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function HR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return vn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UU(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Fe(92));if(W1(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:up(r)}}function DZ(t,e){var r=up(e.value),n=up(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function zU(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NZ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NZ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var TC,PZ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(TC=TC||document.createElement("div"),TC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=TC.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qx(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Tx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ige=["Webkit","ms","Moz","O"];Object.keys(Tx).forEach(function(t){Ige.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tx[e]=Tx[t]})});function MZ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Tx.hasOwnProperty(t)&&Tx[t]?(""+e).trim():e+"px"}function IZ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=MZ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Oge=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GR(t,e){if(e){if(Oge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function KR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XR=null;function L4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YR=null,r0=null,n0=null;function qU(t){if(t=YE(t)){if(typeof YR!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=iM(e),YR(t.stateNode,t.type,e))}}function OZ(t){r0?n0?n0.push(t):n0=[t]:r0=t}function kZ(){if(r0){var t=r0,e=n0;if(n0=r0=null,qU(t),e)for(t=0;t<e.length;t++)qU(e[t])}}function RZ(t,e){return t(e)}function FZ(){}var WO=!1;function LZ(t,e,r){if(WO)return t(e,r);WO=!0;try{return RZ(t,e,r)}finally{WO=!1,(r0!==null||n0!==null)&&(FZ(),kZ())}}function Zx(t,e){var r=t.stateNode;if(r===null)return null;var n=iM(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,e,typeof r));return r}var QR=!1;if(Wf)try{var x1={};Object.defineProperty(x1,"passive",{get:function(){QR=!0}}),window.addEventListener("test",x1,x1),window.removeEventListener("test",x1,x1)}catch{QR=!1}function kge(t,e,r,n,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var Dx=!1,aN=null,sN=!1,ZR=null,Rge={onError:function(t){Dx=!0,aN=t}};function Fge(t,e,r,n,i,a,s,o,l){Dx=!1,aN=null,kge.apply(Rge,arguments)}function Lge(t,e,r,n,i,a,s,o,l){if(Fge.apply(this,arguments),Dx){if(Dx){var u=aN;Dx=!1,aN=null}else throw Error(Fe(198));sN||(sN=!0,ZR=u)}}function Mv(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function BZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function HU(t){if(Mv(t)!==t)throw Error(Fe(188))}function Bge(t){var e=t.alternate;if(!e){if(e=Mv(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return HU(i),t;if(a===n)return HU(i),e;a=a.sibling}throw Error(Fe(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(Fe(189))}}if(r.alternate!==n)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:e}function $Z(t){return t=Bge(t),t!==null?jZ(t):null}function jZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jZ(t);if(e!==null)return e;t=t.sibling}return null}var VZ=Co.unstable_scheduleCallback,WU=Co.unstable_cancelCallback,$ge=Co.unstable_shouldYield,jge=Co.unstable_requestPaint,Vn=Co.unstable_now,Vge=Co.unstable_getCurrentPriorityLevel,B4=Co.unstable_ImmediatePriority,UZ=Co.unstable_UserBlockingPriority,oN=Co.unstable_NormalPriority,Uge=Co.unstable_LowPriority,zZ=Co.unstable_IdlePriority,eM=null,sc=null;function zge(t){if(sc&&typeof sc.onCommitFiberRoot=="function")try{sc.onCommitFiberRoot(eM,t,void 0,(t.current.flags&128)===128)}catch{}}var au=Math.clz32?Math.clz32:Wge,qge=Math.log,Hge=Math.LN2;function Wge(t){return t>>>=0,t===0?32:31-(qge(t)/Hge|0)|0}var DC=64,NC=4194304;function G1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lN(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=G1(o):(a&=s,a!==0&&(n=G1(a)))}else s=r&~i,s!==0?n=G1(s):a!==0&&(n=G1(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-au(e),i=1<<r,n|=t[r],e&=~i;return n}function Gge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kge(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-au(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=Gge(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function JR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qZ(){var t=DC;return DC<<=1,!(DC&4194240)&&(DC=64),t}function GO(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function KE(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-au(e),t[e]=r}function Xge(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-au(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function $4(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-au(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var wr=0;function HZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WZ,j4,GZ,KZ,XZ,eF=!1,PC=[],Kd=null,Xd=null,Yd=null,Jx=new Map,eA=new Map,zh=[],Yge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GU(t,e){switch(t){case"focusin":case"focusout":Kd=null;break;case"dragenter":case"dragleave":Xd=null;break;case"mouseover":case"mouseout":Yd=null;break;case"pointerover":case"pointerout":Jx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eA.delete(e.pointerId)}}function A1(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=YE(e),e!==null&&j4(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Qge(t,e,r,n,i){switch(e){case"focusin":return Kd=A1(Kd,t,e,r,n,i),!0;case"dragenter":return Xd=A1(Xd,t,e,r,n,i),!0;case"mouseover":return Yd=A1(Yd,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Jx.set(a,A1(Jx.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,eA.set(a,A1(eA.get(a)||null,t,e,r,n,i)),!0}return!1}function YZ(t){var e=Em(t.target);if(e!==null){var r=Mv(e);if(r!==null){if(e=r.tag,e===13){if(e=BZ(r),e!==null){t.blockedOn=e,XZ(t.priority,function(){GZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function HT(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tF(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);XR=n,r.target.dispatchEvent(n),XR=null}else return e=YE(r),e!==null&&j4(e),t.blockedOn=r,!1;e.shift()}return!0}function KU(t,e,r){HT(t)&&r.delete(e)}function Zge(){eF=!1,Kd!==null&&HT(Kd)&&(Kd=null),Xd!==null&&HT(Xd)&&(Xd=null),Yd!==null&&HT(Yd)&&(Yd=null),Jx.forEach(KU),eA.forEach(KU)}function _1(t,e){t.blockedOn===e&&(t.blockedOn=null,eF||(eF=!0,Co.unstable_scheduleCallback(Co.unstable_NormalPriority,Zge)))}function tA(t){function e(i){return _1(i,t)}if(0<PC.length){_1(PC[0],t);for(var r=1;r<PC.length;r++){var n=PC[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Kd!==null&&_1(Kd,t),Xd!==null&&_1(Xd,t),Yd!==null&&_1(Yd,t),Jx.forEach(e),eA.forEach(e),r=0;r<zh.length;r++)n=zh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<zh.length&&(r=zh[0],r.blockedOn===null);)YZ(r),r.blockedOn===null&&zh.shift()}var i0=gh.ReactCurrentBatchConfig,uN=!0;function Jge(t,e,r,n){var i=wr,a=i0.transition;i0.transition=null;try{wr=1,V4(t,e,r,n)}finally{wr=i,i0.transition=a}}function eve(t,e,r,n){var i=wr,a=i0.transition;i0.transition=null;try{wr=4,V4(t,e,r,n)}finally{wr=i,i0.transition=a}}function V4(t,e,r,n){if(uN){var i=tF(t,e,r,n);if(i===null)nk(t,e,n,cN,r),GU(t,n);else if(Qge(i,t,e,r,n))n.stopPropagation();else if(GU(t,n),e&4&&-1<Yge.indexOf(t)){for(;i!==null;){var a=YE(i);if(a!==null&&WZ(a),a=tF(t,e,r,n),a===null&&nk(t,e,n,cN,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else nk(t,e,n,null,r)}}var cN=null;function tF(t,e,r,n){if(cN=null,t=L4(n),t=Em(t),t!==null)if(e=Mv(t),e===null)t=null;else if(r=e.tag,r===13){if(t=BZ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cN=t,null}function QZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vge()){case B4:return 1;case UZ:return 4;case oN:case Uge:return 16;case zZ:return 536870912;default:return 16}default:return 16}}var Ud=null,U4=null,WT=null;function ZZ(){if(WT)return WT;var t,e=U4,r=e.length,n,i="value"in Ud?Ud.value:Ud.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return WT=i.slice(t,1<n?1-n:void 0)}function GT(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function MC(){return!0}function XU(){return!1}function Po(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?MC:XU,this.isPropagationStopped=XU,this}return vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=MC)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=MC)},persist:function(){},isPersistent:MC}),e}var Ew={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z4=Po(Ew),XE=vn({},Ew,{view:0,detail:0}),tve=Po(XE),KO,XO,E1,tM=vn({},XE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==E1&&(E1&&t.type==="mousemove"?(KO=t.screenX-E1.screenX,XO=t.screenY-E1.screenY):XO=KO=0,E1=t),KO)},movementY:function(t){return"movementY"in t?t.movementY:XO}}),YU=Po(tM),rve=vn({},tM,{dataTransfer:0}),nve=Po(rve),ive=vn({},XE,{relatedTarget:0}),YO=Po(ive),ave=vn({},Ew,{animationName:0,elapsedTime:0,pseudoElement:0}),sve=Po(ave),ove=vn({},Ew,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lve=Po(ove),uve=vn({},Ew,{data:0}),QU=Po(uve),cve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dve(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hve[t])?!!e[t]:!1}function q4(){return dve}var pve=vn({},XE,{key:function(t){if(t.key){var e=cve[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=GT(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fve[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q4,charCode:function(t){return t.type==="keypress"?GT(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?GT(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mve=Po(pve),gve=vn({},tM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZU=Po(gve),vve=vn({},XE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q4}),yve=Po(vve),bve=vn({},Ew,{propertyName:0,elapsedTime:0,pseudoElement:0}),wve=Po(bve),xve=vn({},tM,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ave=Po(xve),_ve=[9,13,27,32],H4=Wf&&"CompositionEvent"in window,Nx=null;Wf&&"documentMode"in document&&(Nx=document.documentMode);var Eve=Wf&&"TextEvent"in window&&!Nx,JZ=Wf&&(!H4||Nx&&8<Nx&&11>=Nx),JU=" ",e8=!1;function eJ(t,e){switch(t){case"keyup":return _ve.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dy=!1;function Sve(t,e){switch(t){case"compositionend":return tJ(e);case"keypress":return e.which!==32?null:(e8=!0,JU);case"textInput":return t=e.data,t===JU&&e8?null:t;default:return null}}function Cve(t,e){if(Dy)return t==="compositionend"||!H4&&eJ(t,e)?(t=ZZ(),WT=U4=Ud=null,Dy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JZ&&e.locale!=="ko"?null:e.data;default:return null}}var Tve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tve[t.type]:e==="textarea"}function rJ(t,e,r,n){OZ(n),e=fN(e,"onChange"),0<e.length&&(r=new z4("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Px=null,rA=null;function Dve(t){dJ(t,0)}function rM(t){var e=My(t);if(CZ(e))return t}function Nve(t,e){if(t==="change")return e}var nJ=!1;if(Wf){var QO;if(Wf){var ZO="oninput"in document;if(!ZO){var r8=document.createElement("div");r8.setAttribute("oninput","return;"),ZO=typeof r8.oninput=="function"}QO=ZO}else QO=!1;nJ=QO&&(!document.documentMode||9<document.documentMode)}function n8(){Px&&(Px.detachEvent("onpropertychange",iJ),rA=Px=null)}function iJ(t){if(t.propertyName==="value"&&rM(rA)){var e=[];rJ(e,rA,t,L4(t)),LZ(Dve,e)}}function Pve(t,e,r){t==="focusin"?(n8(),Px=e,rA=r,Px.attachEvent("onpropertychange",iJ)):t==="focusout"&&n8()}function Mve(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rM(rA)}function Ive(t,e){if(t==="click")return rM(e)}function Ove(t,e){if(t==="input"||t==="change")return rM(e)}function kve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uu=typeof Object.is=="function"?Object.is:kve;function nA(t,e){if(uu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!LR.call(e,i)||!uu(t[i],e[i]))return!1}return!0}function i8(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a8(t,e){var r=i8(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=i8(r)}}function aJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sJ(){for(var t=window,e=iN();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=iN(t.document)}return e}function W4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rve(t){var e=sJ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aJ(r.ownerDocument.documentElement,r)){if(n!==null&&W4(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=a8(r,a);var s=a8(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fve=Wf&&"documentMode"in document&&11>=document.documentMode,Ny=null,rF=null,Mx=null,nF=!1;function s8(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nF||Ny==null||Ny!==iN(n)||(n=Ny,"selectionStart"in n&&W4(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mx&&nA(Mx,n)||(Mx=n,n=fN(rF,"onSelect"),0<n.length&&(e=new z4("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ny)))}function IC(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Py={animationend:IC("Animation","AnimationEnd"),animationiteration:IC("Animation","AnimationIteration"),animationstart:IC("Animation","AnimationStart"),transitionend:IC("Transition","TransitionEnd")},JO={},oJ={};Wf&&(oJ=document.createElement("div").style,"AnimationEvent"in window||(delete Py.animationend.animation,delete Py.animationiteration.animation,delete Py.animationstart.animation),"TransitionEvent"in window||delete Py.transitionend.transition);function nM(t){if(JO[t])return JO[t];if(!Py[t])return t;var e=Py[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in oJ)return JO[t]=e[r];return t}var lJ=nM("animationend"),uJ=nM("animationiteration"),cJ=nM("animationstart"),fJ=nM("transitionend"),hJ=new Map,o8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ip(t,e){hJ.set(t,e),Pv(e,[t])}for(var ek=0;ek<o8.length;ek++){var tk=o8[ek],Lve=tk.toLowerCase(),Bve=tk[0].toUpperCase()+tk.slice(1);Ip(Lve,"on"+Bve)}Ip(lJ,"onAnimationEnd");Ip(uJ,"onAnimationIteration");Ip(cJ,"onAnimationStart");Ip("dblclick","onDoubleClick");Ip("focusin","onFocus");Ip("focusout","onBlur");Ip(fJ,"onTransitionEnd");zb("onMouseEnter",["mouseout","mouseover"]);zb("onMouseLeave",["mouseout","mouseover"]);zb("onPointerEnter",["pointerout","pointerover"]);zb("onPointerLeave",["pointerout","pointerover"]);Pv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var K1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$ve=new Set("cancel close invalid load scroll toggle".split(" ").concat(K1));function l8(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Lge(n,e,void 0,t),t.currentTarget=null}function dJ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;l8(i,o,u),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;l8(i,o,u),a=l}}}if(sN)throw t=ZR,sN=!1,ZR=null,t}function Kr(t,e){var r=e[lF];r===void 0&&(r=e[lF]=new Set);var n=t+"__bubble";r.has(n)||(pJ(e,t,2,!1),r.add(n))}function rk(t,e,r){var n=0;e&&(n|=4),pJ(r,t,n,e)}var OC="_reactListening"+Math.random().toString(36).slice(2);function iA(t){if(!t[OC]){t[OC]=!0,xZ.forEach(function(r){r!=="selectionchange"&&($ve.has(r)||rk(r,!1,t),rk(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[OC]||(e[OC]=!0,rk("selectionchange",!1,e))}}function pJ(t,e,r,n){switch(QZ(e)){case 1:var i=Jge;break;case 4:i=eve;break;default:i=V4}r=i.bind(null,e,r,t),i=void 0,!QR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function nk(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Em(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}LZ(function(){var u=a,c=L4(r),f=[];e:{var h=hJ.get(t);if(h!==void 0){var d=z4,p=t;switch(t){case"keypress":if(GT(r)===0)break e;case"keydown":case"keyup":d=mve;break;case"focusin":p="focus",d=YO;break;case"focusout":p="blur",d=YO;break;case"beforeblur":case"afterblur":d=YO;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=YU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=nve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=yve;break;case lJ:case uJ:case cJ:d=sve;break;case fJ:d=wve;break;case"scroll":d=tve;break;case"wheel":d=Ave;break;case"copy":case"cut":case"paste":d=lve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ZU}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=Zx(w,y),_!=null&&m.push(aA(w,_,b)))),v)break;w=w.return}0<m.length&&(h=new d(h,p,null,r,c),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==XR&&(p=r.relatedTarget||r.fromElement)&&(Em(p)||p[Gf]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=u,p=p?Em(p):null,p!==null&&(v=Mv(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(m=YU,_="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=ZU,_="onPointerLeave",y="onPointerEnter",w="pointer"),v=d==null?h:My(d),b=p==null?h:My(p),h=new m(_,w+"leave",d,r,c),h.target=v,h.relatedTarget=b,_=null,Em(c)===u&&(m=new m(y,w+"enter",p,r,c),m.target=b,m.relatedTarget=v,_=m),v=_,d&&p)t:{for(m=d,y=p,w=0,b=m;b;b=ty(b))w++;for(b=0,_=y;_;_=ty(_))b++;for(;0<w-b;)m=ty(m),w--;for(;0<b-w;)y=ty(y),b--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=ty(m),y=ty(y)}m=null}else m=null;d!==null&&u8(f,h,d,m,!1),p!==null&&v!==null&&u8(f,v,p,m,!0)}}e:{if(h=u?My(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=Nve;else if(t8(h))if(nJ)x=Ove;else{x=Mve;var A=Pve}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Ive);if(x&&(x=x(t,u))){rJ(f,x,r,c);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&qR(h,"number",h.value)}switch(A=u?My(u):window,t){case"focusin":(t8(A)||A.contentEditable==="true")&&(Ny=A,rF=u,Mx=null);break;case"focusout":Mx=rF=Ny=null;break;case"mousedown":nF=!0;break;case"contextmenu":case"mouseup":case"dragend":nF=!1,s8(f,r,c);break;case"selectionchange":if(Fve)break;case"keydown":case"keyup":s8(f,r,c)}var E;if(H4)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Dy?eJ(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(JZ&&r.locale!=="ko"&&(Dy||S!=="onCompositionStart"?S==="onCompositionEnd"&&Dy&&(E=ZZ()):(Ud=c,U4="value"in Ud?Ud.value:Ud.textContent,Dy=!0)),A=fN(u,S),0<A.length&&(S=new QU(S,t,null,r,c),f.push({event:S,listeners:A}),E?S.data=E:(E=tJ(r),E!==null&&(S.data=E)))),(E=Eve?Sve(t,r):Cve(t,r))&&(u=fN(u,"onBeforeInput"),0<u.length&&(c=new QU("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=E))}dJ(f,e)})}function aA(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fN(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Zx(t,r),a!=null&&n.unshift(aA(t,a,i)),a=Zx(t,e),a!=null&&n.push(aA(t,a,i))),t=t.return}return n}function ty(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u8(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Zx(r,a),l!=null&&s.unshift(aA(r,l,o))):i||(l=Zx(r,a),l!=null&&s.push(aA(r,l,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var jve=/\r\n?/g,Vve=/\u0000|\uFFFD/g;function c8(t){return(typeof t=="string"?t:""+t).replace(jve,`
`).replace(Vve,"")}function kC(t,e,r){if(e=c8(e),c8(t)!==e&&r)throw Error(Fe(425))}function hN(){}var iF=null,aF=null;function sF(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oF=typeof setTimeout=="function"?setTimeout:void 0,Uve=typeof clearTimeout=="function"?clearTimeout:void 0,f8=typeof Promise=="function"?Promise:void 0,zve=typeof queueMicrotask=="function"?queueMicrotask:typeof f8<"u"?function(t){return f8.resolve(null).then(t).catch(qve)}:oF;function qve(t){setTimeout(function(){throw t})}function ik(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),tA(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);tA(e)}function Qd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h8(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Sw=Math.random().toString(36).slice(2),rc="__reactFiber$"+Sw,sA="__reactProps$"+Sw,Gf="__reactContainer$"+Sw,lF="__reactEvents$"+Sw,Hve="__reactListeners$"+Sw,Wve="__reactHandles$"+Sw;function Em(t){var e=t[rc];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Gf]||r[rc]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=h8(t);t!==null;){if(r=t[rc])return r;t=h8(t)}return e}t=r,r=t.parentNode}return null}function YE(t){return t=t[rc]||t[Gf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function My(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function iM(t){return t[sA]||null}var uF=[],Iy=-1;function Op(t){return{current:t}}function Zr(t){0>Iy||(t.current=uF[Iy],uF[Iy]=null,Iy--)}function Hr(t,e){Iy++,uF[Iy]=t.current,t.current=e}var cp={},$a=Op(cp),Ls=Op(!1),lv=cp;function qb(t,e){var r=t.type.contextTypes;if(!r)return cp;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bs(t){return t=t.childContextTypes,t!=null}function dN(){Zr(Ls),Zr($a)}function d8(t,e,r){if($a.current!==cp)throw Error(Fe(168));Hr($a,e),Hr(Ls,r)}function mJ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Fe(108,Pge(t)||"Unknown",i));return vn({},r,n)}function pN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cp,lv=$a.current,Hr($a,t),Hr(Ls,Ls.current),!0}function p8(t,e,r){var n=t.stateNode;if(!n)throw Error(Fe(169));r?(t=mJ(t,e,lv),n.__reactInternalMemoizedMergedChildContext=t,Zr(Ls),Zr($a),Hr($a,t)):Zr(Ls),Hr(Ls,r)}var Vc=null,aM=!1,ak=!1;function gJ(t){Vc===null?Vc=[t]:Vc.push(t)}function Gve(t){aM=!0,gJ(t)}function kp(){if(!ak&&Vc!==null){ak=!0;var t=0,e=wr;try{var r=Vc;for(wr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vc=null,aM=!1}catch(i){throw Vc!==null&&(Vc=Vc.slice(t+1)),VZ(B4,kp),i}finally{wr=e,ak=!1}}return null}var Oy=[],ky=0,mN=null,gN=0,al=[],sl=0,uv=null,Tf=1,Df="";function um(t,e){Oy[ky++]=gN,Oy[ky++]=mN,mN=t,gN=e}function vJ(t,e,r){al[sl++]=Tf,al[sl++]=Df,al[sl++]=uv,uv=t;var n=Tf;t=Df;var i=32-au(n)-1;n&=~(1<<i),r+=1;var a=32-au(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Tf=1<<32-au(e)+i|r<<i|n,Df=a+t}else Tf=1<<a|r<<i|n,Df=t}function G4(t){t.return!==null&&(um(t,1),vJ(t,1,0))}function K4(t){for(;t===mN;)mN=Oy[--ky],Oy[ky]=null,gN=Oy[--ky],Oy[ky]=null;for(;t===uv;)uv=al[--sl],al[sl]=null,Df=al[--sl],al[sl]=null,Tf=al[--sl],al[sl]=null}var _o=null,wo=null,an=!1,Ql=null;function yJ(t,e){var r=cl(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function m8(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_o=t,wo=Qd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_o=t,wo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=uv!==null?{id:Tf,overflow:Df}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=cl(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,_o=t,wo=null,!0):!1;default:return!1}}function cF(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fF(t){if(an){var e=wo;if(e){var r=e;if(!m8(t,e)){if(cF(t))throw Error(Fe(418));e=Qd(r.nextSibling);var n=_o;e&&m8(t,e)?yJ(n,r):(t.flags=t.flags&-4097|2,an=!1,_o=t)}}else{if(cF(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,an=!1,_o=t}}}function g8(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_o=t}function RC(t){if(t!==_o)return!1;if(!an)return g8(t),an=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sF(t.type,t.memoizedProps)),e&&(e=wo)){if(cF(t))throw bJ(),Error(Fe(418));for(;e;)yJ(t,e),e=Qd(e.nextSibling)}if(g8(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){wo=Qd(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}wo=null}}else wo=_o?Qd(t.stateNode.nextSibling):null;return!0}function bJ(){for(var t=wo;t;)t=Qd(t.nextSibling)}function Hb(){wo=_o=null,an=!1}function X4(t){Ql===null?Ql=[t]:Ql.push(t)}var Kve=gh.ReactCurrentBatchConfig;function S1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var n=r.stateNode}if(!n)throw Error(Fe(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function FC(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v8(t){var e=t._init;return e(t._payload)}function wJ(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=tp(y,w),y.index=0,y.sibling=null,y}function a(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,w,b,_){return w===null||w.tag!==6?(w=hk(b,y.mode,_),w.return=y,w):(w=i(w,b),w.return=y,w)}function l(y,w,b,_){var x=b.type;return x===Ty?c(y,w,b.props.children,_,b.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lh&&v8(x)===w.type)?(_=i(w,b.props),_.ref=S1(y,w,b),_.return=y,_):(_=eD(b.type,b.key,b.props,null,y.mode,_),_.ref=S1(y,w,b),_.return=y,_)}function u(y,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=dk(b,y.mode,_),w.return=y,w):(w=i(w,b.children||[]),w.return=y,w)}function c(y,w,b,_,x){return w===null||w.tag!==7?(w=Qg(b,y.mode,_,x),w.return=y,w):(w=i(w,b),w.return=y,w)}function f(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hk(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case SC:return b=eD(w.type,w.key,w.props,null,y.mode,b),b.ref=S1(y,null,w),b.return=y,b;case Cy:return w=dk(w,y.mode,b),w.return=y,w;case Lh:var _=w._init;return f(y,_(w._payload),b)}if(W1(w)||w1(w))return w=Qg(w,y.mode,b,null),w.return=y,w;FC(y,w)}return null}function h(y,w,b,_){var x=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:o(y,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case SC:return b.key===x?l(y,w,b,_):null;case Cy:return b.key===x?u(y,w,b,_):null;case Lh:return x=b._init,h(y,w,x(b._payload),_)}if(W1(b)||w1(b))return x!==null?null:c(y,w,b,_,null);FC(y,b)}return null}function d(y,w,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,o(w,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case SC:return y=y.get(_.key===null?b:_.key)||null,l(w,y,_,x);case Cy:return y=y.get(_.key===null?b:_.key)||null,u(w,y,_,x);case Lh:var A=_._init;return d(y,w,b,A(_._payload),x)}if(W1(_)||w1(_))return y=y.get(b)||null,c(w,y,_,x,null);FC(w,_)}return null}function p(y,w,b,_){for(var x=null,A=null,E=w,S=w=0,C=null;E!==null&&S<b.length;S++){E.index>S?(C=E,E=null):C=E.sibling;var D=h(y,E,b[S],_);if(D===null){E===null&&(E=C);break}t&&E&&D.alternate===null&&e(y,E),w=a(D,w,S),A===null?x=D:A.sibling=D,A=D,E=C}if(S===b.length)return r(y,E),an&&um(y,S),x;if(E===null){for(;S<b.length;S++)E=f(y,b[S],_),E!==null&&(w=a(E,w,S),A===null?x=E:A.sibling=E,A=E);return an&&um(y,S),x}for(E=n(y,E);S<b.length;S++)C=d(E,y,S,b[S],_),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?S:C.key),w=a(C,w,S),A===null?x=C:A.sibling=C,A=C);return t&&E.forEach(function(N){return e(y,N)}),an&&um(y,S),x}function m(y,w,b,_){var x=w1(b);if(typeof x!="function")throw Error(Fe(150));if(b=x.call(b),b==null)throw Error(Fe(151));for(var A=x=null,E=w,S=w=0,C=null,D=b.next();E!==null&&!D.done;S++,D=b.next()){E.index>S?(C=E,E=null):C=E.sibling;var N=h(y,E,D.value,_);if(N===null){E===null&&(E=C);break}t&&E&&N.alternate===null&&e(y,E),w=a(N,w,S),A===null?x=N:A.sibling=N,A=N,E=C}if(D.done)return r(y,E),an&&um(y,S),x;if(E===null){for(;!D.done;S++,D=b.next())D=f(y,D.value,_),D!==null&&(w=a(D,w,S),A===null?x=D:A.sibling=D,A=D);return an&&um(y,S),x}for(E=n(y,E);!D.done;S++,D=b.next())D=d(E,y,S,D.value,_),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?S:D.key),w=a(D,w,S),A===null?x=D:A.sibling=D,A=D);return t&&E.forEach(function(P){return e(y,P)}),an&&um(y,S),x}function v(y,w,b,_){if(typeof b=="object"&&b!==null&&b.type===Ty&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case SC:e:{for(var x=b.key,A=w;A!==null;){if(A.key===x){if(x=b.type,x===Ty){if(A.tag===7){r(y,A.sibling),w=i(A,b.props.children),w.return=y,y=w;break e}}else if(A.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lh&&v8(x)===A.type){r(y,A.sibling),w=i(A,b.props),w.ref=S1(y,A,b),w.return=y,y=w;break e}r(y,A);break}else e(y,A);A=A.sibling}b.type===Ty?(w=Qg(b.props.children,y.mode,_,b.key),w.return=y,y=w):(_=eD(b.type,b.key,b.props,null,y.mode,_),_.ref=S1(y,w,b),_.return=y,y=_)}return s(y);case Cy:e:{for(A=b.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(y,w.sibling),w=i(w,b.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=dk(b,y.mode,_),w.return=y,y=w}return s(y);case Lh:return A=b._init,v(y,w,A(b._payload),_)}if(W1(b))return p(y,w,b,_);if(w1(b))return m(y,w,b,_);FC(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(y,w.sibling),w=i(w,b),w.return=y,y=w):(r(y,w),w=hk(b,y.mode,_),w.return=y,y=w),s(y)):r(y,w)}return v}var Wb=wJ(!0),xJ=wJ(!1),vN=Op(null),yN=null,Ry=null,Y4=null;function Q4(){Y4=Ry=yN=null}function Z4(t){var e=vN.current;Zr(vN),t._currentValue=e}function hF(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function a0(t,e){yN=t,Y4=Ry=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Os=!0),t.firstContext=null)}function yl(t){var e=t._currentValue;if(Y4!==t)if(t={context:t,memoizedValue:e,next:null},Ry===null){if(yN===null)throw Error(Fe(308));Ry=t,yN.dependencies={lanes:0,firstContext:t}}else Ry=Ry.next=t;return e}var Sm=null;function J4(t){Sm===null?Sm=[t]:Sm.push(t)}function AJ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,J4(e)):(r.next=i.next,i.next=r),e.interleaved=r,Kf(t,n)}function Kf(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Bh=!1;function e$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _J(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ir&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Kf(t,r)}return i=n.interleaved,i===null?(e.next=e,J4(n)):(e.next=i.next,i.next=e),n.interleaved=e,Kf(t,r)}function KT(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$4(t,r)}}function y8(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bN(t,e,r,n){var i=t.updateQueue;Bh=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,c=u=l=null,o=a;do{var h=o.lane,d=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(h=e,d=r,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=vn({},f,h);break e;case 2:Bh=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);fv|=s,t.lanes=s,t.memoizedState=f}}function b8(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Fe(191,i));i.call(n)}}}var QE={},oc=Op(QE),oA=Op(QE),lA=Op(QE);function Cm(t){if(t===QE)throw Error(Fe(174));return t}function t$(t,e){switch(Hr(lA,e),Hr(oA,t),Hr(oc,QE),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=WR(e,t)}Zr(oc),Hr(oc,e)}function Gb(){Zr(oc),Zr(oA),Zr(lA)}function EJ(t){Cm(lA.current);var e=Cm(oc.current),r=WR(e,t.type);e!==r&&(Hr(oA,t),Hr(oc,r))}function r$(t){oA.current===t&&(Zr(oc),Zr(oA))}var hn=Op(0);function wN(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sk=[];function n$(){for(var t=0;t<sk.length;t++)sk[t]._workInProgressVersionPrimary=null;sk.length=0}var XT=gh.ReactCurrentDispatcher,ok=gh.ReactCurrentBatchConfig,cv=0,pn=null,li=null,ji=null,xN=!1,Ix=!1,uA=0,Xve=0;function wa(){throw Error(Fe(321))}function i$(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!uu(t[r],e[r]))return!1;return!0}function a$(t,e,r,n,i,a){if(cv=a,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,XT.current=t===null||t.memoizedState===null?Jve:eye,t=r(n,i),Ix){a=0;do{if(Ix=!1,uA=0,25<=a)throw Error(Fe(301));a+=1,ji=li=null,e.updateQueue=null,XT.current=tye,t=r(n,i)}while(Ix)}if(XT.current=AN,e=li!==null&&li.next!==null,cv=0,ji=li=pn=null,xN=!1,e)throw Error(Fe(300));return t}function s$(){var t=uA!==0;return uA=0,t}function Mu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?pn.memoizedState=ji=t:ji=ji.next=t,ji}function bl(){if(li===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=li.next;var e=ji===null?pn.memoizedState:ji.next;if(e!==null)ji=e,li=t;else{if(t===null)throw Error(Fe(310));li=t,t={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},ji===null?pn.memoizedState=ji=t:ji=ji.next=t}return ji}function cA(t,e){return typeof e=="function"?e(t):e}function lk(t){var e=bl(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=li,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((cv&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,pn.lanes|=c,fv|=c}u=u.next}while(u!==null&&u!==a);l===null?s=n:l.next=o,uu(n,e.memoizedState)||(Os=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,pn.lanes|=a,fv|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function uk(t){var e=bl(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);uu(a,e.memoizedState)||(Os=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function SJ(){}function CJ(t,e){var r=pn,n=bl(),i=e(),a=!uu(n.memoizedState,i);if(a&&(n.memoizedState=i,Os=!0),n=n.queue,o$(NJ.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||ji!==null&&ji.memoizedState.tag&1){if(r.flags|=2048,fA(9,DJ.bind(null,r,n,i,e),void 0,null),zi===null)throw Error(Fe(349));cv&30||TJ(r,e,i)}return i}function TJ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function DJ(t,e,r,n){e.value=r,e.getSnapshot=n,PJ(e)&&MJ(t)}function NJ(t,e,r){return r(function(){PJ(e)&&MJ(t)})}function PJ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!uu(t,r)}catch{return!0}}function MJ(t){var e=Kf(t,1);e!==null&&su(e,t,1,-1)}function w8(t){var e=Mu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cA,lastRenderedState:t},e.queue=t,t=t.dispatch=Zve.bind(null,pn,t),[e.memoizedState,t]}function fA(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function IJ(){return bl().memoizedState}function YT(t,e,r,n){var i=Mu();pn.flags|=t,i.memoizedState=fA(1|e,r,void 0,n===void 0?null:n)}function sM(t,e,r,n){var i=bl();n=n===void 0?null:n;var a=void 0;if(li!==null){var s=li.memoizedState;if(a=s.destroy,n!==null&&i$(n,s.deps)){i.memoizedState=fA(e,r,a,n);return}}pn.flags|=t,i.memoizedState=fA(1|e,r,a,n)}function x8(t,e){return YT(8390656,8,t,e)}function o$(t,e){return sM(2048,8,t,e)}function OJ(t,e){return sM(4,2,t,e)}function kJ(t,e){return sM(4,4,t,e)}function RJ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FJ(t,e,r){return r=r!=null?r.concat([t]):null,sM(4,4,RJ.bind(null,e,t),r)}function l$(){}function LJ(t,e){var r=bl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&i$(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function BJ(t,e){var r=bl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&i$(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $J(t,e,r){return cv&21?(uu(r,e)||(r=qZ(),pn.lanes|=r,fv|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Os=!0),t.memoizedState=r)}function Yve(t,e){var r=wr;wr=r!==0&&4>r?r:4,t(!0);var n=ok.transition;ok.transition={};try{t(!1),e()}finally{wr=r,ok.transition=n}}function jJ(){return bl().memoizedState}function Qve(t,e,r){var n=ep(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VJ(t))UJ(e,r);else if(r=AJ(t,e,r,n),r!==null){var i=as();su(r,t,n,i),zJ(r,e,n)}}function Zve(t,e,r){var n=ep(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VJ(t))UJ(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,uu(o,s)){var l=e.interleaved;l===null?(i.next=i,J4(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=AJ(t,e,i,n),r!==null&&(i=as(),su(r,t,n,i),zJ(r,e,n))}}function VJ(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function UJ(t,e){Ix=xN=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function zJ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$4(t,r)}}var AN={readContext:yl,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},Jve={readContext:yl,useCallback:function(t,e){return Mu().memoizedState=[t,e===void 0?null:e],t},useContext:yl,useEffect:x8,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,YT(4194308,4,RJ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return YT(4194308,4,t,e)},useInsertionEffect:function(t,e){return YT(4,2,t,e)},useMemo:function(t,e){var r=Mu();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Mu();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Qve.bind(null,pn,t),[n.memoizedState,t]},useRef:function(t){var e=Mu();return t={current:t},e.memoizedState=t},useState:w8,useDebugValue:l$,useDeferredValue:function(t){return Mu().memoizedState=t},useTransition:function(){var t=w8(!1),e=t[0];return t=Yve.bind(null,t[1]),Mu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pn,i=Mu();if(an){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=e(),zi===null)throw Error(Fe(349));cv&30||TJ(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,x8(NJ.bind(null,n,a,t),[t]),n.flags|=2048,fA(9,DJ.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Mu(),e=zi.identifierPrefix;if(an){var r=Df,n=Tf;r=(n&~(1<<32-au(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=uA++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Xve++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eye={readContext:yl,useCallback:LJ,useContext:yl,useEffect:o$,useImperativeHandle:FJ,useInsertionEffect:OJ,useLayoutEffect:kJ,useMemo:BJ,useReducer:lk,useRef:IJ,useState:function(){return lk(cA)},useDebugValue:l$,useDeferredValue:function(t){var e=bl();return $J(e,li.memoizedState,t)},useTransition:function(){var t=lk(cA)[0],e=bl().memoizedState;return[t,e]},useMutableSource:SJ,useSyncExternalStore:CJ,useId:jJ,unstable_isNewReconciler:!1},tye={readContext:yl,useCallback:LJ,useContext:yl,useEffect:o$,useImperativeHandle:FJ,useInsertionEffect:OJ,useLayoutEffect:kJ,useMemo:BJ,useReducer:uk,useRef:IJ,useState:function(){return uk(cA)},useDebugValue:l$,useDeferredValue:function(t){var e=bl();return li===null?e.memoizedState=t:$J(e,li.memoizedState,t)},useTransition:function(){var t=uk(cA)[0],e=bl().memoizedState;return[t,e]},useMutableSource:SJ,useSyncExternalStore:CJ,useId:jJ,unstable_isNewReconciler:!1};function Ll(t,e){if(t&&t.defaultProps){e=vn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function dF(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:vn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var oM={isMounted:function(t){return(t=t._reactInternals)?Mv(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=as(),i=ep(t),a=Rf(n,i);a.payload=e,r!=null&&(a.callback=r),e=Zd(t,a,i),e!==null&&(su(e,t,i,n),KT(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=as(),i=ep(t),a=Rf(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Zd(t,a,i),e!==null&&(su(e,t,i,n),KT(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=as(),n=ep(t),i=Rf(r,n);i.tag=2,e!=null&&(i.callback=e),e=Zd(t,i,n),e!==null&&(su(e,t,n,r),KT(e,t,n))}};function A8(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!nA(r,n)||!nA(i,a):!0}function qJ(t,e,r){var n=!1,i=cp,a=e.contextType;return typeof a=="object"&&a!==null?a=yl(a):(i=Bs(e)?lv:$a.current,n=e.contextTypes,a=(n=n!=null)?qb(t,i):cp),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oM,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function _8(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&oM.enqueueReplaceState(e,e.state,null)}function pF(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},e$(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=yl(a):(a=Bs(e)?lv:$a.current,i.context=qb(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dF(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oM.enqueueReplaceState(i,i.state,null),bN(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Kb(t,e){try{var r="",n=e;do r+=Nge(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function ck(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function mF(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rye=typeof WeakMap=="function"?WeakMap:Map;function HJ(t,e,r){r=Rf(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){EN||(EN=!0,SF=n),mF(t,e)},r}function WJ(t,e,r){r=Rf(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){mF(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){mF(t,e),typeof n!="function"&&(Jd===null?Jd=new Set([this]):Jd.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function E8(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rye;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=gye.bind(null,t,e,r),e.then(t,t))}function S8(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function C8(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Rf(-1,1),e.tag=2,Zd(r,e,1))),r.lanes|=1),t)}var nye=gh.ReactCurrentOwner,Os=!1;function es(t,e,r,n){e.child=t===null?xJ(e,null,r,n):Wb(e,t.child,r,n)}function T8(t,e,r,n,i){r=r.render;var a=e.ref;return a0(e,i),n=a$(t,e,r,n,a,i),r=s$(),t!==null&&!Os?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xf(t,e,i)):(an&&r&&G4(e),e.flags|=1,es(t,e,n,i),e.child)}function D8(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!g$(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,GJ(t,e,a,n,i)):(t=eD(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:nA,r(s,n)&&t.ref===e.ref)return Xf(t,e,i)}return e.flags|=1,t=tp(a,n),t.ref=e.ref,t.return=e,e.child=t}function GJ(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(nA(a,n)&&t.ref===e.ref)if(Os=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Os=!0);else return e.lanes=t.lanes,Xf(t,e,i)}return gF(t,e,r,n,i)}function KJ(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Ly,ho),ho|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Hr(Ly,ho),ho|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Hr(Ly,ho),ho|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Hr(Ly,ho),ho|=n;return es(t,e,i,r),e.child}function XJ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function gF(t,e,r,n,i){var a=Bs(r)?lv:$a.current;return a=qb(e,a),a0(e,i),r=a$(t,e,r,n,a,i),n=s$(),t!==null&&!Os?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xf(t,e,i)):(an&&n&&G4(e),e.flags|=1,es(t,e,r,i),e.child)}function N8(t,e,r,n,i){if(Bs(r)){var a=!0;pN(e)}else a=!1;if(a0(e,i),e.stateNode===null)QT(t,e),qJ(e,r,n),pF(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=yl(u):(u=Bs(r)?lv:$a.current,u=qb(e,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==u)&&_8(e,s,n,u),Bh=!1;var h=e.memoizedState;s.state=h,bN(e,n,s,i),l=e.memoizedState,o!==n||h!==l||Ls.current||Bh?(typeof c=="function"&&(dF(e,r,c,n),l=e.memoizedState),(o=Bh||A8(e,r,o,n,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,_J(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ll(e.type,o),s.props=u,f=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=yl(l):(l=Bs(r)?lv:$a.current,l=qb(e,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&_8(e,s,n,l),Bh=!1,h=e.memoizedState,s.state=h,bN(e,n,s,i);var p=e.memoizedState;o!==f||h!==p||Ls.current||Bh?(typeof d=="function"&&(dF(e,r,d,n),p=e.memoizedState),(u=Bh||A8(e,r,u,n,h,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return vF(t,e,r,n,a,i)}function vF(t,e,r,n,i,a){XJ(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&p8(e,r,!1),Xf(t,e,a);n=e.stateNode,nye.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Wb(e,t.child,null,a),e.child=Wb(e,null,o,a)):es(t,e,o,a),e.memoizedState=n.state,i&&p8(e,r,!0),e.child}function YJ(t){var e=t.stateNode;e.pendingContext?d8(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d8(t,e.context,!1),t$(t,e.containerInfo)}function P8(t,e,r,n,i){return Hb(),X4(i),e.flags|=256,es(t,e,r,n),e.child}var yF={dehydrated:null,treeContext:null,retryLane:0};function bF(t){return{baseLanes:t,cachePool:null,transitions:null}}function QJ(t,e,r){var n=e.pendingProps,i=hn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Hr(hn,i&1),t===null)return fF(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=cM(s,n,0,null),t=Qg(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=bF(r),e.memoizedState=yF,t):u$(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return iye(t,e,s,n,o,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=tp(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=tp(o,a):(a=Qg(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?bF(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=yF,n}return a=t.child,t=a.sibling,n=tp(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function u$(t,e){return e=cM({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function LC(t,e,r,n){return n!==null&&X4(n),Wb(e,t.child,null,r),t=u$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iye(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=ck(Error(Fe(422))),LC(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=cM({mode:"visible",children:n.children},i,0,null),a=Qg(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Wb(e,t.child,null,s),e.child.memoizedState=bF(s),e.memoizedState=yF,a);if(!(e.mode&1))return LC(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(Fe(419)),n=ck(a,n,void 0),LC(t,e,s,n)}if(o=(s&t.childLanes)!==0,Os||o){if(n=zi,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Kf(t,i),su(n,t,i,-1))}return m$(),n=ck(Error(Fe(421))),LC(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vye.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,wo=Qd(i.nextSibling),_o=e,an=!0,Ql=null,t!==null&&(al[sl++]=Tf,al[sl++]=Df,al[sl++]=uv,Tf=t.id,Df=t.overflow,uv=e),e=u$(e,n.children),e.flags|=4096,e)}function M8(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hF(t.return,e,r)}function fk(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function ZJ(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(es(t,e,n.children,r),n=hn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M8(t,r,e);else if(t.tag===19)M8(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Hr(hn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wN(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),fk(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wN(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}fk(e,!0,r,null,a);break;case"together":fk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function QT(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xf(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fv|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,r=tp(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=tp(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function aye(t,e,r){switch(e.tag){case 3:YJ(e),Hb();break;case 5:EJ(e);break;case 1:Bs(e.type)&&pN(e);break;case 4:t$(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Hr(vN,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Hr(hn,hn.current&1),e.flags|=128,null):r&e.child.childLanes?QJ(t,e,r):(Hr(hn,hn.current&1),t=Xf(t,e,r),t!==null?t.sibling:null);Hr(hn,hn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ZJ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hr(hn,hn.current),n)break;return null;case 22:case 23:return e.lanes=0,KJ(t,e,r)}return Xf(t,e,r)}var JJ,wF,eee,tee;JJ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wF=function(){};eee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Cm(oc.current);var a=null;switch(r){case"input":i=UR(t,i),n=UR(t,n),a=[];break;case"select":i=vn({},i,{value:void 0}),n=vn({},n,{value:void 0}),a=[];break;case"textarea":i=HR(t,i),n=HR(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hN)}GR(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yx.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yx.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Kr("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};tee=function(t,e,r,n){r!==n&&(e.flags|=4)};function C1(t,e){if(!an)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xa(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function sye(t,e,r){var n=e.pendingProps;switch(K4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xa(e),null;case 1:return Bs(e.type)&&dN(),xa(e),null;case 3:return n=e.stateNode,Gb(),Zr(Ls),Zr($a),n$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(RC(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ql!==null&&(DF(Ql),Ql=null))),wF(t,e),xa(e),null;case 5:r$(e);var i=Cm(lA.current);if(r=e.type,t!==null&&e.stateNode!=null)eee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return xa(e),null}if(t=Cm(oc.current),RC(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[rc]=e,n[sA]=a,t=(e.mode&1)!==0,r){case"dialog":Kr("cancel",n),Kr("close",n);break;case"iframe":case"object":case"embed":Kr("load",n);break;case"video":case"audio":for(i=0;i<K1.length;i++)Kr(K1[i],n);break;case"source":Kr("error",n);break;case"img":case"image":case"link":Kr("error",n),Kr("load",n);break;case"details":Kr("toggle",n);break;case"input":jU(n,a),Kr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Kr("invalid",n);break;case"textarea":UU(n,a),Kr("invalid",n)}GR(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&kC(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&kC(n.textContent,o,t),i=["children",""+o]):Yx.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Kr("scroll",n)}switch(r){case"input":CC(n),VU(n,a,!0);break;case"textarea":CC(n),zU(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=hN)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NZ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[rc]=e,t[sA]=n,JJ(t,e,!1,!1),e.stateNode=t;e:{switch(s=KR(r,n),r){case"dialog":Kr("cancel",t),Kr("close",t),i=n;break;case"iframe":case"object":case"embed":Kr("load",t),i=n;break;case"video":case"audio":for(i=0;i<K1.length;i++)Kr(K1[i],t);i=n;break;case"source":Kr("error",t),i=n;break;case"img":case"image":case"link":Kr("error",t),Kr("load",t),i=n;break;case"details":Kr("toggle",t),i=n;break;case"input":jU(t,n),i=UR(t,n),Kr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=vn({},n,{value:void 0}),Kr("invalid",t);break;case"textarea":UU(t,n),i=HR(t,n),Kr("invalid",t);break;default:i=n}GR(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?IZ(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PZ(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Qx(t,l):typeof l=="number"&&Qx(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Yx.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Kr("scroll",t):l!=null&&O4(t,a,l,s))}switch(r){case"input":CC(t),VU(t,n,!1);break;case"textarea":CC(t),zU(t);break;case"option":n.value!=null&&t.setAttribute("value",""+up(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?t0(t,!!n.multiple,a,!1):n.defaultValue!=null&&t0(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hN)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xa(e),null;case 6:if(t&&e.stateNode!=null)tee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(r=Cm(lA.current),Cm(oc.current),RC(e)){if(n=e.stateNode,r=e.memoizedProps,n[rc]=e,(a=n.nodeValue!==r)&&(t=_o,t!==null))switch(t.tag){case 3:kC(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kC(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rc]=e,e.stateNode=n}return xa(e),null;case 13:if(Zr(hn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(an&&wo!==null&&e.mode&1&&!(e.flags&128))bJ(),Hb(),e.flags|=98560,a=!1;else if(a=RC(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Fe(317));a[rc]=e}else Hb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xa(e),a=!1}else Ql!==null&&(DF(Ql),Ql=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||hn.current&1?fi===0&&(fi=3):m$())),e.updateQueue!==null&&(e.flags|=4),xa(e),null);case 4:return Gb(),wF(t,e),t===null&&iA(e.stateNode.containerInfo),xa(e),null;case 10:return Z4(e.type._context),xa(e),null;case 17:return Bs(e.type)&&dN(),xa(e),null;case 19:if(Zr(hn),a=e.memoizedState,a===null)return xa(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)C1(a,!1);else{if(fi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=wN(t),s!==null){for(e.flags|=128,C1(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Hr(hn,hn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Vn()>Xb&&(e.flags|=128,n=!0,C1(a,!1),e.lanes=4194304)}else{if(!n)if(t=wN(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),C1(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!an)return xa(e),null}else 2*Vn()-a.renderingStartTime>Xb&&r!==1073741824&&(e.flags|=128,n=!0,C1(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Vn(),e.sibling=null,r=hn.current,Hr(hn,n?r&1|2:r&1),e):(xa(e),null);case 22:case 23:return p$(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ho&1073741824&&(xa(e),e.subtreeFlags&6&&(e.flags|=8192)):xa(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function oye(t,e){switch(K4(e),e.tag){case 1:return Bs(e.type)&&dN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gb(),Zr(Ls),Zr($a),n$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r$(e),null;case 13:if(Zr(hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Hb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zr(hn),null;case 4:return Gb(),null;case 10:return Z4(e.type._context),null;case 22:case 23:return p$(),null;case 24:return null;default:return null}}var BC=!1,Oa=!1,lye=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Fy(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Tn(t,e,n)}else r.current=null}function xF(t,e,r){try{r()}catch(n){Tn(t,e,n)}}var I8=!1;function uye(t,e){if(iF=uN,t=sJ(),W4(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++u===i&&(o=s),h===a&&++c===n&&(l=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(aF={focusedElem:t,selectionRange:r},uN=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ll(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(_){Tn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return p=I8,I8=!1,p}function Ox(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&xF(e,r,a)}i=i.next}while(i!==n)}}function lM(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function AF(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ree(t){var e=t.alternate;e!==null&&(t.alternate=null,ree(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rc],delete e[sA],delete e[lF],delete e[Hve],delete e[Wve])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nee(t){return t.tag===5||t.tag===3||t.tag===4}function O8(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _F(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hN));else if(n!==4&&(t=t.child,t!==null))for(_F(t,e,r),t=t.sibling;t!==null;)_F(t,e,r),t=t.sibling}function EF(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(EF(t,e,r),t=t.sibling;t!==null;)EF(t,e,r),t=t.sibling}var ra=null,Yl=!1;function Ih(t,e,r){for(r=r.child;r!==null;)iee(t,e,r),r=r.sibling}function iee(t,e,r){if(sc&&typeof sc.onCommitFiberUnmount=="function")try{sc.onCommitFiberUnmount(eM,r)}catch{}switch(r.tag){case 5:Oa||Fy(r,e);case 6:var n=ra,i=Yl;ra=null,Ih(t,e,r),ra=n,Yl=i,ra!==null&&(Yl?(t=ra,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ra.removeChild(r.stateNode));break;case 18:ra!==null&&(Yl?(t=ra,r=r.stateNode,t.nodeType===8?ik(t.parentNode,r):t.nodeType===1&&ik(t,r),tA(t)):ik(ra,r.stateNode));break;case 4:n=ra,i=Yl,ra=r.stateNode.containerInfo,Yl=!0,Ih(t,e,r),ra=n,Yl=i;break;case 0:case 11:case 14:case 15:if(!Oa&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&xF(r,e,s),i=i.next}while(i!==n)}Ih(t,e,r);break;case 1:if(!Oa&&(Fy(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Tn(r,e,o)}Ih(t,e,r);break;case 21:Ih(t,e,r);break;case 22:r.mode&1?(Oa=(n=Oa)||r.memoizedState!==null,Ih(t,e,r),Oa=n):Ih(t,e,r);break;default:Ih(t,e,r)}}function k8(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lye),e.forEach(function(n){var i=yye.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Il(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:ra=o.stateNode,Yl=!1;break e;case 3:ra=o.stateNode.containerInfo,Yl=!0;break e;case 4:ra=o.stateNode.containerInfo,Yl=!0;break e}o=o.return}if(ra===null)throw Error(Fe(160));iee(a,s,i),ra=null,Yl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Tn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aee(e,t),e=e.sibling}function aee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Il(e,t),Tu(t),n&4){try{Ox(3,t,t.return),lM(3,t)}catch(m){Tn(t,t.return,m)}try{Ox(5,t,t.return)}catch(m){Tn(t,t.return,m)}}break;case 1:Il(e,t),Tu(t),n&512&&r!==null&&Fy(r,r.return);break;case 5:if(Il(e,t),Tu(t),n&512&&r!==null&&Fy(r,r.return),t.flags&32){var i=t.stateNode;try{Qx(i,"")}catch(m){Tn(t,t.return,m)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&TZ(i,a),KR(o,s);var u=KR(o,a);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?IZ(i,f):c==="dangerouslySetInnerHTML"?PZ(i,f):c==="children"?Qx(i,f):O4(i,c,f,u)}switch(o){case"input":zR(i,a);break;case"textarea":DZ(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?t0(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?t0(i,!!a.multiple,a.defaultValue,!0):t0(i,!!a.multiple,a.multiple?[]:"",!1))}i[sA]=a}catch(m){Tn(t,t.return,m)}}break;case 6:if(Il(e,t),Tu(t),n&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Tn(t,t.return,m)}}break;case 3:if(Il(e,t),Tu(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tA(e.containerInfo)}catch(m){Tn(t,t.return,m)}break;case 4:Il(e,t),Tu(t);break;case 13:Il(e,t),Tu(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(h$=Vn())),n&4&&k8(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Oa=(u=Oa)||c,Il(e,t),Oa=u):Il(e,t),Tu(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ze=t,c=t.child;c!==null;){for(f=Ze=c;Ze!==null;){switch(h=Ze,d=h.child,h.tag){case 0:case 11:case 14:case 15:Ox(4,h,h.return);break;case 1:Fy(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Tn(n,r,m)}}break;case 5:Fy(h,h.return);break;case 22:if(h.memoizedState!==null){F8(f);continue}}d!==null?(d.return=h,Ze=d):F8(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=MZ("display",s))}catch(m){Tn(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Tn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Il(e,t),Tu(t),n&4&&k8(t);break;case 21:break;default:Il(e,t),Tu(t)}}function Tu(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(nee(r)){var n=r;break e}r=r.return}throw Error(Fe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Qx(i,""),n.flags&=-33);var a=O8(t);EF(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=O8(t);_F(t,o,s);break;default:throw Error(Fe(161))}}catch(l){Tn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cye(t,e,r){Ze=t,see(t)}function see(t,e,r){for(var n=(t.mode&1)!==0;Ze!==null;){var i=Ze,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||BC;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Oa;o=BC;var u=Oa;if(BC=s,(Oa=l)&&!u)for(Ze=i;Ze!==null;)s=Ze,l=s.child,s.tag===22&&s.memoizedState!==null?L8(i):l!==null?(l.return=s,Ze=l):L8(i);for(;a!==null;)Ze=a,see(a),a=a.sibling;Ze=i,BC=o,Oa=u}R8(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ze=a):R8(t)}}function R8(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oa||lM(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Oa)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ll(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&b8(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}b8(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&tA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Oa||e.flags&512&&AF(e)}catch(h){Tn(e,e.return,h)}}if(e===t){Ze=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ze=r;break}Ze=e.return}}function F8(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ze=r;break}Ze=e.return}}function L8(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lM(4,e)}catch(l){Tn(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Tn(e,i,l)}}var a=e.return;try{AF(e)}catch(l){Tn(e,a,l)}break;case 5:var s=e.return;try{AF(e)}catch(l){Tn(e,s,l)}}}catch(l){Tn(e,e.return,l)}if(e===t){Ze=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ze=o;break}Ze=e.return}}var fye=Math.ceil,_N=gh.ReactCurrentDispatcher,c$=gh.ReactCurrentOwner,dl=gh.ReactCurrentBatchConfig,ir=0,zi=null,Yn=null,ha=0,ho=0,Ly=Op(0),fi=0,hA=null,fv=0,uM=0,f$=0,kx=null,Ms=null,h$=0,Xb=1/0,Bc=null,EN=!1,SF=null,Jd=null,$C=!1,zd=null,SN=0,Rx=0,CF=null,ZT=-1,JT=0;function as(){return ir&6?Vn():ZT!==-1?ZT:ZT=Vn()}function ep(t){return t.mode&1?ir&2&&ha!==0?ha&-ha:Kve.transition!==null?(JT===0&&(JT=qZ()),JT):(t=wr,t!==0||(t=window.event,t=t===void 0?16:QZ(t.type)),t):1}function su(t,e,r,n){if(50<Rx)throw Rx=0,CF=null,Error(Fe(185));KE(t,r,n),(!(ir&2)||t!==zi)&&(t===zi&&(!(ir&2)&&(uM|=r),fi===4&&qh(t,ha)),$s(t,n),r===1&&ir===0&&!(e.mode&1)&&(Xb=Vn()+500,aM&&kp()))}function $s(t,e){var r=t.callbackNode;Kge(t,e);var n=lN(t,t===zi?ha:0);if(n===0)r!==null&&WU(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&WU(r),e===1)t.tag===0?Gve(B8.bind(null,t)):gJ(B8.bind(null,t)),zve(function(){!(ir&6)&&kp()}),r=null;else{switch(HZ(n)){case 1:r=B4;break;case 4:r=UZ;break;case 16:r=oN;break;case 536870912:r=zZ;break;default:r=oN}r=pee(r,oee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oee(t,e){if(ZT=-1,JT=0,ir&6)throw Error(Fe(327));var r=t.callbackNode;if(s0()&&t.callbackNode!==r)return null;var n=lN(t,t===zi?ha:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=CN(t,n);else{e=n;var i=ir;ir|=2;var a=uee();(zi!==t||ha!==e)&&(Bc=null,Xb=Vn()+500,Yg(t,e));do try{pye();break}catch(o){lee(t,o)}while(!0);Q4(),_N.current=a,ir=i,Yn!==null?e=0:(zi=null,ha=0,e=fi)}if(e!==0){if(e===2&&(i=JR(t),i!==0&&(n=i,e=TF(t,i))),e===1)throw r=hA,Yg(t,0),qh(t,n),$s(t,Vn()),r;if(e===6)qh(t,n);else{if(i=t.current.alternate,!(n&30)&&!hye(i)&&(e=CN(t,n),e===2&&(a=JR(t),a!==0&&(n=a,e=TF(t,a))),e===1))throw r=hA,Yg(t,0),qh(t,n),$s(t,Vn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:cm(t,Ms,Bc);break;case 3:if(qh(t,n),(n&130023424)===n&&(e=h$+500-Vn(),10<e)){if(lN(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){as(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oF(cm.bind(null,t,Ms,Bc),e);break}cm(t,Ms,Bc);break;case 4:if(qh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-au(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=Vn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fye(n/1960))-n,10<n){t.timeoutHandle=oF(cm.bind(null,t,Ms,Bc),n);break}cm(t,Ms,Bc);break;case 5:cm(t,Ms,Bc);break;default:throw Error(Fe(329))}}}return $s(t,Vn()),t.callbackNode===r?oee.bind(null,t):null}function TF(t,e){var r=kx;return t.current.memoizedState.isDehydrated&&(Yg(t,e).flags|=256),t=CN(t,e),t!==2&&(e=Ms,Ms=r,e!==null&&DF(e)),t}function DF(t){Ms===null?Ms=t:Ms.push.apply(Ms,t)}function hye(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!uu(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qh(t,e){for(e&=~f$,e&=~uM,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-au(e),n=1<<r;t[r]=-1,e&=~n}}function B8(t){if(ir&6)throw Error(Fe(327));s0();var e=lN(t,0);if(!(e&1))return $s(t,Vn()),null;var r=CN(t,e);if(t.tag!==0&&r===2){var n=JR(t);n!==0&&(e=n,r=TF(t,n))}if(r===1)throw r=hA,Yg(t,0),qh(t,e),$s(t,Vn()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cm(t,Ms,Bc),$s(t,Vn()),null}function d$(t,e){var r=ir;ir|=1;try{return t(e)}finally{ir=r,ir===0&&(Xb=Vn()+500,aM&&kp())}}function hv(t){zd!==null&&zd.tag===0&&!(ir&6)&&s0();var e=ir;ir|=1;var r=dl.transition,n=wr;try{if(dl.transition=null,wr=1,t)return t()}finally{wr=n,dl.transition=r,ir=e,!(ir&6)&&kp()}}function p$(){ho=Ly.current,Zr(Ly)}function Yg(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Uve(r)),Yn!==null)for(r=Yn.return;r!==null;){var n=r;switch(K4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&dN();break;case 3:Gb(),Zr(Ls),Zr($a),n$();break;case 5:r$(n);break;case 4:Gb();break;case 13:Zr(hn);break;case 19:Zr(hn);break;case 10:Z4(n.type._context);break;case 22:case 23:p$()}r=r.return}if(zi=t,Yn=t=tp(t.current,null),ha=ho=e,fi=0,hA=null,f$=uM=fv=0,Ms=kx=null,Sm!==null){for(e=0;e<Sm.length;e++)if(r=Sm[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Sm=null}return t}function lee(t,e){do{var r=Yn;try{if(Q4(),XT.current=AN,xN){for(var n=pn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}xN=!1}if(cv=0,ji=li=pn=null,Ix=!1,uA=0,c$.current=null,r===null||r.return===null){fi=1,hA=e,Yn=null;break}e:{var a=t,s=r.return,o=r,l=e;if(e=ha,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=S8(s);if(d!==null){d.flags&=-257,C8(d,s,o,a,e),d.mode&1&&E8(a,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){E8(a,u,e),m$();break e}l=Error(Fe(426))}}else if(an&&o.mode&1){var v=S8(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),C8(v,s,o,a,e),X4(Kb(l,o));break e}}a=l=Kb(l,o),fi!==4&&(fi=2),kx===null?kx=[a]:kx.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=HJ(a,l,e);y8(a,y);break e;case 1:o=l;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Jd===null||!Jd.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=WJ(a,o,e);y8(a,_);break e}}a=a.return}while(a!==null)}fee(r)}catch(x){e=x,Yn===r&&r!==null&&(Yn=r=r.return);continue}break}while(!0)}function uee(){var t=_N.current;return _N.current=AN,t===null?AN:t}function m$(){(fi===0||fi===3||fi===2)&&(fi=4),zi===null||!(fv&268435455)&&!(uM&268435455)||qh(zi,ha)}function CN(t,e){var r=ir;ir|=2;var n=uee();(zi!==t||ha!==e)&&(Bc=null,Yg(t,e));do try{dye();break}catch(i){lee(t,i)}while(!0);if(Q4(),ir=r,_N.current=n,Yn!==null)throw Error(Fe(261));return zi=null,ha=0,fi}function dye(){for(;Yn!==null;)cee(Yn)}function pye(){for(;Yn!==null&&!$ge();)cee(Yn)}function cee(t){var e=dee(t.alternate,t,ho);t.memoizedProps=t.pendingProps,e===null?fee(t):Yn=e,c$.current=null}function fee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=oye(r,e),r!==null){r.flags&=32767,Yn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fi=6,Yn=null;return}}else if(r=sye(r,e,ho),r!==null){Yn=r;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);fi===0&&(fi=5)}function cm(t,e,r){var n=wr,i=dl.transition;try{dl.transition=null,wr=1,mye(t,e,r,n)}finally{dl.transition=i,wr=n}return null}function mye(t,e,r,n){do s0();while(zd!==null);if(ir&6)throw Error(Fe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Xge(t,a),t===zi&&(Yn=zi=null,ha=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$C||($C=!0,pee(oN,function(){return s0(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=dl.transition,dl.transition=null;var s=wr;wr=1;var o=ir;ir|=4,c$.current=null,uye(t,r),aee(r,t),Rve(aF),uN=!!iF,aF=iF=null,t.current=r,cye(r),jge(),ir=o,wr=s,dl.transition=a}else t.current=r;if($C&&($C=!1,zd=t,SN=i),a=t.pendingLanes,a===0&&(Jd=null),zge(r.stateNode),$s(t,Vn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(EN)throw EN=!1,t=SF,SF=null,t;return SN&1&&t.tag!==0&&s0(),a=t.pendingLanes,a&1?t===CF?Rx++:(Rx=0,CF=t):Rx=0,kp(),null}function s0(){if(zd!==null){var t=HZ(SN),e=dl.transition,r=wr;try{if(dl.transition=null,wr=16>t?16:t,zd===null)var n=!1;else{if(t=zd,zd=null,SN=0,ir&6)throw Error(Fe(331));var i=ir;for(ir|=4,Ze=t.current;Ze!==null;){var a=Ze,s=a.child;if(Ze.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Ze=u;Ze!==null;){var c=Ze;switch(c.tag){case 0:case 11:case 15:Ox(8,c,a)}var f=c.child;if(f!==null)f.return=c,Ze=f;else for(;Ze!==null;){c=Ze;var h=c.sibling,d=c.return;if(ree(c),c===u){Ze=null;break}if(h!==null){h.return=d,Ze=h;break}Ze=d}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ze=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Ze=s;else e:for(;Ze!==null;){if(a=Ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ox(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ze=y;break e}Ze=a.return}}var w=t.current;for(Ze=w;Ze!==null;){s=Ze;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,Ze=b;else e:for(s=w;Ze!==null;){if(o=Ze,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lM(9,o)}}catch(x){Tn(o,o.return,x)}if(o===s){Ze=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Ze=_;break e}Ze=o.return}}if(ir=i,kp(),sc&&typeof sc.onPostCommitFiberRoot=="function")try{sc.onPostCommitFiberRoot(eM,t)}catch{}n=!0}return n}finally{wr=r,dl.transition=e}}return!1}function $8(t,e,r){e=Kb(r,e),e=HJ(t,e,1),t=Zd(t,e,1),e=as(),t!==null&&(KE(t,1,e),$s(t,e))}function Tn(t,e,r){if(t.tag===3)$8(t,t,r);else for(;e!==null;){if(e.tag===3){$8(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jd===null||!Jd.has(n))){t=Kb(r,t),t=WJ(e,t,1),e=Zd(e,t,1),t=as(),e!==null&&(KE(e,1,t),$s(e,t));break}}e=e.return}}function gye(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=as(),t.pingedLanes|=t.suspendedLanes&r,zi===t&&(ha&r)===r&&(fi===4||fi===3&&(ha&130023424)===ha&&500>Vn()-h$?Yg(t,0):f$|=r),$s(t,e)}function hee(t,e){e===0&&(t.mode&1?(e=NC,NC<<=1,!(NC&130023424)&&(NC=4194304)):e=1);var r=as();t=Kf(t,e),t!==null&&(KE(t,e,r),$s(t,r))}function vye(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hee(t,r)}function yye(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),hee(t,r)}var dee;dee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ls.current)Os=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Os=!1,aye(t,e,r);Os=!!(t.flags&131072)}else Os=!1,an&&e.flags&1048576&&vJ(e,gN,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;QT(t,e),t=e.pendingProps;var i=qb(e,$a.current);a0(e,r),i=a$(null,e,n,t,i,r);var a=s$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bs(n)?(a=!0,pN(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,e$(e),i.updater=oM,e.stateNode=i,i._reactInternals=e,pF(e,n,t,r),e=vF(null,e,n,!0,a,r)):(e.tag=0,an&&a&&G4(e),es(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(QT(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=wye(n),t=Ll(n,t),i){case 0:e=gF(null,e,n,t,r);break e;case 1:e=N8(null,e,n,t,r);break e;case 11:e=T8(null,e,n,t,r);break e;case 14:e=D8(null,e,n,Ll(n.type,t),r);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ll(n,i),gF(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ll(n,i),N8(t,e,n,i,r);case 3:e:{if(YJ(e),t===null)throw Error(Fe(387));n=e.pendingProps,a=e.memoizedState,i=a.element,_J(t,e),bN(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Kb(Error(Fe(423)),e),e=P8(t,e,n,r,i);break e}else if(n!==i){i=Kb(Error(Fe(424)),e),e=P8(t,e,n,r,i);break e}else for(wo=Qd(e.stateNode.containerInfo.firstChild),_o=e,an=!0,Ql=null,r=xJ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hb(),n===i){e=Xf(t,e,r);break e}es(t,e,n,r)}e=e.child}return e;case 5:return EJ(e),t===null&&fF(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,sF(n,i)?s=null:a!==null&&sF(n,a)&&(e.flags|=32),XJ(t,e),es(t,e,s,r),e.child;case 6:return t===null&&fF(e),null;case 13:return QJ(t,e,r);case 4:return t$(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Wb(e,null,n,r):es(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ll(n,i),T8(t,e,n,i,r);case 7:return es(t,e,e.pendingProps,r),e.child;case 8:return es(t,e,e.pendingProps.children,r),e.child;case 12:return es(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Hr(vN,n._currentValue),n._currentValue=s,a!==null)if(uu(a.value,s)){if(a.children===i.children&&!Ls.current){e=Xf(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Rf(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),hF(a.return,r,e),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Fe(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),hF(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}es(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,a0(e,r),i=yl(i),n=n(i),e.flags|=1,es(t,e,n,r),e.child;case 14:return n=e.type,i=Ll(n,e.pendingProps),i=Ll(n.type,i),D8(t,e,n,i,r);case 15:return GJ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ll(n,i),QT(t,e),e.tag=1,Bs(n)?(t=!0,pN(e)):t=!1,a0(e,r),qJ(e,n,i),pF(e,n,i,r),vF(null,e,n,!0,t,r);case 19:return ZJ(t,e,r);case 22:return KJ(t,e,r)}throw Error(Fe(156,e.tag))};function pee(t,e){return VZ(t,e)}function bye(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cl(t,e,r,n){return new bye(t,e,r,n)}function g$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wye(t){if(typeof t=="function")return g$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R4)return 11;if(t===F4)return 14}return 2}function tp(t,e){var r=t.alternate;return r===null?(r=cl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function eD(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")g$(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ty:return Qg(r.children,i,a,e);case k4:s=8,i|=8;break;case BR:return t=cl(12,r,e,i|2),t.elementType=BR,t.lanes=a,t;case $R:return t=cl(13,r,e,i),t.elementType=$R,t.lanes=a,t;case jR:return t=cl(19,r,e,i),t.elementType=jR,t.lanes=a,t;case EZ:return cM(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AZ:s=10;break e;case _Z:s=9;break e;case R4:s=11;break e;case F4:s=14;break e;case Lh:s=16,n=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=cl(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Qg(t,e,r,n){return t=cl(7,t,n,e),t.lanes=r,t}function cM(t,e,r,n){return t=cl(22,t,n,e),t.elementType=EZ,t.lanes=r,t.stateNode={isHidden:!1},t}function hk(t,e,r){return t=cl(6,t,null,e),t.lanes=r,t}function dk(t,e,r){return e=cl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xye(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=GO(0),this.expirationTimes=GO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=GO(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function v$(t,e,r,n,i,a,s,o,l){return t=new xye(t,e,r,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=cl(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},e$(a),t}function Aye(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cy,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mee(t){if(!t)return cp;t=t._reactInternals;e:{if(Mv(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(Bs(r))return mJ(t,r,e)}return e}function gee(t,e,r,n,i,a,s,o,l){return t=v$(r,n,!0,t,i,a,s,o,l),t.context=mee(null),r=t.current,n=as(),i=ep(r),a=Rf(n,i),a.callback=e??null,Zd(r,a,i),t.current.lanes=i,KE(t,i,n),$s(t,n),t}function fM(t,e,r,n){var i=e.current,a=as(),s=ep(i);return r=mee(r),e.context===null?e.context=r:e.pendingContext=r,e=Rf(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zd(i,e,s),t!==null&&(su(t,i,s,a),KT(t,i,s)),s}function TN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j8(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function y$(t,e){j8(t,e),(t=t.alternate)&&j8(t,e)}function _ye(){return null}var vee=typeof reportError=="function"?reportError:function(t){console.error(t)};function b$(t){this._internalRoot=t}hM.prototype.render=b$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));fM(t,e,null,null)};hM.prototype.unmount=b$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hv(function(){fM(null,t,null,null)}),e[Gf]=null}};function hM(t){this._internalRoot=t}hM.prototype.unstable_scheduleHydration=function(t){if(t){var e=KZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zh.length&&e!==0&&e<zh[r].priority;r++);zh.splice(r,0,t),r===0&&YZ(t)}};function w$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V8(){}function Eye(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=TN(s);a.call(u)}}var s=gee(e,n,t,0,null,!1,!1,"",V8);return t._reactRootContainer=s,t[Gf]=s.current,iA(t.nodeType===8?t.parentNode:t),hv(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=TN(l);o.call(u)}}var l=v$(t,0,!1,null,null,!1,!1,"",V8);return t._reactRootContainer=l,t[Gf]=l.current,iA(t.nodeType===8?t.parentNode:t),hv(function(){fM(e,l,r,n)}),l}function pM(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=TN(s);o.call(l)}}fM(e,s,t,i)}else s=Eye(r,e,t,i,n);return TN(s)}WZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=G1(e.pendingLanes);r!==0&&($4(e,r|1),$s(e,Vn()),!(ir&6)&&(Xb=Vn()+500,kp()))}break;case 13:hv(function(){var n=Kf(t,1);if(n!==null){var i=as();su(n,t,1,i)}}),y$(t,1)}};j4=function(t){if(t.tag===13){var e=Kf(t,134217728);if(e!==null){var r=as();su(e,t,134217728,r)}y$(t,134217728)}};GZ=function(t){if(t.tag===13){var e=ep(t),r=Kf(t,e);if(r!==null){var n=as();su(r,t,e,n)}y$(t,e)}};KZ=function(){return wr};XZ=function(t,e){var r=wr;try{return wr=t,e()}finally{wr=r}};YR=function(t,e,r){switch(e){case"input":if(zR(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=iM(n);if(!i)throw Error(Fe(90));CZ(n),zR(n,i)}}}break;case"textarea":DZ(t,r);break;case"select":e=r.value,e!=null&&t0(t,!!r.multiple,e,!1)}};RZ=d$;FZ=hv;var Sye={usingClientEntryPoint:!1,Events:[YE,My,iM,OZ,kZ,d$]},T1={findFiberByHostInstance:Em,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cye={bundleType:T1.bundleType,version:T1.version,rendererPackageName:T1.rendererPackageName,rendererConfig:T1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$Z(t),t===null?null:t.stateNode},findFiberByHostInstance:T1.findFiberByHostInstance||_ye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jC.isDisabled&&jC.supportsFiber)try{eM=jC.inject(Cye),sc=jC}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sye;No.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w$(e))throw Error(Fe(200));return Aye(t,e,null,r)};No.createRoot=function(t,e){if(!w$(t))throw Error(Fe(299));var r=!1,n="",i=vee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=v$(t,1,!1,null,null,r,!1,n,i),t[Gf]=e.current,iA(t.nodeType===8?t.parentNode:t),new b$(e)};No.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=$Z(e),t=t===null?null:t.stateNode,t};No.flushSync=function(t){return hv(t)};No.hydrate=function(t,e,r){if(!dM(e))throw Error(Fe(200));return pM(null,t,e,!0,r)};No.hydrateRoot=function(t,e,r){if(!w$(t))throw Error(Fe(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=vee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=gee(e,null,t,1,r??null,i,!1,a,s),t[Gf]=e.current,iA(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new hM(e)};No.render=function(t,e,r){if(!dM(e))throw Error(Fe(200));return pM(null,t,e,!1,r)};No.unmountComponentAtNode=function(t){if(!dM(t))throw Error(Fe(40));return t._reactRootContainer?(hv(function(){pM(null,null,t,!1,function(){t._reactRootContainer=null,t[Gf]=null})}),!0):!1};No.unstable_batchedUpdates=d$;No.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dM(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return pM(t,e,r,!1,n)};No.version="18.3.1-next-f1338f8080-20240426";function yee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yee)}catch(t){console.error(t)}}yee(),yZ.exports=No;var mM=yZ.exports,U8=mM;FR.createRoot=U8.createRoot,FR.hydrateRoot=U8.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dA(){return dA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dA.apply(this,arguments)}var qd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qd||(qd={}));const z8="popstate";function Tye(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return NF("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:DN(i)}return Nye(e,r,null,t)}function Un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Dye(){return Math.random().toString(36).substr(2,8)}function q8(t,e){return{usr:t.state,key:t.key,idx:e}}function NF(t,e,r,n){return r===void 0&&(r=null),dA({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cw(e):e,{state:r,key:e&&e.key||n||Dye()})}function DN(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Cw(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Nye(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=qd.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(dA({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function f(){o=qd.Pop;let v=c(),y=v==null?null:v-u;u=v,l&&l({action:o,location:m.location,delta:y})}function h(v,y){o=qd.Push;let w=NF(m.location,v,y);u=c()+1;let b=q8(w,u),_=m.createHref(w);try{s.pushState(b,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(_)}a&&l&&l({action:o,location:m.location,delta:1})}function d(v,y){o=qd.Replace;let w=NF(m.location,v,y);u=c();let b=q8(w,u),_=m.createHref(w);s.replaceState(b,"",_),a&&l&&l({action:o,location:m.location,delta:0})}function p(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:DN(v);return w=w.replace(/ $/,"%20"),Un(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let m={get action(){return o},get location(){return t(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(z8,f),l=v,()=>{i.removeEventListener(z8,f),l=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:d,go(v){return s.go(v)}};return m}var H8;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(H8||(H8={}));function Pye(t,e,r){return r===void 0&&(r="/"),Mye(t,e,r)}function Mye(t,e,r,n){let i=typeof e=="string"?Cw(e):e,a=A$(i.pathname||"/",r);if(a==null)return null;let s=bee(t);Iye(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=qye(a);o=Vye(s[l],u)}return o}function bee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Un(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=rp([n,l.relativePath]),c=r.concat(l);a.children&&a.children.length>0&&(Un(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bee(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:$ye(u,a.index),routesMeta:c})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of wee(a.path))i(a,s,l)}),e}function wee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=wee(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Iye(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:jye(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Oye=/^:[\w-]+$/,kye=3,Rye=2,Fye=1,Lye=10,Bye=-2,W8=t=>t==="*";function $ye(t,e){let r=t.split("/"),n=r.length;return r.some(W8)&&(n+=Bye),e&&(n+=Rye),r.filter(i=>!W8(i)).reduce((i,a)=>i+(Oye.test(a)?kye:a===""?Fye:Lye),n)}function jye(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Vye(t,e,r){let{routesMeta:n}=t,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=a==="/"?e:e.slice(a.length)||"/",f=Uye({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:rp([a,f.pathname]),pathnameBase:Xye(rp([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=rp([a,f.pathnameBase]))}return s}function Uye(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=zye(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let m=o[f]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function zye(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),x$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function qye(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function A$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Hye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wye=t=>Hye.test(t);function Gye(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Cw(t):t,a;if(r)if(Wye(r))a=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),x$(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+r))}r.startsWith("/")?a=G8(r.substring(1),"/"):a=G8(r,e)}else a=e;return{pathname:a,search:Yye(n),hash:Qye(i)}}function G8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function pk(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kye(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _$(t,e){let r=Kye(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function E$(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Cw(t):(i=dA({},t),Un(!i.pathname||!i.pathname.includes("?"),pk("?","pathname","search",i)),Un(!i.pathname||!i.pathname.includes("#"),pk("#","pathname","hash",i)),Un(!i.search||!i.search.includes("#"),pk("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?e[f]:"/"}let l=Gye(i,o),u=s&&s!=="/"&&s.endsWith("/"),c=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const rp=t=>t.join("/").replace(/\/\/+/g,"/"),Xye=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yye=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Qye=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zye(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xee=["post","put","patch","delete"];new Set(xee);const Jye=["get",...xee];new Set(Jye);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pA.apply(this,arguments)}const S$=O.createContext(null),e0e=O.createContext(null),Rp=O.createContext(null),gM=O.createContext(null),Cc=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Aee=O.createContext(null);function t0e(t,e){let{relative:r}=e===void 0?{}:e;Tw()||Un(!1);let{basename:n,navigator:i}=O.useContext(Rp),{hash:a,pathname:s,search:o}=See(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:rp([n,s])),i.createHref({pathname:l,search:o,hash:a})}function Tw(){return O.useContext(gM)!=null}function Dw(){return Tw()||Un(!1),O.useContext(gM).location}function _ee(t){O.useContext(Rp).static||O.useLayoutEffect(t)}function Nw(){let{isDataRoute:t}=O.useContext(Cc);return t?g0e():r0e()}function r0e(){Tw()||Un(!1);let t=O.useContext(S$),{basename:e,future:r,navigator:n}=O.useContext(Rp),{matches:i}=O.useContext(Cc),{pathname:a}=Dw(),s=JSON.stringify(_$(i,r.v7_relativeSplatPath)),o=O.useRef(!1);return _ee(()=>{o.current=!0}),O.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=E$(u,JSON.parse(s),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:rp([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,a,t])}const n0e=O.createContext(null);function i0e(t){let e=O.useContext(Cc).outlet;return e&&O.createElement(n0e.Provider,{value:t},e)}function Eee(){let{matches:t}=O.useContext(Cc),e=t[t.length-1];return e?e.params:{}}function See(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=O.useContext(Rp),{matches:i}=O.useContext(Cc),{pathname:a}=Dw(),s=JSON.stringify(_$(i,n.v7_relativeSplatPath));return O.useMemo(()=>E$(t,JSON.parse(s),a,r==="path"),[t,s,a,r])}function a0e(t,e){return s0e(t,e)}function s0e(t,e,r,n){Tw()||Un(!1);let{navigator:i}=O.useContext(Rp),{matches:a}=O.useContext(Cc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Dw(),c;if(e){var f;let v=typeof e=="string"?Cw(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Un(!1),c=v}else c=u;let h=c.pathname||"/",d=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=Pye(t,{pathname:d}),m=f0e(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:rp([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:rp([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return e&&m?O.createElement(gM.Provider,{value:{location:pA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:qd.Pop}},m):m}function o0e(){let t=m0e(),e=Zye(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),r?O.createElement("pre",{style:i},r):null,null)}const l0e=O.createElement(o0e,null);class u0e extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?O.createElement(Cc.Provider,{value:this.props.routeContext},O.createElement(Aee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c0e(t){let{routeContext:e,match:r,children:n}=t,i=O.useContext(S$);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(Cc.Provider,{value:e},n)}function f0e(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let c=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);c>=0||Un(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:d}=r,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,h)=>{let d,p=!1,m=null,v=null;r&&(d=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||l0e,l&&(u<0&&h===0?(v0e("route-fallback"),p=!0,v=null):u===h&&(p=!0,v=f.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,h+1)),w=()=>{let b;return d?b=m:p?b=v:f.route.Component?b=O.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,O.createElement(c0e,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?O.createElement(u0e,{location:r.location,revalidation:r.revalidation,component:m,error:d,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Cee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cee||{}),Tee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tee||{});function h0e(t){let e=O.useContext(S$);return e||Un(!1),e}function d0e(t){let e=O.useContext(e0e);return e||Un(!1),e}function p0e(t){let e=O.useContext(Cc);return e||Un(!1),e}function Dee(t){let e=p0e(),r=e.matches[e.matches.length-1];return r.route.id||Un(!1),r.route.id}function m0e(){var t;let e=O.useContext(Aee),r=d0e(),n=Dee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function g0e(){let{router:t}=h0e(Cee.UseNavigateStable),e=Dee(Tee.UseNavigateStable),r=O.useRef(!1);return _ee(()=>{r.current=!0}),O.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pA({fromRouteId:e},a)))},[t,e])}const K8={};function v0e(t,e,r){K8[t]||(K8[t]=!0)}function y0e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function b0e(t){let{to:e,replace:r,state:n,relative:i}=t;Tw()||Un(!1);let{future:a,static:s}=O.useContext(Rp),{matches:o}=O.useContext(Cc),{pathname:l}=Dw(),u=Nw(),c=E$(e,_$(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(c);return O.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function w0e(t){return i0e(t.context)}function Ki(t){Un(!1)}function x0e(t){let{basename:e="/",children:r=null,location:n,navigationType:i=qd.Pop,navigator:a,static:s=!1,future:o}=t;Tw()&&Un(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:a,static:s,future:pA({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=Cw(n));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:p="default"}=n,m=O.useMemo(()=>{let v=A$(c,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:d,key:p},navigationType:i}},[l,c,f,h,d,p,i]);return m==null?null:O.createElement(Rp.Provider,{value:u},O.createElement(gM.Provider,{children:r,value:m}))}function A0e(t){let{children:e,location:r}=t;return a0e(PF(e),r)}new Promise(()=>{});function PF(t,e){e===void 0&&(e=[]);let r=[];return O.Children.forEach(t,(n,i)=>{if(!O.isValidElement(n))return;let a=[...e,i];if(n.type===O.Fragment){r.push.apply(r,PF(n.props.children,a));return}n.type!==Ki&&Un(!1),!n.props.index||!n.props.children||Un(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=PF(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(this,arguments)}function _0e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function E0e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S0e(t,e){return t.button===0&&(!e||e==="_self")&&!E0e(t)}const C0e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T0e="6";try{window.__reactRouterVersion=T0e}catch{}const D0e="startTransition",X8=gZ[D0e];function N0e(t){let{basename:e,children:r,future:n,window:i}=t,a=O.useRef();a.current==null&&(a.current=Tye({window:i,v5Compat:!0}));let s=a.current,[o,l]=O.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},c=O.useCallback(f=>{u&&X8?X8(()=>l(f)):l(f)},[l,u]);return O.useLayoutEffect(()=>s.listen(c),[s,c]),O.useEffect(()=>y0e(n),[n]),O.createElement(x0e,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const P0e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M0e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fr=O.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:c,viewTransition:f}=e,h=_0e(e,C0e),{basename:d}=O.useContext(Rp),p,m=!1;if(typeof u=="string"&&M0e.test(u)&&(p=u,P0e))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),x=A$(_.pathname,d);_.origin===b.origin&&x!=null?u=x+_.search+_.hash:m=!0}catch{}let v=t0e(u,{relative:i}),y=I0e(u,{replace:s,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:f});function w(b){n&&n(b),b.defaultPrevented||y(b)}return O.createElement("a",MF({},h,{href:p||v,onClick:m||a?n:w,ref:r,target:l}))});var Y8;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Y8||(Y8={}));var Q8;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Q8||(Q8={}));function I0e(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=Nw(),u=Dw(),c=See(t,{relative:s});return O.useCallback(f=>{if(S0e(f,r)){f.preventDefault();let h=n!==void 0?n:DN(u)===DN(c);l(t,{replace:h,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,c,n,i,r,t,a,s,o])}const Nee=O.createContext(),Cl=()=>{const t=O.useContext(Nee);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},O0e=({children:t})=>{const[e,r]=O.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});O.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{r(i=>!i)};return I.jsx(Nee.Provider,{value:{isDark:e,toggleTheme:n},children:t})},Pee="authToken",Mee="user",k0e=()=>localStorage.getItem(Pee),R0e=()=>{localStorage.removeItem(Pee)},fp=()=>{const t=localStorage.getItem(Mee);return t?JSON.parse(t):null},F0e=()=>{localStorage.removeItem(Mee)},IF=()=>!!k0e(),L0e=()=>{R0e(),F0e()};function B0e(){const{isDark:t,toggleTheme:e}=Cl(),r=Nw(),[n,i]=O.useState(!1),[a,s]=O.useState(!1),[o,l]=O.useState(null),[u,c]=O.useState(!1);O.useEffect(()=>{IF()&&(l(fp()),c(!0));const d=()=>{IF()?(l(fp()),c(!0)):(l(null),c(!1))};return window.addEventListener("auth-change",d),()=>window.removeEventListener("auth-change",d)},[]);const f=()=>{L0e(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),c(!1),s(!1),i(!1),window.dispatchEvent(new Event("auth-change")),r("/")},h=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/visualizations",label:""},{to:"/calculator",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...u&&o?[{to:"/notes",label:""}]:[]];return I.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${t?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx(Fr,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),I.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[h.map(d=>I.jsx(Fr,{to:d.to,className:`transition text-sm lg:text-base ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:d.label},d.to)),I.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),u&&o?I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>s(!a),className:`p-2 rounded-lg border transition ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),a&&I.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[I.jsx(Fr,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx(Fr,{to:"/bookmarks",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx(Fr,{to:"/notes",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(!1),children:""}),I.jsx("button",{onClick:f,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${t?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):I.jsxs("div",{className:"flex gap-2",children:[I.jsx(Fr,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${t?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),I.jsx(Fr,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),I.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[I.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),I.jsx("button",{onClick:()=>i(!n),className:`p-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:n?"":""})]})]}),n&&I.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${t?"border-gray-800":"border-gray-200"}`,children:[h.map(d=>I.jsx(Fr,{to:d.to,className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:d.label},d.to)),u&&o?I.jsx(I.Fragment,{children:I.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${t?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[I.jsx("div",{className:`px-2 py-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:o.username}),I.jsx(Fr,{to:"/profile",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx(Fr,{to:"/bookmarks",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx(Fr,{to:"/notes",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),I.jsx("button",{onClick:f,className:`w-full text-left py-2 transition ${t?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):I.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${t?"border-gray-800":"border-gray-200"}`,children:[I.jsx(Fr,{to:"/login",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),I.jsx(Fr,{to:"/signup",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function $0e(){const[t,e]=O.useState(0);return O.useEffect(()=>{const r=()=>{const n=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,a=i>0?n/i*100:0;e(Math.min(100,Math.max(0,a)))};return window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[]),I.jsx("div",{className:"scroll-progress",children:I.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${t/100})`}})})}function j0e(){const{isDark:t}=Cl();return I.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[I.jsx($0e,{}),I.jsx(B0e,{}),I.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:I.jsx(w0e,{})}),I.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${t?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:I.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const Iee=O.createContext({});function V0e(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const C$=typeof window<"u",U0e=C$?O.useLayoutEffect:O.useEffect,T$=O.createContext(null);function D$(t,e){t.indexOf(e)===-1&&t.push(e)}function N$(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Yf=(t,e,r)=>r>e?e:r<t?t:r;let P$=()=>{};const Qf={},Oee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function kee(t){return typeof t=="object"&&t!==null}const Ree=t=>/^0[^.\s]+$/u.test(t);function M$(t){let e;return()=>(e===void 0&&(e=t()),e)}const pl=t=>t,z0e=(t,e)=>r=>e(t(r)),ZE=(...t)=>t.reduce(z0e),mA=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class I${constructor(){this.subscriptions=[]}add(e){return D$(this.subscriptions,e),()=>N$(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lc=t=>t*1e3,fl=t=>t/1e3;function Fee(t,e){return e?t*(1e3/e):0}const Lee=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,q0e=1e-7,H0e=12;function W0e(t,e,r,n,i){let a,s,o=0;do s=e+(r-e)/2,a=Lee(s,n,i)-t,a>0?r=s:e=s;while(Math.abs(a)>q0e&&++o<H0e);return s}function JE(t,e,r,n){if(t===e&&r===n)return pl;const i=a=>W0e(a,0,1,t,r);return a=>a===0||a===1?a:Lee(i(a),e,n)}const Bee=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$ee=t=>e=>1-t(1-e),jee=JE(.33,1.53,.69,.99),O$=$ee(jee),Vee=Bee(O$),Uee=t=>(t*=2)<1?.5*O$(t):.5*(2-Math.pow(2,-10*(t-1))),k$=t=>1-Math.sin(Math.acos(t)),zee=$ee(k$),qee=Bee(k$),G0e=JE(.42,0,1,1),K0e=JE(0,0,.58,1),Hee=JE(.42,0,.58,1),X0e=t=>Array.isArray(t)&&typeof t[0]!="number",Wee=t=>Array.isArray(t)&&typeof t[0]=="number",Y0e={linear:pl,easeIn:G0e,easeInOut:Hee,easeOut:K0e,circIn:k$,circInOut:qee,circOut:zee,backIn:O$,backInOut:Vee,backOut:jee,anticipate:Uee},Q0e=t=>typeof t=="string",Z8=t=>{if(Wee(t)){P$(t.length===4);const[e,r,n,i]=t;return JE(e,r,n,i)}else if(Q0e(t))return Y0e[t];return t},VC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Z0e(t,e){let r=new Set,n=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,f=!1,h=!1)=>{const p=h&&i?r:n;return f&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,i){a=!0;return}i=!0,[r,n]=[n,r],r.forEach(l),r.clear(),i=!1,a&&(a=!1,u.process(c))}};return u}const J0e=40;function Gee(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,s=VC.reduce((b,_)=>(b[_]=Z0e(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:h,render:d,postRender:p}=s,m=()=>{const b=Qf.useManualTiming?i.timestamp:performance.now();r=!1,Qf.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(b-i.timestamp,J0e),1)),i.timestamp=b,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(m))},v=()=>{r=!0,n=!0,i.isProcessing||t(m)};return{schedule:VC.reduce((b,_)=>{const x=s[_];return b[_]=(A,E=!1,S=!1)=>(r||v(),x.schedule(A,E,S)),b},{}),cancel:b=>{for(let _=0;_<VC.length;_++)s[VC[_]].cancel(b)},state:i,steps:s}}const{schedule:sn,cancel:hp,state:na,steps:mk}=Gee(typeof requestAnimationFrame<"u"?requestAnimationFrame:pl,!0);let tD;function ebe(){tD=void 0}const ks={now:()=>(tD===void 0&&ks.set(na.isProcessing||Qf.useManualTiming?na.timestamp:performance.now()),tD),set:t=>{tD=t,queueMicrotask(ebe)}},Kee=t=>e=>typeof e=="string"&&e.startsWith(t),R$=Kee("--"),tbe=Kee("var(--"),F$=t=>tbe(t)?rbe.test(t.split("/*")[0].trim()):!1,rbe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pw={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gA={...Pw,transform:t=>Yf(0,1,t)},UC={...Pw,default:1},Fx=t=>Math.round(t*1e5)/1e5,L$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nbe(t){return t==null}const ibe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B$=(t,e)=>r=>!!(typeof r=="string"&&ibe.test(r)&&r.startsWith(t)||e&&!nbe(r)&&Object.prototype.hasOwnProperty.call(r,e)),Xee=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,a,s,o]=n.match(L$);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},abe=t=>Yf(0,255,t),gk={...Pw,transform:t=>Math.round(abe(t))},Tm={test:B$("rgb","red"),parse:Xee("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+gk.transform(t)+", "+gk.transform(e)+", "+gk.transform(r)+", "+Fx(gA.transform(n))+")"};function sbe(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const OF={test:B$("#"),parse:sbe,transform:Tm.transform},eS=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kh=eS("deg"),uc=eS("%"),bt=eS("px"),obe=eS("vh"),lbe=eS("vw"),J8={...uc,parse:t=>uc.parse(t)/100,transform:t=>uc.transform(t*100)},By={test:B$("hsl","hue"),parse:Xee("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+uc.transform(Fx(e))+", "+uc.transform(Fx(r))+", "+Fx(gA.transform(n))+")"},Kn={test:t=>Tm.test(t)||OF.test(t)||By.test(t),parse:t=>Tm.test(t)?Tm.parse(t):By.test(t)?By.parse(t):OF.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Tm.transform(t):By.transform(t),getAnimatableNone:t=>{const e=Kn.parse(t);return e.alpha=0,Kn.transform(e)}},ube=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cbe(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(L$))==null?void 0:e.length)||0)+(((r=t.match(ube))==null?void 0:r.length)||0)>0}const Yee="number",Qee="color",fbe="var",hbe="var(",ez="${}",dbe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vA(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(dbe,l=>(Kn.test(l)?(n.color.push(a),i.push(Qee),r.push(Kn.parse(l))):l.startsWith(hbe)?(n.var.push(a),i.push(fbe),r.push(l)):(n.number.push(a),i.push(Yee),r.push(parseFloat(l))),++a,ez)).split(ez);return{values:r,split:o,indexes:n,types:i}}function Zee(t){return vA(t).values}function Jee(t){const{split:e,types:r}=vA(t),n=e.length;return i=>{let a="";for(let s=0;s<n;s++)if(a+=e[s],i[s]!==void 0){const o=r[s];o===Yee?a+=Fx(i[s]):o===Qee?a+=Kn.transform(i[s]):a+=i[s]}return a}}const pbe=t=>typeof t=="number"?0:Kn.test(t)?Kn.getAnimatableNone(t):t;function mbe(t){const e=Zee(t);return Jee(t)(e.map(pbe))}const dp={test:cbe,parse:Zee,createTransformer:Jee,getAnimatableNone:mbe};function vk(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function gbe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,s=0;if(!e)i=a=s=r;else{const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;i=vk(l,o,t+1/3),a=vk(l,o,t),s=vk(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:n}}function NN(t,e){return r=>r>0?e:t}const dn=(t,e,r)=>t+(e-t)*r,yk=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},vbe=[OF,Tm,By],ybe=t=>vbe.find(e=>e.test(t));function tz(t){const e=ybe(t);if(!e)return!1;let r=e.parse(t);return e===By&&(r=gbe(r)),r}const rz=(t,e)=>{const r=tz(t),n=tz(e);if(!r||!n)return NN(t,e);const i={...r};return a=>(i.red=yk(r.red,n.red,a),i.green=yk(r.green,n.green,a),i.blue=yk(r.blue,n.blue,a),i.alpha=dn(r.alpha,n.alpha,a),Tm.transform(i))},kF=new Set(["none","hidden"]);function bbe(t,e){return kF.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function wbe(t,e){return r=>dn(t,e,r)}function $$(t){return typeof t=="number"?wbe:typeof t=="string"?F$(t)?NN:Kn.test(t)?rz:_be:Array.isArray(t)?ete:typeof t=="object"?Kn.test(t)?rz:xbe:NN}function ete(t,e){const r=[...t],n=r.length,i=t.map((a,s)=>$$(a)(a,e[s]));return a=>{for(let s=0;s<n;s++)r[s]=i[s](a);return r}}function xbe(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=$$(t[i])(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function Abe(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][n[a]],o=t.values[s]??0;r[i]=o,n[a]++}return r}const _be=(t,e)=>{const r=dp.createTransformer(e),n=vA(t),i=vA(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?kF.has(t)&&!i.values.length||kF.has(e)&&!n.values.length?bbe(t,e):ZE(ete(Abe(n,i),i.values),r):NN(t,e)};function tte(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?dn(t,e,r):$$(t)(t,e)}const Ebe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>sn.update(e,r),stop:()=>hp(e),now:()=>na.isProcessing?na.timestamp:ks.now()}},rte=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let a=0;a<i;a++)n+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},PN=2e4;function j$(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<PN;)e+=r,n=t.next(e);return e>=PN?1/0:e}function Sbe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(j$(n),PN);return{type:"keyframes",ease:a=>n.next(i*a).value/e,duration:fl(i)}}const Cbe=5;function nte(t,e,r){const n=Math.max(e-Cbe,0);return Fee(r-t(n),e-n)}const Sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bk=.001;function Tbe({duration:t=Sn.duration,bounce:e=Sn.bounce,velocity:r=Sn.velocity,mass:n=Sn.mass}){let i,a,s=1-e;s=Yf(Sn.minDamping,Sn.maxDamping,s),t=Yf(Sn.minDuration,Sn.maxDuration,fl(t)),s<1?(i=u=>{const c=u*s,f=c*t,h=c-r,d=RF(u,s),p=Math.exp(-f);return bk-h/d*p},a=u=>{const f=u*s*t,h=f*r+r,d=Math.pow(s,2)*Math.pow(u,2)*t,p=Math.exp(-f),m=RF(Math.pow(u,2),s);return(-i(u)+bk>0?-1:1)*((h-d)*p)/m}):(i=u=>{const c=Math.exp(-u*t),f=(u-r)*t+1;return-bk+c*f},a=u=>{const c=Math.exp(-u*t),f=(r-u)*(t*t);return c*f});const o=5/t,l=Nbe(i,a,o);if(t=lc(t),isNaN(l))return{stiffness:Sn.stiffness,damping:Sn.damping,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:s*2*Math.sqrt(n*u),duration:t}}}const Dbe=12;function Nbe(t,e,r){let n=r;for(let i=1;i<Dbe;i++)n=n-t(n)/e(n);return n}function RF(t,e){return t*Math.sqrt(1-e*e)}const Pbe=["duration","bounce"],Mbe=["stiffness","damping","mass"];function nz(t,e){return e.some(r=>t[r]!==void 0)}function Ibe(t){let e={velocity:Sn.velocity,stiffness:Sn.stiffness,damping:Sn.damping,mass:Sn.mass,isResolvedFromDuration:!1,...t};if(!nz(t,Mbe)&&nz(t,Pbe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*Yf(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Sn.mass,stiffness:i,damping:a}}else{const r=Tbe(t);e={...e,...r,mass:Sn.mass},e.isResolvedFromDuration=!0}return e}function MN(t=Sn.visualDuration,e=Sn.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:d}=Ibe({...r,velocity:-fl(r.velocity||0)}),p=h||0,m=u/(2*Math.sqrt(l*c)),v=s-a,y=fl(Math.sqrt(l/c)),w=Math.abs(v)<5;n||(n=w?Sn.restSpeed.granular:Sn.restSpeed.default),i||(i=w?Sn.restDelta.granular:Sn.restDelta.default);let b;if(m<1){const x=RF(y,m);b=A=>{const E=Math.exp(-m*y*A);return s-E*((p+m*y*v)/x*Math.sin(x*A)+v*Math.cos(x*A))}}else if(m===1)b=x=>s-Math.exp(-y*x)*(v+(p+y*v)*x);else{const x=y*Math.sqrt(m*m-1);b=A=>{const E=Math.exp(-m*y*A),S=Math.min(x*A,300);return s-E*((p+m*y*v)*Math.sinh(S)+x*v*Math.cosh(S))/x}}const _={calculatedDuration:d&&f||null,next:x=>{const A=b(x);if(d)o.done=x>=f;else{let E=x===0?p:0;m<1&&(E=x===0?lc(p):nte(b,x,A));const S=Math.abs(E)<=n,C=Math.abs(s-A)<=i;o.done=S&&C}return o.value=o.done?s:A,o},toString:()=>{const x=Math.min(j$(_),PN),A=rte(E=>_.next(x*E).value,x,30);return x+"ms "+A},toTransition:()=>{}};return _}MN.applyToOptions=t=>{const e=Sbe(t,100,MN);return t.ease=e.ease,t.duration=lc(e.duration),t.type="keyframes",t};function FF({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const f=t[0],h={done:!1,value:f},d=S=>o!==void 0&&S<o||l!==void 0&&S>l,p=S=>o===void 0?l:l===void 0||Math.abs(o-S)<Math.abs(l-S)?o:l;let m=r*e;const v=f+m,y=s===void 0?v:s(v);y!==v&&(m=y-f);const w=S=>-m*Math.exp(-S/n),b=S=>y+w(S),_=S=>{const C=w(S),D=b(S);h.done=Math.abs(C)<=u,h.value=h.done?y:D};let x,A;const E=S=>{d(h.value)&&(x=S,A=MN({keyframes:[h.value,p(h.value)],velocity:nte(b,S,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:S=>{let C=!1;return!A&&x===void 0&&(C=!0,_(S),E(S)),x!==void 0&&S>=x?A.next(S-x):(!C&&_(S),h)}}}function Obe(t,e,r){const n=[],i=r||Qf.mix||tte,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||pl:e;o=ZE(l,o)}n.push(o)}return n}function kbe(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;if(P$(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Obe(e,n,i),l=o.length,u=c=>{if(s&&c<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=mA(t[f],t[f+1],c);return o[f](h)};return r?c=>u(Yf(t[0],t[a-1],c)):u}function Rbe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=mA(0,e,n);t.push(dn(r,1,i))}}function Fbe(t){const e=[0];return Rbe(e,t.length-1),e}function Lbe(t,e){return t.map(r=>r*e)}function Bbe(t,e){return t.map(()=>e||Hee).splice(0,t.length-1)}function Lx({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=X0e(n)?n.map(Z8):Z8(n),a={done:!1,value:e[0]},s=Lbe(r&&r.length===e.length?r:Fbe(e),t),o=kbe(s,e,{ease:Array.isArray(i)?i:Bbe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const $be=t=>t!==null;function V$(t,{repeat:e,repeatType:r="loop"},n,i=1){const a=t.filter($be),o=i<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const jbe={decay:FF,inertia:FF,tween:Lx,keyframes:Lx,spring:MN};function ite(t){typeof t.type=="string"&&(t.type=jbe[t.type])}class U${constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Vbe=t=>t/100;class z$ extends U${constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:r}=this.options;r&&r.updatedAt!==ks.now()&&this.tick(ks.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ite(e);const{type:r=Lx,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const l=r||Lx;l!==Lx&&typeof o[0]!="number"&&(this.mixKeyframes=ZE(Vbe,tte(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=j$(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:h,repeatDelay:d,type:p,onUpdate:m,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,_=n;if(f){const S=Math.min(this.currentTime,i)/o;let C=Math.floor(S),D=S%1;!D&&S>=1&&(D=1),D===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(h==="reverse"?(D=1-D,d&&(D-=d/o)):h==="mirror"&&(_=s)),b=Yf(0,1,D)*o}const x=w?{done:!1,value:c[0]}:_.next(b);a&&(x.value=a(x.value));let{done:A}=x;!w&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return E&&p!==FF&&(x.value=V$(c,this.options,v,this.speed)),m&&m(x.value),E&&this.finish(),x}then(e,r){return this.finished.then(e,r)}get duration(){return fl(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fl(e)}get time(){return fl(this.currentTime)}set time(e){var r;e=lc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ks.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=fl(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=Ebe,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ks.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function Ube(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Dm=t=>t*180/Math.PI,LF=t=>{const e=Dm(Math.atan2(t[1],t[0]));return BF(e)},zbe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:LF,rotateZ:LF,skewX:t=>Dm(Math.atan(t[1])),skewY:t=>Dm(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},BF=t=>(t=t%360,t<0&&(t+=360),t),iz=LF,az=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),sz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),qbe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:az,scaleY:sz,scale:t=>(az(t)+sz(t))/2,rotateX:t=>BF(Dm(Math.atan2(t[6],t[5]))),rotateY:t=>BF(Dm(Math.atan2(-t[2],t[0]))),rotateZ:iz,rotate:iz,skewX:t=>Dm(Math.atan(t[4])),skewY:t=>Dm(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $F(t){return t.includes("scale")?1:0}function jF(t,e){if(!t||t==="none")return $F(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=qbe,i=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=zbe,i=o}if(!i)return $F(e);const a=n[e],s=i[1].split(",").map(Wbe);return typeof a=="function"?a(s):s[a]}const Hbe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return jF(r,e)};function Wbe(t){return parseFloat(t.trim())}const Mw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Iw=new Set(Mw),oz=t=>t===Pw||t===bt,Gbe=new Set(["x","y","z"]),Kbe=Mw.filter(t=>!Gbe.has(t));function Xbe(t){const e=[];return Kbe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Zg={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jF(e,"x"),y:(t,{transform:e})=>jF(e,"y")};Zg.translateX=Zg.x;Zg.translateY=Zg.y;const Jg=new Set;let VF=!1,UF=!1,zF=!1;function ate(){if(UF){const t=Array.from(Jg).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=Xbe(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,s])=>{var o;(o=n.getValue(a))==null||o.set(s)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}UF=!1,VF=!1,Jg.forEach(t=>t.complete(zF)),Jg.clear()}function ste(){Jg.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(UF=!0)})}function Ybe(){zF=!0,ste(),ate(),zF=!1}class q${constructor(e,r,n,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Jg.add(this),VF||(VF=!0,sn.read(ste),sn.resolveKeyframes(ate))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const o=n.readValue(r,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Ube(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Jg.delete(this)}cancel(){this.state==="scheduled"&&(Jg.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Qbe=t=>t.startsWith("--");function Zbe(t,e,r){Qbe(e)?t.style.setProperty(e,r):t.style[e]=r}const Jbe=M$(()=>window.ScrollTimeline!==void 0),ewe={};function twe(t,e){const r=M$(t);return()=>ewe[e]??r()}const ote=twe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),X1=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,lz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:X1([0,.65,.55,1]),circOut:X1([.55,0,1,.45]),backIn:X1([.31,.01,.66,-.59]),backOut:X1([.33,1.53,.69,.99])};function lte(t,e){if(t)return typeof t=="function"?ote()?rte(t,e):"ease-out":Wee(t)?X1(t):Array.isArray(t)?t.map(r=>lte(r,e)||lz.easeOut):lz[t]}function rwe(t,e,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:r};l&&(c.offset=l);const f=lte(o,i);Array.isArray(f)&&(c.easing=f);const h={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(c,h)}function ute(t){return typeof t=="function"&&"applyToOptions"in t}function nwe({type:t,...e}){return ute(t)&&ote()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class iwe extends U${constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,P$(typeof e.type!="string");const u=nwe(e);this.animation=rwe(r,n,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const c=V$(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Zbe(r,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return fl(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fl(e)}get time(){return fl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=lc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Jbe()?(this.animation.timeline=e,pl):r(this)}}const cte={anticipate:Uee,backInOut:Vee,circInOut:qee};function awe(t){return t in cte}function swe(t){typeof t.ease=="string"&&awe(t.ease)&&(t.ease=cte[t.ease])}const uz=10;class owe extends iwe{constructor(e){swe(e),ite(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:a,...s}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const o=new z$({...s,autoplay:!1}),l=lc(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-uz).value,o.sample(l).value,uz),o.stop()}}const cz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dp.test(t)||t==="0")&&!t.startsWith("url("));function lwe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function uwe(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=cz(i,e),o=cz(a,e);return!s||!o?!1:lwe(t)||(r==="spring"||ute(r))&&n}function qF(t){t.duration=0,t.type="keyframes"}const cwe=new Set(["opacity","clipPath","filter","transform"]),fwe=M$(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hwe(t){var c;const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:a,type:s}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return fwe()&&r&&cwe.has(r)&&(r!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&a!==0&&s!=="inertia"}const dwe=40;class pwe extends U${constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:c,...f}){var p;super(),this.stop=()=>{var m,v;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=ks.now();const h={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:u,element:c,...f},d=(c==null?void 0:c.KeyframeResolver)||q$;this.keyframeResolver=new d(o,(m,v,y)=>this.onKeyframesResolved(m,v,h,!y),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=ks.now(),uwe(e,a,s,o)||((Qf.instantAnimations||!l)&&(c==null||c(V$(e,n,r))),e[0]=e[e.length-1],qF(n),n.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>dwe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},d=!u&&hwe(h)?new owe({...h,element:h.motionValue.owner.current}):new z$(h);d.finished.then(()=>this.notifyFinished()).catch(pl),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Ybe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const mwe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gwe(t){const e=mwe.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function fte(t,e,r=1){const[n,i]=gwe(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const s=a.trim();return Oee(s)?parseFloat(s):s}return F$(i)?fte(i,e,r+1):i}function H$(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const hte=new Set(["width","height","top","left","right","bottom",...Mw]),vwe={test:t=>t==="auto",parse:t=>t},dte=t=>e=>e.test(t),pte=[Pw,bt,uc,kh,lbe,obe,vwe],fz=t=>pte.find(dte(t));function ywe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ree(t):!0}const bwe=new Set(["brightness","contrast","saturate","opacity"]);function wwe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(L$)||[];if(!n)return t;const i=r.replace(n,"");let a=bwe.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const xwe=/\b([a-z-]*)\(.*?\)/gu,HF={...dp,getAnimatableNone:t=>{const e=t.match(xwe);return e?e.map(wwe).join(" "):t}},hz={...Pw,transform:Math.round},Awe={rotate:kh,rotateX:kh,rotateY:kh,rotateZ:kh,scale:UC,scaleX:UC,scaleY:UC,scaleZ:UC,skew:kh,skewX:kh,skewY:kh,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:gA,originX:J8,originY:J8,originZ:bt},W$={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...Awe,zIndex:hz,fillOpacity:gA,strokeOpacity:gA,numOctaves:hz},_we={...W$,color:Kn,backgroundColor:Kn,outlineColor:Kn,fill:Kn,stroke:Kn,borderColor:Kn,borderTopColor:Kn,borderRightColor:Kn,borderBottomColor:Kn,borderLeftColor:Kn,filter:HF,WebkitFilter:HF},mte=t=>_we[t];function gte(t,e){let r=mte(t);return r!==HF&&(r=dp),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Ewe=new Set(["auto","none","0"]);function Swe(t,e,r){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!Ewe.has(a)&&vA(a).values.length&&(i=t[n]),n++}if(i&&r)for(const a of e)t[a]=gte(r,i)}class Cwe extends q${constructor(e,r,n,i,a){super(e,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),F$(u))){const c=fte(u,r.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!hte.has(n)||e.length!==2)return;const[i,a]=e,s=fz(i),o=fz(a);if(s!==o)if(oz(s)&&oz(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Zg[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||ywe(e[i]))&&n.push(i);n.length&&Swe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zg[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,s=n[a];n[a]=Zg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Twe(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=(r==null?void 0:r[t])??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const vte=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Dwe(t){return kee(t)&&"offsetHeight"in t}const dz=30,Nwe=t=>!isNaN(parseFloat(t));class Pwe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var a;const i=ks.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=ks.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Nwe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new I$);const n=this.events[e].add(r);return e==="change"?()=>{n(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ks.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,dz);return Fee(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yb(t,e){return new Pwe(t,e)}const{schedule:G$}=Gee(queueMicrotask,!1),Rl={x:!1,y:!1};function yte(){return Rl.x||Rl.y}function Mwe(t){return t==="x"||t==="y"?Rl[t]?null:(Rl[t]=!0,()=>{Rl[t]=!1}):Rl.x||Rl.y?null:(Rl.x=Rl.y=!0,()=>{Rl.x=Rl.y=!1})}function bte(t,e){const r=Twe(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function pz(t){return!(t.pointerType==="touch"||yte())}function Iwe(t,e,r={}){const[n,i,a]=bte(t,r),s=o=>{if(!pz(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=f=>{pz(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const wte=(t,e)=>e?t===e?!0:wte(t,e.parentElement):!1,K$=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Owe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kwe(t){return Owe.has(t.tagName)||t.tabIndex!==-1}const rD=new WeakSet;function mz(t){return e=>{e.key==="Enter"&&t(e)}}function wk(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Rwe=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=mz(()=>{if(rD.has(r))return;wk(r,"down");const i=mz(()=>{wk(r,"up")}),a=()=>wk(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function gz(t){return K$(t)&&!yte()}function Fwe(t,e,r={}){const[n,i,a]=bte(t,r),s=o=>{const l=o.currentTarget;if(!gz(o))return;rD.add(l);const u=e(l,o),c=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),rD.has(l)&&rD.delete(l),gz(d)&&typeof u=="function"&&u(d,{success:p})},f=d=>{c(d,l===window||l===document||r.useGlobalTarget||wte(l,d.target))},h=d=>{c(d,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),Dwe(o)&&(o.addEventListener("focus",u=>Rwe(u,i)),!kwe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function xte(t){return kee(t)&&"ownerSVGElement"in t}function Lwe(t){return xte(t)&&t.tagName==="svg"}const Fa=t=>!!(t&&t.getVelocity),Bwe=[...pte,Kn,dp],$we=t=>Bwe.find(dte(t)),Ate=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jwe(t=!0){const e=O.useContext(T$);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,a=O.useId();O.useEffect(()=>{if(t)return i(a)},[t]);const s=O.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,s]:[!0]}const _te=O.createContext({strict:!1}),vz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qb={};for(const t in vz)Qb[t]={isEnabled:e=>vz[t].some(r=>!!e[r])};function Vwe(t){for(const e in t)Qb[e]={...Qb[e],...t[e]}}const Uwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function IN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Uwe.has(t)}let Ete=t=>!IN(t);function zwe(t){typeof t=="function"&&(Ete=e=>e.startsWith("on")?!IN(e):t(e))}try{zwe(require("@emotion/is-prop-valid").default)}catch{}function qwe(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(Ete(i)||r===!0&&IN(i)||!e&&!IN(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const vM=O.createContext({});function yM(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yA(t){return typeof t=="string"||Array.isArray(t)}const X$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Y$=["initial",...X$];function bM(t){return yM(t.animate)||Y$.some(e=>yA(t[e]))}function Ste(t){return!!(bM(t)||t.variants)}function Hwe(t,e){if(bM(t)){const{initial:r,animate:n}=t;return{initial:r===!1||yA(r)?r:void 0,animate:yA(n)?n:void 0}}return t.inherit!==!1?e:{}}function Wwe(t){const{initial:e,animate:r}=Hwe(t,O.useContext(vM));return O.useMemo(()=>({initial:e,animate:r}),[yz(e),yz(r)])}function yz(t){return Array.isArray(t)?t.join(" "):t}const bA={};function Gwe(t){for(const e in t)bA[e]=t[e],R$(e)&&(bA[e].isCSSVariable=!0)}function Cte(t,{layout:e,layoutId:r}){return Iw.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!bA[t]||t==="opacity")}const Kwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xwe=Mw.length;function Ywe(t,e,r){let n="",i=!0;for(let a=0;a<Xwe;a++){const s=Mw[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=vte(o,W$[s]);if(!l){i=!1;const c=Kwe[s]||s;n+=`${c}(${u}) `}r&&(e[s]=u)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function Q$(t,e,r){const{style:n,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(Iw.has(l)){s=!0;continue}else if(R$(l)){i[l]=u;continue}else{const c=vte(u,W$[l]);l.startsWith("origin")?(o=!0,a[l]=c):n[l]=c}}if(e.transform||(s||r?n.transform=Ywe(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;n.transformOrigin=`${l} ${u} ${c}`}}const Z$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tte(t,e,r){for(const n in e)!Fa(e[n])&&!Cte(n,r)&&(t[n]=e[n])}function Qwe({transformTemplate:t},e){return O.useMemo(()=>{const r=Z$();return Q$(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Zwe(t,e){const r=t.style||{},n={};return Tte(n,r,t),Object.assign(n,Qwe(t,e)),n}function Jwe(t,e){const r={},n=Zwe(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const e1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},t1e={offset:"strokeDashoffset",array:"strokeDasharray"};function r1e(t,e,r=1,n=0,i=!0){t.pathLength=1;const a=i?e1e:t1e;t[a.offset]=bt.transform(-n);const s=bt.transform(e),o=bt.transform(r);t[a.array]=`${s} ${o}`}function Dte(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,u,c){if(Q$(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&r1e(f,i,a,s,!1)}const Nte=()=>({...Z$(),attrs:{}}),Pte=t=>typeof t=="string"&&t.toLowerCase()==="svg";function n1e(t,e,r,n){const i=O.useMemo(()=>{const a=Nte();return Dte(a,e,Pte(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Tte(a,t.style,t),i.style={...a,...i.style}}return i}const i1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function J$(t){return typeof t!="string"||t.includes("-")?!1:!!(i1e.indexOf(t)>-1||/[A-Z]/u.test(t))}function a1e(t,e,r,{latestValues:n},i,a=!1){const o=(J$(t)?n1e:Jwe)(e,n,i,t),l=qwe(e,typeof t=="string",a),u=t!==O.Fragment?{...l,...o,ref:r}:{},{children:c}=e,f=O.useMemo(()=>Fa(c)?c.get():c,[c]);return O.createElement(t,{...u,children:f})}function bz(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function e5(t,e,r,n){if(typeof e=="function"){const[i,a]=bz(n);e=e(r!==void 0?r:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=bz(n);e=e(r!==void 0?r:t.custom,i,a)}return e}function nD(t){return Fa(t)?t.get():t}function s1e({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:o1e(r,n,i,t),renderState:e()}}function o1e(t,e,r,n){const i={},a=n(t,{});for(const h in a)i[h]=nD(a[h]);let{initial:s,animate:o}=t;const l=bM(t),u=Ste(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=r?r.initial===!1:!1;c=c||s===!1;const f=c?o:s;if(f&&typeof f!="boolean"&&!yM(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=e5(t,h[d]);if(p){const{transitionEnd:m,transition:v,...y}=p;for(const w in y){let b=y[w];if(Array.isArray(b)){const _=c?b.length-1:0;b=b[_]}b!==null&&(i[w]=b)}for(const w in m)i[w]=m[w]}}}return i}const Mte=t=>(e,r)=>{const n=O.useContext(vM),i=O.useContext(T$),a=()=>s1e(t,e,n,i);return r?a():V0e(a)};function t5(t,e,r){var a;const{style:n}=t,i={};for(const s in n)(Fa(n[s])||e.style&&Fa(e.style[s])||Cte(s,t)||((a=r==null?void 0:r.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=n[s]);return i}const l1e=Mte({scrapeMotionValuesFromProps:t5,createRenderState:Z$});function Ite(t,e,r){const n=t5(t,e,r);for(const i in t)if(Fa(t[i])||Fa(e[i])){const a=Mw.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}const u1e=Mte({scrapeMotionValuesFromProps:Ite,createRenderState:Nte}),c1e=Symbol.for("motionComponentSymbol");function $y(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function f1e(t,e,r){return O.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):$y(r)&&(r.current=n))},[e])}const r5=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),h1e="framerAppearId",Ote="data-"+r5(h1e),kte=O.createContext({});function d1e(t,e,r,n,i){var m,v;const{visualElement:a}=O.useContext(vM),s=O.useContext(_te),o=O.useContext(T$),l=O.useContext(Ate).reducedMotion,u=O.useRef(null);n=n||s.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=O.useContext(kte);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&p1e(u.current,r,i,f);const h=O.useRef(!1);O.useInsertionEffect(()=>{c&&h.current&&c.update(r,o)});const d=r[Ote],p=O.useRef(!!d&&!((m=window.MotionHandoffIsComplete)!=null&&m.call(window,d))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,d)));return U0e(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),O.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,d)}),p.current=!1),c.enteringChildren=void 0)}),c}function p1e(t,e,r,n){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Rte(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&$y(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function Rte(t){if(t)return t.options.allowProjection!==!1?t.projection:Rte(t.parent)}function xk(t,{forwardMotionProps:e=!1}={},r,n){r&&Vwe(r);const i=J$(t)?u1e:l1e;function a(o,l){let u;const c={...O.useContext(Ate),...o,layoutId:m1e(o)},{isStatic:f}=c,h=Wwe(o),d=i(o,f);if(!f&&C$){g1e();const p=v1e(c);u=p.MeasureLayout,h.visualElement=d1e(t,d,c,n,p.ProjectionNode)}return I.jsxs(vM.Provider,{value:h,children:[u&&h.visualElement?I.jsx(u,{visualElement:h.visualElement,...c}):null,a1e(t,o,f1e(d,h.visualElement,l),d,f,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=O.forwardRef(a);return s[c1e]=t,s}function m1e({layoutId:t}){const e=O.useContext(Iee).id;return e&&t!==void 0?e+"-"+t:t}function g1e(t,e){O.useContext(_te).strict}function v1e(t){const{drag:e,layout:r}=Qb;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function y1e(t,e){if(typeof Proxy>"u")return xk;const r=new Map,n=(a,s)=>xk(a,s,t,e),i=(a,s)=>n(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?n:(r.has(s)||r.set(s,xk(s,void 0,t,e)),r.get(s))})}function Fte({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function b1e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function w1e(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Ak(t){return t===void 0||t===1}function WF({scale:t,scaleX:e,scaleY:r}){return!Ak(t)||!Ak(e)||!Ak(r)}function fm(t){return WF(t)||Lte(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Lte(t){return wz(t.x)||wz(t.y)}function wz(t){return t&&t!=="0%"}function ON(t,e,r){const n=t-r,i=e*n;return r+i}function xz(t,e,r,n,i){return i!==void 0&&(t=ON(t,i,n)),ON(t,r,n)+e}function GF(t,e=0,r=1,n,i){t.min=xz(t.min,e,r,n,i),t.max=xz(t.max,e,r,n,i)}function Bte(t,{x:e,y:r}){GF(t.x,e.translate,e.scale,e.originPoint),GF(t.y,r.translate,r.scale,r.originPoint)}const Az=.999999999999,_z=1.0000000000001;function x1e(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=r[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Vy(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Bte(t,s)),n&&fm(a.latestValues)&&Vy(t,a.latestValues))}e.x<_z&&e.x>Az&&(e.x=1),e.y<_z&&e.y>Az&&(e.y=1)}function jy(t,e){t.min=t.min+e,t.max=t.max+e}function Ez(t,e,r,n,i=.5){const a=dn(t.min,t.max,i);GF(t,e,r,a,n)}function Vy(t,e){Ez(t.x,e.x,e.scaleX,e.scale,e.originX),Ez(t.y,e.y,e.scaleY,e.scale,e.originY)}function $te(t,e){return Fte(w1e(t.getBoundingClientRect(),e))}function A1e(t,e,r){const n=$te(t,r),{scroll:i}=e;return i&&(jy(n.x,i.offset.x),jy(n.y,i.offset.y)),n}const Sz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uy=()=>({x:Sz(),y:Sz()}),Cz=()=>({min:0,max:0}),Ln=()=>({x:Cz(),y:Cz()}),KF={current:null},jte={current:!1};function _1e(){if(jte.current=!0,!!C$)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>KF.current=t.matches;t.addEventListener("change",e),e()}else KF.current=!1}const E1e=new WeakMap;function S1e(t,e,r){for(const n in e){const i=e[n],a=r[n];if(Fa(i))t.addValue(n,i);else if(Fa(a))t.addValue(n,Yb(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const s=t.getValue(n);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(n);t.addValue(n,Yb(s!==void 0?s:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const Tz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C1e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=q$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ks.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,sn.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=bM(r),this.isVariantNode=Ste(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Fa(d)&&d.set(l[h])}}mount(e){var r;this.current=e,E1e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),jte.current||_1e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:KF.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),hp(this.notifyUpdate),hp(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Iw.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&sn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qb){const r=Qb[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Tz.length;n++){const i=Tz[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=S1e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Yb(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Oee(n)||Ree(n))?n=parseFloat(n):!$we(n)&&dp.test(r)&&(n=gte(e,r)),this.setBaseTarget(e,Fa(n)?n.get():n)),Fa(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=e5(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);s&&(n=s[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Fa(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new I$),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){G$.render(this.render)}}class Vte extends C1e{constructor(){super(...arguments),this.KeyframeResolver=Cwe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fa(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Ute(t,{style:e,vars:r},n,i){const a=t.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,n);for(s in r)a.setProperty(s,r[s])}function T1e(t){return window.getComputedStyle(t)}class D1e extends Vte{constructor(){super(...arguments),this.type="html",this.renderInstance=Ute}readValueFromInstance(e,r){var n;if(Iw.has(r))return(n=this.projection)!=null&&n.isProjecting?$F(r):Hbe(e,r);{const i=T1e(e),a=(R$(r)?i.getPropertyValue(r):i[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return $te(e,r)}build(e,r,n){Q$(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return t5(e,r,n)}}const zte=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function N1e(t,e,r,n){Ute(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(zte.has(i)?i:r5(i),e.attrs[i])}class P1e extends Vte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ln}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Iw.has(r)){const n=mte(r);return n&&n.default||0}return r=zte.has(r)?r:r5(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Ite(e,r,n)}build(e,r,n){Dte(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){N1e(e,r,n,i)}mount(e){this.isSVGTag=Pte(e.tagName),super.mount(e)}}const M1e=(t,e)=>J$(t)?new P1e(e):new D1e(e,{allowProjection:t!==O.Fragment});function o0(t,e,r){const n=t.getProps();return e5(n,e,r!==void 0?r:n.custom,t)}const XF=t=>Array.isArray(t);function I1e(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Yb(r))}function O1e(t){return XF(t)?t[t.length-1]||0:t}function k1e(t,e){const r=o0(t,e);let{transitionEnd:n={},transition:i={},...a}=r||{};a={...a,...n};for(const s in a){const o=O1e(a[s]);I1e(t,s,o)}}function R1e(t){return!!(Fa(t)&&t.add)}function YF(t,e){const r=t.getValue("willChange");if(R1e(r))return r.add(e);if(!r&&Qf.WillChange){const n=new Qf.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function qte(t){return t.props[Ote]}const F1e=t=>t!==null;function L1e(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(F1e),a=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[a]}const B1e={type:"spring",stiffness:500,damping:25,restSpeed:10},$1e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j1e={type:"keyframes",duration:.8},V1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},U1e=(t,{keyframes:e})=>e.length>2?j1e:Iw.has(t)?t.startsWith("scale")?$1e(e[1]):B1e:V1e;function z1e({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const n5=(t,e,r,n={},i,a)=>s=>{const o=H$(n,t)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-lc(l);const c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};z1e(o)||Object.assign(c,U1e(t,c)),c.duration&&(c.duration=lc(c.duration)),c.repeatDelay&&(c.repeatDelay=lc(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(qF(c),c.delay===0&&(f=!0)),(Qf.instantAnimations||Qf.skipAnimations)&&(f=!0,qF(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,f&&!a&&e.get()!==void 0){const h=L1e(c.keyframes,o);if(h!==void 0){sn.update(()=>{c.onUpdate(h),c.onComplete()});return}}return o.isSync?new z$(c):new pwe(c)};function q1e({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Hte(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;n&&(a=n);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in o){const f=t.getValue(c,t.latestValues[c]??null),h=o[c];if(h===void 0||u&&q1e(u,c))continue;const d={delay:r,...H$(a||{},c)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!d.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const y=qte(t);if(y){const w=window.MotionHandoffAnimation(y,c,sn);w!==null&&(d.startTime=w,m=!0)}}YF(t,c),f.start(n5(c,f,h,t.shouldReduceMotion&&hte.has(c)?{type:!1}:d,t,m));const v=f.animation;v&&l.push(v)}return s&&Promise.all(l).then(()=>{sn.update(()=>{s&&k1e(t,s)})}),l}function Wte(t,e,r,n=0,i=1){const a=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),s=t.size,o=(s-1)*n;return typeof r=="function"?r(a,s):i===1?a*n:o-a*n}function QF(t,e,r={}){var l;const n=o0(t,e,r.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(Hte(t,n,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=i;return H1e(t,e,u,c,f,h,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>c())}else return Promise.all([a(),s(r.delay)])}function H1e(t,e,r=0,n=0,i=0,a=1,s){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(QF(l,e,{...s,delay:r+(typeof n=="function"?0:n)+Wte(t.variantChildren,l,n,i,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function W1e(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>QF(t,a,r));n=Promise.all(i)}else if(typeof e=="string")n=QF(t,e,r);else{const i=typeof e=="function"?o0(t,e,r.custom):e;n=Promise.all(Hte(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Gte(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const G1e=Y$.length;function Kte(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Kte(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<G1e;r++){const n=Y$[r],i=t.props[n];(yA(i)||i===!1)&&(e[n]=i)}return e}const K1e=[...X$].reverse(),X1e=X$.length;function Y1e(t){return e=>Promise.all(e.map(({animation:r,options:n})=>W1e(t,r,n)))}function Q1e(t){let e=Y1e(t),r=Dz(),n=!0;const i=l=>(u,c)=>{var h;const f=o0(t,c,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:p,...m}=f;u={...u,...m,...p}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,c=Kte(t.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let v=0;v<X1e;v++){const y=K1e[v],w=r[y],b=u[y]!==void 0?u[y]:c[y],_=yA(b),x=y===l?w.isActive:null;x===!1&&(p=v);let A=b===c[y]&&b!==u[y]&&_;if(A&&n&&t.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...d},!w.isActive&&x===null||!b&&!w.prevProp||yM(b)||typeof b=="boolean")continue;const E=Z1e(w.prevProp,b);let S=E||y===l&&w.isActive&&!A&&_||v>p&&_,C=!1;const D=Array.isArray(b)?b:[b];let N=D.reduce(i(y),{});x===!1&&(N={});const{prevResolvedValues:P={}}=w,M={...P,...N},j=V=>{S=!0,h.has(V)&&(C=!0,h.delete(V)),w.needsAnimating[V]=!0;const q=t.getValue(V);q&&(q.liveStyle=!1)};for(const V in M){const q=N[V],H=P[V];if(d.hasOwnProperty(V))continue;let ee=!1;XF(q)&&XF(H)?ee=!Gte(q,H):ee=q!==H,ee?q!=null?j(V):h.add(V):q!==void 0&&h.has(V)?j(V):w.protectedKeys[V]=!0}w.prevProp=b,w.prevResolvedValues=N,w.isActive&&(d={...d,...N}),n&&t.blockInitialAnimation&&(S=!1);const K=A&&E;S&&(!K||C)&&f.push(...D.map(V=>{const q={type:y};if(typeof V=="string"&&n&&!K&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,ee=o0(H,V);if(H.enteringChildren&&ee){const{delayChildren:le}=ee.transition||{};q.delay=Wte(H.enteringChildren,t,le)}}return{animation:V,options:q}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const y=o0(t,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(v.transition=y.transition)}h.forEach(y=>{const w=t.getBaseTarget(y),b=t.getValue(y);b&&(b.liveStyle=!0),v[y]=w??null}),f.push({animation:v})}let m=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(f):Promise.resolve()}function o(l,u){var f;if(r[l].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var d;return(d=h.animationState)==null?void 0:d.setActive(l,u)}),r[l].isActive=u;const c=s(l);for(const h in r)r[h].protectedKeys={};return c}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=Dz()}}}function Z1e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Gte(e,t):!1}function lm(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dz(){return{animate:lm(!0),whileInView:lm(),whileHover:lm(),whileTap:lm(),whileDrag:lm(),whileFocus:lm(),exit:lm()}}class Fp{constructor(e){this.isMounted=!1,this.node=e}update(){}}class J1e extends Fp{constructor(e){super(e),e.animationState||(e.animationState=Q1e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let exe=0;class txe extends Fp{constructor(){super(...arguments),this.id=exe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const rxe={animation:{Feature:J1e},exit:{Feature:txe}};function wA(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function tS(t){return{point:{x:t.pageX,y:t.pageY}}}const nxe=t=>e=>K$(e)&&t(e,tS(e));function Bx(t,e,r,n){return wA(t,e,nxe(r),n)}const Xte=1e-4,ixe=1-Xte,axe=1+Xte,Yte=.01,sxe=0-Yte,oxe=0+Yte;function rs(t){return t.max-t.min}function lxe(t,e,r){return Math.abs(t-e)<=r}function Nz(t,e,r,n=.5){t.origin=n,t.originPoint=dn(e.min,e.max,t.origin),t.scale=rs(r)/rs(e),t.translate=dn(r.min,r.max,t.origin)-t.originPoint,(t.scale>=ixe&&t.scale<=axe||isNaN(t.scale))&&(t.scale=1),(t.translate>=sxe&&t.translate<=oxe||isNaN(t.translate))&&(t.translate=0)}function $x(t,e,r,n){Nz(t.x,e.x,r.x,n?n.originX:void 0),Nz(t.y,e.y,r.y,n?n.originY:void 0)}function Pz(t,e,r){t.min=r.min+e.min,t.max=t.min+rs(e)}function uxe(t,e,r){Pz(t.x,e.x,r.x),Pz(t.y,e.y,r.y)}function Mz(t,e,r){t.min=e.min-r.min,t.max=t.min+rs(e)}function jx(t,e,r){Mz(t.x,e.x,r.x),Mz(t.y,e.y,r.y)}function zo(t){return[t("x"),t("y")]}const Qte=({current:t})=>t?t.ownerDocument.defaultView:null,Iz=(t,e)=>Math.abs(t-e);function cxe(t,e){const r=Iz(t.x,e.x),n=Iz(t.y,e.y);return Math.sqrt(r**2+n**2)}class Zte{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ek(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,p=cxe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!d&&!p)return;const{point:m}=h,{timestamp:v}=na;this.history.push({...m,timestamp:v});const{onStart:y,onMove:w}=this.handlers;d||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=_k(d,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Ek(h.type==="pointercancel"?this.lastMoveEventInfo:_k(d,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,y),m&&m(h,y)},!K$(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=i||window;const o=tS(e),l=_k(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=na;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=r;f&&f(e,Ek(l,this.history)),this.removeListeners=ZE(Bx(this.contextWindow,"pointermove",this.handlePointerMove),Bx(this.contextWindow,"pointerup",this.handlePointerUp),Bx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hp(this.updatePoint)}}function _k(t,e){return e?{point:e(t.point)}:t}function Oz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ek({point:t},e){return{point:t,delta:Oz(t,Jte(e)),offset:Oz(t,fxe(e)),velocity:hxe(e,.1)}}function fxe(t){return t[0]}function Jte(t){return t[t.length-1]}function hxe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=Jte(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>lc(e)));)r--;if(!n)return{x:0,y:0};const a=fl(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function dxe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?dn(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?dn(r,t,n.max):Math.min(t,r)),t}function kz(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function pxe(t,{top:e,left:r,bottom:n,right:i}){return{x:kz(t.x,r,i),y:kz(t.y,e,n)}}function Rz(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function mxe(t,e){return{x:Rz(t.x,e.x),y:Rz(t.y,e.y)}}function gxe(t,e){let r=.5;const n=rs(t),i=rs(e);return i>n?r=mA(e.min,e.max-n,t.min):n>i&&(r=mA(t.min,t.max-i,e.min)),Yf(0,1,r)}function vxe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const ZF=.35;function yxe(t=ZF){return t===!1?t=0:t===!0&&(t=ZF),{x:Fz(t,"left","right"),y:Fz(t,"top","bottom")}}function Fz(t,e,r){return{min:Lz(t,e),max:Lz(t,r)}}function Lz(t,e){return typeof t=="number"?t:t[e]||0}const bxe=new WeakMap;class wxe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(tS(f).point)},s=(f,h)=>{const{drag:d,dragPropagation:p,onDragStart:m}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Mwe(d),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zo(y=>{let w=this.getAxisMotionValue(y).get()||0;if(uc.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[y];_&&(w=rs(_)*(parseFloat(w)/100))}}this.originPoint[y]=w}),m&&sn.postRender(()=>m(f,h)),YF(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:y}=h;if(p&&this.currentDirection===null){this.currentDirection=xxe(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>zo(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Zte(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:Qte(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&sn.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!zC(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=dxe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&$y(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=pxe(n.layoutBox,e):this.constraints=!1,this.elastic=yxe(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&zo(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=vxe(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!$y(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=A1e(n,i.root,this.visualElement.getTransformPagePoint());let s=mxe(i.layout.layoutBox,a);if(r){const o=r(b1e(s));this.hasMutatedConstraints=!!o,o&&(s=Fte(o))}return s}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=zo(c=>{if(!zC(c,r,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return YF(this.visualElement,e),n.start(n5(e,n,0,r,this.visualElement,!1))}stopAnimation(){zo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zo(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){zo(r=>{const{drag:n}=this.getProps();if(!zC(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[r];a.set(e[r]-dn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!$y(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zo(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=gxe({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),zo(s=>{if(!zC(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(dn(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;bxe.set(this.visualElement,this);const e=this.visualElement.current,r=Bx(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();$y(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),sn.read(n);const s=wA(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(zo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),r(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=ZF,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function zC(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function xxe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Axe extends Fp{constructor(e){super(e),this.removeGroupControls=pl,this.removeListeners=pl,this.controls=new wxe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pl}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bz=t=>(e,r)=>{t&&sn.postRender(()=>t(e,r))};class _xe extends Fp{constructor(){super(...arguments),this.removePointerDownListener=pl}onPointerDown(e){this.session=new Zte(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qte(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bz(e),onStart:Bz(r),onMove:n,onEnd:(a,s)=>{delete this.session,i&&sn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Bx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const iD={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $z(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const D1={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const r=$z(t,e.target.x),n=$z(t,e.target.y);return`${r}% ${n}%`}},Exe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=dp.parse(t);if(i.length>5)return n;const a=dp.createTransformer(t),s=typeof i[0]!="number"?1:0,o=r.x.scale*e.x,l=r.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=dn(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let Sk=!1;class Sxe extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;Gwe(Cxe),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),Sk&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),iD.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,{projection:s}=n;return s&&(s.isPresent=a,Sk=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||sn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),G$.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;Sk=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ere(t){const[e,r]=jwe(),n=O.useContext(Iee);return I.jsx(Sxe,{...t,layoutGroup:n,switchLayoutGroup:O.useContext(kte),isPresent:e,safeToRemove:r})}const Cxe={borderRadius:{...D1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:D1,borderTopRightRadius:D1,borderBottomLeftRadius:D1,borderBottomRightRadius:D1,boxShadow:Exe};function Txe(t,e,r){const n=Fa(t)?t:Yb(t);return n.start(n5("",n,e,r)),n.animation}const Dxe=(t,e)=>t.depth-e.depth;class Nxe{constructor(){this.children=[],this.isDirty=!1}add(e){D$(this.children,e),this.isDirty=!0}remove(e){N$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Dxe),this.isDirty=!1,this.children.forEach(e)}}function Pxe(t,e){const r=ks.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(hp(n),t(a-e))};return sn.setup(n,!0),()=>hp(n)}const tre=["TopLeft","TopRight","BottomLeft","BottomRight"],Mxe=tre.length,jz=t=>typeof t=="string"?parseFloat(t):t,Vz=t=>typeof t=="number"||bt.test(t);function Ixe(t,e,r,n,i,a){i?(t.opacity=dn(0,r.opacity??1,Oxe(n)),t.opacityExit=dn(e.opacity??1,0,kxe(n))):a&&(t.opacity=dn(e.opacity??1,r.opacity??1,n));for(let s=0;s<Mxe;s++){const o=`border${tre[s]}Radius`;let l=Uz(e,o),u=Uz(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Vz(l)===Vz(u)?(t[o]=Math.max(dn(jz(l),jz(u),n),0),(uc.test(u)||uc.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||r.rotate)&&(t.rotate=dn(e.rotate||0,r.rotate||0,n))}function Uz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Oxe=rre(0,.5,zee),kxe=rre(.5,.95,pl);function rre(t,e,r){return n=>n<t?0:n>e?1:r(mA(t,e,n))}function zz(t,e){t.min=e.min,t.max=e.max}function Ro(t,e){zz(t.x,e.x),zz(t.y,e.y)}function qz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Hz(t,e,r,n,i){return t-=e,t=ON(t,1/r,n),i!==void 0&&(t=ON(t,1/i,n)),t}function Rxe(t,e=0,r=1,n=.5,i,a=t,s=t){if(uc.test(e)&&(e=parseFloat(e),e=dn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=dn(a.min,a.max,n);t===a&&(o-=e),t.min=Hz(t.min,e,r,o,i),t.max=Hz(t.max,e,r,o,i)}function Wz(t,e,[r,n,i],a,s){Rxe(t,e[r],e[n],e[i],e.scale,a,s)}const Fxe=["x","scaleX","originX"],Lxe=["y","scaleY","originY"];function Gz(t,e,r,n){Wz(t.x,e,Fxe,r?r.x:void 0,n?n.x:void 0),Wz(t.y,e,Lxe,r?r.y:void 0,n?n.y:void 0)}function Kz(t){return t.translate===0&&t.scale===1}function nre(t){return Kz(t.x)&&Kz(t.y)}function Xz(t,e){return t.min===e.min&&t.max===e.max}function Bxe(t,e){return Xz(t.x,e.x)&&Xz(t.y,e.y)}function Yz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ire(t,e){return Yz(t.x,e.x)&&Yz(t.y,e.y)}function Qz(t){return rs(t.x)/rs(t.y)}function Zz(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $xe{constructor(){this.members=[]}add(e){D$(this.members,e),e.scheduleRender()}remove(e){if(N$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jxe(t,e,r){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(r==null?void 0:r.z)||0;if((i||a||s)&&(n=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:d,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),d&&(n+=`skewX(${d}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Ck=["","X","Y","Z"],Vxe=1e3;let Uxe=0;function Tk(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function are(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=qte(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",sn,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&are(n)}function sre({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=Uxe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Hxe),this.nodes.forEach(Xxe),this.nodes.forEach(Yxe),this.nodes.forEach(Wxe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Nxe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new I$),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=xte(s)&&!Lwe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let c,f=0;const h=()=>this.root.updateBlockedByResize=!1;sn.read(()=>{f=window.innerWidth}),t(s,()=>{const d=window.innerWidth;d!==f&&(f=d,this.root.updateBlockedByResize=!0,c&&c(),c=Pxe(h,250),iD.hasAnimatedSinceResize&&(iD.hasAnimatedSinceResize=!1,this.nodes.forEach(t9)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||tAe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!ire(this.targetLayout,d),w=!f&&h;if(this.options.layoutRoot||this.resumeFrom||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...H$(p,"layout"),onPlay:m,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,w)}else f||t9(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qxe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&are(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(e9);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Kxe),this.nodes.forEach(zxe),this.nodes.forEach(qxe)):this.nodes.forEach(e9),this.clearAllSnapshots();const o=ks.now();na.delta=Yf(0,1e3/60,o-na.timestamp),na.timestamp=o,na.isProcessing=!0,mk.update.process(na),mk.preRender.process(na),mk.render.process(na),na.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G$.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gxe),this.sharedNodes.forEach(Zxe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rs(this.snapshot.measuredBox.x)&&!rs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!nre(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||fm(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),rAe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Ln();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(nAe))){const{scroll:c}=this.root;c&&(jy(o.x,c.offset.x),jy(o.y,c.offset.y))}return o}removeElementScroll(s){var l;const o=Ln();if(Ro(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ro(o,s),jy(o.x,f.offset.x),jy(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const l=Ln();Ro(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Vy(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),fm(c.latestValues)&&Vy(l,c.latestValues)}return fm(this.latestValues)&&Vy(l,this.latestValues),l}removeTransform(s){const o=Ln();Ro(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!fm(u.latestValues))continue;WF(u.latestValues)&&u.updateSnapshot();const c=Ln(),f=u.measurePageBox();Ro(c,f),Gz(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return fm(this.latestValues)&&Gz(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==na.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=na.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),jx(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uxe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ro(this.target,this.layout.layoutBox),Bte(this.target,this.targetDelta)):Ro(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),jx(this.relativeTargetOrigin,this.target,d.target),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||WF(this.parent.latestValues)||Lte(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===na.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ro(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;x1e(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Ln());const{target:d}=s;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qz(this.prevProjectionDelta.x,this.projectionDelta.x),qz(this.prevProjectionDelta.y,this.projectionDelta.y)),$x(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Zz(this.projectionDelta.x,this.prevProjectionDelta.x)||!Zz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uy(),this.projectionDelta=Uy(),this.projectionDeltaWithTransform=Uy()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Uy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ln(),d=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,v=this.getStack(),y=!v||v.members.length<=1,w=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(eAe));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const x=_/1e3;r9(f.x,s.x,x),r9(f.y,s.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Jxe(this.relativeTarget,this.relativeTargetOrigin,h,x),b&&Bxe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ln()),Ro(b,this.relativeTarget)),m&&(this.animationValues=c,Ixe(c,u,this.latestValues,x,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(hp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{iD.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yb(0)),this.currentAnimation=Txe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vxe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&ore(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ln();const f=rs(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const h=rs(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}Ro(o,l),Vy(o,c),$x(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new $xe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Tk("z",s,u,this.animationValues);for(let c=0;c<Ck.length;c++)Tk(`rotate${Ck[c]}`,s,u,this.animationValues),Tk(`skew${Ck[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=nD(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=nD(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!fm(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=jxe(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),s.transform=f;const{x:h,y:d}=this.projectionDelta;s.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,u.animationValues?s.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:s.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in bA){if(c[p]===void 0)continue;const{correct:m,applyTo:v,isCSSVariable:y}=bA[p],w=f==="none"?c[p]:m(c[p],u);if(v){const b=v.length;for(let _=0;_<b;_++)s[v[_]]=w}else y?this.options.visualElement.renderState.vars[p]=w:s[p]=w}this.options.layoutId&&(s.pointerEvents=u===this?nD(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Jz),this.root.sharedNodes.clear()}}}function zxe(t){t.updateLayout()}function qxe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?zo(f=>{const h=s?e.measuredBox[f]:e.layoutBox[f],d=rs(h);h.min=n[f].min,h.max=h.min+d}):ore(a,e.layoutBox,n)&&zo(f=>{const h=s?e.measuredBox[f]:e.layoutBox[f],d=rs(n[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const o=Uy();$x(o,n,e.layoutBox);const l=Uy();s?$x(l,t.applyTransform(i,!0),e.measuredBox):$x(l,n,e.layoutBox);const u=!nre(o);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const p=Ln();jx(p,e.layoutBox,h.layoutBox);const m=Ln();jx(m,n,d.layoutBox),ire(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Hxe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Wxe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Gxe(t){t.clearSnapshot()}function Jz(t){t.clearMeasurements()}function e9(t){t.isLayoutDirty=!1}function Kxe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function t9(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Xxe(t){t.resolveTargetDelta()}function Yxe(t){t.calcProjection()}function Qxe(t){t.resetSkewAndRotation()}function Zxe(t){t.removeLeadSnapshot()}function r9(t,e,r){t.translate=dn(e.translate,0,r),t.scale=dn(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function n9(t,e,r,n){t.min=dn(e.min,r.min,n),t.max=dn(e.max,r.max,n)}function Jxe(t,e,r,n){n9(t.x,e.x,r.x,n),n9(t.y,e.y,r.y,n)}function eAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tAe={duration:.45,ease:[.4,0,.1,1]},i9=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),a9=i9("applewebkit/")&&!i9("chrome/")?Math.round:pl;function s9(t){t.min=a9(t.min),t.max=a9(t.max)}function rAe(t){s9(t.x),s9(t.y)}function ore(t,e,r){return t==="position"||t==="preserve-aspect"&&!lxe(Qz(e),Qz(r),.2)}function nAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const iAe=sre({attachResizeListener:(t,e)=>wA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dk={current:void 0},lre=sre({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dk.current){const t=new iAe({});t.mount(window),t.setOptions({layoutScroll:!0}),Dk.current=t}return Dk.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),aAe={pan:{Feature:_xe},drag:{Feature:Axe,ProjectionNode:lre,MeasureLayout:ere}};function o9(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&sn.postRender(()=>a(e,tS(e)))}class sAe extends Fp{mount(){const{current:e}=this.node;e&&(this.unmount=Iwe(e,(r,n)=>(o9(this.node,n,"Start"),i=>o9(this.node,i,"End"))))}unmount(){}}class oAe extends Fp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ZE(wA(this.node.current,"focus",()=>this.onFocus()),wA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function l9(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&sn.postRender(()=>a(e,tS(e)))}class lAe extends Fp{mount(){const{current:e}=this.node;e&&(this.unmount=Fwe(e,(r,n)=>(l9(this.node,n,"Start"),(i,{success:a})=>l9(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const JF=new WeakMap,Nk=new WeakMap,uAe=t=>{const e=JF.get(t.target);e&&e(t)},cAe=t=>{t.forEach(uAe)};function fAe({root:t,...e}){const r=t||document;Nk.has(r)||Nk.set(r,{});const n=Nk.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(cAe,{root:t,...e})),n[i]}function hAe(t,e,r){const n=fAe(e);return JF.set(t,r),n.observe(t),()=>{JF.delete(t),n.unobserve(t)}}const dAe={some:0,all:1};class pAe extends Fp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:dAe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return hAe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(mAe(e,r))&&this.startObserver()}unmount(){}}function mAe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const gAe={inView:{Feature:pAe},tap:{Feature:lAe},focus:{Feature:oAe},hover:{Feature:sAe}},vAe={layout:{ProjectionNode:lre,MeasureLayout:ere}},yAe={...rxe,...gAe,...aAe,...vAe},We=y1e(yAe,M1e),i5=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],u9=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],bAe=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],hy=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],Pk={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},aD={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},sD={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function wAe(){const{isDark:t}=Cl(),e=i5.slice(0,3);return O.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const n={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(n)),console.log("   : test@example.com / Test1234")}},[]),I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[I.jsx(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:I.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),I.jsx(We.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Fr,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Fr,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),I.jsx(We.section,{variants:aD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((r,n)=>I.jsxs(We.div,{variants:sD,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[I.jsx("div",{className:"text-4xl mb-3",children:r.icon}),I.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:r.title}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:r.description})]},n))}),I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[I.jsx(We.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),I.jsx(We.div,{variants:aD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(r=>I.jsx(We.div,{variants:sD,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:I.jsxs(Fr,{to:`/concepts/${r.slug}`,children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:r.title}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:r.description})]})},r.slug))})]}),I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[I.jsx(We.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),I.jsx(We.div,{variants:aD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:bAe.map(r=>I.jsxs(We.div,{variants:sD,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[I.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:r.title}),I.jsxs("p",{className:`text-xs sm:text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[r.authors," (",r.year,")"]})]}),I.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${t?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:r.year})]}),I.jsx("p",{className:`text-xs sm:text-sm mt-3 ${t?"text-gray-300":"text-gray-600"}`,children:r.abstract})]},r.id))}),I.jsx(We.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:I.jsx(We.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:I.jsx(Fr,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function xAe(){const{isDark:t}=Cl(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},r={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return I.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([n,i],a)=>{const s=i5.filter(o=>o.category===n);return s.length===0?null:I.jsxs(We.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[I.jsx(We.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:I.jsx("div",{className:`inline-block bg-gradient-to-r ${r[n]} p-0.5 rounded-lg`,children:I.jsx("div",{className:`px-4 py-2 rounded-md ${t?"bg-gray-900":"bg-white"}`,children:I.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${r[n]} bg-clip-text text-transparent`,children:i})})})}),I.jsx(We.div,{variants:aD,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:s.map((o,l)=>I.jsxs(We.div,{variants:sD,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${t?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[I.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r[n]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),I.jsxs(Fr,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[I.jsx("div",{className:"mb-4",children:I.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${t?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),I.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),I.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:o.description}),I.jsxs("div",{className:`text-xs space-y-1 ${t?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((u,c)=>I.jsxs("div",{className:"flex items-start gap-2",children:[I.jsx("span",{className:"text-blue-400",children:""}),I.jsx("span",{className:"line-clamp-1",children:u})]},c)),o.content.keyPoints.length>2&&I.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},n)})]})}function AAe({tex:t,display:e=!1}){return O.useEffect(()=>{if(window.katex)try{window.katex.render(t,document.getElementById(`math-${t}`),{displayMode:e,throwOnError:!1})}catch(r){console.error("KaTeX error:",r)}},[t,e]),I.jsx("div",{id:`math-${t}`,className:"inline-block"})}function _Ae(){const{slug:t}=Eee(),e=i5.find(n=>n.slug===t);if(!e)return I.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:r}=e;return I.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),I.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:r.overview})]}),I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("ul",{className:"space-y-2",children:r.keyPoints.map((n,i)=>I.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[I.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),I.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n})]},i))})]}),r.keyFormulas&&r.keyFormulas.length>0&&I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("div",{className:"space-y-4",children:r.keyFormulas.map((n,i)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[I.jsx(AAe,{tex:n.tex}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:n.desc})]},i))})]}),I.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:r.observations})]}),r.relatedPapers&&r.relatedPapers.length>0&&I.jsxs("section",{className:"px-4 sm:px-0",children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("ul",{className:"space-y-2",children:r.relatedPapers.map((n,i)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:n},i))})]})]})}const EAe=()=>{};var c9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},SAe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},cre={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=a>>2,f=(a&3)<<4|o>>4;let h=(o&15)<<2|u>>6,d=u&63;l||(d=64,s||(h=64)),n.push(r[c],r[f],r[h],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ure(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||f==null)throw new CAe;const h=a<<2|o>>4;if(n.push(h),u!==64){const d=o<<4&240|u>>2;if(n.push(d),f!==64){const p=u<<6&192|f;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TAe=function(t){const e=ure(t);return cre.encodeByteArray(e,!0)},kN=function(t){return TAe(t).replace(/\./g,"")},fre=function(t){try{return cre.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NAe=()=>DAe().__FIREBASE_DEFAULTS__,PAe=()=>{if(typeof process>"u"||typeof c9>"u")return;const t=c9.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fre(t[1]);return e&&JSON.parse(e)},wM=()=>{try{return EAe()||NAe()||PAe()||MAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hre=t=>{var e,r;return(r=(e=wM())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},dre=t=>{const e=hre(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},pre=()=>{var t;return(t=wM())==null?void 0:t.config},mre=t=>{var e;return(e=wM())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function a5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kN(JSON.stringify(r)),kN(JSON.stringify(s)),""].join(".")}const Vx={};function OAe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vx))Vx[e]?t.emulator.push(e):t.prod.push(e);return t}function kAe(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let f9=!1;function s5(t,e){if(typeof window>"u"||typeof document>"u"||!Iv(window.location.host)||Vx[t]===e||Vx[t]||f9)return;Vx[t]=e;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",a=OAe().prod.length>0;function s(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,d){h.setAttribute("width","24"),h.setAttribute("id",d),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{f9=!0,s()},h}function c(h,d){h.setAttribute("id",d),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=kAe(n),d=r("text"),p=document.getElementById(d)||document.createElement("span"),m=r("learnmore"),v=document.getElementById(m)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const b=h.element;o(b),c(v,m);const _=u();l(w,y),b.append(w,p,v,_),document.body.appendChild(b)}a?(p.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ja())}function FAe(){var e;const t=(e=wM())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BAe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $Ae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jAe(){const t=ja();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VAe(){return!FAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UAe(){try{return typeof indexedDB=="object"}catch{return!1}}function zAe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qAe="FirebaseError";class Tc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=qAe,Object.setPrototypeOf(this,Tc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rS.prototype.create)}}class rS{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?HAe(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Tc(i,o,n)}}function HAe(t,e){return t.replace(WAe,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const WAe=/\{\$([^}]+)}/g;function GAe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dv(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(h9(a)&&h9(s)){if(!dv(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function h9(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Y1(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Q1(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function KAe(t,e){const r=new XAe(t,e);return r.subscribe.bind(r)}class XAe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");YAe(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Mk),i.error===void 0&&(i.error=Mk),i.complete===void 0&&(i.complete=Mk);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YAe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Mk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){return t&&t._delegate?t._delegate:t}class pp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QAe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new IAe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JAe(e))try{this.getOrInitializeService({instanceIdentifier:hm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=hm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hm){return this.instances.has(e)}getOptions(e=hm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ZAe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=hm){return this.component?this.component.multipleInstances?e:hm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZAe(t){return t===hm?void 0:t}function JAe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new QAe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const t_e={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},r_e=Kt.INFO,n_e={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},i_e=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=n_e[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o5{constructor(e){this.name=e,this._logLevel=r_e,this._logHandler=i_e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t_e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const a_e=(t,e)=>e.some(r=>t instanceof r);let d9,p9;function s_e(){return d9||(d9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o_e(){return p9||(p9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vre=new WeakMap,e3=new WeakMap,yre=new WeakMap,Ik=new WeakMap,l5=new WeakMap;function l_e(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(np(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&vre.set(r,t)}).catch(()=>{}),l5.set(e,t),e}function u_e(t){if(e3.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});e3.set(t,e)}let t3={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return e3.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yre.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return np(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function c_e(t){t3=t(t3)}function f_e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ok(this),e,...r);return yre.set(n,e.sort?e.sort():[e]),np(n)}:o_e().includes(t)?function(...e){return t.apply(Ok(this),e),np(vre.get(this))}:function(...e){return np(t.apply(Ok(this),e))}}function h_e(t){return typeof t=="function"?f_e(t):(t instanceof IDBTransaction&&u_e(t),a_e(t,s_e())?new Proxy(t,t3):t)}function np(t){if(t instanceof IDBRequest)return l_e(t);if(Ik.has(t))return Ik.get(t);const e=h_e(t);return e!==t&&(Ik.set(t,e),l5.set(e,t)),e}const Ok=t=>l5.get(t);function d_e(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=np(s);return n&&s.addEventListener("upgradeneeded",l=>{n(np(s.result),l.oldVersion,l.newVersion,np(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const p_e=["get","getKey","getAll","getAllKeys","count"],m_e=["put","add","delete","clear"],kk=new Map;function m9(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kk.get(e))return kk.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=m_e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||p_e.includes(r)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),i&&l.done]))[0]};return kk.set(e,a),a}c_e(t=>({...t,get:(e,r,n)=>m9(e,r)||t.get(e,r,n),has:(e,r)=>!!m9(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(v_e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function v_e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r3="@firebase/app",g9="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new o5("@firebase/app"),y_e="@firebase/app-compat",b_e="@firebase/analytics-compat",w_e="@firebase/analytics",x_e="@firebase/app-check-compat",A_e="@firebase/app-check",__e="@firebase/auth",E_e="@firebase/auth-compat",S_e="@firebase/database",C_e="@firebase/data-connect",T_e="@firebase/database-compat",D_e="@firebase/functions",N_e="@firebase/functions-compat",P_e="@firebase/installations",M_e="@firebase/installations-compat",I_e="@firebase/messaging",O_e="@firebase/messaging-compat",k_e="@firebase/performance",R_e="@firebase/performance-compat",F_e="@firebase/remote-config",L_e="@firebase/remote-config-compat",B_e="@firebase/storage",$_e="@firebase/storage-compat",j_e="@firebase/firestore",V_e="@firebase/ai",U_e="@firebase/firestore-compat",z_e="firebase",q_e="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="[DEFAULT]",H_e={[r3]:"fire-core",[y_e]:"fire-core-compat",[w_e]:"fire-analytics",[b_e]:"fire-analytics-compat",[A_e]:"fire-app-check",[x_e]:"fire-app-check-compat",[__e]:"fire-auth",[E_e]:"fire-auth-compat",[S_e]:"fire-rtdb",[C_e]:"fire-data-connect",[T_e]:"fire-rtdb-compat",[D_e]:"fire-fn",[N_e]:"fire-fn-compat",[P_e]:"fire-iid",[M_e]:"fire-iid-compat",[I_e]:"fire-fcm",[O_e]:"fire-fcm-compat",[k_e]:"fire-perf",[R_e]:"fire-perf-compat",[F_e]:"fire-rc",[L_e]:"fire-rc-compat",[B_e]:"fire-gcs",[$_e]:"fire-gcs-compat",[j_e]:"fire-fst",[U_e]:"fire-fst-compat",[V_e]:"fire-vertex","fire-js":"fire-js",[z_e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new Map,W_e=new Map,i3=new Map;function v9(t,e){try{t.container.addComponent(e)}catch(r){Zf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function pv(t){const e=t.name;if(i3.has(e))return Zf.debug(`There were multiple attempts to register component ${e}.`),!1;i3.set(e,t);for(const r of RN.values())v9(r,t);for(const r of W_e.values())v9(r,t);return!0}function xM(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function yo(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ip=new rS("app","Firebase",G_e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_e{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ip.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=q_e;function bre(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:n3,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw ip.create("bad-app-name",{appName:String(i)});if(r||(r=pre()),!r)throw ip.create("no-options");const a=RN.get(i);if(a){if(dv(r,a.options)&&dv(n,a.config))return a;throw ip.create("duplicate-app",{appName:i})}const s=new e_e(i);for(const l of i3.values())s.addComponent(l);const o=new K_e(r,n,s);return RN.set(i,o),o}function u5(t=n3){const e=RN.get(t);if(!e&&t===n3&&pre())return bre();if(!e)throw ip.create("no-app",{appName:t});return e}function cc(t,e,r){let n=H_e[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zf.warn(s.join(" "));return}pv(new pp(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_e="firebase-heartbeat-database",Y_e=1,xA="firebase-heartbeat-store";let Rk=null;function wre(){return Rk||(Rk=d_e(X_e,Y_e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xA)}catch(r){console.warn(r)}}}}).catch(t=>{throw ip.create("idb-open",{originalErrorMessage:t.message})})),Rk}async function Q_e(t){try{const r=(await wre()).transaction(xA),n=await r.objectStore(xA).get(xre(t));return await r.done,n}catch(e){if(e instanceof Tc)Zf.warn(e.message);else{const r=ip.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zf.warn(r.message)}}}async function y9(t,e){try{const n=(await wre()).transaction(xA,"readwrite");await n.objectStore(xA).put(e,xre(t)),await n.done}catch(r){if(r instanceof Tc)Zf.warn(r.message);else{const n=ip.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Zf.warn(n.message)}}}function xre(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_e=1024,J_e=30;class eEe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rEe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=b9();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>J_e){const s=nEe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Zf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=b9(),{heartbeatsToSend:n,unsentEntries:i}=tEe(this._heartbeatsCache.heartbeats),a=kN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Zf.warn(r),""}}}function b9(){return new Date().toISOString().substring(0,10)}function tEe(t,e=Z_e){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),w9(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),w9(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class rEe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UAe()?zAe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Q_e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return y9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return y9(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function w9(t){return kN(JSON.stringify({version:2,heartbeats:t})).length}function nEe(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iEe(t){pv(new pp("platform-logger",e=>new g_e(e),"PRIVATE")),pv(new pp("heartbeat",e=>new eEe(e),"PRIVATE")),cc(r3,g9,t),cc(r3,g9,"esm2020"),cc("fire-js","")}iEe("");var x9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ap,Are;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,S){function C(){}C.prototype=S.prototype,E.F=S.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(D,N,P){for(var M=Array(arguments.length-2),j=2;j<arguments.length;j++)M[j-2]=arguments[j];return S.prototype[N].apply(D,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)D[N]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(N=0;N<16;++N)D[N]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=E.g[0],C=E.g[1],N=E.g[2];let P=E.g[3],M;M=S+(P^C&(N^P))+D[0]+3614090360&4294967295,S=C+(M<<7&4294967295|M>>>25),M=P+(N^S&(C^N))+D[1]+3905402710&4294967295,P=S+(M<<12&4294967295|M>>>20),M=N+(C^P&(S^C))+D[2]+606105819&4294967295,N=P+(M<<17&4294967295|M>>>15),M=C+(S^N&(P^S))+D[3]+3250441966&4294967295,C=N+(M<<22&4294967295|M>>>10),M=S+(P^C&(N^P))+D[4]+4118548399&4294967295,S=C+(M<<7&4294967295|M>>>25),M=P+(N^S&(C^N))+D[5]+1200080426&4294967295,P=S+(M<<12&4294967295|M>>>20),M=N+(C^P&(S^C))+D[6]+2821735955&4294967295,N=P+(M<<17&4294967295|M>>>15),M=C+(S^N&(P^S))+D[7]+4249261313&4294967295,C=N+(M<<22&4294967295|M>>>10),M=S+(P^C&(N^P))+D[8]+1770035416&4294967295,S=C+(M<<7&4294967295|M>>>25),M=P+(N^S&(C^N))+D[9]+2336552879&4294967295,P=S+(M<<12&4294967295|M>>>20),M=N+(C^P&(S^C))+D[10]+4294925233&4294967295,N=P+(M<<17&4294967295|M>>>15),M=C+(S^N&(P^S))+D[11]+2304563134&4294967295,C=N+(M<<22&4294967295|M>>>10),M=S+(P^C&(N^P))+D[12]+1804603682&4294967295,S=C+(M<<7&4294967295|M>>>25),M=P+(N^S&(C^N))+D[13]+4254626195&4294967295,P=S+(M<<12&4294967295|M>>>20),M=N+(C^P&(S^C))+D[14]+2792965006&4294967295,N=P+(M<<17&4294967295|M>>>15),M=C+(S^N&(P^S))+D[15]+1236535329&4294967295,C=N+(M<<22&4294967295|M>>>10),M=S+(N^P&(C^N))+D[1]+4129170786&4294967295,S=C+(M<<5&4294967295|M>>>27),M=P+(C^N&(S^C))+D[6]+3225465664&4294967295,P=S+(M<<9&4294967295|M>>>23),M=N+(S^C&(P^S))+D[11]+643717713&4294967295,N=P+(M<<14&4294967295|M>>>18),M=C+(P^S&(N^P))+D[0]+3921069994&4294967295,C=N+(M<<20&4294967295|M>>>12),M=S+(N^P&(C^N))+D[5]+3593408605&4294967295,S=C+(M<<5&4294967295|M>>>27),M=P+(C^N&(S^C))+D[10]+38016083&4294967295,P=S+(M<<9&4294967295|M>>>23),M=N+(S^C&(P^S))+D[15]+3634488961&4294967295,N=P+(M<<14&4294967295|M>>>18),M=C+(P^S&(N^P))+D[4]+3889429448&4294967295,C=N+(M<<20&4294967295|M>>>12),M=S+(N^P&(C^N))+D[9]+568446438&4294967295,S=C+(M<<5&4294967295|M>>>27),M=P+(C^N&(S^C))+D[14]+3275163606&4294967295,P=S+(M<<9&4294967295|M>>>23),M=N+(S^C&(P^S))+D[3]+4107603335&4294967295,N=P+(M<<14&4294967295|M>>>18),M=C+(P^S&(N^P))+D[8]+1163531501&4294967295,C=N+(M<<20&4294967295|M>>>12),M=S+(N^P&(C^N))+D[13]+2850285829&4294967295,S=C+(M<<5&4294967295|M>>>27),M=P+(C^N&(S^C))+D[2]+4243563512&4294967295,P=S+(M<<9&4294967295|M>>>23),M=N+(S^C&(P^S))+D[7]+1735328473&4294967295,N=P+(M<<14&4294967295|M>>>18),M=C+(P^S&(N^P))+D[12]+2368359562&4294967295,C=N+(M<<20&4294967295|M>>>12),M=S+(C^N^P)+D[5]+4294588738&4294967295,S=C+(M<<4&4294967295|M>>>28),M=P+(S^C^N)+D[8]+2272392833&4294967295,P=S+(M<<11&4294967295|M>>>21),M=N+(P^S^C)+D[11]+1839030562&4294967295,N=P+(M<<16&4294967295|M>>>16),M=C+(N^P^S)+D[14]+4259657740&4294967295,C=N+(M<<23&4294967295|M>>>9),M=S+(C^N^P)+D[1]+2763975236&4294967295,S=C+(M<<4&4294967295|M>>>28),M=P+(S^C^N)+D[4]+1272893353&4294967295,P=S+(M<<11&4294967295|M>>>21),M=N+(P^S^C)+D[7]+4139469664&4294967295,N=P+(M<<16&4294967295|M>>>16),M=C+(N^P^S)+D[10]+3200236656&4294967295,C=N+(M<<23&4294967295|M>>>9),M=S+(C^N^P)+D[13]+681279174&4294967295,S=C+(M<<4&4294967295|M>>>28),M=P+(S^C^N)+D[0]+3936430074&4294967295,P=S+(M<<11&4294967295|M>>>21),M=N+(P^S^C)+D[3]+3572445317&4294967295,N=P+(M<<16&4294967295|M>>>16),M=C+(N^P^S)+D[6]+76029189&4294967295,C=N+(M<<23&4294967295|M>>>9),M=S+(C^N^P)+D[9]+3654602809&4294967295,S=C+(M<<4&4294967295|M>>>28),M=P+(S^C^N)+D[12]+3873151461&4294967295,P=S+(M<<11&4294967295|M>>>21),M=N+(P^S^C)+D[15]+530742520&4294967295,N=P+(M<<16&4294967295|M>>>16),M=C+(N^P^S)+D[2]+3299628645&4294967295,C=N+(M<<23&4294967295|M>>>9),M=S+(N^(C|~P))+D[0]+4096336452&4294967295,S=C+(M<<6&4294967295|M>>>26),M=P+(C^(S|~N))+D[7]+1126891415&4294967295,P=S+(M<<10&4294967295|M>>>22),M=N+(S^(P|~C))+D[14]+2878612391&4294967295,N=P+(M<<15&4294967295|M>>>17),M=C+(P^(N|~S))+D[5]+4237533241&4294967295,C=N+(M<<21&4294967295|M>>>11),M=S+(N^(C|~P))+D[12]+1700485571&4294967295,S=C+(M<<6&4294967295|M>>>26),M=P+(C^(S|~N))+D[3]+2399980690&4294967295,P=S+(M<<10&4294967295|M>>>22),M=N+(S^(P|~C))+D[10]+4293915773&4294967295,N=P+(M<<15&4294967295|M>>>17),M=C+(P^(N|~S))+D[1]+2240044497&4294967295,C=N+(M<<21&4294967295|M>>>11),M=S+(N^(C|~P))+D[8]+1873313359&4294967295,S=C+(M<<6&4294967295|M>>>26),M=P+(C^(S|~N))+D[15]+4264355552&4294967295,P=S+(M<<10&4294967295|M>>>22),M=N+(S^(P|~C))+D[6]+2734768916&4294967295,N=P+(M<<15&4294967295|M>>>17),M=C+(P^(N|~S))+D[13]+1309151649&4294967295,C=N+(M<<21&4294967295|M>>>11),M=S+(N^(C|~P))+D[4]+4149444226&4294967295,S=C+(M<<6&4294967295|M>>>26),M=P+(C^(S|~N))+D[11]+3174756917&4294967295,P=S+(M<<10&4294967295|M>>>22),M=N+(S^(P|~C))+D[2]+718787259&4294967295,N=P+(M<<15&4294967295|M>>>17),M=C+(P^(N|~S))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+P&4294967295}n.prototype.v=function(E,S){S===void 0&&(S=E.length);const C=S-this.blockSize,D=this.C;let N=this.h,P=0;for(;P<S;){if(N==0)for(;P<=C;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<S;)if(D[N++]=E.charCodeAt(P++),N==this.blockSize){i(this,D),N=0;break}}else for(;P<S;)if(D[N++]=E[P++],N==this.blockSize){i(this,D),N=0;break}}this.h=N,this.o+=S},n.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;S=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=S&255,S/=256;for(this.v(E),E=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)E[S++]=this.g[C]>>>D&255;return E};function a(E,S){var C=o;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=S(E)}function s(E,S){this.h=S;const C=[];let D=!0;for(let N=E.length-1;N>=0;N--){const P=E[N]|0;D&&P==S||(C[N]=P,D=!1)}this.g=C}var o={};function l(E){return-128<=E&&E<128?a(E,function(S){return new s([S|0],S<0?-1:0)}):new s([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return v(u(-E));const S=[];let C=1;for(let D=0;E>=C;D++)S[D]=E/C|0,C*=4294967296;return new s(S,0)}function c(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return v(c(E.substring(1),S));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(S,8));let D=f;for(let P=0;P<E.length;P+=8){var N=Math.min(8,E.length-P);const M=parseInt(E.substring(P,P+N),S);N<8?(N=u(Math.pow(S,N)),D=D.j(N).add(u(M))):(D=D.j(C),D=D.add(u(M)))}return D}var f=l(0),h=l(1),d=l(16777216);t=s.prototype,t.m=function(){if(m(this))return-v(this).m();let E=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);E+=(D>=0?D:4294967296+D)*S,S*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(m(this))return"-"+v(this).toString(E);const S=u(Math.pow(E,6));var C=this;let D="";for(;;){const N=_(C,S).g;C=y(C,N.j(S));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=N,p(C))return P+D;for(;P.length<6;)P="0"+P;D=P+D}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(let S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function m(E){return E.h==-1}t.l=function(E){return E=y(this,E),m(E)?-1:p(E)?0:1};function v(E){const S=E.g.length,C=[];for(let D=0;D<S;D++)C[D]=~E.g[D];return new s(C,~E.h).add(h)}t.abs=function(){return m(this)?v(this):this},t.add=function(E){const S=Math.max(this.g.length,E.g.length),C=[];let D=0;for(let N=0;N<=S;N++){let P=D+(this.i(N)&65535)+(E.i(N)&65535),M=(P>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);D=M>>>16,P&=65535,M&=65535,C[N]=M<<16|P}return new s(C,C[C.length-1]&-2147483648?-1:0)};function y(E,S){return E.add(v(S))}t.j=function(E){if(p(this)||p(E))return f;if(m(this))return m(E)?v(this).j(v(E)):v(v(this).j(E));if(m(E))return v(this.j(v(E)));if(this.l(d)<0&&E.l(d)<0)return u(this.m()*E.m());const S=this.g.length+E.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<E.g.length;N++){const P=this.i(D)>>>16,M=this.i(D)&65535,j=E.i(N)>>>16,K=E.i(N)&65535;C[2*D+2*N]+=M*K,w(C,2*D+2*N),C[2*D+2*N+1]+=P*K,w(C,2*D+2*N+1),C[2*D+2*N+1]+=M*j,w(C,2*D+2*N+1),C[2*D+2*N+2]+=P*j,w(C,2*D+2*N+2)}for(E=0;E<S;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=S;E<2*S;E++)C[E]=0;return new s(C,0)};function w(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function b(E,S){this.g=E,this.h=S}function _(E,S){if(p(S))throw Error("division by zero");if(p(E))return new b(f,f);if(m(E))return S=_(v(E),S),new b(v(S.g),v(S.h));if(m(S))return S=_(E,v(S)),new b(v(S.g),S.h);if(E.g.length>30){if(m(E)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var C=h,D=S;D.l(E)<=0;)C=x(C),D=x(D);var N=A(C,1),P=A(D,1);for(D=A(D,2),C=A(C,2);!p(D);){var M=P.add(D);M.l(E)<=0&&(N=N.add(C),P=M),D=A(D,1),C=A(C,1)}return S=y(E,N.j(S)),new b(N,S)}for(N=f;E.l(S)>=0;){for(C=Math.max(1,Math.floor(E.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),P=u(C),M=P.j(S);m(M)||M.l(E)>0;)C-=D,P=u(C),M=P.j(S);p(P)&&(P=h),N=N.add(P),E=y(E,M)}return new b(N,E)}t.B=function(E){return _(this,E).h},t.and=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&E.i(D);return new s(C,this.h&E.h)},t.or=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|E.i(D);return new s(C,this.h|E.h)},t.xor=function(E){const S=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^E.i(D);return new s(C,this.h^E.h)};function x(E){const S=E.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(C,E.h)}function A(E,S){const C=S>>5;S%=32;const D=E.g.length-C,N=[];for(let P=0;P<D;P++)N[P]=S>0?E.i(P+C)>>>S|E.i(P+C+1)<<32-S:E.i(P+C);return new s(N,E.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Are=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=c,ap=s}).apply(typeof x9<"u"?x9:typeof self<"u"?self:typeof window<"u"?window:{});var qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _re,Z1,Ere,oD,a3,Sre,Cre,Tre;(function(){var t,e=Object.defineProperty;function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof qC=="object"&&qC];for(var F=0;F<T.length;++F){var U=T[F];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=r(this);function i(T,F){if(F)e:{var U=n;T=T.split(".");for(var J=0;J<T.length-1;J++){var be=T[J];if(!(be in U))break e;U=U[be]}T=T[T.length-1],J=U[T],F=F(J),F!=J&&F!=null&&e(U,T,{configurable:!0,writable:!0,value:F})}}i("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(T){return T||function(F){var U=[],J;for(J in F)Object.prototype.hasOwnProperty.call(F,J)&&U.push([J,F[J]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function l(T,F,U){return T.call.apply(T.bind,arguments)}function u(T,F,U){return u=l,u.apply(null,arguments)}function c(T,F){var U=Array.prototype.slice.call(arguments,1);return function(){var J=U.slice();return J.push.apply(J,arguments),T.apply(this,J)}}function f(T,F){function U(){}U.prototype=F.prototype,T.Z=F.prototype,T.prototype=new U,T.prototype.constructor=T,T.Ob=function(J,be,_e){for(var je=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)je[jt-2]=arguments[jt];return F.prototype[be].apply(J,je)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function d(T){const F=T.length;if(F>0){const U=Array(F);for(let J=0;J<F;J++)U[J]=T[J];return U}return[]}function p(T,F){for(let J=1;J<arguments.length;J++){const be=arguments[J];var U=typeof be;if(U=U!="object"?U:be?Array.isArray(be)?"array":U:"null",U=="array"||U=="object"&&typeof be.length=="number"){U=T.length||0;const _e=be.length||0;T.length=U+_e;for(let je=0;je<_e;je++)T[U+je]=be[je]}else T.push(be)}}class m{constructor(F,U){this.i=F,this.j=U,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function v(T){s.setTimeout(()=>{throw T},0)}function y(){var T=E;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class w{constructor(){this.h=this.g=null}add(F,U){const J=b.get();J.set(F,U),this.h?this.h.next=J:this.g=J,this.h=J}}var b=new m(()=>new _,T=>T.reset());class _{constructor(){this.next=this.g=this.h=null}set(F,U){this.h=F,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let x,A=!1,E=new w,S=()=>{const T=Promise.resolve(void 0);x=()=>{T.then(C)}};function C(){for(var T;T=y();){try{T.h.call(T.g)}catch(U){v(U)}var F=b;F.j(T),F.h<100&&(F.h++,T.next=F.g,F.g=T)}A=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const U=()=>{};s.addEventListener("test",U,F),s.removeEventListener("test",U,F)}catch{}return T}();function M(T){return/^[\s\xa0]*$/.test(T)}function j(T,F){N.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,F)}f(j,N),j.prototype.init=function(T,F){const U=this.type=T.type,J=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget,F||(U=="mouseover"?F=T.fromElement:U=="mouseout"&&(F=T.toElement)),this.relatedTarget=F,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),k=0;function V(T,F,U,J,be){this.listener=T,this.proxy=null,this.src=F,this.type=U,this.capture=!!J,this.ha=be,this.key=++k,this.da=this.fa=!1}function q(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function H(T,F,U){for(const J in T)F.call(U,T[J],J,T)}function ee(T,F){for(const U in T)F.call(void 0,T[U],U,T)}function le(T){const F={};for(const U in T)F[U]=T[U];return F}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(T,F){let U,J;for(let be=1;be<arguments.length;be++){J=arguments[be];for(U in J)T[U]=J[U];for(let _e=0;_e<re.length;_e++)U=re[_e],Object.prototype.hasOwnProperty.call(J,U)&&(T[U]=J[U])}}function ie(T){this.src=T,this.g={},this.h=0}ie.prototype.add=function(T,F,U,J,be){const _e=T.toString();T=this.g[_e],T||(T=this.g[_e]=[],this.h++);const je=pe(T,F,J,be);return je>-1?(F=T[je],U||(F.fa=!1)):(F=new V(F,this.src,_e,!!J,be),F.fa=U,T.push(F)),F};function X(T,F){const U=F.type;if(U in T.g){var J=T.g[U],be=Array.prototype.indexOf.call(J,F,void 0),_e;(_e=be>=0)&&Array.prototype.splice.call(J,be,1),_e&&(q(F),T.g[U].length==0&&(delete T.g[U],T.h--))}}function pe(T,F,U,J){for(let be=0;be<T.length;++be){const _e=T[be];if(!_e.da&&_e.listener==F&&_e.capture==!!U&&_e.ha==J)return be}return-1}var de="closure_lm_"+(Math.random()*1e6|0),ae={};function z(T,F,U,J,be){if(Array.isArray(F)){for(let _e=0;_e<F.length;_e++)z(T,F[_e],U,J,be);return null}return U=Be(U),T&&T[K]?T.J(F,U,o(J)?!!J.capture:!1,be):ne(T,F,U,!1,J,be)}function ne(T,F,U,J,be,_e){if(!F)throw Error("Invalid event type");const je=o(be)?!!be.capture:!!be;let jt=Le(T);if(jt||(T[de]=jt=new ie(T)),U=jt.add(F,U,J,je,_e),U.proxy)return U;if(J=fe(),U.proxy=J,J.src=T,J.listener=U,T.addEventListener)P||(be=je),be===void 0&&(be=!1),T.addEventListener(F.toString(),J,be);else if(T.attachEvent)T.attachEvent(me(F.toString()),J);else if(T.addListener&&T.removeListener)T.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return U}function fe(){function T(U){return F.call(T.src,T.listener,U)}const F=De;return T}function Q(T,F,U,J,be){if(Array.isArray(F))for(var _e=0;_e<F.length;_e++)Q(T,F[_e],U,J,be);else J=o(J)?!!J.capture:!!J,U=Be(U),T&&T[K]?(T=T.i,_e=String(F).toString(),_e in T.g&&(F=T.g[_e],U=pe(F,U,J,be),U>-1&&(q(F[U]),Array.prototype.splice.call(F,U,1),F.length==0&&(delete T.g[_e],T.h--)))):T&&(T=Le(T))&&(F=T.g[F.toString()],T=-1,F&&(T=pe(F,U,J,be)),(U=T>-1?F[T]:null)&&ye(U))}function ye(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[K])X(F.i,T);else{var U=T.type,J=T.proxy;F.removeEventListener?F.removeEventListener(U,J,T.capture):F.detachEvent?F.detachEvent(me(U),J):F.addListener&&F.removeListener&&F.removeListener(J),(U=Le(F))?(X(U,T),U.h==0&&(U.src=null,F[de]=null)):q(T)}}}function me(T){return T in ae?ae[T]:ae[T]="on"+T}function De(T,F){if(T.da)T=!0;else{F=new j(F,this);const U=T.listener,J=T.ha||T.src;T.fa&&ye(T),T=U.call(J,F)}return T}function Le(T){return T=T[de],T instanceof ie?T:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(T){return typeof T=="function"?T:(T[ze]||(T[ze]=function(F){return T.handleEvent(F)}),T[ze])}function Ve(){D.call(this),this.i=new ie(this),this.M=this,this.G=null}f(Ve,D),Ve.prototype[K]=!0,Ve.prototype.removeEventListener=function(T,F,U,J){Q(this,T,F,U,J)};function Ke(T,F){var U,J=T.G;if(J)for(U=[];J;J=J.G)U.push(J);if(T=T.M,J=F.type||F,typeof F=="string")F=new N(F,T);else if(F instanceof N)F.target=F.target||T;else{var be=F;F=new N(J,T),L(F,be)}be=!0;let _e,je;if(U)for(je=U.length-1;je>=0;je--)_e=F.g=U[je],be=te(_e,J,!0,F)&&be;if(_e=F.g=T,be=te(_e,J,!0,F)&&be,be=te(_e,J,!1,F)&&be,U)for(je=0;je<U.length;je++)_e=F.g=U[je],be=te(_e,J,!1,F)&&be}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var T=this.i;for(const F in T.g){const U=T.g[F];for(let J=0;J<U.length;J++)q(U[J]);delete T.g[F],T.h--}}this.G=null},Ve.prototype.J=function(T,F,U,J){return this.i.add(String(T),F,!1,U,J)},Ve.prototype.K=function(T,F,U,J){return this.i.add(String(T),F,!0,U,J)};function te(T,F,U,J){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();let be=!0;for(let _e=0;_e<F.length;++_e){const je=F[_e];if(je&&!je.da&&je.capture==U){const jt=je.listener,ri=je.ha||je.src;je.fa&&X(T.i,je),be=jt.call(ri,J)!==!1&&be}}return be&&!J.defaultPrevented}function ce(T,F){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=u(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:s.setTimeout(T,F||0)}function G(T){T.g=ce(()=>{T.g=null,T.i&&(T.i=!1,G(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class Z extends D{constructor(F,U){super(),this.m=F,this.l=U,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(T){D.call(this),this.h=T,this.g={}}f(oe,D);var he=[];function ve(T){H(T.g,function(F,U){this.g.hasOwnProperty(U)&&ye(F)},T),T.g={}}oe.prototype.N=function(){oe.Z.N.call(this),ve(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=s.JSON.stringify,Pe=s.JSON.parse,Se=class{stringify(T){return s.JSON.stringify(T,void 0)}parse(T){return s.JSON.parse(T,void 0)}};function $e(){}function Ce(){}var rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){N.call(this,"d")}f(Mt,N);function Wt(){N.call(this,"c")}f(Wt,N);var ht={},Er=null;function B(){return Er=Er||new Ve}ht.Ia="serverreachability";function ue(T){N.call(this,ht.Ia,T)}f(ue,N);function we(T){const F=B();Ke(F,new ue(F))}ht.STAT_EVENT="statevent";function Ie(T,F){N.call(this,ht.STAT_EVENT,T),this.stat=F}f(Ie,N);function qe(T){const F=B();Ke(F,new Ie(F,T))}ht.Ja="timingevent";function dt(T,F){N.call(this,ht.Ja,T),this.size=F}f(dt,N);function On(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){T()},F)}function ko(){this.g=!0}ko.prototype.ua=function(){this.g=!1};function a1(T,F,U,J,be,_e){T.info(function(){if(T.g)if(_e){var je="",jt=_e.split("&");for(let Or=0;Or<jt.length;Or++){var ri=jt[Or].split("=");if(ri.length>1){const Si=ri[0];ri=ri[1];const Cu=Si.split("_");je=Cu.length>=2&&Cu[1]=="type"?je+(Si+"="+ri+"&"):je+(Si+"=redacted&")}}}else je=null;else je=_e;return"XMLHTTP REQ ("+J+") [attempt "+be+"]: "+F+`
`+U+`
`+je})}function TO(T,F,U,J,be,_e,je){T.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+be+"]: "+F+`
`+U+`
`+_e+" "+je})}function Sh(T,F,U,J){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+NO(T,U)+(J?" "+J:"")})}function DO(T,F){T.info(function(){return"TIMEOUT: "+F})}ko.prototype.info=function(){};function NO(T,F){if(!T.g)return F;if(!F)return null;try{const _e=JSON.parse(F);if(_e){for(T=0;T<_e.length;T++)if(Array.isArray(_e[T])){var U=_e[T];if(!(U.length<2)){var J=U[1];if(Array.isArray(J)&&!(J.length<1)){var be=J[0];if(be!="noop"&&be!="stop"&&be!="close")for(let je=1;je<J.length;je++)J[je]=""}}}}return ge(_e)}catch{return F}}var Qv={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uC;function s1(){}f(s1,$e),s1.prototype.g=function(){return new XMLHttpRequest},uC=new s1;function rm(T){return encodeURIComponent(String(T))}function PO(T){var F=1;T=T.split(":");const U=[];for(;F>0&&T.length;)U.push(T.shift()),F--;return T.length&&U.push(T.join(":")),U}function Eu(T,F,U,J){this.j=T,this.i=F,this.l=U,this.S=J||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cC}function cC(){this.i=null,this.g="",this.h=!1}var fC={},o1={};function l1(T,F,U){T.M=1,T.A=gC(Su(F)),T.u=U,T.R=!0,hC(T,null)}function hC(T,F){T.F=Date.now(),Zv(T),T.B=Su(T.A);var U=T.B,J=T.S;Array.isArray(J)||(J=[String(J)]),fU(U.i,"t",J),T.C=0,U=T.j.L,T.h=new cC,T.g=NU(T.j,U?F:null,!T.u),T.P>0&&(T.O=new Z(u(T.Y,T,T.g),T.P)),F=T.V,U=T.g,J=T.ba;var be="readystatechange";Array.isArray(be)||(be&&(he[0]=be.toString()),be=he);for(let _e=0;_e<be.length;_e++){const je=z(U,be[_e],J||F.handleEvent,!1,F.h||F);if(!je)break;F.g[je.key]=je}F=T.J?le(T.J):{},T.u?(T.v||(T.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,F)):(T.v="GET",T.g.ea(T.B,T.v,null,F)),we(),a1(T.i,T.v,T.B,T.l,T.S,T.u)}Eu.prototype.ba=function(T){T=T.target;const F=this.O;F&&Nh(T)==3?F.j():this.Y(T)},Eu.prototype.Y=function(T){try{if(T==this.g)e:{const jt=Nh(this.g),ri=this.g.ya(),Or=this.g.ca();if(!(jt<3)&&(jt!=3||this.g&&(this.h.h||this.g.la()||yU(this.g)))){this.K||jt!=4||ri==7||(ri==8||Or<=0?we(3):we(2)),u1(this);var F=this.g.ca();this.X=F;var U=MO(this);if(this.o=F==200,TO(this.i,this.v,this.B,this.l,this.S,jt,F),this.o){if(this.U&&!this.L){t:{if(this.g){var J,be=this.g;if((J=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(J)){var _e=J;break t}}_e=null}if(T=_e)Sh(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nr(this,T);else{this.o=!1,this.m=3,qe(12),qs(this),nm(this);break e}}if(this.R){T=!0;let Si;for(;!this.K&&this.C<U.length;)if(Si=IO(this,U),Si==o1){jt==4&&(this.m=4,qe(14),T=!1),Sh(this.i,this.l,null,"[Incomplete Response]");break}else if(Si==fC){this.m=4,qe(15),Sh(this.i,this.l,U,"[Invalid Chunk]"),T=!1;break}else Sh(this.i,this.l,Si,null),nr(this,Si);if(dC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||U.length!=0||this.h.h||(this.m=1,qe(16),T=!1),this.o=this.o&&T,!T)Sh(this.i,this.l,U,"[Invalid Chunked Response]"),qs(this),nm(this);else if(U.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),$O(je),je.P=!0,qe(11))}}else Sh(this.i,this.l,U,null),nr(this,U);jt==4&&qs(this),this.o&&!this.K&&(jt==4?SU(this.j,this):(this.o=!1,Zv(this)))}else Yme(this.g),F==400&&U.indexOf("Unknown SID")>0?(this.m=3,qe(12)):(this.m=0,qe(13)),qs(this),nm(this)}}}catch{}finally{}};function MO(T){if(!dC(T))return T.g.la();const F=yU(T.g);if(F==="")return"";let U="";const J=F.length,be=Nh(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return qs(T),nm(T),"";T.h.i=new s.TextDecoder}for(let _e=0;_e<J;_e++)T.h.h=!0,U+=T.h.i.decode(F[_e],{stream:!(be&&_e==J-1)});return F.length=0,T.h.g+=U,T.C=0,T.h.g}function dC(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function IO(T,F){var U=T.C,J=F.indexOf(`
`,U);return J==-1?o1:(U=Number(F.substring(U,J)),isNaN(U)?fC:(J+=1,J+U>F.length?o1:(F=F.slice(J,J+U),T.C=J+U,F)))}Eu.prototype.cancel=function(){this.K=!0,qs(this)};function Zv(T){T.T=Date.now()+T.H,pC(T,T.H)}function pC(T,F){if(T.D!=null)throw Error("WatchDog timer not null");T.D=On(u(T.aa,T),F)}function u1(T){T.D&&(s.clearTimeout(T.D),T.D=null)}Eu.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(DO(this.i,this.B),this.M!=2&&(we(),qe(17)),qs(this),this.m=2,nm(this)):pC(this,this.T-T)};function nm(T){T.j.I==0||T.K||SU(T.j,T)}function qs(T){u1(T);var F=T.O;F&&typeof F.dispose=="function"&&F.dispose(),T.O=null,ve(T.V),T.g&&(F=T.g,T.g=null,F.abort(),F.dispose())}function nr(T,F){try{var U=T.j;if(U.I!=0&&(U.g==T||c1(U.h,T))){if(!T.L&&c1(U.h,T)&&U.I==3){try{var J=U.Ba.g.parse(F)}catch{J=null}if(Array.isArray(J)&&J.length==3){var be=J;if(be[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<T.F)xC(U),bC(U);else break e;BO(U),qe(18)}}else U.xa=be[1],0<U.xa-U.K&&be[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=On(u(U.Va,U),6e3));Ch(U.h)<=1&&U.ta&&(U.ta=void 0)}else sm(U,11)}else if((T.L||U.g==T)&&xC(U),!M(F))for(be=U.Ba.g.parse(F),F=0;F<be.length;F++){let Or=be[F];const Si=Or[0];if(!(Si<=U.K))if(U.K=Si,Or=Or[1],U.I==2)if(Or[0]=="c"){U.M=Or[1],U.ba=Or[2];const Cu=Or[3];Cu!=null&&(U.ka=Cu,U.j.info("VER="+U.ka));const om=Or[4];om!=null&&(U.za=om,U.j.info("SVER="+U.za));const Ph=Or[5];Ph!=null&&typeof Ph=="number"&&Ph>0&&(J=1.5*Ph,U.O=J,U.j.info("backChannelRequestTimeoutMs_="+J)),J=U;const Mh=T.g;if(Mh){const _C=Mh.g?Mh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_C){var _e=J.h;_e.g||_C.indexOf("spdy")==-1&&_C.indexOf("quic")==-1&&_C.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(OO(_e,_e.h),_e.h=null))}if(J.G){const jO=Mh.g?Mh.g.getResponseHeader("X-HTTP-Session-Id"):null;jO&&(J.wa=jO,Gr(J.J,J.G,jO))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-T.F,U.j.info("Handshake RTT: "+U.T+"ms")),J=U;var je=T;if(J.na=DU(J,J.L?J.ba:null,J.W),je.L){iU(J.h,je);var jt=je,ri=J.O;ri&&(jt.H=ri),jt.D&&(u1(jt),Zv(jt)),J.g=je}else _U(J);U.i.length>0&&wC(U)}else Or[0]!="stop"&&Or[0]!="close"||sm(U,7);else U.I==3&&(Or[0]=="stop"||Or[0]=="close"?Or[0]=="stop"?sm(U,7):LO(U):Or[0]!="noop"&&U.l&&U.l.qa(Or),U.A=0)}}we(4)}catch{}}var ba=class{constructor(T,F){this.g=T,this.map=F}};function mC(T){this.l=T||10,s.PerformanceNavigationTiming?(T=s.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function im(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Ch(T){return T.h?1:T.g?T.g.size:0}function c1(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function OO(T,F){T.g?T.g.add(F):T.h=F}function iU(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}mC.prototype.cancel=function(){if(this.i=aU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function aU(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const U of T.g.values())F=F.concat(U.G);return F}return d(T.i)}var sU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bme(T,F){if(T){T=T.split("&");for(let U=0;U<T.length;U++){const J=T[U].indexOf("=");let be,_e=null;J>=0?(be=T[U].substring(0,J),_e=T[U].substring(J+1)):be=T[U],F(be,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Th(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;T instanceof Th?(this.l=T.l,f1(this,T.j),this.o=T.o,this.g=T.g,h1(this,T.u),this.h=T.h,kO(this,hU(T.i)),this.m=T.m):T&&(F=String(T).match(sU))?(this.l=!1,f1(this,F[1]||"",!0),this.o=d1(F[2]||""),this.g=d1(F[3]||"",!0),h1(this,F[4]),this.h=d1(F[5]||"",!0),kO(this,F[6]||"",!0),this.m=d1(F[7]||"")):(this.l=!1,this.i=new m1(null,this.l))}Th.prototype.toString=function(){const T=[];var F=this.j;F&&T.push(p1(F,oU,!0),":");var U=this.g;return(U||F=="file")&&(T.push("//"),(F=this.o)&&T.push(p1(F,oU,!0),"@"),T.push(rm(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&T.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&T.push("/"),T.push(p1(U,U.charAt(0)=="/"?Vme:jme,!0))),(U=this.i.toString())&&T.push("?",U),(U=this.m)&&T.push("#",p1(U,zme)),T.join("")},Th.prototype.resolve=function(T){const F=Su(this);let U=!!T.j;U?f1(F,T.j):U=!!T.o,U?F.o=T.o:U=!!T.g,U?F.g=T.g:U=T.u!=null;var J=T.h;if(U)h1(F,T.u);else if(U=!!T.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var be=F.h.lastIndexOf("/");be!=-1&&(J=F.h.slice(0,be+1)+J)}if(be=J,be==".."||be==".")J="";else if(be.indexOf("./")!=-1||be.indexOf("/.")!=-1){J=be.lastIndexOf("/",0)==0,be=be.split("/");const _e=[];for(let je=0;je<be.length;){const jt=be[je++];jt=="."?J&&je==be.length&&_e.push(""):jt==".."?((_e.length>1||_e.length==1&&_e[0]!="")&&_e.pop(),J&&je==be.length&&_e.push("")):(_e.push(jt),J=!0)}J=_e.join("/")}else J=be}return U?F.h=J:U=T.i.toString()!=="",U?kO(F,hU(T.i)):U=!!T.m,U&&(F.m=T.m),F};function Su(T){return new Th(T)}function f1(T,F,U){T.j=U?d1(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function h1(T,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);T.u=F}else T.u=null}function kO(T,F,U){F instanceof m1?(T.i=F,qme(T.i,T.l)):(U||(F=p1(F,Ume)),T.i=new m1(F,T.l))}function Gr(T,F,U){T.i.set(F,U)}function gC(T){return Gr(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function d1(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function p1(T,F,U){return typeof T=="string"?(T=encodeURI(T).replace(F,$me),U&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function $me(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var oU=/[#\/\?@]/g,jme=/[#\?:]/g,Vme=/[#\?]/g,Ume=/[#\?@]/g,zme=/#/g;function m1(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function am(T){T.g||(T.g=new Map,T.h=0,T.i&&Bme(T.i,function(F,U){T.add(decodeURIComponent(F.replace(/\+/g," ")),U)}))}t=m1.prototype,t.add=function(T,F){am(this),this.i=null,T=Jv(this,T);let U=this.g.get(T);return U||this.g.set(T,U=[]),U.push(F),this.h+=1,this};function lU(T,F){am(T),F=Jv(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function uU(T,F){return am(T),F=Jv(T,F),T.g.has(F)}t.forEach=function(T,F){am(this),this.g.forEach(function(U,J){U.forEach(function(be){T.call(F,be,J,this)},this)},this)};function cU(T,F){am(T);let U=[];if(typeof F=="string")uU(T,F)&&(U=U.concat(T.g.get(Jv(T,F))));else for(T=Array.from(T.g.values()),F=0;F<T.length;F++)U=U.concat(T[F]);return U}t.set=function(T,F){return am(this),this.i=null,T=Jv(this,T),uU(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},t.get=function(T,F){return T?(T=cU(this,T),T.length>0?String(T[0]):F):F};function fU(T,F,U){lU(T,F),U.length>0&&(T.i=null,T.g.set(Jv(T,F),d(U)),T.h+=U.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(let J=0;J<F.length;J++){var U=F[J];const be=rm(U);U=cU(this,U);for(let _e=0;_e<U.length;_e++){let je=be;U[_e]!==""&&(je+="="+rm(U[_e])),T.push(je)}}return this.i=T.join("&")};function hU(T){const F=new m1;return F.i=T.i,T.g&&(F.g=new Map(T.g),F.h=T.h),F}function Jv(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function qme(T,F){F&&!T.j&&(am(T),T.i=null,T.g.forEach(function(U,J){const be=J.toLowerCase();J!=be&&(lU(this,J),fU(this,be,U))},T)),T.j=F}function Hme(T,F){const U=new ko;if(s.Image){const J=new Image;J.onload=c(Dh,U,"TestLoadImage: loaded",!0,F,J),J.onerror=c(Dh,U,"TestLoadImage: error",!1,F,J),J.onabort=c(Dh,U,"TestLoadImage: abort",!1,F,J),J.ontimeout=c(Dh,U,"TestLoadImage: timeout",!1,F,J),s.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=T}else F(!1)}function Wme(T,F){const U=new ko,J=new AbortController,be=setTimeout(()=>{J.abort(),Dh(U,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:J.signal}).then(_e=>{clearTimeout(be),_e.ok?Dh(U,"TestPingServer: ok",!0,F):Dh(U,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(be),Dh(U,"TestPingServer: error",!1,F)})}function Dh(T,F,U,J,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),J(U)}catch{}}function Gme(){this.g=new Se}function RO(T){this.i=T.Sb||null,this.h=T.ab||!1}f(RO,$e),RO.prototype.g=function(){return new vC(this.i,this.h)};function vC(T,F){Ve.call(this),this.H=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(vC,Ve),t=vC.prototype,t.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=F,this.readyState=1,v1(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(F.body=T),(this.H||s).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,g1(this)),this.readyState=0},t.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,v1(this)),this.g&&(this.readyState=3,v1(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dU(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function dU(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}t.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?g1(this):v1(this),this.readyState==3&&dU(this)}},t.Oa=function(T){this.g&&(this.response=this.responseText=T,g1(this))},t.Na=function(T){this.g&&(this.response=T,g1(this))},t.ga=function(){this.g&&g1(this)};function g1(T){T.readyState=4,T.l=null,T.j=null,T.B=null,v1(T)}t.setRequestHeader=function(T,F){this.A.append(T,F)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var U=F.next();!U.done;)U=U.value,T.push(U[0]+": "+U[1]),U=F.next();return T.join(`\r
`)};function v1(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(vC.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function pU(T){let F="";return H(T,function(U,J){F+=J,F+=":",F+=U,F+=`\r
`}),F}function FO(T,F,U){e:{for(J in U){var J=!1;break e}J=!0}J||(U=pU(U),typeof T=="string"?U!=null&&rm(U):Gr(T,F,U))}function wn(T){Ve.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(wn,Ve);var Kme=/^https?$/i,Xme=["POST","PUT"];t=wn.prototype,t.Fa=function(T){this.H=T},t.ea=function(T,F,U,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uC.g(),this.g.onreadystatechange=h(u(this.Ca,this));try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch(_e){mU(this,_e);return}if(T=U||"",U=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var be in J)U.set(be,J[be]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const _e of J.keys())U.set(_e,J.get(_e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(U.keys()).find(_e=>_e.toLowerCase()=="content-type"),be=s.FormData&&T instanceof s.FormData,!(Array.prototype.indexOf.call(Xme,F,void 0)>=0)||J||be||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,je]of U)this.g.setRequestHeader(_e,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(_e){mU(this,_e)}};function mU(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.o=5,gU(T),yC(T)}function gU(T){T.A||(T.A=!0,Ke(T,"complete"),Ke(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,Ke(this,"complete"),Ke(this,"abort"),yC(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yC(this,!0)),wn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vU(this):this.Xa())},t.Xa=function(){vU(this)};function vU(T){if(T.h&&typeof a<"u"){if(T.v&&Nh(T)==4)setTimeout(T.Ca.bind(T),0);else if(Ke(T,"readystatechange"),Nh(T)==4){T.h=!1;try{const _e=T.ca();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var U;if(!(U=F)){var J;if(J=_e===0){let je=String(T.D).match(sU)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),J=!Kme.test(je?je.toLowerCase():"")}U=J}if(U)Ke(T,"complete"),Ke(T,"success");else{T.o=6;try{var be=Nh(T)>2?T.g.statusText:""}catch{be=""}T.l=be+" ["+T.ca()+"]",gU(T)}}finally{yC(T)}}}}function yC(T,F){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const U=T.g;T.g=null,F||Ke(T,"ready");try{U.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Nh(T){return T.g?T.g.readyState:0}t.ca=function(){try{return Nh(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),Pe(F)}};function yU(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function Yme(T){const F={};T=(T.g&&Nh(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<T.length;J++){if(M(T[J]))continue;var U=PO(T[J]);const be=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const _e=F[be]||[];F[be]=_e,_e.push(U)}ee(F,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function y1(T,F,U){return U&&U.internalChannelParams&&U.internalChannelParams[T]||F}function bU(T){this.za=0,this.i=[],this.j=new ko,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=y1("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=y1("baseRetryDelayMs",5e3,T),this.Za=y1("retryDelaySeedMs",1e4,T),this.Ta=y1("forwardChannelMaxRetries",2,T),this.va=y1("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new mC(T&&T.concurrentRequestLimit),this.Ba=new Gme,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bU.prototype,t.ka=8,t.I=1,t.connect=function(T,F,U,J){qe(0),this.W=T,this.H=F||{},U&&J!==void 0&&(this.H.OSID=U,this.H.OAID=J),this.F=this.X,this.J=DU(this,null,this.W),wC(this)};function LO(T){if(wU(T),T.I==3){var F=T.V++,U=Su(T.J);if(Gr(U,"SID",T.M),Gr(U,"RID",F),Gr(U,"TYPE","terminate"),b1(T,U),F=new Eu(T,T.j,F),F.M=2,F.A=gC(Su(U)),U=!1,s.navigator&&s.navigator.sendBeacon)try{U=s.navigator.sendBeacon(F.A.toString(),"")}catch{}!U&&s.Image&&(new Image().src=F.A,U=!0),U||(F.g=NU(F.j,null),F.g.ea(F.A)),F.F=Date.now(),Zv(F)}TU(T)}function bC(T){T.g&&($O(T),T.g.cancel(),T.g=null)}function wU(T){bC(T),T.v&&(s.clearTimeout(T.v),T.v=null),xC(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&s.clearTimeout(T.m),T.m=null)}function wC(T){if(!im(T.h)&&!T.m){T.m=!0;var F=T.Ea;x||S(),A||(x(),A=!0),E.add(F,T),T.D=0}}function Qme(T,F){return Ch(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=F.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=On(u(T.Ea,T,F),CU(T,T.D)),T.D++,!0)}t.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const be=new Eu(this,this.j,T);let _e=this.o;if(this.U&&(_e?(_e=le(_e),L(_e,this.U)):_e=this.U),this.u!==null||this.R||(be.J=_e,_e=null),this.S)e:{for(var F=0,U=0;U<this.i.length;U++){t:{var J=this.i[U];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(F+=J,F>4096){F=U;break e}if(F===4096||U===this.i.length-1){F=U+1;break e}}F=1e3}else F=1e3;F=AU(this,be,F),U=Su(this.J),Gr(U,"RID",T),Gr(U,"CVER",22),this.G&&Gr(U,"X-HTTP-Session-Id",this.G),b1(this,U),_e&&(this.R?F="headers="+rm(pU(_e))+"&"+F:this.u&&FO(U,this.u,_e)),OO(this.h,be),this.Ra&&Gr(U,"TYPE","init"),this.S?(Gr(U,"$req",F),Gr(U,"SID","null"),be.U=!0,l1(be,U,null)):l1(be,U,F),this.I=2}}else this.I==3&&(T?xU(this,T):this.i.length==0||im(this.h)||xU(this))};function xU(T,F){var U;F?U=F.l:U=T.V++;const J=Su(T.J);Gr(J,"SID",T.M),Gr(J,"RID",U),Gr(J,"AID",T.K),b1(T,J),T.u&&T.o&&FO(J,T.u,T.o),U=new Eu(T,T.j,U,T.D+1),T.u===null&&(U.J=T.o),F&&(T.i=F.G.concat(T.i)),F=AU(T,U,1e3),U.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),OO(T.h,U),l1(U,J,F)}function b1(T,F){T.H&&H(T.H,function(U,J){Gr(F,J,U)}),T.l&&H({},function(U,J){Gr(F,J,U)})}function AU(T,F,U){U=Math.min(T.i.length,U);const J=T.l?u(T.l.Ka,T.l,T):null;e:{var be=T.i;let jt=-1;for(;;){const ri=["count="+U];jt==-1?U>0?(jt=be[0].g,ri.push("ofs="+jt)):jt=0:ri.push("ofs="+jt);let Or=!0;for(let Si=0;Si<U;Si++){var _e=be[Si].g;const Cu=be[Si].map;if(_e-=jt,_e<0)jt=Math.max(0,be[Si].g-100),Or=!1;else try{_e="req"+_e+"_"||"";try{var je=Cu instanceof Map?Cu:Object.entries(Cu);for(const[om,Ph]of je){let Mh=Ph;o(Ph)&&(Mh=ge(Ph)),ri.push(_e+om+"="+encodeURIComponent(Mh))}}catch(om){throw ri.push(_e+"type="+encodeURIComponent("_badmap")),om}}catch{J&&J(Cu)}}if(Or){je=ri.join("&");break e}}je=void 0}return T=T.i.splice(0,U),F.G=T,je}function _U(T){if(!T.g&&!T.v){T.Y=1;var F=T.Da;x||S(),A||(x(),A=!0),E.add(F,T),T.A=0}}function BO(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=On(u(T.Da,T),CU(T,T.A)),T.A++,!0)}t.Da=function(){if(this.v=null,EU(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=On(u(this.Wa,this),T)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qe(10),bC(this),EU(this))};function $O(T){T.B!=null&&(s.clearTimeout(T.B),T.B=null)}function EU(T){T.g=new Eu(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var F=Su(T.na);Gr(F,"RID","rpc"),Gr(F,"SID",T.M),Gr(F,"AID",T.K),Gr(F,"CI",T.F?"0":"1"),!T.F&&T.ia&&Gr(F,"TO",T.ia),Gr(F,"TYPE","xmlhttp"),b1(T,F),T.u&&T.o&&FO(F,T.u,T.o),T.O&&(T.g.H=T.O);var U=T.g;T=T.ba,U.M=1,U.A=gC(Su(F)),U.u=null,U.R=!0,hC(U,T)}t.Va=function(){this.C!=null&&(this.C=null,bC(this),BO(this),qe(19))};function xC(T){T.C!=null&&(s.clearTimeout(T.C),T.C=null)}function SU(T,F){var U=null;if(T.g==F){xC(T),$O(T),T.g=null;var J=2}else if(c1(T.h,F))U=F.G,iU(T.h,F),J=1;else return;if(T.I!=0){if(F.o)if(J==1){U=F.u?F.u.length:0,F=Date.now()-F.F;var be=T.D;J=B(),Ke(J,new dt(J,U)),wC(T)}else _U(T);else if(be=F.m,be==3||be==0&&F.X>0||!(J==1&&Qme(T,F)||J==2&&BO(T)))switch(U&&U.length>0&&(F=T.h,F.i=F.i.concat(U)),be){case 1:sm(T,5);break;case 4:sm(T,10);break;case 3:sm(T,6);break;default:sm(T,2)}}}function CU(T,F){let U=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(U*=2),U*F}function sm(T,F){if(T.j.info("Error code "+F),F==2){var U=u(T.bb,T),J=T.Ua;const be=!J;J=new Th(J||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||f1(J,"https"),gC(J),be?Hme(J.toString(),U):Wme(J.toString(),U)}else qe(2);T.I=0,T.l&&T.l.pa(F),TU(T),wU(T)}t.bb=function(T){T?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function TU(T){if(T.I=0,T.ja=[],T.l){const F=aU(T.h);(F.length!=0||T.i.length!=0)&&(p(T.ja,F),p(T.ja,T.i),T.h.i.length=0,d(T.i),T.i.length=0),T.l.oa()}}function DU(T,F,U){var J=U instanceof Th?Su(U):new Th(U);if(J.g!="")F&&(J.g=F+"."+J.g),h1(J,J.u);else{var be=s.location;J=be.protocol,F=F?F+"."+be.hostname:be.hostname,be=+be.port;const _e=new Th(null);J&&f1(_e,J),F&&(_e.g=F),be&&h1(_e,be),U&&(_e.h=U),J=_e}return U=T.G,F=T.wa,U&&F&&Gr(J,U,F),Gr(J,"VER",T.ka),b1(T,J),J}function NU(T,F,U){if(F&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Aa&&!T.ma?new wn(new RO({ab:U})):new wn(T.ma),F.Fa(T.L),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function PU(){}t=PU.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function AC(){}AC.prototype.g=function(T,F){return new Hs(T,F)};function Hs(T,F){Ve.call(this),this.g=new bU(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(T?T["X-WebChannel-Client-Profile"]=F.sa:T={"X-WebChannel-Client-Profile":F.sa}),this.g.U=T,(T=F&&F.Qb)&&!M(T)&&(this.g.u=T),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!M(F)&&(this.g.G=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new ey(this)}f(Hs,Ve),Hs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){LO(this.g)},Hs.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var U={};U.__data__=T,T=U}else this.v&&(U={},U.__data__=ge(T),T=U);F.i.push(new ba(F.Ya++,T)),F.I==3&&wC(F)},Hs.prototype.N=function(){this.g.l=null,delete this.j,LO(this.g),delete this.g,Hs.Z.N.call(this)};function MU(T){Mt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const U in F){T=U;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}f(MU,Mt);function IU(){Wt.call(this),this.status=1}f(IU,Wt);function ey(T){this.g=T}f(ey,PU),ey.prototype.ra=function(){Ke(this.g,"a")},ey.prototype.qa=function(T){Ke(this.g,new MU(T))},ey.prototype.pa=function(T){Ke(this.g,new IU)},ey.prototype.oa=function(){Ke(this.g,"b")},AC.prototype.createWebChannel=AC.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,Tre=function(){return new AC},Cre=function(){return B()},Sre=ht,a3={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qv.NO_ERROR=0,Qv.TIMEOUT=8,Qv.HTTP_ERROR=6,oD=Qv,lC.COMPLETE="complete",Ere=lC,Ce.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Z1=Ce,wn.prototype.listenOnce=wn.prototype.K,wn.prototype.getLastError=wn.prototype.Ha,wn.prototype.getLastErrorCode=wn.prototype.ya,wn.prototype.getStatus=wn.prototype.ca,wn.prototype.getResponseJson=wn.prototype.La,wn.prototype.getResponseText=wn.prototype.la,wn.prototype.send=wn.prototype.ea,wn.prototype.setWithCredentials=wn.prototype.Fa,_re=wn}).apply(typeof qC<"u"?qC:typeof self<"u"?self:typeof window<"u"?window:{});const A9="@firebase/firestore",_9="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ia.UNAUTHENTICATED=new Ia(null),Ia.GOOGLE_CREDENTIALS=new Ia("google-credentials-uid"),Ia.FIRST_PARTY=new Ia("first-party-uid"),Ia.MOCK_USER=new Ia("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ow="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new o5("@firebase/firestore");function dy(){return mv.logLevel}function Xe(t,...e){if(mv.logLevel<=Kt.DEBUG){const r=e.map(c5);mv.debug(`Firestore (${Ow}): ${t}`,...r)}}function Jf(t,...e){if(mv.logLevel<=Kt.ERROR){const r=e.map(c5);mv.error(`Firestore (${Ow}): ${t}`,...r)}}function Zb(t,...e){if(mv.logLevel<=Kt.WARN){const r=e.map(c5);mv.warn(`Firestore (${Ow}): ${t}`,...r)}}function c5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,Dre(t,n,r)}function Dre(t,e,r){let n=`FIRESTORE (${Ow}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Jf(n),new Error(n)}function hr(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||Dre(e,i,n)}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Tc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ia.UNAUTHENTICATED))}shutdown(){}}class sEe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class oEe{constructor(e){this.t=e,this.currentUser=Ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){hr(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new Ff;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ff,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ff)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(hr(typeof n.accessToken=="string",31837,{l:n}),new Nre(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return hr(e===null||typeof e=="string",2055,{h:e}),new Ia(e)}}class lEe{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ia.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uEe{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new lEe(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ia.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cEe{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){hr(this.o===void 0,3512);const n=a=>{a.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Xe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new E9(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(hr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new E9(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=fEe(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function Xt(t,e){return t<e?-1:t>e?1:0}function s3(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return Fk(i)===Fk(a)?Xt(i,a):Fk(i)?1:-1}return Xt(t.length,e.length)}const hEe=55296,dEe=57343;function Fk(t){const e=t.charCodeAt(0);return e>=hEe&&e<=dEe}function Jb(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="__name__";class Iu{constructor(e,r,n){r===void 0?r=0:r>e.length&&yt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&yt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Iu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Iu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=Iu.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return Xt(e.length,r.length)}static compareSegments(e,r){const n=Iu.isNumericId(e),i=Iu.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Iu.extractNumericId(e).compare(Iu.extractNumericId(r)):s3(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ap.fromString(e.substring(4,e.length-2))}}class qr extends Iu{construct(e,r,n){return new qr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new qr(r)}static emptyPath(){return new qr([])}}const pEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oa extends Iu{construct(e,r,n){return new oa(e,r,n)}static isValidIdentifier(e){return pEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===S9}static keyField(){return new oa([S9])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ge(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ge(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new Ge(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oa(r)}static emptyPath(){return new oa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(qr.fromString(e))}static fromName(e){return new ct(qr.fromString(e).popFirst(5))}static empty(){return new ct(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return qr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new qr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pre(t,e,r){if(!r)throw new Ge(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mEe(t,e,r,n){if(e===!0&&n===!0)throw new Ge(Te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function C9(t){if(!ct.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T9(t){if(ct.isDocumentKey(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mre(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function AM(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt(12329,{type:typeof t})}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ge(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=AM(t);throw new Ge(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,e){const r={typeString:t};return e&&(r.value=e),r}function iS(t,e){if(!Mre(t))throw new Ge(Te.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(i&&typeof s!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new Ge(Te.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=-62135596800,N9=1e6;class Qr{static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*N9);return new Qr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<D9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N9}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(iS(e,Qr._jsonSchema))return new Qr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D9;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qr._jsonSchemaVersion="firestore/timestamp/1.0",Qr._jsonSchema={type:Zn("string",Qr._jsonSchemaVersion),seconds:Zn("number"),nanoseconds:Zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Qr(0,0))}static max(){return new Et(new Qr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=-1;function gEe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(n===1e9?new Qr(r+1,0):new Qr(r,n));return new mp(i,ct.empty(),e)}function vEe(t){return new mp(t.readTime,t.key,AA)}class mp{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mp(Et.min(),ct.empty(),AA)}static max(){return new mp(Et.max(),ct.empty(),AA)}}function yEe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ct.comparator(t.documentKey,e.documentKey),r!==0?r:Xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==bEe)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ne((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.reject(r)}static resolve(e){return new Ne((r,n)=>{r(e)})}static reject(e){return new Ne((r,n)=>{n(e)})}static waitFor(e){return new Ne((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},l=>n(l))}),s=!0,a===i&&r()})}static or(e){let r=Ne.resolve(!1);for(const n of e)r=r.next(i=>i?Ne.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new Ne((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;r(e[u]).next(c=>{s[u]=c,++o,o===a&&n(s)},c=>i(c))}})}static doWhile(e,r){return new Ne((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function xEe(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Rw(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_M.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=-1;function EM(t){return t==null}function FN(t){return t===0&&1/t==-1/0}function AEe(t){return typeof t=="number"&&Number.isInteger(t)&&!FN(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ire="";function _Ee(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=P9(e)),e=EEe(t.get(r),e);return P9(e)}function EEe(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case Ire:r+="";break;default:r+=a}}return r}function P9(t){return t+Ire+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Lp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Ore(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,r){this.comparator=e,this.root=r||ia.EMPTY}insert(e,r){return new yn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ia.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ia.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new HC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new HC(this.root,e,this.comparator,!1)}getReverseIterator(){return new HC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new HC(this.root,e,this.comparator,!0)}}class HC{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ia{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??ia.RED,this.left=i??ia.EMPTY,this.right=a??ia.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new ia(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ia.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ia.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ia.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ia.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}ia.EMPTY=null,ia.RED=!0,ia.BLACK=!1;ia.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new ia(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new I9(this.data.getIterator())}getIteratorFrom(e){return new I9(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new di(this.comparator);return r.data=e,r}}class I9{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.fields=e,e.sort(oa.comparator)}static empty(){return new xo([])}unionWith(e){let r=new di(oa.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new xo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Jb(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kre("Invalid base64 string: "+a):a}}(e);return new ma(r)}static fromUint8Array(e){const r=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ma(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const SEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gp(t){if(hr(!!t,39018),typeof t=="string"){let e=0;const r=SEe.exec(t);if(hr(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$n(t.seconds),nanos:$n(t.nanos)}}function $n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vp(t){return typeof t=="string"?ma.fromBase64String(t):ma.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre="server_timestamp",Fre="__type__",Lre="__previous_value__",Bre="__local_write_time__";function d5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[Fre])==null?void 0:n.stringValue)===Rre}function SM(t){const e=t.mapValue.fields[Lre];return d5(e)?SM(e):e}function _A(t){const e=gp(t.mapValue.fields[Bre].timestampValue);return new Qr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CEe{constructor(e,r,n,i,a,s,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const LN="(default)";class EA{constructor(e,r){this.projectId=e,this.database=r||LN}static empty(){return new EA("","")}get isDefaultDatabase(){return this.database===LN}isEqual(e){return e instanceof EA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $re="__type__",TEe="__max__",WC={mapValue:{}},jre="__vector__",BN="value";function yp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d5(t)?4:NEe(t)?9007199254740991:DEe(t)?10:11:yt(28295,{value:t})}function yc(t,e){if(t===e)return!0;const r=yp(t);if(r!==yp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _A(t).isEqual(_A(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=gp(i.timestampValue),o=gp(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return vp(i.bytesValue).isEqual(vp(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return $n(i.geoPointValue.latitude)===$n(a.geoPointValue.latitude)&&$n(i.geoPointValue.longitude)===$n(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return $n(i.integerValue)===$n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=$n(i.doubleValue),o=$n(a.doubleValue);return s===o?FN(s)===FN(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Jb(t.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(M9(s)!==M9(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!yc(s[l],o[l])))return!1;return!0}(t,e);default:return yt(52216,{left:t})}}function SA(t,e){return(t.values||[]).find(r=>yc(r,e))!==void 0}function ew(t,e){if(t===e)return 0;const r=yp(t),n=yp(e);if(r!==n)return Xt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Xt(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=$n(a.integerValue||a.doubleValue),l=$n(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return O9(t.timestampValue,e.timestampValue);case 4:return O9(_A(t),_A(e));case 5:return s3(t.stringValue,e.stringValue);case 6:return function(a,s){const o=vp(a),l=vp(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Xt(o[u],l[u]);if(c!==0)return c}return Xt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Xt($n(a.latitude),$n(s.latitude));return o!==0?o:Xt($n(a.longitude),$n(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k9(t.arrayValue,e.arrayValue);case 10:return function(a,s){var h,d,p,m;const o=a.fields||{},l=s.fields||{},u=(h=o[BN])==null?void 0:h.arrayValue,c=(d=l[BN])==null?void 0:d.arrayValue,f=Xt(((p=u==null?void 0:u.values)==null?void 0:p.length)||0,((m=c==null?void 0:c.values)==null?void 0:m.length)||0);return f!==0?f:k9(u,c)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===WC.mapValue&&s===WC.mapValue)return 0;if(a===WC.mapValue)return 1;if(s===WC.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const h=s3(l[f],c[f]);if(h!==0)return h;const d=ew(o[l[f]],u[c[f]]);if(d!==0)return d}return Xt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw yt(23264,{he:r})}}function O9(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xt(t,e);const r=gp(t),n=gp(e),i=Xt(r.seconds,n.seconds);return i!==0?i:Xt(r.nanos,n.nanos)}function k9(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=ew(r[i],n[i]);if(a)return a}return Xt(r.length,n.length)}function tw(t){return o3(t)}function o3(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=gp(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return vp(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ct.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=o3(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${o3(r.fields[s])}`;return i+"}"}(t.mapValue):yt(61005,{value:t})}function lD(t){switch(yp(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=SM(t);return e?16+lD(e):16;case 5:return 2*t.stringValue.length;case 6:return vp(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+lD(a),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Lp(n.fields,(a,s)=>{i+=a.length+lD(s)}),i}(t.mapValue);default:throw yt(13486,{value:t})}}function R9(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function l3(t){return!!t&&"integerValue"in t}function p5(t){return!!t&&"arrayValue"in t}function F9(t){return!!t&&"nullValue"in t}function L9(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uD(t){return!!t&&"mapValue"in t}function DEe(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[$re])==null?void 0:n.stringValue)===jre}function Ux(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Lp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ux(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ux(t.arrayValue.values[r]);return e}return{...t}}function NEe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TEe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.value=e}static empty(){return new Is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!uD(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ux(r)}setAll(e){let r=oa.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=Ux(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());uD(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];uD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Lp(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Is(Ux(this.value))}}function Vre(t){const e=[];return Lp(t.fields,(r,n)=>{const i=new oa([r]);if(uD(n)){const a=Vre(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new xo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ka(e,0,Et.min(),Et.min(),Et.min(),Is.empty(),0)}static newFoundDocument(e,r,n,i){return new ka(e,1,r,Et.min(),n,i,0)}static newNoDocument(e,r){return new ka(e,2,r,Et.min(),Et.min(),Is.empty(),0)}static newUnknownDocument(e,r){return new ka(e,3,r,Et.min(),Et.min(),Is.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,r){this.position=e,this.inclusive=r}}function B9(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=ct.comparator(ct.fromName(s.referenceValue),r.key):n=ew(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function $9(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!yc(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,r="asc"){this.field=e,this.dir=r}}function PEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ure{}class Qn extends Ure{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new IEe(e,r,n):r==="array-contains"?new REe(e,n):r==="in"?new FEe(e,n):r==="not-in"?new LEe(e,n):r==="array-contains-any"?new BEe(e,n):new Qn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new OEe(e,n):new kEe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(ew(r,this.value)):r!==null&&yp(this.value)===yp(r)&&this.matchesComparison(ew(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cu extends Ure{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new cu(e,r)}matches(e){return zre(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zre(t){return t.op==="and"}function qre(t){return MEe(t)&&zre(t)}function MEe(t){for(const e of t.filters)if(e instanceof cu)return!1;return!0}function u3(t){if(t instanceof Qn)return t.field.canonicalString()+t.op.toString()+tw(t.value);if(qre(t))return t.filters.map(e=>u3(e)).join(",");{const e=t.filters.map(r=>u3(r)).join(",");return`${t.op}(${e})`}}function Hre(t,e){return t instanceof Qn?function(n,i){return i instanceof Qn&&n.op===i.op&&n.field.isEqual(i.field)&&yc(n.value,i.value)}(t,e):t instanceof cu?function(n,i){return i instanceof cu&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,s,o)=>a&&Hre(s,i.filters[o]),!0):!1}(t,e):void yt(19439)}function Wre(t){return t instanceof Qn?function(r){return`${r.field.canonicalString()} ${r.op} ${tw(r.value)}`}(t):t instanceof cu?function(r){return r.op.toString()+" {"+r.getFilters().map(Wre).join(" ,")+"}"}(t):"Filter"}class IEe extends Qn{constructor(e,r,n){super(e,r,n),this.key=ct.fromName(n.referenceValue)}matches(e){const r=ct.comparator(e.key,this.key);return this.matchesComparison(r)}}class OEe extends Qn{constructor(e,r){super(e,"in",r),this.keys=Gre("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class kEe extends Qn{constructor(e,r){super(e,"not-in",r),this.keys=Gre("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Gre(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>ct.fromName(n.referenceValue))}class REe extends Qn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return p5(r)&&SA(r.arrayValue,this.value)}}class FEe extends Qn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&SA(this.value.arrayValue,r)}}class LEe extends Qn{constructor(e,r){super(e,"not-in",r)}matches(e){if(SA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!SA(this.value.arrayValue,r)}}class BEe extends Qn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!p5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>SA(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ee{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function j9(t,e=null,r=[],n=[],i=null,a=null,s=null){return new $Ee(t,e,r,n,i,a,s)}function m5(t){const e=Nt(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>u3(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),EM(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>tw(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>tw(n)).join(",")),e.Te=r}return e.Te}function g5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!PEe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Hre(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$9(t.startAt,e.startAt)&&$9(t.endAt,e.endAt)}function c3(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jEe(t,e,r,n,i,a,s,o){return new Fw(t,e,r,n,i,a,s,o)}function CM(t){return new Fw(t)}function V9(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kre(t){return t.collectionGroup!==null}function zx(t){const e=Nt(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new di(oa.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new CA(a,n))}),r.has(oa.keyField().canonicalString())||e.Ie.push(new CA(oa.keyField(),n))}return e.Ie}function fc(t){const e=Nt(t);return e.Ee||(e.Ee=VEe(e,zx(t))),e.Ee}function VEe(t,e){if(t.limitType==="F")return j9(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new CA(i.field,a)});const r=t.endAt?new $N(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new $N(t.startAt.position,t.startAt.inclusive):null;return j9(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function f3(t,e){const r=t.filters.concat([e]);return new Fw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function jN(t,e,r){return new Fw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function TM(t,e){return g5(fc(t),fc(e))&&t.limitType===e.limitType}function Xre(t){return`${m5(fc(t))}|lt:${t.limitType}`}function py(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>Wre(i)).join(", ")}]`),EM(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>tw(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>tw(i)).join(",")),`Target(${n})`}(fc(t))}; limitType=${t.limitType})`}function DM(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ct.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of zx(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,l){const u=B9(s,o,l);return s.inclusive?u<=0:u<0}(n.startAt,zx(n),i)||n.endAt&&!function(s,o,l){const u=B9(s,o,l);return s.inclusive?u>=0:u>0}(n.endAt,zx(n),i))}(t,e)}function UEe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yre(t){return(e,r)=>{let n=!1;for(const i of zx(t)){const a=zEe(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function zEe(t,e,r){const n=t.field.isKeyField()?ct.comparator(e.key,r.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?ew(l,u):yt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return yt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lp(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return Ore(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qEe=new yn(ct.comparator);function eh(){return qEe}const Qre=new yn(ct.comparator);function J1(...t){let e=Qre;for(const r of t)e=e.insert(r.key,r);return e}function Zre(t){let e=Qre;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Nm(){return qx()}function Jre(){return qx()}function qx(){return new kv(t=>t.toString(),(t,e)=>t.isEqual(e))}const HEe=new yn(ct.comparator),WEe=new di(ct.comparator);function Yt(...t){let e=WEe;for(const r of t)e=e.add(r);return e}const GEe=new di(Xt);function KEe(){return GEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:FN(e)?"-0":e}}function ene(t){return{integerValue:""+t}}function tne(t,e){return AEe(e)?ene(e):v5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this._=void 0}}function XEe(t,e,r){return t instanceof TA?function(i,a){const s={fields:{[Fre]:{stringValue:Rre},[Bre]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&d5(a)&&(a=SM(a)),a&&(s.fields[Lre]=a),{mapValue:s}}(r,e):t instanceof DA?nne(t,e):t instanceof NA?ine(t,e):function(i,a){const s=rne(i,a),o=U9(s)+U9(i.Ae);return l3(s)&&l3(i.Ae)?ene(o):v5(i.serializer,o)}(t,e)}function YEe(t,e,r){return t instanceof DA?nne(t,e):t instanceof NA?ine(t,e):r}function rne(t,e){return t instanceof PA?function(n){return l3(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class TA extends NM{}class DA extends NM{constructor(e){super(),this.elements=e}}function nne(t,e){const r=ane(e);for(const n of t.elements)r.some(i=>yc(i,n))||r.push(n);return{arrayValue:{values:r}}}class NA extends NM{constructor(e){super(),this.elements=e}}function ine(t,e){let r=ane(e);for(const n of t.elements)r=r.filter(i=>!yc(i,n));return{arrayValue:{values:r}}}class PA extends NM{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function U9(t){return $n(t.integerValue||t.doubleValue)}function ane(t){return p5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sne{constructor(e,r){this.field=e,this.transform=r}}function QEe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof DA&&i instanceof DA||n instanceof NA&&i instanceof NA?Jb(n.elements,i.elements,yc):n instanceof PA&&i instanceof PA?yc(n.Ae,i.Ae):n instanceof TA&&i instanceof TA}(t.transform,e.transform)}class ZEe{constructor(e,r){this.version=e,this.transformResults=r}}class ml{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ml}static exists(e){return new ml(void 0,e)}static updateTime(e){return new ml(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cD(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class PM{}function one(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y5(t.key,ml.none()):new aS(t.key,t.data,ml.none());{const r=t.data,n=Is.empty();let i=new di(oa.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Bp(t.key,n,new xo(i.toArray()),ml.none())}}function JEe(t,e,r){t instanceof aS?function(i,a,s){const o=i.value.clone(),l=q9(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Bp?function(i,a,s){if(!cD(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=q9(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(lne(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Hx(t,e,r,n){return t instanceof aS?function(a,s,o,l){if(!cD(a.precondition,s))return o;const u=a.value.clone(),c=H9(a.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Bp?function(a,s,o,l){if(!cD(a.precondition,s))return o;const u=H9(a.fieldTransforms,l,s),c=s.data;return c.setAll(lne(a)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,s,o){return cD(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,r)}function eSe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=rne(n.transform,i||null);a!=null&&(r===null&&(r=Is.empty()),r.set(n.field,a))}return r||null}function z9(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Jb(n,i,(a,s)=>QEe(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aS extends PM{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bp extends PM{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lne(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function q9(t,e,r){const n=new Map;hr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,YEe(s,o,r[i]))}return n}function H9(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,XEe(a,s,e))}return n}class y5 extends PM{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tSe extends PM{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rSe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&JEe(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Hx(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Hx(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Jre();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const l=one(s,o);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Jb(this.mutations,e.mutations,(r,n)=>z9(r,n))&&Jb(this.baseMutations,e.baseMutations,(r,n)=>z9(r,n))}}class b5{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){hr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return HEe}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new b5(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nSe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iSe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,rr;function aSe(t){switch(t){case Te.OK:return yt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return yt(15467,{code:t})}}function une(t){if(t===void 0)return Jf("GRPC error has no .code"),Te.UNKNOWN;switch(t){case Wn.OK:return Te.OK;case Wn.CANCELLED:return Te.CANCELLED;case Wn.UNKNOWN:return Te.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return Te.INTERNAL;case Wn.UNAVAILABLE:return Te.UNAVAILABLE;case Wn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Wn.NOT_FOUND:return Te.NOT_FOUND;case Wn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Wn.ABORTED:return Te.ABORTED;case Wn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Wn.DATA_LOSS:return Te.DATA_LOSS;default:return yt(39323,{code:t})}}(rr=Wn||(Wn={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sSe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oSe=new ap([4294967295,4294967295],0);function W9(t){const e=sSe().encode(t),r=new Are;return r.update(e),new Uint8Array(r.digest())}function G9(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ap([r,n],0),new ap([i,a],0)]}class w5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ex(`Invalid padding: ${r}`);if(n<0)throw new ex(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ex(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ex(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=ap.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(ap.fromNumber(n)));return i.compare(oSe)===1&&(i=new ap([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=W9(e),[n,i]=G9(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);if(!this.we(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new w5(a,i,r);return n.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const r=W9(e),[n,i]=G9(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ex extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,sS.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new MM(Et.min(),i,new yn(Xt),eh(),Yt())}}class sS{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new sS(n,r,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class cne{constructor(e,r){this.targetId=e,this.Ce=r}}class fne{constructor(e,r,n=ma.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class K9{constructor(){this.ve=0,this.Fe=X9(),this.Me=ma.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yt(),r=Yt(),n=Yt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:yt(38017,{changeType:a})}}),new sS(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=X9()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,hr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lSe{constructor(e){this.Ge=e,this.ze=new Map,this.je=eh(),this.Je=GC(),this.He=GC(),this.Ye=new yn(Xt)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(c3(a))if(n===0){const s=new ct(a.path);this.et(r,s,ka.newNoDocument(s,Et.min()))}else hr(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const o=this.ut(e),l=o?this.ct(o,e,s):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,o;try{s=vp(n).toUint8Array()}catch(l){if(l instanceof kre)return Zb("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new w5(s,i,a)}catch(l){return Zb(l instanceof ex?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,s)=>{const o=this.ot(s);if(o){if(a.current&&c3(o.target)){const l=new ct(o.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,ka.newNoDocument(l,e))}a.Be&&(r.set(s,a.ke()),a.qe())}});let n=Yt();this.He.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,s)=>s.setReadTime(e));const i=new MM(e,r,this.Ye,this.je,n);return this.je=eh(),this.Je=GC(),this.He=GC(),this.Ye=new yn(Xt),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new K9,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new di(Xt),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new di(Xt),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new K9),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function GC(){return new yn(ct.comparator)}function X9(){return new yn(ct.comparator)}const uSe={asc:"ASCENDING",desc:"DESCENDING"},cSe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fSe={and:"AND",or:"OR"};class hSe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function h3(t,e){return t.useProto3Json||EM(e)?e:{value:e}}function VN(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hne(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dSe(t,e){return VN(t,e.toTimestamp())}function hc(t){return hr(!!t,49232),Et.fromTimestamp(function(r){const n=gp(r);return new Qr(n.seconds,n.nanos)}(t))}function x5(t,e){return d3(t,e).canonicalString()}function d3(t,e){const r=function(i){return new qr(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function dne(t){const e=qr.fromString(t);return hr(yne(e),10190,{key:e.toString()}),e}function p3(t,e){return x5(t.databaseId,e.path)}function Lk(t,e){const r=dne(e);if(r.get(1)!==t.databaseId.projectId)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ct(mne(r))}function pne(t,e){return x5(t.databaseId,e)}function pSe(t){const e=dne(t);return e.length===4?qr.emptyPath():mne(e)}function m3(t){return new qr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mne(t){return hr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Y9(t,e,r){return{name:p3(t,e),fields:r.value.mapValue.fields}}function mSe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:yt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,c){return u.useProto3Json?(hr(c===void 0||typeof c=="string",58123),ma.fromBase64String(c||"")):(hr(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),ma.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const c=u.code===void 0?Te.UNKNOWN:une(u.code);return new Ge(c,u.message||"")}(s);r=new fne(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Lk(t,n.document.name),a=hc(n.document.updateTime),s=n.document.createTime?hc(n.document.createTime):Et.min(),o=new Is({mapValue:{fields:n.document.fields}}),l=ka.newFoundDocument(i,a,s,o),u=n.targetIds||[],c=n.removedTargetIds||[];r=new fD(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Lk(t,n.document),a=n.readTime?hc(n.readTime):Et.min(),s=ka.newNoDocument(i,a),o=n.removedTargetIds||[];r=new fD([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Lk(t,n.document),a=n.removedTargetIds||[];r=new fD([],a,i,null)}else{if(!("filter"in e))return yt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new iSe(i,a),o=n.targetId;r=new cne(o,s)}}return r}function gSe(t,e){let r;if(e instanceof aS)r={update:Y9(t,e.key,e.value)};else if(e instanceof y5)r={delete:p3(t,e.key)};else if(e instanceof Bp)r={update:Y9(t,e.key,e.data),updateMask:SSe(e.fieldMask)};else{if(!(e instanceof tSe))return yt(16599,{Vt:e.type});r={verify:p3(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,s){const o=s.transform;if(o instanceof TA)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof DA)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof NA)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof PA)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw yt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:dSe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:yt(27497)}(t,e.precondition)),r}function vSe(t,e){return t&&t.length>0?(hr(e!==void 0,14353),t.map(r=>function(i,a){let s=i.updateTime?hc(i.updateTime):hc(a);return s.isEqual(Et.min())&&(s=hc(a)),new ZEe(s,i.transformResults||[])}(r,e))):[]}function ySe(t,e){return{documents:[pne(t,e.path)]}}function bSe(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=pne(t,i);const a=function(u){if(u.length!==0)return vne(cu.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:my(h.field),direction:ASe(h.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const o=h3(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:i}}function wSe(t){let e=pSe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){hr(n===1,65062);const c=r.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let a=[];r.where&&(a=function(f){const h=gne(f);return h instanceof cu&&qre(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(h=>function(p){return new CA(gy(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,EM(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,d=f.values||[];return new $N(d,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,d=f.values||[];return new $N(d,h)}(r.endAt)),jEe(e,i,s,a,o,"F",l,u)}function xSe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function gne(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gy(r.unaryFilter.field);return Qn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=gy(r.unaryFilter.field);return Qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=gy(r.unaryFilter.field);return Qn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gy(r.unaryFilter.field);return Qn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Qn.create(gy(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return cu.create(r.compositeFilter.filters.map(n=>gne(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(r.compositeFilter.op))}(t):yt(30097,{filter:t})}function ASe(t){return uSe[t]}function _Se(t){return cSe[t]}function ESe(t){return fSe[t]}function my(t){return{fieldPath:t.canonicalString()}}function gy(t){return oa.fromServerFormat(t.fieldPath)}function vne(t){return t instanceof Qn?function(r){if(r.op==="=="){if(L9(r.value))return{unaryFilter:{field:my(r.field),op:"IS_NAN"}};if(F9(r.value))return{unaryFilter:{field:my(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(L9(r.value))return{unaryFilter:{field:my(r.field),op:"IS_NOT_NAN"}};if(F9(r.value))return{unaryFilter:{field:my(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:my(r.field),op:_Se(r.op),value:r.value}}}(t):t instanceof cu?function(r){const n=r.getFilters().map(i=>vne(i));return n.length===1?n[0]:{compositeFilter:{op:ESe(r.op),filters:n}}}(t):yt(54877,{filter:t})}function SSe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function yne(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,i,a=Et.min(),s=Et.min(),o=ma.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CSe{constructor(e){this.yt=e}}function TSe(t){const e=wSe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DSe{constructor(){this.Cn=new NSe}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ne.resolve()}getCollectionParents(e,r){return Ne.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ne.resolve()}deleteFieldIndex(e,r){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,r){return Ne.resolve()}getDocumentsMatchingTarget(e,r){return Ne.resolve(null)}getIndexType(e,r){return Ne.resolve(0)}getFieldIndexes(e,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,r){return Ne.resolve(mp.min())}getMinOffsetFromCollectionGroup(e,r){return Ne.resolve(mp.min())}updateCollectionGroup(e,r,n){return Ne.resolve()}updateIndexEntries(e,r){return Ne.resolve()}}class NSe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new di(qr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new di(qr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bne=41943040;class Ns{static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(bne,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rw(0)}static cr(){return new rw(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="LruGarbageCollector",PSe=1048576;function J9([t,e],[r,n]){const i=Xt(t,r);return i===0?Xt(e,n):i}class MSe{constructor(e){this.Ir=e,this.buffer=new di(J9),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();J9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ISe{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Xe(Z9,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Rw(r)?Xe(Z9,"Ignoring IndexedDB error during garbage collection: ",r):await kw(r)}await this.Vr(3e5)})}}class OSe{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ne.resolve(_M.ce);const n=new MSe(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Q9)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q9):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,s,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(a=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),dy()<=Kt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:f})))}}function kSe(t,e){return new OSe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RSe{constructor(){this.changes=new kv(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ka.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FSe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LSe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Hx(n.mutation,i,xo.empty(),Qr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Yt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Yt()){const i=Nm();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=J1();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Nm();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Yt()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=eh();const s=qx(),o=function(){return qx()}();return r.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Bp)?a=a.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),Hx(c.mutation,u,c.mutation.getFieldMask(),Qr.now())):s.set(u.key,xo.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,c)=>s.set(u,c)),r.forEach((u,c)=>o.set(u,new FSe(c,s.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=qx();let i=new yn((s,o)=>s-o),a=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let c=n.get(l)||xo.empty();c=o.applyToLocalView(u,c),n.set(l,c);const f=(i.get(o.batchId)||Yt()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,f=Jre();c.forEach(h=>{if(!a.has(h)){const d=one(r.get(h),n.get(h));d!==null&&f.set(h,d),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Kre(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Ne.resolve(Nm());let o=AA,l=a;return s.next(u=>Ne.forEach(u,(c,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,Yt())).next(c=>({batchId:o,changes:Zre(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ct(r)).next(n=>{let i=J1();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=J1();return this.indexManager.getCollectionParents(e,a).next(o=>Ne.forEach(o,l=>{const u=function(f,h){return new Fw(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(c=>{c.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(s=>{a.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,ka.newInvalidDocument(c)))});let o=J1();return s.forEach((l,u)=>{const c=a.get(l);c!==void 0&&Hx(c.mutation,u,xo.empty(),Qr.now()),DM(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BSe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ne.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:hc(i.createTime)}}(r)),Ne.resolve()}getNamedQuery(e,r){return Ne.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:TSe(i.bundledQuery),readTime:hc(i.readTime)}}(r)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Se{constructor(){this.overlays=new yn(ct.comparator),this.qr=new Map}getOverlay(e,r){return Ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Nm();return Ne.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.St(e,r,a)}),Ne.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,r,n){const i=Nm(),a=r.length+1,s=new ct(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new yn((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let c=a.get(u.largestBatchId);c===null&&(c=Nm(),a=a.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=Nm(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return Ne.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new nSe(r,n));let a=this.qr.get(r);a===void 0&&(a=Yt(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jSe{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(){this.Qr=new di(Bi.$r),this.Ur=new di(Bi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Bi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Bi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new ct(new qr([])),n=new Bi(r,e),i=new Bi(r,e+1),a=[];return this.Ur.forEachInRange([n,i],s=>{this.Gr(s),a.push(s.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new ct(new qr([])),n=new Bi(r,e),i=new Bi(r,e+1);let a=Yt();return this.Ur.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new Bi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Bi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return ct.comparator(e.key,r.key)||Xt(e.Yr,r.Yr)}static Kr(e,r){return Xt(e.Yr,r.Yr)||ct.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VSe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new di(Bi.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rSe(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Bi(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(e,r){return Ne.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return Ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?h5:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Bi(r,0),i=new Bi(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],s=>{const o=this.Xr(s.Yr);a.push(o)}),Ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new di(Xt);return r.forEach(i=>{const a=new Bi(i,0),s=new Bi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],o=>{n=n.add(o.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;ct.isDocumentKey(a)||(a=a.child(""));const s=new Bi(new ct(a),0);let o=new di(Xt);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},s),Ne.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){hr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(r.mutations,i=>{const a=new Bi(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Bi(r,0),i=this.Zr.firstAfterOrEqual(n);return Ne.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class USe{constructor(e){this.ri=e,this.docs=function(){return new yn(ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ne.resolve(n?n.document.mutableCopy():ka.newInvalidDocument(r))}getEntries(e,r){let n=eh();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():ka.newInvalidDocument(i))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=eh();const s=r.path,o=new ct(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||yEe(vEe(c),n)<=0||(i.has(c.key)||DM(r,c))&&(a=a.insert(c.key,c.mutableCopy()))}return Ne.resolve(a)}getAllFromCollectionGroup(e,r,n,i){yt(9500)}ii(e,r){return Ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new zSe(this)}getSize(e){return Ne.resolve(this.size)}}class zSe extends RSe{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ne.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qSe{constructor(e){this.persistence=e,this.si=new kv(r=>m5(r),g5),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.oi=0,this._i=new A5,this.targetCount=0,this.ai=rw.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ne.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new rw(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ne.resolve()}updateTargetData(e,r){return this.Pr(r),Ne.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ne.waitFor(a).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ne.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ne.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Ne.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ne.resolve(n)}containsKey(e,r){return Ne.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e,r){this.ui={},this.overlays={},this.ci=new _M(0),this.li=!1,this.li=!0,this.hi=new jSe,this.referenceDelegate=e(this),this.Pi=new qSe(this),this.indexManager=new DSe,this.remoteDocumentCache=function(i){return new USe(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new CSe(r),this.Ii=new BSe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new $Se,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new VSe(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const i=new HSe(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class HSe extends wEe{constructor(e){super(),this.currentSequenceNumber=e}}class _5{constructor(e){this.persistence=e,this.Ri=new A5,this.Vi=null}static mi(e){return new _5(e)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ne.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const i=ct.fromPath(n);return this.gi(e,i).next(a=>{a||r.removeEntry(i,Et.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class UN{constructor(e,r){this.persistence=e,this.pi=new kv(n=>_Ee(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=kSe(this,r)}static mi(e,r){return new UN(e,r)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ne.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?Ne.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,r).next(o=>{o||(n++,a.removeEntry(s,Et.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=lD(e.data.value)),r}br(e,r,n){return Ne.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return Ne.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=Yt(),i=Yt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new E5(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WSe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GSe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return VAe()?8:xEe(ja())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ws(e,r,i,n).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new WSe;return this.Ss(e,r,s).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,s,o.size)})}).next(()=>a.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(dy()<=Kt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",py(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(dy()<=Kt.DEBUG&&Xe("QueryEngine","Query:",py(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(dy()<=Kt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",py(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fc(r))):Ne.resolve())}ys(e,r){if(V9(r))return Ne.resolve(null);let n=fc(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=jN(r,null,"F"),n=fc(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=Yt(...a);return this.ps.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,s,l.readTime)?this.ys(e,jN(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,i){return V9(r)||i.isEqual(Et.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(a=>{const s=this.Ds(r,a);return this.Cs(r,s,n,i)?Ne.resolve(null):(dy()<=Kt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),py(r)),this.vs(e,s,r,gEe(i,AA)).next(o=>o))})}Ds(e,r){let n=new di(Yre(e));return r.forEach((i,a)=>{DM(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return dy()<=Kt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",py(r)),this.ps.getDocumentsMatchingQuery(e,r,mp.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="LocalStore",KSe=3e8;class XSe{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new yn(Xt),this.xs=new kv(a=>m5(a),g5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LSe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function YSe(t,e,r,n){return new XSe(t,e,r,n)}async function xne(t,e){const r=Nt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let l=Yt();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of a){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:o}))})})}function QSe(t,e){const r=Nt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const f=u.batch,h=f.keys();let d=Ne.resolve();return h.forEach(p=>{d=d.next(()=>c.getEntry(l,p)).next(m=>{const v=u.docVersions.get(p);hr(v!==null,48541),m.version.compareTo(v)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Yt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function Ane(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function ZSe(t,e){const r=Nt(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((c,f)=>{const h=i.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(a,c.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(a,c.addedDocuments,f)));let d=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(ma.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,n)),i=i.insert(f,d),function(m,v,y){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=KSe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,d,c)&&o.push(r.Pi.updateTargetData(a,d))});let l=eh(),u=Yt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,c))}),o.push(JSe(a,s,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!n.isEqual(Et.min())){const c=r.Pi.getLastRemoteSnapshotVersion(a).next(f=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(c)}return Ne.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(r.Ms=i,a))}function JSe(t,e,r){let n=Yt(),i=Yt();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=eh();return r.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Xe(S5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function eCe(t,e){const r=Nt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=h5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function tCe(t,e){const r=Nt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(a=>a?(i=a,Ne.resolve(i)):r.Pi.allocateTargetId(n).next(s=>(i=new Hd(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function g3(t,e,r){const n=Nt(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Rw(s))throw s;Xe(S5,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function e7(t,e,r){const n=Nt(t);let i=Et.min(),a=Yt();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const f=Nt(l),h=f.xs.get(c);return h!==void 0?Ne.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,c)}(n,s,fc(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?i:Et.min(),r?a:Yt())).next(o=>(rCe(n,UEe(e),o),{documents:o,Qs:a})))}function rCe(t,e,r){let n=t.Os.get(e)||Et.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class t7{constructor(){this.activeTargetIds=KEe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nCe{constructor(){this.Mo=new t7,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iCe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7="ConnectivityMonitor";class n7{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xe(r7,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xe(r7,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KC=null;function v3(){return KC===null?KC=function(){return 268435456+Math.round(2147483648*Math.random())}():KC++,"0x"+KC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="RestConnection",aCe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sCe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===LN?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const s=v3(),o=this.zo(e,r.toUriEncodedString());Xe(Bk,`Sending RPC '${e}' ${s}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,a);const{host:u}=new URL(o),c=Iv(u);return this.Jo(e,o,l,n,c).then(f=>(Xe(Bk,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Zb(Bk,`RPC '${e}' ${s} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(e,r,n,i,a,s){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ow}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const n=aCe[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oCe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="WebChannelConnection";class lCe extends sCe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const s=v3();return new Promise((o,l)=>{const u=new _re;u.setWithCredentials(!0),u.listenOnce(Ere.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oD.NO_ERROR:const f=u.getResponseJson();Xe(Aa,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case oD.TIMEOUT:Xe(Aa,`RPC '${e}' ${s} timed out`),l(new Ge(Te.DEADLINE_EXCEEDED,"Request time out"));break;case oD.HTTP_ERROR:const h=u.getStatus();if(Xe(Aa,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(w)>=0?w:Te.UNKNOWN}(p.status);l(new Ge(m,p.message))}else l(new Ge(Te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ge(Te.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Xe(Aa,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Xe(Aa,`RPC '${e}' ${s} sending request:`,i),u.send(r,"POST",c,n,15)})}T_(e,r,n){const i=v3(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Tre(),o=Cre(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const c=a.join("");Xe(Aa,`Creating RPC '${e}' stream ${i}: ${c}`,l);const f=s.createWebChannel(c,l);this.I_(f);let h=!1,d=!1;const p=new oCe({Yo:v=>{d?Xe(Aa,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(Xe(Aa,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Xe(Aa,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},Zo:()=>f.close()}),m=(v,y,w)=>{v.listen(y,b=>{try{w(b)}catch(_){setTimeout(()=>{throw _},0)}})};return m(f,Z1.EventType.OPEN,()=>{d||(Xe(Aa,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),m(f,Z1.EventType.CLOSE,()=>{d||(d=!0,Xe(Aa,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(f))}),m(f,Z1.EventType.ERROR,v=>{d||(d=!0,Zb(Aa,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),p.a_(new Ge(Te.UNAVAILABLE,"The operation could not be completed")))}),m(f,Z1.EventType.MESSAGE,v=>{var y;if(!d){const w=v.data[0];hr(!!w,16349);const b=w,_=(b==null?void 0:b.error)||((y=b[0])==null?void 0:y.error);if(_){Xe(Aa,`RPC '${e}' stream ${i} received error:`,_);const x=_.status;let A=function(C){const D=Wn[C];if(D!==void 0)return une(D)}(x),E=_.message;A===void 0&&(A=Te.INTERNAL,E="Unknown error status: "+x+" with message "+_.message),d=!0,p.a_(new Ge(A,E)),f.close()}else Xe(Aa,`RPC '${e}' stream ${i} received:`,w),p.u_(w)}}),m(o,Sre.STAT_EVENT,v=>{v.stat===a3.PROXY?Xe(Aa,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===a3.NOPROXY&&Xe(Aa,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function $k(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){return new hSe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ne{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="PersistentStream";class Ene{constructor(e,r,n,i,a,s,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _ne(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Te.RESOURCE_EXHAUSTED?(Jf(r.toString()),Jf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new Ge(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Xe(i7,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Xe(i7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uCe extends Ene{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=mSe(this.serializer,e),n=function(a){if(!("targetChange"in a))return Et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?hc(s.readTime):Et.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=m3(this.serializer),r.addTarget=function(a,s){let o;const l=s.target;if(o=c3(l)?{documents:ySe(a,l)}:{query:bSe(a,l).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=hne(a,s.resumeToken);const u=h3(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Et.min())>0){o.readTime=VN(a,s.snapshotVersion.toTimestamp());const u=h3(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=xSe(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=m3(this.serializer),r.removeTarget=e,this.q_(r)}}class cCe extends Ene{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return hr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,hr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){hr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=vSe(e.writeResults,e.commitTime),n=hc(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=m3(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>gSe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fCe{}class hCe extends fCe{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Go(e,d3(r,n),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ge(Te.UNKNOWN,a.toString())})}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,d3(r,n),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(Te.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dCe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jf(r),this.aa=!1):Xe("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="RemoteStore";class pCe{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{Rv(this)&&(Xe(gv,"Restarting streams for network reachability change."),await async function(l){const u=Nt(l);u.Ea.add(4),await oS(u),u.Ra.set("Unknown"),u.Ea.delete(4),await OM(u)}(this))})}),this.Ra=new dCe(n,i)}}async function OM(t){if(Rv(t))for(const e of t.da)await e(!0)}async function oS(t){for(const e of t.da)await e(!1)}function Sne(t,e){const r=Nt(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),N5(r)?D5(r):Lw(r).O_()&&T5(r,e))}function C5(t,e){const r=Nt(t),n=Lw(r);r.Ia.delete(e),n.O_()&&Cne(r,e),r.Ia.size===0&&(n.O_()?n.L_():Rv(r)&&r.Ra.set("Unknown"))}function T5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Lw(t).Y_(e)}function Cne(t,e){t.Va.Ue(e),Lw(t).Z_(e)}function D5(t){t.Va=new lSe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Lw(t).start(),t.Ra.ua()}function N5(t){return Rv(t)&&!Lw(t).x_()&&t.Ia.size>0}function Rv(t){return Nt(t).Ea.size===0}function Tne(t){t.Va=void 0}async function mCe(t){t.Ra.set("Online")}async function gCe(t){t.Ia.forEach((e,r)=>{T5(t,e)})}async function vCe(t,e){Tne(t),N5(t)?(t.Ra.ha(e),D5(t)):t.Ra.set("Unknown")}async function yCe(t,e,r){if(t.Ra.set("Online"),e instanceof fne&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){Xe(gv,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zN(t,n)}else if(e instanceof fD?t.Va.Ze(e):e instanceof cne?t.Va.st(e):t.Va.tt(e),!r.isEqual(Et.min()))try{const n=await Ane(t.localStore);r.compareTo(n)>=0&&await function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=a.Ia.get(u);c&&a.Ia.set(u,c.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const c=a.Ia.get(l);if(!c)return;a.Ia.set(l,c.withResumeToken(ma.EMPTY_BYTE_STRING,c.snapshotVersion)),Cne(a,l);const f=new Hd(c.target,l,u,c.sequenceNumber);T5(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Xe(gv,"Failed to raise snapshot:",n),await zN(t,n)}}async function zN(t,e,r){if(!Rw(e))throw e;t.Ea.add(1),await oS(t),t.Ra.set("Offline"),r||(r=()=>Ane(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe(gv,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await OM(t)})}function Dne(t,e){return e().catch(r=>zN(t,r,e))}async function kM(t){const e=Nt(t),r=bp(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:h5;for(;bCe(e);)try{const i=await eCe(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,wCe(e,i)}catch(i){await zN(e,i)}Nne(e)&&Pne(e)}function bCe(t){return Rv(t)&&t.Ta.length<10}function wCe(t,e){t.Ta.push(e);const r=bp(t);r.O_()&&r.X_&&r.ea(e.mutations)}function Nne(t){return Rv(t)&&!bp(t).x_()&&t.Ta.length>0}function Pne(t){bp(t).start()}async function xCe(t){bp(t).ra()}async function ACe(t){const e=bp(t);for(const r of t.Ta)e.ea(r.mutations)}async function _Ce(t,e,r){const n=t.Ta.shift(),i=b5.from(n,e,r);await Dne(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await kM(t)}async function ECe(t,e){e&&bp(t).X_&&await async function(n,i){if(function(s){return aSe(s)&&s!==Te.ABORTED}(i.code)){const a=n.Ta.shift();bp(n).B_(),await Dne(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await kM(n)}}(t,e),Nne(t)&&Pne(t)}async function a7(t,e){const r=Nt(t);r.asyncQueue.verifyOperationInProgress(),Xe(gv,"RemoteStore received new credentials");const n=Rv(r);r.Ea.add(3),await oS(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await OM(r)}async function SCe(t,e){const r=Nt(t);e?(r.Ea.delete(2),await OM(r)):e||(r.Ea.add(2),await oS(r),r.Ra.set("Unknown"))}function Lw(t){return t.ma||(t.ma=function(r,n,i){const a=Nt(r);return a.sa(),new uCe(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:mCe.bind(null,t),t_:gCe.bind(null,t),r_:vCe.bind(null,t),H_:yCe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),N5(t)?D5(t):t.Ra.set("Unknown")):(await t.ma.stop(),Tne(t))})),t.ma}function bp(t){return t.fa||(t.fa=function(r,n,i){const a=Nt(r);return a.sa(),new cCe(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xCe.bind(null,t),r_:ECe.bind(null,t),ta:ACe.bind(null,t),na:_Ce.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await kM(t)):(await t.fa.stop(),t.Ta.length>0&&(Xe(gv,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Ff,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new P5(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M5(t,e){if(Jf("AsyncQueue",`${e}: ${t}`),Rw(t))return new Ge(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{static emptySet(e){return new l0(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ct.comparator(r.key,n.key):(r,n)=>ct.comparator(r.key,n.key),this.keyedMap=J1(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof l0)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new l0;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this.ga=new yn(ct.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):yt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class nw{constructor(e,r,n,i,a,s,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new nw(e,r,l0.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&TM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CCe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TCe{constructor(){this.queries=o7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Nt(r),a=i.queries;i.queries=o7(),a.forEach((s,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Ge(Te.ABORTED,"Firestore shutting down"))}}function o7(){return new kv(t=>Xre(t),TM)}async function I5(t,e){const r=Nt(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new CCe,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const o=M5(s,`Initialization of query '${py(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&k5(r)}async function O5(t,e){const r=Nt(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function DCe(t,e){const r=Nt(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(n=!0);s.wa=i}}n&&k5(r)}function NCe(t,e,r){const n=Nt(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function k5(t){t.Ca.forEach(e=>{e.next()})}var y3,l7;(l7=y3||(y3={})).Ma="default",l7.Cache="cache";class R5{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new nw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=nw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==y3.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mne{constructor(e){this.key=e}}class Ine{constructor(e){this.key=e}}class PCe{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Yt(),this.mutatedKeys=Yt(),this.eu=Yre(e),this.tu=new l0(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new s7,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const h=i.get(c),d=DM(this.query,f)?f:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let v=!1;h&&d?h.data.isEqual(d.data)?p!==m&&(n.track({type:3,doc:d}),v=!0):this.su(h,d)||(n.track({type:2,doc:d}),v=!0,(l&&this.eu(d,l)>0||u&&this.eu(d,u)<0)&&(o=!0)):!h&&d?(n.track({type:0,doc:d}),v=!0):h&&!d&&(n.track({type:1,doc:h}),v=!0,(l||u)&&(o=!0)),v&&(d?(s=s.add(d),a=m?a.add(c):a.delete(c)):(s=s.delete(c),a=a.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),a=a.delete(c.key),n.track({type:1,doc:c})}return{tu:s,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((c,f)=>function(d,p){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:v})}};return m(d)-m(p)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new nw(this.query,e.tu,a,s,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s7,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Yt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new Ine(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new Mne(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Yt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return nw.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const F5="SyncEngine";class MCe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class ICe{constructor(e){this.key=e,this.hu=!1}}class OCe{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new kv(o=>Xre(o),TM),this.Iu=new Map,this.Eu=new Set,this.du=new yn(ct.comparator),this.Au=new Map,this.Ru=new A5,this.Vu={},this.mu=new Map,this.fu=rw.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kCe(t,e,r=!0){const n=Bne(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await One(n,e,r,!0),i}async function RCe(t,e){const r=Bne(t);await One(r,e,!0,!1)}async function One(t,e,r,n){const i=await tCe(t.localStore,fc(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await FCe(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&Sne(t.remoteStore,i),o}async function FCe(t,e,r,n,i){t.pu=(f,h,d)=>async function(m,v,y,w){let b=v.view.ru(y);b.Cs&&(b=await e7(m.localStore,v.query,!1).then(({documents:E})=>v.view.ru(E,b)));const _=w&&w.targetChanges.get(v.targetId),x=w&&w.targetMismatches.get(v.targetId)!=null,A=v.view.applyChanges(b,m.isPrimaryClient,_,x);return c7(m,v.targetId,A.au),A.snapshot}(t,f,h,d);const a=await e7(t.localStore,e,!0),s=new PCe(e,a.Qs),o=s.ru(a.documents),l=sS.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,l);c7(t,r,u.au);const c=new MCe(e,r,s);return t.Tu.set(e,c),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function LCe(t,e,r){const n=Nt(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(s=>!TM(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await g3(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&C5(n.remoteStore,i.targetId),b3(n,i.targetId)}).catch(kw)):(b3(n,i.targetId),await g3(n.localStore,i.targetId,!0))}async function BCe(t,e){const r=Nt(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),C5(r.remoteStore,n.targetId))}async function $Ce(t,e,r){const n=WCe(t);try{const i=await function(s,o){const l=Nt(s),u=Qr.now(),c=o.reduce((d,p)=>d.add(p.key),Yt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=eh(),m=Yt();return l.Ns.getEntries(d,c).next(v=>{p=v,p.forEach((y,w)=>{w.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,p)).next(v=>{f=v;const y=[];for(const w of o){const b=eSe(w,f.get(w.key).overlayedDocument);b!=null&&y.push(new Bp(w.key,b,Vre(b.value.mapValue),ml.exists(!0)))}return l.mutationQueue.addMutationBatch(d,u,y,o)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,m);return l.documentOverlayCache.saveOverlays(d,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Zre(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new yn(Xt)),u=u.insert(o,l),s.Vu[s.currentUser.toKey()]=u}(n,i.batchId,r),await lS(n,i.changes),await kM(n.remoteStore)}catch(i){const a=M5(i,"Failed to persist write");r.reject(a)}}async function kne(t,e){const r=Nt(t);try{const n=await ZSe(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.Au.get(a);s&&(hr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?hr(s.hu,14607):i.removedDocuments.size>0&&(hr(s.hu,42227),s.hu=!1))}),await lS(r,n,e)}catch(n){await kw(n)}}function u7(t,e,r){const n=Nt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Nt(s);l.onlineState=o;let u=!1;l.queries.forEach((c,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&k5(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function jCe(t,e,r){const n=Nt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let s=new yn(ct.comparator);s=s.insert(a,ka.newNoDocument(a,Et.min()));const o=Yt().add(a),l=new MM(Et.min(),new Map,new yn(Xt),s,o);await kne(n,l),n.du=n.du.remove(a),n.Au.delete(e),L5(n)}else await g3(n.localStore,e,!1).then(()=>b3(n,e,r)).catch(kw)}async function VCe(t,e){const r=Nt(t),n=e.batch.batchId;try{const i=await QSe(r.localStore,e);Fne(r,n,null),Rne(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await lS(r,i)}catch(i){await kw(i)}}async function UCe(t,e,r){const n=Nt(t);try{const i=await function(s,o){const l=Nt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(hr(f!==null,37113),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(n.localStore,e);Fne(n,e,r),Rne(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await lS(n,i)}catch(i){await kw(i)}}function Rne(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Fne(t,e,r){const n=Nt(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function b3(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||Lne(t,n)})}function Lne(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(C5(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),L5(t))}function c7(t,e,r){for(const n of r)n instanceof Mne?(t.Ru.addReference(n.key,e),zCe(t,n)):n instanceof Ine?(Xe(F5,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||Lne(t,n.key)):yt(19791,{wu:n})}function zCe(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Xe(F5,"New document in limbo: "+r),t.Eu.add(n),L5(t))}function L5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ct(qr.fromString(e)),n=t.fu.next();t.Au.set(n,new ICe(r)),t.du=t.du.insert(r,n),Sne(t.remoteStore,new Hd(fc(CM(r.path)),n,"TargetPurposeLimboResolution",_M.ce))}}async function lS(t,e,r){const n=Nt(t),i=[],a=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{s.push(n.pu(l,e,r).then(u=>{var c;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(c=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=E5.As(l.targetId,u);a.push(f)}}))}),await Promise.all(s),n.Pu.H_(i),await async function(l,u){const c=Nt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(u,h=>Ne.forEach(h.Es,d=>c.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>Ne.forEach(h.ds,d=>c.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!Rw(f))throw f;Xe(S5,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const d=c.Ms.get(h),p=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(h,m)}}}(n.localStore,a))}async function qCe(t,e){const r=Nt(t);if(!r.currentUser.isEqual(e)){Xe(F5,"User change. New user:",e.toKey());const n=await xne(r.localStore,e);r.currentUser=e,function(a,s){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Ge(Te.CANCELLED,s))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await lS(r,n.Ls)}}function HCe(t,e){const r=Nt(t),n=r.Au.get(e);if(n&&n.hu)return Yt().add(n.key);{let i=Yt();const a=r.Iu.get(e);if(!a)return i;for(const s of a){const o=r.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function Bne(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kne.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jCe.bind(null,e),e.Pu.H_=DCe.bind(null,e.eventManager),e.Pu.yu=NCe.bind(null,e.eventManager),e}function WCe(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UCe.bind(null,e),e}class qN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=IM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return YSe(this.persistence,new GSe,e.initialUser,this.serializer)}Cu(e){return new wne(_5.mi,this.serializer)}Du(e){return new nCe}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qN.provider={build:()=>new qN};class GCe extends qN{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){hr(this.persistence.referenceDelegate instanceof UN,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ISe(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new wne(n=>UN.mi(n,r),this.serializer)}}class w3{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>u7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=qCe.bind(null,this.syncEngine),await SCe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TCe}()}createDatastore(e){const r=IM(e.databaseInfo.databaseId),n=function(a){return new lCe(a)}(e.databaseInfo);return function(a,s,o,l){return new hCe(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,s,o){return new pCe(n,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,r=>u7(this.syncEngine,r,0),function(){return n7.v()?new n7:new iCe}())}createSyncEngine(e,r){return function(i,a,s,o,l,u,c){const f=new OCe(i,a,s,o,l,u);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Nt(i);Xe(gv,"RemoteStore shutting down."),a.Ea.add(5),await oS(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}w3.provider={build:()=>new w3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="FirestoreClient";class KCe{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ia.UNAUTHENTICATED,this.clientId=f5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async s=>{Xe(wp,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Xe(wp,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ff;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=M5(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function jk(t,e){t.asyncQueue.verifyOperationInProgress(),Xe(wp,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await xne(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function f7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await XCe(t);Xe(wp,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>a7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>a7(e.remoteStore,i)),t._onlineComponents=e}async function XCe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe(wp,"Using user provided OfflineComponentProvider");try{await jk(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Zb("Error using user provided cache. Falling back to memory cache: "+r),await jk(t,new qN)}}else Xe(wp,"Using default OfflineComponentProvider"),await jk(t,new GCe(void 0));return t._offlineComponents}async function $ne(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe(wp,"Using user provided OnlineComponentProvider"),await f7(t,t._uninitializedComponentsProvider._online)):(Xe(wp,"Using default OnlineComponentProvider"),await f7(t,new w3))),t._onlineComponents}function YCe(t){return $ne(t).then(e=>e.syncEngine)}async function HN(t){const e=await $ne(t),r=e.eventManager;return r.onListen=kCe.bind(null,e.syncEngine),r.onUnlisten=LCe.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=RCe.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=BCe.bind(null,e.syncEngine),r}function QCe(t,e,r={}){const n=new Ff;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new B5({next:h=>{c.Nu(),s.enqueueAndForget(()=>O5(a,f));const d=h.docs.has(o);!d&&h.fromCache?u.reject(new Ge(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&l&&l.source==="server"?u.reject(new Ge(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new R5(CM(o.path),c,{includeMetadataChanges:!0,qa:!0});return I5(a,f)}(await HN(t),t.asyncQueue,e,r,n)),n.promise}function ZCe(t,e,r={}){const n=new Ff;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new B5({next:h=>{c.Nu(),s.enqueueAndForget(()=>O5(a,f)),h.fromCache&&l.source==="server"?u.reject(new Ge(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new R5(o,c,{includeMetadataChanges:!0,qa:!0});return I5(a,f)}(await HN(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne="firestore.googleapis.com",d7=!0;class p7{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vne,this.ssl=d7}else this.host=e.host,this.ssl=e.ssl??d7;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bne;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PSe)throw new Ge(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mEe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jne(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RM{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p7({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p7(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new aEe;switch(n.type){case"firstParty":return new uEe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ge(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=h7.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),h7.delete(r),n.terminate())}(this),Promise.resolve()}}function JCe(t,e,r,n={}){var u;t=js(t,RM);const i=Iv(e),a=t._getSettings(),s={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(a5(`https://${o}`),s5("Firestore",!0)),a.host!==Vne&&a.host!==o&&Zb("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:i,emulatorOptions:n};if(!dv(l,s)&&(t._setSettings(l),n.mockUserToken)){let c,f;if(typeof n.mockUserToken=="string")c=n.mockUserToken,f=Ia.MOCK_USER;else{c=gre(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Ge(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ia(h)}t._authCredentials=new sEe(new Nre(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vh(this.firestore,e,this._query)}}class Mn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}toJSON(){return{type:Mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(iS(r,Mn._jsonSchema))return new Mn(e,n||null,new ct(qr.fromString(r.referencePath)))}}Mn._jsonSchemaVersion="firestore/documentReference/1.0",Mn._jsonSchema={type:Zn("string",Mn._jsonSchemaVersion),referencePath:Zn("string")};class sp extends vh{constructor(e,r,n){super(e,r,CM(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new ct(e))}withConverter(e){return new sp(this.firestore,e,this._path)}}function th(t,e,...r){if(t=gi(t),Pre("collection","path",e),t instanceof RM){const n=qr.fromString(e,...r);return T9(n),new sp(t,null,n)}{if(!(t instanceof Mn||t instanceof sp))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(qr.fromString(e,...r));return T9(n),new sp(t.firestore,null,n)}}function xp(t,e,...r){if(t=gi(t),arguments.length===1&&(e=f5.newId()),Pre("doc","path",e),t instanceof RM){const n=qr.fromString(e,...r);return C9(n),new Mn(t,null,new ct(n))}{if(!(t instanceof Mn||t instanceof sp))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(qr.fromString(e,...r));return C9(n),new Mn(t.firestore,t instanceof sp?t.converter:null,new ct(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="AsyncQueue";class g7{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _ne(this,"async_queue_retry"),this._c=()=>{const n=$k();n&&Xe(m7,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=$k();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=$k();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Ff;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rw(e))throw e;Xe(m7,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Jf("INTERNAL UNHANDLED ERROR: ",v7(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=P5.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&yt(47125,{Pc:v7(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function v7(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class rh extends RM{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new g7,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g7(e),this._firestoreClient=void 0,await e}}}function eTe(t,e){const r=typeof t=="object"?t:u5(),n=typeof t=="string"?t:LN,i=xM(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=dre("firestore");a&&JCe(i,...a)}return i}function FM(t){if(t._terminated)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tTe(t),t._firestoreClient}function tTe(t){var n,i,a;const e=t._freezeSettings(),r=function(o,l,u,c){return new CEe(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jne(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new KCe(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(ma.fromBase64String(e))}catch(r){throw new Ge(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ol(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ol._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(iS(e,ol._jsonSchema))return ol.fromBase64String(e.bytes)}}ol._jsonSchemaVersion="firestore/bytes/1.0",ol._jsonSchema={type:Zn("string",ol._jsonSchemaVersion),bytes:Zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ge(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ge(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ge(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dc._jsonSchemaVersion}}static fromJSON(e){if(iS(e,dc._jsonSchema))return new dc(e.latitude,e.longitude)}}dc._jsonSchemaVersion="firestore/geoPoint/1.0",dc._jsonSchema={type:Zn("string",dc._jsonSchemaVersion),latitude:Zn("number"),longitude:Zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(iS(e,pc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new pc(e.vectorValues);throw new Ge(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pc._jsonSchemaVersion="firestore/vectorValue/1.0",pc._jsonSchema={type:Zn("string",pc._jsonSchemaVersion),vectorValues:Zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rTe=/^__.*__$/;class nTe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Bp(e,this.data,this.fieldMask,r,this.fieldTransforms):new aS(e,this.data,r,this.fieldTransforms)}}class Une{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Bp(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function zne(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:t})}}class $5{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return WN(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zne(this.Ac)&&rTe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iTe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||IM(e)}Cc(e,r,n,i=!1){return new $5({Ac:e,methodName:r,Dc:n,path:oa.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BM(t){const e=t._freezeSettings(),r=IM(t._databaseId);return new iTe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function qne(t,e,r,n,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);U5("Data must be an object, but it was:",s,n);const o=Hne(n,s);let l,u;if(a.merge)l=new xo(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const c=[];for(const f of a.mergeFields){const h=x3(e,f,r);if(!s.contains(h))throw new Ge(Te.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Gne(c,h)||c.push(h)}l=new xo(c),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new nTe(new Is(o),l,u)}class $M extends uS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $M}}class j5 extends uS{_toFieldTransform(e){return new sne(e.path,new TA)}isEqual(e){return e instanceof j5}}class V5 extends uS{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new PA(e.serializer,tne(e.serializer,this.Fc));return new sne(e.path,r)}isEqual(e){return e instanceof V5&&this.Fc===e.Fc}}function aTe(t,e,r,n){const i=t.Cc(1,e,r);U5("Data must be an object, but it was:",i,n);const a=[],s=Is.empty();Lp(n,(l,u)=>{const c=z5(e,l,r);u=gi(u);const f=i.yc(c);if(u instanceof $M)a.push(c);else{const h=cS(u,f);h!=null&&(a.push(c),s.set(c,h))}});const o=new xo(a);return new Une(s,o,i.fieldTransforms)}function sTe(t,e,r,n,i,a){const s=t.Cc(1,e,r),o=[x3(e,n,r)],l=[i];if(a.length%2!=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(x3(e,a[h])),l.push(a[h+1]);const u=[],c=Is.empty();for(let h=o.length-1;h>=0;--h)if(!Gne(u,o[h])){const d=o[h];let p=l[h];p=gi(p);const m=s.yc(d);if(p instanceof $M)u.push(d);else{const v=cS(p,m);v!=null&&(u.push(d),c.set(d,v))}}const f=new xo(u);return new Une(c,f,s.fieldTransforms)}function oTe(t,e,r,n=!1){return cS(r,t.Cc(n?4:3,e))}function cS(t,e){if(Wne(t=gi(t)))return U5("Unsupported field value:",e,t),Hne(t,e);if(t instanceof uS)return function(n,i){if(!zne(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let s=0;for(const o of n){let l=cS(o,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=gi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tne(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Qr.fromDate(n);return{timestampValue:VN(i.serializer,a)}}if(n instanceof Qr){const a=new Qr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:VN(i.serializer,a)}}if(n instanceof dc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ol)return{bytesValue:hne(i.serializer,n._byteString)};if(n instanceof Mn){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:x5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof pc)return function(s,o){return{mapValue:{fields:{[$re]:{stringValue:jre},[BN]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return v5(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${AM(n)}`)}(t,e)}function Hne(t,e){const r={};return Ore(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lp(t,(n,i)=>{const a=cS(i,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function Wne(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qr||t instanceof dc||t instanceof ol||t instanceof Mn||t instanceof uS||t instanceof pc)}function U5(t,e,r){if(!Wne(r)||!Mre(r)){const n=AM(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function x3(t,e,r){if((e=gi(e))instanceof LM)return e._internalPath;if(typeof e=="string")return z5(t,e);throw WN("Field path arguments must be of type string or ",t,!1,void 0,r)}const lTe=new RegExp("[~\\*/\\[\\]]");function z5(t,e,r){if(e.search(lTe)>=0)throw WN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new LM(...e.split("."))._internalPath}catch{throw WN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function WN(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Ge(Te.INVALID_ARGUMENT,o+t+l)}function Gne(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(jM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class uTe extends Kne{data(){return super.data()}}function jM(t,e){return typeof e=="string"?z5(t,e):e instanceof LM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xne(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ge(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q5{}class H5 extends q5{}function fS(t,e,...r){let n=[];e instanceof q5&&n.push(e),n=n.concat(r),function(a){const s=a.filter(l=>l instanceof W5).length,o=a.filter(l=>l instanceof VM).length;if(s>1||s>0&&o>0)throw new Ge(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class VM extends H5{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new VM(e,r,n)}_apply(e){const r=this._parse(e);return Qne(e._query,r),new vh(e.firestore,e.converter,f3(e._query,r))}_parse(e){const r=BM(e.firestore);return function(a,s,o,l,u,c,f){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){w7(f,c);const p=[];for(const m of f)p.push(b7(l,a,m));h={arrayValue:{values:p}}}else h=b7(l,a,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||w7(f,c),h=oTe(o,s,f,c==="in"||c==="not-in");return Qn.create(u,c,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Yne(t,e,r){const n=e,i=jM("where",t);return VM._create(i,n,r)}class W5 extends q5{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new W5(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:cu.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)Qne(s,l),s=f3(s,l)}(e._query,r),new vh(e.firestore,e.converter,f3(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class G5 extends H5{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new G5(e,r)}_apply(e){const r=function(i,a,s){if(i.startAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new CA(a,s)}(e._query,this._field,this._direction);return new vh(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new Fw(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function K5(t,e="asc"){const r=e,n=jM("orderBy",t);return G5._create(n,r)}class X5 extends H5{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new X5(e,r,n)}_apply(e){return new vh(e.firestore,e.converter,jN(e._query,this._limit,this._limitType))}}function cTe(t){return X5._create("limit",t,"F")}function b7(t,e,r){if(typeof(r=gi(r))=="string"){if(r==="")throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kre(e)&&r.indexOf("/")!==-1)throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(qr.fromString(r));if(!ct.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return R9(t,new ct(n))}if(r instanceof Mn)return R9(t,r._key);throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AM(r)}.`)}function w7(t,e){if(!Array.isArray(t)||t.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qne(t,e){const r=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class fTe{convertValue(e,r="none"){switch(yp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(vp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Lp(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,i,a;const r=(a=(i=(n=e.fields)==null?void 0:n[BN].arrayValue)==null?void 0:i.values)==null?void 0:a.map(s=>$n(s.doubleValue));return new pc(r)}convertGeoPoint(e){return new dc($n(e.latitude),$n(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=SM(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(_A(e));default:return null}}convertTimestamp(e){const r=gp(e);return new Qr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=qr.fromString(e);hr(yne(n),9688,{name:e});const i=new EA(n.get(1),n.get(3)),a=new ct(n.popFirst(5));return i.isEqual(r)||Jf(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zne(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class tx{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ev extends Kne{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(jM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ev._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ev._jsonSchemaVersion="firestore/documentSnapshot/1.0",ev._jsonSchema={type:Zn("string",ev._jsonSchemaVersion),bundleSource:Zn("string","DocumentSnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class hD extends ev{data(e={}){return super.data(e)}}class tv{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new tx(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new hD(this._firestore,this._userDataWriter,n.key,n,new tx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ge(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new hD(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tx(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new hD(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tx(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:hTe(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=f5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hTe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jne(t){t=js(t,Mn);const e=js(t.firestore,rh);return QCe(FM(e),t._key).then(r=>rie(e,t,r))}tv._jsonSchemaVersion="firestore/querySnapshot/1.0",tv._jsonSchema={type:Zn("string",tv._jsonSchemaVersion),bundleSource:Zn("string","QuerySnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class Y5 extends fTe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,r)}}function UM(t){t=js(t,vh);const e=js(t.firestore,rh),r=FM(e),n=new Y5(e);return Xne(t._query),ZCe(r,t._query).then(i=>new tv(e,n,t,i))}function dTe(t,e,r){t=js(t,Mn);const n=js(t.firestore,rh),i=Zne(t.converter,e);return qM(n,[qne(BM(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ml.none())])}function eie(t,e,r,...n){t=js(t,Mn);const i=js(t.firestore,rh),a=BM(i);let s;return s=typeof(e=gi(e))=="string"||e instanceof LM?sTe(a,"updateDoc",t._key,e,r,n):aTe(a,"updateDoc",t._key,e),qM(i,[s.toMutation(t._key,ml.exists(!0))])}function tie(t){return qM(js(t.firestore,rh),[new y5(t._key,ml.none())])}function zM(t,e){const r=js(t.firestore,rh),n=xp(t),i=Zne(t.converter,e);return qM(r,[qne(BM(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ml.exists(!1))]).then(()=>n)}function pTe(t,...e){var l,u,c;t=gi(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||y7(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(y7(e[n])){const f=e[n];e[n]=(l=f.next)==null?void 0:l.bind(f),e[n+1]=(u=f.error)==null?void 0:u.bind(f),e[n+2]=(c=f.complete)==null?void 0:c.bind(f)}let a,s,o;if(t instanceof Mn)s=js(t.firestore,rh),o=CM(t._key.path),a={next:f=>{e[n]&&e[n](rie(s,t,f))},error:e[n+1],complete:e[n+2]};else{const f=js(t,vh);s=js(f.firestore,rh),o=f._query;const h=new Y5(s);a={next:d=>{e[n]&&e[n](new tv(s,h,f,d))},error:e[n+1],complete:e[n+2]},Xne(t._query)}return function(h,d,p,m){const v=new B5(m),y=new R5(d,v,p);return h.asyncQueue.enqueueAndForget(async()=>I5(await HN(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>O5(await HN(h),y))}}(FM(s),o,i,a)}function qM(t,e){return function(n,i){const a=new Ff;return n.asyncQueue.enqueueAndForget(async()=>$Ce(await YCe(n),i,a)),a.promise}(FM(t),e)}function rie(t,e,r){const n=r.docs.get(e._key),i=new Y5(t);return new ev(t,i,e._key,n,new tx(r.hasPendingWrites,r.fromCache),e.converter)}function Lf(){return new j5("serverTimestamp")}function mTe(t){return new V5("increment",t)}(function(e,r=!0){(function(i){Ow=i})(Ov),pv(new pp("firestore",(n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),o=new rh(new oEe(n.getProvider("auth-internal")),new cEe(s,n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ge(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new EA(u.options.projectId,c)}(s,i),s);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),cc(A9,_9,e),cc(A9,_9,"esm2020")})();const Za=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),A3=[.001,0,0,.001,0,0],Vk=1.35,fo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},MA="pdfjs_internal_editor_",Ot={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Zt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},gTe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_3={TRIANGLES:1,LATTICE:2},Xi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dD={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Hn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vy={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},HM={ERRORS:0,WARNINGS:1,INFOS:5},IA={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},N1={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},vTe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let WM=HM.WARNINGS;function yTe(t){Number.isInteger(t)&&(WM=t)}function bTe(){return WM}function GM(t){WM>=HM.INFOS&&console.info(`Info: ${t}`)}function Tt(t){WM>=HM.WARNINGS&&console.warn(`Warning: ${t}`)}function Br(t){throw new Error(t)}function Jt(t,e){t||Br(e)}function wTe(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function nie(t,e=null,r=null){if(!t)return null;if(r&&typeof t=="string"){if(r.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(r.tryConvertEncoding)try{t=STe(t)}catch{}}const n=e?URL.parse(t,e):URL.parse(t);return wTe(n)?n:null}function iie(t,e,r=!1){const n=URL.parse(t);return n?(n.hash=e,n.href):r&&nie(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Dt(t,e,r,n=!1){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!0,writable:!1}),r}const Fv=function(){function e(r,n){this.message=r,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class x7 extends Fv{constructor(e,r){super(e,"PasswordException"),this.code=r}}class Uk extends Fv{constructor(e,r){super(e,"UnknownErrorException"),this.details=r}}class E3 extends Fv{constructor(e){super(e,"InvalidPDFException")}}class GN extends Fv{constructor(e,r,n){super(e,"ResponseException"),this.status=r,this.missing=n}}class xTe extends Fv{constructor(e){super(e,"FormatError")}}class Ap extends Fv{constructor(e){super(e,"AbortException")}}function aie(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&Br("Invalid argument for bytesToString");const e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=r){const a=Math.min(i+r,e),s=t.subarray(i,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function hS(t){typeof t!="string"&&Br("Invalid argument for stringToBytes");const e=t.length,r=new Uint8Array(e);for(let n=0;n<e;++n)r[n]=t.charCodeAt(n)&255;return r}function ATe(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function _Te(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function ETe(){try{return new Function(""),!0}catch{return!1}}class da{static get isLittleEndian(){return Dt(this,"isLittleEndian",_Te())}static get isEvalSupported(){return Dt(this,"isEvalSupported",ETe())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Dt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Dt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:r}=navigator;return Dt(this,"platform",{isAndroid:r.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:r.includes("Firefox")})}static get isCSSRoundSupported(){var e,r;return Dt(this,"isCSSRoundSupported",(r=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:r.call(e,"width: round(1.5px, 1px)"))}}const zk=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var zf,pD,S3;class et{static makeHexColor(e,r,n){return`#${zk[e]}${zk[r]}${zk[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,r){let n;e[0]?(e[0]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[0],r[2]*=e[0],e[3]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[3],r[3]*=e[3]):(n=r[0],r[0]=r[1],r[1]=n,n=r[2],r[2]=r[3],r[3]=n,e[1]<0&&(n=r[1],r[1]=r[3],r[3]=n),r[1]*=e[1],r[3]*=e[1],e[2]<0&&(n=r[0],r[0]=r[2],r[2]=n),r[0]*=e[2],r[2]*=e[2]),r[0]+=e[4],r[1]+=e[5],r[2]+=e[4],r[3]+=e[5]}static transform(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}static multiplyByDOMMatrix(e,r){return[e[0]*r.a+e[2]*r.b,e[1]*r.a+e[3]*r.b,e[0]*r.c+e[2]*r.d,e[1]*r.c+e[3]*r.d,e[0]*r.e+e[2]*r.f+e[4],e[1]*r.e+e[3]*r.f+e[5]]}static applyTransform(e,r,n=0){const i=e[n],a=e[n+1];e[n]=i*r[0]+a*r[2]+r[4],e[n+1]=i*r[1]+a*r[3]+r[5]}static applyTransformToBezier(e,r,n=0){const i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5];for(let c=0;c<6;c+=2){const f=e[n+c],h=e[n+c+1];e[n+c]=f*i+h*s+l,e[n+c+1]=f*a+h*o+u}}static applyInverseTransform(e,r){const n=e[0],i=e[1],a=r[0]*r[3]-r[1]*r[2];e[0]=(n*r[3]-i*r[2]+r[2]*r[5]-r[4]*r[3])/a,e[1]=(-n*r[1]+i*r[0]+r[4]*r[1]-r[5]*r[0])/a}static axialAlignedBoundingBox(e,r,n){const i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=e[0],f=e[1],h=e[2],d=e[3];let p=i*c+l,m=p,v=i*h+l,y=v,w=o*f+u,b=w,_=o*d+u,x=_;if(a!==0||s!==0){const A=a*c,E=a*h,S=s*f,C=s*d;p+=S,y+=S,v+=C,m+=C,w+=A,x+=A,_+=E,b+=E}n[0]=Math.min(n[0],p,v,m,y),n[1]=Math.min(n[1],w,_,b,x),n[2]=Math.max(n[2],p,v,m,y),n[3]=Math.max(n[3],w,_,b,x)}static inverseTransform(e){const r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]}static singularValueDecompose2dScale(e,r){const n=e[0],i=e[1],a=e[2],s=e[3],o=n**2+i**2,l=n*a+i*s,u=a**2+s**2,c=(o+u)/2,f=Math.sqrt(c**2-(o*u-l**2));r[0]=Math.sqrt(c+f||1),r[1]=Math.sqrt(c-f||1)}static normalizeRect(e){const r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r}static intersect(e,r){const n=Math.max(Math.min(e[0],e[2]),Math.min(r[0],r[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(r[0],r[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(r[1],r[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(r[1],r[3]));return a>s?null:[n,a,i,s]}static pointBoundingBox(e,r,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],r)}static rectBoundingBox(e,r,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],r,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],r,i)}static bezierBoundingBox(e,r,n,i,a,s,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],r,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],r,l),W(this,zf,S3).call(this,e,n,a,o,r,i,s,l,3*(-e+3*(n-a)+o),6*(e-2*n+a),3*(n-e),u),W(this,zf,S3).call(this,e,n,a,o,r,i,s,l,3*(-r+3*(i-s)+l),6*(r-2*i+s),3*(i-r),u)}}zf=new WeakSet,pD=function(e,r,n,i,a,s,o,l,u,c){if(u<=0||u>=1)return;const f=1-u,h=u*u,d=h*u,p=f*(f*(f*e+3*u*r)+3*h*n)+d*i,m=f*(f*(f*a+3*u*s)+3*h*o)+d*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)},S3=function(e,r,n,i,a,s,o,l,u,c,f,h){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&W(this,zf,pD).call(this,e,r,n,i,a,s,o,l,-f/c,h);return}const d=c**2-4*f*u;if(d<0)return;const p=Math.sqrt(d),m=2*u;W(this,zf,pD).call(this,e,r,n,i,a,s,o,l,(-c+p)/m,h),W(this,zf,pD).call(this,e,r,n,i,a,s,o,l,(-c-p)/m,h)},$(et,zf);function STe(t){return decodeURIComponent(escape(t))}let qk=null,A7=null;function CTe(t){return qk||(qk=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,A7=new Map([["","t"]])),t.replaceAll(qk,(e,r,n)=>r?r.normalize("NFKC"):A7.get(n))}function sie(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),aie(t)}const zy="pdfjs_internal_id_";function TTe(t,e,r){if(!Array.isArray(r)||r.length<2)return!1;const[n,i,...a]=r;if(!t(n)&&!Number.isInteger(n)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Ja(t,e,r){return Math.min(Math.max(t,e),r)}function oie(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(aie(t))}function DTe(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):hS(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(r=>{r(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,r)=>e+r,0)});class OA{static textContent(e){const r=[],n={items:r,styles:Object.create(null)};function i(a){var l;if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(OA.shouldBuildText(o))(l=a==null?void 0:a.attributes)!=null&&l.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&r.push({str:s}),!!a.children)for(const u of a.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class lie{static setupStorage(e,r,n,i,a){const s=i.getValue(r,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(r,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(r,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(r,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of n.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(r,{value:u})});break}}static setAttributes({html:e,element:r,storage:n=null,intent:i,linkService:a}){const{attributes:s}=r,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[l,u]of Object.entries(s))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,r,n)}static render(e){var f,h;const r=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const o=a!=="richText",l=e.div;if(l.append(s),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);s.append(d),o&&OA.shouldBuildText(i.name)&&u.push(d)}return{textDivs:u}}const c=[[i,-1,s]];for(;c.length>0;){const[d,p,m]=c.at(-1);if(p+1===d.children.length){c.pop();continue}const v=d.children[++c.at(-1)[1]];if(v===null)continue;const{name:y}=v;if(y==="#text"){const b=document.createTextNode(v.value);u.push(b),m.append(b);continue}const w=(f=v==null?void 0:v.attributes)!=null&&f.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(m.append(w),v.attributes&&this.setAttributes({html:w,element:v,storage:r,intent:a,linkService:n}),((h=v.children)==null?void 0:h.length)>0)c.push([v,-1,w]);else if(v.value){const b=document.createTextNode(v.value);o&&OA.shouldBuildText(y)&&u.push(b),w.append(b)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const r=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=r,e.div.hidden=!1}}const Rc="http://www.w3.org/2000/svg",xm=class xm{};Oe(xm,"CSS",96),Oe(xm,"PDF",72),Oe(xm,"PDF_TO_CSS_UNITS",xm.CSS/xm.PDF);let _p=xm;async function dS(t,e="text"){if(rx(t,document.baseURI)){const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);switch(e){case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"json":return r.json()}return r.text()}return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":r(i.response);return}r(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class pS{constructor({viewBox:e,userUnit:r,scale:n,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=r,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=s,n*=r;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,f,h,d;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,f=0,h=0,d=1;break;case 90:c=0,f=1,h=1,d=0;break;case 270:c=0,f=-1,h=-1,d=0;break;case 0:c=1,f=0,h=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,d=-d);let p,m,v,y;c===0?(p=Math.abs(u-e[1])*n+a,m=Math.abs(l-e[0])*n+s,v=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+a,m=Math.abs(u-e[1])*n+s,v=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[c*n,f*n,h*n,d*n,p-c*n*l-h*n*u,m-f*n*l-d*n*u],this.width=v,this.height=y}get rawDims(){const e=this.viewBox;return Dt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:r=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new pS({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,r){const n=[e,r];return et.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const r=[e[0],e[1]];et.applyTransform(r,this.transform);const n=[e[2],e[3]];return et.applyTransform(n,this.transform),[r[0],r[1],n[0],n[1]]}convertToPdfPoint(e,r){const n=[e,r];return et.applyInverseTransform(n,this.transform),n}}class Q5 extends Fv{constructor(e,r=0){super(e,"RenderingCancelledException"),this.extraDelay=r}}function KM(t){const e=t.length;let r=0;for(;r<e&&t[r].trim()==="";)r++;return t.substring(r,r+5).toLowerCase()==="data:"}function Z5(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function NTe(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function PTe(t,e="document.pdf"){if(typeof t!="string")return e;if(KM(t))return Tt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},a=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(a.test(s))return i(s);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const u of o)if(a.test(u))return i(u);const l=Array.from(n.searchParams.keys()).reverse();for(const u of l)if(a.test(u))return i(u)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class _7{constructor(){Oe(this,"started",Object.create(null));Oe(this,"times",[])}time(e){e in this.started&&Tt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Tt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let r=0;for(const{name:n}of this.times)r=Math.max(n.length,r);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(r)} ${a-i}ms
`);return e.join("")}}function rx(t,e){const r=e?URL.parse(t,e):URL.parse(t);return(r==null?void 0:r.protocol)==="http:"||(r==null?void 0:r.protocol)==="https:"}function wl(t){t.preventDefault()}function Dn(t){t.preventDefault(),t.stopPropagation()}function MTe(t){console.log("Deprecated API usage: "+t)}var i_;class KN{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;g(this,i_)||R(this,i_,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const r=g(this,i_).exec(e);if(!r)return null;const n=parseInt(r[1],10);let i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(r[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(r[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(r[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(r[6],10);l=l>=0&&l<=59?l:0;const u=r[7]||"Z";let c=parseInt(r[8],10);c=c>=0&&c<=23?c:0;let f=parseInt(r[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(s+=c,o+=f):u==="+"&&(s-=c,o-=f),new Date(Date.UTC(n,i,a,s,o,l))}}i_=new WeakMap,$(KN,i_);function ITe(t,{scale:e=1,rotation:r=0}){const{width:n,height:i}=t.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new pS({viewBox:a,userUnit:1,scale:e,rotation:r})}function mS(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Tt(`Not a valid color format: "${t}"`),[0,0,0])}function OTe(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const r of t.keys()){e.style.color=r;const n=window.getComputedStyle(e).color;t.set(r,mS(n))}e.remove()}function fn(t){const{a:e,b:r,c:n,d:i,e:a,f:s}=t.getTransform();return[e,r,n,i,a,s]}function Du(t){const{a:e,b:r,c:n,d:i,e:a,f:s}=t.getTransform().invertSelf();return[e,r,n,i,a,s]}function vv(t,e,r=!1,n=!0){if(e instanceof pS){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=t,o=da.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${a}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!r||e.rotation%180===0?(s.width=c,s.height=f):(s.width=f,s.height=c)}n&&t.setAttribute("data-main-rotation",e.rotation)}class bc{constructor(){const{pixelRatio:e}=bc;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,r,n,i,a=-1){let s=1/0,o=1/0,l=1/0;n=bc.capPixels(n,a),n>0&&(s=Math.sqrt(n/(e*r))),i!==-1&&(o=i/e,l=i/r);const u=Math.min(s,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,r){if(r>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+r/100));return e>0?Math.min(e,n):n}return e}}const C3=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class kTe{static get isDarkMode(){var e;return Dt(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class RTe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:r}=e;r.width=r.height="0",r.display="none",r.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Dt(this,"commentForegroundColor",mS(n))}}function FTe(t,e,r,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return t=Math.round(t*n+i),e=Math.round(e*n+i),r=Math.round(r*n+i),[t,e,r]}function E7(t,e){const r=t[0]/255,n=t[1]/255,i=t[2]/255,a=Math.max(r,n,i),s=Math.min(r,n,i),o=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const l=a-s;switch(e[1]=o<.5?l/(a+s):l/(2-a-s),a){case r:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-r)/l+2)*60;break;case i:e[0]=((r-n)/l+4)*60;break}}e[2]=o}function T3(t,e){const r=t[0],n=t[1],i=t[2],a=(1-Math.abs(2*i-1))*n,s=a*(1-Math.abs(r/60%2-1)),o=i-a/2;switch(Math.floor(r/60)){case 0:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 1:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 2:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 3:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 4:e[0]=s+o,e[1]=o,e[2]=a+o;break;case 5:case 6:e[0]=a+o,e[1]=o,e[2]=s+o;break}}function S7(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function C7(t,e,r){T3(t,r),r.map(S7);const n=.2126*r[0]+.7152*r[1]+.0722*r[2];T3(e,r),r.map(S7);const i=.2126*r[0]+.7152*r[1]+.0722*r[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const T7=new Map;function LTe(t,e){const r=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=T7.get(r);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);E7(t,s);const o=i.subarray(6,9);E7(e,o);const l=o[2]<.5,u=l?12:4.5;if(s[2]=l?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),C7(s,o,a)<u){let c,f;l?(c=s[2],f=1):(c=0,f=s[2]);const h=.005;for(;f-c>h;){const d=s[2]=(c+f)/2;l===C7(s,o,a)<u?c=d:f=d}s[2]=l?f:c}return T3(s,a),n=et.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),T7.set(r,n),n}function uie({html:t,dir:e,className:r},n){const i=document.createDocumentFragment();if(typeof t=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=t.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){const u=s[o];a.append(document.createTextNode(u)),o<l-1&&a.append(document.createElement("br"))}i.append(a)}else lie.render({xfaHtml:t,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",r),n.append(i)}function cie(t){const e=new Path2D;if(!t)return e;for(let r=0,n=t.length;r<n;)switch(t[r++]){case N1.moveTo:e.moveTo(t[r++],t[r++]);break;case N1.lineTo:e.lineTo(t[r++],t[r++]);break;case N1.curveTo:e.bezierCurveTo(t[r++],t[r++],t[r++],t[r++],t[r++],t[r++]);break;case N1.quadraticCurveTo:e.quadraticCurveTo(t[r++],t[r++],t[r++],t[r++]);break;case N1.closePath:e.closePath();break;default:Tt(`Unrecognized drawing path operator: ${t[r-1]}`);break}return e}var Qh,Zh,Wo,Go,a_,Jh,y0,b0,s_,kP,fie,la,hie,die,yy,nx;const $c=class $c{constructor(e){$(this,la);$(this,Qh,null);$(this,Zh,null);$(this,Wo);$(this,Go,null);$(this,a_,null);$(this,Jh,null);$(this,y0,null);$(this,b0,null);R(this,Wo,e),g($c,s_)||R($c,s_,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=R(this,Qh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const r=g(this,Wo)._uiManager._signal;r instanceof AbortSignal&&!r.aborted&&(e.addEventListener("contextmenu",wl,{signal:r}),e.addEventListener("pointerdown",W($c,kP,fie),{signal:r}));const n=R(this,Go,document.createElement("div"));n.className="buttons",e.append(n);const i=g(this,Wo).toolbarPosition;if(i){const{style:a}=e,s=g(this,Wo)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return g(this,Qh)}hide(){var e;g(this,Qh).classList.add("hidden"),(e=g(this,Zh))==null||e.hideDropdown()}show(){var e,r;g(this,Qh).classList.remove("hidden"),(e=g(this,a_))==null||e.shown(),(r=g(this,Jh))==null||r.shown()}addDeleteButton(){const{editorType:e,_uiManager:r}=g(this,Wo),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",g($c,s_)[e]),W(this,la,yy).call(this,n)&&n.addEventListener("click",i=>{r.delete()},{signal:r._signal}),g(this,Go).append(n)}async addAltText(e){const r=await e.render();W(this,la,yy).call(this,r),g(this,Go).append(r,g(this,la,nx)),R(this,a_,e)}addComment(e,r=null){if(g(this,Jh))return;const n=e.renderForToolbar();if(!n)return;W(this,la,yy).call(this,n);const i=R(this,y0,g(this,la,nx));r?(g(this,Go).insertBefore(n,r),g(this,Go).insertBefore(i,r)):g(this,Go).append(n,i),R(this,Jh,e),e.toolbar=this}addColorPicker(e){if(g(this,Zh))return;R(this,Zh,e);const r=e.renderButton();W(this,la,yy).call(this,r),g(this,Go).append(r,g(this,la,nx))}async addEditSignatureButton(e){const r=R(this,b0,await e.renderEditButton(g(this,Wo)));W(this,la,yy).call(this,r),g(this,Go).append(r,g(this,la,nx))}removeButton(e){var r,n;switch(e){case"comment":(r=g(this,Jh))==null||r.removeToolbarCommentButton(),R(this,Jh,null),(n=g(this,y0))==null||n.remove(),R(this,y0,null);break}}async addButton(e,r){switch(e){case"colorPicker":r&&this.addColorPicker(r);break;case"altText":r&&await this.addAltText(r);break;case"editSignature":r&&await this.addEditSignatureButton(r);break;case"delete":this.addDeleteButton();break;case"comment":r&&this.addComment(r);break}}async addButtonBefore(e,r,n){if(!r&&e==="comment")return;const i=g(this,Go).querySelector(n);i&&e==="comment"&&this.addComment(r,i)}updateEditSignatureButton(e){g(this,b0)&&(g(this,b0).title=e)}remove(){var e;g(this,Qh).remove(),(e=g(this,Zh))==null||e.destroy(),R(this,Zh,null)}};Qh=new WeakMap,Zh=new WeakMap,Wo=new WeakMap,Go=new WeakMap,a_=new WeakMap,Jh=new WeakMap,y0=new WeakMap,b0=new WeakMap,s_=new WeakMap,kP=new WeakSet,fie=function(e){e.stopPropagation()},la=new WeakSet,hie=function(e){g(this,Wo)._focusEventsAllowed=!1,Dn(e)},die=function(e){g(this,Wo)._focusEventsAllowed=!0,Dn(e)},yy=function(e){const r=g(this,Wo)._uiManager._signal;return!(r instanceof AbortSignal)||r.aborted?!1:(e.addEventListener("focusin",W(this,la,hie).bind(this),{capture:!0,signal:r}),e.addEventListener("focusout",W(this,la,die).bind(this),{capture:!0,signal:r}),e.addEventListener("contextmenu",wl,{signal:r}),!0)},nx=function(){const e=document.createElement("div");return e.className="divider",e},$($c,kP),$($c,s_,null);let D3=$c;var o_,Rm,zc,ph,pie,mie,N3;class BTe{constructor(e){$(this,ph);$(this,o_,null);$(this,Rm,null);$(this,zc);R(this,zc,e)}show(e,r,n){const[i,a]=W(this,ph,mie).call(this,r,n),{style:s}=g(this,Rm)||R(this,Rm,W(this,ph,pie).call(this));e.append(g(this,Rm)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,Rm).remove()}}o_=new WeakMap,Rm=new WeakMap,zc=new WeakMap,ph=new WeakSet,pie=function(){const e=R(this,Rm,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const r=g(this,zc)._signal;r instanceof AbortSignal&&!r.aborted&&e.addEventListener("contextmenu",wl,{signal:r});const n=R(this,o_,document.createElement("div"));return n.className="buttons",e.append(n),g(this,zc).hasCommentManager()&&W(this,ph,N3).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{g(this,zc).commentSelection("floating_button")}),W(this,ph,N3).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{g(this,zc).highlightSelection("floating_button")}),e},mie=function(e,r){let n=0,i=0;for(const a of e){const s=a.y+a.height;if(s<n)continue;const o=a.x+(r?a.width:0);if(s>n){i=o,n=s;continue}r?o>i&&(i=o):o<i&&(i=o)}return[r?1-i:i,n]},N3=function(e,r,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",r);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const o=g(this,zc)._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",wl,{signal:o}),a.addEventListener("click",i,{signal:o})),g(this,o_).append(a)};function gie(t,e,r){for(const n of r)e.addEventListener(n,t[n].bind(t))}var Fm,Lm,w0,Bm;const Sr=class Sr{static initializeAndAddPointerId(e){(g(Sr,Lm)||R(Sr,Lm,new Set)).add(e)}static setPointer(e,r){g(Sr,Fm)||R(Sr,Fm,r),g(Sr,Bm)??R(Sr,Bm,e)}static setTimeStamp(e){R(Sr,w0,e)}static isSamePointerId(e){return g(Sr,Fm)===e}static isSamePointerIdOrRemove(e){var r;return g(Sr,Fm)===e?!0:((r=g(Sr,Lm))==null||r.delete(e),!1)}static isSamePointerType(e){return g(Sr,Bm)===e}static isInitializedAndDifferentPointerType(e){return g(Sr,Bm)!==null&&!Sr.isSamePointerType(e)}static isSameTimeStamp(e){return g(Sr,w0)===e}static isUsingMultiplePointers(){var e;return((e=g(Sr,Lm))==null?void 0:e.size)>=1}static clearPointerType(){R(Sr,Bm,null)}static clearPointerIds(){R(Sr,Fm,NaN),R(Sr,Lm,null)}static clearTimeStamp(){R(Sr,w0,NaN)}};Fm=new WeakMap,Lm=new WeakMap,w0=new WeakMap,Bm=new WeakMap,$(Sr,Fm,NaN),$(Sr,Lm,null),$(Sr,w0,NaN),$(Sr,Bm,null);let Sa=Sr;var RP;class $Te{constructor(){$(this,RP,0)}get id(){return`${MA}${ni(this,RP)._++}`}}RP=new WeakMap;var x0,l_,Ca,A0,mD;const ZV=class ZV{constructor(){$(this,A0);$(this,x0,sie());$(this,l_,0);$(this,Ca,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:r,name:n,size:i,type:a}=e;return W(this,A0,mD).call(this,`${r}_${n}_${i}_${a}`,e)}async getFromUrl(e){return W(this,A0,mD).call(this,e,e)}async getFromBlob(e,r){const n=await r;return W(this,A0,mD).call(this,e,n)}async getFromId(e){g(this,Ca)||R(this,Ca,new Map);const r=g(this,Ca).get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return this.getFromFile(r.file);if(r.blobPromise){const{blobPromise:n}=r;return delete r.blobPromise,this.getFromBlob(r.id,n)}return this.getFromUrl(r.url)}getFromCanvas(e,r){g(this,Ca)||R(this,Ca,new Map);let n=g(this,Ca).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(r.width,r.height);return i.getContext("2d").drawImage(r,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${g(this,x0)}_${ni(this,l_)._++}`,refCounter:1,isSvg:!1},g(this,Ca).set(e,n),g(this,Ca).set(n.id,n),n}getSvgUrl(e){const r=g(this,Ca).get(e);return r!=null&&r.isSvg?r.svgUrl:null}deleteId(e){var i;g(this,Ca)||R(this,Ca,new Map);const r=g(this,Ca).get(e);if(!r||(r.refCounter-=1,r.refCounter!==0))return;const{bitmap:n}=r;if(!r.url&&!r.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),r.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),r.bitmap=null}isValidId(e){return e.startsWith(`image_${g(this,x0)}_`)}};x0=new WeakMap,l_=new WeakMap,Ca=new WeakMap,A0=new WeakSet,mD=async function(e,r){g(this,Ca)||R(this,Ca,new Map);let n=g(this,Ca).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${g(this,x0)}_${ni(this,l_)._++}`,refCounter:0,isSvg:!1});let i;if(typeof r=="string"?(n.url=r,i=await dS(r,"blob")):r instanceof File?i=n.file=r:r instanceof Blob&&(i=r),i.type==="image/svg+xml"){const a=ZV._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},s.onload=async()=>{const f=n.svgUrl=s.result;o.src=await a?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=s.onerror=c});s.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Tt(i),n=null}return g(this,Ca).set(e,n),n&&g(this,Ca).set(n.id,n),n};let P3=ZV;var Rn,ed,u_,cn;class jTe{constructor(e=128){$(this,Rn,[]);$(this,ed,!1);$(this,u_);$(this,cn,-1);R(this,u_,e)}add({cmd:e,undo:r,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),g(this,ed))return;const l={cmd:e,undo:r,post:n,type:a};if(g(this,cn)===-1){g(this,Rn).length>0&&(g(this,Rn).length=0),R(this,cn,0),g(this,Rn).push(l);return}if(s&&g(this,Rn)[g(this,cn)].type===a){o&&(l.undo=g(this,Rn)[g(this,cn)].undo),g(this,Rn)[g(this,cn)]=l;return}const u=g(this,cn)+1;u===g(this,u_)?g(this,Rn).splice(0,1):(R(this,cn,u),u<g(this,Rn).length&&g(this,Rn).splice(u)),g(this,Rn).push(l)}undo(){if(g(this,cn)===-1)return;R(this,ed,!0);const{undo:e,post:r}=g(this,Rn)[g(this,cn)];e(),r==null||r(),R(this,ed,!1),R(this,cn,g(this,cn)-1)}redo(){if(g(this,cn)<g(this,Rn).length-1){R(this,cn,g(this,cn)+1),R(this,ed,!0);const{cmd:e,post:r}=g(this,Rn)[g(this,cn)];e(),r==null||r(),R(this,ed,!1)}}hasSomethingToUndo(){return g(this,cn)!==-1}hasSomethingToRedo(){return g(this,cn)<g(this,Rn).length-1}cleanType(e){if(g(this,cn)!==-1){for(let r=g(this,cn);r>=0;r--)if(g(this,Rn)[r].type!==e){g(this,Rn).splice(r+1,g(this,cn)-r),R(this,cn,r);return}g(this,Rn).length=0,R(this,cn,-1)}}destroy(){R(this,Rn,null)}}Rn=new WeakMap,ed=new WeakMap,u_=new WeakMap,cn=new WeakMap;var FP,vie;class gS{constructor(e){$(this,FP);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=da.platform;for(const[n,i,a={}]of e)for(const s of n){const o=s.startsWith("mac+");r&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!r&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,r){if(!this.allKeys.has(r.key))return;const n=this.callbacks.get(W(this,FP,vie).call(this,r));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=n;o&&!o(e,r)||(i.bind(e,...s,r)(),a||Dn(r))}}FP=new WeakSet,vie=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r};const LP=class LP{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return OTe(e),Dt(this,"_colors",e)}convert(e){const r=mS(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[n,i]of this._colors)if(i.every((a,s)=>a===r[s]))return LP._colorsMapping.get(n);return r}getHexCode(e){const r=this._colors.get(e);return r?et.makeHexColor(...r):e}};Oe(LP,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let M3=LP;var _0,Gs,E0,xn,si,S0,Ko,C0,Xo,Ta,td,rd,T0,nd,Ou,Yo,$m,c_,f_,D0,h_,ku,id,N0,ad,Ru,BP,sd,P0,d_,od,jm,M0,ld,p_,Gn,pr,qc,ud,cd,m_,I0,g_,fd,Fu,Hc,v_,y_,Qo,He,gD,I3,yie,bie,ix,wie,xie,Aie,O3,_ie,Eie,Sie,Cie,Ga,Fc,Tie,Die,k3,Nie,ax,R3;const Qy=class Qy{constructor(e,r,n,i,a,s,o,l,u,c,f,h,d,p,m,v){$(this,He);$(this,_0,new AbortController);$(this,Gs,null);$(this,E0,null);$(this,xn,new Map);$(this,si,new Map);$(this,S0,null);$(this,Ko,null);$(this,C0,null);$(this,Xo,new jTe);$(this,Ta,null);$(this,td,null);$(this,rd,null);$(this,T0,0);$(this,nd,new Set);$(this,Ou,null);$(this,Yo,null);$(this,$m,new Set);Oe(this,"_editorUndoBar",null);$(this,c_,!1);$(this,f_,!1);$(this,D0,!1);$(this,h_,null);$(this,ku,null);$(this,id,null);$(this,N0,null);$(this,ad,!1);$(this,Ru,null);$(this,BP,new $Te);$(this,sd,!1);$(this,P0,!1);$(this,d_,!1);$(this,od,null);$(this,jm,null);$(this,M0,null);$(this,ld,null);$(this,p_,null);$(this,Gn,Ot.NONE);$(this,pr,new Set);$(this,qc,null);$(this,ud,null);$(this,cd,null);$(this,m_,null);$(this,I0,null);$(this,g_,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});$(this,fd,[0,0]);$(this,Fu,null);$(this,Hc,null);$(this,v_,null);$(this,y_,null);$(this,Qo,null);const y=this._signal=g(this,_0).signal;R(this,Hc,e),R(this,v_,r),R(this,y_,n),R(this,S0,i),R(this,Ta,a),R(this,ud,s),R(this,I0,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:y}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),o._on("setpreference",this.onSetPreference.bind(this),{signal:y}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:y}),window.addEventListener("pointerdown",()=>{R(this,P0,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{R(this,P0,!1)},{capture:!0,signal:y}),W(this,He,wie).call(this),W(this,He,Cie).call(this),W(this,He,O3).call(this),R(this,Ko,l.annotationStorage),R(this,h_,l.filterFactory),R(this,cd,u),R(this,N0,c||null),R(this,c_,f),R(this,f_,h),R(this,D0,d),R(this,p_,p||null),this.viewParameters={realScale:_p.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=v!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const e=Qy.prototype,r=s=>g(s,Hc).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new gS([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&g(s,Hc).contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&g(s,Hc).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:r}]]))}destroy(){var e,r,n,i,a,s,o,l,u;(e=g(this,Qo))==null||e.resolve(),R(this,Qo,null),(r=g(this,_0))==null||r.abort(),R(this,_0,null),this._signal=null;for(const c of g(this,si).values())c.destroy();g(this,si).clear(),g(this,xn).clear(),g(this,$m).clear(),(n=g(this,ld))==null||n.clear(),R(this,Gs,null),g(this,pr).clear(),g(this,Xo).destroy(),(i=g(this,S0))==null||i.destroy(),(a=g(this,Ta))==null||a.destroy(),(s=g(this,ud))==null||s.destroy(),(o=g(this,Ru))==null||o.hide(),R(this,Ru,null),(l=g(this,M0))==null||l.destroy(),R(this,M0,null),R(this,E0,null),g(this,ku)&&(clearTimeout(g(this,ku)),R(this,ku,null)),g(this,Fu)&&(clearTimeout(g(this,Fu)),R(this,Fu,null)),(u=this._editorUndoBar)==null||u.destroy(),R(this,I0,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return g(this,p_)}get useNewAltTextFlow(){return g(this,f_)}get useNewAltTextWhenAddingImage(){return g(this,D0)}get hcmFilter(){return Dt(this,"hcmFilter",g(this,cd)?g(this,h_).addHCMFilter(g(this,cd).foreground,g(this,cd).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(g(this,Hc)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",g(this,N0)?new Map(g(this,N0).split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Dt(this,"highlightColors",null);const r=new Map,n=!!g(this,cd);for(const[i,a]of e){const s=i.endsWith("_HCM");if(n&&s){r.set(i.replace("_HCM",""),a);continue}!n&&!s&&r.set(i,a)}return Dt(this,"highlightColors",r)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const r=this.highlightColorNames.get(e);return this._highlightColors.get(r)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),R(this,rd,e)}setMainHighlightColorPicker(e){R(this,M0,e)}editAltText(e,r=!1){var n;(n=g(this,S0))==null||n.editAltText(this,e,r)}hasCommentManager(){return!!g(this,Ta)}editComment(e,r,n,i){var a;(a=g(this,Ta))==null||a.showDialog(this,e,r,n,i)}selectComment(e,r){const n=g(this,si).get(e),i=n==null?void 0:n.getEditorByUID(r);i==null||i.toggleComment(!0,!0)}updateComment(e){var r;(r=g(this,Ta))==null||r.updateComment(e.getData())}updatePopupColor(e){var r;(r=g(this,Ta))==null||r.updatePopupColor(e)}removeComment(e){var r;(r=g(this,Ta))==null||r.removeComments([e.uid])}toggleComment(e,r,n=void 0){var i;(i=g(this,Ta))==null||i.toggleCommentPopup(e,r,n)}makeCommentColor(e,r){var n;return e&&((n=g(this,Ta))==null?void 0:n.makeCommentColor(e,r))||null}getCommentDialogElement(){var e;return((e=g(this,Ta))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(g(this,si).has(e-1))return;const{resolve:r,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),r())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var r;(r=g(this,ud))==null||r.getSignature({uiManager:this,editor:e})}get signatureManager(){return g(this,ud)}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":R(this,D0,r);break}}onPageChanging({pageNumber:e}){R(this,T0,e-1)}focusMainContainer(){g(this,Hc).focus()}findParent(e,r){for(const n of g(this,si).values()){const{x:i,y:a,width:s,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&r>=a&&r<=a+o)return n}return null}disableUserSelect(e=!1){g(this,v_).classList.toggle("noUserSelect",e)}addShouldRescale(e){g(this,$m).add(e)}removeShouldRescale(e){g(this,$m).delete(e)}onScaleChanging({scale:e}){var r;this.commitOrRemove(),this.viewParameters.realScale=e*_p.PDF_TO_CSS_UNITS;for(const n of g(this,$m))n.onScaleChanging();(r=g(this,rd))==null||r.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",r=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=n,l=n.toString(),c=W(this,He,gD).call(this,n).closest(".textLayer"),f=this.getSelectionBoxes(c);if(!f)return;n.empty();const h=W(this,He,I3).call(this,c),d=g(this,Gn)===Ot.NONE,p=()=>{const m=h==null?void 0:h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:l});d&&this.showAllEditors("highlight",!0,!0),r&&(m==null||m.editComment())};if(d){this.switchToMode(Ot.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!g(this,Ko))return null;const r=`${MA}${e}`,n=g(this,Ko).getRawValue(r);return n&&g(this,Ko).remove(r),n}addToAnnotationStorage(e){!e.isEmpty()&&g(this,Ko)&&!g(this,Ko).has(e.id)&&g(this,Ko).setValue(e.id,e)}a11yAlert(e,r=null){const n=g(this,y_);n&&(n.setAttribute("data-l10n-id",e),r?n.setAttribute("data-l10n-args",JSON.stringify(r)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,g(this,ad)&&(R(this,ad,!1),W(this,He,ix).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const r of g(this,pr))if(r.div.contains(e)){R(this,jm,[r,e]),r._focusEventsAllowed=!1;break}}focus(){if(!g(this,jm))return;const[e,r]=g(this,jm);R(this,jm,null),r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}addEditListeners(){W(this,He,O3).call(this),this.setEditingState(!0)}removeEditListeners(){W(this,He,_ie).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:r}of e.dataTransfer.items)for(const n of g(this,Yo))if(n.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const r of e.dataTransfer.items)for(const n of g(this,Yo))if(n.isHandlingMimeForPasting(r.type)){n.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=g(this,Gs))==null||n.commitOrRemove(),!this.hasSelection)return;const r=[];for(const i of g(this,pr)){const a=i.serialize(!0);a&&r.push(a)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:r}=e;for(const a of r.items)for(const s of g(this,Yo))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let n=r.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Tt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;a.push(u)}const s=()=>{for(const l of a)W(this,He,k3).call(this,l);W(this,He,R3).call(this,a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){Tt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,Gn)!==Ot.NONE&&!this.isEditorHandlingKeyboard&&Qy._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,ad)&&(R(this,ad,!1),W(this,He,ix).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(W(this,He,xie).call(this),W(this,He,Eie).call(this),W(this,He,Ga).call(this,{isEditing:g(this,Gn)!==Ot.NONE,isEmpty:W(this,He,ax).call(this),hasSomethingToUndo:g(this,Xo).hasSomethingToUndo(),hasSomethingToRedo:g(this,Xo).hasSomethingToRedo(),hasSelectedEditor:!1})):(W(this,He,Aie).call(this),W(this,He,Sie).call(this),W(this,He,Ga).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!g(this,Yo)){R(this,Yo,e);for(const r of g(this,Yo))W(this,He,Fc).call(this,r.defaultPropertiesToUpdate)}}getId(){return g(this,BP).id}get currentLayer(){return g(this,si).get(g(this,T0))}getLayer(e){return g(this,si).get(e)}get currentPageIndex(){return g(this,T0)}addLayer(e){g(this,si).set(e.pageIndex,e),g(this,sd)?e.enable():e.disable()}removeLayer(e){g(this,si).delete(e.pageIndex)}async updateMode(e,r=null,n=!1,i=!1,a=!1){var s,o,l,u,c,f;if(g(this,Gn)!==e&&!(g(this,Qo)&&(await g(this,Qo).promise,!g(this,Qo)))){if(R(this,Qo,Promise.withResolvers()),(s=g(this,rd))==null||s.commitOrRemove(),g(this,Gn)===Ot.POPUP&&((o=g(this,Ta))==null||o.hideSidebar()),(l=g(this,Ta))==null||l.destroyPopup(),R(this,Gn,e),e===Ot.NONE){this.setEditingState(!1),W(this,He,Die).call(this);for(const h of g(this,xn).values())h.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),g(this,Qo).resolve();return}for(const h of g(this,xn).values())h.addStandaloneCommentButton();e===Ot.SIGNATURE&&await((c=g(this,ud))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await W(this,He,Tie).call(this),this.unselectAll();for(const h of g(this,si).values())h.updateMode(e);if(e===Ot.POPUP){g(this,E0)||R(this,E0,await g(this,I0).getAnnotationsByType(new Set(g(this,Yo).map(p=>p._editorType))));const h=new Set,d=[];for(const p of g(this,xn).values()){const{annotationElementId:m,hasComment:v,deleted:y}=p;m&&h.add(m),v&&!y&&d.push(p.getData())}for(const p of g(this,E0)){const{id:m,popupRef:v,contentsObj:y}=p;v&&(y!=null&&y.str)&&!h.has(m)&&!g(this,nd).has(m)&&d.push(p)}(f=g(this,Ta))==null||f.showSidebar(d)}if(!r){n&&this.addNewEditorFromKeyboard(),g(this,Qo).resolve();return}for(const h of g(this,xn).values())h.uid===r?(this.setSelected(h),a?h.editComment():i?h.enterInEditMode():h.focus()):h.unselect();g(this,Qo).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==g(this,Gn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,r){if(g(this,Yo)){switch(e){case Zt.CREATE:this.currentLayer.addNewEditor(r);return;case Zt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,m_)||R(this,m_,new Map)).set(e,r),this.showAllEditors("highlight",r);break}if(this.hasSelection)for(const n of g(this,pr))n.updateParams(e,r);else for(const n of g(this,Yo))n.updateDefaultParams(e,r)}}showAllEditors(e,r,n=!1){var a;for(const s of g(this,xn).values())s.editorType===e&&s.show(r);(((a=g(this,m_))==null?void 0:a.get(Zt.HIGHLIGHT_SHOW_ALL))??!0)!==r&&W(this,He,Fc).call(this,[[Zt.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(g(this,d_)!==e){R(this,d_,e);for(const r of g(this,si).values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}*getEditors(e){for(const r of g(this,xn).values())r.pageIndex===e&&(yield r)}getEditor(e){return g(this,xn).get(e)}addEditor(e){g(this,xn).set(e.id,e)}removeEditor(e){var r,n;e.div.contains(document.activeElement)&&(g(this,ku)&&clearTimeout(g(this,ku)),R(this,ku,setTimeout(()=>{this.focusMainContainer(),R(this,ku,null)},0))),g(this,xn).delete(e.id),e.annotationElementId&&((r=g(this,ld))==null||r.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!g(this,nd).has(e.annotationElementId))&&((n=g(this,Ko))==null||n.remove(e.id))}addDeletedAnnotationElement(e){g(this,nd).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return g(this,nd).has(e)}removeDeletedAnnotationElement(e){g(this,nd).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){g(this,Gs)!==e&&(R(this,Gs,e),e&&W(this,He,Fc).call(this,e.propertiesToUpdate))}updateUI(e){g(this,He,Nie)===e&&W(this,He,Fc).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){W(this,He,Fc).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(g(this,pr).has(e)){g(this,pr).delete(e),e.unselect(),W(this,He,Ga).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,pr).add(e),e.select(),W(this,He,Fc).call(this,e.propertiesToUpdate),W(this,He,Ga).call(this,{hasSelectedEditor:!0})}setSelected(e){var r;this.updateToolbar({mode:e.mode,editId:e.uid}),(r=g(this,rd))==null||r.commitOrRemove();for(const n of g(this,pr))n!==e&&n.unselect();g(this,pr).clear(),g(this,pr).add(e),e.select(),W(this,He,Fc).call(this,e.propertiesToUpdate),W(this,He,Ga).call(this,{hasSelectedEditor:!0})}isSelected(e){return g(this,pr).has(e)}get firstSelectedEditor(){return g(this,pr).values().next().value}unselect(e){e.unselect(),g(this,pr).delete(e),W(this,He,Ga).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,pr).size!==0}get isEnterHandled(){return g(this,pr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;g(this,Xo).undo(),W(this,He,Ga).call(this,{hasSomethingToUndo:g(this,Xo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:W(this,He,ax).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){g(this,Xo).redo(),W(this,He,Ga).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Xo).hasSomethingToRedo(),isEmpty:W(this,He,ax).call(this)})}addCommands(e){g(this,Xo).add(e),W(this,He,Ga).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:W(this,He,ax).call(this)})}cleanUndoStack(e){g(this,Xo).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const r=e?[e]:[...g(this,pr)],n=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,r.length===1?r[0].editorType:r.length);for(const o of r)o.remove()},i=()=>{for(const s of r)W(this,He,k3).call(this,s)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=g(this,Gs))==null||e.commitOrRemove()}hasSomethingToControl(){return g(this,Gs)||this.hasSelection}selectAll(){for(const e of g(this,pr))e.commit();W(this,He,R3).call(this,g(this,xn).values())}unselectAll(){var e;if(!(g(this,Gs)&&(g(this,Gs).commitOrRemove(),g(this,Gn)!==Ot.NONE))&&!((e=g(this,rd))!=null&&e.commitOrRemove())&&this.hasSelection){for(const r of g(this,pr))r.unselect();g(this,pr).clear(),W(this,He,Ga).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,r,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;g(this,fd)[0]+=e,g(this,fd)[1]+=r;const[i,a]=g(this,fd),s=[...g(this,pr)],o=1e3;g(this,Fu)&&clearTimeout(g(this,Fu)),R(this,Fu,setTimeout(()=>{R(this,Fu,null),g(this,fd)[0]=g(this,fd)[1]=0,this.addCommands({cmd:()=>{for(const l of s)g(this,xn).has(l.id)&&(l.translateInPage(i,a),l.translationDone())},undo:()=>{for(const l of s)g(this,xn).has(l.id)&&(l.translateInPage(-i,-a),l.translationDone())},mustExec:!1})},o));for(const l of s)l.translateInPage(e,r),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,Ou,new Map);for(const e of g(this,pr))g(this,Ou).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,Ou))return!1;this.disableUserSelect(!1);const e=g(this,Ou);R(this,Ou,null);let r=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,r||(r=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex);if(!r)return!1;const n=(i,a,s,o)=>{if(g(this,xn).has(i.id)){const l=g(this,si).get(o);l?i._setParentAndPosition(l,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)n(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)n(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(g(this,Ou))for(const n of g(this,Ou).keys())n.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||g(this,pr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return g(this,Gs)===e}getActive(){return g(this,Gs)}getMode(){return g(this,Gn)}isEditingMode(){return g(this,Gn)!==Ot.NONE}get imageManager(){return Dt(this,"imageManager",new P3)}getSelectionBoxes(e){if(!e)return null;const r=document.getSelection();for(let u=0,c=r.rangeCount;u<c;u++)if(!e.contains(r.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,f,h)=>({x:(c-i)/s,y:1-(u+f-n)/a,width:h/s,height:f/a});break;case"180":o=(u,c,f,h)=>({x:1-(u+f-n)/a,y:1-(c+h-i)/s,width:f/a,height:h/s});break;case"270":o=(u,c,f,h)=>({x:1-(c+h-i)/s,y:(u-n)/a,width:h/s,height:f/a});break;default:o=(u,c,f,h)=>({x:(u-n)/a,y:(c-i)/s,width:f/a,height:h/s});break}const l=[];for(let u=0,c=r.rangeCount;u<c;u++){const f=r.getRangeAt(u);if(!f.collapsed)for(const{x:h,y:d,width:p,height:m}of f.getClientRects())p===0||m===0||l.push(o(h,d,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:r}){(g(this,C0)||R(this,C0,new Map)).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){var r;(r=g(this,C0))==null||r.delete(e)}renderAnnotationElement(e){var i;const r=(i=g(this,C0))==null?void 0:i.get(e.data.id);if(!r)return;const n=g(this,Ko).getRawValue(r);n&&(g(this,Gn)===Ot.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,r,n){var a;const i=(a=g(this,ld))==null?void 0:a.get(e);i&&(i.setCanvas(r,n),g(this,ld).delete(e))}addMissingCanvas(e,r){(g(this,ld)||R(this,ld,new Map)).set(e,r)}};_0=new WeakMap,Gs=new WeakMap,E0=new WeakMap,xn=new WeakMap,si=new WeakMap,S0=new WeakMap,Ko=new WeakMap,C0=new WeakMap,Xo=new WeakMap,Ta=new WeakMap,td=new WeakMap,rd=new WeakMap,T0=new WeakMap,nd=new WeakMap,Ou=new WeakMap,Yo=new WeakMap,$m=new WeakMap,c_=new WeakMap,f_=new WeakMap,D0=new WeakMap,h_=new WeakMap,ku=new WeakMap,id=new WeakMap,N0=new WeakMap,ad=new WeakMap,Ru=new WeakMap,BP=new WeakMap,sd=new WeakMap,P0=new WeakMap,d_=new WeakMap,od=new WeakMap,jm=new WeakMap,M0=new WeakMap,ld=new WeakMap,p_=new WeakMap,Gn=new WeakMap,pr=new WeakMap,qc=new WeakMap,ud=new WeakMap,cd=new WeakMap,m_=new WeakMap,I0=new WeakMap,g_=new WeakMap,fd=new WeakMap,Fu=new WeakMap,Hc=new WeakMap,v_=new WeakMap,y_=new WeakMap,Qo=new WeakMap,He=new WeakSet,gD=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},I3=function(e){const{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(const n of g(this,si).values())if(n.hasTextLayer(e))return n;return null},yie=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=W(this,He,gD).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(g(this,Ru)||R(this,Ru,new BTe(this)),g(this,Ru).show(n,i,this.direction==="ltr"))},bie=function(){var a,s,o;const e=document.getSelection();if(!e||e.isCollapsed){g(this,qc)&&((a=g(this,Ru))==null||a.hide(),R(this,qc,null),W(this,He,Ga).call(this,{hasSelectedText:!1}));return}const{anchorNode:r}=e;if(r===g(this,qc))return;const i=W(this,He,gD).call(this,e).closest(".textLayer");if(!i){g(this,qc)&&((s=g(this,Ru))==null||s.hide(),R(this,qc,null),W(this,He,Ga).call(this,{hasSelectedText:!1}));return}if((o=g(this,Ru))==null||o.hide(),R(this,qc,r),W(this,He,Ga).call(this,{hasSelectedText:!0}),!(g(this,Gn)!==Ot.HIGHLIGHT&&g(this,Gn)!==Ot.NONE)&&(g(this,Gn)===Ot.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),R(this,ad,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=g(this,Gn)===Ot.HIGHLIGHT?W(this,He,I3).call(this,i):null;if(l==null||l.toggleDrawing(),g(this,P0)){const u=new AbortController,c=this.combinedSignal(u),f=h=>{h.type==="pointerup"&&h.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),h.type==="pointerup"&&W(this,He,ix).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}else l==null||l.toggleDrawing(!0),W(this,He,ix).call(this,"main_toolbar")}},ix=function(e=""){g(this,Gn)===Ot.HIGHLIGHT?this.highlightSelection(e):g(this,c_)&&W(this,He,yie).call(this)},wie=function(){document.addEventListener("selectionchange",W(this,He,bie).bind(this),{signal:this._signal})},xie=function(){if(g(this,id))return;R(this,id,new AbortController);const e=this.combinedSignal(g(this,id));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Aie=function(){var e;(e=g(this,id))==null||e.abort(),R(this,id,null)},O3=function(){if(g(this,od))return;R(this,od,new AbortController);const e=this.combinedSignal(g(this,od));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},_ie=function(){var e;(e=g(this,od))==null||e.abort(),R(this,od,null)},Eie=function(){if(g(this,td))return;R(this,td,new AbortController);const e=this.combinedSignal(g(this,td));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Sie=function(){var e;(e=g(this,td))==null||e.abort(),R(this,td,null)},Cie=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ga=function(e){Object.entries(e).some(([n,i])=>g(this,g_)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,g_),e)}),g(this,Gn)===Ot.HIGHLIGHT&&e.hasSelectedEditor===!1&&W(this,He,Fc).call(this,[[Zt.HIGHLIGHT_FREE,!0]]))},Fc=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Tie=async function(){if(!g(this,sd)){R(this,sd,!0);const e=[];for(const r of g(this,si).values())e.push(r.enable());await Promise.all(e);for(const r of g(this,xn).values())r.enable()}},Die=function(){if(this.unselectAll(),g(this,sd)){R(this,sd,!1);for(const e of g(this,si).values())e.disable();for(const e of g(this,xn).values())e.disable()}},k3=function(e){const r=g(this,si).get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Nie=function(){let e=null;for(e of g(this,pr));return e},ax=function(){if(g(this,xn).size===0)return!0;if(g(this,xn).size===1)for(const e of g(this,xn).values())return e.isEmpty();return!1},R3=function(e){for(const r of g(this,pr))r.unselect();g(this,pr).clear();for(const r of e)r.isEmpty()||(g(this,pr).add(r),r.select());W(this,He,Ga).call(this,{hasSelectedEditor:this.hasSelection})},Oe(Qy,"TRANSLATE_SMALL",1),Oe(Qy,"TRANSLATE_BIG",10);let yv=Qy;var Pi,Lu,Bl,O0,Bu,Ks,k0,$u,ws,Wc,Vm,ju,hd,iu,sx,vD;const Ka=class Ka{constructor(e){$(this,iu);$(this,Pi,null);$(this,Lu,!1);$(this,Bl,null);$(this,O0,null);$(this,Bu,null);$(this,Ks,null);$(this,k0,!1);$(this,$u,null);$(this,ws,null);$(this,Wc,null);$(this,Vm,null);$(this,ju,!1);R(this,ws,e),R(this,ju,e._uiManager.useNewAltTextFlow),g(Ka,hd)||R(Ka,hd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ka._l10n??(Ka._l10n=e)}async render(){const e=R(this,Bl,document.createElement("button"));e.className="altText",e.tabIndex="0";const r=R(this,O0,document.createElement("span"));e.append(r),g(this,ju)?(e.classList.add("new"),e.setAttribute("data-l10n-id",g(Ka,hd).missing),r.setAttribute("data-l10n-id",g(Ka,hd)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=g(this,ws)._uiManager._signal;e.addEventListener("contextmenu",wl,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),g(this,ws)._uiManager.editAltText(g(this,ws)),g(this,ju)&&g(this,ws)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,iu,sx)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(R(this,k0,!0),i(a))},{signal:n}),await W(this,iu,vD).call(this),e}finish(){g(this,Bl)&&(g(this,Bl).focus({focusVisible:g(this,k0)}),R(this,k0,!1))}isEmpty(){return g(this,ju)?g(this,Pi)===null:!g(this,Pi)&&!g(this,Lu)}hasData(){return g(this,ju)?g(this,Pi)!==null||!!g(this,Wc):this.isEmpty()}get guessedText(){return g(this,Wc)}async setGuessedText(e){g(this,Pi)===null&&(R(this,Wc,e),R(this,Vm,await Ka._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),W(this,iu,vD).call(this))}toggleAltTextBadge(e=!1){var r;if(!g(this,ju)||g(this,Pi)){(r=g(this,$u))==null||r.remove(),R(this,$u,null);return}if(!g(this,$u)){const n=R(this,$u,document.createElement("div"));n.className="noAltTextBadge",g(this,ws).div.append(n)}g(this,$u).classList.toggle("hidden",!e)}serialize(e){let r=g(this,Pi);return!e&&g(this,Wc)===r&&(r=g(this,Vm)),{altText:r,decorative:g(this,Lu),guessedText:g(this,Wc),textWithDisclaimer:g(this,Vm)}}get data(){return{altText:g(this,Pi),decorative:g(this,Lu)}}set data({altText:e,decorative:r,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(R(this,Wc,n),R(this,Vm,i)),!(g(this,Pi)===e&&g(this,Lu)===r)&&(a||(R(this,Pi,e),R(this,Lu,r)),W(this,iu,vD).call(this))}toggle(e=!1){g(this,Bl)&&(!e&&g(this,Ks)&&(clearTimeout(g(this,Ks)),R(this,Ks,null)),g(this,Bl).disabled=!e)}shown(){g(this,ws)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,iu,sx)}})}destroy(){var e,r;(e=g(this,Bl))==null||e.remove(),R(this,Bl,null),R(this,O0,null),R(this,Bu,null),(r=g(this,$u))==null||r.remove(),R(this,$u,null)}};Pi=new WeakMap,Lu=new WeakMap,Bl=new WeakMap,O0=new WeakMap,Bu=new WeakMap,Ks=new WeakMap,k0=new WeakMap,$u=new WeakMap,ws=new WeakMap,Wc=new WeakMap,Vm=new WeakMap,ju=new WeakMap,hd=new WeakMap,iu=new WeakSet,sx=function(){return g(this,Pi)&&"added"||g(this,Pi)===null&&this.guessedText&&"review"||"missing"},vD=async function(){var i,a,s;const e=g(this,Bl);if(!e)return;if(g(this,ju)){if(e.classList.toggle("done",!!g(this,Pi)),e.setAttribute("data-l10n-id",g(Ka,hd)[g(this,iu,sx)]),(i=g(this,O0))==null||i.setAttribute("data-l10n-id",g(Ka,hd)[`${g(this,iu,sx)}-label`]),!g(this,Pi)){(a=g(this,Bu))==null||a.remove();return}}else{if(!g(this,Pi)&&!g(this,Lu)){e.classList.remove("done"),(s=g(this,Bu))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=g(this,Bu);if(!r){R(this,Bu,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${g(this,ws).id}`;const o=100,l=g(this,ws)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(g(this,Ks)),R(this,Ks,null)},{once:!0}),e.addEventListener("mouseenter",()=>{R(this,Ks,setTimeout(()=>{R(this,Ks,null),g(this,Bu).classList.add("show"),g(this,ws)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;g(this,Ks)&&(clearTimeout(g(this,Ks)),R(this,Ks,null)),(u=g(this,Bu))==null||u.classList.remove("show")},{signal:l})}g(this,Lu)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=g(this,Pi)),r.parentNode||e.append(r);const n=g(this,ws).getElementForAltText();n==null||n.setAttribute("aria-describedby",r.id)},$(Ka,hd,null),Oe(Ka,"_l10n",null);let XN=Ka;var Yi,Zo,Um,Ur,b_,zm,$l,qm,Hm,Wm,w_,F3;class XC{constructor(e){$(this,w_);$(this,Yi,null);$(this,Zo,null);$(this,Um,!1);$(this,Ur,null);$(this,b_,null);$(this,zm,null);$(this,$l,null);$(this,qm,null);$(this,Hm,!1);$(this,Wm,null);R(this,Ur,e)}renderForToolbar(){const e=R(this,Zo,document.createElement("button"));return e.className="comment",W(this,w_,F3).call(this,e,!1)}renderForStandalone(){const e=R(this,Yi,document.createElement("button"));e.className="annotationCommentButton";const r=g(this,Ur).commentButtonPosition;if(r){const{style:n}=e;n.insetInlineEnd=`calc(${100*(g(this,Ur)._uiManager.direction==="ltr"?1-r[0]:r[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*r[1]}% - var(--comment-button-dim))`;const i=g(this,Ur).commentButtonColor;i&&(n.backgroundColor=i)}return W(this,w_,F3).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=g(this,Yi)??g(this,Zo))==null||e.focus()},0)}onUpdatedColor(){if(!g(this,Yi))return;const e=g(this,Ur).commentButtonColor;e&&(g(this,Yi).style.backgroundColor=e),g(this,Ur)._uiManager.updatePopupColor(g(this,Ur))}get commentButtonWidth(){var e;return(((e=g(this,Yi))==null?void 0:e.getBoundingClientRect().width)??0)/g(this,Ur).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(g(this,Wm))return g(this,Wm);if(!g(this,Yi))return null;const{x:e,y:r,height:n}=g(this,Yi).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=g(this,Ur).parent.boundingClientRect;return[(e-i)/s,(r+n-a)/o]}set commentPopupPositionInLayer(e){R(this,Wm,e)}hasDefaultPopupPosition(){return g(this,Wm)===null}removeStandaloneCommentButton(){var e;(e=g(this,Yi))==null||e.remove(),R(this,Yi,null)}removeToolbarCommentButton(){var e;(e=g(this,Zo))==null||e.remove(),R(this,Zo,null)}setCommentButtonStates({selected:e,hasPopup:r}){g(this,Yi)&&(g(this,Yi).classList.toggle("selected",e),g(this,Yi).ariaExpanded=r)}edit(e){const r=this.commentPopupPositionInLayer;let n,i;if(r)[n,i]=r;else{[n,i]=g(this,Ur).commentButtonPosition;const{width:c,height:f,x:h,y:d}=g(this,Ur);n=h+n*c,i=d+i*f}const a=g(this,Ur).parent.boundingClientRect,{x:s,y:o,width:l,height:u}=a;g(this,Ur)._uiManager.editComment(g(this,Ur),s+n*l,o+i*u,{...e,parentDimensions:a})}finish(){g(this,Zo)&&(g(this,Zo).focus({focusVisible:g(this,Um)}),R(this,Um,!1))}isDeleted(){return g(this,Hm)||g(this,$l)===""}isEmpty(){return g(this,$l)===null}hasBeenEdited(){return this.isDeleted()||g(this,$l)!==g(this,b_)}serialize(){return this.data}get data(){return{text:g(this,$l),richText:g(this,zm),date:g(this,qm),deleted:this.isDeleted()}}set data(e){if(e!==g(this,$l)&&R(this,zm,null),e===null){R(this,$l,""),R(this,Hm,!0);return}R(this,$l,e),R(this,qm,new Date),R(this,Hm,!1)}setInitialText(e,r=null){R(this,b_,e),this.data=e,R(this,qm,null),R(this,zm,r)}shown(){}destroy(){var e,r;(e=g(this,Zo))==null||e.remove(),R(this,Zo,null),(r=g(this,Yi))==null||r.remove(),R(this,Yi,null),R(this,$l,""),R(this,zm,null),R(this,qm,null),R(this,Ur,null),R(this,Um,!1),R(this,Hm,!1)}}Yi=new WeakMap,Zo=new WeakMap,Um=new WeakMap,Ur=new WeakMap,b_=new WeakMap,zm=new WeakMap,$l=new WeakMap,qm=new WeakMap,Hm=new WeakMap,Wm=new WeakMap,w_=new WeakSet,F3=function(e,r){if(!g(this,Ur)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",r?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[g(this,Ur)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=g(this,Ur)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",wl,{signal:n}),r&&(e.addEventListener("focusin",a=>{g(this,Ur)._focusEventsAllowed=!1,Dn(a)},{capture:!0,signal:n}),e.addEventListener("focusout",a=>{g(this,Ur)._focusEventsAllowed=!0,Dn(a)},{capture:!0,signal:n})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),e===g(this,Zo)?this.edit():g(this,Ur).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(R(this,Um,!0),i(a))},{signal:n}),e.addEventListener("pointerenter",()=>{g(this,Ur).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{g(this,Ur).toggleComment(!1,!1)},{signal:n}),e};var R0,Gm,x_,A_,__,E_,S_,Gc,Km,Kc,Xm,Xc,Mp,Pie,Mie,Iie;const JV=class JV{constructor({container:e,isPinchingDisabled:r=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){$(this,Mp);$(this,R0);$(this,Gm,!1);$(this,x_,null);$(this,A_);$(this,__);$(this,E_);$(this,S_);$(this,Gc,null);$(this,Km);$(this,Kc,null);$(this,Xm);$(this,Xc,null);R(this,R0,e),R(this,x_,n),R(this,A_,r),R(this,__,i),R(this,E_,a),R(this,S_,s),R(this,Xm,new AbortController),R(this,Km,AbortSignal.any([o,g(this,Xm).signal])),e.addEventListener("touchstart",W(this,Mp,Pie).bind(this),{passive:!1,signal:g(this,Km)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/bc.pixelRatio}destroy(){var e,r;(e=g(this,Xm))==null||e.abort(),R(this,Xm,null),(r=g(this,Gc))==null||r.abort(),R(this,Gc,null)}};R0=new WeakMap,Gm=new WeakMap,x_=new WeakMap,A_=new WeakMap,__=new WeakMap,E_=new WeakMap,S_=new WeakMap,Gc=new WeakMap,Km=new WeakMap,Kc=new WeakMap,Xm=new WeakMap,Xc=new WeakMap,Mp=new WeakSet,Pie=function(e){var i,a,s;if((i=g(this,A_))!=null&&i.call(this))return;if(e.touches.length===1){if(g(this,Gc))return;const o=R(this,Gc,new AbortController),l=AbortSignal.any([g(this,Km),o.signal]),u=g(this,R0),c={capture:!0,signal:l,passive:!1},f=h=>{var d;h.pointerType==="touch"&&((d=g(this,Gc))==null||d.abort(),R(this,Gc,null))};u.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Dn(h),f(h))},c),u.addEventListener("pointerup",f,c),u.addEventListener("pointercancel",f,c);return}if(!g(this,Xc)){R(this,Xc,new AbortController);const o=AbortSignal.any([g(this,Km),g(this,Xc).signal]),l=g(this,R0),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",W(this,Mp,Mie).bind(this),u);const c=W(this,Mp,Iie).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",Dn,u),l.addEventListener("pointermove",Dn,u),l.addEventListener("pointercancel",Dn,u),l.addEventListener("pointerup",Dn,u),(a=g(this,__))==null||a.call(this)}if(Dn(e),e.touches.length!==2||(s=g(this,x_))!=null&&s.call(this)){R(this,Kc,null);return}let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]),R(this,Kc,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Mie=function(e){var _;if(!g(this,Kc)||e.touches.length!==2)return;Dn(e);let[r,n]=e.touches;r.identifier>n.identifier&&([r,n]=[n,r]);const{screenX:i,screenY:a}=r,{screenX:s,screenY:o}=n,l=g(this,Kc),{touch0X:u,touch0Y:c,touch1X:f,touch1Y:h}=l,d=f-u,p=h-c,m=s-i,v=o-a,y=Math.hypot(m,v)||1,w=Math.hypot(d,p)||1;if(!g(this,Gm)&&Math.abs(w-y)<=JV.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=a,l.touch1X=s,l.touch1Y=o,!g(this,Gm)){R(this,Gm,!0);return}const b=[(i+s)/2,(a+o)/2];(_=g(this,E_))==null||_.call(this,b,w,y)},Iie=function(e){var r;e.touches.length>=2||(g(this,Xc)&&(g(this,Xc).abort(),R(this,Xc,null),(r=g(this,S_))==null||r.call(this)),g(this,Kc)&&(Dn(e),R(this,Kc,null),R(this,Gm,!1)))};let YN=JV;var Ym,jl,tn,kr,Yc,F0,dd,C_,Qi,Qm,Qc,Jo,pd,T_,Zm,Xs,D_,Jm,Zc,Vu,L0,B0,el,eg,N_,$P,mt,L3,P_,B3,yD,Oie,kie,$3,bD,j3,Rie,Fie,Lie,V3,Bie,U3,$ie,jie,Vie,z3,ox;const It=class It{constructor(e){$(this,mt);$(this,Ym,null);$(this,jl,null);$(this,tn,null);$(this,kr,null);$(this,Yc,null);$(this,F0,!1);$(this,dd,null);$(this,C_,"");$(this,Qi,null);$(this,Qm,null);$(this,Qc,null);$(this,Jo,null);$(this,pd,null);$(this,T_,"");$(this,Zm,!1);$(this,Xs,null);$(this,D_,!1);$(this,Jm,!1);$(this,Zc,!1);$(this,Vu,null);$(this,L0,0);$(this,B0,0);$(this,el,null);$(this,eg,null);Oe(this,"isSelected",!1);Oe(this,"_isCopy",!1);Oe(this,"_editToolbar",null);Oe(this,"_initialOptions",Object.create(null));Oe(this,"_initialData",null);Oe(this,"_isVisible",!0);Oe(this,"_uiManager",null);Oe(this,"_focusEventsAllowed",!0);$(this,N_,!1);$(this,$P,It._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:r,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,s];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=It.prototype._resizeWithKeyboard,r=yv.TRANSLATE_SMALL,n=yv.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new gS([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-r,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[r,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-r]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,r]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],It.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const r=new VTe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});r.annotationElementId=e.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(e,r){if(It._l10n??(It._l10n=e),It._l10nResizer||(It._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),It._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,r){Br("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,N_)}set _isDraggable(e){var r;R(this,N_,e),(r=this.div)==null||r.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(e*2),this.y+=this.width*e/(r*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(e*2),this.y-=this.width*e/(r*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,$P)}setParent(e){var r;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(W(this,mt,ox).call(this),(r=g(this,Jo))==null||r.remove(),R(this,Jo,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(g(this,Zm)?R(this,Zm,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const r=e.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,r,n,i){const[a,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(r+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,r){const[n,i]=this.parentDimensions;this.setAt(e*n,r*i,this.width*n,this.height*i),this._onTranslated()}translate(e,r){W(this,mt,L3).call(this,this.parentDimensions,e,r)}translateInPage(e,r){g(this,Xs)||R(this,Xs,[this.x,this.y,this.width,this.height]),W(this,mt,L3).call(this,this.pageDimensions,e,r),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,r){g(this,Xs)||R(this,Xs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=r/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[l,u]=this.getBaseTranslation();s+=l,o+=u;const{style:c}=n;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,r){}_onTranslated(e,r){}get _hasBeenMoved(){return!!g(this,Xs)&&(g(this,Xs)[0]!==this.x||g(this,Xs)[1]!==this.y)}get _hasBeenResized(){return!!g(this,Xs)&&(g(this,Xs)[2]!==this.width||g(this,Xs)[3]!==this.height)}getBaseTranslation(){const[e,r]=this.parentDimensions,{_borderLineWidth:n}=It,i=n/e,a=n/r;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:r},pageDimensions:[n,i]}=this;let{x:a,y:s,width:o,height:l}=this;if(o*=n,l*=i,a*=n,s*=i,this._mustFixPosition)switch(e){case 0:a=Ja(a,0,n-o),s=Ja(s,0,i-l);break;case 90:a=Ja(a,0,n-l),s=Ja(s,o,i);break;case 180:a=Ja(a,o,n),s=Ja(s,l,i);break;case 270:a=Ja(a,l,n),s=Ja(s,0,i-o);break}this.x=a/=n,this.y=s/=i;const[u,c]=this.getBaseTranslation();a+=u,s+=c,r.left=`${(100*a).toFixed(2)}%`,r.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,r){var n;return W(n=It,P_,B3).call(n,e,r,this.parentRotation)}pageTranslationToScreen(e,r){var n;return W(n=It,P_,B3).call(n,e,r,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[r,n]}=this;return[r*e,n*e]}setDims(){const{div:{style:e},width:r,height:n}=this;e.width=`${(100*r).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=g(this,tn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||g(this,Jm))return this._editToolbar;this._editToolbar=new D3(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[r,n]of e)await this._editToolbar.addButton(r,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,r;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(r=g(this,tn))==null||r.destroy()}addContainer(e){var n;const r=(n=this._editToolbar)==null?void 0:n.div;r?r.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return g(this,tn)||(XN.initialize(It._l10n),R(this,tn,new XN(this)),g(this,Ym)&&(g(this,tn).data=g(this,Ym),R(this,Ym,null))),g(this,tn)}get altTextData(){var e;return(e=g(this,tn))==null?void 0:e.data}set altTextData(e){g(this,tn)&&(g(this,tn).data=e)}get guessedAltText(){var e;return(e=g(this,tn))==null?void 0:e.guessedText}async setGuessedAltText(e){var r;await((r=g(this,tn))==null?void 0:r.setGuessedText(e))}serializeAltText(e){var r;return(r=g(this,tn))==null?void 0:r.serialize(e)}hasAltText(){return!!g(this,tn)&&!g(this,tn).isEmpty()}hasAltTextData(){var e;return((e=g(this,tn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=g(this,kr))==null||e.focusButton()}addCommentButton(){return this.canAddComment?g(this,kr)||R(this,kr,new XC(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(g(this,Yc)){this._uiManager.isEditingMode()&&g(this,Yc).classList.remove("hidden");return}this.hasComment&&(R(this,Yc,g(this,kr).renderForStandalone()),this.div.append(g(this,Yc)))}}removeStandaloneCommentButton(){g(this,kr).removeStandaloneCommentButton(),R(this,Yc,null)}hideStandaloneCommentButton(){var e;(e=g(this,Yc))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:r,date:n,deleted:i}}=g(this,kr);return{text:r,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){g(this,kr)||R(this,kr,new XC(this)),g(this,kr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:r,richText:n}){if(!r||(g(this,kr)||R(this,kr,new XC(this)),g(this,kr).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=g(this,kr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=g(this,kr))==null?void 0:e.isDeleted()}get hasComment(){return!!g(this,kr)&&!g(this,kr).isEmpty()&&!g(this,kr).isDeleted()}async editComment(e){g(this,kr)||R(this,kr,new XC(this)),g(this,kr).edit(e)}toggleComment(e,r=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,r)}setSelectedCommentButton(e){g(this,kr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:r}}){g(this,kr).data=r?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=g(this,F0)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),W(this,mt,U3).call(this);const[r,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/r).toFixed(2)}%`,e.style.maxHeight=`${(100*r/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),gie(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(g(this,eg)||R(this,eg,new YN({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:W(this,mt,Rie).bind(this),onPinching:W(this,mt,Fie).bind(this),onPinchEnd:W(this,mt,Lie).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r){e.preventDefault();return}if(R(this,Zm,!0),this._isDraggable){W(this,mt,Bie).call(this,e);return}W(this,mt,V3).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){g(this,Vu)&&clearTimeout(g(this,Vu)),R(this,Vu,setTimeout(()=>{var e;R(this,Vu,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,r,n){e.changeParent(this),this.x=r,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,r,n=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=r/i,f=this.x*a,h=this.y*s,d=this.width*a,p=this.height*s;switch(n){case 0:return[f+u+o,s-h-c-p+l,f+u+d+o,s-h-c+l];case 90:return[f+c+o,s-h+u+l,f+c+p+o,s-h+u+d+l];case 180:return[f-u-d+o,s-h+c+l,f-u+o,s-h+c+p+l];case 270:return[f-c-p+o,s-h-u-d+l,f-c+o,s-h-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,r){const[n,i,a,s]=e,o=a-n,l=s-i;switch(this.rotation){case 0:return[n,r-s,o,l];case 90:return[n,r-i,l,o];case 180:return[a,r-i,o,l];case 270:return[a,r-s,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&It._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=g(this,kr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:r,date:n,opacity:i,deleted:a,richText:s},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:u,modificationDate:n||c,popupRef:!a,color:r,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),R(this,Jm,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),R(this,Jm,!1),!0):!1}isInEditMode(){return g(this,Jm)}shouldGetKeyboardEvents(){return g(this,Zc)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:r,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return r<s&&i>0&&e<a&&n>0}rebuild(){W(this,mt,U3).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,r=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,r,n){const i=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,R(i,Ym,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=l/s,i.width=u/a,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,r,n;if((e=g(this,pd))==null||e.abort(),R(this,pd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),g(this,Vu)&&(clearTimeout(g(this,Vu)),R(this,Vu,null)),W(this,mt,ox).call(this),this.removeEditToolbar(),g(this,el)){for(const i of g(this,el).values())clearTimeout(i);R(this,el,null)}this.parent=null,(r=g(this,eg))==null||r.destroy(),R(this,eg,null),(n=g(this,Jo))==null||n.remove(),R(this,Jo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(W(this,mt,Oie).call(this),g(this,Qi).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,r]}=this,[n,i,a,s]=this.getPDFRect();return[It._round(n+(a-n)*e),It._round(i+(s-i)*(1-r))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return g(this,kr).commentPopupPositionInLayer}set commentPopupPosition(e){g(this,kr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return g(this,kr).hasDefaultPopupPosition()}get commentButtonWidth(){return g(this,kr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var r;(r=g(this,kr))==null||r.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const r=g(this,Qi).children;if(!g(this,jl)){R(this,jl,Array.from(r));const s=W(this,mt,$ie).bind(this),o=W(this,mt,jie).bind(this),l=this._uiManager._signal;for(const u of g(this,jl)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",W(this,mt,Vie).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",It._l10nResizer[c])}}const n=g(this,jl)[0];let i=0;for(const s of r){if(s===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(g(this,jl).length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)g(this,Qi).append(g(this,Qi).firstElementChild);else if(a>i)for(let o=0;o<a-i;o++)g(this,Qi).firstElementChild.before(g(this,Qi).lastElementChild);let s=0;for(const o of r){const u=g(this,jl)[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",It._l10nResizer[u])}}W(this,mt,z3).call(this,0),R(this,Zc,!0),g(this,Qi).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,r){g(this,Zc)&&W(this,mt,j3).call(this,g(this,T_),{deltaX:e,deltaY:r,fromKeyboard:!0})}_stopResizingWithKeyboard(){W(this,mt,ox).call(this),this.div.focus()}select(){var e,r,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(r=this._editToolbar)==null||r.show(),(n=g(this,tn))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,r,n,i,a;this.isSelected&&(this.isSelected=!1,(e=g(this,Qi))==null||e.classList.add("hidden"),(r=this.div)==null||r.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=g(this,tn))==null||a.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,r){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return g(this,D_)}set isEditing(e){R(this,D_,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,r=!1){if(r){g(this,el)||R(this,el,new Map);const{action:n}=e;let i=g(this,el).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),g(this,el).delete(n),g(this,el).size===0&&R(this,el,null)},It._telemetryTimeout),g(this,el).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),R(this,F0,!1)}disable(){this.div&&(this.div.tabIndex=-1),R(this,F0,!0)}updateFakeAnnotationElement(e){if(!g(this,Jo)&&!this.deleted){R(this,Jo,e.addFakeAnnotation(this));return}if(this.deleted){g(this,Jo).remove(),R(this,Jo,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&g(this,Jo).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let r=e.container.querySelector(".annotationContent");if(!r)r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),e.container.prepend(r);else if(r.nodeName==="CANVAS"){const n=r;r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),n.before(r)}return r}resetAnnotationElement(e){const{firstElementChild:r}=e.container;(r==null?void 0:r.nodeName)==="DIV"&&r.classList.contains("annotationContent")&&r.remove()}};Ym=new WeakMap,jl=new WeakMap,tn=new WeakMap,kr=new WeakMap,Yc=new WeakMap,F0=new WeakMap,dd=new WeakMap,C_=new WeakMap,Qi=new WeakMap,Qm=new WeakMap,Qc=new WeakMap,Jo=new WeakMap,pd=new WeakMap,T_=new WeakMap,Zm=new WeakMap,Xs=new WeakMap,D_=new WeakMap,Jm=new WeakMap,Zc=new WeakMap,Vu=new WeakMap,L0=new WeakMap,B0=new WeakMap,el=new WeakMap,eg=new WeakMap,N_=new WeakMap,$P=new WeakMap,mt=new WeakSet,L3=function([e,r],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},P_=new WeakSet,B3=function(e,r,n){switch(n){case 90:return[r,-e];case 180:return[-e,-r];case 270:return[-r,e];default:return[e,r]}},yD=function(e){switch(e){case 90:{const[r,n]=this.pageDimensions;return[0,-r/n,n/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,n]=this.pageDimensions;return[0,r/n,-n/r,0]}default:return[1,0,0,1]}},Oie=function(){if(g(this,Qi))return;R(this,Qi,document.createElement("div")),g(this,Qi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(const n of e){const i=document.createElement("div");g(this,Qi).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",W(this,mt,kie).bind(this,n),{signal:r}),i.addEventListener("contextmenu",wl,{signal:r}),i.tabIndex=-1}this.div.prepend(g(this,Qi))},kie=function(e,r){var c;r.preventDefault();const{isMac:n}=da.platform;if(r.button!==0||r.ctrlKey&&n)return;(c=g(this,tn))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,R(this,Qm,[r.screenX,r.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",W(this,mt,j3).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Dn,{passive:!1,signal:s}),window.addEventListener("contextmenu",wl,{signal:s}),R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const u=()=>{var f;a.abort(),this.parent.togglePointerEvents(!0),(f=g(this,tn))==null||f.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,W(this,mt,bD).call(this)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},$3=function(e,r,n,i){this.width=n,this.height=i,this.x=e,this.y=r,this.setDims(),this.fixAndSetPosition(),this._onResized()},bD=function(){if(!g(this,Qc))return;const{savedX:e,savedY:r,savedWidth:n,savedHeight:i}=g(this,Qc);R(this,Qc,null);const a=this.x,s=this.y,o=this.width,l=this.height;a===e&&s===r&&o===n&&l===i||this.addCommands({cmd:W(this,mt,$3).bind(this,a,s,o,l),undo:W(this,mt,$3).bind(this,e,r,n,i),mustExec:!0})},j3=function(e,r){const[n,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,u=It.MIN_SIZE/n,c=It.MIN_SIZE/i,f=W(this,mt,yD).call(this,this.rotation),h=(k,V)=>[f[0]*k+f[2]*V,f[1]*k+f[3]*V],d=W(this,mt,yD).call(this,360-this.rotation),p=(k,V)=>[d[0]*k+d[2]*V,d[1]*k+d[3]*V];let m,v,y=!1,w=!1;switch(e){case"topLeft":y=!0,m=(k,V)=>[0,0],v=(k,V)=>[k,V];break;case"topMiddle":m=(k,V)=>[k/2,0],v=(k,V)=>[k/2,V];break;case"topRight":y=!0,m=(k,V)=>[k,0],v=(k,V)=>[0,V];break;case"middleRight":w=!0,m=(k,V)=>[k,V/2],v=(k,V)=>[0,V/2];break;case"bottomRight":y=!0,m=(k,V)=>[k,V],v=(k,V)=>[0,0];break;case"bottomMiddle":m=(k,V)=>[k/2,V],v=(k,V)=>[k/2,0];break;case"bottomLeft":y=!0,m=(k,V)=>[0,V],v=(k,V)=>[k,0];break;case"middleLeft":w=!0,m=(k,V)=>[0,V/2],v=(k,V)=>[k,V/2];break}const b=m(o,l),_=v(o,l);let x=h(..._);const A=It._round(a+x[0]),E=It._round(s+x[1]);let S=1,C=1,D,N;if(r.fromKeyboard)({deltaX:D,deltaY:N}=r);else{const{screenX:k,screenY:V}=r,[q,H]=g(this,Qm);[D,N]=this.screenToPageTranslation(k-q,V-H),g(this,Qm)[0]=k,g(this,Qm)[1]=V}if([D,N]=p(D/n,N/i),y){const k=Math.hypot(o,l);S=C=Math.max(Math.min(Math.hypot(_[0]-b[0]-D,_[1]-b[1]-N)/k,1/o,1/l),u/o,c/l)}else w?S=Ja(Math.abs(_[0]-b[0]-D),u,1)/o:C=Ja(Math.abs(_[1]-b[1]-N),c,1)/l;const P=It._round(o*S),M=It._round(l*C);x=h(...v(P,M));const j=A-x[0],K=E-x[1];g(this,Xs)||R(this,Xs,[this.x,this.y,this.width,this.height]),this.width=P,this.height=M,this.x=j,this.y=K,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Rie=function(){var e;R(this,Qc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=g(this,tn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Fie=function(e,r,n){let a=.7*(n/r)+1-.7;if(a===1)return;const s=W(this,mt,yD).call(this,this.rotation),o=(A,E)=>[s[0]*A+s[2]*E,s[1]*A+s[3]*E],[l,u]=this.parentDimensions,c=this.x,f=this.y,h=this.width,d=this.height,p=It.MIN_SIZE/l,m=It.MIN_SIZE/u;a=Math.max(Math.min(a,1/h,1/d),p/h,m/d);const v=It._round(h*a),y=It._round(d*a);if(v===h&&y===d)return;g(this,Xs)||R(this,Xs,[c,f,h,d]);const w=o(h/2,d/2),b=It._round(c+w[0]),_=It._round(f+w[1]),x=o(v/2,y/2);this.x=b-x[0],this.y=_-x[1],this.width=v,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Lie=function(){var e;(e=g(this,tn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),W(this,mt,bD).call(this)},V3=function(e){const{isMac:r}=da.platform;e.ctrlKey&&!r||e.shiftKey||e.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)},Bie=function(e){const{isSelected:r}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=u=>{i.abort(),R(this,dd,null),R(this,Zm,!1),this._uiManager.endDragSession()||W(this,mt,V3).call(this,u),n&&this._onStopDragging()};r&&(R(this,L0,e.clientX),R(this,B0,e.clientY),R(this,dd,e.pointerId),R(this,C_,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:f,pointerId:h}=u;if(h!==g(this,dd)){Dn(u);return}const[d,p]=this.screenToPageTranslation(c-g(this,L0),f-g(this,B0));R(this,L0,c),R(this,B0,f),this._uiManager.dragSelectedEditors(d,p)},s),window.addEventListener("touchmove",Dn,s),window.addEventListener("pointerdown",u=>{u.pointerType===g(this,C_)&&(g(this,eg)||u.isPrimary)&&o(u),Dn(u)},s));const l=u=>{if(!g(this,dd)||g(this,dd)===u.pointerId){o(u);return}Dn(u)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})},U3=function(){if(g(this,pd)||!this.div)return;R(this,pd,new AbortController);const e=this._uiManager.combinedSignal(g(this,pd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},$ie=function(e){It._resizerKeyboardManager.exec(this,e)},jie=function(e){var r;g(this,Zc)&&((r=e.relatedTarget)==null?void 0:r.parentNode)!==g(this,Qi)&&W(this,mt,ox).call(this)},Vie=function(e){R(this,T_,g(this,Zc)?e:"")},z3=function(e){if(g(this,jl))for(const r of g(this,jl))r.tabIndex=e},ox=function(){R(this,Zc,!1),W(this,mt,z3).call(this,-1),W(this,mt,bD).call(this)},$(It,P_),Oe(It,"_l10n",null),Oe(It,"_l10nResizer",null),Oe(It,"_borderLineWidth",-1),Oe(It,"_colorManager",new M3),Oe(It,"_zIndex",1),Oe(It,"_telemetryTimeout",1e3);let Wr=It;class VTe extends Wr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const D7=3285377520,Fo=4294901760,Nu=65535;class Uie{constructor(e){this.h1=e?e&4294967295:D7,this.h2=e?e&4294967295:D7}update(e){let r,n;if(typeof e=="string"){r=new Uint8Array(e.length*2),n=0;for(let m=0,v=e.length;m<v;m++){const y=e.charCodeAt(m);y<=255?r[n++]=y:(r[n++]=y>>>8,r[n++]=y&255)}}else if(ArrayBuffer.isView(e))r=e.slice(),n=r.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,s=new Uint32Array(r.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const f=3432918353,h=461845907,d=f&Nu,p=h&Nu;for(let m=0;m<i;m++)m&1?(o=s[m],o=o*f&Fo|o*d&Nu,o=o<<15|o>>>17,o=o*h&Fo|o*p&Nu,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=s[m],l=l*f&Fo|l*d&Nu,l=l<<15|l>>>17,l=l*h&Fo|l*p&Nu,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,a){case 3:o^=r[i*4+2]<<16;case 2:o^=r[i*4+1]<<8;case 1:o^=r[i*4],o=o*f&Fo|o*d&Nu,o=o<<15|o>>>17,o=o*h&Fo|o*p&Nu,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,r=this.h2;return e^=r>>>1,e=e*3981806797&Fo|e*36045&Nu,r=r*4283543511&Fo|((r<<16|e>>>16)*2950163797&Fo)>>>16,e^=r>>>1,e=e*444984403&Fo|e*60499&Nu,r=r*3301882366&Fo|((r<<16|e>>>16)*3120437893&Fo)>>>16,e^=r>>>1,(e>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}const q3=Object.freeze({map:null,hash:"",transfer:void 0});var tg,rg,Jc,Zi,jP,zie;class J5{constructor(){$(this,jP);$(this,tg,!1);$(this,rg,null);$(this,Jc,null);$(this,Zi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,r){const n=g(this,Zi).get(e);return n===void 0?r:Object.assign(r,n)}getRawValue(e){return g(this,Zi).get(e)}remove(e){const r=g(this,Zi).get(e);if(r!==void 0&&(r instanceof Wr&&g(this,Jc).delete(r.annotationElementId),g(this,Zi).delete(e),g(this,Zi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of g(this,Zi).values())if(n instanceof Wr)return;this.onAnnotationEditor(null)}}setValue(e,r){const n=g(this,Zi).get(e);let i=!1;if(n!==void 0)for(const[a,s]of Object.entries(r))n[a]!==s&&(i=!0,n[a]=s);else i=!0,g(this,Zi).set(e,r);i&&W(this,jP,zie).call(this),r instanceof Wr&&((g(this,Jc)||R(this,Jc,new Map)).set(r.annotationElementId,r),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type))}has(e){return g(this,Zi).has(e)}get size(){return g(this,Zi).size}resetModified(){g(this,tg)&&(R(this,tg,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new qie(this)}get serializable(){if(g(this,Zi).size===0)return q3;const e=new Map,r=new Uie,n=[],i=Object.create(null);let a=!1;for(const[s,o]of g(this,Zi)){const l=o instanceof Wr?o.serialize(!1,i):o;l&&(e.set(s,l),r.update(`${s}:${JSON.stringify(l)}`),a||(a=!!l.bitmap))}if(a)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:r.hexdigest(),transfer:n}:q3}get editorStats(){let e=null;const r=new Map;let n=0,i=0;for(const a of g(this,Zi).values()){if(!(a instanceof Wr)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:o}=s;r.has(o)||r.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(s)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const h=f.get(c)??0;f.set(c,h+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,s]of r)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){R(this,rg,null)}updateEditor(e,r){var i;const n=(i=g(this,Jc))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(r),!0):!1}getEditor(e){var r;return((r=g(this,Jc))==null?void 0:r.get(e))||null}get modifiedIds(){if(g(this,rg))return g(this,rg);const e=[];if(g(this,Jc))for(const r of g(this,Jc).values())r.serialize()&&e.push(r.annotationElementId);return R(this,rg,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return g(this,Zi).entries()}}tg=new WeakMap,rg=new WeakMap,Jc=new WeakMap,Zi=new WeakMap,jP=new WeakSet,zie=function(){g(this,tg)||(R(this,tg,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var M_;class qie extends J5{constructor(r){super();$(this,M_);const{map:n,hash:i,transfer:a}=r.serializable,s=structuredClone(n,a?{transfer:a}:null);R(this,M_,{map:s,hash:i,transfer:a})}get print(){Br("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,M_)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}M_=new WeakMap;var $0;class UTe{constructor({ownerDocument:e=globalThis.document,styleElement:r=null}){$(this,$0,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),g(this,$0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:r,_inspectFont:n}){if(!(!e||g(this,$0).has(e.loadedName))){if(Jt(!r,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),g(this,$0).add(i),n==null||n(e)}catch{Tt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Br("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Tt(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const r=e.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var r;const e=!!((r=this._document)!=null&&r.fonts);return Dt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",Za||da.platform.isFirefox)}_queueLoadingCallback(e){function r(){for(Jt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:r,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,r){function n(_,x){return _.charCodeAt(x)<<24|_.charCodeAt(x+1)<<16|_.charCodeAt(x+2)<<8|_.charCodeAt(x+3)&255}function i(_,x,A,E){const S=_.substring(0,x),C=_.substring(x+A);return S+E+C}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(_,x){if(++u>30){Tt("Load test font never loaded."),x();return}if(l.font="30px "+_,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(c.bind(null,_,x))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,f.length,f);const p=16,m=1482184792;let v=n(h,p);for(a=0,s=f.length-3;a<s;a+=4)v=v-m+n(f,a)|0;a<f.length&&(v=v-m+n(f+"XXX",a)|0),h=i(h,p,4,ATe(v));const y=`url(data:font/opentype;base64,${btoa(h)});`,w=`@font-face {font-family:"${f}";src:${y}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const _ of[e.loadedName,f]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=_,b.append(x)}this._document.body.append(b),c(f,()=>{b.remove(),r.complete()})}}$0=new WeakMap;var Cr;class zTe{constructor(e,r=null,n,i){$(this,Cr);this.compiledGlyphs=Object.create(null),R(this,Cr,e),this._inspectFont=r,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var r;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(r=this._inspectFont)==null||r.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${oie(this.data)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),r}getPathGenerator(e,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];const n=this.loadedName+"_path_"+r;let i;try{i=e.get(n)}catch(s){Tt(`getPathGenerator - ignoring character: "${s}".`)}const a=cie(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[r]=a}get black(){return g(this,Cr).black}get bold(){return g(this,Cr).bold}get disableFontFace(){return g(this,Cr).disableFontFace??!1}set disableFontFace(e){Dt(this,"disableFontFace",!!e)}get fontExtraProperties(){return g(this,Cr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return g(this,Cr).isInvalidPDFjsFont}get isType3Font(){return g(this,Cr).isType3Font}get italic(){return g(this,Cr).italic}get missingFile(){return g(this,Cr).missingFile}get remeasure(){return g(this,Cr).remeasure}get vertical(){return g(this,Cr).vertical}get ascent(){return g(this,Cr).ascent}get defaultWidth(){return g(this,Cr).defaultWidth}get descent(){return g(this,Cr).descent}get bbox(){return g(this,Cr).bbox}set bbox(e){Dt(this,"bbox",e)}get fontMatrix(){return g(this,Cr).fontMatrix}get fallbackName(){return g(this,Cr).fallbackName}get loadedName(){return g(this,Cr).loadedName}get mimetype(){return g(this,Cr).mimetype}get name(){return g(this,Cr).name}get data(){return g(this,Cr).data}clearData(){g(this,Cr).clearData()}get cssFontInfo(){return g(this,Cr).cssFontInfo}get systemFontInfo(){return g(this,Cr).systemFontInfo}get defaultVMetrics(){return g(this,Cr).defaultVMetrics}}Cr=new WeakMap;var j0,V0,I_,U0,wD;const Zy=class Zy{constructor(e){$(this,U0);$(this,j0);$(this,V0);$(this,I_);R(this,j0,e),R(this,V0,new DataView(g(this,j0))),R(this,I_,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const u of Zy.strings){const c=r.encode(e[u]);n[u]=c,i+=4+c.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),o=new DataView(a);let l=0;for(const u of Zy.strings){const c=n[u],f=c.length;o.setUint32(l,f),s.set(c,l+4),l+=4+f}return Jt(l===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return W(this,U0,wD).call(this,0)}get fontWeight(){return W(this,U0,wD).call(this,1)}get italicAngle(){return W(this,U0,wD).call(this,2)}};j0=new WeakMap,V0=new WeakMap,I_=new WeakMap,U0=new WeakSet,wD=function(e){Jt(e<Zy.strings.length,"Invalid string index");let r=0;for(let i=0;i<e;i++)r+=g(this,V0).getUint32(r)+4;const n=g(this,V0).getUint32(r);return g(this,I_).decode(new Uint8Array(g(this,j0),r+4,n))},Oe(Zy,"strings",["fontFamily","fontWeight","italicAngle"]);let QN=Zy;var md,Uu,ng,ig,lx;const Jy=class Jy{constructor(e){$(this,ig);$(this,md);$(this,Uu);$(this,ng);R(this,md,e),R(this,Uu,new DataView(g(this,md))),R(this,ng,new TextDecoder)}static write(e){const r=new TextEncoder,n={};let i=0;for(const h of Jy.strings){const d=r.encode(e[h]);n[h]=d,i+=4+d.length}i+=4;let a,s,o=1+i;e.style&&(a=r.encode(e.style.style),s=r.encode(e.style.weight),o+=4+a.length+4+s.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let f=0;c.setUint8(f++,e.guessFallback?1:0),c.setUint32(f,0),f+=4,i=0;for(const h of Jy.strings){const d=n[h],p=d.length;i+=4+p,c.setUint32(f,p),u.set(d,f+4),f+=4+p}return c.setUint32(f-i-4,i),e.style&&(c.setUint32(f,a.length),u.set(a,f+4),f+=4+a.length,c.setUint32(f,s.length),u.set(s,f+4),f+=4+s.length),Jt(f<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(f)}get guessFallback(){return g(this,Uu).getUint8(0)!==0}get css(){return W(this,ig,lx).call(this,0)}get loadedName(){return W(this,ig,lx).call(this,1)}get baseFontName(){return W(this,ig,lx).call(this,2)}get src(){return W(this,ig,lx).call(this,3)}get style(){let e=1;e+=4+g(this,Uu).getUint32(e);const r=g(this,Uu).getUint32(e),n=g(this,ng).decode(new Uint8Array(g(this,md),e+4,r));e+=4+r;const i=g(this,Uu).getUint32(e),a=g(this,ng).decode(new Uint8Array(g(this,md),e+4,i));return{style:n,weight:a}}};md=new WeakMap,Uu=new WeakMap,ng=new WeakMap,ig=new WeakSet,lx=function(e){Jt(e<Jy.strings.length,"Invalid string index");let r=5;for(let i=0;i<e;i++)r+=g(this,Uu).getUint32(r)+4;const n=g(this,Uu).getUint32(r);return g(this,ng).decode(new Uint8Array(g(this,md),r+4,n))},Oe(Jy,"strings",["css","loadedName","baseFontName","src"]);let ZN=Jy;var z0,q0,H0,W0,Ys,zu,O_,Tr,Cn,kl,xD,ux;const Rt=class Rt{constructor({data:e,extra:r}){$(this,Cn);$(this,zu);$(this,O_);$(this,Tr);R(this,zu,e),R(this,O_,new TextDecoder),R(this,Tr,new DataView(g(this,zu))),r&&Object.assign(this,r)}get black(){return W(this,Cn,kl).call(this,0)}get bold(){return W(this,Cn,kl).call(this,1)}get disableFontFace(){return W(this,Cn,kl).call(this,2)}get fontExtraProperties(){return W(this,Cn,kl).call(this,3)}get isInvalidPDFjsFont(){return W(this,Cn,kl).call(this,4)}get isType3Font(){return W(this,Cn,kl).call(this,5)}get italic(){return W(this,Cn,kl).call(this,6)}get missingFile(){return W(this,Cn,kl).call(this,7)}get remeasure(){return W(this,Cn,kl).call(this,8)}get vertical(){return W(this,Cn,kl).call(this,9)}get ascent(){return W(this,Cn,xD).call(this,0)}get defaultWidth(){return W(this,Cn,xD).call(this,1)}get descent(){return W(this,Cn,xD).call(this,2)}get bbox(){let e=g(Rt,q0);if(g(this,Tr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(g(this,Tr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=g(Rt,H0);if(g(this,Tr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(g(this,Tr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=g(Rt,W0);if(g(this,Tr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(g(this,Tr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return W(this,Cn,ux).call(this,0)}get loadedName(){return W(this,Cn,ux).call(this,1)}get mimetype(){return W(this,Cn,ux).call(this,2)}get name(){return W(this,Cn,ux).call(this,3)}get data(){let e=g(Rt,Ys);const r=g(this,Tr).getUint32(e);e+=4+r;const n=g(this,Tr).getUint32(e);e+=4+n;const i=g(this,Tr).getUint32(e);e+=4+i;const a=g(this,Tr).getUint32(e);if(a!==0)return new Uint8Array(g(this,zu),e+4,a)}clearData(){let e=g(Rt,Ys);const r=g(this,Tr).getUint32(e);e+=4+r;const n=g(this,Tr).getUint32(e);e+=4+n;const i=g(this,Tr).getUint32(e);e+=4+i;const a=g(this,Tr).getUint32(e);new Uint8Array(g(this,zu),e+4,a).fill(0),g(this,Tr).setUint32(e,0)}get cssFontInfo(){let e=g(Rt,Ys);const r=g(this,Tr).getUint32(e);e+=4+r;const n=g(this,Tr).getUint32(e);e+=4+n;const i=g(this,Tr).getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(g(this,zu),e+4,i)),new QN(a.buffer)}get systemFontInfo(){let e=g(Rt,Ys);const r=g(this,Tr).getUint32(e);e+=4+r;const n=g(this,Tr).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(g(this,zu),e+4,n)),new ZN(i.buffer)}static write(e){const r=e.systemFontInfo?ZN.write(e.systemFontInfo):null,n=e.cssFontInfo?QN.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const m of Rt.strings)a[m]=i.encode(e[m]),s+=4+a[m].length;const o=g(Rt,Ys)+4+s+4+(r?r.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let f=0;const h=Rt.bools.length;let d=0,p=0;for(let m=0;m<h;m++){const v=e[Rt.bools[m]];d|=(v===void 0?0:v?2:1)<<p,p+=2,(p===8||m===h-1)&&(c.setUint8(f++,d),d=0,p=0)}Jt(f===g(Rt,z0),"FontInfo.write: Boolean properties offset mismatch");for(const m of Rt.numbers)c.setFloat64(f,e[m]),f+=8;if(Jt(f===g(Rt,q0),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(f++,4);for(const m of e.bbox)c.setInt16(f,m,!0),f+=2}else c.setUint8(f++,0),f+=2*4;if(Jt(f===g(Rt,H0),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(f++,6);for(const m of e.fontMatrix)c.setFloat64(f,m,!0),f+=8}else c.setUint8(f++,0),f+=8*6;if(Jt(f===g(Rt,W0),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(f++,1);for(const m of e.defaultVMetrics)c.setInt16(f,m,!0),f+=2}else c.setUint8(f++,0),f+=3*2;Jt(f===g(Rt,Ys),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(g(Rt,Ys),0),f+=4;for(const m of Rt.strings){const v=a[m],y=v.length;c.setUint32(f,y),u.set(v,f+4),f+=4+y}if(c.setUint32(g(Rt,Ys),f-g(Rt,Ys)-4),!r)c.setUint32(f,0),f+=4;else{const m=r.byteLength;c.setUint32(f,m),Jt(f+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(r),f+4),f+=4+m}if(!n)c.setUint32(f,0),f+=4;else{const m=n.byteLength;c.setUint32(f,m),Jt(f+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),f+4),f+=4+m}return e.data===void 0?(c.setUint32(f,0),f+=4):(c.setUint32(f,e.data.length),u.set(e.data,f+4),f+=4+e.data.length),Jt(f<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(f)}};z0=new WeakMap,q0=new WeakMap,H0=new WeakMap,W0=new WeakMap,Ys=new WeakMap,zu=new WeakMap,O_=new WeakMap,Tr=new WeakMap,Cn=new WeakSet,kl=function(e){Jt(e<Rt.bools.length,"Invalid boolean index");const r=Math.floor(e/4),n=e*2%8,i=g(this,Tr).getUint8(r)>>n&3;return i===0?void 0:i===2},xD=function(e){return Jt(e<Rt.numbers.length,"Invalid number index"),g(this,Tr).getFloat64(g(Rt,z0)+e*8)},ux=function(e){Jt(e<Rt.strings.length,"Invalid string index");let r=g(Rt,Ys)+4;for(let a=0;a<e;a++)r+=g(this,Tr).getUint32(r)+4;const n=g(this,Tr).getUint32(r),i=new Uint8Array(n);return i.set(new Uint8Array(g(this,zu),r+4,n)),g(this,O_).decode(i)},Oe(Rt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Oe(Rt,"numbers",["ascent","defaultWidth","descent"]),Oe(Rt,"strings",["fallbackName","loadedName","mimetype","name"]),$(Rt,z0,Math.ceil(Rt.bools.length*2/8)),$(Rt,q0,g(Rt,z0)+Rt.numbers.length*8),$(Rt,H0,g(Rt,q0)+1+2*4),$(Rt,W0,g(Rt,H0)+1+8*6),$(Rt,Ys,g(Rt,W0)+1+2*3);let H3=Rt;var k_,R_,F_,L_,B_,$_,j_,V_;const Vr=class Vr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let r,n=null,i=[],a=[],s=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":r=e[1]==="axial"?1:2,n=e[2],s=e[3],r===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":r=3,l=e[1],i=e[2],a=e[3],o=e[4]||[],n=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),f=Math.floor(a.length/3),h=s.length,d=o.length;let p=0;for(const x of o)p+=1,p=Math.ceil(p/4)*4,p+=4+x.coords.length*4,p+=4+x.colors.length*4,x.verticesPerRow!==void 0&&(p+=4);const m=20+c*8+f*3+h*8+(n?16:0)+(u?3:0)+p,v=new ArrayBuffer(m),y=new DataView(v),w=new Uint8Array(v);y.setUint8(g(Vr,k_),r),y.setUint8(g(Vr,R_),n?1:0),y.setUint8(g(Vr,F_),u?1:0),y.setUint8(g(Vr,L_),l),y.setUint32(g(Vr,B_),c,!0),y.setUint32(g(Vr,$_),f,!0),y.setUint32(g(Vr,j_),h,!0),y.setUint32(g(Vr,V_),d,!0);let b=20;new Float32Array(v,b,c*2).set(i),b+=c*8,w.set(a,b),b+=f*3;for(const[x,A]of s)y.setFloat32(b,x,!0),b+=4,y.setUint32(b,parseInt(A.slice(1),16),!0),b+=4;if(n)for(const x of n)y.setFloat32(b,x,!0),b+=4;u&&(w.set(u,b),b+=3);for(let x=0;x<o.length;x++){const A=o[x];y.setUint8(b,A.type),b+=1,b=Math.ceil(b/4)*4,y.setUint32(b,A.coords.length,!0),b+=4,new Int32Array(v,b,A.coords.length).set(A.coords),b+=A.coords.length*4,y.setUint32(b,A.colors.length,!0),b+=4,new Int32Array(v,b,A.colors.length).set(A.colors),b+=A.colors.length*4,A.verticesPerRow!==void 0&&(y.setUint32(b,A.verticesPerRow,!0),b+=4)}return v}getIR(){const e=this.view,r=this.data[g(Vr,k_)],n=!!this.data[g(Vr,R_)],i=!!this.data[g(Vr,F_)],a=e.getUint32(g(Vr,B_),!0),s=e.getUint32(g(Vr,$_),!0),o=e.getUint32(g(Vr,j_),!0),l=e.getUint32(g(Vr,V_),!0);let u=20;const c=new Float32Array(this.buffer,u,a*2);u+=a*8;const f=new Uint8Array(this.buffer,u,s*3);u+=s*3;const h=[];for(let v=0;v<o;++v){const y=e.getFloat32(u,!0);u+=4;const w=e.getUint32(u,!0);u+=4,h.push([y,`#${w.toString(16).padStart(6,"0")}`])}let d=null;if(n){d=[];for(let v=0;v<4;++v)d.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const m=[];for(let v=0;v<l;++v){const y=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const w=e.getUint32(u,!0);u+=4;const b=new Int32Array(this.buffer,u,w);u+=w*4;const _=e.getUint32(u,!0);u+=4;const x=new Int32Array(this.buffer,u,_);u+=_*4;const A={type:y,coords:b,colors:x};y===_3.LATTICE&&(A.verticesPerRow=e.getUint32(u,!0),u+=4),m.push(A)}if(r===1)return["RadialAxial","axial",d,h,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(r===2)return["RadialAxial","radial",d,h,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(r===3){const v=this.data[g(Vr,L_)];let y=null;if(c.length>0){let w=c[0],b=c[0],_=c[1],x=c[1];for(let A=0;A<c.length;A+=2){const E=c[A],S=c[A+1];w=w>E?E:w,_=_>S?S:_,b=b<E?E:b,x=x<S?S:x}y=[w,_,b,x]}return["Mesh",v,c,f,m,y,d,p]}throw new Error(`Unsupported pattern kind: ${r}`)}};k_=new WeakMap,R_=new WeakMap,F_=new WeakMap,L_=new WeakMap,B_=new WeakMap,$_=new WeakMap,j_=new WeakMap,V_=new WeakMap,$(Vr,k_,0),$(Vr,R_,1),$(Vr,F_,2),$(Vr,L_,3),$(Vr,B_,4),$(Vr,$_,8),$(Vr,j_,12),$(Vr,V_,16);let W3=Vr;function qTe(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(Za)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HTe(t){if(Za&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return hS(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function YC(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const G3=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,WTe=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",GTe=TTe.bind(null,G3,WTe);var ef,VP;class KTe{constructor(){$(this,ef,new Map);$(this,VP,Promise.resolve())}postMessage(e,r){const n={data:structuredClone(e,r?{transfer:r}:null)};g(this,VP).then(()=>{for(const[i]of g(this,ef))i.call(this,n)})}addEventListener(e,r,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Tt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,r);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}g(this,ef).set(r,i)}removeEventListener(e,r){const n=g(this,ef).get(r);n==null||n(),g(this,ef).delete(r)}terminate(){for(const[,e]of g(this,ef))e==null||e();g(this,ef).clear()}}ef=new WeakMap,VP=new WeakMap;const QC={DATA:1,ERROR:2},qn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function N7(){}function ys(t){if(t instanceof Ap||t instanceof E3||t instanceof x7||t instanceof GN||t instanceof Uk)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Br('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Ap(t.message);case"InvalidPDFException":return new E3(t.message);case"PasswordException":return new x7(t.message,t.code);case"ResponseException":return new GN(t.message,t.status,t.missing);case"UnknownErrorException":return new Uk(t.message,t.details)}return new Uk(t.message,t.toString())}var G0,vl,Hie,Wie,Gie,AD;class cx{constructor(e,r,n){$(this,vl);$(this,G0,new AbortController);this.sourceName=e,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",W(this,vl,Hie).bind(this),{signal:g(this,G0).signal})}on(e,r){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=r}send(e,r,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:r},n)}sendWithPromise(e,r,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:r},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,r,n,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:r,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[a].pullCall=c,l.postMessage({sourceName:s,targetName:o,stream:qn.PULL,streamId:a,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Jt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[a].cancelCall=c,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:qn.CANCEL,streamId:a,reason:ys(u)}),c.promise}},n)}destroy(){var e;(e=g(this,G0))==null||e.abort(),R(this,G0,null)}}G0=new WeakMap,vl=new WeakSet,Hie=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){W(this,vl,Gie).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===QC.DATA)i.resolve(e.data);else if(e.callback===QC.ERROR)i.reject(ys(e.reason));else throw new Error("Unexpected callback case");return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(r,e.data).then(function(s){a.postMessage({sourceName:n,targetName:i,callback:QC.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:n,targetName:i,callback:QC.ERROR,callbackId:e.callbackId,reason:ys(s)})});return}if(e.streamId){W(this,vl,Wie).call(this,e);return}r(e.data)},Wie=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,f){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=c,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:qn.ENQUEUE,streamId:r,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:qn.CLOSE,streamId:r}),delete s.streamSinks[r])},error(u){Jt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:qn.ERROR,streamId:r,reason:ys(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[r]=l,Promise.try(o,e.data,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:qn.START_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:qn.START_COMPLETE,streamId:r,reason:ys(u)})})},Gie=function(e){const r=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[r],o=this.streamSinks[r];switch(e.stream){case qn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(ys(e.reason));break;case qn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(ys(e.reason));break;case qn.PULL:if(!o){a.postMessage({sourceName:n,targetName:i,stream:qn.PULL_COMPLETE,streamId:r,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||N7).then(function(){a.postMessage({sourceName:n,targetName:i,stream:qn.PULL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:qn.PULL_COMPLETE,streamId:r,reason:ys(u)})});break;case qn.ENQUEUE:if(Jt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case qn.CLOSE:if(Jt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),W(this,vl,AD).call(this,s,r);break;case qn.ERROR:Jt(s,"error should have stream controller"),s.controller.error(ys(e.reason)),W(this,vl,AD).call(this,s,r);break;case qn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(ys(e.reason)),W(this,vl,AD).call(this,s,r);break;case qn.CANCEL:if(!o)break;const l=ys(e.reason);Promise.try(o.onCancel||N7,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:qn.CANCEL_COMPLETE,streamId:r,success:!0})},function(u){a.postMessage({sourceName:n,targetName:i,stream:qn.CANCEL_COMPLETE,streamId:r,reason:ys(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}},AD=async function(e,r){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[r]};var U_;class Kie{constructor({enableHWA:e=!1}){$(this,U_,!1);R(this,U_,e)}create(e,r){if(e<=0||r<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,r);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!g(this,U_)})}}reset(e,r,n){if(!e.canvas)throw new Error("Canvas is not specified");if(r<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=r,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,r){Br("Abstract method `_createCanvas` called.")}}U_=new WeakMap;class XTe extends Kie{constructor({ownerDocument:e=globalThis.document,enableHWA:r=!1}){super({enableHWA:r}),this._document=e}_createCanvas(e,r){const n=this._document.createElement("canvas");return n.width=e,n.height=r,n}}class Xie{constructor({baseUrl:e=null,isCompressed:r=!0}){this.baseUrl=e,this.isCompressed=r}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}async _fetch(e){Br("Abstract method `_fetch` called.")}}class P7 extends Xie{async _fetch(e){const r=await dS(e,this.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):hS(r)}}class Yie{addFilter(e){return"none"}addHCMFilter(e,r){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,r,n,i,a){return"none"}destroy(e=!1){}}var ag,K0,tf,rf,Da,sg,og,Ye,Ea,fx,by,_D,wy,Qie,K3,xy,hx,dx,X3,px;class YTe extends Yie{constructor({docId:r,ownerDocument:n=globalThis.document}){super();$(this,Ye);$(this,ag);$(this,K0);$(this,tf);$(this,rf);$(this,Da);$(this,sg);$(this,og,0);R(this,rf,r),R(this,Da,n)}addFilter(r){if(!r)return"none";let n=g(this,Ye,Ea).get(r);if(n)return n;const[i,a,s]=W(this,Ye,_D).call(this,r),o=r.length===1?i:`${i}${a}${s}`;if(n=g(this,Ye,Ea).get(o),n)return g(this,Ye,Ea).set(r,n),n;const l=`g_${g(this,rf)}_transfer_map_${ni(this,og)._++}`,u=W(this,Ye,wy).call(this,l);g(this,Ye,Ea).set(r,u),g(this,Ye,Ea).set(o,u);const c=W(this,Ye,xy).call(this,l);return W(this,Ye,dx).call(this,i,a,s,c),u}addHCMFilter(r,n){var p;const i=`${r}-${n}`,a="base";let s=g(this,Ye,fx).get(a);if((s==null?void 0:s.key)===i||(s?((p=s.filter)==null||p.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},g(this,Ye,fx).set(a,s)),!r||!n))return s.url;const o=W(this,Ye,px).call(this,r);r=et.makeHexColor(...o);const l=W(this,Ye,px).call(this,n);if(n=et.makeHexColor(...l),g(this,Ye,by).style.color="",r==="#000000"&&n==="#ffffff"||r===n)return s.url;const u=new Array(256);for(let m=0;m<=255;m++){const v=m/255;u[m]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const c=u.join(","),f=`g_${g(this,rf)}_hcm_filter`,h=s.filter=W(this,Ye,xy).call(this,f);W(this,Ye,dx).call(this,c,c,c,h),W(this,Ye,K3).call(this,h);const d=(m,v)=>{const y=o[m]/255,w=l[m]/255,b=new Array(v+1);for(let _=0;_<=v;_++)b[_]=y+_/v*(w-y);return b.join(",")};return W(this,Ye,dx).call(this,d(0,5),d(1,5),d(2,5),h),s.url=W(this,Ye,wy).call(this,f),s.url}addAlphaFilter(r){let n=g(this,Ye,Ea).get(r);if(n)return n;const[i]=W(this,Ye,_D).call(this,[r]),a=`alpha_${i}`;if(n=g(this,Ye,Ea).get(a),n)return g(this,Ye,Ea).set(r,n),n;const s=`g_${g(this,rf)}_alpha_map_${ni(this,og)._++}`,o=W(this,Ye,wy).call(this,s);g(this,Ye,Ea).set(r,o),g(this,Ye,Ea).set(a,o);const l=W(this,Ye,xy).call(this,s);return W(this,Ye,X3).call(this,i,l),o}addLuminosityFilter(r){let n=g(this,Ye,Ea).get(r||"luminosity");if(n)return n;let i,a;if(r?([i]=W(this,Ye,_D).call(this,[r]),a=`luminosity_${i}`):a="luminosity",n=g(this,Ye,Ea).get(a),n)return g(this,Ye,Ea).set(r,n),n;const s=`g_${g(this,rf)}_luminosity_map_${ni(this,og)._++}`,o=W(this,Ye,wy).call(this,s);g(this,Ye,Ea).set(r,o),g(this,Ye,Ea).set(a,o);const l=W(this,Ye,xy).call(this,s);return W(this,Ye,Qie).call(this,l),r&&W(this,Ye,X3).call(this,i,l),o}addHighlightHCMFilter(r,n,i,a,s){var w;const o=`${n}-${i}-${a}-${s}`;let l=g(this,Ye,fx).get(r);if((l==null?void 0:l.key)===o||(l?((w=l.filter)==null||w.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},g(this,Ye,fx).set(r,l)),!n||!i))return l.url;const[u,c]=[n,i].map(W(this,Ye,px).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,p]=[a,s].map(W(this,Ye,px).bind(this));h<f&&([f,h,d,p]=[h,f,p,d]),g(this,Ye,by).style.color="";const m=(b,_,x)=>{const A=new Array(256),E=(h-f)/x,S=b/255,C=(_-b)/(255*x);let D=0;for(let N=0;N<=x;N++){const P=Math.round(f+N*E),M=S+N*C;for(let j=D;j<=P;j++)A[j]=M;D=P+1}for(let N=D;N<256;N++)A[N]=A[D-1];return A.join(",")},v=`g_${g(this,rf)}_hcm_${r}_filter`,y=l.filter=W(this,Ye,xy).call(this,v);return W(this,Ye,K3).call(this,y),W(this,Ye,dx).call(this,m(d[0],p[0],5),m(d[1],p[1],5),m(d[2],p[2],5),y),l.url=W(this,Ye,wy).call(this,v),l.url}destroy(r=!1){var n,i,a,s;r&&((n=g(this,sg))!=null&&n.size)||((i=g(this,tf))==null||i.parentNode.parentNode.remove(),R(this,tf,null),(a=g(this,K0))==null||a.clear(),R(this,K0,null),(s=g(this,sg))==null||s.clear(),R(this,sg,null),R(this,og,0))}}ag=new WeakMap,K0=new WeakMap,tf=new WeakMap,rf=new WeakMap,Da=new WeakMap,sg=new WeakMap,og=new WeakMap,Ye=new WeakSet,Ea=function(){return g(this,K0)||R(this,K0,new Map)},fx=function(){return g(this,sg)||R(this,sg,new Map)},by=function(){if(!g(this,tf)){const r=g(this,Da).createElement("div"),{style:n}=r;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=g(this,Da).createElementNS(Rc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),R(this,tf,g(this,Da).createElementNS(Rc,"defs")),r.append(i),i.append(g(this,tf)),g(this,Da).body.append(r)}return g(this,tf)},_D=function(r){if(r.length===1){const u=r[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=u[h]/255;const f=c.join(",");return[f,f,f]}const[n,i,a]=r,s=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)s[u]=n[u]/255,o[u]=i[u]/255,l[u]=a[u]/255;return[s.join(","),o.join(","),l.join(",")]},wy=function(r){if(g(this,ag)===void 0){R(this,ag,"");const n=g(this,Da).URL;n!==g(this,Da).baseURI&&(KM(n)?Tt('#createUrl: ignore "data:"-URL for performance reasons.'):R(this,ag,iie(n,"")))}return`url(${g(this,ag)}#${r})`},Qie=function(r){const n=g(this,Da).createElementNS(Rc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),r.append(n)},K3=function(r){const n=g(this,Da).createElementNS(Rc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),r.append(n)},xy=function(r){const n=g(this,Da).createElementNS(Rc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",r),g(this,Ye,by).append(n),n},hx=function(r,n,i){const a=g(this,Da).createElementNS(Rc,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),r.append(a)},dx=function(r,n,i,a){const s=g(this,Da).createElementNS(Rc,"feComponentTransfer");a.append(s),W(this,Ye,hx).call(this,s,"feFuncR",r),W(this,Ye,hx).call(this,s,"feFuncG",n),W(this,Ye,hx).call(this,s,"feFuncB",i)},X3=function(r,n){const i=g(this,Da).createElementNS(Rc,"feComponentTransfer");n.append(i),W(this,Ye,hx).call(this,i,"feFuncA",r)},px=function(r){return g(this,Ye,by).style.color=r,mS(getComputedStyle(g(this,Ye,by)).getPropertyValue("color"))};class Zie{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load font data at: ${r}`)})}async _fetch(e){Br("Abstract method `_fetch` called.")}}class M7 extends Zie{async _fetch(e){const r=await dS(e,"arraybuffer");return new Uint8Array(r)}}class Jie{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(n=>{throw new Error(`Unable to load wasm data at: ${r}`)})}async _fetch(e){Br("Abstract method `_fetch` called.")}}class I7 extends Jie{async _fetch(e){const r=await dS(e,"arraybuffer");return new Uint8Array(r)}}Za&&Tt("Please use the `legacy` build in Node.js environments.");async function e6(t){const r=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(r)}class QTe extends Yie{}class ZTe extends Kie{_createCanvas(e,r){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,r)}}class JTe extends Xie{async _fetch(e){return e6(e)}}class eDe extends Zie{async _fetch(e){return e6(e)}}class tDe extends Jie{async _fetch(e){return e6(e)}}const ry="__forcedDependency",{floor:O7,ceil:k7}=Math;function ZC(t,e,r,n,i,a){t[e*4+0]=Math.min(t[e*4+0],r),t[e*4+1]=Math.min(t[e*4+1],n),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],a)}const Y3=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var X0,gd;class rDe{constructor(e,r){$(this,X0);$(this,gd);R(this,X0,e),R(this,gd,r)}get length(){return g(this,X0).length}isEmpty(e){return g(this,X0)[e]===Y3}minX(e){return g(this,gd)[e*4+0]/256}minY(e){return g(this,gd)[e*4+1]/256}maxX(e){return(g(this,gd)[e*4+2]+1)/256}maxY(e){return(g(this,gd)[e*4+3]+1)/256}}X0=new WeakMap,gd=new WeakMap;const JC=(t,e)=>{if(!t)return;let r=t.get(e);return r||(r={dependencies:new Set,isRenderingOperation:!1},t.set(e,r)),r};var xs,As,lg,Vl,ug,nf,mr,Dr,af,_s,z_,Y0,cg,fg,sf,Na,qu,q_,Q3;class nDe{constructor(e,r,n=!1){$(this,q_);$(this,xs,{__proto__:null});$(this,As,{__proto__:null,transform:[],moveText:[],sameLineText:[],[ry]:[]});$(this,lg,new Map);$(this,Vl,[]);$(this,ug,[]);$(this,nf,[[1,0,0,1,0,0]]);$(this,mr,[-1/0,-1/0,1/0,1/0]);$(this,Dr,new Float64Array([1/0,1/0,-1/0,-1/0]));$(this,af,-1);$(this,_s,new Set);$(this,z_,new Map);$(this,Y0,new Map);$(this,cg);$(this,fg);$(this,sf);$(this,Na);$(this,qu);R(this,cg,e.width),R(this,fg,e.height),W(this,q_,Q3).call(this,r),n&&R(this,qu,new Map)}growOperationsCount(e){e>=g(this,Na).length&&W(this,q_,Q3).call(this,e,g(this,Na))}save(e){return R(this,xs,{__proto__:g(this,xs)}),R(this,As,{__proto__:g(this,As),transform:{__proto__:g(this,As).transform},moveText:{__proto__:g(this,As).moveText},sameLineText:{__proto__:g(this,As).sameLineText},[ry]:{__proto__:g(this,As)[ry]}}),R(this,mr,{__proto__:g(this,mr)}),g(this,Vl).push(e),this}restore(e){var i;const r=Object.getPrototypeOf(g(this,xs));if(r===null)return this;R(this,xs,r),R(this,As,Object.getPrototypeOf(g(this,As))),R(this,mr,Object.getPrototypeOf(g(this,mr)));const n=g(this,Vl).pop();return n!==void 0&&((i=JC(g(this,qu),e))==null||i.dependencies.add(n),g(this,Na)[e]=g(this,Na)[n]),this}recordOpenMarker(e){return g(this,Vl).push(e),this}getOpenMarker(){return g(this,Vl).length===0?null:g(this,Vl).at(-1)}recordCloseMarker(e){var n;const r=g(this,Vl).pop();return r!==void 0&&((n=JC(g(this,qu),e))==null||n.dependencies.add(r),g(this,Na)[e]=g(this,Na)[r]),this}beginMarkedContent(e){return g(this,ug).push(e),this}endMarkedContent(e){var n;const r=g(this,ug).pop();return r!==void 0&&((n=JC(g(this,qu),e))==null||n.dependencies.add(r),g(this,Na)[e]=g(this,Na)[r]),this}pushBaseTransform(e){return g(this,nf).push(et.multiplyByDOMMatrix(g(this,nf).at(-1),e.getTransform())),this}popBaseTransform(){return g(this,nf).length>1&&g(this,nf).pop(),this}recordSimpleData(e,r){return g(this,xs)[e]=r,this}recordIncrementalData(e,r){return g(this,As)[e].push(r),this}resetIncrementalData(e,r){return g(this,As)[e].length=0,this}recordNamedData(e,r){return g(this,lg).set(e,r),this}recordSimpleDataFromNamed(e,r,n){g(this,xs)[e]=g(this,lg).get(r)??n}recordFutureForcedDependency(e,r){return this.recordIncrementalData(ry,r),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const r of e)r in g(this,xs)&&this.recordFutureForcedDependency(r,g(this,xs)[r]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of g(this,_s))this.recordFutureForcedDependency(ry,e);return this}resetBBox(e){return g(this,af)!==e&&(R(this,af,e),g(this,Dr)[0]=1/0,g(this,Dr)[1]=1/0,g(this,Dr)[2]=-1/0,g(this,Dr)[3]=-1/0),this}recordClipBox(e,r,n,i,a,s){const o=et.multiplyByDOMMatrix(g(this,nf).at(-1),r.getTransform()),l=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([n,a,i,s],o,l);const u=et.intersect(g(this,mr),l);return u?(g(this,mr)[0]=u[0],g(this,mr)[1]=u[1],g(this,mr)[2]=u[2],g(this,mr)[3]=u[3]):(g(this,mr)[0]=g(this,mr)[1]=1/0,g(this,mr)[2]=g(this,mr)[3]=-1/0),this}recordBBox(e,r,n,i,a,s){const o=g(this,mr);if(o[0]===1/0)return this;const l=et.multiplyByDOMMatrix(g(this,nf).at(-1),r.getTransform());if(o[0]===-1/0)return et.axialAlignedBoundingBox([n,a,i,s],l,g(this,Dr)),this;const u=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([n,a,i,s],l,u),g(this,Dr)[0]=Math.min(g(this,Dr)[0],Math.max(u[0],o[0])),g(this,Dr)[1]=Math.min(g(this,Dr)[1],Math.max(u[1],o[1])),g(this,Dr)[2]=Math.max(g(this,Dr)[2],Math.min(u[2],o[2])),g(this,Dr)[3]=Math.max(g(this,Dr)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,r,n,i=1,a=0,s=0,o){const l=n.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&g(this,Y0).get(n),u!==!1&&(c=[0,0,0,0],et.axialAlignedBoundingBox(l,n.fontMatrix,c),(i!==1||a!==0||s!==0)&&et.scaleMinMax([i,0,0,-i,a,s],c),u)))return this.recordBBox(e,r,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const f=o();return l&&c&&u===void 0&&(u=c[0]<=a-f.actualBoundingBoxLeft&&c[2]>=a+f.actualBoundingBoxRight&&c[1]<=s-f.actualBoundingBoxAscent&&c[3]>=s+f.actualBoundingBoxDescent,g(this,Y0).set(n,u),u)?this.recordBBox(e,r,c[0],c[2],c[1],c[3]):this.recordBBox(e,r,a-f.actualBoundingBoxLeft,a+f.actualBoundingBoxRight,s-f.actualBoundingBoxAscent,s+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return g(this,Dr)[0]=Math.max(0,g(this,mr)[0]),g(this,Dr)[1]=Math.max(0,g(this,mr)[1]),g(this,Dr)[2]=Math.min(g(this,cg),g(this,mr)[2]),g(this,Dr)[3]=Math.min(g(this,fg),g(this,mr)[3]),this}getSimpleIndex(e){return g(this,xs)[e]}recordDependencies(e,r){const n=g(this,_s),i=g(this,xs),a=g(this,As);for(const s of r)s in g(this,xs)?n.add(i[s]):s in a&&a[s].forEach(n.add,n);return this}recordNamedDependency(e,r){return g(this,lg).has(r)&&g(this,_s).add(g(this,lg).get(r)),this}recordOperation(e,r=!1){if(this.recordDependencies(e,[ry]),g(this,qu)){const n=JC(g(this,qu),e),{dependencies:i}=n;g(this,_s).forEach(i.add,i),g(this,Vl).forEach(i.add,i),g(this,ug).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(g(this,af)===e){const n=O7(g(this,Dr)[0]*256/g(this,cg)),i=O7(g(this,Dr)[1]*256/g(this,fg)),a=k7(g(this,Dr)[2]*256/g(this,cg)),s=k7(g(this,Dr)[3]*256/g(this,fg));ZC(g(this,sf),e,n,i,a,s);for(const o of g(this,_s))o!==e&&ZC(g(this,sf),o,n,i,a,s);for(const o of g(this,Vl))o!==e&&ZC(g(this,sf),o,n,i,a,s);for(const o of g(this,ug))o!==e&&ZC(g(this,sf),o,n,i,a,s);r||(g(this,_s).clear(),R(this,af,-1))}return this}recordShowTextOperation(e,r=!1){const n=Array.from(g(this,_s));this.recordOperation(e,r),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,r=!1){return g(this,af)===e&&(R(this,af,-1),g(this,mr)[0]=Math.max(g(this,mr)[0],g(this,Dr)[0]),g(this,mr)[1]=Math.max(g(this,mr)[1],g(this,Dr)[1]),g(this,mr)[2]=Math.min(g(this,mr)[2],g(this,Dr)[2]),g(this,mr)[3]=Math.min(g(this,mr)[3],g(this,Dr)[3]),r||g(this,_s).clear()),this}_takePendingDependencies(){const e=g(this,_s);return R(this,_s,new Set),e}_extractOperation(e){const r=g(this,z_).get(e);return g(this,z_).delete(e),r}_pushPendingDependencies(e){for(const r of e)g(this,_s).add(r)}take(){return g(this,Y0).clear(),new rDe(g(this,Na),g(this,sf))}takeDebugMetadata(){return g(this,qu)}}xs=new WeakMap,As=new WeakMap,lg=new WeakMap,Vl=new WeakMap,ug=new WeakMap,nf=new WeakMap,mr=new WeakMap,Dr=new WeakMap,af=new WeakMap,_s=new WeakMap,z_=new WeakMap,Y0=new WeakMap,cg=new WeakMap,fg=new WeakMap,sf=new WeakMap,Na=new WeakMap,qu=new WeakMap,q_=new WeakSet,Q3=function(e,r){const n=new ArrayBuffer(e*4);R(this,sf,new Uint8ClampedArray(n)),R(this,Na,new Uint32Array(n)),r&&r.length>0?(g(this,Na).set(r),g(this,Na).fill(Y3,r.length)):g(this,Na).fill(Y3)};var Rr,An,Ul,Q0,Z0;const eU=class eU{constructor(e,r,n){$(this,Rr);$(this,An);$(this,Ul);$(this,Q0,0);$(this,Z0,0);if(e instanceof eU&&g(e,Ul)===!!n)return e;R(this,Rr,e),R(this,An,r),R(this,Ul,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ni(this,Z0)._++,g(this,Rr).save(g(this,An)),this}restore(e){return g(this,Z0)>0&&(g(this,Rr).restore(g(this,An)),ni(this,Z0)._--),this}recordOpenMarker(e){return ni(this,Q0)._++,this}getOpenMarker(){return g(this,Q0)>0?g(this,An):g(this,Rr).getOpenMarker()}recordCloseMarker(e){return ni(this,Q0)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return g(this,Rr).pushBaseTransform(e),this}popBaseTransform(){return g(this,Rr).popBaseTransform(),this}recordSimpleData(e,r){return g(this,Rr).recordSimpleData(e,g(this,An)),this}recordIncrementalData(e,r){return g(this,Rr).recordIncrementalData(e,g(this,An)),this}resetIncrementalData(e,r){return g(this,Rr).resetIncrementalData(e,g(this,An)),this}recordNamedData(e,r){return this}recordSimpleDataFromNamed(e,r,n){return g(this,Rr).recordSimpleDataFromNamed(e,r,g(this,An)),this}recordFutureForcedDependency(e,r){return g(this,Rr).recordFutureForcedDependency(e,g(this,An)),this}inheritSimpleDataAsFutureForcedDependencies(e){return g(this,Rr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return g(this,Rr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return g(this,Ul)||g(this,Rr).resetBBox(g(this,An)),this}recordClipBox(e,r,n,i,a,s){return g(this,Ul)||g(this,Rr).recordClipBox(g(this,An),r,n,i,a,s),this}recordBBox(e,r,n,i,a,s){return g(this,Ul)||g(this,Rr).recordBBox(g(this,An),r,n,i,a,s),this}recordCharacterBBox(e,r,n,i,a,s,o){return g(this,Ul)||g(this,Rr).recordCharacterBBox(g(this,An),r,n,i,a,s,o),this}recordFullPageBBox(e){return g(this,Ul)||g(this,Rr).recordFullPageBBox(g(this,An)),this}getSimpleIndex(e){return g(this,Rr).getSimpleIndex(e)}recordDependencies(e,r){return g(this,Rr).recordDependencies(g(this,An),r),this}recordNamedDependency(e,r){return g(this,Rr).recordNamedDependency(g(this,An),r),this}recordOperation(e){return g(this,Rr).recordOperation(g(this,An),!0),this}recordShowTextOperation(e){return g(this,Rr).recordShowTextOperation(g(this,An),!0),this}bboxToClipBoxDropOperation(e){return g(this,Ul)||g(this,Rr).bboxToClipBoxDropOperation(g(this,An),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Rr=new WeakMap,An=new WeakMap,Ul=new WeakMap,Q0=new WeakMap,Z0=new WeakMap;let JN=eU;const Lo={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},aa={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Z3(t,e){if(!e)return;const r=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],r,n),t.clip(i)}class t6{isModifyingCurrentTransform(){return!1}getPattern(){Br("Abstract method `getPattern` called.")}}class iDe extends t6{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let r;this._type==="axial"?r=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)r.addColorStop(n[0],n[1]);return r}getPattern(e,r,n,i){let a;if(i===aa.STROKE||i===aa.FILL){const s=r.current.getClippedPathBoundingBox(i,fn(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,u=r.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=et.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...r.baseTransform),this.matrix&&c.transform(...this.matrix),Z3(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),a=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);a.setTransform(f)}else Z3(e,this._bbox),a=this._createGradient(e);return a}}function Hk(t,e,r,n,i,a,s,o){const l=e.coords,u=e.colors,c=t.data,f=t.width*4;let h;l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=a,a=s,s=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=o,o=h),l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=a,a=s,s=h);const d=(l[r]+e.offsetX)*e.scaleX,p=(l[r+1]+e.offsetY)*e.scaleY,m=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,w=(l[i+1]+e.offsetY)*e.scaleY;if(p>=w)return;const b=u[a],_=u[a+1],x=u[a+2],A=u[s],E=u[s+1],S=u[s+2],C=u[o],D=u[o+1],N=u[o+2],P=Math.round(p),M=Math.round(w);let j,K,k,V,q,H,ee,le;for(let re=P;re<=M;re++){if(re<v){const de=re<p?0:(p-re)/(p-v);j=d-(d-m)*de,K=b-(b-A)*de,k=_-(_-E)*de,V=x-(x-S)*de}else{let de;re>w?de=1:v===w?de=0:de=(v-re)/(v-w),j=m-(m-y)*de,K=A-(A-C)*de,k=E-(E-D)*de,V=S-(S-N)*de}let L;re<p?L=0:re>w?L=1:L=(p-re)/(p-w),q=d-(d-y)*L,H=b-(b-C)*L,ee=_-(_-D)*L,le=x-(x-N)*L;const ie=Math.round(Math.min(j,q)),X=Math.round(Math.max(j,q));let pe=f*re+ie*4;for(let de=ie;de<=X;de++)L=(j-de)/(j-q),L<0?L=0:L>1&&(L=1),c[pe++]=K-(K-H)*L|0,c[pe++]=k-(k-ee)*L|0,c[pe++]=V-(V-le)*L|0,c[pe++]=255}}function aDe(t,e,r){const n=e.coords,i=e.colors;let a,s;switch(e.type){case _3.LATTICE:const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(a=0;a<l;a++){let c=a*o;for(let f=0;f<u;f++,c++)Hk(t,r,n[c],n[c+1],n[c+o],i[c],i[c+1],i[c+o]),Hk(t,r,n[c+o+1],n[c+1],n[c+o],i[c+o+1],i[c+1],i[c+o])}break;case _3.TRIANGLES:for(a=0,s=n.length;a<s;a+=3)Hk(t,r,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class sDe extends t6{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,r,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),d=u/f,p=c/h,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/d,scaleY:1/p},v=f+2*2,y=h+2*2,w=n.getCanvas("mesh",v,y),b=w.context,_=b.createImageData(f,h);if(r){const A=_.data;for(let E=0,S=A.length;E<S;E+=4)A[E]=r[0],A[E+1]=r[1],A[E+2]=r[2],A[E+3]=255}for(const A of this._figures)aDe(_,A,m);return b.putImageData(_,2,2),{canvas:w.canvas,offsetX:o-2*d,offsetY:l-2*p,scaleX:d,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,r,n,i){Z3(e,this._bbox);const a=new Float32Array(2);if(i===aa.SHADING)et.singularValueDecompose2dScale(fn(e),a);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,a);const[o,l]=a;et.singularValueDecompose2dScale(r.baseTransform,a),a[0]*=o,a[1]*=l}else et.singularValueDecompose2dScale(r.baseTransform,a);const s=this._createMeshCanvas(a,i===aa.SHADING?null:this._background,r.cachedCanvases);return i!==aa.SHADING&&(e.setTransform(...r.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class oDe extends t6{getPattern(){return"hotpink"}}function lDe(t){switch(t[0]){case"RadialAxial":return new iDe(t);case"Mesh":return new sDe(t);case"Dummy":return new oDe}throw new Error(`Unknown IR type: ${t[0]}`)}const R7={COLORED:1,UNCOLORED:2},UP=class UP{constructor(e,r,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,r){var H,ee;const{bbox:n,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),GM("TilingType: "+s);const f=n[0],h=n[1],d=n[2],p=n[3],m=d-f,v=p-h,y=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,y);const[w,b]=y;et.singularValueDecompose2dScale(this.baseTransform,y);const _=w*y[0],x=b*y[1];let A=m,E=v,S=!1,C=!1;const D=Math.ceil(u*_),N=Math.ceil(c*x),P=Math.ceil(m*_),M=Math.ceil(v*x);D>=P?A=u:S=!0,N>=M?E=c:C=!0;const j=this.getSizeAndScale(A,this.ctx.canvas.width,_),K=this.getSizeAndScale(E,this.ctx.canvas.height,x),k=e.cachedCanvases.getCanvas("pattern",j.size,K.size),V=k.context,q=l.createCanvasGraphics(V,r);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,a,o),V.translate(-j.scale*f,-K.scale*h),q.transform(0,j.scale,0,0,K.scale,0,0),V.save(),(H=q.dependencyTracker)==null||H.save(),this.clipBbox(q,f,h,d,p),q.baseTransform=fn(q.ctx),q.executeOperatorList(i),q.endDrawing(),(ee=q.dependencyTracker)==null||ee.restore(),V.restore(),S||C){const le=k.canvas;S&&(A=u),C&&(E=c);const re=this.getSizeAndScale(A,this.ctx.canvas.width,_),L=this.getSizeAndScale(E,this.ctx.canvas.height,x),ie=re.size,X=L.size,pe=e.cachedCanvases.getCanvas("pattern-workaround",ie,X),de=pe.context,ae=S?Math.floor(m/u):0,z=C?Math.floor(v/c):0;for(let ne=0;ne<=ae;ne++)for(let fe=0;fe<=z;fe++)de.drawImage(le,ie*ne,X*fe,ie,X,0,0,ie,X);return{canvas:pe.canvas,scaleX:re.scale,scaleY:L.scale,offsetX:f,offsetY:h}}return{canvas:k.canvas,scaleX:j.scale,scaleY:K.scale,offsetX:f,offsetY:h}}getSizeAndScale(e,r,n){const i=Math.max(UP.MAX_PATTERN_SIZE,r);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,r,n,i,a){const s=i-r,o=a-n;e.ctx.rect(r,n,s,o),et.axialAlignedBoundingBox([r,n,i,a],fn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,n){const i=e.ctx,a=e.current;switch(r){case R7.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case R7.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new xTe(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,n,i,a){let s=n;i!==aa.SHADING&&(s=et.transform(s,r.baseTransform),this.matrix&&(s=et.transform(s,this.matrix)));const o=this.createPatternCanvas(r,a);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Oe(UP,"MAX_PATTERN_SIZE",3e3);let J3=UP;function uDe({src:t,srcPos:e=0,dest:r,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=da.isLittleEndian?4278190080:255,[l,u]=s?[a,o]:[o,a],c=n>>3,f=n&7,h=t.length;r=new Uint32Array(r.buffer);let d=0;for(let p=0;p<i;p++){for(const v=e+c;e<v;e++){const y=e<h?t[e]:255;r[d++]=y&128?u:l,r[d++]=y&64?u:l,r[d++]=y&32?u:l,r[d++]=y&16?u:l,r[d++]=y&8?u:l,r[d++]=y&4?u:l,r[d++]=y&2?u:l,r[d++]=y&1?u:l}if(f===0)continue;const m=e<h?t[e++]:255;for(let v=0;v<f;v++)r[d++]=m&1<<7-v?u:l}return{srcPos:e,destPos:d}}const F7=16,L7=100,cDe=15,B7=10,Ts=16,Wk=new DOMMatrix,po=new Float32Array(2),qy=new Float32Array([1/0,1/0,-1/0,-1/0]);function fDe(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,n){e.translate(r,n),this.__originalTranslate(r,n)},t.scale=function(r,n){e.scale(r,n),this.__originalScale(r,n)},t.transform=function(r,n,i,a,s,o){e.transform(r,n,i,a,s,o),this.__originalTransform(r,n,i,a,s,o)},t.setTransform=function(r,n,i,a,s,o){e.setTransform(r,n,i,a,s,o),this.__originalSetTransform(r,n,i,a,s,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(r,n){e.moveTo(r,n),this.__originalMoveTo(r,n)},t.lineTo=function(r,n){e.lineTo(r,n),this.__originalLineTo(r,n)},t.bezierCurveTo=function(r,n,i,a,s,o){e.bezierCurveTo(r,n,i,a,s,o),this.__originalBezierCurveTo(r,n,i,a,s,o)},t.rect=function(r,n,i,a){e.rect(r,n,i,a),this.__originalRect(r,n,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class hDe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,r,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,r,n)):(i=this.canvasFactory.create(r,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}}function eT(t,e,r,n,i,a,s,o,l,u){const[c,f,h,d,p,m]=fn(t);if(f===0&&h===0){const w=s*c+p,b=Math.round(w),_=o*d+m,x=Math.round(_),A=(s+l)*c+p,E=Math.abs(Math.round(A)-b)||1,S=(o+u)*d+m,C=Math.abs(Math.round(S)-x)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(d),b,x),t.drawImage(e,r,n,i,a,0,0,E,C),t.setTransform(c,f,h,d,p,m),[E,C]}if(c===0&&d===0){const w=o*h+p,b=Math.round(w),_=s*f+m,x=Math.round(_),A=(o+u)*h+p,E=Math.abs(Math.round(A)-b)||1,S=(s+l)*f+m,C=Math.abs(Math.round(S)-x)||1;return t.setTransform(0,Math.sign(f),Math.sign(h),0,b,x),t.drawImage(e,r,n,i,a,0,0,C,E),t.setTransform(c,f,h,d,p,m),[C,E]}t.drawImage(e,r,n,i,a,s,o,l,u);const v=Math.hypot(c,f),y=Math.hypot(h,d);return[v*l,y*u]}class $7{constructor(e,r,n){Oe(this,"alphaIsShape",!1);Oe(this,"fontSize",0);Oe(this,"fontSizeScale",1);Oe(this,"textMatrix",null);Oe(this,"textMatrixScale",1);Oe(this,"fontMatrix",A3);Oe(this,"leading",0);Oe(this,"x",0);Oe(this,"y",0);Oe(this,"lineX",0);Oe(this,"lineY",0);Oe(this,"charSpacing",0);Oe(this,"wordSpacing",0);Oe(this,"textHScale",1);Oe(this,"textRenderingMode",Xi.FILL);Oe(this,"textRise",0);Oe(this,"fillColor","#000000");Oe(this,"strokeColor","#000000");Oe(this,"patternFill",!1);Oe(this,"patternStroke",!1);Oe(this,"fillAlpha",1);Oe(this,"strokeAlpha",1);Oe(this,"lineWidth",1);Oe(this,"activeSMask",null);Oe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,r]),this.minMax=qy.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=aa.FILL,r=null){const n=this.minMax.slice();if(e===aa.STROKE){r||Br("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(r,po);const i=po[0]*this.lineWidth/2,a=po[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(qy,0)}getClippedPathBoundingBox(e=aa.FILL,r=null){return et.intersect(this.clipBox,this.getPathBoundingBox(e,r))}}function j7(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const r=e.height,n=e.width,i=r%Ts,a=(r-i)/Ts,s=i===0?a:a+1,o=t.createImageData(n,Ts);let l=0,u;const c=e.data,f=o.data;let h,d,p,m;if(e.kind===dD.GRAYSCALE_1BPP){const v=c.byteLength,y=new Uint32Array(f.buffer,0,f.byteLength>>2),w=y.length,b=n+7>>3,_=4294967295,x=da.isLittleEndian?4278190080:255;for(h=0;h<s;h++){for(p=h<a?Ts:i,u=0,d=0;d<p;d++){const A=v-l;let E=0;const S=A>b?n:A*8-7,C=S&-8;let D=0,N=0;for(;E<C;E+=8)N=c[l++],y[u++]=N&128?_:x,y[u++]=N&64?_:x,y[u++]=N&32?_:x,y[u++]=N&16?_:x,y[u++]=N&8?_:x,y[u++]=N&4?_:x,y[u++]=N&2?_:x,y[u++]=N&1?_:x;for(;E<S;E++)D===0&&(N=c[l++],D=128),y[u++]=N&D?_:x,D>>=1}for(;u<w;)y[u++]=0;t.putImageData(o,0,h*Ts)}}else if(e.kind===dD.RGBA_32BPP){for(d=0,m=n*Ts*4,h=0;h<a;h++)f.set(c.subarray(l,l+m)),l+=m,t.putImageData(o,0,d),d+=Ts;h<s&&(m=n*i*4,f.set(c.subarray(l,l+m)),t.putImageData(o,0,d))}else if(e.kind===dD.RGB_24BPP)for(p=Ts,m=n*p,h=0;h<s;h++){for(h>=a&&(p=i,m=n*p),u=0,d=m;d--;)f[u++]=c[l++],f[u++]=c[l++],f[u++]=c[l++],f[u++]=255;t.putImageData(o,0,h*Ts)}else throw new Error(`bad image kind: ${e.kind}`)}function V7(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const r=e.height,n=e.width,i=r%Ts,a=(r-i)/Ts,s=i===0?a:a+1,o=t.createImageData(n,Ts);let l=0;const u=e.data,c=o.data;for(let f=0;f<s;f++){const h=f<a?Ts:i;({srcPos:l}=uDe({src:u,srcPos:l,dest:c,width:n,height:h,nonBlackColor:0})),t.putImageData(o,0,f*Ts)}}function P1(t,e){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of r)t[n]!==void 0&&(e[n]=t[n]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function tT(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function U7(t,e){if(e)return!0;et.singularValueDecompose2dScale(t,po);const r=Math.fround(bc.pixelRatio*_p.PDF_TO_CSS_UNITS);return po[0]<=r&&po[1]<=r}const dDe=["butt","round","square"],pDe=["miter","round","bevel"],mDe={},z7={};var gu,eL,tL,rL;const tU=class tU{constructor(e,r,n,i,a,{optionalContentConfig:s,markedContentStack:o=null},l,u,c){$(this,gu);this.ctx=e,this.current=new $7(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new hDe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,r,n=null){var i;return typeof r=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,r),r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r)):n}beginDrawing({transform:e,viewport:r,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...fn(this.compositeCtx))}this.ctx.save(),tT(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=fn(this.ctx)}executeOperatorList(e,r,n,i,a){var y;const s=e.argsArray,o=e.fnArray;let l=r||0;const u=s.length;if(u===l)return l;const c=u-l>B7&&typeof n=="function",f=c?Date.now()+cDe:0;let h=0;const d=this.commonObjs,p=this.objs;let m,v;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!a||a(l))if(m=o[l],v=s[l]??null,m!==IA.dependency)v===null?this[m](l):this[m](l,...v);else for(const w of v){(y=this.dependencyTracker)==null||y.recordNamedData(w,l);const b=w.startsWith("g_")?d:p;if(!b.has(w))return b.get(w,n),l}if(l++,l===u)return l;if(c&&++h>B7){if(Date.now()>f)return n(),l;h=0}}}endDrawing(){W(this,gu,eL).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const r of e.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);e.clear()}this._cachedBitmapsMap.clear(),W(this,gu,tL).call(this)}_scaleImage(e,r){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(r[0],r[1]),1),s=Math.max(Math.hypot(r[2],r[3]),1),o=n,l=i,u="prescale1",c,f;for(;a>2&&o>1||s>2&&l>1;){let h=o,d=l;a>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/h),s>2&&l>1&&(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/d),c=this.cachedCanvases.getCanvas(u,h,d),f=c.context,f.clearRect(0,0,h,d),f.drawImage(e,0,0,o,l,0,0,h,d),e=c.canvas,o=h,l=d,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,r){var D,N;const n=this.ctx,{width:i,height:a}=r,s=this.current.fillColor,o=this.current.patternFill,l=fn(n);let u,c,f,h;if((r.bitmap||r.data)&&r.count>1){const P=r.bitmap||r.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),s]),u=this._cachedBitmapsMap.get(P),u||(u=new Map,this._cachedBitmapsMap.set(P,u));const M=u.get(c);if(M&&!o){const j=Math.round(Math.min(l[0],l[2])+l[4]),K=Math.round(Math.min(l[1],l[3])+l[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,Lo.transformAndFill),{canvas:M,offsetX:j,offsetY:K}}f=M}f||(h=this.cachedCanvases.getCanvas("maskCanvas",i,a),V7(h.context,r));let d=et.transform(l,[1/i,0,0,-1/a,0,0]);d=et.transform(d,[1,0,0,1,0,-a]);const p=qy.slice();et.axialAlignedBoundingBox([0,0,i,a],d,p);const[m,v,y,w]=p,b=Math.round(y-m)||1,_=Math.round(w-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",b,_),A=x.context,E=m,S=v;A.translate(-E,-S),A.transform(...d),f||(f=this._scaleImage(h.canvas,Du(A)),f=f.img,u&&o&&u.set(c,f)),A.imageSmoothingEnabled=U7(fn(A),r.interpolate),eT(A,f,0,0,f.width,f.height,0,0,i,a),A.globalCompositeOperation="source-in";const C=et.transform(Du(A),[1,0,0,1,-E,-S]);return A.fillStyle=o?s.getPattern(n,this,C,aa.FILL,e):s,A.fillRect(0,0,i,a),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,x.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,Lo.transformAndFill),{canvas:x.canvas,offsetX:Math.round(E),offsetY:Math.round(S)}}setLineWidth(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),r!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=dDe[r]}setLineJoin(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=pDe[r]}setMiterLimit(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=r}setDash(e,r,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(r),i.lineDashOffset=n)}setRenderingIntent(e,r){}setFlatness(e,r){}setGState(e,r){var n,i,a,s,o;for(const[l,u]of r)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,r,n);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),P1(this.suspendedCtx,s),fDe(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),P1(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,r,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,r,n,i){const a=i[0],s=i[1],o=i[2]-a,l=i[3]-s;o===0||l===0||(this.genericComposeSMask(r.context,n,o,l,r.subtype,r.backdrop,r.transferMap,a,s,r.offsetX,r.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,r,n,i,a,s,o,l,u,c,f){let h=e.canvas,d=l-c,p=u-f;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,i),y=v.context;y.drawImage(h,-d,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",h=v.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(d,p,n,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(d,p,n,i),e.restore()}r.save(),r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?r.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(r.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,u,n,i),r.clip(m),r.globalCompositeOperation="destination-in",r.drawImage(h,d,p,n,i,l,u,n,i),r.restore()}save(e){var n;this.inSMaskMode&&P1(this.ctx,this.suspendedCtx),this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var r;if((r=this.dependencyTracker)==null||r.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&P1(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,r,n,i,a,s,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(r,n,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,r,n,i){let[a]=n;if(!i){a||(a=n[0]=new Path2D),this[r](e,a);return}if(this.dependencyTracker!==null){const s=r===IA.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}a instanceof Path2D||(a=n[0]=cie(a)),et.axialAlignedBoundingBox(i,fn(this.ctx),this.current.minMax),this[r](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,r,n=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,Du(i),aa.STROKE,e),o){const l=new Path2D;l.addPath(r,i.getTransform().invertSelf().multiplySelf(o)),r=l}this.rescaleAndStroke(r,!1),i.restore()}else this.rescaleAndStroke(r,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,Lo.stroke),n&&this.consumePath(e,r,this.current.getClippedPathBoundingBox(aa.STROKE,fn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,r){this.stroke(e,r)}fill(e,r,n=!0){var u,c,f;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=a.getPattern(i,this,Du(i),aa.FILL,e),h){const d=new Path2D;d.addPath(r,i.getTransform().invertSelf().multiplySelf(h)),r=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(r,"evenodd"),this.pendingEOFill=!1):i.fill(r)),(c=this.dependencyTracker)==null||c.recordDependencies(e,Lo.fill),o&&(i.restore(),(f=this.dependencyTracker)==null||f.restore(e)),n&&this.consumePath(e,r,l)}eoFill(e,r){this.pendingEOFill=!0,this.fill(e,r)}fillStroke(e,r){this.fill(e,r,!1),this.stroke(e,r,!1),this.consumePath(e,r)}eoFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}closeFillStroke(e,r){this.fillStroke(e,r)}closeEOFillStroke(e,r){this.pendingEOFill=!0,this.fillStroke(e,r)}endPath(e,r){this.consumePath(e,r)}rawFillPath(e,r){var n;this.ctx.fill(r),(n=this.dependencyTracker)==null||n.recordDependencies(e,Lo.rawFillPath).recordOperation(e)}clip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=mDe}eoClip(e){var r;(r=this.dependencyTracker)==null||r.recordFutureForcedDependency("clipMode",e),this.pendingClip=z7}beginText(e){var r;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(r=this.dependencyTracker)==null||r.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const r=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;r!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(r!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:s,x:o,y:l,fontSize:u,path:c}of r)c&&i.addPath(c,new DOMMatrix(s).preMultiplySelf(a).translate(o,l).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=r}setWordSpacing(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=r}setHScale(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=r/100}setLeading(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-r}setFont(e,r,n){var f,h;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",r,e);const i=this.commonObjs.get(r),a=this.current;if(!i)throw new Error(`Can't find font for ${r}`);if(a.fontMatrix=i.fontMatrix||A3,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Tt("Invalid font matrix for font "+r),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${s}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=n;n<F7?c=F7:n>L7&&(c=L7),this.current.fontSizeScale=n/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=r}setTextRise(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=r}moveText(e,r,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,r,n){this.setLeading(e,-n),this.moveText(e,r,n)}setTextMatrix(e,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=r,n.textMatrixScale=Math.hypot(r[0],r[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var r;this.moveText(e,0,this.current.leading),(r=this.dependencyTracker)==null||r.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,r,n,i,a,s){var y,w,b,_;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,h=c&Xi.FILL_STROKE_MASK,d=!!(c&Xi.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,m=l.patternStroke&&!u.missingFile;let v;if((u.disableFontFace||d||p||m)&&!u.missingFile&&(v=u.getPathGenerator(this.commonObjs,r)),v&&(u.disableFontFace||p||m)){o.save(),o.translate(n,i),o.scale(f,-f),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,u);let x;if(h===Xi.FILL||h===Xi.FILL_STROKE)if(a){x=o.getTransform(),o.setTransform(...a);const A=W(this,gu,rL).call(this,v,x,a);o.fill(A)}else o.fill(v);if(h===Xi.STROKE||h===Xi.FILL_STROKE)if(s){x||(x=o.getTransform()),o.setTransform(...s);const{a:A,b:E,c:S,d:C}=x,D=et.inverseTransform(s),N=et.transform([A,E,S,C,0,0],D);et.singularValueDecompose2dScale(N,po),o.lineWidth*=Math.max(po[0],po[1])/f,o.stroke(W(this,gu,rL).call(this,v,x,s))}else o.lineWidth/=f,o.stroke(v);o.restore()}else(h===Xi.FILL||h===Xi.FILL_STROKE)&&(o.fillText(r,n,i),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,u,f,n,i,()=>o.measureText(r))),(h===Xi.STROKE||h===Xi.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,u,f,n,i,()=>o.measureText(r)).recordDependencies(e,Lo.stroke)),o.strokeText(r,n,i));d&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:fn(o),x:n,y:i,fontSize:f,path:v}),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,o,u,f,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const r=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<r.length;i+=4)if(r[i]>0&&r[i]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(e,r){var S,C,D,N;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Lo.showText).resetBBox(e),this.current.textRenderingMode&Xi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,r),(S=this.dependencyTracker)==null||S.recordShowTextOperation(e);return}const a=n.fontSize;if(a===0){(C=this.dependencyTracker)==null||C.recordOperation(e);return}const s=this.ctx,o=n.fontSizeScale,l=n.charSpacing,u=n.wordSpacing,c=n.fontDirection,f=n.textHScale*c,h=r.length,d=i.vertical,p=d?1:-1,m=i.defaultVMetrics,v=a*n.fontMatrix[0],y=n.textRenderingMode===Xi.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(f,-1):s.scale(f,1);let w,b;if(n.patternFill){s.save();const P=n.fillColor.getPattern(s,this,Du(s),aa.FILL,e);w=fn(s),s.restore(),s.fillStyle=P}if(n.patternStroke){s.save();const P=n.strokeColor.getPattern(s,this,Du(s),aa.STROKE,e);b=fn(s),s.restore(),s.strokeStyle=P}let _=n.lineWidth;const x=n.textMatrixScale;if(x===0||_===0){const P=n.textRenderingMode&Xi.FILL_STROKE_MASK;(P===Xi.STROKE||P===Xi.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=x;if(o!==1&&(s.scale(o,o),_/=o),s.lineWidth=_,i.isInvalidPDFjsFont){const P=[];let M=0;for(const K of r)P.push(K.unicode),M+=K.width;const j=P.join("");if(s.fillText(j,0,0),this.dependencyTracker!==null){const K=s.measureText(j);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=M*v*f,s.restore(),this.compose();return}let A=0,E;for(E=0;E<h;++E){const P=r[E];if(typeof P=="number"){A+=p*P*a/1e3;continue}let M=!1;const j=(P.isSpace?u:0)+l,K=P.fontChar,k=P.accent;let V,q,H=P.width;if(d){const re=P.vmetric||m,L=-(P.vmetric?re[1]:H*.5)*v,ie=re[2]*v;H=re?-re[0]:H,V=L/o,q=(A+ie)/o}else V=A/o,q=0;let ee;if(i.remeasure&&H>0){ee=s.measureText(K);const re=ee.width*1e3/a*o;if(H<re&&this.isFontSubpixelAAEnabled){const L=H/re;M=!0,s.save(),s.scale(L,1),V/=L}else H!==re&&(V+=(H-re)/2e3*a/o)}if(this.contentVisible&&(P.isInFont||i.missingFile)){if(y&&!k)s.fillText(K,V,q),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,s,ee?{bbox:null}:i,a/o,V,q,()=>ee??s.measureText(K));else if(this.paintChar(e,K,V,q,w,b),k){const re=V+a*k.offset.x/o,L=q-a*k.offset.y/o;this.paintChar(e,k.fontChar,re,L,w,b)}}const le=d?H*v-j*c:H*v+j*c;A+=le,M&&s.restore()}d?n.y-=A:n.x+=A*f,s.restore(),this.compose(),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e)}showType3Text(e,r){const n=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,l=a.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,f=i.textHScale*o,h=i.fontMatrix||A3,d=r.length,p=i.textRenderingMode===Xi.INVISIBLE;let m,v,y,w;if(p||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(f,o);const b=this.dependencyTracker;for(this.dependencyTracker=b?new JN(b,e):null,m=0;m<d;++m){if(v=r[m],typeof v=="number"){w=l*v*s/1e3,this.ctx.translate(w,0),i.x+=w*f;continue}const _=(v.isSpace?c:0)+u,x=a.charProcOperatorList[v.operatorListId];x?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(x),this.restore()):Tt(`Type3 character "${v.operatorListId}" is not available.`);const A=[v.width,0];et.applyTransform(A,h),y=A[0]*s+_,n.translate(y,0),i.x+=y*f}n.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,r,n){}setCharWidthAndBounds(e,r,n,i,a,s,o){var u;const l=new Path2D;l.rect(i,a,s-i,o-a),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,s,a,o).recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}getColorN_Pattern(e,r){let n;if(r[0]==="TilingPattern"){const i=this.baseTransform||fn(this.ctx),a={createCanvasGraphics:(s,o)=>new tU(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new JN(this.dependencyTracker,o,!0):null)};n=new J3(r,this.ctx,a,i)}else n=this._getPattern(e,r[1],r[2]);return n}setStrokeColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,r),this.current.patternStroke=!0}setFillColorN(e,...r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,r),this.current.patternFill=!0}setStrokeRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=r,this.current.patternStroke=!1}setStrokeTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,r){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=r,this.current.patternFill=!1}setFillTransparent(e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,r,n=null){let i;return this.cachedPatterns.has(r)?i=this.cachedPatterns.get(r):(i=lDe(this.getObject(e,r)),this.cachedPatterns.set(r,i)),n&&(i.matrix=n),i}shadingFill(e,r){var s;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,r);n.fillStyle=i.getPattern(n,this,Du(n),aa.SHADING,e);const a=Du(n);if(a){const{width:o,height:l}=n.canvas,u=qy.slice();et.axialAlignedBoundingBox([0,0,o,l],a,u);const[c,f,h,d]=u;this.ctx.fillRect(c,f,h-c,d-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Lo.transform).recordDependencies(e,Lo.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Br("Should not call beginInlineImage")}beginImageData(){Br("Should not call beginImageData")}paintFormXObjectBegin(e,r,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),r&&this.transform(e,...r),this.baseTransform=fn(this.ctx),n)){et.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,s,o,l]=n,u=new Path2D;u.rect(a,s,o-a,l-s),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,o,s,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,r){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;r.isolated||GM("TODO: Support non-isolated groups."),r.knockout&&Tt("Knockout groups not supported.");const i=fn(n);if(r.matrix&&n.transform(...r.matrix),!r.bbox)throw new Error("Bounding box is required.");let a=qy.slice();et.axialAlignedBoundingBox(r.bbox,fn(n),a);const s=[0,0,n.canvas.width,n.canvas.height];a=et.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),l=Math.floor(a[1]),u=Math.max(Math.ceil(a[2])-o,1),c=Math.max(Math.ceil(a[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let f="groupAt"+this.groupLevel;r.smask&&(f+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(f,u,c),d=h.context;d.translate(-o,-l),d.transform(...i);let p=new Path2D;const[m,v,y,w]=r.bbox;if(p.rect(m,v,y-m,w-v),r.matrix){const _=new Path2D;_.addPath(p,new DOMMatrix(r.matrix)),p=_}d.clip(p),r.smask&&this.smaskStack.push({canvas:h.canvas,context:d,offsetX:o,offsetY:l,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}),(!r.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),P1(n,d),this.ctx=d,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,r){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),r.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=fn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const o=qy.slice();et.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],s,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,r,n,i,a,s){if(W(this,gu,eL).call(this),tT(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,et.singularValueDecompose2dScale(fn(this.ctx),po);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),f=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,f);const{canvas:h,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(r,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(po[0],0,0,-po[1],0,l*po[1]),tT(this.ctx)}else{tT(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],o,l),this.ctx.clip(u)}}this.current=new $7(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),W(this,gu,tL).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,r){var o;if(!this.contentVisible)return;const n=r.count;r=this.getObject(e,r.data,r),r.count=n;const i=this.ctx,a=this._createMaskCanvas(e,r),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,r,n,i=0,a=0,s,o){var f,h,d;if(!this.contentVisible)return;r=this.getObject(e,r.data,r);const l=this.ctx;l.save();const u=fn(l);l.transform(n,i,a,s,0,0);const c=this._createMaskCanvas(e,r);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let p=0,m=o.length;p<m;p+=2){const v=et.transform(u,[n,i,a,s,o[p],o[p+1]]);l.drawImage(c.canvas,v[4],v[5]),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,v[4],v[4]+c.canvas.width,v[5],v[5]+c.canvas.height)}l.restore(),this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageMaskXObjectGroup(e,r){var s,o,l;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,Lo.transformAndFill);for(const u of r){const{data:c,width:f,height:h,transform:d}=u,p=this.cachedCanvases.getCanvas("maskCanvas",f,h),m=p.context;m.save();const v=this.getObject(e,c,u);V7(m,v),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,Du(n),aa.FILL,e):i,m.fillRect(0,0,f,h),m.restore(),n.save(),n.transform(...d),n.scale(1,-1),eT(n,p.canvas,0,0,f,h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,f,0,h),n.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,r){if(!this.contentVisible)return;const n=this.getObject(e,r);if(!n){Tt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,r,n,i,a){if(!this.contentVisible)return;const s=this.getObject(e,r);if(!s){Tt("Dependent image isn't ready yet");return}const o=s.width,l=s.height,u=[];for(let c=0,f=a.length;c<f;c+=2)u.push({transform:[n,0,0,i,a[c],a[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:r,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(r,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,r){var u;if(!this.contentVisible)return;const n=r.width,i=r.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/n,-1/i);let o;if(r.bitmap)o=this.applyTransferMapsToBitmap(r);else if(typeof HTMLElement=="function"&&r instanceof HTMLElement||!r.data)o=r;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;j7(f,r),o=this.applyTransferMapsToCanvas(f)}const l=this._scaleImage(o,Du(a));a.imageSmoothingEnabled=U7(fn(a),r.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,Lo.imageXObject).recordOperation(e),eT(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,r,n){var s,o,l;if(!this.contentVisible)return;const i=this.ctx;let a;if(r.bitmap)a=r.bitmap;else{const u=r.width,c=r.height,h=this.cachedCanvases.getCanvas("inlineImage",u,c).context;j7(h,r),a=this.applyTransferMapsToCanvas(h)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),eT(i,a,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var r;this.contentVisible&&((r=this.dependencyTracker)==null||r.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Lo.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,r){}markPointProps(e,r,n){}beginMarkedContent(e,r){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,r,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),r==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var r;(r=this.dependencyTracker)==null||r.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,r,n){var s,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===z7?a.clip(r,"evenodd"):a.clip(r)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=fn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:r,b:n,c:i,d:a}=this.ctx.getTransform();let s,o;if(n===0&&i===0){const l=Math.abs(r),u=Math.abs(a);if(l===u)if(e===0)s=o=1/l;else{const c=l*e;s=o=c<1?1/c:1}else if(e===0)s=1/l,o=1/u;else{const c=l*e,f=u*e;s=c<1?1/c:1,o=f<1?1/f:1}}else{const l=Math.abs(r*a-n*i),u=Math.hypot(r,n),c=Math.hypot(i,a);if(e===0)s=c/l,o=u/l;else{const f=e*l;s=c>f?c/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,r){const{ctx:n,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){n.lineWidth=(i||1)*a,n.stroke(e);return}const o=n.getLineDash();r&&n.save(),n.scale(a,s),Wk.a=1/a,Wk.d=1/s;const l=new Path2D;if(l.addPath(e,Wk),o.length>0){const u=Math.max(a,s);n.setLineDash(o.map(c=>c/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),r&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};gu=new WeakSet,eL=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},tL=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const r=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}},rL=function(e,r,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(r)),i};let u0=tU;for(const t in IA)u0.prototype[t]!==void 0&&(u0.prototype[IA[t]]=u0.prototype[t]);var H_,W_;class nc{static get workerPort(){return g(this,H_)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");R(this,H_,e)}static get workerSrc(){return g(this,W_)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");R(this,W_,e)}}H_=new WeakMap,W_=new WeakMap,$(nc,H_,null),$(nc,W_,"");var J0,G_;class gDe{constructor({parsedData:e,rawData:r}){$(this,J0);$(this,G_);R(this,J0,e),R(this,G_,r)}getRaw(){return g(this,G_)}get(e){return g(this,J0).get(e)??null}[Symbol.iterator](){return g(this,J0).entries()}}J0=new WeakMap,G_=new WeakMap;const Ay=Symbol("INTERNAL");var K_,X_,Y_,eb;class vDe{constructor(e,{name:r,intent:n,usage:i,rbGroups:a}){$(this,K_,!1);$(this,X_,!1);$(this,Y_,!1);$(this,eb,!0);R(this,K_,!!(e&fo.DISPLAY)),R(this,X_,!!(e&fo.PRINT)),this.name=r,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(g(this,Y_))return g(this,eb);if(!g(this,eb))return!1;const{print:e,view:r}=this.usage;return g(this,K_)?(r==null?void 0:r.viewState)!=="OFF":g(this,X_)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,r,n=!1){e!==Ay&&Br("Internal method `_setVisible` called."),R(this,Y_,n),R(this,eb,r)}}K_=new WeakMap,X_=new WeakMap,Y_=new WeakMap,eb=new WeakMap;var vd,Nr,tb,rb,Q_,nL;class yDe{constructor(e,r=fo.DISPLAY){$(this,Q_);$(this,vd,null);$(this,Nr,new Map);$(this,tb,null);$(this,rb,null);if(this.renderingIntent=r,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,rb,e.order);for(const n of e.groups)g(this,Nr).set(n.id,new vDe(r,n));if(e.baseState==="OFF")for(const n of g(this,Nr).values())n._setVisible(Ay,!1);for(const n of e.on)g(this,Nr).get(n)._setVisible(Ay,!0);for(const n of e.off)g(this,Nr).get(n)._setVisible(Ay,!1);R(this,tb,this.getHash())}}isVisible(e){if(g(this,Nr).size===0)return!0;if(!e)return GM("Optional content group not defined."),!0;if(e.type==="OCG")return g(this,Nr).has(e.id)?g(this,Nr).get(e.id).visible:(Tt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return W(this,Q_,nL).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const r of e.ids){if(!g(this,Nr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(g(this,Nr).get(r).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const r of e.ids){if(!g(this,Nr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!g(this,Nr).get(r).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const r of e.ids){if(!g(this,Nr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(!g(this,Nr).get(r).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const r of e.ids){if(!g(this,Nr).has(r))return Tt(`Optional content group not found: ${r}`),!0;if(g(this,Nr).get(r).visible)return!1}return!0}return Tt(`Unknown optional content policy ${e.policy}.`),!0}return Tt(`Unknown group type ${e.type}.`),!0}setVisibility(e,r=!0,n=!0){var a;const i=g(this,Nr).get(e);if(!i){Tt(`Optional content group not found: ${e}`);return}if(n&&r&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&((a=g(this,Nr).get(o))==null||a._setVisible(Ay,!1,!0));i._setVisible(Ay,!!r,!0),R(this,vd,null)}setOCGState({state:e,preserveRB:r}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=g(this,Nr).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!a.visible,r);break}}R(this,vd,null)}get hasInitialVisibility(){return g(this,tb)===null||this.getHash()===g(this,tb)}getOrder(){return g(this,Nr).size?g(this,rb)?g(this,rb).slice():[...g(this,Nr).keys()]:null}getGroup(e){return g(this,Nr).get(e)||null}getHash(){if(g(this,vd)!==null)return g(this,vd);const e=new Uie;for(const[r,n]of g(this,Nr))e.update(`${r}:${n.visible}`);return R(this,vd,e.hexdigest())}[Symbol.iterator](){return g(this,Nr).entries()}}vd=new WeakMap,Nr=new WeakMap,tb=new WeakMap,rb=new WeakMap,Q_=new WeakSet,nL=function(e){const r=e.length;if(r<2)return!0;const n=e[0];for(let i=1;i<r;i++){const a=e[i];let s;if(Array.isArray(a))s=W(this,Q_,nL).call(this,a);else if(g(this,Nr).has(a))s=g(this,Nr).get(a).visible;else return Tt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};class bDe{constructor(e,{disableRange:r=!1,disableStream:n=!1}){Jt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(a==null?void 0:a.length)>0){const l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!r,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:r}){const n=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Jt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var r,n,i,a;e.total===void 0?(n=(r=this._rangeReaders[0])==null?void 0:r.onProgress)==null||n.call(r,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const r=this._rangeReaders.indexOf(e);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){Jt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new wDe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new xDe(this,e,r);return this._pdfDataRangeTransport.requestDataRange(e,r),this._rangeReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class wDe{constructor(e,r,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Z5(i)?i:null,this._queuedChunks=r||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class xDe{constructor(e,r,n){this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ADe(t){let e=!0,r=n("filename\\*","i").exec(t);if(r){r=r[1];let c=o(r);return c=unescape(c),c=l(c),c=u(c),a(c)}if(r=s(t),r){const c=u(r);return a(c)}if(r=n("filename","i").exec(t),r){r=r[1];let c=o(r);return c=u(c),a(c)}function n(c,f){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(c,f){if(c){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const h=new TextDecoder(c,{fatal:!0}),d=hS(f);f=h.decode(d),e=!1}catch{}}return f}function a(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function s(c){const f=[];let h;const d=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=d.exec(c))!==null;){let[,m,v,y]=h;if(m=parseInt(m,10),m in f){if(m===0)break;continue}f[m]=[v,y]}const p=[];for(let m=0;m<f.length&&m in f;++m){let[v,y]=f[m];y=o(y),v&&(y=unescape(y),m===0&&(y=l(y))),p.push(y)}return p.join("")}function o(c){if(c.startsWith('"')){const f=c.slice(1).split('\\"');for(let h=0;h<f.length;++h){const d=f[h].indexOf('"');d!==-1&&(f[h]=f[h].slice(0,d),f.length=h+1),f[h]=f[h].replaceAll(/\\(.)/g,"$1")}c=f.join('"')}return c}function l(c){const f=c.indexOf("'");if(f===-1)return c;const h=c.slice(0,f),p=c.slice(f+1).replace(/^[^']*'/,"");return i(h,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,h,d,p){if(d==="q"||d==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function eae(t,e){const r=new Headers;if(!t||!e||typeof e!="object")return r;for(const n in e){const i=e[n];i!==void 0&&r.append(n,i)}return r}function XM(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function tae({responseHeaders:t,isHttp:e,rangeChunkSize:r,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*r)||n||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function rae(t){const e=t.get("Content-Disposition");if(e){let r=ADe(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch{}if(Z5(r))return r}return null}function vS(t,e){return new GN(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function nae(t){return t===200||t===206}function iae(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function aae(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Tt(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class _De{constructor(e){Oe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=eae(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Jt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new EDe(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new SDe(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class EDe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange;const n=new Headers(e.headers),i=r.url;fetch(i,iae(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=XM(a.url),!nae(a.status))throw vS(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:o,suggestedLength:l}=tae({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=rae(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ap("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:aae(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}class SDe{constructor(e,r,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${r}-${n-1}`);const s=i.url;fetch(s,iae(a,this._withCredentials,this._abortController)).then(o=>{const l=XM(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!nae(o.status))throw vS(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:aae(e),done:!1})}cancel(e){var r;(r=this._reader)==null||r.cancel(e),this._abortController.abort()}}const Gk=200,Kk=206;function CDe(t){const e=t.response;return typeof e!="string"?e:hS(e).buffer}class TDe{constructor({url:e,httpHeaders:r,withCredentials:n}){Oe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=eae(this.isHttp,r),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const r=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const[a,s]of this.headers)r.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Kk):i.expectedStatus=Gk,r.responseType="arraybuffer",Jt(e.onError,"Expected `onError` callback to be provided."),r.onerror=()=>{e.onError(r.status)},r.onreadystatechange=this.onStateChange.bind(this,n),r.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,r.send(null),n}onProgress(e,r){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,r))}onStateChange(e,r){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||Gk;if(!(a===Gk&&n.expectedStatus===Kk)&&a!==n.expectedStatus){n.onError(i.status);return}const o=CDe(i);if(a===Kk){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(Tt('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const r=this.pendingRequests[e].xhr;delete this.pendingRequests[e],r.abort()}}class DDe{constructor(e){this._source=e,this._manager=new TDe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const r=this._rangeRequestReaders.indexOf(e);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return Jt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new NDe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,r){const n=new PDe(this._manager,e,r);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class NDe{constructor(e,r){this._manager=e,this._url=r.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,r=this._manager.getRequestXhr(e);this._manager._responseOrigin=XM(r.responseURL);const n=r.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=tae({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=rae(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=vS(e,this._url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var r;(r=this.onProgress)==null||r.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDe{constructor(e,r,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:r,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var r;const e=XM((r=this._manager.getRequestXhr(this._requestId))==null?void 0:r.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const r=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=vS(e,this._url));for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const MDe=/^[a-z][a-z0-9\-+.]+:/i;function IDe(t){if(MDe.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class ODe{constructor(e){this.source=e,this.url=IDe(e.url),Jt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Jt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kDe(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const n=new RDe(this,e,r);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var r;(r=this._fullRequestReader)==null||r.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class kDe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=vS(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ap("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class RDe{constructor(e,r,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:r,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const M1=Symbol("INITIAL_DATA");var Qs,Z_,iL;class sae{constructor(){$(this,Z_);$(this,Qs,Object.create(null))}get(e,r=null){if(r){const i=W(this,Z_,iL).call(this,e);return i.promise.then(()=>r(i.data)),null}const n=g(this,Qs)[e];if(!n||n.data===M1)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const r=g(this,Qs)[e];return!!r&&r.data!==M1}delete(e){const r=g(this,Qs)[e];return!r||r.data===M1?!1:(delete g(this,Qs)[e],!0)}resolve(e,r=null){const n=W(this,Z_,iL).call(this,e);n.data=r,n.resolve()}clear(){var e;for(const r in g(this,Qs)){const{data:n}=g(this,Qs)[r];(e=n==null?void 0:n.bitmap)==null||e.close()}R(this,Qs,Object.create(null))}*[Symbol.iterator](){for(const e in g(this,Qs)){const{data:r}=g(this,Qs)[e];r!==M1&&(yield[e,r])}}}Qs=new WeakMap,Z_=new WeakSet,iL=function(e){var r;return(r=g(this,Qs))[e]||(r[e]={...Promise.withResolvers(),data:M1})};const FDe=1e5,q7=30;var iZ,yd,Es,J_,eE,hg,of,tE,rE,dg,nb,ib,bd,ab,nE,sb,pg,iE,aE,ob,mg,sE,wd,lb,mh,oae,lae,aL,So,ED,sL,uae,cae;const ii=class ii{constructor({textContentSource:e,container:r,viewport:n}){$(this,mh);$(this,yd,Promise.withResolvers());$(this,Es,null);$(this,J_,!1);$(this,eE,!!((iZ=globalThis.FontInspector)!=null&&iZ.enabled));$(this,hg,null);$(this,of,null);$(this,tE,0);$(this,rE,0);$(this,dg,null);$(this,nb,null);$(this,ib,0);$(this,bd,0);$(this,ab,Object.create(null));$(this,nE,[]);$(this,sb,null);$(this,pg,[]);$(this,iE,new WeakMap);$(this,aE,null);var l;if(e instanceof ReadableStream)R(this,sb,e);else if(typeof e=="object")R(this,sb,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');R(this,Es,R(this,nb,r)),R(this,bd,n.scale*bc.pixelRatio),R(this,ib,n.rotation),R(this,of,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=n.rawDims;R(this,aE,[1,0,0,-1,-s,o+a]),R(this,rE,i),R(this,tE,a),W(l=ii,So,uae).call(l),vv(r,n),g(this,yd).promise.finally(()=>{g(ii,lb).delete(this),R(this,of,null),R(this,ab,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:r}=da.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&r?"Calibri, ":""}sans-serif`],["monospace",`${e&&r?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{g(this,dg).read().then(({value:r,done:n})=>{if(n){g(this,yd).resolve();return}g(this,hg)??R(this,hg,r.lang),Object.assign(g(this,ab),r.styles),W(this,mh,oae).call(this,r.items),e()},g(this,yd).reject)};return R(this,dg,g(this,sb).getReader()),g(ii,lb).add(this),e(),g(this,yd).promise}update({viewport:e,onBefore:r=null}){var a;const n=e.scale*bc.pixelRatio,i=e.rotation;if(i!==g(this,ib)&&(r==null||r(),R(this,ib,i),vv(g(this,nb),{rotation:i})),n!==g(this,bd)){r==null||r(),R(this,bd,n);const s={div:null,properties:null,ctx:W(a=ii,So,ED).call(a,g(this,hg))};for(const o of g(this,pg))s.properties=g(this,iE).get(o),s.div=o,W(this,mh,aL).call(this,s)}}cancel(){var r;const e=new Ap("TextLayer task cancelled.");(r=g(this,dg))==null||r.cancel(e).catch(()=>{}),R(this,dg,null),g(this,yd).reject(e)}get textDivs(){return g(this,pg)}get textContentItemsStr(){return g(this,nE)}static cleanup(){if(!(g(this,lb).size>0)){g(this,ob).clear();for(const{canvas:e}of g(this,mg).values())e.remove();g(this,mg).clear()}}};yd=new WeakMap,Es=new WeakMap,J_=new WeakMap,eE=new WeakMap,hg=new WeakMap,of=new WeakMap,tE=new WeakMap,rE=new WeakMap,dg=new WeakMap,nb=new WeakMap,ib=new WeakMap,bd=new WeakMap,ab=new WeakMap,nE=new WeakMap,sb=new WeakMap,pg=new WeakMap,iE=new WeakMap,aE=new WeakMap,ob=new WeakMap,mg=new WeakMap,sE=new WeakMap,wd=new WeakMap,lb=new WeakMap,mh=new WeakSet,oae=function(e){var i,a;if(g(this,J_))return;(a=g(this,of)).ctx??(a.ctx=W(i=ii,So,ED).call(i,g(this,hg)));const r=g(this,pg),n=g(this,nE);for(const s of e){if(r.length>FDe){Tt("Ignoring additional textDivs for performance reasons."),R(this,J_,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=g(this,Es);R(this,Es,document.createElement("span")),g(this,Es).classList.add("markedContent"),s.id&&g(this,Es).setAttribute("id",`${s.id}`),o.append(g(this,Es))}else s.type==="endMarkedContent"&&R(this,Es,g(this,Es).parentNode);continue}n.push(s.str),W(this,mh,lae).call(this,s)}},lae=function(e){var m;const r=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};g(this,pg).push(r);const i=et.transform(g(this,aE),e.transform);let a=Math.atan2(i[1],i[0]);const s=g(this,ab)[e.fontName];s.vertical&&(a+=Math.PI/2);let o=g(this,eE)&&s.fontSubstitution||s.fontFamily;o=ii.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*W(m=ii,So,cae).call(m,o,s,g(this,hg));let c,f;a===0?(c=i[4],f=i[5]-u):(c=i[4]+u*Math.sin(a),f=i[5]-u*Math.cos(a));const h="calc(var(--total-scale-factor) *",d=r.style;g(this,Es)===g(this,nb)?(d.left=`${(100*c/g(this,rE)).toFixed(2)}%`,d.top=`${(100*f/g(this,tE)).toFixed(2)}%`):(d.left=`${h}${c.toFixed(2)}px)`,d.top=`${h}${f.toFixed(2)}px)`),d.fontSize=`${h}${(g(ii,wd)*l).toFixed(2)}px)`,d.fontFamily=o,n.fontSize=l,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,g(this,eE)&&(r.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);v!==y&&Math.max(v,y)/Math.min(v,y)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),g(this,iE).set(r,n),g(this,of).div=r,g(this,of).properties=n,W(this,mh,aL).call(this,g(this,of)),n.hasText&&g(this,Es).append(r),n.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),g(this,Es).append(v)}},aL=function(e){var o;const{div:r,properties:n,ctx:i}=e,{style:a}=r;let s="";if(g(ii,wd)>1&&(s=`scale(${1/g(ii,wd)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:u,fontSize:c}=n;W(o=ii,So,sL).call(o,i,c*g(this,bd),l);const{width:f}=i.measureText(r.textContent);f>0&&(s=`scaleX(${u*g(this,bd)/f}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(a.transform=s)},So=new WeakSet,ED=function(e=null){let r=g(this,mg).get(e||(e=""));if(!r){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),r=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,mg).set(e,r),g(this,sE).set(r,{size:0,family:""})}return r},sL=function(e,r,n){const i=g(this,sE).get(e);r===i.size&&n===i.family||(e.font=`${r}px ${n}`,i.size=r,i.family=n)},uae=function(){if(g(this,wd)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),R(this,wd,e.getBoundingClientRect().height),e.remove()},cae=function(e,r,n){const i=g(this,ob).get(e);if(i)return i;const a=W(this,So,ED).call(this,n);a.canvas.width=a.canvas.height=q7,W(this,So,sL).call(this,a,q7,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+l):(da.platform.isFirefox&&Tt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),r.ascent?u=r.ascent:r.descent&&(u=1+r.descent)),g(this,ob).set(e,u),u},$(ii,So),$(ii,ob,new Map),$(ii,mg,new Map),$(ii,sE,new WeakMap),$(ii,wd,null),$(ii,lb,new Set);let kA=ii;const LDe=100;function fae(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new oL,{docId:r}=e,n=t.url?qTe(t.url):null,i=t.data?HTe(t.data):null,a=t.httpHeaders||null,s=t.withCredentials===!0,o=t.password??null,l=t.range instanceof hae?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let c=t.worker instanceof RA?t.worker:null;const f=t.verbosity,h=typeof t.docBaseUrl=="string"&&!KM(t.docBaseUrl)?t.docBaseUrl:null,d=YC(t.cMapUrl),p=t.cMapPacked!==!1,m=t.CMapReaderFactory||(Za?JTe:P7),v=YC(t.iccUrl),y=YC(t.standardFontDataUrl),w=t.StandardFontDataFactory||(Za?eDe:M7),b=YC(t.wasmUrl),_=t.WasmFactory||(Za?tDe:I7),x=t.stopAtErrors!==!0,A=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,E=t.isEvalSupported!==!1,S=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!Za,C=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!Za&&(da.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,N=typeof t.disableFontFace=="boolean"?t.disableFontFace:Za,P=t.fontExtraProperties===!0,M=t.enableXfa===!0,j=t.ownerDocument||globalThis.document,K=t.disableRange===!0,k=t.disableStream===!0,V=t.disableAutoFetch===!0,q=t.pdfBug===!0,H=t.CanvasFactory||(Za?ZTe:XTe),ee=t.FilterFactory||(Za?QTe:YTe),le=t.enableHWA===!0,re=t.useWasm!==!1,L=l?l.length:t.length??NaN,ie=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!Za&&!N,X=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(m===P7&&w===M7&&_===I7&&d&&y&&b&&rx(d,document.baseURI)&&rx(y,document.baseURI)&&rx(b,document.baseURI)),pe=null;yTe(f);const de={canvasFactory:new H({ownerDocument:j,enableHWA:le}),filterFactory:new ee({docId:r,ownerDocument:j}),cMapReaderFactory:X?null:new m({baseUrl:d,isCompressed:p}),standardFontDataFactory:X?null:new w({baseUrl:y}),wasmFactory:X?null:new _({baseUrl:b})};c||(c=RA.create({verbosity:f,port:nc.workerPort}),e._worker=c);const ae={docId:r,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:V,rangeChunkSize:u,length:L,docBaseUrl:h,enableXfa:M,evaluatorOptions:{maxImageSize:A,disableFontFace:N,ignoreErrors:x,isEvalSupported:E,isOffscreenCanvasSupported:S,isImageDecoderSupported:C,canvasMaxAreaInBytes:D,fontExtraProperties:P,useSystemFonts:ie,useWasm:re,useWorkerFetch:X,cMapUrl:d,iccUrl:v,standardFontDataUrl:y,wasmUrl:b}},z={ownerDocument:j,pdfBug:q,styleElement:pe,loadingParams:{disableAutoFetch:V,enableXfa:M}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ne=c.messageHandler.sendWithPromise("GetDocRequest",ae,i?[i.buffer]:null);let fe;if(l)fe=new bDe(l,{disableRange:K,disableStream:k});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Q=rx(n)?_De:Za?ODe:DDe;fe=new Q({url:n,length:L,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:K,disableStream:k})}return ne.then(Q=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ye=new cx(r,Q,c.port),me=new jDe(ye,e,fe,z,de,le);e._transport=me,ye.send("Ready",null)})}).catch(e._capability.reject),e}var zP;const qP=class qP{constructor(){Oe(this,"_capability",Promise.withResolvers());Oe(this,"_transport",null);Oe(this,"_worker",null);Oe(this,"docId",`d${ni(qP,zP)._++}`);Oe(this,"destroyed",!1);Oe(this,"onPassword",null);Oe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,r,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((r=this._transport)==null?void 0:r.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};zP=new WeakMap,$(qP,zP,0);let oL=qP;var gg,oE,lE,uE,cE;class hae{constructor(e,r,n=!1,i=null){$(this,gg,Promise.withResolvers());$(this,oE,[]);$(this,lE,[]);$(this,uE,[]);$(this,cE,[]);this.length=e,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){g(this,cE).push(e)}addProgressListener(e){g(this,uE).push(e)}addProgressiveReadListener(e){g(this,lE).push(e)}addProgressiveDoneListener(e){g(this,oE).push(e)}onDataRange(e,r){for(const n of g(this,cE))n(e,r)}onDataProgress(e,r){g(this,gg).promise.then(()=>{for(const n of g(this,uE))n(e,r)})}onDataProgressiveRead(e){g(this,gg).promise.then(()=>{for(const r of g(this,lE))r(e)})}onDataProgressiveDone(){g(this,gg).promise.then(()=>{for(const e of g(this,oE))e()})}transportReady(){g(this,gg).resolve()}requestDataRange(e,r){Br("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}gg=new WeakMap,oE=new WeakMap,lE=new WeakMap,uE=new WeakMap,cE=new WeakMap;class BDe{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,r){return this._transport.getAnnotationsByType(e,r)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(r)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lf,vg,mx;class $De{constructor(e,r,n,i=!1){$(this,vg);$(this,lf,!1);this._pageIndex=e,this._pageInfo=r,this._transport=n,this._stats=i?new _7:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new sae,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new pS({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:r,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,r)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:r=e.canvas,viewport:n,intent:i="display",annotationMode:a=Hh.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:f=null,isEditing:h=!1,recordOperations:d=!1,operationsFilter:p=null}){var C,D,N;(C=this._stats)==null||C.time("Overall");const m=this._transport.getRenderingIntent(i,a,f,h),{renderingIntent:v,cacheKey:y}=m;R(this,lf,!1),l||(l=this._transport.getOptionalContentConfig(v));let w=this._intentStates.get(y);w||(w=Object.create(null),this._intentStates.set(y,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const b=!!(v&fo.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(m));const _=!!(this._pdfBug&&((N=globalThis.StepperManager)!=null&&N.enabled)),x=!this.recordedBBoxes&&(d||_),A=P=>{var M,j;if(w.renderTasks.delete(E),x){const K=(M=E.gfx)==null?void 0:M.dependencyTracker.take();K&&(E.stepper&&E.stepper.setOperatorBBoxes(K,E.gfx.dependencyTracker.takeDebugMetadata()),d&&(this.recordedBBoxes=K))}b&&R(this,lf,!0),W(this,vg,mx).call(this),P?(E.capability.reject(P),this._abortOperatorList({intentState:w,reason:P instanceof Error?P:new Error(P)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new lL({callback:A,params:{canvas:r,canvasContext:e,dependencyTracker:x?new nDe(r,w.operatorList.length,_):null,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(w.renderTasks||(w.renderTasks=new Set)).add(E);const S=E.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([P,M])=>{var j;if(this.destroyed){A();return}if((j=this._stats)==null||j.time("Rendering"),!(M.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:P,optionalContentConfig:M}),E.operatorListChanged()}).catch(A),S}getOperatorList({intent:e="display",annotationMode:r=Hh.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const s=this._transport.getRenderingIntent(e,r,n,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:r===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>OA.textContent(n));const r=this.streamTextContent(e);return new Promise(function(n,i){function a(){s.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},i)}const s=r.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const n of r.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),R(this,lf,!1),Promise.all(e)}cleanup(e=!1){R(this,lf,!0);const r=W(this,vg,mx).call(this);return e&&r&&this._stats&&(this._stats=new _7),r}_startRenderPage(e,r){var i,a;const n=this._intentStates.get(r);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,r){for(let n=0,i=e.length;n<i;n++)r.operatorList.fnArray.push(e.fnArray[n]),r.operatorList.argsArray.push(e.argsArray[n]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const n of r.renderTasks)n.operatorListChanged();e.lastChunk&&W(this,vg,mx).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:a,modifiedIds:i},s).getReader(),u=this._intentStates.get(r);u.streamReader=l;const c=()=>{l.read().then(({value:f,done:h})=>{if(h){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),c())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const h of u.renderTasks)h.operatorListChanged();W(this,vg,mx).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};c()}_abortOperatorList({intentState:e,reason:r,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(r instanceof Q5){let i=LDe;r.extraDelay>0&&r.extraDelay<1e3&&(i+=r.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:r,force:!0})},i);return}}if(e.streamReader.cancel(new Ap(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}lf=new WeakMap,vg=new WeakSet,mx=function(){if(!g(this,lf)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:r}of this._intentStates.values())if(e.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,lf,!1),!0};var xd,zl,uf,yg,HP,bg,wg,is,SD,dae,pae,gx,ub,CD;const en=class en{constructor({name:e=null,port:r=null,verbosity:n=bTe()}={}){$(this,is);$(this,xd,Promise.withResolvers());$(this,zl,null);$(this,uf,null);$(this,yg,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,r){if(g(en,wg).has(r))throw new Error("Cannot use more than one PDFWorker per port.");g(en,wg).set(r,this),W(this,is,dae).call(this,r)}else W(this,is,pae).call(this)}get promise(){return g(this,xd).promise}get port(){return g(this,uf)}get messageHandler(){return g(this,zl)}destroy(){var e,r;this.destroyed=!0,(e=g(this,yg))==null||e.terminate(),R(this,yg,null),g(en,wg).delete(g(this,uf)),R(this,uf,null),(r=g(this,zl))==null||r.destroy(),R(this,zl,null)}static create(e){const r=g(this,wg).get(e==null?void 0:e.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new en(e)}static get workerSrc(){if(nc.workerSrc)return nc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>g(this,ub,CD)?g(this,ub,CD):(await import(this.workerSrc)).WorkerMessageHandler)())}};xd=new WeakMap,zl=new WeakMap,uf=new WeakMap,yg=new WeakMap,HP=new WeakMap,bg=new WeakMap,wg=new WeakMap,is=new WeakSet,SD=function(){g(this,xd).resolve(),g(this,zl).send("configure",{verbosity:this.verbosity})},dae=function(e){R(this,uf,e),R(this,zl,new cx("main","worker",e)),g(this,zl).on("ready",()=>{}),W(this,is,SD).call(this)},pae=function(){if(g(en,bg)||g(en,ub,CD)){W(this,is,gx).call(this);return}let{workerSrc:e}=en;try{en._isSameOrigin(window.location,e)||(e=en._createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e,{type:"module"}),n=new cx("main","worker",r),i=()=>{a.abort(),n.destroy(),r.terminate(),this.destroyed?g(this,xd).reject(new Error("Worker was destroyed")):W(this,is,gx).call(this)},a=new AbortController;r.addEventListener("error",()=>{g(this,yg)||i()},{signal:a.signal}),n.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}R(this,zl,n),R(this,uf,r),R(this,yg,r),W(this,is,SD).call(this)}),n.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{W(this,is,gx).call(this)}});const s=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{GM("The worker has been disabled.")}W(this,is,gx).call(this)},gx=function(){g(en,bg)||(Tt("Setting up fake worker."),R(en,bg,!0)),en._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){g(this,xd).reject(new Error("Worker was destroyed"));return}const r=new KTe;R(this,uf,r);const n=`fake${ni(en,HP)._++}`,i=new cx(n+"_worker",n,r);e.setup(i,r),R(this,zl,new cx(n,n+"_worker",r)),W(this,is,SD).call(this)}).catch(e=>{g(this,xd).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ub=new WeakSet,CD=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},$(en,ub),$(en,HP,0),$(en,bg,!1),$(en,wg,new WeakMap),Za&&(R(en,bg,!0),nc.workerSrc||(nc.workerSrc="./pdf.worker.mjs")),en._isSameOrigin=(e,r)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(r,n);return n.origin===i.origin},en._createCDNWrapper=e=>{const r=`await import("${e}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))},en.fromPort=e=>{if(MTe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return en.create(e)};let RA=en;var cf,Hu,cb,fb,ff,xg,vx;class jDe{constructor(e,r,n,i,a,s){$(this,xg);$(this,cf,new Map);$(this,Hu,new Map);$(this,cb,new Map);$(this,fb,new Map);$(this,ff,null);this.messageHandler=e,this.loadingTask=r,this.commonObjs=new sae,this.fontLoader=new UTe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new J5)}getRenderingIntent(e,r=Hh.ENABLE,n=null,i=!1,a=!1){let s=fo.DISPLAY,o=q3;switch(e){case"any":s=fo.ANY;break;case"display":break;case"print":s=fo.PRINT;break;default:Tt(`getRenderingIntent - invalid intent: ${e}`)}const l=s&fo.PRINT&&n instanceof qie?n:this.annotationStorage;switch(r){case Hh.DISABLE:s+=fo.ANNOTATIONS_DISABLE;break;case Hh.ENABLE:break;case Hh.ENABLE_FORMS:s+=fo.ANNOTATIONS_FORMS;break;case Hh.ENABLE_STORAGE:s+=fo.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Tt(`getRenderingIntent - invalid annotationMode: ${r}`)}i&&(s+=fo.IS_EDITING),a&&(s+=fo.OPLIST);const{ids:u,hash:c}=l.modifiedIds,f=[s,o.hash,c];return{renderingIntent:s,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=g(this,ff))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of g(this,Hu).values())e.push(i._destroy());g(this,Hu).clear(),g(this,cb).clear(),g(this,fb).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),g(this,cf).clear(),this.filterFactory.destroy(),kA.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ap("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(n,i)=>{Jt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Jt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((o=r.onProgress)==null||o.call(r,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=r.onProgress)==null||u.call(r,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Jt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}Jt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,r._capability.resolve(new BDe(n,this))}),e.on("DocException",n=>{r._capability.reject(ys(n))}),e.on("PasswordRequest",n=>{R(this,ff,Promise.withResolvers());try{if(!r.onPassword)throw ys(n);const i=a=>{a instanceof Error?g(this,ff).reject(a):g(this,ff).resolve({password:a})};r.onPassword(i,n.code)}catch(i){g(this,ff).reject(i)}return g(this,ff).promise}),e.on("DataLoaded",n=>{var i;(i=r.onProgress)==null||i.call(r,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;g(this,Hu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const h=a.error;Tt(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const o=new H3(a),l=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,u=new zTe(o,l,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:c}=a;Jt(c,"The imageRef must be defined.");for(const h of g(this,Hu).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const f=new W3(a);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,s])=>{var l;if(this.destroyed)return;const o=g(this,Hu).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=s==null?void 0:s.bitmap)==null||l.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=r.onProgress)==null||i.call(r,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Tt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},r).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,n=g(this,cb).get(r);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&g(this,fb).set(a.refStr,e);const s=new $De(r,a,this,this._params.pdfBug);return g(this,Hu).set(r,s),s});return g(this,cb).set(r,i),i}getPageIndex(e){return G3(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return W(this,xg,vx).call(this,"GetFieldObjects")}hasJSActions(){return W(this,xg,vx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,r){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:r})}getDocJSActions(){return W(this,xg,vx).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return W(this,xg,vx).call(this,"GetOptionalContentConfig").then(r=>new yDe(r,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",r=g(this,cf).get(e);if(r)return r;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new gDe(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null,hasStructTree:i[2]}});return g(this,cf).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of g(this,Hu).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),g(this,cf).clear(),this.filterFactory.destroy(!0),kA.cleanup()}}cachedPageNumber(e){if(!G3(e))return null;const r=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return g(this,fb).get(r)??null}}cf=new WeakMap,Hu=new WeakMap,cb=new WeakMap,fb=new WeakMap,ff=new WeakMap,xg=new WeakSet,vx=function(e,r=null){const n=g(this,cf).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,r);return g(this,cf).set(e,i),i};var Ad;class VDe{constructor(e){$(this,Ad,null);Oe(this,"onContinue",null);Oe(this,"onError",null);R(this,Ad,e)}get promise(){return g(this,Ad).capability.promise}cancel(e=0){g(this,Ad).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=g(this,Ad).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=g(this,Ad);return e.form||e.canvas&&(r==null?void 0:r.size)>0}}Ad=new WeakMap;var _d,Ag;const Am=class Am{constructor({callback:e,params:r,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:f=!1,pageColors:h=null,enableHWA:d=!1,operationsFilter:p=null}){$(this,_d,null);this.callback=e,this.params=r,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new VDe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvas,this._canvasContext=r.canvas?null:r.canvasContext,this._enableHWA=d,this._dependencyTracker=r.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var l,u;if(this.cancelled)return;if(this._canvas){if(g(Am,Ag).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(Am,Ag).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new u0(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,r=0){var n,i,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),g(this,_d)&&(window.cancelAnimationFrame(g(this,_d)),R(this,_d,null)),g(Am,Ag).delete(this._canvas),e||(e=new Q5(`Rendering cancelled, page ${this._pageIndex+1}`,r)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e,r;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(r=this.stepper)==null||r.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?R(this,_d,window.requestAnimationFrame(()=>{R(this,_d,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(Am,Ag).delete(this._canvas),this.callback())))}};_d=new WeakMap,Ag=new WeakMap,$(Am,Ag,new WeakSet);let lL=Am;const UDe="5.4.449",zDe="f44e5f0e6";var Zs,_g,hb,oi,fE,db,hf,hE,Ed,ql,dE,Mr,uL,cL,fL,dm,mae,Rh;const bs=class bs{constructor({editor:e=null,uiManager:r=null}){$(this,Mr);$(this,Zs,null);$(this,_g,null);$(this,hb);$(this,oi,null);$(this,fE,!1);$(this,db,!1);$(this,hf,null);$(this,hE);$(this,Ed,null);$(this,ql,null);var n,i;e?(R(this,db,!1),R(this,hf,e)):R(this,db,!0),R(this,ql,(e==null?void 0:e._uiManager)||r),R(this,hE,g(this,ql)._eventBus),R(this,hb,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=g(this,ql))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),g(bs,dE)||R(bs,dE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new gS([[["Escape","mac+Escape"],bs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],bs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],bs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],bs.prototype._moveToPrevious],[["Home","mac+Home"],bs.prototype._moveToBeginning],[["End","mac+End"],bs.prototype._moveToEnd]]))}renderButton(){const e=R(this,Zs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",g(this,hf)&&(e.ariaControls=`${g(this,hf).id}_colorpicker_dropdown`);const r=g(this,ql)._signal;e.addEventListener("click",W(this,Mr,dm).bind(this),{signal:r}),e.addEventListener("keydown",W(this,Mr,fL).bind(this),{signal:r});const n=R(this,_g,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=g(this,hb),e.append(n),e}renderMainDropdown(){const e=R(this,oi,W(this,Mr,uL).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===g(this,Zs)){W(this,Mr,dm).call(this,e);return}const r=e.target.getAttribute("data-color");r&&W(this,Mr,cL).call(this,r,e)}_moveToNext(e){var r,n;if(!g(this,Mr,Rh)){W(this,Mr,dm).call(this,e);return}if(e.target===g(this,Zs)){(r=g(this,oi).firstElementChild)==null||r.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var r,n;if(e.target===((r=g(this,oi))==null?void 0:r.firstElementChild)||e.target===g(this,Zs)){g(this,Mr,Rh)&&this._hideDropdownFromKeyboard();return}g(this,Mr,Rh)||W(this,Mr,dm).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var r;if(!g(this,Mr,Rh)){W(this,Mr,dm).call(this,e);return}(r=g(this,oi).firstElementChild)==null||r.focus()}_moveToEnd(e){var r;if(!g(this,Mr,Rh)){W(this,Mr,dm).call(this,e);return}(r=g(this,oi).lastElementChild)==null||r.focus()}hideDropdown(){var e,r;(e=g(this,oi))==null||e.classList.add("hidden"),g(this,Zs).ariaExpanded="false",(r=g(this,Ed))==null||r.abort(),R(this,Ed,null)}_hideDropdownFromKeyboard(){var e;if(!g(this,db)){if(!g(this,Mr,Rh)){(e=g(this,hf))==null||e.unselect();return}this.hideDropdown(),g(this,Zs).focus({preventScroll:!0,focusVisible:g(this,fE)})}}updateColor(e){if(g(this,_g)&&(g(this,_g).style.backgroundColor=e),!g(this,oi))return;const r=g(this,ql).highlightColors.values();for(const n of g(this,oi).children)n.ariaSelected=r.next().value===e.toUpperCase()}destroy(){var e,r;(e=g(this,Zs))==null||e.remove(),R(this,Zs,null),R(this,_g,null),(r=g(this,oi))==null||r.remove(),R(this,oi,null)}};Zs=new WeakMap,_g=new WeakMap,hb=new WeakMap,oi=new WeakMap,fE=new WeakMap,db=new WeakMap,hf=new WeakMap,hE=new WeakMap,Ed=new WeakMap,ql=new WeakMap,dE=new WeakMap,Mr=new WeakSet,uL=function(){const e=document.createElement("div"),r=g(this,ql)._signal;e.addEventListener("contextmenu",wl,{signal:r}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),g(this,hf)&&(e.id=`${g(this,hf).id}_colorpicker_dropdown`);for(const[n,i]of g(this,ql).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",g(bs,dE)[n]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===g(this,hb),a.addEventListener("click",W(this,Mr,cL).bind(this,i),{signal:r}),e.append(a)}return e.addEventListener("keydown",W(this,Mr,fL).bind(this),{signal:r}),e},cL=function(e,r){r.stopPropagation(),g(this,hE).dispatch("switchannotationeditorparams",{source:this,type:Zt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},fL=function(e){bs._keyboardManager.exec(this,e)},dm=function(e){if(g(this,Mr,Rh)){this.hideDropdown();return}if(R(this,fE,e.detail===0),g(this,Ed)||(R(this,Ed,new AbortController),window.addEventListener("pointerdown",W(this,Mr,mae).bind(this),{signal:g(this,ql).combinedSignal(g(this,Ed))})),g(this,Zs).ariaExpanded="true",g(this,oi)){g(this,oi).classList.remove("hidden");return}const r=R(this,oi,W(this,Mr,uL).call(this));g(this,Zs).append(r)},mae=function(e){var r;(r=g(this,oi))!=null&&r.contains(e.target)||this.hideDropdown()},Rh=function(){return g(this,oi)&&!g(this,oi).classList.contains("hidden")},$(bs,dE,null);let e2=bs;var Wu,pE,pb,mE;const _m=class _m{constructor(e){$(this,Wu,null);$(this,pE,null);$(this,pb,null);R(this,pE,e),R(this,pb,e._uiManager),g(_m,mE)||R(_m,mE,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(g(this,Wu))return g(this,Wu);const{editorType:e,colorType:r,color:n}=g(this,pE),i=R(this,Wu,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",g(_m,mE)[e]),i.addEventListener("input",()=>{g(this,pb).updateParams(r,i.value)},{signal:g(this,pb)._signal}),i}update(e){g(this,Wu)&&(g(this,Wu).value=e)}destroy(){var e;(e=g(this,Wu))==null||e.remove(),R(this,Wu,null)}hideDropdown(){}};Wu=new WeakMap,pE=new WeakMap,pb=new WeakMap,mE=new WeakMap,$(_m,mE,null);let t2=_m;function H7(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function I1(t){return Math.max(0,Math.min(255,255*t))}class W7{static CMYK_G([e,r,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*r+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=I1(e),[e,e,e]}static G_HTML([e]){const r=H7(e);return`#${r}${r}${r}`}static RGB_G([e,r,n]){return["G",.3*e+.59*r+.11*n]}static RGB_rgb(e){return e.map(I1)}static RGB_HTML(e){return`#${e.map(H7).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,r,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,r+i)]}static CMYK_rgb([e,r,n,i]){return[I1(1-Math.min(1,e+i)),I1(1-Math.min(1,n+i)),I1(1-Math.min(1,r+i))]}static CMYK_HTML(e){const r=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([e,r,n]){const i=1-e,a=1-r,s=1-n,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class qDe{create(e,r,n=!1){if(e<=0||r<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${r}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${r}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Br("Abstract method `_createSVG` called.")}}class r2 extends qDe{_createSVG(e){return document.createElementNS(Rc,e)}}const HDe=9,bv=new WeakSet,WDe=new Date().getTimezoneOffset()*60*1e3;class Xk{static create(e){switch(e.data.annotationType){case Hn.LINK:return new r6(e);case Hn.TEXT:return new KDe(e);case Hn.WIDGET:switch(e.data.fieldType){case"Tx":return new XDe(e);case"Btn":return e.data.radioButton?new yae(e):e.data.checkBox?new QDe(e):new ZDe(e);case"Ch":return new JDe(e);case"Sig":return new YDe(e)}return new Lv(e);case Hn.POPUP:return new dL(e);case Hn.FREETEXT:return new _ae(e);case Hn.LINE:return new tNe(e);case Hn.SQUARE:return new rNe(e);case Hn.CIRCLE:return new nNe(e);case Hn.POLYLINE:return new Eae(e);case Hn.CARET:return new aNe(e);case Hn.INK:return new n6(e);case Hn.POLYGON:return new iNe(e);case Hn.HIGHLIGHT:return new Sae(e);case Hn.UNDERLINE:return new sNe(e);case Hn.SQUIGGLY:return new oNe(e);case Hn.STRIKEOUT:return new lNe(e);case Hn.STAMP:return new Cae(e);case Hn.FILEATTACHMENT:return new uNe(e);default:return new mn(e)}}}var Eg,mb,tl,gE,hL;const rU=class rU{constructor(e,{isRenderable:r=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){$(this,gE);$(this,Eg,null);$(this,mb,!1);$(this,tl,null);this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,r&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:r}){return!!(e!=null&&e.str||r!=null&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rU._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,r=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return r?r.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:r,inkLists:n,rect:i}=this.data;let a=-1/0,s=-1/0;if((r==null?void 0:r.length)>=8){for(let l=0;l<r.length;l+=8)r[l+1]>s?(s=r[l+1],a=r[l+2]):r[l+1]===s&&(a=Math.max(a,r[l+2]));return[a,s]}if((n==null?void 0:n.length)>=1){for(const l of n)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>s?(s=l[u+1],a=l[u]):l[u+1]===s&&(a=Math.max(a,l[u]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:r},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=r[3]-e[1]+r[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){var r,n,i;const{data:e}=this;return((n=(r=this.annotationStorage.getRawValue(`${MA}${e.id}`))==null?void 0:r.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:r}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(r.id,{popup:n})||this.annotationStorage.setValue(`${MA}${r.id}`,{id:r.id,annotationType:r.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:r.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,r;(r=((e=g(this,tl))==null?void 0:e.popup)||this.popup)==null||r.remove(),R(this,tl,this.popup=null)}updateEdited(e){var a;if(!this.container)return;e.rect&&(g(this,Eg)||R(this,Eg,{rect:this.data.rect.slice(0)}));const{rect:r,popup:n}=e;r&&W(this,gE,hL).call(this,r);let i=((a=g(this,tl))==null?void 0:a.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=g(this,tl).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),R(this,tl,null),this.popup=null))}resetEdited(){var e;g(this,Eg)&&(W(this,gE,hL).call(this,g(this,Eg).rect),(e=g(this,tl))==null||e.popup.resetEdited(),R(this,Eg,null))}_createContainer(e){const{data:r,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",r.id),!(this instanceof Lv)&&!(this instanceof r6)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,r.alternativeText&&(a.title=r.alternativeText),r.noRotate&&a.classList.add("norotate"),!r.rect||this instanceof dL){const{rotation:m}=r;return!r.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:o,height:l}=this;if(!e&&r.borderStyle.width>0){s.borderWidth=`${r.borderStyle.width}px`;const m=r.borderStyle.horizontalCornerRadius,v=r.borderStyle.verticalCornerRadius;if(m>0||v>0){const w=`calc(${m}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;s.borderRadius=w}else if(this instanceof yae){const w=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=w}switch(r.borderStyle.style){case vy.SOLID:s.borderStyle="solid";break;case vy.DASHED:s.borderStyle="dashed";break;case vy.BEVELED:Tt("Unimplemented border style: beveled");break;case vy.INSET:Tt("Unimplemented border style: inset");break;case vy.UNDERLINE:s.borderBottomStyle="solid";break}const y=r.borderColor||null;y?(R(this,mb,!0),s.borderColor=et.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}const u=et.normalizeRect([r.rect[0],n.view[3]-r.rect[1]+n.view[1],r.rect[2],n.view[3]-r.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:f,pageX:h,pageY:d}=i.rawDims;s.left=`${100*(u[0]-h)/c}%`,s.top=`${100*(u[1]-d)/f}%`;const{rotation:p}=r;return r.hasOwnCanvas||p===0?(s.width=`${100*o/c}%`,s.height=`${100*l/f}%`):this.setRotation(p,a),a}setRotation(e,r=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),r.style.width=`${100*a/n}%`,r.style.height=`${100*s/i}%`,r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(r,n,i)=>{const a=i.detail[r],s=a[0],o=a.slice(1);i.target.style[n]=W7[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:W7[`${s}_rgb`](o)})};return Dt(this,"_commonActions",{display:r=>{const{display:n}=r.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:n}=r.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)},rotation:r=>{const n=r.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,r){const n=this._commonActions;for(const i of Object.keys(r.detail)){const a=e[i]||n[i];a==null||a(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const n=this._commonActions;for(const[i,a]of Object.entries(r)){const s=n[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete r[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[r,n,i,a]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,v,y,w]=e.subarray(2,6);if(i===m&&a===v&&r===y&&n===w)return}const{style:s}=this.container;let o;if(g(this,mb)){const{borderColor:m,borderWidth:v}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=i-r,u=a-n,{svgFactory:c}=this,f=c.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const h=c.createElement("defs");f.append(h);const d=c.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let m=2,v=e.length;m<v;m+=8){const y=e[m],w=e[m+1],b=e[m+2],_=e[m+3],x=c.createElement("rect"),A=(b-r)/l,E=(a-w)/u,S=(y-b)/l,C=(w-_)/u;x.setAttribute("x",A),x.setAttribute("y",E),x.setAttribute("width",S),x.setAttribute("height",C),d.append(x),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${E}" width="${S}" height="${C}"/>`)}g(this,mb)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:r}=this;let n,i;e?(n={str:e.text},i=e.date):(n=r.contentsObj,i=r.modificationDate),R(this,tl,new dL({data:{color:r.color,titleObj:r.titleObj,modificationDate:i,contentsObj:n,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(g(this,tl)||this.popup||this.data.popupRef)}get extraPopupElement(){return g(this,tl)}render(){Br("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===r)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!bv.has(u)){Tt(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==r&&bv.has(i)&&n.push({id:s,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const r of e)r.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:r,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Eg=new WeakMap,mb=new WeakMap,tl=new WeakMap,gE=new WeakSet,hL=function(e){const{container:{style:r},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e),r.left=`${100*(e[0]-o)/a}%`,r.top=`${100*(s-e[3]+l)/s}%`,i===0?(r.width=`${100*(e[2]-e[0])/a}%`,r.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let mn=rU;class GDe extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var vo,pm,gae,vae;class r6 extends mn{constructor(r,n=null){super(r,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});$(this,vo);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",r.id);let a=!1;return r.url?(n.addLinkAttributes(i,r.url,r.newWindow),a=!0):r.action?(this._bindNamedAction(i,r.action,r.overlaidText),a=!0):r.attachment?(W(this,vo,gae).call(this,i,r.attachment,r.overlaidText,r.attachmentDest),a=!0):r.setOCGState?(W(this,vo,vae).call(this,i,r.setOCGState,r.overlaidText),a=!0):r.dest?(this._bindLink(i,r.dest,r.overlaidText),a=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,r),a=!0),r.resetForm?(this._bindResetFormAction(i,r.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(r,n,i=""){r.href=this.linkService.getDestinationHash(n),r.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&W(this,vo,pm).call(this),i&&(r.title=i)}_bindNamedAction(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(r.title=i),W(this,vo,pm).call(this)}_bindJSAction(r,n){r.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const s=i.get(a);s&&(r[s]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(r.title=n.overlaidText),r.onclick||(r.onclick=()=>!1),W(this,vo,pm).call(this)}_bindResetFormAction(r,n){const i=r.onclick;if(i||(r.href=this.linkService.getAnchorUrl("")),W(this,vo,pm).call(this),!this._fieldObjects){Tt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(r.onclick=()=>!1);return}r.onclick=()=>{var f;i==null||i();const{fields:a,refs:s,include:o}=n,l=[];if(a.length!==0||s.length!==0){const h=new Set(s);for(const d of a){const p=this._fieldObjects[d]||[];for(const{id:m}of p)h.add(m)}for(const d of Object.values(this._fieldObjects))for(const p of d)h.has(p.id)===o&&l.push(p)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const u=this.annotationStorage,c=[];for(const h of l){const{id:d}=h;switch(c.push(d),h.type){case"text":{const m=h.defaultValue||"";u.setValue(d,{value:m});break}case"checkbox":case"radiobutton":{const m=h.defaultValue===h.exportValues;u.setValue(d,{value:m});break}case"combobox":case"listbox":{const m=h.defaultValue||"";u.setValue(d,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${d}"]`);if(p){if(!bv.has(p)){Tt(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}vo=new WeakSet,pm=function(){this.container.setAttribute("data-internal-link","")},gae=function(r,n,i="",a=null){r.href=this.linkService.getAnchorUrl(""),n.description?r.title=n.description:i&&(r.title=i),r.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,a),!1},W(this,vo,pm).call(this)},vae=function(r,n,i=""){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(r.title=i),W(this,vo,pm).call(this)};class KDe extends mn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Lv extends mn{render(){return this.container}showElementAndHideCanvas(e){var r;this.data.hasOwnCanvas&&(((r=e.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return da.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,r,n,i,a){n.includes("mouse")?e.addEventListener(n,s=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{var o;if(n==="blur"){if(!r.focused||!s.relatedTarget)return;r.focused=!1}else if(n==="focus"){if(r.focused)return;r.focused=!0}a&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,r,n,i){var a,s,o;for(const[l,u]of n)(u==="Action"||(a=this.data.actions)!=null&&a[u])&&((u==="Focus"||u==="Blur")&&(r||(r={focused:!1})),this._setEventListener(e,r,l,u,i),u==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,r,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,r,"focus","Focus",null))}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=r===null?"transparent":et.makeHexColor(r[0],r[1],r[2])}_setTextStyle(e){const r=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||HDe,a=e.style;let s;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(Vk*i))||1,f=u/c;s=Math.min(i,l(f/Vk))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,l(u/Vk))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=r[this.data.textAlignment])}_setRequired(e,r){r?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",r)}}class XDe extends Lv{constructor(e){const r=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:r})}setPropertyOnSiblings(e,r,n,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[r]=n),a.setValue(s.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(r,{value:this.data.fieldValue});let o=s.value||"";const l=e.getValue(r,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),bv.add(n),this.contentElement=n,n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",v=>{e.setValue(r,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",v=>{const y=this.data.defaultFieldValue??"";n.value=c.userValue=y,c.formattedValue=null});let m=v=>{const{formattedValue:y}=c;y!=null&&(v.target.value=y),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",y=>{var b;if(c.focused)return;const{target:w}=y;if(p&&(w.type=h,d&&(w.step=d)),c.userValue){const _=c.userValue;if(p)if(h==="time"){const x=new Date(_),A=[x.getHours(),x.getMinutes(),x.getSeconds()];w.value=A.map(E=>E.toString().padStart(2,"0")).join(":")}else w.value=new Date(_-WDe).toISOString().split(h==="date"?"T":".",1)[0];else w.value=_}c.lastCommittedValue=w.value,c.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const w={value(b){c.userValue=b.detail.value??"",p||e.setValue(r,{value:c.userValue.toString()}),b.target.value=c.userValue},formattedValue(b){const{formattedValue:_}=b.detail;c.formattedValue=_,_!=null&&b.target!==document.activeElement&&(b.target.value=_);const x={formattedValue:_};p&&(x.value=_),e.setValue(r,x)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var E;const{charLimit:_}=b.detail,{target:x}=b;if(_===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",_);let A=c.userValue;!A||A.length<=_||(A=A.slice(0,_),x.value=c.userValue=A,e.setValue(r,{value:A}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(w,y)}),n.addEventListener("keydown",y=>{var _;c.commitKey=1;let w=-1;if(y.key==="Escape"?w=0:y.key==="Enter"&&!this.data.multiLine?w=2:y.key==="Tab"&&(c.commitKey=3),w===-1)return;const{value:b}=y.target;c.lastCommittedValue!==b&&(c.lastCommittedValue=b,c.userValue=b,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const v=m;m=null,n.addEventListener("blur",y=>{var _,x;if(!c.focused||!y.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(c.focused=!1);const{target:w}=y;let{value:b}=w;if(p){if(b&&h==="time"){const A=b.split(":").map(E=>parseInt(E,10));b=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),w.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();w.type="text"}c.userValue=b,c.lastCommittedValue!==b&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:b,willCommit:!0,commitKey:c.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),v(y)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",y=>{var C;c.lastCommittedValue=null;const{data:w,target:b}=y,{value:_,selectionStart:x,selectionEnd:A}=b;let E=x,S=A;switch(y.inputType){case"deleteWordBackward":{const D=_.substring(0,x).match(/\w*[^\w]*$/);D&&(E-=D[0].length);break}case"deleteWordForward":{const D=_.substring(x).match(/^[^\w]*\w*/);D&&(S+=D[0].length);break}case"deleteContentBackward":x===A&&(E-=1);break;case"deleteContentForward":x===A&&(S+=1);break}y.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:_,change:w||"",willCommit:!1,selStart:E,selEnd:S}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class YDe extends Lv{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class QDe extends Lv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.exportValue===r.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return bv.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",r.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===r.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=r.defaultFieldValue||"Off";s.target.checked=o===r.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class yae extends Lv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,r=this.data,n=r.id;let i=e.getValue(n,{value:r.fieldValue===r.buttonValue}).value;if(typeof i=="string"&&(i=i!==r.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(r.fieldName,n))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(bv.add(a),a.setAttribute("data-element-id",n),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=r.defaultFieldValue;s.target.checked=o!=null&&o===r.buttonValue}),this.enableScripting&&this.hasJSActions){const s=r.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=s===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const h=c&&f.id===n;f.domElement&&(f.domElement.checked=h),e.setValue(f.id,{value:h})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ZDe extends r6{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class JDe extends Lv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,r=this.data.id,n=e.getValue(r,{value:this.data.fieldValue}),i=document.createElement("select");bv.add(i),i.setAttribute("data-element-id",r),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const f=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===f});for(const c of this.data.options){const f=document.createElement("option");f.textContent=c.displayValue,f.value=c.exportValue,n.value.includes(c.exportValue)&&(f.setAttribute("selected",!0),a=!1),i.append(f)}let s=null;if(a){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),s=()=>{c.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=c=>{const f=c?"value":"textContent",{options:h,multiple:d}=i;return d?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[f]):h.selectedIndex===-1?null:h[h.selectedIndex][f]};let l=o(!1);const u=c=>{const f=c.target.options;return Array.prototype.map.call(f,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const f={value(h){s==null||s();const d=h.detail.value,p=new Set(Array.isArray(d)?d:[d]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(r,{value:o(!0)}),l=o(!1)},multipleSelection(h){i.multiple=!0},remove(h){const d=i.options,p=h.detail.remove;d[p].selected=!1,i.remove(p),d.length>0&&Array.prototype.findIndex.call(d,v=>v.selected)===-1&&(d[0].selected=!0),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(r,{value:null,items:[]}),l=o(!1)},insert(h){const{index:d,displayValue:p,exportValue:m}=h.detail.insert,v=i.children[d],y=document.createElement("option");y.textContent=p,y.value=m,v?v.before(y):i.append(y),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},items(h){const{items:d}=h.detail;for(;i.length!==0;)i.remove(0);for(const p of d){const{displayValue:m,exportValue:v}=p,y=document.createElement("option");y.textContent=m,y.value=v,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(r,{value:o(!0),items:u(h)}),l=o(!1)},indices(h){const d=new Set(h.detail.indices);for(const p of h.target.options)p.selected=d.has(p.index);e.setValue(r,{value:o(!0)}),l=o(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(f,c)}),i.addEventListener("input",c=>{var d;const f=o(!0),h=o(!1);e.setValue(r,{value:f}),c.preventDefault(),(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:l,change:h,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(r,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var vE,pL;class dL extends mn{constructor(r){const{data:n,elements:i,parent:a}=r,s=!!a._commentManager;super(r,{isRenderable:!s&&mn._hasPopupData(n)});$(this,vE);if(this.elements=i,s&&mn._hasPopupData(n)){const o=this.popup=W(this,vE,pL).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:r}=this;r.classList.add("popupAnnotation"),r.role="comment";const n=this.popup=W(this,vE,pL).call(this),i=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${zy}${a}`).join(",")),this.container}}vE=new WeakSet,pL=function(){return new eNe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Js,Sd,WP,GP,gb,vb,_n,Gu,Cd,Sg,yb,bb,Ku,eo,df,pf,En,mf,Td,yE,gf,wb,Cg,Dd,Mi,Nd,$t,TD,mL,gL,vL,DD,yL,bae,wae,xae,Aae,ND,PD,bL;class eNe{constructor({container:e,color:r,elements:n,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:u,parentRect:c,open:f,commentManager:h=null}){$(this,$t);$(this,Js,null);$(this,Sd,W(this,$t,xae).bind(this));$(this,WP,W(this,$t,bL).bind(this));$(this,GP,W(this,$t,PD).bind(this));$(this,gb,W(this,$t,ND).bind(this));$(this,vb,null);$(this,_n,null);$(this,Gu,null);$(this,Cd,null);$(this,Sg,null);$(this,yb,null);$(this,bb,null);$(this,Ku,!1);$(this,eo,null);$(this,df,null);$(this,pf,null);$(this,En,null);$(this,mf,null);$(this,Td,null);$(this,yE,null);$(this,gf,null);$(this,wb,null);$(this,Cg,null);$(this,Dd,!1);$(this,Mi,null);$(this,Nd,null);R(this,_n,e),R(this,wb,i),R(this,Gu,s),R(this,gf,o),R(this,yb,l),R(this,vb,r),R(this,yE,u),R(this,bb,c),R(this,Sg,n),R(this,Js,h),R(this,Mi,n[0]),R(this,Cd,KN.toDateObject(a)),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup()),h||(W(this,$t,TD).call(this),g(this,_n).hidden=!0,f&&W(this,$t,ND).call(this))}renderCommentButton(){if(g(this,En)){g(this,En).parentNode||g(this,Mi).container.after(g(this,En));return}if(g(this,mf)||W(this,$t,mL).call(this),!g(this,mf))return;const{signal:e}=R(this,df,new AbortController),r=g(this,Mi).hasOwnCommentButton,n=()=>{g(this,Js).toggleCommentPopup(this,!0,void 0,!r)},i=()=>{g(this,Js).toggleCommentPopup(this,!1,!0,!r)},a=()=>{g(this,Js).toggleCommentPopup(this,!1,!1)};if(r){R(this,En,g(this,Mi).container);for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",g(this,Sd),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=R(this,En,document.createElement("button"));s.className="annotationCommentButton";const o=g(this,Mi).container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),W(this,$t,vL).call(this),W(this,$t,gL).call(this),s.addEventListener("keydown",g(this,Sd),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),o.after(s)}}get commentButtonColor(){const{color:e,opacity:r}=g(this,Mi).commentData;return e?g(this,yb)._commentManager.makeCommentColor(e,r):null}focusCommentButton(){setTimeout(()=>{var e;(e=g(this,En))==null||e.focus()},0)}getData(){const{richText:e,color:r,opacity:n,creationDate:i,modificationDate:a}=g(this,Mi).commentData;return{contentsObj:{str:this.comment},richText:e,color:r,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return g(this,En)}get comment(){return g(this,Nd)||R(this,Nd,g(this,Mi).commentText),g(this,Nd)}set comment(e){e!==this.comment&&(g(this,Mi).commentText=R(this,Nd,e))}focus(){var e;(e=g(this,Mi).container)==null||e.focus()}get parentBoundingClientRect(){return g(this,Mi).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:r}){g(this,En)&&(g(this,En).classList.toggle("selected",e),g(this,En).ariaExpanded=r)}setSelectedCommentButton(e){g(this,En).classList.toggle("selected",e)}get commentPopupPosition(){if(g(this,Td))return g(this,Td);const{x:e,y:r,height:n}=g(this,En).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=g(this,Mi).layer.getBoundingClientRect();return[(e-i)/s,(r+n-a)/o]}set commentPopupPosition(e){R(this,Td,e)}hasDefaultPopupPosition(){return g(this,Td)===null}get commentButtonPosition(){return g(this,mf)}get commentButtonWidth(){return g(this,En).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[r,n]=g(this,Td)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:a,y:s,width:o,height:l}=i;g(this,Js).showDialog(null,this,a+r*o,s+n*l,{...e,parentDimensions:i})}render(){var n,i;if(g(this,eo))return;const e=R(this,eo,document.createElement("div"));if(e.className="popup",g(this,vb)){const a=e.style.outlineColor=et.makeHexColor(...g(this,vb));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const r=document.createElement("span");if(r.className="header",(n=g(this,wb))!=null&&n.str){const a=document.createElement("span");a.className="title",r.append(a),{dir:a.dir,str:a.textContent}=g(this,wb)}if(e.append(r),g(this,Cd)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,Cd).valueOf()})),a.dateTime=g(this,Cd).toISOString(),r.append(a)}uie({html:g(this,$t,DD)||g(this,Gu).str,dir:(i=g(this,Gu))==null?void 0:i.dir,className:"popupContent"},e),g(this,_n).append(e)}updateEdited({rect:e,popup:r,deleted:n}){var i;if(g(this,Js)){n?(this.remove(),R(this,Nd,null)):r&&(r.deleted?this.remove():(W(this,$t,vL).call(this),R(this,Nd,r.text))),e&&(R(this,mf,null),W(this,$t,mL).call(this),W(this,$t,gL).call(this));return}if(n||r!=null&&r.deleted){this.remove();return}W(this,$t,TD).call(this),g(this,Cg)||R(this,Cg,{contentsObj:g(this,Gu),richText:g(this,gf)}),e&&R(this,pf,null),r&&r.text&&(R(this,gf,W(this,$t,wae).call(this,r.text)),R(this,Cd,KN.toDateObject(r.date)),R(this,Gu,null)),(i=g(this,eo))==null||i.remove(),R(this,eo,null)}resetEdited(){var e;g(this,Cg)&&({contentsObj:ni(this,Gu)._,richText:ni(this,gf)._}=g(this,Cg),R(this,Cg,null),(e=g(this,eo))==null||e.remove(),R(this,eo,null),R(this,pf,null))}remove(){var e,r,n;if((e=g(this,df))==null||e.abort(),R(this,df,null),(r=g(this,eo))==null||r.remove(),R(this,eo,null),R(this,Dd,!1),R(this,Ku,!1),(n=g(this,En))==null||n.remove(),R(this,En,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){R(this,Dd,this.isVisible),g(this,Dd)&&(g(this,_n).hidden=!0)}maybeShow(){g(this,Js)||(W(this,$t,TD).call(this),g(this,Dd)&&(g(this,eo)||W(this,$t,PD).call(this),R(this,Dd,!1),g(this,_n).hidden=!1))}get isVisible(){return g(this,Js)?!1:g(this,_n).hidden===!1}}Js=new WeakMap,Sd=new WeakMap,WP=new WeakMap,GP=new WeakMap,gb=new WeakMap,vb=new WeakMap,_n=new WeakMap,Gu=new WeakMap,Cd=new WeakMap,Sg=new WeakMap,yb=new WeakMap,bb=new WeakMap,Ku=new WeakMap,eo=new WeakMap,df=new WeakMap,pf=new WeakMap,En=new WeakMap,mf=new WeakMap,Td=new WeakMap,yE=new WeakMap,gf=new WeakMap,wb=new WeakMap,Cg=new WeakMap,Dd=new WeakMap,Mi=new WeakMap,Nd=new WeakMap,$t=new WeakSet,TD=function(){var r;if(g(this,df))return;R(this,df,new AbortController);const{signal:e}=g(this,df);for(const n of this.trigger)n.addEventListener("click",g(this,gb),{signal:e}),n.addEventListener("pointerenter",g(this,GP),{signal:e}),n.addEventListener("pointerleave",g(this,WP),{signal:e}),n.classList.add("popupTriggerArea");for(const n of g(this,Sg))(r=n.container)==null||r.addEventListener("keydown",g(this,Sd),{signal:e})},mL=function(){const e=g(this,Sg).find(r=>r.hasCommentButton);e&&R(this,mf,e._normalizePoint(e.commentButtonPosition))},gL=function(){if(g(this,Mi).extraPopupElement&&!g(this,Mi).editor)return;g(this,En)||this.renderCommentButton();const[e,r]=g(this,mf),{style:n}=g(this,En);n.left=`calc(${e}%)`,n.top=`calc(${r}% - var(--comment-button-dim))`},vL=function(){g(this,Mi).extraPopupElement||(g(this,En)||this.renderCommentButton(),g(this,En).style.backgroundColor=this.commentButtonColor||"")},DD=function(){const e=g(this,gf),r=g(this,Gu);return e!=null&&e.str&&(!(r!=null&&r.str)||r.str===e.str)&&g(this,gf).html||null},yL=function(){var e,r,n;return((n=(r=(e=g(this,$t,DD))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.fontSize)||0},bae=function(){var e,r,n;return((n=(r=(e=g(this,$t,DD))==null?void 0:e.attributes)==null?void 0:r.style)==null?void 0:n.color)||null},wae=function(e){const r=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},i={style:{color:g(this,$t,bae),fontSize:g(this,$t,yL)?`calc(${g(this,$t,yL)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))r.push({name:"span",value:a,attributes:i});return n},xae=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&g(this,Ku))&&W(this,$t,ND).call(this)},Aae=function(){if(g(this,pf)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:i,pageY:a}}}=g(this,yb);let s=!!g(this,bb),o=s?g(this,bb):g(this,yE);for(const p of g(this,Sg))if(!o||et.intersect(p.data.rect,o)!==null){o=p.data.rect,s=!0;break}const l=et.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=s?o[2]-o[0]+5:0,f=l[0]+c,h=l[1];R(this,pf,[100*(f-i)/r,100*(h-a)/n]);const{style:d}=g(this,_n);d.left=`${g(this,pf)[0]}%`,d.top=`${g(this,pf)[1]}%`},ND=function(){if(g(this,Js)){g(this,Js).toggleCommentPopup(this,!1);return}R(this,Ku,!g(this,Ku)),g(this,Ku)?(W(this,$t,PD).call(this),g(this,_n).addEventListener("click",g(this,gb)),g(this,_n).addEventListener("keydown",g(this,Sd))):(W(this,$t,bL).call(this),g(this,_n).removeEventListener("click",g(this,gb)),g(this,_n).removeEventListener("keydown",g(this,Sd)))},PD=function(){g(this,eo)||this.render(),this.isVisible?g(this,Ku)&&g(this,_n).classList.add("focused"):(W(this,$t,Aae).call(this),g(this,_n).hidden=!1,g(this,_n).style.zIndex=parseInt(g(this,_n).style.zIndex)+1e3)},bL=function(){g(this,_n).classList.remove("focused"),!(g(this,Ku)||!this.isVisible)&&(g(this,_n).hidden=!0,g(this,_n).style.zIndex=parseInt(g(this,_n).style.zIndex)-1e3)};class _ae extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ot.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const r of this.textContent){const n=document.createElement("span");n.textContent=r,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var bE;class tNe extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,bE,null)}render(){this.container.classList.add("lineAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=R(this,bE,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),s.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),s.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),s.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),s.setAttribute("stroke-width",r.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,bE)}addHighlightArea(){this.container.classList.add("highlightArea")}}bE=new WeakMap;var wE;class rNe extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,wE,null)}render(){this.container.classList.add("squareAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=r.borderStyle.width,o=R(this,wE,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",n-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,wE)}addHighlightArea(){this.container.classList.add("highlightArea")}}wE=new WeakMap;var xE;class nNe extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,xE,null)}render(){this.container.classList.add("circleAnnotation");const{data:r,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=r.borderStyle.width,o=R(this,xE,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!r.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,xE)}addHighlightArea(){this.container.classList.add("highlightArea")}}xE=new WeakMap;var AE;class Eae extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,AE,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,vertices:n,borderStyle:i,popupRef:a},width:s,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(s,o,!0);let u=[];for(let f=0,h=n.length;f<h;f+=2){const d=n[f]-r[0],p=r[3]-n[f+1];u.push(`${d},${p}`)}u=u.join(" ");const c=R(this,AE,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return g(this,AE)}addHighlightArea(){this.container.classList.add("highlightArea")}}AE=new WeakMap;class iNe extends Eae{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aNe extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var _E,Tg,EE,wL;class n6 extends mn{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});$(this,EE);$(this,_E,null);$(this,Tg,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ot.HIGHLIGHT:Ot.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:r,rotation:n,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:o,width:l,height:u}=W(this,EE,wL).call(this,n,r),c=this.svgFactory.create(l,u,!0),f=R(this,_E,this.svgFactory.createElement("svg:g"));c.append(f),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let h=0,d=i.length;h<d;h++){const p=this.svgFactory.createElement(this.svgElementName);g(this,Tg).push(p),p.setAttribute("points",i[h].join(",")),f.append(p)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(r){super.updateEdited(r);const{thickness:n,points:i,rect:a}=r,s=g(this,_E);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let o=0,l=g(this,Tg).length;o<l;o++)g(this,Tg)[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:l,height:u}=W(this,EE,wL).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return g(this,Tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}_E=new WeakMap,Tg=new WeakMap,EE=new WeakSet,wL=function(r,n){switch(r){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Sae extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ot.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class sNe extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class oNe extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class lNe extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Cae extends mn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ot.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var SE,CE,xL;class uNe extends mn{constructor(r){var i;super(r,{isRenderable:!0});$(this,CE);$(this,SE,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",W(this,CE,xL).bind(this)),R(this,SE,i);const{isMac:a}=da.platform;return r.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&W(this,CE,xL).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),r.append(i),r}getElementsToTriggerPopup(){return g(this,SE)}addHighlightArea(){this.container.classList.add("highlightArea")}}SE=new WeakMap,CE=new WeakSet,xL=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.content,this.filename)};var Dg,Ng,xb,Pd,TE,Pg,to,DE,qf,MD,_L;const nU=class nU{constructor({div:e,accessibilityManager:r,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){$(this,qf);$(this,Dg,null);$(this,Ng,null);$(this,xb,null);$(this,Pd,new Map);$(this,TE,null);$(this,Pg,null);$(this,to,[]);$(this,DE,!1);this.div=e,R(this,Dg,r),R(this,Ng,n),R(this,TE,o||null),R(this,Pg,u||null),R(this,xb,c||new J5),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return g(this,Pd).size>0}async render(e){var o;const{annotations:r}=e,n=this.div;vv(n,this.viewport);const i=new Map,a=[],s={data:null,layer:n,linkService:g(this,Pg),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new r2,annotationStorage:g(this,xb),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of r){if(l.noHTML)continue;const u=l.annotationType===Hn.POPUP;if(u){const h=i.get(l.id);if(!h)continue;if(!this._commentManager){a.push(l);continue}s.elements=h}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;s.data=l;const c=Xk.create(s);if(!c.isRenderable)continue;if(!u&&(g(this,to).push(c),l.popupRef)){const h=i.get(l.popupRef);h?h.push(c):i.set(l.popupRef,[c])}const f=c.render();l.hidden&&(f.style.visibility="hidden"),c._isEditable&&(g(this,Pd).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await W(this,qf,MD).call(this);for(const l of a){const u=s.elements=i.get(l.id);s.data=l;const c=Xk.create(s);if(!c.isRenderable)continue;const f=c.render();c.contentElement.id=`${zy}${l.id}`,l.hidden&&(f.style.visibility="hidden"),u.at(-1).container.after(f)}W(this,qf,_L).call(this)}async addLinkAnnotations(e){const r={data:null,layer:this.div,linkService:g(this,Pg),svgFactory:new r2,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=nU._defaultBorderStyle),r.data=n;const i=Xk.create(r);i.isRenderable&&(i.render(),i.contentElement.id=`${zy}${n.id}`,g(this,to).push(i))}await W(this,qf,MD).call(this)}update({viewport:e}){const r=this.div;this.viewport=e,vv(r,{rotation:e.rotation}),W(this,qf,_L).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(g(this,Pd).values())}getEditableAnnotation(e){return g(this,Pd).get(e)}addFakeAnnotation(e){const{div:r}=this,{id:n,rotation:i}=e,a=new GDe({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:r,parent:this,enableComment:!!this._commentManager,linkService:g(this,Pg),annotationStorage:g(this,xb)});return a.render(),a.contentElement.id=`${zy}${n}`,a.createOrUpdatePopup(),g(this,to).push(a),a}removeAnnotation(e){var i;const r=g(this,to).findIndex(a=>a.data.id===e);if(r<0)return;const[n]=g(this,to).splice(r,1);(i=g(this,Dg))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const r of e)r.updateFakeAnnotationElement(this);W(this,qf,MD).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:vy.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Dg=new WeakMap,Ng=new WeakMap,xb=new WeakMap,Pd=new WeakMap,TE=new WeakMap,Pg=new WeakMap,to=new WeakMap,DE=new WeakMap,qf=new WeakSet,MD=async function(){var n,i,a;if(g(this,to).length===0)return;this.div.replaceChildren();const e=[];if(!g(this,DE)){R(this,DE,!0);for(const{contentElement:s,data:{id:o}}of g(this,to)){const l=s.id=`${zy}${o}`;e.push((n=g(this,TE))==null?void 0:n.getAriaAttributes(l).then(u=>{if(u)for(const[c,f]of u)s.setAttribute(c,f)}))}}g(this,to).sort(({data:{rect:[s,o,l,u]}},{data:{rect:[c,f,h,d]}})=>{if(s===l&&o===u)return 1;if(c===h&&f===d)return-1;const p=u,m=o,v=(o+u)/2,y=d,w=f,b=(f+d)/2;if(v>=y&&b<=m)return-1;if(b>=p&&v<=w)return 1;const _=(s+l)/2,x=(c+h)/2;return _-x});const r=document.createDocumentFragment();for(const s of g(this,to))r.append(s.container),this._commentManager?(a=((i=s.extraPopupElement)==null?void 0:i.popup)||s.popup)==null||a.renderCommentButton():s.extraPopupElement&&r.append(s.extraPopupElement.render());if(this.div.append(r),await Promise.all(e),g(this,Dg))for(const s of g(this,to))g(this,Dg).addPointerInTextLayer(s.contentElement,!1)},_L=function(){var r;if(!g(this,Ng))return;const e=this.div;for(const[n,i]of g(this,Ng)){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const o=g(this,Pd).get(n);o&&(o._hasNoCanvas?((r=this._annotationEditorUIManager)==null||r.setMissingCanvas(n,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}g(this,Ng).clear()};let AL=nU;const rT=/\r\n?|\n/g;var ro,NE,Mg,no,ti,Tae,Dae,Nae,ID,Hf,OD,kD,Pae,SL,Mae;const Xr=class Xr extends Wr{constructor(r){super({...r,name:"freeTextEditor"});$(this,ti);$(this,ro,"");$(this,NE,`${this.id}-editor`);$(this,Mg,null);$(this,no);Oe(this,"_colorPicker",null);this.color=r.color||Xr._defaultColor||Wr._defaultLineColor,R(this,no,r.fontSize||Xr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const r=Xr.prototype,n=s=>s.isEmpty(),i=yv.TRANSLATE_SMALL,a=yv.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new gS([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(r,n){Wr.initialize(r,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,n){switch(r){case Zt.FREETEXT_SIZE:Xr._defaultFontSize=n;break;case Zt.FREETEXT_COLOR:Xr._defaultColor=n;break}}updateParams(r,n){switch(r){case Zt.FREETEXT_SIZE:W(this,ti,Tae).call(this,n);break;case Zt.FREETEXT_COLOR:W(this,ti,Dae).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Zt.FREETEXT_SIZE,Xr._defaultFontSize],[Zt.FREETEXT_COLOR,Xr._defaultColor||Wr._defaultLineColor]]}get propertiesToUpdate(){return[[Zt.FREETEXT_SIZE,g(this,no)],[Zt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new t2(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Zt.FREETEXT_COLOR}onUpdatedColor(){var r;this.editorDiv.style.color=this.color,(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_translateEmpty(r,n){this._uiManager.translateSelectedEditors(r,n,!0)}getInitialTranslation(){const r=this.parentScale;return[-Xr._internalPadding*r,-(Xr._internalPadding+g(this,no))*r]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),R(this,Mg,new AbortController);const r=this._uiManager.combinedSignal(g(this,Mg));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:r}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:r}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:r}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:r}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:r}),!0}disableEditMode(){var r;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,NE)),this._isDraggable=!0,(r=g(this,Mg))==null||r.abort(),R(this,Mg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(r){var n;this.width||(this.enableEditMode(),r&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=g(this,ro),n=R(this,ro,W(this,ti,Nae).call(this).trimEnd());if(r===n)return;const i=a=>{if(R(this,ro,a),!a){this.remove();return}W(this,ti,kD).call(this),this._uiManager.rebuild(this),W(this,ti,ID).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(r)},mustExec:!1}),W(this,ti,ID).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(r){r.target===this.div&&r.key==="Enter"&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){Xr._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let r,n;(this._isCopy||this.annotationElementId)&&(r=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,NE)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${g(this,no)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,f]=this.pageDimensions,[h,d]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=r+(o[0]-h)/c,m=n+this.height-(o[1]-d)/f;break;case 90:p=r+(o[0]-h)/c,m=n-(o[1]-d)/f,[l,u]=[u,-l];break;case 180:p=r-this.width+(o[0]-h)/c,m=n-(o[1]-d)/f,[l,u]=[-l,-u];break;case 270:p=r+(o[0]-h-this.height*f)/c,m=n+(o[1]-d-this.width*c)/f,[l,u]=[-u,l];break}this.setAt(p*a,m*s,l,u)}else this._moveAfterPaste(r,n);W(this,ti,kD).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(r){var p,m,v;const n=r.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;r.preventDefault();const a=W(p=Xr,Hf,SL).call(p,n.getData("text")||"").replaceAll(rT,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(rT,"")),y!==this.editorDiv){let w=c;for(const b of this.editorDiv.childNodes){if(b===y){w=f;continue}w.push(W(m=Xr,Hf,OD).call(m,b))}}c.push(l.nodeValue.slice(0,u).replaceAll(rT,""))}else if(l===this.editorDiv){let y=c,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(y=f),y.push(W(v=Xr,Hf,OD).call(v,b))}R(this,ro,`${c.join(`
`)}${a}${f.join(`
`)}`),W(this,ti,kD).call(this);const h=new Range;let d=Math.sumPrecise(c.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(d<=w){h.setStart(y,d),h.setEnd(y,d);break}d-=w}s.removeAllRanges(),s.addRange(h)}get contentDiv(){return this.editorDiv}getPDFRect(){const r=Xr._internalPadding*this.parentScale;return this.getRect(r,r)}static async deserialize(r,n,i){var o;let a=null;if(r instanceof _ae){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:f,id:h,popupRef:d,richText:p,contentsObj:m,creationDate:v,modificationDate:y},textContent:w,textPosition:b,parent:{page:{pageNumber:_}}}=r;if(!w||w.length===0)return null;a=r={annotationType:Ot.FREETEXT,color:Array.from(u),fontSize:l,value:w.join(`
`),position:b,pageIndex:_-1,rect:c.slice(0),rotation:f,annotationElementId:h,id:h,deleted:!1,popupRef:d,comment:(m==null?void 0:m.str)||null,richText:p,creationDate:v,modificationDate:y}}const s=await super.deserialize(r,n,i);return R(s,no,r.fontSize),s.color=et.makeHexColor(...r.color),R(s,ro,W(o=Xr,Hf,SL).call(o,r.value)),s._initialData=a,r.comment&&s.setCommentData(r),s}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Wr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(r),{color:n,fontSize:g(this,no),value:W(this,ti,Pae).call(this)});return this.addComment(i),r?(i.isCopy=!0,i):this.annotationElementId&&!W(this,ti,Mae).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){const n=super.renderAnnotationElement(r);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${g(this,no)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const a of g(this,ro).split(`
`)){const s=document.createElement("div");s.append(a?document.createTextNode(a):document.createElement("br")),n.append(s)}return r.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:g(this,ro)}}),n}resetAnnotationElement(r){super.resetAnnotationElement(r),r.resetEdited()}};ro=new WeakMap,NE=new WeakMap,Mg=new WeakMap,no=new WeakMap,ti=new WeakSet,Tae=function(r){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-g(this,no))*this.parentScale),R(this,no,a),W(this,ti,ID).call(this)},i=g(this,no);this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Dae=function(r){const n=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,r),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nae=function(){var i;const r=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(r.push(W(i=Xr,Hf,OD).call(i,a)),n=a);return r.join(`
`)},ID=function(){const[r,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,o=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/r,this.height=i.height/n):(this.width=i.height/r,this.height=i.width/n),this.fixAndSetPosition()},Hf=new WeakSet,OD=function(r){return(r.nodeType===Node.TEXT_NODE?r.nodeValue:r.innerText).replaceAll(rT,"")},kD=function(){if(this.editorDiv.replaceChildren(),!!g(this,ro))for(const r of g(this,ro).split(`
`)){const n=document.createElement("div");n.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(n)}},Pae=function(){return g(this,ro).replaceAll(""," ")},SL=function(r){return r.replaceAll(" ","")},Mae=function(r){const{value:n,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||r.value!==n||r.fontSize!==i||r.color.some((o,l)=>o!==a[l])||r.pageIndex!==s},$(Xr,Hf),Oe(Xr,"_freeTextDefaultContent",""),Oe(Xr,"_internalPadding",0),Oe(Xr,"_defaultColor",null),Oe(Xr,"_defaultFontSize",10),Oe(Xr,"_type","freetext"),Oe(Xr,"_editorType",Ot.FREETEXT);let EL=Xr;class Qe{toSVGPath(){Br("Abstract method `toSVGPath` must be implemented.")}get box(){Br("Abstract getter `box` must be implemented.")}serialize(e,r){Br("Abstract method `serialize` must be implemented.")}static _rescale(e,r,n,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=r+e[o]*i,s[o+1]=n+e[o+1]*a;return s}static _rescaleAndSwap(e,r,n,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=r+e[o+1]*i,s[o+1]=n+e[o]*a;return s}static _translate(e,r,n,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=r+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,n,i,a){switch(a){case 90:return[1-r/n,e/i];case 180:return[1-e/n,1-r/i];case 270:return[r/n,1-e/i];default:return[e/n,r/i]}}static _normalizePagePoint(e,r,n){switch(n){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,n,i,a,s){return[(e+5*n)/6,(r+5*i)/6,(5*n+a)/6,(5*i+s)/6,(n+a)/2,(i+s)/2]}}Oe(Qe,"PRECISION",1e-4);var io,Hl,Ab,_b,Xu,zt,Ig,Og,PE,ME,Eb,Sb,Md,IE,KP,XP,hi,yx,Iae,Oae,kae,Rae,Fae,Lae;const jc=class jc{constructor({x:e,y:r},n,i,a,s,o=0){$(this,hi);$(this,io);$(this,Hl,[]);$(this,Ab);$(this,_b);$(this,Xu,[]);$(this,zt,new Float32Array(18));$(this,Ig);$(this,Og);$(this,PE);$(this,ME);$(this,Eb);$(this,Sb);$(this,Md,[]);R(this,io,n),R(this,Sb,a*i),R(this,_b,s),g(this,zt).set([NaN,NaN,NaN,NaN,e,r],6),R(this,Ab,o),R(this,ME,g(jc,IE)*i),R(this,PE,g(jc,XP)*i),R(this,Eb,i),g(this,Md).push(e,r)}isEmpty(){return isNaN(g(this,zt)[8])}add({x:e,y:r}){var C;R(this,Ig,e),R(this,Og,r);const[n,i,a,s]=g(this,io);let[o,l,u,c]=g(this,zt).subarray(8,12);const f=e-u,h=r-c,d=Math.hypot(f,h);if(d<g(this,PE))return!1;const p=d-g(this,ME),m=p/d,v=m*f,y=m*h;let w=o,b=l;o=u,l=c,u+=v,c+=y,(C=g(this,Md))==null||C.push(e,r);const _=-y/p,x=v/p,A=_*g(this,Sb),E=x*g(this,Sb);return g(this,zt).set(g(this,zt).subarray(2,8),0),g(this,zt).set([u+A,c+E],4),g(this,zt).set(g(this,zt).subarray(14,18),12),g(this,zt).set([u-A,c-E],16),isNaN(g(this,zt)[6])?(g(this,Xu).length===0&&(g(this,zt).set([o+A,l+E],2),g(this,Xu).push(NaN,NaN,NaN,NaN,(o+A-n)/a,(l+E-i)/s),g(this,zt).set([o-A,l-E],14),g(this,Hl).push(NaN,NaN,NaN,NaN,(o-A-n)/a,(l-E-i)/s)),g(this,zt).set([w,b,o,l,u,c],6),!this.isEmpty()):(g(this,zt).set([w,b,o,l,u,c],6),Math.abs(Math.atan2(b-l,w-o)-Math.atan2(y,v))<Math.PI/2?([o,l,u,c]=g(this,zt).subarray(2,6),g(this,Xu).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/a,((l+c)/2-i)/s),[o,l,w,b]=g(this,zt).subarray(14,18),g(this,Hl).push(NaN,NaN,NaN,NaN,((w+o)/2-n)/a,((b+l)/2-i)/s),!0):([w,b,o,l,u,c]=g(this,zt).subarray(0,6),g(this,Xu).push(((w+5*o)/6-n)/a,((b+5*l)/6-i)/s,((5*o+u)/6-n)/a,((5*l+c)/6-i)/s,((o+u)/2-n)/a,((l+c)/2-i)/s),[u,c,o,l,w,b]=g(this,zt).subarray(12,18),g(this,Hl).push(((w+5*o)/6-n)/a,((b+5*l)/6-i)/s,((5*o+u)/6-n)/a,((5*l+c)/6-i)/s,((o+u)/2-n)/a,((l+c)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=g(this,Xu),r=g(this,Hl);if(isNaN(g(this,zt)[6])&&!this.isEmpty())return W(this,hi,Iae).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);W(this,hi,kae).call(this,n);for(let i=r.length-6;i>=6;i-=6)isNaN(r[i])?n.push(`L${r[i+4]} ${r[i+5]}`):n.push(`C${r[i]} ${r[i+1]} ${r[i+2]} ${r[i+3]} ${r[i+4]} ${r[i+5]}`);return W(this,hi,Oae).call(this,n),n.join(" ")}newFreeDrawOutline(e,r,n,i,a,s){return new Bae(e,r,n,i,a,s)}getOutlines(){var f;const e=g(this,Xu),r=g(this,Hl),n=g(this,zt),[i,a,s,o]=g(this,io),l=new Float32Array((((f=g(this,Md))==null?void 0:f.length)??0)+2);for(let h=0,d=l.length-2;h<d;h+=2)l[h]=(g(this,Md)[h]-i)/s,l[h+1]=(g(this,Md)[h+1]-a)/o;if(l[l.length-2]=(g(this,Ig)-i)/s,l[l.length-1]=(g(this,Og)-a)/o,isNaN(n[6])&&!this.isEmpty())return W(this,hi,Rae).call(this,l);const u=new Float32Array(g(this,Xu).length+24+g(this,Hl).length);let c=e.length;for(let h=0;h<c;h+=2){if(isNaN(e[h])){u[h]=u[h+1]=NaN;continue}u[h]=e[h],u[h+1]=e[h+1]}c=W(this,hi,Lae).call(this,u,c);for(let h=r.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(r[h+d])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=r[h+d],u[c+1]=r[h+d+1],c+=2}return W(this,hi,Fae).call(this,u,c),this.newFreeDrawOutline(u,l,g(this,io),g(this,Eb),g(this,Ab),g(this,_b))}};io=new WeakMap,Hl=new WeakMap,Ab=new WeakMap,_b=new WeakMap,Xu=new WeakMap,zt=new WeakMap,Ig=new WeakMap,Og=new WeakMap,PE=new WeakMap,ME=new WeakMap,Eb=new WeakMap,Sb=new WeakMap,Md=new WeakMap,IE=new WeakMap,KP=new WeakMap,XP=new WeakMap,hi=new WeakSet,yx=function(){const e=g(this,zt).subarray(4,6),r=g(this,zt).subarray(16,18),[n,i,a,s]=g(this,io);return[(g(this,Ig)+(e[0]-r[0])/2-n)/a,(g(this,Og)+(e[1]-r[1])/2-i)/s,(g(this,Ig)+(r[0]-e[0])/2-n)/a,(g(this,Og)+(r[1]-e[1])/2-i)/s]},Iae=function(){const[e,r,n,i]=g(this,io),[a,s,o,l]=W(this,hi,yx).call(this);return`M${(g(this,zt)[2]-e)/n} ${(g(this,zt)[3]-r)/i} L${(g(this,zt)[4]-e)/n} ${(g(this,zt)[5]-r)/i} L${a} ${s} L${o} ${l} L${(g(this,zt)[16]-e)/n} ${(g(this,zt)[17]-r)/i} L${(g(this,zt)[14]-e)/n} ${(g(this,zt)[15]-r)/i} Z`},Oae=function(e){const r=g(this,Hl);e.push(`L${r[4]} ${r[5]} Z`)},kae=function(e){const[r,n,i,a]=g(this,io),s=g(this,zt).subarray(4,6),o=g(this,zt).subarray(16,18),[l,u,c,f]=W(this,hi,yx).call(this);e.push(`L${(s[0]-r)/i} ${(s[1]-n)/a} L${l} ${u} L${c} ${f} L${(o[0]-r)/i} ${(o[1]-n)/a}`)},Rae=function(e){const r=g(this,zt),[n,i,a,s]=g(this,io),[o,l,u,c]=W(this,hi,yx).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(r[2]-n)/a,(r[3]-i)/s,NaN,NaN,NaN,NaN,(r[4]-n)/a,(r[5]-i)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(r[16]-n)/a,(r[17]-i)/s,NaN,NaN,NaN,NaN,(r[14]-n)/a,(r[15]-i)/s],0),this.newFreeDrawOutline(f,e,g(this,io),g(this,Eb),g(this,Ab),g(this,_b))},Fae=function(e,r){const n=g(this,Hl);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],r),r+=6},Lae=function(e,r){const n=g(this,zt).subarray(4,6),i=g(this,zt).subarray(16,18),[a,s,o,l]=g(this,io),[u,c,f,h]=W(this,hi,yx).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/o,(n[1]-s)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,f,h,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l],r),r+=24},$(jc,IE,8),$(jc,KP,2),$(jc,XP,g(jc,IE)+g(jc,KP));let n2=jc;var Cb,kg,vf,OE,ao,kE,Fn,YP,$ae;class Bae extends Qe{constructor(r,n,i,a,s,o){super();$(this,YP);$(this,Cb);$(this,kg,new Float32Array(4));$(this,vf);$(this,OE);$(this,ao);$(this,kE);$(this,Fn);R(this,Fn,r),R(this,ao,n),R(this,Cb,i),R(this,kE,a),R(this,vf,s),R(this,OE,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],W(this,YP,$ae).call(this,o);const[l,u,c,f]=g(this,kg);for(let h=0,d=r.length;h<d;h+=2)r[h]=(r[h]-l)/c,r[h+1]=(r[h+1]-u)/f;for(let h=0,d=n.length;h<d;h+=2)n[h]=(n[h]-l)/c,n[h+1]=(n[h+1]-u)/f}toSVGPath(){const r=[`M${g(this,Fn)[4]} ${g(this,Fn)[5]}`];for(let n=6,i=g(this,Fn).length;n<i;n+=6){if(isNaN(g(this,Fn)[n])){r.push(`L${g(this,Fn)[n+4]} ${g(this,Fn)[n+5]}`);continue}r.push(`C${g(this,Fn)[n]} ${g(this,Fn)[n+1]} ${g(this,Fn)[n+2]} ${g(this,Fn)[n+3]} ${g(this,Fn)[n+4]} ${g(this,Fn)[n+5]}`)}return r.push("Z"),r.join(" ")}serialize([r,n,i,a],s){const o=i-r,l=a-n;let u,c;switch(s){case 0:u=Qe._rescale(g(this,Fn),r,a,o,-l),c=Qe._rescale(g(this,ao),r,a,o,-l);break;case 90:u=Qe._rescaleAndSwap(g(this,Fn),r,n,o,l),c=Qe._rescaleAndSwap(g(this,ao),r,n,o,l);break;case 180:u=Qe._rescale(g(this,Fn),i,n,-o,l),c=Qe._rescale(g(this,ao),i,n,-o,l);break;case 270:u=Qe._rescaleAndSwap(g(this,Fn),i,a,-o,-l),c=Qe._rescaleAndSwap(g(this,ao),i,a,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return g(this,kg)}newOutliner(r,n,i,a,s,o=0){return new n2(r,n,i,a,s,o)}getNewOutline(r,n){const[i,a,s,o]=g(this,kg),[l,u,c,f]=g(this,Cb),h=s*c,d=o*f,p=i*c+l,m=a*f+u,v=this.newOutliner({x:g(this,ao)[0]*h+p,y:g(this,ao)[1]*d+m},g(this,Cb),g(this,kE),r,g(this,OE),n??g(this,vf));for(let y=2;y<g(this,ao).length;y+=2)v.add({x:g(this,ao)[y]*h+p,y:g(this,ao)[y+1]*d+m});return v.getOutlines()}}Cb=new WeakMap,kg=new WeakMap,vf=new WeakMap,OE=new WeakMap,ao=new WeakMap,kE=new WeakMap,Fn=new WeakMap,YP=new WeakSet,$ae=function(r){const n=g(this,Fn);let i=n[4],a=n[5];const s=[i,a,i,a];let o=i,l=a,u=i,c=a;const f=r?Math.max:Math.min,h=new Float32Array(4);for(let p=6,m=n.length;p<m;p+=6){const v=n[p+4],y=n[p+5];isNaN(n[p])?(et.pointBoundingBox(v,y,s),l>y?(o=v,l=y):l===y&&(o=f(o,v)),c<y?(u=v,c=y):c===y&&(u=f(u,v))):(h[0]=h[1]=1/0,h[2]=h[3]=-1/0,et.bezierBoundingBox(i,a,...n.slice(p,p+6),h),et.rectBoundingBox(h[0],h[1],h[2],h[3],s),l>h[1]?(o=h[0],l=h[1]):l===h[1]&&(o=f(o,h[0])),c<h[3]?(u=h[2],c=h[3]):c===h[3]&&(u=f(u,h[2]))),i=v,a=y}const d=g(this,kg);d[0]=s[0]-g(this,vf),d[1]=s[1]-g(this,vf),d[2]=s[2]-s[0]+2*g(this,vf),d[3]=s[3]-s[1]+2*g(this,vf),this.firstPoint=[o,l],this.lastPoint=[u,c]};var RE,FE,LE,Id,Wl,cs,jae,RD,Vae,Uae,TL;class CL{constructor(e,r=0,n=0,i=!0){$(this,cs);$(this,RE);$(this,FE);$(this,LE);$(this,Id,[]);$(this,Wl,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:m,y:v,width:y,height:w}of e){const b=Math.floor((m-r)/s)*s,_=Math.ceil((m+y+r)/s)*s,x=Math.floor((v-r)/s)*s,A=Math.ceil((v+w+r)/s)*s,E=[b,x,A,!0],S=[_,x,A,!1];g(this,Id).push(E,S),et.rectBoundingBox(b,x,_,A,a)}const o=a[2]-a[0]+2*n,l=a[3]-a[1]+2*n,u=a[0]-n,c=a[1]-n;let f=i?-1/0:1/0,h=1/0;const d=g(this,Id).at(i?-1:-2),p=[d[0],d[2]];for(const m of g(this,Id)){const[v,y,w,b]=m;!b&&i?y<h?(h=y,f=v):y===h&&(f=Math.max(f,v)):b&&!i&&(y<h?(h=y,f=v):y===h&&(f=Math.min(f,v))),m[0]=(v-u)/o,m[1]=(y-c)/l,m[2]=(w-c)/l}R(this,RE,new Float32Array([u,c,o,l])),R(this,FE,[f,h]),R(this,LE,p)}getOutlines(){g(this,Id).sort((r,n)=>r[0]-n[0]||r[1]-n[1]||r[2]-n[2]);const e=[];for(const r of g(this,Id))r[3]?(e.push(...W(this,cs,TL).call(this,r)),W(this,cs,Vae).call(this,r)):(W(this,cs,Uae).call(this,r),e.push(...W(this,cs,TL).call(this,r)));return W(this,cs,jae).call(this,e)}}RE=new WeakMap,FE=new WeakMap,LE=new WeakMap,Id=new WeakMap,Wl=new WeakMap,cs=new WeakSet,jae=function(e){const r=[],n=new Set;for(const s of e){const[o,l,u]=s;r.push([o,l,s],[o,u,s])}r.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=r.length;s<o;s+=2){const l=r[s][2],u=r[s+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let a;for(;n.size>0;){const s=n.values().next().value;let[o,l,u,c,f]=s;n.delete(s);let h=o,d=l;for(a=[o,u],i.push(a);;){let p;if(n.has(c))p=c;else if(n.has(f))p=f;else break;n.delete(p),[o,l,u,c,f]=p,h!==o&&(a.push(h,d,o,d===l?l:u),h=o),d=d===l?u:l}a.push(h,d)}return new cNe(i,g(this,RE),g(this,FE),g(this,LE))},RD=function(e){const r=g(this,Wl);let n=0,i=r.length-1;for(;n<=i;){const a=n+i>>1,s=r[a][0];if(s===e)return a;s<e?n=a+1:i=a-1}return i+1},Vae=function([,e,r]){const n=W(this,cs,RD).call(this,e);g(this,Wl).splice(n,0,[e,r])},Uae=function([,e,r]){const n=W(this,cs,RD).call(this,e);for(let i=n;i<g(this,Wl).length;i++){const[a,s]=g(this,Wl)[i];if(a!==e)break;if(a===e&&s===r){g(this,Wl).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,s]=g(this,Wl)[i];if(a!==e)break;if(a===e&&s===r){g(this,Wl).splice(i,1);return}}},TL=function(e){const[r,n,i]=e,a=[[r,n,i]],s=W(this,cs,RD).call(this,i);for(let o=0;o<s;o++){const[l,u]=g(this,Wl)[o];for(let c=0,f=a.length;c<f;c++){const[,h,d]=a[c];if(!(u<=h||d<=l)){if(h>=l){if(d>u)a[c][1]=u;else{if(f===1)return[];a.splice(c,1),c--,f--}continue}a[c][2]=l,d>u&&a.push([r,u,d])}}}return a};var BE,Tb;class cNe extends Qe{constructor(r,n,i,a){super();$(this,BE);$(this,Tb);R(this,Tb,r),R(this,BE,n),this.firstPoint=i,this.lastPoint=a}toSVGPath(){const r=[];for(const n of g(this,Tb)){let[i,a]=n;r.push(`M${i} ${a}`);for(let s=2;s<n.length;s+=2){const o=n[s],l=n[s+1];o===i?(r.push(`V${l}`),a=l):l===a&&(r.push(`H${o}`),i=o)}r.push("Z")}return r.join(" ")}serialize([r,n,i,a],s){const o=[],l=i-r,u=a-n;for(const c of g(this,Tb)){const f=new Array(c.length);for(let h=0;h<c.length;h+=2)f[h]=r+c[h]*l,f[h+1]=a-c[h+1]*u;o.push(f)}return o}get box(){return g(this,BE)}get classNamesForOutlining(){return["highlightOutline"]}}BE=new WeakMap,Tb=new WeakMap;class DL extends n2{newFreeDrawOutline(e,r,n,i,a,s){return new fNe(e,r,n,i,a,s)}}class fNe extends Bae{newOutliner(e,r,n,i,a,s=0){return new DL(e,r,n,i,a,s)}}var Db,$E,yf,Rg,jE,Ss,VE,UE,Fg,so,oo,Ji,Nb,Pb,Pa,Mb,rl,zE,Bt,NL,FD,zae,qae,Hae,PL,mm,ul,_y,Wae,LD,BD,Gae,Kae,Xae,Yae,Qae;const ur=class ur extends Wr{constructor(r){super({...r,name:"highlightEditor"});$(this,Bt);$(this,Db,null);$(this,$E,0);$(this,yf);$(this,Rg,null);$(this,jE,null);$(this,Ss,null);$(this,VE,null);$(this,UE,0);$(this,Fg,null);$(this,so,null);$(this,oo,null);$(this,Ji,!1);$(this,Nb,null);$(this,Pb,null);$(this,Pa,null);$(this,Mb,"");$(this,rl);$(this,zE,"");this.color=r.color||ur._defaultColor,R(this,rl,r.thickness||ur._defaultThickness),this.opacity=r.opacity||ur._defaultOpacity,R(this,yf,r.boxes||null),R(this,zE,r.methodOfCreation||""),R(this,Mb,r.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",r.highlightId>-1?(R(this,Ji,!0),W(this,Bt,FD).call(this,r),W(this,Bt,mm).call(this)):g(this,yf)&&(R(this,Db,r.anchorNode),R(this,$E,r.anchorOffset),R(this,VE,r.focusNode),R(this,UE,r.focusOffset),W(this,Bt,NL).call(this),W(this,Bt,mm).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const r=ur.prototype;return Dt(this,"_keyboardManager",new gS([[["ArrowLeft","mac+ArrowLeft"],r._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],r._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],r._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],r._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,Ji)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:g(this,rl),methodOfCreation:g(this,zE)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(r){return{numberOfColors:r.get("color").size}}static initialize(r,n){var i;Wr.initialize(r,n),ur._defaultColor||(ur._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(r,n){switch(r){case Zt.HIGHLIGHT_COLOR:ur._defaultColor=n;break;case Zt.HIGHLIGHT_THICKNESS:ur._defaultThickness=n;break}}translateInPage(r,n){}get toolbarPosition(){return g(this,Pb)}get commentButtonPosition(){return g(this,Nb)}updateParams(r,n){switch(r){case Zt.HIGHLIGHT_COLOR:W(this,Bt,zae).call(this,n);break;case Zt.HIGHLIGHT_THICKNESS:W(this,Bt,qae).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Zt.HIGHLIGHT_COLOR,ur._defaultColor],[Zt.HIGHLIGHT_THICKNESS,ur._defaultThickness]]}get propertiesToUpdate(){return[[Zt.HIGHLIGHT_COLOR,this.color||ur._defaultColor],[Zt.HIGHLIGHT_THICKNESS,g(this,rl)||ur._defaultThickness],[Zt.HIGHLIGHT_FREE,g(this,Ji)]]}onUpdatedColor(){var r,n;(r=this.parent)==null||r.drawLayer.updateProperties(g(this,oo),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=g(this,jE))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",R(this,jE,new e2({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(W(this,Bt,BD).call(this))}getBaseTranslation(){return[0,0]}getRect(r,n){return super.getRect(r,n,W(this,Bt,BD).call(this))}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),r&&this.div.focus()}remove(){W(this,Bt,PL).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,Bt,mm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?W(this,Bt,PL).call(this):r&&(W(this,Bt,mm).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),this.show(this._isVisible),n&&this.select()}rotate(r){var a,s,o;const{drawLayer:n}=this.parent;let i;g(this,Ji)?(r=(r-this.rotation+360)%360,i=W(a=ur,ul,_y).call(a,g(this,so).box,r)):i=W(s=ur,ul,_y).call(s,[this.x,this.y,this.width,this.height],r),n.updateProperties(g(this,oo),{bbox:i,root:{"data-main-rotation":r}}),n.updateProperties(g(this,Pa),{bbox:W(o=ur,ul,_y).call(o,g(this,Ss).box,r),root:{"data-main-rotation":r}})}render(){if(this.div)return this.div;const r=super.render();g(this,Mb)&&(r.setAttribute("aria-label",g(this,Mb)),r.setAttribute("role","mark")),g(this,Ji)?r.classList.add("free"):this.div.addEventListener("keydown",W(this,Bt,Wae).bind(this),{signal:this._uiManager._signal});const n=R(this,Fg,document.createElement("div"));return r.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=g(this,Rg),this.setDims(),gie(this,g(this,Fg),["pointerover","pointerleave"]),this.enableEditing(),r}pointerover(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!0}})}pointerleave(){var r;this.isSelected||(r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!1}})}_moveCaret(r){switch(this.parent.unselect(this),r){case 0:case 2:W(this,Bt,LD).call(this,!0);break;case 1:case 3:W(this,Bt,LD).call(this,!1);break}}select(){var r;super.select(),g(this,Pa)&&((r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var r;super.unselect(),g(this,Pa)&&((r=this.parent)==null||r.drawLayer.updateProperties(g(this,Pa),{rootClass:{selected:!1}}),g(this,Ji)||W(this,Bt,LD).call(this,!1))}get _mustFixPosition(){return!g(this,Ji)}show(r=this._isVisible){super.show(r),this.parent&&(this.parent.drawLayer.updateProperties(g(this,oo),{rootClass:{hidden:!r}}),this.parent.drawLayer.updateProperties(g(this,Pa),{rootClass:{hidden:!r}}))}static startHighlighting(r,n,{target:i,x:a,y:s}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),f=new AbortController,h=r.combinedSignal(f),d=p=>{f.abort(),W(this,ul,Yae).call(this,r,p)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Dn,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",wl,{signal:h}),i.addEventListener("pointermove",W(this,ul,Xae).bind(this,r),{signal:h}),this._freeHighlight=new DL({x:a,y:s},[o,l,u,c],r.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(r,n,i){var m,v,y,w;let a=null;if(r instanceof Sae){const{data:{quadPoints:b,rect:_,rotation:x,id:A,color:E,opacity:S,popupRef:C,richText:D,contentsObj:N,creationDate:P,modificationDate:M},parent:{page:{pageNumber:j}}}=r;a=r={annotationType:Ot.HIGHLIGHT,color:Array.from(E),opacity:S,quadPoints:b,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:x,annotationElementId:A,id:A,deleted:!1,popupRef:C,richText:D,comment:(N==null?void 0:N.str)||null,creationDate:P,modificationDate:M}}else if(r instanceof n6){const{data:{inkLists:b,rect:_,rotation:x,id:A,color:E,borderStyle:{rawWidth:S},popupRef:C,richText:D,contentsObj:N,creationDate:P,modificationDate:M},parent:{page:{pageNumber:j}}}=r;a=r={annotationType:Ot.HIGHLIGHT,color:Array.from(E),thickness:S,inkLists:b,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:x,annotationElementId:A,id:A,deleted:!1,popupRef:C,richText:D,comment:(N==null?void 0:N.str)||null,creationDate:P,modificationDate:M}}const{color:s,quadPoints:o,inkLists:l,opacity:u}=r,c=await super.deserialize(r,n,i);c.color=et.makeHexColor(...s),c.opacity=u||1,l&&R(c,rl,r.thickness),c._initialData=a,r.comment&&c.setCommentData(r);const[f,h]=c.pageDimensions,[d,p]=c.pageTranslation;if(o){const b=R(c,yf,[]);for(let _=0;_<o.length;_+=8)b.push({x:(o[_]-d)/f,y:1-(o[_+1]-p)/h,width:(o[_+2]-o[_])/f,height:(o[_+1]-o[_+5])/h});W(m=c,Bt,NL).call(m),W(v=c,Bt,mm).call(v),c.rotate(c.rotation)}else if(l){R(c,Ji,!0);const b=l[0],_={x:b[0]-d,y:h-(b[1]-p)},x=new DL(_,[0,0,f,h],1,g(c,rl)/2,!0,.001);for(let S=0,C=b.length;S<C;S+=2)_.x=b[S]-d,_.y=h-(b[S+1]-p),x.add(_);const{id:A,clipPathId:E}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);W(y=c,Bt,FD).call(y,{highlightOutlines:x.getOutlines(),highlightId:A,clipPathId:E}),W(w=c,Bt,mm).call(w),c.rotate(c.parentRotation)}return c}serialize(r=!1){if(this.isEmpty()||r)return null;if(this.deleted)return this.serializeDeleted();const n=Wr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(r);return Object.assign(i,{color:n,opacity:this.opacity,thickness:g(this,rl),quadPoints:W(this,Bt,Gae).call(this),outlines:W(this,Bt,Kae).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!W(this,Bt,Qae).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Db=new WeakMap,$E=new WeakMap,yf=new WeakMap,Rg=new WeakMap,jE=new WeakMap,Ss=new WeakMap,VE=new WeakMap,UE=new WeakMap,Fg=new WeakMap,so=new WeakMap,oo=new WeakMap,Ji=new WeakMap,Nb=new WeakMap,Pb=new WeakMap,Pa=new WeakMap,Mb=new WeakMap,rl=new WeakMap,zE=new WeakMap,Bt=new WeakSet,NL=function(){const r=new CL(g(this,yf),.001);R(this,so,r.getOutlines()),[this.x,this.y,this.width,this.height]=g(this,so).box;const n=new CL(g(this,yf),.0025,.001,this._uiManager.direction==="ltr");R(this,Ss,n.getOutlines());const{firstPoint:i}=g(this,so);R(this,Nb,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:a}=g(this,Ss);R(this,Pb,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},FD=function({highlightOutlines:r,highlightId:n,clipPathId:i}){var h,d;if(R(this,so,r),R(this,Ss,r.getNewOutline(g(this,rl)/2+1.5,.0025)),n>=0)R(this,oo,n),R(this,Rg,i),this.parent.drawLayer.finalizeDraw(n,{bbox:r.box,path:{d:r.toSVGPath()}}),R(this,Pa,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:g(this,Ss).box,path:{d:g(this,Ss).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(g(this,oo),{bbox:W(h=ur,ul,_y).call(h,g(this,so).box,(p-this.rotation+360)%360),path:{d:r.toSVGPath()}}),this.parent.drawLayer.updateProperties(g(this,Pa),{bbox:W(d=ur,ul,_y).call(d,g(this,Ss).box,p),path:{d:g(this,Ss).toSVGPath()}})}const[s,o,l,u]=r.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-s,this.width=l*m/p,this.height=u*p/m;break}case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=s,this.width=l*m/p,this.height=u*p/m;break}}const{firstPoint:c}=r;R(this,Nb,[(c[0]-s)/l,(c[1]-o)/u]);const{lastPoint:f}=g(this,Ss);R(this,Pb,[(f[0]-s)/l,(f[1]-o)/u])},zae=function(r){const n=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,r,ur._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(r)},!0)},qae=function(r){const n=g(this,rl),i=a=>{R(this,rl,a),W(this,Bt,Hae).call(this,a)};this.addCommands({cmd:i.bind(this,r),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:r},!0)},Hae=function(r){g(this,Ji)&&(W(this,Bt,FD).call(this,{highlightOutlines:g(this,so).getNewOutline(r/2)}),this.fixAndSetPosition(),this.setDims())},PL=function(){g(this,oo)===null||!this.parent||(this.parent.drawLayer.remove(g(this,oo)),R(this,oo,null),this.parent.drawLayer.remove(g(this,Pa)),R(this,Pa,null))},mm=function(r=this.parent){g(this,oo)===null&&({id:ni(this,oo)._,clipPathId:ni(this,Rg)._}=r.drawLayer.draw({bbox:g(this,so).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:g(this,Ji)},path:{d:g(this,so).toSVGPath()}},!1,!0),R(this,Pa,r.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:g(this,Ji)},bbox:g(this,Ss).box,path:{d:g(this,Ss).toSVGPath()}},g(this,Ji))),g(this,Fg)&&(g(this,Fg).style.clipPath=g(this,Rg)))},ul=new WeakSet,_y=function([r,n,i,a],s){switch(s){case 90:return[1-n-a,r,a,i];case 180:return[1-r-i,1-n-a,i,a];case 270:return[n,1-r-i,a,i]}return[r,n,i,a]},Wae=function(r){ur._keyboardManager.exec(this,r)},LD=function(r){if(!g(this,Db))return;const n=window.getSelection();r?n.setPosition(g(this,Db),g(this,$E)):n.setPosition(g(this,VE),g(this,UE))},BD=function(){return g(this,Ji)?this.rotation:0},Gae=function(){if(g(this,Ji))return null;const[r,n]=this.pageDimensions,[i,a]=this.pageTranslation,s=g(this,yf),o=new Float32Array(s.length*8);let l=0;for(const{x:u,y:c,width:f,height:h}of s){const d=u*r+i,p=(1-c)*n+a;o[l]=o[l+4]=d,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=d+f*r,o[l+5]=o[l+7]=p-h*n,l+=8}return o},Kae=function(r){return g(this,so).serialize(r,W(this,Bt,BD).call(this))},Xae=function(r,n){this._freeHighlight.add(n)&&r.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Yae=function(r,n){this._freeHighlight.isEmpty()?r.drawLayer.remove(this._freeHighlightId):r.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Qae=function(r){const{color:n}=this._initialData;return this.hasEditedComment||r.color.some((i,a)=>i!==n[a])},$(ur,ul),Oe(ur,"_defaultColor",null),Oe(ur,"_defaultOpacity",1),Oe(ur,"_defaultThickness",12),Oe(ur,"_type","highlight"),Oe(ur,"_editorType",Ot.HIGHLIGHT),Oe(ur,"_freeHighlightId",-1),Oe(ur,"_freeHighlight",null),Oe(ur,"_freeHighlightClipId","");let i2=ur;var Lg;class Zae{constructor(){$(this,Lg,Object.create(null))}updateProperty(e,r){this[e]=r,this.updateSVGProperty(e,r)}updateProperties(e){if(e)for(const[r,n]of Object.entries(e))r.startsWith("_")||this.updateProperty(r,n)}updateSVGProperty(e,r){g(this,Lg)[e]=r}toSVGProperties(){const e=g(this,Lg);return R(this,Lg,Object.create(null)),{root:e}}reset(){R(this,Lg,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Br("Not implemented")}}Lg=new WeakMap;var lo,Ib,Ii,Bg,$g,ar,ML,IL,OL,bx,Jae,$D,wx,Ey;const Gt=class Gt extends Wr{constructor(r){super(r);$(this,ar);$(this,lo,null);$(this,Ib);Oe(this,"_colorPicker",null);Oe(this,"_drawId",null);R(this,Ib,r.mustBeCommitted||!1),this._addOutlines(r)}onUpdatedColor(){var r;(r=this._colorPicker)==null||r.update(this.color),super.onUpdatedColor()}_addOutlines(r){r.drawOutlines&&(W(this,ar,ML).call(this,r),W(this,ar,bx).call(this))}static _mergeSVGProperties(r,n){const i=new Set(Object.keys(r));for(const[a,s]of Object.entries(n))i.has(a)?Object.assign(r[a],s):r[a]=s;return r}static getDefaultDrawingOptions(r){Br("Not implemented")}static get typesMap(){Br("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(r,n){const i=this.typesMap.get(r);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(g(Gt,Ii).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(r,n){const i=this.constructor.typesMap.get(r);i&&this._updateProperty(r,i,n)}static get defaultPropertiesToUpdate(){const r=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)r.push([i,n[a]]);return r}get propertiesToUpdate(){const r=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)r.push([i,n[a]]);return r}_updateProperty(r,n,i){const a=this._drawingOptions,s=a[n],o=l=>{var c;a.updateProperty(n,l);const u=g(this,lo).updateProperty(n,l);u&&W(this,ar,wx).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),r===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:r,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,lo).getPathResizingSVGProperties(W(this,ar,$D).call(this)),{bbox:W(this,ar,Ey).call(this)}))}_onResized(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,lo).getPathResizedSVGProperties(W(this,ar,$D).call(this)),{bbox:W(this,ar,Ey).call(this)}))}_onTranslating(r,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:W(this,ar,Ey).call(this)})}_onTranslated(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(g(this,lo).getPathTranslatedSVGProperties(W(this,ar,$D).call(this),this.parentDimensions),{bbox:W(this,ar,Ey).call(this)}))}_onStartDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(r){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,g(this,Ib)&&(R(this,Ib,!1),this.commit(),this.parent.setSelected(this),r&&this.isOnScreen&&this.div.focus())}remove(){W(this,ar,OL).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,ar,bx).call(this),W(this,ar,wx).call(this,g(this,lo).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(r){var i;let n=!1;this.parent&&!r?(this._uiManager.removeShouldRescale(this),W(this,ar,OL).call(this)):r&&(this._uiManager.addShouldRescale(this),W(this,ar,bx).call(this,r),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(r),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties({bbox:W(this,ar,Ey).call(this)},g(this,lo).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&W(this,ar,wx).call(this,g(this,lo).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let r,n;this._isCopy&&(r=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(r,n),i}static createDrawerInstance(r,n,i,a,s){Br("Not implemented")}static startDrawing(r,n,i,a){var v;const{target:s,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=a;if(Sa.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:f}}=r,{width:h,height:d}=s.getBoundingClientRect(),p=R(Gt,Bg,new AbortController),m=r.combinedSignal(p);if(Sa.setPointer(c,u),window.addEventListener("pointerup",y=>{Sa.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:m}),window.addEventListener("pointercancel",y=>{Sa.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener("pointerdown",y=>{Sa.isSamePointerType(y.pointerType)&&(Sa.initializeAndAddPointerId(y.pointerId),g(Gt,Ii).isCancellable()&&(g(Gt,Ii).removeLastElement(),g(Gt,Ii).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",wl,{signal:m}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),s.addEventListener("touchmove",y=>{Sa.isSameTimeStamp(y.timeStamp)&&Dn(y)},{signal:m}),r.toggleDrawing(),(v=n._editorUndoBar)==null||v.hide(),g(Gt,Ii)){r.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ii).startNew(o,l,h,d,f));return}n.updateUIForDefaultProperties(this),R(Gt,Ii,this.createDrawerInstance(o,l,h,d,f)),R(Gt,$g,this.getDefaultDrawingOptions()),this._currentParent=r,{id:this._currentDrawId}=r.drawLayer.draw(this._mergeSVGProperties(g(Gt,$g).toSVGProperties(),g(Gt,Ii).defaultSVGProperties),!0,!1)}static _drawMove(r){if(Sa.isSameTimeStamp(r.timeStamp),!g(Gt,Ii))return;const{offsetX:n,offsetY:i,pointerId:a}=r;if(Sa.isSamePointerId(a)){if(Sa.isUsingMultiplePointers()){this._endDraw(r);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ii).add(n,i)),Sa.setTimeStamp(r.timeStamp),Dn(r)}}static _cleanup(r){r&&(this._currentDrawId=-1,this._currentParent=null,R(Gt,Ii,null),R(Gt,$g,null),Sa.clearPointerType(),Sa.clearTimeStamp()),g(Gt,Bg)&&(g(Gt,Bg).abort(),R(Gt,Bg,null),Sa.clearPointerIds())}static _endDraw(r){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(r==null?void 0:r.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,g(Gt,Ii).end(r.offsetX,r.offsetY)),this.supportMultipleDrawings){const i=g(Gt,Ii),a=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Zt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(r){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Zt.DRAW_STEP),!g(Gt,Ii).isEmpty()){const{pageDimensions:[i,a],scale:s}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:g(Gt,Ii).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:g(Gt,$g),mustBeCommitted:!r});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(r){}static deserializeDraw(r,n,i,a,s,o){Br("Not implemented")}static async deserialize(r,n,i){var f,h;const{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,a,s,this._INNER_MARGIN,r),c=await super.deserialize(r,n,i);return c.createDrawingOptions(r),W(f=c,ar,ML).call(f,{drawOutlines:u}),W(h=c,ar,bx).call(h),c.onScaleChanging(),c.rotate(),c}serializeDraw(r){const[n,i]=this.pageTranslation,[a,s]=this.pageDimensions;return g(this,lo).serialize([n,i,a,s],r)}renderAnnotationElement(r){return r.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};lo=new WeakMap,Ib=new WeakMap,Ii=new WeakMap,Bg=new WeakMap,$g=new WeakMap,ar=new WeakSet,ML=function({drawOutlines:r,drawId:n,drawingOptions:i}){R(this,lo,r),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,r.defaultProperties)):this._drawId=W(this,ar,IL).call(this,r,this.parent),W(this,ar,wx).call(this,r.box)},IL=function(r,n){const{id:i}=n.drawLayer.draw(Gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),r.defaultSVGProperties),!1,!1);return i},OL=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bx=function(r=this.parent){if(!(this._drawId!==null&&this.parent===r)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,r.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=W(this,ar,IL).call(this,g(this,lo),r)}},Jae=function([r,n,i,a]){const{parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[n,1-r,i*(o/s),a*(s/o)];case 180:return[1-r,1-n,i,a];case 270:return[1-n,r,i*(o/s),a*(s/o)];default:return[r,n,i,a]}},$D=function(){const{x:r,y:n,width:i,height:a,parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[1-n,r,i*(s/o),a*(o/s)];case 180:return[1-r,1-n,i,a];case 270:return[n,1-r,i*(s/o),a*(o/s)];default:return[r,n,i,a]}},wx=function(r){[this.x,this.y,this.width,this.height]=W(this,ar,Jae).call(this,r),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ey=function(){const{x:r,y:n,width:i,height:a,rotation:s,parentRotation:o,parentDimensions:[l,u]}=this;switch((s*4+o)/90){case 1:return[1-n-a,r,a,i];case 2:return[1-r-i,1-n-a,i,a];case 3:return[n,1-r-i,a,i];case 4:return[r,n-i*(l/u),a*(u/l),i*(l/u)];case 5:return[1-n,r,i*(l/u),a*(u/l)];case 6:return[1-r-a*(u/l),1-n,a*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-r-a*(u/l),i*(l/u),a*(u/l)];case 8:return[r-i,n-a,i,a];case 9:return[1-n,r-i,a,i];case 10:return[1-r,1-n,i,a];case 11:return[n-a,1-r,a,i];case 12:return[r-a*(u/l),n,a*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),r-a*(u/l),i*(l/u),a*(u/l)];case 14:return[1-r,1-n-i*(l/u),a*(u/l),i*(l/u)];case 15:return[n,1-r,i*(l/u),a*(u/l)];default:return[r,n,i,a]}},Oe(Gt,"_currentDrawId",-1),Oe(Gt,"_currentParent",null),$(Gt,Ii,null),$(Gt,Bg,null),$(Gt,$g,null),Oe(Gt,"_INNER_MARGIN",3);let a2=Gt;var Yu,Oi,ki,jg,Ob,Xa,ea,nl,Vg,Ug,zg,kb,jD;class hNe{constructor(e,r,n,i,a,s){$(this,kb);$(this,Yu,new Float64Array(6));$(this,Oi);$(this,ki);$(this,jg);$(this,Ob);$(this,Xa);$(this,ea,"");$(this,nl,0);$(this,Vg,new yS);$(this,Ug);$(this,zg);R(this,Ug,n),R(this,zg,i),R(this,jg,a),R(this,Ob,s),[e,r]=W(this,kb,jD).call(this,e,r);const o=R(this,Oi,[NaN,NaN,NaN,NaN,e,r]);R(this,Xa,[e,r]),R(this,ki,[{line:o,points:g(this,Xa)}]),g(this,Yu).set(o,0)}updateProperty(e,r){e==="stroke-width"&&R(this,Ob,r)}isEmpty(){return!g(this,ki)||g(this,ki).length===0}isCancellable(){return g(this,Xa).length<=10}add(e,r){[e,r]=W(this,kb,jD).call(this,e,r);const[n,i,a,s]=g(this,Yu).subarray(2,6),o=e-a,l=r-s;return Math.hypot(g(this,Ug)*o,g(this,zg)*l)<=2?null:(g(this,Xa).push(e,r),isNaN(n)?(g(this,Yu).set([a,s,e,r],2),g(this,Oi).push(NaN,NaN,NaN,NaN,e,r),{path:{d:this.toSVGPath()}}):(isNaN(g(this,Yu)[0])&&g(this,Oi).splice(6,6),g(this,Yu).set([n,i,a,s,e,r],0),g(this,Oi).push(...Qe.createBezierPoints(n,i,a,s,e,r)),{path:{d:this.toSVGPath()}}))}end(e,r){const n=this.add(e,r);return n||(g(this,Xa).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,r,n,i,a){R(this,Ug,n),R(this,zg,i),R(this,jg,a),[e,r]=W(this,kb,jD).call(this,e,r);const s=R(this,Oi,[NaN,NaN,NaN,NaN,e,r]);R(this,Xa,[e,r]);const o=g(this,ki).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),g(this,ki).push({line:s,points:g(this,Xa)}),g(this,Yu).set(s,0),R(this,nl,0),this.toSVGPath(),null}getLastElement(){return g(this,ki).at(-1)}setLastElement(e){return g(this,ki)?(g(this,ki).push(e),R(this,Oi,e.line),R(this,Xa,e.points),R(this,nl,0),{path:{d:this.toSVGPath()}}):g(this,Vg).setLastElement(e)}removeLastElement(){if(!g(this,ki))return g(this,Vg).removeLastElement();g(this,ki).pop(),R(this,ea,"");for(let e=0,r=g(this,ki).length;e<r;e++){const{line:n,points:i}=g(this,ki)[e];R(this,Oi,n),R(this,Xa,i),R(this,nl,0),this.toSVGPath()}return{path:{d:g(this,ea)}}}toSVGPath(){const e=Qe.svgRound(g(this,Oi)[4]),r=Qe.svgRound(g(this,Oi)[5]);if(g(this,Xa).length===2)return R(this,ea,`${g(this,ea)} M ${e} ${r} Z`),g(this,ea);if(g(this,Xa).length<=6){const i=g(this,ea).lastIndexOf("M");R(this,ea,`${g(this,ea).slice(0,i)} M ${e} ${r}`),R(this,nl,6)}if(g(this,Xa).length===4){const i=Qe.svgRound(g(this,Oi)[10]),a=Qe.svgRound(g(this,Oi)[11]);return R(this,ea,`${g(this,ea)} L ${i} ${a}`),R(this,nl,12),g(this,ea)}const n=[];g(this,nl)===0&&(n.push(`M ${e} ${r}`),R(this,nl,6));for(let i=g(this,nl),a=g(this,Oi).length;i<a;i+=6){const[s,o,l,u,c,f]=g(this,Oi).slice(i,i+6).map(Qe.svgRound);n.push(`C${s} ${o} ${l} ${u} ${c} ${f}`)}return R(this,ea,g(this,ea)+n.join(" ")),R(this,nl,g(this,Oi).length),g(this,ea)}getOutlines(e,r,n,i){const a=g(this,ki).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),g(this,Vg).build(g(this,ki),e,r,n,g(this,jg),g(this,Ob),i),R(this,Yu,null),R(this,Oi,null),R(this,ki,null),R(this,ea,null),g(this,Vg)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Yu=new WeakMap,Oi=new WeakMap,ki=new WeakMap,jg=new WeakMap,Ob=new WeakMap,Xa=new WeakMap,ea=new WeakMap,nl=new WeakMap,Vg=new WeakMap,Ug=new WeakMap,zg=new WeakMap,kb=new WeakSet,jD=function(e,r){return Qe._normalizePoint(e,r,g(this,Ug),g(this,zg),g(this,jg))};var Ya,qE,HE,uo,Qu,Zu,Rb,Fb,qg,sa,Lc,ese,tse,rse;class yS extends Qe{constructor(){super(...arguments);$(this,sa);$(this,Ya);$(this,qE,0);$(this,HE);$(this,uo);$(this,Qu);$(this,Zu);$(this,Rb);$(this,Fb);$(this,qg)}build(r,n,i,a,s,o,l){R(this,Qu,n),R(this,Zu,i),R(this,Rb,a),R(this,Fb,s),R(this,qg,o),R(this,HE,l??0),R(this,uo,r),W(this,sa,tse).call(this)}get thickness(){return g(this,qg)}setLastElement(r){return g(this,uo).push(r),{path:{d:this.toSVGPath()}}}removeLastElement(){return g(this,uo).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const r=[];for(const{line:n}of g(this,uo)){if(r.push(`M${Qe.svgRound(n[4])} ${Qe.svgRound(n[5])}`),n.length===6){r.push("Z");continue}if(n.length===12&&isNaN(n[6])){r.push(`L${Qe.svgRound(n[10])} ${Qe.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[s,o,l,u,c,f]=n.subarray(i,i+6).map(Qe.svgRound);r.push(`C${s} ${o} ${l} ${u} ${c} ${f}`)}}return r.join("")}serialize([r,n,i,a],s){const o=[],l=[],[u,c,f,h]=W(this,sa,ese).call(this);let d,p,m,v,y,w,b,_,x;switch(g(this,Fb)){case 0:x=Qe._rescale,d=r,p=n+a,m=i,v=-a,y=r+u*i,w=n+(1-c-h)*a,b=r+(u+f)*i,_=n+(1-c)*a;break;case 90:x=Qe._rescaleAndSwap,d=r,p=n,m=i,v=a,y=r+c*i,w=n+u*a,b=r+(c+h)*i,_=n+(u+f)*a;break;case 180:x=Qe._rescale,d=r+i,p=n,m=-i,v=a,y=r+(1-u-f)*i,w=n+c*a,b=r+(1-u)*i,_=n+(c+h)*a;break;case 270:x=Qe._rescaleAndSwap,d=r+i,p=n+a,m=-i,v=-a,y=r+(1-c-h)*i,w=n+(1-u-f)*a,b=r+(1-c)*i,_=n+(1-u)*a;break}for(const{line:A,points:E}of g(this,uo))o.push(x(A,d,p,m,v,s?new Array(A.length):null)),l.push(x(E,d,p,m,v,s?new Array(E.length):null));return{lines:o,points:l,rect:[y,w,b,_]}}static deserialize(r,n,i,a,s,{paths:{lines:o,points:l},rotation:u,thickness:c}){const f=[];let h,d,p,m,v;switch(u){case 0:v=Qe._rescale,h=-r/i,d=n/a+1,p=1/i,m=-1/a;break;case 90:v=Qe._rescaleAndSwap,h=-n/a,d=-r/i,p=1/a,m=1/i;break;case 180:v=Qe._rescale,h=r/i+1,d=-n/a,p=-1/i,m=1/a;break;case 270:v=Qe._rescaleAndSwap,h=n/a+1,d=r/i+1,p=-1/a,m=-1/i;break}if(!o){o=[];for(const w of l){const b=w.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const _=new Float32Array(3*(b-2));o.push(_);let[x,A,E,S]=w.subarray(0,4);_.set([NaN,NaN,NaN,NaN,x,A],0);for(let C=4;C<b;C+=2){const D=w[C],N=w[C+1];_.set(Qe.createBezierPoints(x,A,E,S,D,N),(C-2)*3),[x,A,E,S]=[E,S,D,N]}}}for(let w=0,b=o.length;w<b;w++)f.push({line:v(o[w].map(_=>_??NaN),h,d,p,m),points:v(l[w].map(_=>_??NaN),h,d,p,m)});const y=new this.prototype.constructor;return y.build(f,i,a,1,u,c,s),y}get box(){return g(this,Ya)}updateProperty(r,n){return r==="stroke-width"?W(this,sa,rse).call(this,n):null}updateParentDimensions([r,n],i){const[a,s]=W(this,sa,Lc).call(this);R(this,Qu,r),R(this,Zu,n),R(this,Rb,i);const[o,l]=W(this,sa,Lc).call(this),u=o-a,c=l-s,f=g(this,Ya);return f[0]-=u,f[1]-=c,f[2]+=2*u,f[3]+=2*c,f}updateRotation(r){return R(this,qE,r),{path:{transform:this.rotationTransform}}}get viewBox(){return g(this,Ya).map(Qe.svgRound).join(" ")}get defaultProperties(){const[r,n]=g(this,Ya);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`}}}get rotationTransform(){const[,,r,n]=g(this,Ya);let i=0,a=0,s=0,o=0,l=0,u=0;switch(g(this,qE)){case 90:a=n/r,s=-r/n,l=r;break;case 180:i=-1,o=-1,l=r,u=n;break;case 270:a=-n/r,s=r/n,u=n;break;default:return""}return`matrix(${i} ${a} ${s} ${o} ${Qe.svgRound(l)} ${Qe.svgRound(u)})`}getPathResizingSVGProperties([r,n,i,a]){const[s,o]=W(this,sa,Lc).call(this),[l,u,c,f]=g(this,Ya);if(Math.abs(c-s)<=Qe.PRECISION||Math.abs(f-o)<=Qe.PRECISION){const v=r+i/2-(l+c/2),y=n+a/2-(u+f/2);return{path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const h=(i-2*s)/(c-2*s),d=(a-2*o)/(f-2*o),p=c/i,m=f/a;return{path:{"transform-origin":`${Qe.svgRound(l)} ${Qe.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Qe.svgRound(s)} ${Qe.svgRound(o)}) scale(${h} ${d}) translate(${Qe.svgRound(-s)} ${Qe.svgRound(-o)})`}}}getPathResizedSVGProperties([r,n,i,a]){const[s,o]=W(this,sa,Lc).call(this),l=g(this,Ya),[u,c,f,h]=l;if(l[0]=r,l[1]=n,l[2]=i,l[3]=a,Math.abs(f-s)<=Qe.PRECISION||Math.abs(h-o)<=Qe.PRECISION){const y=r+i/2-(u+f/2),w=n+a/2-(c+h/2);for(const{line:b,points:_}of g(this,uo))Qe._translate(b,y,w,b),Qe._translate(_,y,w,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(f-2*s),p=(a-2*o)/(h-2*o),m=-d*(u+s)+r+s,v=-p*(c+o)+n+o;if(d!==1||p!==1||m!==0||v!==0)for(const{line:y,points:w}of g(this,uo))Qe._rescale(y,m,v,d,p,y),Qe._rescale(w,m,v,d,p,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([r,n],i){const[a,s]=i,o=g(this,Ya),l=r-o[0],u=n-o[1];if(g(this,Qu)===a&&g(this,Zu)===s)for(const{line:c,points:f}of g(this,uo))Qe._translate(c,l,u,c),Qe._translate(f,l,u,f);else{const c=g(this,Qu)/a,f=g(this,Zu)/s;R(this,Qu,a),R(this,Zu,s);for(const{line:h,points:d}of g(this,uo))Qe._rescale(h,l,u,c,f,h),Qe._rescale(d,l,u,c,f,d);o[2]*=c,o[3]*=f}return o[0]=r,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(r)} ${Qe.svgRound(n)}`}}}get defaultSVGProperties(){const r=g(this,Ya);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(r[0])} ${Qe.svgRound(r[1])}`,transform:this.rotationTransform||null},bbox:r}}}Ya=new WeakMap,qE=new WeakMap,HE=new WeakMap,uo=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,Rb=new WeakMap,Fb=new WeakMap,qg=new WeakMap,sa=new WeakSet,Lc=function(r=g(this,qg)){const n=g(this,HE)+r/2*g(this,Rb);return g(this,Fb)%180===0?[n/g(this,Qu),n/g(this,Zu)]:[n/g(this,Zu),n/g(this,Qu)]},ese=function(){const[r,n,i,a]=g(this,Ya),[s,o]=W(this,sa,Lc).call(this,0);return[r+s,n+o,i-2*s,a-2*o]},tse=function(){const r=R(this,Ya,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of g(this,uo)){if(a.length<=12){for(let l=4,u=a.length;l<u;l+=6)et.pointBoundingBox(a[l],a[l+1],r);continue}let s=a[4],o=a[5];for(let l=6,u=a.length;l<u;l+=6){const[c,f,h,d,p,m]=a.subarray(l,l+6);et.bezierBoundingBox(s,o,c,f,h,d,p,m,r),s=p,o=m}}const[n,i]=W(this,sa,Lc).call(this);r[0]=Ja(r[0]-n,0,1),r[1]=Ja(r[1]-i,0,1),r[2]=Ja(r[2]+n,0,1),r[3]=Ja(r[3]+i,0,1),r[2]-=r[0],r[3]-=r[1]},rse=function(r){const[n,i]=W(this,sa,Lc).call(this);R(this,qg,r);const[a,s]=W(this,sa,Lc).call(this),[o,l]=[a-n,s-i],u=g(this,Ya);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class YM extends Zae{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Wr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,r){e==="stroke-width"&&(r??(r=this["stroke-width"]),r*=this._viewParameters.realScale),super.updateSVGProperty(e,r)}clone(){const e=new YM(this._viewParameters);return e.updateAll(this),e}}var QP,nse;const e0=class e0 extends a2{constructor(r){super({...r,name:"inkEditor"});$(this,QP);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(r,n){Wr.initialize(r,n),this._defaultDrawingOptions=new YM(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Zt.INK_THICKNESS,"stroke-width"],[Zt.INK_COLOR,"stroke"],[Zt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(r,n,i,a,s){return new hNe(r,n,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(r,n,i,a,s,o){return yS.deserialize(r,n,i,a,s,o)}static async deserialize(r,n,i){let a=null;if(r instanceof n6){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:f,opacity:h,borderStyle:{rawWidth:d},popupRef:p,richText:m,contentsObj:v,creationDate:y,modificationDate:w},parent:{page:{pageNumber:b}}}=r;a=r={annotationType:Ot.INK,color:Array.from(f),thickness:d,opacity:h,paths:{points:o},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:m,comment:(v==null?void 0:v.str)||null,creationDate:y,modificationDate:w}}const s=await super.deserialize(r,n,i);return s._initialData=a,r.comment&&s.setCommentData(r),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new t2(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Zt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:r,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(r,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const r=this._currentParent;r&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:r,thickness:n,opacity:i}){this._drawingOptions=e0.getDefaultDrawingOptions({stroke:et.makeHexColor(...r),"stroke-width":n,"stroke-opacity":i})}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,l=Object.assign(super.serialize(r),{color:Wr._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:n,points:i}});return this.addComment(l),r?(l.isCopy=!0,l):this.annotationElementId&&!W(this,QP,nse).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(r){if(this.deleted)return r.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return r.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};QP=new WeakSet,nse=function(r){const{color:n,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||r.color.some((o,l)=>o!==n[l])||r.thickness!==i||r.opacity!==a||r.pageIndex!==s},Oe(e0,"_type","ink"),Oe(e0,"_editorType",Ot.INK),Oe(e0,"_defaultDrawingOptions",null);let kL=e0;class RL extends yS{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const nT=8,O1=3;var Hg,dr,FL,Gl,ise,ase,LL,VD,sse,ose,lse,BL,$L,use;class Ef{static extractContoursFromText(e,{fontFamily:r,fontStyle:n,fontWeight:i},a,s,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const f=200,h=c.font=`${n} ${i} ${f}px ${r}`,{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:v,fontBoundingBoxAscent:y,fontBoundingBoxDescent:w,width:b}=c.measureText(e),_=1.5,x=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,b)*_),A=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||f,Math.abs(y)+Math.abs(w)||f)*_);u=new OffscreenCanvas(x,A),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=h,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,x,A),c.fillStyle="black",c.fillText(e,x*(_-1)/2,A*(3-_)/2);const E=W(this,dr,BL).call(this,c.getImageData(0,0,x,A).data),S=W(this,dr,lse).call(this,E),C=W(this,dr,$L).call(this,S),D=W(this,dr,LL).call(this,E,x,A,C);return this.processDrawnLines({lines:{curves:D,width:x,height:A},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,r,n,i,a){const[s,o,l]=W(this,dr,use).call(this,e),[u,c]=W(this,dr,ose).call(this,s,o,l,Math.hypot(o,l)*g(this,Hg).sigmaSFactor,g(this,Hg).sigmaR,g(this,Hg).kernelSize),f=W(this,dr,$L).call(this,c),h=W(this,dr,LL).call(this,u,o,l,f);return this.processDrawnLines({lines:{curves:h,width:o,height:l},pageWidth:r,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:r,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([r,n]=[n,r]);const{curves:l,width:u,height:c}=e,f=e.thickness??0,h=[],d=Math.min(r/u,n/c),p=d/r,m=d/n,v=[];for(const{points:w}of l){const b=s?W(this,dr,sse).call(this,w):w;if(!b)continue;v.push(b);const _=b.length,x=new Float32Array(_),A=new Float32Array(3*(_===2?2:_-2));if(h.push({line:A,points:x}),_===2){x[0]=b[0]*p,x[1]=b[1]*m,A.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[E,S,C,D]=b;E*=p,S*=m,C*=p,D*=m,x.set([E,S,C,D],0),A.set([NaN,NaN,NaN,NaN,E,S],0);for(let N=4;N<_;N+=2){const P=x[N]=b[N]*p,M=x[N+1]=b[N+1]*m;A.set(Qe.createBezierPoints(E,S,C,D,P,M),(N-2)*3),[E,S,C,D]=[C,D,P,M]}}if(h.length===0)return null;const y=o?new RL:new yS;return y.build(h,r,n,1,i,o?0:f,a),{outline:y,newCurves:v,areContours:o,thickness:f,width:u,height:c}}static async compressSignature({outlines:e,areContours:r,thickness:n,width:i,height:a}){let s=1/0,o=-1/0,l=0;for(const b of e){l+=b.length;for(let _=2,x=b.length;_<x;_++){const A=b[_]-b[_-2];s=Math.min(s,A),o=Math.max(o,A)}}let u;s>=-128&&o<=127?u=Int8Array:s>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,f=nT+O1*c,h=new Uint32Array(f);let d=0;h[d++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,h[d++]=0,h[d++]=i,h[d++]=a,h[d++]=r?0:1,h[d++]=Math.max(0,Math.floor(n??0)),h[d++]=c,h[d++]=u.BYTES_PER_ELEMENT;for(const b of e)h[d++]=b.length-2,h[d++]=b[0],h[d++]=b[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(h);const v=u.prototype.constructor;for(const b of e){const _=new v(b.length-2);for(let x=2,A=b.length;x<A;x++)_[x-2]=b[x]-b[x-2];m.write(_)}m.close();const y=await new Response(p.readable).arrayBuffer(),w=new Uint8Array(y);return oie(w)}static async decompressSignature(e){try{const r=DTe(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(r).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const b of n)s||(s=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),s.set(b,o),o+=b.length;const l=new Uint32Array(s.buffer,0,s.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],f=l[3],h=l[4]===0,d=l[5],p=l[6],m=l[7],v=[],y=(nT+O1*p)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(m){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(s.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(s.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(s.buffer,y);break}o=0;for(let b=0;b<p;b++){const _=l[O1*b+nT],x=new Float32Array(_+2);v.push(x);for(let A=0;A<O1-1;A++)x[A]=l[O1*b+nT+A+1];for(let A=0;A<_;A++)x[A+2]=x[A]+w[o++]}return{areContours:h,thickness:d,outlines:v,width:c,height:f}}catch(r){return Tt(`decompressSignature: ${r}`),null}}}Hg=new WeakMap,dr=new WeakSet,FL=function(e,r,n,i){return n-=e,i-=r,n===0?i>0?0:4:n===1?i+6:2-i},Gl=new WeakMap,ise=function(e,r,n,i,a,s,o){const l=W(this,dr,FL).call(this,n,i,a,s);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,f=g(this,Gl)[2*c],h=g(this,Gl)[2*c+1];if(e[(n+f)*r+(i+h)]!==0)return c}return-1},ase=function(e,r,n,i,a,s,o){const l=W(this,dr,FL).call(this,n,i,a,s);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,f=g(this,Gl)[2*c],h=g(this,Gl)[2*c+1];if(e[(n+f)*r+(i+h)]!==0)return c}return-1},LL=function(e,r,n,i){const a=e.length,s=new Int32Array(a);for(let c=0;c<a;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*r]=s[c*r+r-1]=0;for(let c=0;c<r;c++)s[c]=s[r*n-1-c]=0;let o=1,l;const u=[];for(let c=1;c<n-1;c++){l=1;for(let f=1;f<r-1;f++){const h=c*r+f,d=s[h];if(d===0)continue;let p=c,m=f;if(d===1&&s[h-1]===0)o+=1,m-=1;else if(d>=1&&s[h+1]===0)o+=1,m+=1,d>1&&(l=d);else{d!==1&&(l=Math.abs(d));continue}const v=[f,c],y=m===f+1,w={isHole:y,points:v,id:o,parent:0};u.push(w);let b;for(const N of u)if(N.id===l){b=N;break}b?b.isHole?w.parent=y?b.parent:l:w.parent=y?l:b.parent:w.parent=y?l:0;const _=W(this,dr,ise).call(this,s,r,c,f,p,m,0);if(_===-1){s[h]=-o,s[h]!==1&&(l=Math.abs(s[h]));continue}let x=g(this,Gl)[2*_],A=g(this,Gl)[2*_+1];const E=c+x,S=f+A;p=E,m=S;let C=c,D=f;for(;;){const N=W(this,dr,ase).call(this,s,r,C,D,p,m,1);x=g(this,Gl)[2*N],A=g(this,Gl)[2*N+1];const P=C+x,M=D+A;v.push(M,P);const j=C*r+D;if(s[j+1]===0?s[j]=-o:s[j]===1&&(s[j]=o),P===c&&M===f&&C===E&&D===S){s[h]!==1&&(l=Math.abs(s[h]));break}else p=C,m=D,C=P,D=M}}}return u},VD=function(e,r,n,i){if(n-r<=4){for(let E=r;E<n-2;E+=2)i.push(e[E],e[E+1]);return}const a=e[r],s=e[r+1],o=e[n-4]-a,l=e[n-3]-s,u=Math.hypot(o,l),c=o/u,f=l/u,h=c*s-f*a,d=l/o,p=1/u,m=Math.atan(d),v=Math.cos(m),y=Math.sin(m),w=p*(Math.abs(v)+Math.abs(y)),b=p*(1-w+w**2),_=Math.max(Math.atan(Math.abs(y+v)*b),Math.atan(Math.abs(y-v)*b));let x=0,A=r;for(let E=r+2;E<n-2;E+=2){const S=Math.abs(h-c*e[E+1]+f*e[E]);S>x&&(A=E,x=S)}x>(u*_)**2?(W(this,dr,VD).call(this,e,r,A+2,i),W(this,dr,VD).call(this,e,A,n,i)):i.push(a,s)},sse=function(e){const r=[],n=e.length;return W(this,dr,VD).call(this,e,0,n,r),r.push(e[n-2],e[n-1]),r.length<=4?null:r},ose=function(e,r,n,i,a,s){const o=new Float32Array(s**2),l=-2*i**2,u=s>>1;for(let m=0;m<s;m++){const v=(m-u)**2;for(let y=0;y<s;y++)o[m*s+y]=Math.exp((v+(y-u)**2)/l)}const c=new Float32Array(256),f=-2*a**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/f);const h=e.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let m=0;m<n;m++)for(let v=0;v<r;v++){const y=m*r+v,w=e[y];let b=0,_=0;for(let A=0;A<s;A++){const E=m+A-u;if(!(E<0||E>=n))for(let S=0;S<s;S++){const C=v+S-u;if(C<0||C>=r)continue;const D=e[E*r+C],N=o[A*s+S]*c[Math.abs(D-w)];b+=D*N,_+=N}}const x=d[y]=Math.round(b/_);p[x]++}return[d,p]},lse=function(e){const r=new Uint32Array(256);for(const n of e)r[n]++;return r},BL=function(e){const r=e.length,n=new Uint8ClampedArray(r>>2);let i=-1/0,a=1/0;for(let o=0,l=n.length;o<l;o++){const u=n[o]=e[o<<2];i=Math.max(i,u),a=Math.min(a,u)}const s=255/(i-a);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-a)*s;return n},$L=function(e){let r,n=-1/0,i=-1/0;const a=e.findIndex(l=>l!==0);let s=a,o=a;for(r=a;r<256;r++){const l=e[r];l>n&&(r-s>i&&(i=r-s,o=r-1),n=l,s=r)}for(r=o-1;r>=0&&!(e[r]>e[r+1]);r--);return r},use=function(e){const r=e,{width:n,height:i}=e,{maxDim:a}=g(this,Hg);let s=n,o=i;if(n>a||i>a){let h=n,d=i,p=Math.log2(Math.max(n,i)/a);const m=Math.floor(p);p=p===m?m-1:m;for(let y=0;y<p;y++){s=Math.ceil(h/2),o=Math.ceil(d/2);const w=new OffscreenCanvas(s,o);w.getContext("2d").drawImage(e,0,0,h,d,0,0,s,o),h=s,d=o,e!==r&&e.close(),e=w.transferToImageBitmap()}const v=Math.min(a/s,a/o);s=Math.round(s*v),o=Math.round(o*v)}const u=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,s,o);const c=u.getImageData(0,0,s,o).data;return[W(this,dr,BL).call(this,c),s,o]},$(Ef,dr),$(Ef,Hg,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),$(Ef,Gl,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class i6 extends Zae{constructor(){super(),super.updateProperties({fill:Wr._defaultLineColor,"stroke-width":0})}clone(){const e=new i6;return e.updateAll(this),e}}class a6 extends YM{constructor(e){super(e),super.updateProperties({stroke:Wr._defaultLineColor,"stroke-width":1})}clone(){const e=new a6(this._viewParameters);return e.updateAll(this),e}}var Od,Ju,kd,Wg;const Ws=class Ws extends a2{constructor(r){super({...r,mustBeCommitted:!0,name:"signatureEditor"});$(this,Od,!1);$(this,Ju,null);$(this,kd,null);$(this,Wg,null);this._willKeepAspectRatio=!0,R(this,kd,r.signatureData||null),R(this,Ju,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(r,n){Wr.initialize(r,n),this._defaultDrawingOptions=new i6,this._defaultDrawnSignatureOptions=new a6(n.viewParameters)}static getDefaultDrawingOptions(r){const n=this._defaultDrawingOptions.clone();return n.updateProperties(r),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!g(this,Ju)}}static computeTelemetryFinalData(r){const n=r.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let r,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,r=this.x,n=this.y),super.render(),this._drawId===null)if(g(this,kd)){const{lines:a,mustSmooth:s,areContours:o,description:l,uuid:u,heightInPage:c}=g(this,kd),{rawDims:{pageWidth:f,pageHeight:h},rotation:d}=this.parent.viewport,p=Ef.processDrawnLines({lines:a,pageWidth:f,pageHeight:h,rotation:d,innerMargin:Ws._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:g(this,Ju)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(r,n)),this.div}setUuid(r){R(this,Wg,r),this.addEditToolbar()}getUuid(){return g(this,Wg)}get description(){return g(this,Ju)}set description(r){R(this,Ju,r),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:r})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(r)}))}getSignaturePreview(){const{newCurves:r,areContours:n,thickness:i,width:a,height:s}=g(this,kd),o=Math.max(a,s),l=Ef.processDrawnLines({lines:{curves:r.map(u=>({points:u})),thickness:i,width:a,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(r,n,i,a){const{x:s,y:o}=this,{outline:l}=R(this,kd,r);R(this,Od,l instanceof RL),this.description=i;let u;g(this,Od)?u=Ws.getDefaultDrawingOptions():(u=Ws._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let f=n/c;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Ef.process(r,n,i,a,Ws._INNER_MARGIN)}getFromText(r,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return Ef.extractContoursFromText(r,n,i,a,s,Ws._INNER_MARGIN)}getDrawnSignature(r){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Ef.processDrawnLines({lines:r,pageWidth:n,pageHeight:i,rotation:a,innerMargin:Ws._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:r,thickness:n}){r?this._drawingOptions=Ws.getDefaultDrawingOptions():(this._drawingOptions=Ws._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(r=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(r),{_drawingOptions:{"stroke-width":a}}=this,s=Object.assign(super.serialize(r),{isSignature:!0,areContours:g(this,Od),color:[0,0,0],thickness:g(this,Od)?0:a});return this.addComment(s),r?(s.paths={lines:n,points:i},s.uuid=g(this,Wg),s.isCopy=!0):s.lines=n,g(this,Ju)&&(s.accessibilityData={type:"Figure",alt:g(this,Ju)}),s}static deserializeDraw(r,n,i,a,s,o){return o.areContours?RL.deserialize(r,n,i,a,s,o):yS.deserialize(r,n,i,a,s,o)}static async deserialize(r,n,i){var s;const a=await super.deserialize(r,n,i);return R(a,Od,r.areContours),a.description=((s=r.accessibilityData)==null?void 0:s.alt)||"",R(a,Wg,r.uuid),a}};Od=new WeakMap,Ju=new WeakMap,kd=new WeakMap,Wg=new WeakMap,Oe(Ws,"_type","signature"),Oe(Ws,"_editorType",Ot.SIGNATURE),Oe(Ws,"_defaultDrawingOptions",null);let jL=Ws;var rn,Ri,Rd,bf,Fd,Lb,wf,Gg,ec,co,Bb,sr,xx,Ax,UD,zD,qD,UL,HD,cse;class VL extends Wr{constructor(r){super({...r,name:"stampEditor"});$(this,sr);$(this,rn,null);$(this,Ri,null);$(this,Rd,null);$(this,bf,null);$(this,Fd,null);$(this,Lb,"");$(this,wf,null);$(this,Gg,!1);$(this,ec,null);$(this,co,!1);$(this,Bb,!1);R(this,bf,r.bitmapUrl),R(this,Fd,r.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(r,n){Wr.initialize(r,n)}static isHandlingMimeForPasting(r){return C3.includes(r)}static paste(r,n){n.pasteEditor({mode:Ot.STAMP},{bitmapFile:r.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var r;return{type:"stamp",hasAltText:!!((r=this.altTextData)!=null&&r.altText)}}static computeTelemetryFinalData(r){const n=r.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(r=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:o}=r||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var r;g(this,Ri)&&(R(this,rn,null),this._uiManager.imageManager.deleteId(g(this,Ri)),(r=g(this,wf))==null||r.remove(),R(this,wf,null),g(this,ec)&&(clearTimeout(g(this,ec)),R(this,ec,null))),super.remove()}rebuild(){if(!this.parent){g(this,Ri)&&W(this,sr,UD).call(this);return}super.rebuild(),this.div!==null&&(g(this,Ri)&&g(this,wf)===null&&W(this,sr,UD).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(r){this._isDraggable=!0,r&&this.div.focus()}isEmpty(){return!(g(this,Rd)||g(this,rn)||g(this,bf)||g(this,Fd)||g(this,Ri)||g(this,Gg))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let r,n;return this._isCopy&&(r=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),g(this,Gg)||(g(this,rn)?W(this,sr,zD).call(this):W(this,sr,UD).call(this)),this._isCopy&&this._moveAfterPaste(r,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(r,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(r,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(R(this,Ri,i),a&&R(this,rn,a),R(this,Gg,!1),W(this,sr,zD).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;g(this,ec)!==null&&clearTimeout(g(this,ec)),R(this,ec,setTimeout(()=>{R(this,ec,null),W(this,sr,UL).call(this)},200))}copyCanvas(r,n,i=!1){r||(r=224);const{width:a,height:s}=g(this,rn),o=new bc;let l=g(this,rn),u=a,c=s,f=null;if(n){if(a>n||s>n){const E=Math.min(n/a,n/s);u=Math.floor(a*E),c=Math.floor(s*E)}f=document.createElement("canvas");const d=f.width=Math.ceil(u*o.sx),p=f.height=Math.ceil(c*o.sy);g(this,co)||(l=W(this,sr,qD).call(this,d,p));const m=f.getContext("2d");m.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":kTe.isDarkMode&&(v="#8f8f9d",y="#42414d");const w=15,b=w*o.sx,_=w*o.sy,x=new OffscreenCanvas(b*2,_*2),A=x.getContext("2d");A.fillStyle=v,A.fillRect(0,0,b*2,_*2),A.fillStyle=y,A.fillRect(0,0,b,_),A.fillRect(b,_,b,_),m.fillStyle=m.createPattern(x,"repeat"),m.fillRect(0,0,d,p),m.drawImage(l,0,0,l.width,l.height,0,0,d,p)}let h=null;if(i){let d,p;if(o.symmetric&&l.width<r&&l.height<r)d=l.width,p=l.height;else if(l=g(this,rn),a>r||s>r){const y=Math.min(r/a,r/s);d=Math.floor(a*y),p=Math.floor(s*y),g(this,co)||(l=W(this,sr,qD).call(this,d,p))}const v=new OffscreenCanvas(d,p).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,d,p),h={width:d,height:p,data:v.getImageData(0,0,d,p).data}}return{canvas:f,width:u,height:c,imageData:h}}static async deserialize(r,n,i){var v;let a=null,s=!1;if(r instanceof Cae){const{data:{rect:y,rotation:w,id:b,structParent:_,popupRef:x,richText:A,contentsObj:E,creationDate:S,modificationDate:C},container:D,parent:{page:{pageNumber:N}},canvas:P}=r;let M,j;P?(delete r.canvas,{id:M,bitmap:j}=i.imageManager.getFromCanvas(D.id,P),P.remove()):(s=!0,r._hasNoCanvas=!0);const K=((v=await n._structTree.getAriaAttributes(`${zy}${b}`))==null?void 0:v.get("aria-label"))||"";a=r={annotationType:Ot.STAMP,bitmapId:M,bitmap:j,pageIndex:N-1,rect:y.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:_,popupRef:x,richText:A,comment:(E==null?void 0:E.str)||null,creationDate:S,modificationDate:C}}const o=await super.deserialize(r,n,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:f,isSvg:h,accessibilityData:d}=r;s?(i.addMissingCanvas(r.id,o),R(o,Gg,!0)):f&&i.imageManager.isValidId(f)?(R(o,Ri,f),u&&R(o,rn,u)):R(o,bf,c),R(o,co,h);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,d&&(o.altTextData=d),o._initialData=a,r.comment&&o.setCommentData(r),R(o,Bb,!!a),o}serialize(r=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(r),{bitmapId:g(this,Ri),isSvg:g(this,co)});if(this.addComment(i),r)return i.bitmapUrl=W(this,sr,HD).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=W(this,sr,cse).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const o=g(this,co)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(g(this,Ri)))n.stamps.set(g(this,Ri),{area:o,serialized:i}),i.bitmap=W(this,sr,HD).call(this,!1);else if(g(this,co)){const l=n.stamps.get(g(this,Ri));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=W(this,sr,HD).call(this,!1))}return i}renderAnnotationElement(r){return this.deleted?(r.hide(),null):(r.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}rn=new WeakMap,Ri=new WeakMap,Rd=new WeakMap,bf=new WeakMap,Fd=new WeakMap,Lb=new WeakMap,wf=new WeakMap,Gg=new WeakMap,ec=new WeakMap,co=new WeakMap,Bb=new WeakMap,sr=new WeakSet,xx=function(r,n=!1){if(!r){this.remove();return}R(this,rn,r.bitmap),n||(R(this,Ri,r.id),R(this,co,r.isSvg)),r.file&&R(this,Lb,r.file.name),W(this,sr,zD).call(this)},Ax=function(){if(R(this,Rd,null),this._uiManager.enableWaiting(!1),!!g(this,wf)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,rn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,rn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},UD=function(){if(g(this,Ri)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,Ri)).then(i=>W(this,sr,xx).call(this,i,!0)).finally(()=>W(this,sr,Ax).call(this));return}if(g(this,bf)){const i=g(this,bf);R(this,bf,null),this._uiManager.enableWaiting(!0),R(this,Rd,this._uiManager.imageManager.getFromUrl(i).then(a=>W(this,sr,xx).call(this,a)).finally(()=>W(this,sr,Ax).call(this)));return}if(g(this,Fd)){const i=g(this,Fd);R(this,Fd,null),this._uiManager.enableWaiting(!0),R(this,Rd,this._uiManager.imageManager.getFromFile(i).then(a=>W(this,sr,xx).call(this,a)).finally(()=>W(this,sr,Ax).call(this)));return}const r=document.createElement("input");r.type="file",r.accept=C3.join(",");const n=this._uiManager._signal;R(this,Rd,new Promise(i=>{r.addEventListener("change",async()=>{if(!r.files||r.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(r.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),W(this,sr,xx).call(this,a)}i()},{signal:n}),r.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>W(this,sr,Ax).call(this))),r.click()},zD=function(){var u;const{div:r}=this;let{width:n,height:i}=g(this,rn);const[a,s]=this.pageDimensions,o=.75;if(this.width)n=this.width*a,i=this.height*s;else if(n>o*a||i>o*s){const c=Math.min(o*a/n,o*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=R(this,wf,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=n/a,this.height=i/s,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(r.hidden=!1),W(this,sr,UL).call(this),g(this,Bb)||(this.parent.addUndoableEditor(this),R(this,Bb,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,Lb)&&this.div.setAttribute("aria-description",g(this,Lb)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},qD=function(r,n){const{width:i,height:a}=g(this,rn);let s=i,o=a,l=g(this,rn);for(;s>2*r||o>2*n;){const u=s,c=o;s>2*r&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(s,o);f.getContext("2d").drawImage(l,0,0,u,c,0,0,s,o),l=f.transferToImageBitmap()}return l},UL=function(){const[r,n]=this.parentDimensions,{width:i,height:a}=this,s=new bc,o=Math.ceil(i*r*s.sx),l=Math.ceil(a*n*s.sy),u=g(this,wf);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=g(this,co)?g(this,rn):W(this,sr,qD).call(this,o,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(c,0,0,c.width,c.height,0,0,o,l)},HD=function(r){if(r){if(g(this,co)){const a=this._uiManager.imageManager.getSvgUrl(g(this,Ri));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=g(this,rn),n.getContext("2d").drawImage(g(this,rn),0,0),n.toDataURL()}if(g(this,co)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*_p.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*_p.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,s);return o.getContext("2d").drawImage(g(this,rn),0,0,g(this,rn).width,g(this,rn).height,0,0,a,s),o.transferToImageBitmap()}return structuredClone(g(this,rn))},cse=function(r){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=r.pageIndex===n,s=(((o=r.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},Oe(VL,"_type","stamp"),Oe(VL,"_editorType",Ot.STAMP);var Kg,$b,Ld,Bd,xf,Cs,$d,jb,Vb,Kl,Af,Fi,_f,jd,Ub,it,Vd,Lr,qL,fse,Pu,HL,WL,WD;const Fl=class Fl{constructor({uiManager:e,pageIndex:r,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:u,l10n:c}){$(this,Lr);$(this,Kg);$(this,$b,!1);$(this,Ld,null);$(this,Bd,null);$(this,xf,null);$(this,Cs,new Map);$(this,$d,!1);$(this,jb,!1);$(this,Vb,!1);$(this,Kl,null);$(this,Af,null);$(this,Fi,null);$(this,_f,null);$(this,jd,null);$(this,Ub,-1);$(this,it);const f=[...g(Fl,Vd).values()];if(!Fl._initialized){Fl._initialized=!0;for(const h of f)h.initialize(c,e)}e.registerEditorTypes(f),R(this,it,e),this.pageIndex=r,this.div=n,R(this,Kg,a),R(this,Ld,s),this.viewport=u,R(this,Fi,l),this.drawLayer=o,this._structTree=i,g(this,it).addLayer(this)}get isEmpty(){return g(this,Cs).size===0}get isInvisible(){return this.isEmpty&&g(this,it).getMode()===Ot.NONE}updateToolbar(e){g(this,it).updateToolbar(e)}updateMode(e=g(this,it).getMode()){switch(W(this,Lr,WD).call(this),e){case Ot.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ot.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ot.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;if(r.toggle("nonEditing",!1),e===Ot.POPUP)r.toggle("commentEditing",!0);else{r.toggle("commentEditing",!1);for(const n of g(Fl,Vd).values())r.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var r;return e===((r=g(this,Fi))==null?void 0:r.div)}setEditingState(e){g(this,it).setEditingState(e)}addCommands(e){g(this,it).addCommands(e)}cleanUndoStack(e){g(this,it).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var r;(r=g(this,Ld))==null||r.togglePointerEvents(e)}async enable(){var n;R(this,Vb,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=g(this,jd))==null||n.abort(),R(this,jd,null);const e=new Set;for(const i of g(this,Lr,qL))i.enableEditing(),i.show(!0),i.annotationElementId&&(g(this,it).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const r=g(this,Ld);if(r)for(const i of r.getEditableAnnotations()){if(i.hide(),g(this,it).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}R(this,Vb,!1),g(this,it)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(R(this,jb,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),g(this,Fi)&&!g(this,jd)){R(this,jd,new AbortController);const a=g(this,it).combinedSignal(g(this,jd));g(this,Fi).div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:u,timeStamp:c}=s,f=g(this,Ub);if(c-f>500){R(this,Ub,c);return}R(this,Ub,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const d=document.elementsFromPoint(l,u);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let p;const m=new RegExp(`^${MA}[0-9]+$`);for(const y of d)if(m.test(y.id)){p=y.id;break}if(!p)return;const v=g(this,Cs).get(p);(v==null?void 0:v.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),v.dblclick(s))},{signal:a,capture:!0})}const e=g(this,Ld),r=[];if(e){const a=new Map,s=new Map;for(const l of g(this,Lr,qL)){if(l.disableEditing(),!l.annotationElementId){r.push(l);continue}if(l.serialize()!==null){a.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(g(this,it).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=s.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=a.get(u),c&&(g(this,it).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}W(this,Lr,WD).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of g(Fl,Vd).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(r),R(this,jb,!1)}getEditableAnnotation(e){var r;return((r=g(this,Ld))==null?void 0:r.getEditableAnnotation(e))||null}setActiveEditor(e){g(this,it).getActive()!==e&&g(this,it).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=g(this,Fi))!=null&&e.div&&!g(this,_f)){R(this,_f,new AbortController);const r=g(this,it).combinedSignal(g(this,_f));g(this,Fi).div.addEventListener("pointerdown",W(this,Lr,fse).bind(this),{signal:r}),g(this,Fi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=g(this,Fi))!=null&&e.div&&g(this,_f)&&(g(this,_f).abort(),R(this,_f,null),g(this,Fi).div.classList.remove("highlighting"))}enableClick(){if(g(this,Bd))return;R(this,Bd,new AbortController);const e=g(this,it).combinedSignal(g(this,Bd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){var e;(e=g(this,Bd))==null||e.abort(),R(this,Bd,null)}attach(e){g(this,Cs).set(e.id,e);const{annotationElementId:r}=e;r&&g(this,it).isDeletedAnnotationElement(r)&&g(this,it).removeDeletedAnnotationElement(e)}detach(e){var r;g(this,Cs).delete(e.id),(r=g(this,Kg))==null||r.removePointerInTextLayer(e.contentDiv),!g(this,jb)&&e.annotationElementId&&g(this,it).addDeletedAnnotationElement(e)}remove(e){this.detach(e),g(this,it).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var r;e.parent!==this&&(e.parent&&e.annotationElementId&&(g(this,it).addDeletedAnnotationElement(e),Wr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(r=e.parent)==null||r.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),g(this,it).addEditor(e),this.attach(e),!e.isAttachedToDOM){const r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!g(this,Vb)),g(this,it).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:r}=document;e.div.contains(r)&&!g(this,xf)&&(e._focusEventsAllowed=!1,R(this,xf,setTimeout(()=>{R(this,xf,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:g(this,it)._signal}),r.focus())},0))),e._structTreeParentId=(n=g(this,Kg))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const r=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:r,undo:n,mustExec:!1})}getEditorByUID(e){for(const r of g(this,Cs).values())if(r.uid===e)return r;return null}getNextId(){return g(this,it).getId()}combinedSignal(e){return g(this,it).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=g(this,Lr,Pu))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,r){this.updateToolbar(e),await g(this,it).updateMode(e.mode);const{offsetX:n,offsetY:i}=W(this,Lr,WL).call(this),a=this.getNextId(),s=W(this,Lr,HL).call(this,{parent:this,id:a,x:n,y:i,uiManager:g(this,it),isCentered:!0,...r});s&&this.add(s)}async deserialize(e){var r;return await((r=g(Fl,Vd).get(e.annotationType??e.annotationEditorType))==null?void 0:r.deserialize(e,this,g(this,it)))||null}createAndAddNewEditor(e,r,n={}){const i=this.getNextId(),a=W(this,Lr,HL).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:g(this,it),isCentered:r,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(W(this,Lr,WL).call(this),!0,e)}setSelected(e){g(this,it).setSelected(e)}toggleSelected(e){g(this,it).toggleSelected(e)}unselect(e){g(this,it).unselect(e)}pointerup(e){var i;const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!g(this,$d)||(R(this,$d,!1),(i=g(this,Lr,Pu))!=null&&i.isDrawer&&g(this,Lr,Pu).supportMultipleDrawings))return;if(!g(this,$b)){R(this,$b,!0);return}const n=g(this,it).getMode();if(n===Ot.STAMP||n===Ot.SIGNATURE){g(this,it).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(g(this,it).getMode()===Ot.HIGHLIGHT&&this.enableTextSelection(),g(this,$d)){R(this,$d,!1);return}const{isMac:r}=da.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(R(this,$d,!0),(i=g(this,Lr,Pu))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=g(this,it).getActive();R(this,$b,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),g(this,Kl)){g(this,Lr,Pu).startDrawing(this,g(this,it),!1,e);return}g(this,it).setCurrentDrawingSession(this),R(this,Kl,new AbortController);const r=g(this,it).combinedSignal(g(this,Kl));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(R(this,Af,null),this.commitOrRemove())},{signal:r}),g(this,Lr,Pu).startDrawing(this,g(this,it),!1,e)}pause(e){if(e){const{activeElement:r}=document;this.div.contains(r)&&R(this,Af,r);return}g(this,Af)&&setTimeout(()=>{var r;(r=g(this,Af))==null||r.focus(),R(this,Af,null)},0)}endDrawingSession(e=!1){return g(this,Kl)?(g(this,it).setCurrentDrawingSession(null),g(this,Kl).abort(),R(this,Kl,null),R(this,Af,null),g(this,Lr,Pu).endDrawing(e)):null}findNewParent(e,r,n){const i=g(this,it).findParent(r,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return g(this,Kl)?(this.endDrawingSession(),!0):!1}onScaleChanging(){g(this,Kl)&&g(this,Lr,Pu).onScaleChangingWhenDrawing(this)}destroy(){var e,r;this.commitOrRemove(),((e=g(this,it).getActive())==null?void 0:e.parent)===this&&(g(this,it).commitOrRemove(),g(this,it).setActiveEditor(null)),g(this,xf)&&(clearTimeout(g(this,xf)),R(this,xf,null));for(const n of g(this,Cs).values())(r=g(this,Kg))==null||r.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,g(this,Cs).clear(),g(this,it).removeLayer(this)}render({viewport:e}){this.viewport=e,vv(this.div,e);for(const r of g(this,it).getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){g(this,it).commitOrRemove(),W(this,Lr,WD).call(this);const r=this.viewport.rotation,n=e.rotation;if(this.viewport=e,vv(this.div,{rotation:n}),r!==n)for(const i of g(this,Cs).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return g(this,it).viewParameters.realScale}};Kg=new WeakMap,$b=new WeakMap,Ld=new WeakMap,Bd=new WeakMap,xf=new WeakMap,Cs=new WeakMap,$d=new WeakMap,jb=new WeakMap,Vb=new WeakMap,Kl=new WeakMap,Af=new WeakMap,Fi=new WeakMap,_f=new WeakMap,jd=new WeakMap,Ub=new WeakMap,it=new WeakMap,Vd=new WeakMap,Lr=new WeakSet,qL=function(){return g(this,Cs).size!==0?g(this,Cs).values():g(this,it).getEditors(this.pageIndex)},fse=function(e){g(this,it).unselectAll();const{target:r}=e;if(r===g(this,Fi).div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&g(this,Fi).div.contains(r)){const{isMac:n}=da.platform;if(e.button!==0||e.ctrlKey&&n)return;g(this,it).showAllEditors("highlight",!0,!0),g(this,Fi).div.classList.add("free"),this.toggleDrawing(),i2.startHighlighting(this,g(this,it).direction==="ltr",{target:g(this,Fi).div,x:e.x,y:e.y}),g(this,Fi).div.addEventListener("pointerup",()=>{g(this,Fi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,it)._signal}),e.preventDefault()}},Pu=function(){return g(Fl,Vd).get(g(this,it).getMode())},HL=function(e){const r=g(this,Lr,Pu);return r?new r.prototype.constructor(e):null},WL=function(){const{x:e,y:r,width:n,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,r),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,r+i),u=(a+o)/2-e,c=(s+l)/2-r,[f,h]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:f,offsetY:h}},WD=function(){for(const e of g(this,Cs).values())e.isEmpty()&&e.remove()},Oe(Fl,"_initialized",!1),$(Fl,Vd,new Map([EL,kL,VL,i2,jL].map(e=>[e._editorType,e])));let zL=Fl;var Xl,Qa,Xg,WE,ZP,hse,Sc,KL,dse,XL;const ai=class ai{constructor({pageIndex:e}){$(this,Sc);$(this,Xl,null);$(this,Qa,new Map);$(this,Xg,new Map);this.pageIndex=e}setParent(e){if(!g(this,Xl)){R(this,Xl,e);return}if(g(this,Xl)!==e){if(g(this,Qa).size>0)for(const r of g(this,Qa).values())r.remove(),e.append(r);R(this,Xl,e)}}static get _svgFactory(){return Dt(this,"_svgFactory",new r2)}draw(e,r=!1,n=!1){const i=ni(ai,WE)._++,a=W(this,Sc,KL).call(this),s=ai._svgFactory.createElement("defs");a.append(s);const o=ai._svgFactory.createElement("path");s.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),r&&g(this,Xg).set(i,o);const u=n?W(this,Sc,dse).call(this,s,l):null,c=ai._svgFactory.createElement("use");return a.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(a,e),g(this,Qa).set(i,a),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,r){const n=ni(ai,WE)._++,i=W(this,Sc,KL).call(this),a=ai._svgFactory.createElement("defs");i.append(a);const s=ai._svgFactory.createElement("path");a.append(s);const o=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(r){const f=ai._svgFactory.createElement("mask");a.append(f),l=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const h=ai._svgFactory.createElement("rect");f.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const d=ai._svgFactory.createElement("use");f.append(d),d.setAttribute("href",`#${o}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const u=ai._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),g(this,Qa).set(n,i),n}finalizeDraw(e,r){g(this,Xg).delete(e),this.updateProperties(e,r)}updateProperties(e,r){var l;if(!r)return;const{root:n,bbox:i,rootClass:a,path:s}=r,o=typeof e=="number"?g(this,Qa).get(e):e;if(o){if(n&&W(this,Sc,XL).call(this,o,n),i&&W(l=ai,ZP,hse).call(l,o,i),a){const{classList:u}=o;for(const[c,f]of Object.entries(a))u.toggle(c,f)}if(s){const c=o.firstElementChild.firstElementChild;W(this,Sc,XL).call(this,c,s)}}}updateParent(e,r){if(r===this)return;const n=g(this,Qa).get(e);n&&(g(r,Xl).append(n),g(this,Qa).delete(e),g(r,Qa).set(e,n))}remove(e){g(this,Xg).delete(e),g(this,Xl)!==null&&(g(this,Qa).get(e).remove(),g(this,Qa).delete(e))}destroy(){R(this,Xl,null);for(const e of g(this,Qa).values())e.remove();g(this,Qa).clear(),g(this,Xg).clear()}};Xl=new WeakMap,Qa=new WeakMap,Xg=new WeakMap,WE=new WeakMap,ZP=new WeakSet,hse=function(e,[r,n,i,a]){const{style:s}=e;s.top=`${100*n}%`,s.left=`${100*r}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},Sc=new WeakSet,KL=function(){const e=ai._svgFactory.create(1,1,!0);return g(this,Xl).append(e),e.setAttribute("aria-hidden",!0),e},dse=function(e,r){const n=ai._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${r}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=ai._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${r}`),a.classList.add("clip"),i},XL=function(e,r){for(const[n,i]of Object.entries(r))i===null?e.removeAttribute(n):e.setAttribute(n,i)},$(ai,ZP),$(ai,WE,0);let GL=ai;globalThis._pdfjsTestingUtils={HighlightOutliner:CL};globalThis.pdfjsLib={AbortException:Ap,AnnotationEditorLayer:zL,AnnotationEditorParamsType:Zt,AnnotationEditorType:Ot,AnnotationEditorUIManager:yv,AnnotationLayer:AL,AnnotationMode:Hh,AnnotationType:Hn,applyOpacity:FTe,build:zDe,ColorPicker:e2,createValidAbsoluteUrl:nie,CSSConstants:RTe,DOMSVGFactory:r2,DrawLayer:GL,FeatureTest:da,fetchData:dS,findContrastColor:LTe,getDocument:fae,getFilenameFromUrl:NTe,getPdfFilenameFromUrl:PTe,getRGB:mS,getUuid:sie,getXfaPageViewport:ITe,GlobalWorkerOptions:nc,ImageKind:dD,InvalidPDFException:E3,isDataScheme:KM,isPdfFile:Z5,isValidExplicitDest:GTe,MathClamp:Ja,noContextMenu:wl,normalizeUnicode:CTe,OPS:IA,OutputScale:bc,PasswordResponses:vTe,PDFDataRangeTransport:hae,PDFDateString:KN,PDFWorker:RA,PermissionFlag:gTe,PixelsPerInch:_p,RenderingCancelledException:Q5,renderRichText:uie,ResponseException:GN,setLayerDimensions:vv,shadow:Dt,SignatureExtractor:Ef,stopEvent:Dn,SupportedImageMimeTypes:C3,TextLayer:kA,TouchManager:YN,updateUrlHash:iie,Util:et,VerbosityLevel:HM,version:UDe,XfaLayer:lie};nc.workerSrc="/1201-project/pdf.worker.min.js";const dNe="",pNe="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function mNe(t){try{const e=await t.arrayBuffer(),r=await fae({data:e}).promise;let n="";const i=Math.min(r.numPages,15);console.log(`PDF  : ${r.numPages},  : ${i}`);for(let a=1;a<=i;a++)try{const o=await(await r.getPage(a)).getTextContent();let l="";for(const u of o.items)u.str&&u.str.trim()&&(l+=u.str+" ");l.trim()&&(n+=l+`
`,console.log(` ${a}   (${l.length})`))}catch(s){console.warn(` ${a}  :`,s);continue}if(!n.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${n.length}`),n}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function gNe(t){var e;try{const n=t.substring(0,1024),i=await fetch(pNe,{headers:{Authorization:`Bearer ${dNe}`},method:"POST",body:JSON.stringify({inputs:n})});if(!i.ok)throw new Error(`API : ${i.status}`);const a=await i.json();if(Array.isArray(a)&&((e=a[0])!=null&&e.summary_text))return a[0].summary_text;throw new Error("  ")}catch(r){throw console.error("AI  :",r),r}}function vNe(t){const e=t.match(/[^.!?]+[.!?]+/g)||[],r=["","","","","","",""];return e.map((a,s)=>{let o=r.reduce((l,u)=>l+(a.toLowerCase().includes(u)?1:0),0);return o+=1/(s+1),{sentence:a.trim(),score:o}}).sort((a,s)=>s.score-a.score).slice(0,3).map(a=>a.sentence).join(" ")||"  "}async function yNe(t){try{return{summary:await gNe(t),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:vNe(t),method:"Rule-based"}}}var bNe="firebase",wNe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cc(bNe,wNe,"app");function pse(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xNe=pse,mse=new rS("auth","Firebase",pse());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new o5("@firebase/auth");function ANe(t,...e){s2.logLevel<=Kt.WARN&&s2.warn(`Auth (${Ov}): ${t}`,...e)}function GD(t,...e){s2.logLevel<=Kt.ERROR&&s2.error(`Auth (${Ov}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t,...e){throw s6(t,...e)}function mc(t,...e){return s6(t,...e)}function gse(t,e,r){const n={...xNe(),[e]:r};return new rS("auth","Firebase",n).create(e,{appName:t.name})}function Bf(t){return gse(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s6(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return mse.create(t,...e)}function vt(t,e,...r){if(!t)throw s6(e,...r)}function Nf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw GD(e),new Error(e)}function nh(t,e){t||Nf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function _Ne(){return G7()==="http:"||G7()==="https:"}function G7(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ENe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_Ne()||BAe()||"connection"in navigator)?navigator.onLine:!0}function SNe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,r){this.shortDelay=e,this.longDelay=r,nh(r>e,"Short delay should be less than long delay!"),this.isMobile=RAe()||$Ae()}get(){return ENe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e){nh(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CNe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DNe=new bS(3e4,6e4);function $p(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jp(t,e,r,n,i={}){return yse(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=nS({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return LAe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Iv(t.emulatorConfig.host)&&(u.credentials="include"),vse.fetch()(await bse(t,t.config.apiHost,r,o),u)})}async function yse(t,e,r){t._canInitEmulator=!1;const n={...CNe,...e};try{const i=new PNe(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw iT(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw iT(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw iT(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw iT(t,"user-disabled",s);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw gse(t,c,u);fu(t,c)}}catch(i){if(i instanceof Tc)throw i;fu(t,"network-request-failed",{message:String(i)})}}async function wS(t,e,r,n,i={}){const a=await jp(t,e,r,n,i);return"mfaPendingCredential"in a&&fu(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function bse(t,e,r,n){const i=`${e}${r}?${n}`,a=t,s=a.config.emulator?o6(t.config,i):`${t.config.apiScheme}://${i}`;return TNe.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function NNe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PNe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(mc(this.auth,"network-request-failed")),DNe.get())})}}function iT(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=mc(t,e,n);return i.customData._tokenResponse=r,i}function K7(t){return t!==void 0&&t.enterprise!==void 0}class MNe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return NNe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function INe(t,e){return jp(t,"GET","/v2/recaptchaConfig",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ONe(t,e){return jp(t,"POST","/v1/accounts:delete",e)}async function o2(t,e){return jp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kNe(t,e=!1){const r=gi(t),n=await r.getIdToken(e),i=l6(n);vt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Wx(Yk(i.auth_time)),issuedAtTime:Wx(Yk(i.iat)),expirationTime:Wx(Yk(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Yk(t){return Number(t)*1e3}function l6(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return GD("JWT malformed, contained fewer than 3 sections"),null;try{const i=fre(r);return i?JSON.parse(i):(GD("Failed to decode base64 JWT payload"),null)}catch(i){return GD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X7(t){const e=l6(t);return vt(e,"internal-error"),vt(typeof e.exp<"u","internal-error"),vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Tc&&RNe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function RNe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wx(this.lastLoginAt),this.creationTime=Wx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t){var f;const e=t.auth,r=await t.getIdToken(),n=await FA(t,o2(e,{idToken:r}));vt(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=(f=i.providerUserInfo)!=null&&f.length?wse(i.providerUserInfo):[],s=BNe(t.providerData,a),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),u=o?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new QL(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function LNe(t){const e=gi(t);await l2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BNe(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function wse(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Ne(t,e){const r=await yse(t,{},async()=>{const n=nS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await bse(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Iv(t.emulatorConfig.host)&&(l.credentials="include"),vse.fetch()(s,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function jNe(t,e){return jp(t,"POST","/v2/accounts:revokeToken",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vt(e.idToken,"internal-error"),vt(typeof e.idToken<"u","internal-error"),vt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){vt(e.length!==0,"internal-error");const r=X7(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await $Ne(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new c0;return n&&(vt(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(vt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(vt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new c0,this.toJSON())}_performRefresh(){return Nf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){vt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ru{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new FNe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new QL(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await FA(this,this.stsTokenManager.getToken(this.auth,e));return vt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return kNe(this,e)}reload(){return LNe(this)}_assign(e){this!==e&&(vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ru({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await l2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yo(this.auth.app))return Promise.reject(Bf(this.auth));const e=await this.getIdToken();return await FA(this,ONe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,s=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,c=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:d,providerData:p,stsTokenManager:m}=r;vt(f&&m,e,"internal-error");const v=c0.fromJSON(this.name,m);vt(typeof f=="string",e,"internal-error"),Oh(n,e.name),Oh(i,e.name),vt(typeof h=="boolean",e,"internal-error"),vt(typeof d=="boolean",e,"internal-error"),Oh(a,e.name),Oh(s,e.name),Oh(o,e.name),Oh(l,e.name),Oh(u,e.name),Oh(c,e.name);const y=new ru({uid:f,auth:e,email:i,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:v,createdAt:u,lastLoginAt:c});return p&&Array.isArray(p)&&(y.providerData=p.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,r,n=!1){const i=new c0;i.updateFromServerResponse(r);const a=new ru({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await l2(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];vt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?wse(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new c0;o.updateFromIdToken(n);const l=new ru({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new QL(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Map;function Pf(t){nh(t instanceof Function,"Expected a class definition");let e=Y7.get(t);return e?(nh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y7.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xse{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}xse.type="NONE";const Q7=xse;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e,r){return`firebase:${t}:${e}:${r}`}class f0{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=KD(this.userKey,i.apiKey,a),this.fullPersistenceKey=KD("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await o2(this.auth,{idToken:e}).catch(()=>{});return r?ru._fromGetAccountInfoResponse(this.auth,r,e):null}return ru._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new f0(Pf(Q7),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Pf(Q7);const s=KD(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const c=await u._get(s);if(c){let f;if(typeof c=="string"){const h=await o2(e,{idToken:c}).catch(()=>{});if(!h)break;f=await ru._fromGetAccountInfoResponse(e,h,c)}else f=ru._fromJSON(e,c);u!==a&&(o=f),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new f0(a,e,n):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new f0(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sse(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ase(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tse(e))return"Blackberry";if(Dse(e))return"Webos";if(_se(e))return"Safari";if((e.includes("chrome/")||Ese(e))&&!e.includes("edge/"))return"Chrome";if(Cse(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Ase(t=ja()){return/firefox\//i.test(t)}function _se(t=ja()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ese(t=ja()){return/crios\//i.test(t)}function Sse(t=ja()){return/iemobile/i.test(t)}function Cse(t=ja()){return/android/i.test(t)}function Tse(t=ja()){return/blackberry/i.test(t)}function Dse(t=ja()){return/webos/i.test(t)}function u6(t=ja()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VNe(t=ja()){var e;return u6(t)&&!!((e=window.navigator)!=null&&e.standalone)}function UNe(){return jAe()&&document.documentMode===10}function Nse(t=ja()){return u6(t)||Cse(t)||Dse(t)||Tse(t)||/windows phone/i.test(t)||Sse(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(t,e=[]){let r;switch(t){case"Browser":r=Z7(ja());break;case"Worker":r=`${Z7(ja())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ov}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qNe(t,e={}){return jp(t,"GET","/v2/passwordPolicy",$p(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HNe=6;class WNe{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??HNe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GNe{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J7(this),this.idTokenSubscription=new J7(this),this.beforeStateQueue=new zNe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mse,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Pf(r)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await f0.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await o2(this,{idToken:e}),n=await ru._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(yo(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await l2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SNe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yo(this.app))return Promise.reject(Bf(this));const r=e?gi(e):null;return r&&vt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yo(this.app)?Promise.reject(Bf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yo(this.app)?Promise.reject(Bf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qNe(this),r=new WNe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rS("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await jNe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Pf(e)||this._popupRedirectResolver;vt(r,this,"argument-error"),this.redirectPersistenceManager=await f0.create(this,[Pf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{s=!0,l()}}else{const l=e.addObserver(r);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pse(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(yo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&ANe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bv(t){return gi(t)}class J7{constructor(e){this.auth=e,this.observer=null,this.addObserver=KAe(r=>this.observer=r)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QM={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KNe(t){QM=t}function Mse(t){return QM.loadJS(t)}function XNe(){return QM.recaptchaEnterpriseScript}function YNe(){return QM.gapiScript}function QNe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ZNe{constructor(){this.enterprise=new JNe}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class JNe{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const e2e="recaptcha-enterprise",Ise="NO_RECAPTCHA";class t2e{constructor(e){this.type=e2e,this.auth=Bv(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{INe(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new MNe(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;K7(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(Ise)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZNe().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{n(this.auth).then(o=>{if(!r&&K7(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XNe();l.length!==0&&(l+=o),Mse(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function eq(t,e,r,n=!1,i=!1){const a=new t2e(t);let s;if(i)s=Ise;else try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ZL(t,e,r,n,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await eq(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await eq(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2e(t,e){const r=xM(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(dv(a,e??{}))return i;fu(i,"already-initialized")}return r.initialize({options:e})}function n2e(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Pf);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function i2e(t,e,r){const n=Bv(t);vt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Ose(e),{host:s,port:o}=a2e(e),l=o===null?"":`:${o}`,u={url:`${a}//${s}${l}/`},c=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){vt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),vt(dv(u,n.config.emulator)&&dv(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,Iv(s)?(a5(`${a}//${s}${l}`),s5("Auth",!0)):s2e()}function Ose(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a2e(t){const e=Ose(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:tq(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:tq(s)}}}function tq(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function s2e(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Nf("not implemented")}_getIdTokenResponse(e){return Nf("not implemented")}_linkToIdToken(e,r){return Nf("not implemented")}_getReauthenticationResolver(e){return Nf("not implemented")}}async function o2e(t,e){return jp(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2e(t,e){return wS(t,"POST","/v1/accounts:signInWithPassword",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2e(t,e){return wS(t,"POST","/v1/accounts:signInWithEmailLink",$p(t,e))}async function c2e(t,e){return wS(t,"POST","/v1/accounts:signInWithEmailLink",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends c6{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new LA(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new LA(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ZL(e,r,"signInWithPassword",l2e);case"emailLink":return u2e(e,{email:this._email,oobCode:this._password});default:fu(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ZL(e,n,"signUpPassword",o2e);case"emailLink":return c2e(e,{idToken:r,email:this._email,oobCode:this._password});default:fu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(t,e){return wS(t,"POST","/v1/accounts:signInWithIdp",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2e="http://localhost";class wv extends c6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new wv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):fu("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const s=new wv(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return h0(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,h0(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,h0(e,r)}buildRequest(){const e={requestUri:f2e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=nS(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d2e(t){const e=Y1(Q1(t)).link,r=e?Y1(Q1(e)).deep_link_id:null,n=Y1(Q1(t)).deep_link_id;return(n?Y1(Q1(n)).link:null)||n||r||e||t}class f6{constructor(e){const r=Y1(Q1(e)),n=r.apiKey??null,i=r.oobCode??null,a=h2e(r.mode??null);vt(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=d2e(e);try{return new f6(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.providerId=Bw.PROVIDER_ID}static credential(e,r){return LA._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=f6.parseLink(r);return vt(n,"argument-error"),LA._fromEmailAndCode(e,n.code,n.tenantId)}}Bw.PROVIDER_ID="password";Bw.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends kse{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends xS{constructor(){super("facebook.com")}static credential(e){return wv._fromParams({providerId:Wh.PROVIDER_ID,signInMethod:Wh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wh.credentialFromTaggedObject(e)}static credentialFromError(e){return Wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wh.credential(e.oauthAccessToken)}catch{return null}}}Wh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends xS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return wv._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Gh.credentialFromTaggedObject(e)}static credentialFromError(e){return Gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Gh.credential(r,n)}catch{return null}}}Gh.GOOGLE_SIGN_IN_METHOD="google.com";Gh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends xS{constructor(){super("github.com")}static credential(e){return wv._fromParams({providerId:Kh.PROVIDER_ID,signInMethod:Kh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kh.credentialFromTaggedObject(e)}static credentialFromError(e){return Kh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kh.credential(e.oauthAccessToken)}catch{return null}}}Kh.GITHUB_SIGN_IN_METHOD="github.com";Kh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends xS{constructor(){super("twitter.com")}static credential(e,r){return wv._fromParams({providerId:Xh.PROVIDER_ID,signInMethod:Xh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Xh.credentialFromTaggedObject(e)}static credentialFromError(e){return Xh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Xh.credential(r,n)}catch{return null}}}Xh.TWITTER_SIGN_IN_METHOD="twitter.com";Xh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2e(t,e){return wS(t,"POST","/v1/accounts:signUp",$p(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ru._fromIdTokenResponse(e,n,i),s=rq(n);return new xv({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=rq(n);return new xv({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function rq(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2 extends Tc{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,u2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new u2(e,r,n,i)}}function Rse(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?u2._fromErrorAndOperation(t,a,e,n):a})}async function m2e(t,e,r=!1){const n=await FA(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return xv._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2e(t,e,r=!1){const{auth:n}=t;if(yo(n.app))return Promise.reject(Bf(n));const i="reauthenticate";try{const a=await FA(t,Rse(n,i,e,t),r);vt(a.idToken,n,"internal-error");const s=l6(a.idToken);vt(s,n,"internal-error");const{sub:o}=s;return vt(t.uid===o,n,"user-mismatch"),xv._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fu(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fse(t,e,r=!1){if(yo(t.app))return Promise.reject(Bf(t));const n="signIn",i=await Rse(t,n,e),a=await xv._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function v2e(t,e){return Fse(Bv(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lse(t){const e=Bv(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function y2e(t,e,r){if(yo(t.app))return Promise.reject(Bf(t));const n=Bv(t),s=await ZL(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p2e).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Lse(t),l}),o=await xv._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}function b2e(t,e,r){return yo(t.app)?Promise.reject(Bf(t)):v2e(gi(t),Bw.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Lse(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bse(t,e){return gi(t).setPersistence(e)}function w2e(t,e,r,n){return gi(t).onIdTokenChanged(e,r,n)}function x2e(t,e,r){return gi(t).beforeAuthStateChanged(e,r)}const c2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(c2,"1"),this.storage.removeItem(c2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2e=1e3,_2e=10;class jse extends $se{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nse(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);UNe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_2e):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},A2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}jse.type="LOCAL";const h6=jse;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vse extends $se{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Vse.type="SESSION";const Use=Vse;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new ZM(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async u=>u(r.origin,a)),l=await E2e(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ZM.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const u=d6("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(c),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(){return window}function C2e(t){gc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zse(){return typeof gc().WorkerGlobalScope<"u"&&typeof gc().importScripts=="function"}async function T2e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D2e(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function N2e(){return zse()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse="firebaseLocalStorageDb",P2e=1,f2="firebaseLocalStorage",Hse="fbase_key";class AS{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function JM(t,e){return t.transaction([f2],e?"readwrite":"readonly").objectStore(f2)}function M2e(){const t=indexedDB.deleteDatabase(qse);return new AS(t).toPromise()}function JL(){const t=indexedDB.open(qse,P2e);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(f2,{keyPath:Hse})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(f2)?e(n):(n.close(),await M2e(),e(await JL()))})})}async function nq(t,e,r){const n=JM(t,!0).put({[Hse]:e,value:r});return new AS(n).toPromise()}async function I2e(t,e){const r=JM(t,!1).get(e),n=await new AS(r).toPromise();return n===void 0?null:n.value}function iq(t,e){const r=JM(t,!0).delete(e);return new AS(r).toPromise()}const O2e=800,k2e=3;class Wse{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JL(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>k2e)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zse()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ZM._getInstance(N2e()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await T2e(),!this.activeServiceWorker)return;this.sender=new S2e(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D2e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await JL();return await nq(e,c2,"1"),await iq(e,c2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>nq(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>I2e(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>iq(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=JM(i,!1).getAll();return new AS(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wse.type="LOCAL";const R2e=Wse;new bS(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2e(t,e){return e?Pf(e):(vt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6 extends c6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return h0(e,this._buildIdpRequest())}_linkToIdToken(e,r){return h0(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return h0(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function L2e(t){return Fse(t.auth,new p6(t),t.bypassAuthState)}function B2e(t){const{auth:e,user:r}=t;return vt(r,e,"internal-error"),g2e(r,new p6(t),t.bypassAuthState)}async function $2e(t){const{auth:e,user:r}=t;return vt(r,e,"internal-error"),m2e(r,new p6(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gse{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L2e;case"linkViaPopup":case"linkViaRedirect":return $2e;case"reauthViaPopup":case"reauthViaRedirect":return B2e;default:fu(this.auth,"internal-error")}}resolve(e){nh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2e=new bS(2e3,1e4);class Hy extends Gse{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Hy.currentPopupAction&&Hy.currentPopupAction.cancel(),Hy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vt(e,this.auth,"internal-error"),e}async onExecution(){nh(this.filter.length===1,"Popup operations only handle one event");const e=d6();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(mc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j2e.get())};e()}}Hy.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2e="pendingRedirect",XD=new Map;class U2e extends Gse{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=XD.get(this.auth._key());if(!e){try{const n=await z2e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}XD.set(this.auth._key(),e)}return this.bypassAuthState||XD.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z2e(t,e){const r=W2e(e),n=H2e(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function q2e(t,e){XD.set(t._key(),e)}function H2e(t){return Pf(t._redirectPersistence)}function W2e(t){return KD(V2e,t.config.apiKey,t.name)}async function G2e(t,e,r=!1){if(yo(t.app))return Promise.reject(Bf(t));const n=Bv(t),i=F2e(n,e),s=await new U2e(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2e=10*60*1e3;class X2e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y2e(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Kse(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(mc(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K2e&&this.cachedEventUids.clear(),this.cachedEventUids.has(aq(e))}saveEventToCache(e){this.cachedEventUids.add(aq(e)),this.lastProcessedEventTime=Date.now()}}function aq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kse({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y2e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kse(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2e(t,e={}){return jp(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J2e=/^https?/;async function ePe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Q2e(t);for(const r of e)try{if(tPe(r))return}catch{}fu(t,"unauthorized-domain")}function tPe(t){const e=YL(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!J2e.test(r))return!1;if(Z2e.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rPe=new bS(3e4,6e4);function sq(){const t=gc().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function nPe(t){return new Promise((e,r)=>{var i,a,s;function n(){sq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sq(),r(mc(t,"network-request-failed"))},timeout:rPe.get()})}if((a=(i=gc().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=gc().gapi)!=null&&s.load)n();else{const o=QNe("iframefcb");return gc()[o]=()=>{gapi.load?n():r(mc(t,"network-request-failed"))},Mse(`${YNe()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw YD=null,e})}let YD=null;function iPe(t){return YD=YD||nPe(t),YD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPe=new bS(5e3,15e3),sPe="__/auth/iframe",oPe="emulator/auth/iframe",lPe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uPe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cPe(t){const e=t.config;vt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?o6(e,oPe):`https://${t.config.authDomain}/${sPe}`,n={apiKey:e.apiKey,appName:t.name,v:Ov},i=uPe.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${nS(n).slice(1)}`}async function fPe(t){const e=await iPe(t),r=gc().gapi;return vt(r,t,"internal-error"),e.open({where:document.body,url:cPe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lPe,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=mc(t,"network-request-failed"),o=gc().setTimeout(()=>{a(s)},aPe.get());function l(){gc().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hPe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dPe=500,pPe=600,mPe="_blank",gPe="http://localhost";class oq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vPe(t,e,r,n=dPe,i=pPe){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...hPe,width:n.toString(),height:i.toString(),top:a,left:s},u=ja().toLowerCase();r&&(o=Ese(u)?mPe:r),Ase(u)&&(e=e||gPe,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[d,p])=>`${h}${d}=${p},`,"");if(VNe(u)&&o!=="_self")return yPe(e||"",o),new oq(null);const f=window.open(e||"",o,c);vt(f,t,"popup-blocked");try{f.focus()}catch{}return new oq(f)}function yPe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bPe="__/auth/handler",wPe="emulator/auth/handler",xPe=encodeURIComponent("fac");async function lq(t,e,r,n,i,a){vt(t.config.authDomain,t,"auth-domain-config-required"),vt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ov,eventId:i};if(e instanceof kse){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",GAe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))s[c]=f}if(e instanceof xS){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await t._getAppCheckToken(),u=l?`#${xPe}=${encodeURIComponent(l)}`:"";return`${APe(t)}?${nS(o).slice(1)}${u}`}function APe({config:t}){return t.emulator?o6(t,wPe):`https://${t.authDomain}/${bPe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="webStorageSupport";class _Pe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Use,this._completeRedirectFn=G2e,this._overrideRedirectResult=q2e}async _openPopup(e,r,n,i){var s;nh((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await lq(e,r,n,YL(),i);return vPe(e,a,d6())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await lq(e,r,n,YL(),i);return C2e(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(nh(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await fPe(e),n=new X2e(e);return r.register("authEvent",i=>(vt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Qk,{type:Qk},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[Qk];a!==void 0&&r(!!a),fu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ePe(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Nse()||_se()||u6()}}const EPe=_Pe;var uq="@firebase/auth",cq="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SPe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TPe(t){pv(new pp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;vt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pse(t)},u=new GNe(n,i,a,l);return n2e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),pv(new pp("auth-internal",e=>{const r=Bv(e.getProvider("auth").getImmediate());return(n=>new SPe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),cc(uq,cq,CPe(t)),cc(uq,cq,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DPe=5*60,NPe=mre("authIdTokenMaxAge")||DPe;let fq=null;const PPe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>NPe)return;const i=r==null?void 0:r.token;fq!==i&&(fq=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MPe(t=u5()){const e=xM(t,"auth");if(e.isInitialized())return e.getImmediate();const r=r2e(t,{popupRedirectResolver:EPe,persistence:[R2e,h6,Use]}),n=mre("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=PPe(a.toString());x2e(r,s,()=>s(r.currentUser)),w2e(r,o=>s(o))}}const i=hre("auth");return i&&i2e(r,`http://${i}`),r}function IPe(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}KNe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=mc("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",IPe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TPe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xse="firebasestorage.googleapis.com",OPe="storageBucket",kPe=2*60*1e3,RPe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Tc{constructor(e,r,n=0){super(Zk(e),`Firebase Storage: ${r} (${Zk(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wc;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wc||(wc={}));function Zk(t){return"storage/"+t}function FPe(){const t="An unknown error occurred, please check the error payload for server response.";return new Dc(wc.UNKNOWN,t)}function LPe(){return new Dc(wc.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BPe(){return new Dc(wc.CANCELED,"User canceled the upload/download.")}function $Pe(t){return new Dc(wc.INVALID_URL,"Invalid URL '"+t+"'.")}function jPe(t){return new Dc(wc.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hq(t){return new Dc(wc.INVALID_ARGUMENT,t)}function Yse(){return new Dc(wc.APP_DELETED,"The Firebase app was deleted.")}function VPe(t){return new Dc(wc.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=nu.makeFromUrl(e,r)}catch{return new nu(e,"")}if(n.path==="")return n;throw jPe(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",d=new RegExp(`^https?://${f}/${c}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},m=r===Xse?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${v}`,"i"),b=[{regex:o,indices:l,postModify:a},{regex:d,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<b.length;_++){const x=b[_],A=x.regex.exec(e);if(A){const E=A[x.indices.bucket];let S=A[x.indices.path];S||(S=""),n=new nu(E,S),x.postModify(n);break}}if(n==null)throw $Pe(e);return n}}class UPe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zPe(t,e,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function f(v){i=setTimeout(()=>{i=null,t(d,l())},v)}function h(){a&&clearTimeout(a)}function d(v,...y){if(u){h();return}if(v){h(),c.call(null,v,...y);return}if(l()||s){h(),c.call(null,v,...y);return}n<64&&(n*=2);let b;o===1?(o=2,b=0):b=(n+Math.random())*1e3,f(b)}let p=!1;function m(v){p||(p=!0,h(),!u&&(i!==null?(v||(o=2),clearTimeout(i),f(0)):v||(o=1)))}return f(0),a=setTimeout(()=>{s=!0,m(!0)},r),m}function qPe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HPe(t){return t!==void 0}function dq(t,e,r,n){if(n<e)throw hq(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw hq(`Invalid value for '${t}'. Expected ${r} or less.`)}function WPe(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var h2;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(h2||(h2={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GPe(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPe{constructor(e,r,n,i,a,s,o,l,u,c,f,h=!0,d=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new aT(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===h2.NO_ERROR,l=a.getStatus();if(!o||GPe(l,this.additionalRetryCodes_)&&this.retry){const c=a.getErrorCode()===h2.ABORT;n(!1,new aT(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new aT(u,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());HPe(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=FPe();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?Yse():BPe();s(l)}else{const l=LPe();s(l)}};this.canceled_?r(!1,new aT(!1,null,!0)):this.backoffId_=zPe(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qPe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class aT{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function XPe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function YPe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QPe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ZPe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JPe(t,e,r,n,i,a,s=!0,o=!1){const l=WPe(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return QPe(c,e),XPe(c,r),YPe(c,a),ZPe(c,n),new KPe(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eMe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tMe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,r){this._service=e,r instanceof nu?this._location=r:this._location=nu.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new d2(e,r)}get root(){const e=new nu(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tMe(this._location.path)}get storage(){return this._service}get parent(){const e=eMe(this._location.path);if(e===null)return null;const r=new nu(this._location.bucket,e);return new d2(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw VPe(e)}}function pq(t,e){const r=e==null?void 0:e[OPe];return r==null?null:nu.makeFromBucketSpec(r,t)}function rMe(t,e,r,n={}){t.host=`${e}:${r}`;const i=Iv(e);i&&(a5(`https://${t.host}/b`),s5("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:gre(a,t.app.options.projectId))}class nMe{constructor(e,r,n,i,a,s=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=Xse,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kPe,this._maxUploadRetryTime=RPe,this._requests=new Set,i!=null?this._bucket=nu.makeFromBucketSpec(i,this._host):this._bucket=pq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nu.makeFromBucketSpec(this._url,e):this._bucket=pq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(yo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new d2(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new UPe(Yse());{const s=JPe(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const mq="@firebase/storage",gq="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse="storage";function iMe(t=u5(),e){t=gi(t);const n=xM(t,Qse).getImmediate({identifier:e}),i=dre("storage");return i&&aMe(n,...i),n}function aMe(t,e,r,n={}){rMe(t,e,r,n)}function sMe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new nMe(r,n,i,e,Ov)}function oMe(){pv(new pp(Qse,sMe,"PUBLIC").setMultipleInstances(!0)),cc(mq,gq,""),cc(mq,gq,"esm2020")}oMe();const lMe={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},m6=bre(lMe),p2=MPe(m6),La=eTe(m6);iMe(m6);const uMe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},cMe=15;function fMe(){const[t,e]=O.useState(null),[r,n]=O.useState(!1),[i,a]=O.useState(null),[s,o]=O.useState(null),[l,u]=O.useState(""),[c,f]=O.useState(""),[h,d]=O.useState("idle"),[p,m]=O.useState([]),[v,y]=O.useState(!0),w=fp();O.useEffect(()=>{const E=th(La,"paperSummaries"),S=fS(E,K5("createdAt","desc"),cTe(15)),C=pTe(S,D=>{const N=D.docs.map(P=>({id:P.id,...P.data()}));m(N),y(!1)},D=>{console.error("   :",D),y(!1)});return()=>C()},[]);const b=E=>E?E.toDate?E.toDate().toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(E).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",_=E=>{var C;const S=(C=E.target.files)==null?void 0:C[0];S&&(S.type==="application/pdf"?(e(S),u(S.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},x=async()=>{if(!t){o("PDF  .");return}n(!0),o(null),a(null);try{const E=await mNe(t);if(!E||E.trim().length<100)throw new Error("   .  PDF .");const S=await yNe(E);a(S.summary),f(S.method)}catch(E){o(E.message||"    ."),console.error(" :",E)}finally{n(!1)}},A=async()=>{if(!i){o("  .");return}if(!(w!=null&&w.email)){o("  .");return}try{d("loading"),await zM(th(La,"paperSummaries"),{title:l||"  ",summary:i,method:c,authorEmail:w.email,authorName:w.username||w.email.split("@")[0],createdAt:Lf(),publishedAt:new Date().toISOString()}),d("success"),setTimeout(()=>d("idle"),2500)}catch(E){console.error("  :",E),o("    ."),d("error"),setTimeout(()=>d("idle"),3e3)}};return I.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:I.jsxs(We.div,{className:"max-w-4xl mx-auto px-4",variants:uMe,initial:"hidden",animate:"visible",children:[I.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),I.jsxs(We.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[I.jsxs("div",{className:"text-center",children:[I.jsx("input",{type:"file",accept:".pdf",onChange:_,className:"hidden",id:"pdf-upload"}),I.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[I.jsx("div",{className:"text-6xl mb-4",children:""}),I.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),I.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["( ",cMe," )"]})]})]}),t&&I.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:I.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",I.jsx("strong",{children:t.name})]})})]}),I.jsxs("div",{className:"flex gap-4 mb-8",children:[I.jsx(We.button,{onClick:x,disabled:!t||r,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:r?"   ...":" AI "}),I.jsx(We.button,{onClick:()=>{e(null),u(""),a(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),s&&I.jsxs(We.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[I.jsx("strong",{children:":"})," ",s]}),i&&I.jsxs(We.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[I.jsxs("div",{className:"flex items-center mb-4",children:[I.jsx("span",{className:"text-2xl mr-3",children:""}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),I.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",c==="AI"?" AI  (Hugging Face)":"   "]})]})]}),I.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:I.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),I.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[I.jsx(We.button,{onClick:()=>{const E=document.createElement("a");E.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),E.setAttribute("download",`${l}_summary.txt`),E.style.display="none",document.body.appendChild(E),E.click(),document.body.removeChild(E)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),I.jsx(We.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "}),I.jsx(We.button,{onClick:A,disabled:h==="loading"||!i,whileHover:{scale:i?1.05:1},className:`py-2 px-4 rounded transition text-sm font-semibold ${h==="success"?"bg-emerald-600 text-white":h==="loading"?"bg-gray-400 text-gray-100":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:h==="success"?"  ":h==="loading"?" ...":"  "})]}),!w&&I.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"     ."})]}),I.jsxs(We.div,{className:"mt-12 bg-gray-50 dark:bg-dark-100 rounded-lg p-6 border border-gray-200 dark:border-gray-800",initial:{opacity:0},animate:{opacity:1},children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"   "}),I.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 15 "})]}),v?I.jsx("p",{className:"text-sm text-gray-500",children:"  ..."}):p.length===0?I.jsx("p",{className:"text-sm text-gray-500",children:"   .   !"}):I.jsx("div",{className:"space-y-4",children:p.map(E=>I.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-200",children:[I.jsxs("div",{className:"flex items-start justify-between gap-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:E.title}),I.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[E.authorName||" ","  ",b(E.createdAt||E.publishedAt)]})]}),I.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-200",children:E.method==="AI"?"AI ":"Rule "})]}),I.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",children:E.summary})]},E.id))})]}),I.jsxs(We.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[I.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),I.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[I.jsxs("li",{children:[I.jsx("strong",{children:"1."}),"   PDF  "]}),I.jsxs("li",{children:[I.jsx("strong",{children:"2."}),' "AI "  ']}),I.jsxs("li",{children:[I.jsx("strong",{children:"3."})," AI    "]}),I.jsxs("li",{children:[I.jsx("strong",{children:"4."}),"      "]})]}),I.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:I.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",I.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}function hMe(){var b;const[t,e]=O.useState([]),[r,n]=O.useState(!0),[i,a]=O.useState(""),[s,o]=O.useState(null),[l,u]=O.useState({title:"",category:((b=hy[0])==null?void 0:b.id)??1,content:""}),[c,f]=O.useState(!1),[h,d]=O.useState(!1),p=fp(),m=_=>_?typeof _=="string"?_:_.toDate?_.toDate().toLocaleDateString("ko-KR"):_ instanceof Date?_.toLocaleDateString("ko-KR"):new Date(_).toLocaleDateString("ko-KR"):"",v=O.useCallback(async()=>{n(!0),a("");try{const _=fS(th(La,"forumPosts"),K5("createdAt","desc")),A=(await UM(_)).docs.map(E=>{var C;const S=E.data();return{id:E.id,...S,createdAt:(C=S.createdAt)!=null&&C.toDate?S.createdAt.toDate():S.createdAt||new Date,replies:S.replies??0}});e(A)}catch(_){console.error("  :",_),a("  .    .")}finally{n(!1)}},[]);O.useEffect(()=>{v()},[v]);const y=async _=>{var x;if(_.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}d(!0);try{const A=(p==null?void 0:p.username)||(p==null?void 0:p.email)||" ",E={title:l.title.trim(),content:l.content.trim(),category:Number(l.category),author:A,authorEmail:(p==null?void 0:p.email)||null,replies:0,createdAt:Lf(),updatedAt:Lf()},S=await zM(th(La,"forumPosts"),E);console.log("   :",S.id);const C={id:S.id,...E,createdAt:new Date};e(D=>[C,...D]),u({title:"",category:((x=hy[0])==null?void 0:x.id)??1,content:""}),f(!1),alert(" .")}catch(A){console.error("   :",A),console.error(" :",A.code),console.error(" :",A.message),alert("  : "+A.message)}finally{d(!1)}},w=s?t.filter(_=>_.category===s):t;return I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),I.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[I.jsx("button",{onClick:()=>f(!c),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:c?"":"  "}),I.jsx("button",{onClick:v,className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-100 dark:hover:bg-gray-800",children:""})]}),c&&I.jsxs("form",{onSubmit:y,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("input",{type:"text",value:l.title,onChange:_=>u({...l,title:_.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("select",{value:l.category,onChange:_=>u({...l,category:parseInt(_.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:hy.map(_=>I.jsx("option",{value:_.id,children:_.name},_.id))})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),I.jsx("textarea",{rows:"6",value:l.content,onChange:_=>u({...l,content:_.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),I.jsx("button",{type:"submit",disabled:h,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:h?" ...":""})]}),I.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${s===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),hy.map(_=>I.jsx("button",{onClick:()=>o(_.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${s===_.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:_.name},_.id))]}),I.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r&&I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ..."}),!r&&w.length===0&&I.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400 border border-dashed rounded-lg",children:"   ."}),!r&&w.map(_=>{var x;return I.jsx(Fr,{to:`/forum/${_.id}`,state:{post:_},children:I.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:I.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:I.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:((x=hy.find(A=>A.id===_.category))==null?void 0:x.name)||""})}),I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:_.title}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:_.content}),I.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[_.author,"  ",m(_.createdAt)]})]}),I.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",_.replies??0]})]})})},_.id)})]}),i&&I.jsx("p",{className:"text-sm text-red-500",children:i})]})}function dMe(){var b,_,x;const{postId:t}=Eee();Nw();const e=Dw(),{isDark:r}=Cl(),n=fp(),[i,a]=O.useState(((b=e.state)==null?void 0:b.post)||null),[s,o]=O.useState(!((_=e.state)!=null&&_.post)),[l,u]=O.useState([]),[c,f]=O.useState(""),[h,d]=O.useState(""),p=A=>A?typeof A=="string"?A:A.toDate?A.toDate().toLocaleDateString("ko-KR"):A instanceof Date?A.toLocaleDateString("ko-KR"):new Date(A).toLocaleDateString("ko-KR"):"",m=O.useCallback(async()=>{var A;o(!0);try{const E=xp(La,"forumPosts",t),S=await Jne(E);if(S.exists()){const C=S.data();a({id:S.id,...C,createdAt:(A=C.createdAt)!=null&&A.toDate?C.createdAt.toDate():C.createdAt||new Date})}else a(null)}catch(E){console.error("  :",E),a(null)}finally{o(!1)}},[t]),v=O.useCallback(async()=>{try{const A=th(La,"forumPosts",t,"replies"),E=fS(A,K5("createdAt","asc")),C=(await UM(E)).docs.map(D=>{var P;const N=D.data();return{id:D.id,...N,createdAt:(P=N.createdAt)!=null&&P.toDate?N.createdAt.toDate():N.createdAt||new Date}});u(C)}catch(A){console.error("  :",A)}},[t]);O.useEffect(()=>{var A;(A=e.state)!=null&&A.post||m()},[m,(x=e.state)==null?void 0:x.post]),O.useEffect(()=>{v()},[v]);const y=async A=>{if(A.preventDefault(),d(""),!c.trim()){d(" .");return}try{const E=th(La,"forumPosts",t,"replies"),C={author:(n==null?void 0:n.username)||(n==null?void 0:n.email)||" ",authorEmail:(n==null?void 0:n.email)||null,content:c.trim(),likes:0,createdAt:Lf()},N={id:(await zM(E,C)).id,...C,createdAt:new Date};u(M=>[...M,N]),f("");const P=xp(La,"forumPosts",t);await eie(P,{replies:mTe(1),updatedAt:Lf()}),a(M=>M&&{...M,replies:(M.replies||0)+1})}catch(E){console.error("  :",E),d("  .    .")}};if(s)return I.jsx("div",{className:`text-center py-12 ${r?"text-gray-300":"text-gray-700"}`,children:"  ..."});if(!i)return I.jsxs("div",{className:"text-center py-12",children:[I.jsx("h1",{className:`text-2xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:"   ."}),I.jsx(Fr,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const w=hy.find(A=>A.id===(i==null?void 0:i.category));return I.jsxs("div",{className:"space-y-8",children:[I.jsxs(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[I.jsx(Fr,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),I.jsxs("div",{className:`p-6 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("div",{className:"mb-3",children:I.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${r?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:w==null?void 0:w.name})}),I.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:i.title}),I.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${r?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.author]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",p(i.createdAt)]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.replies||l.length,""]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:":"})," ",i.views||0,""]})]}),I.jsx("div",{className:`prose prose-sm ${r?"prose-invert":""} max-w-none mb-8`,children:I.jsx("div",{className:`${r?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:i.content})})]})]}),I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsx("h2",{className:`text-xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:" "}),I.jsxs("form",{onSubmit:y,className:"space-y-4",children:[I.jsx("textarea",{value:c,onChange:A=>f(A.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),h&&I.jsx("p",{className:"text-sm text-red-400",children:h}),I.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[I.jsxs("h2",{className:`text-2xl font-bold ${r?"text-white":"text-gray-900"}`,children:[" ",l.length,""]}),l.map(A=>I.jsxs(We.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[I.jsxs("div",{className:`flex justify-between items-start mb-2 ${r?"text-gray-300":"text-gray-600"} text-sm`,children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:A.author}),I.jsx("span",{className:"ml-4",children:p(A.createdAt)})]}),I.jsxs("button",{className:`transition ${r?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",A.likes]})]}),I.jsx("p",{className:`${r?"text-gray-200":"text-gray-700"} leading-6`,children:A.content})]},A.id))]})]})}function pMe(){const[t,e]=O.useState(""),r=u9.filter(n=>n.term.toLowerCase().includes(t.toLowerCase())||n.definition.toLowerCase().includes(t.toLowerCase()));return I.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),I.jsx("input",{type:"search",placeholder:"   ...",value:t,onChange:n=>e(n.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),I.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.map((n,i)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.term}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.definition})]},i)),r.length===0&&I.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),I.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",u9.length,"   ",r.length,"  "]})]})}function mMe(){return I.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:Pk.textbooks.map((t,e)=>I.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:t.title}),I.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t.authors," (",t.year,")"]})]},e))})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),I.jsx("div",{className:"space-y-3 sm:space-y-4",children:Pk.databases.map((t,e)=>I.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]}),I.jsxs("section",{children:[I.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),I.jsx("div",{className:"space-y-3 sm:space-y-4",children:Pk.tools.map((t,e)=>I.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[I.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]})]})}function gMe(){const{isDark:t}=Cl(),e=fp(),[r,n]=O.useState({username:"",email:"",affiliation:"",bio:""}),[i,a]=O.useState(!1),[s,o]=O.useState(!0),[l,u]=O.useState(!1),[c,f]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const m=xp(La,"profiles",e.email),v=await Jne(m),y={username:e.username||"",email:e.email,affiliation:"",bio:""};v.exists()?(n({...y,...v.data()}),console.log(" Firestore  :",e.email)):(n(y),console.log("   (Firestore )"))}catch(m){console.error(" Firestore  :",m),n({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email,e==null?void 0:e.username]);const h=p=>{const{name:m,value:v}=p.target;n(y=>({...y,[m]:v}))},d=async p=>{p.preventDefault(),u(!0);try{await dTe(xp(La,"profiles",e.email),{username:r.username,email:r.email,affiliation:r.affiliation,bio:r.bio,updatedAt:Lf()}),console.log(" Firestore :",e.email),f("  ."),a(!1),setTimeout(()=>f(""),3e3)}catch(m){console.error("  :",m.code,m.message),f("  : "+m.message)}finally{u(!1)}};return e?s?I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:"   ..."}):I.jsxs("div",{className:"max-w-2xl mx-auto",children:[I.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),c&&I.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c}),I.jsxs("div",{className:`rounded-lg p-8 ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-700":"border-gray-200"}`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:" "}),I.jsx("button",{onClick:()=>a(!i),className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?I.jsxs("form",{onSubmit:d,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("input",{type:"text",name:"username",value:r.username,onChange:h,className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("input",{type:"email",name:"email",value:r.email,onChange:h,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${t?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:" "}),I.jsx("input",{type:"text",name:"affiliation",value:r.affiliation,onChange:h,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx("textarea",{name:"bio",value:r.bio,onChange:h,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),I.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${l?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:l?" ...":""})]}):I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.username})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.email})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" "}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.affiliation||""})]}),I.jsxs("div",{children:[I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),I.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:r.bio||""})]}),I.jsx("hr",{className:t?"border-gray-700":"border-gray-200"}),I.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[I.jsxs(Fr,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[I.jsx("p",{className:"text-2xl mb-1",children:""}),I.jsx("p",{className:"font-semibold",children:""})]}),I.jsxs(Fr,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[I.jsx("p",{className:"text-2xl mb-1",children:""}),I.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:"   ."})}function vMe(){const{isDark:t}=Cl(),e=fp(),[r,n]=O.useState([]),[i,a]=O.useState(!0),[s,o]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){a(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const c=fS(th(La,"bookmarks"),Yne("userEmail","==",e.email)),h=(await UM(c)).docs.map(d=>({id:d.id,...d.data()}));n(h),console.log("  :",e.email,":",h.length)}catch(c){console.error("   :",c),o("   .")}finally{a(!1)}},u=async c=>{try{const f=xp(La,"bookmarks",c);await tie(f),n(h=>h.filter(d=>d.id!==c)),console.log("  :",c)}catch(f){o(f.message)}};return I.jsxs("div",{className:"max-w-4xl mx-auto",children:[I.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),s&&I.jsx("div",{className:`mb-4 p-4 rounded-lg ${t?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:s}),i?I.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:" ..."}):r.length===0?I.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:[I.jsx("p",{className:"mb-4",children:"  ."}),I.jsx(Fr,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):I.jsx("div",{className:"space-y-4",children:r.map(c=>I.jsxs("div",{className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[I.jsxs("div",{className:"flex justify-between items-start gap-4",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("h2",{className:`text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:c.title}),I.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:[": ",I.jsx("span",{className:"font-medium",children:c.type==="paper"?"":""})]}),I.jsx("p",{className:`line-clamp-2 ${t?"text-gray-300":"text-gray-700"}`,children:c.description})]}),I.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[I.jsx(Fr,{to:c.type==="paper"?`/papers/${c.slug}`:`/concepts/${c.slug}`,className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),I.jsx("button",{onClick:()=>u(c.id),className:`px-4 py-2 rounded-lg transition ${t?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),I.jsxs("p",{className:`text-xs mt-4 ${t?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(c.created_at).toLocaleDateString("ko-KR")]})]},c.id))})]})}function yMe(){const{isDark:t}=Cl(),e=fp(),[r,n]=O.useState([]),[i,a]=O.useState(null),[s,o]=O.useState(!1),[l,u]=O.useState(""),[c,f]=O.useState(""),[h,d]=O.useState(""),[p,m]=O.useState(!0),[v,y]=O.useState("");O.useEffect(()=>{if(!(e!=null&&e.email)){m(!1);return}(async()=>{try{const N=fS(th(La,"notes"),Yne("userEmail","==",e.email)),M=(await UM(N)).docs.map(j=>({id:j.id,...j.data()}));n(M),console.log("   :",e.email,":",M.length)}catch(N){console.log(" Firestore  :",N)}finally{m(!1)}})()},[e==null?void 0:e.email]);const w=()=>{o(!0),a(null),u(""),f(""),d("")},b=D=>{a(D.id),o(!1),u(D.title),f(D.content),d(D.tags.join(", "))},_=async()=>{if(!l.trim()){alert(" .");return}try{if(s){const N={id:(await zM(th(La,"notes"),{title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,createdAt:Lf(),updatedAt:Lf()})).id,title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},P=[N,...r];n(P),o(!1),a(N.id),y("  !"),setTimeout(()=>y(""),2e3),console.log("  :",e.email,l)}else if(i){const D=xp(La,"notes",i);await eie(D,{title:l,content:c,tags:h.split(",").map(P=>P.trim()).filter(P=>P),userEmail:e.email,updatedAt:Lf()});const N=r.map(P=>P.id===i?{...P,title:l,content:c,tags:h.split(",").map(M=>M.trim()).filter(M=>M),updatedAt:new Date().toISOString()}:P);n(N),y("  !"),setTimeout(()=>y(""),2e3)}}catch(D){console.error("  :",D),y("  ."),setTimeout(()=>y(""),2e3)}},x=async D=>{if(confirm("  ?"))try{await tie(xp(La,"notes",D));const N=r.filter(P=>P.id!==D);n(N),i===D&&(a(null),o(!1))}catch(N){console.error("  :",N),alert("  .")}},A=D=>new Date(D).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),E=t?"bg-gray-800 border-gray-700":"bg-white border-gray-200",S=t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",C=t?"text-gray-300":"text-gray-700";return I.jsxs("div",{className:"min-h-screen space-y-8",children:[v&&I.jsx(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${v.includes("")?"bg-red-600":"bg-green-600"}`,children:v}),I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[I.jsxs(We.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${E}`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsx("h2",{className:"text-xl font-bold",children:" "}),I.jsx("button",{onClick:w,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),I.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.length===0?I.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" ."}):r.map(D=>I.jsxs("div",{onClick:()=>b(D),className:`p-3 rounded-lg cursor-pointer transition-all ${i===D.id?t?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":t?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[I.jsx("p",{className:"font-semibold text-sm truncate",children:D.title}),I.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:A(D.updatedAt)})]},D.id))})]}),I.jsx(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${E}`,children:s||i?I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),I.jsx("input",{type:"text",value:l,onChange:D=>u(D.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${S}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:" ( )"}),I.jsx("input",{type:"text",value:h,onChange:D=>d(D.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${S}`})]}),I.jsxs("div",{children:[I.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),I.jsx("textarea",{value:c,onChange:D=>f(D.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${S}`})]}),I.jsxs("div",{className:"flex gap-2 justify-end",children:[I.jsx("button",{onClick:()=>{o(!1),a(null)},className:`px-4 py-2 rounded-lg font-medium ${t?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&I.jsx("button",{onClick:()=>x(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),I.jsx("button",{onClick:_,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):I.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[I.jsx("p",{className:"text-lg",children:"     "}),I.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),r.length>0&&I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${E}`,children:[I.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),I.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(r.flatMap(D=>D.tags).sort())].map(D=>I.jsxs("button",{onClick:()=>{const N=r.filter(P=>P.tags.includes(D));N.length>0&&b(N[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${t?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",D]},D))})]})]})}function Zse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Zse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function xr(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Zse(t))&&(n&&(n+=" "),n+=e);return n}var bMe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function g6(t){if(typeof t!="string")return!1;var e=bMe;return e.includes(t)}var wMe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xMe=new Set(wMe);function Jse(t){return typeof t!="string"?!1:xMe.has(t)}function eoe(t){return typeof t=="string"&&t.startsWith("data-")}function hu(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Jse(r)||eoe(r))&&(e[r]=t[r]);return e}function _S(t){if(t==null)return null;if(O.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return hu(e)}return typeof t=="object"&&!Array.isArray(t)?hu(t):null}function fs(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Jse(r)||eoe(r)||g6(r))&&(e[r]=t[r]);return e}function AMe(t){return t==null?null:O.isValidElement(t)?fs(t.props):typeof t=="object"&&!Array.isArray(t)?fs(t):null}var _Me=["children","width","height","viewBox","className","style","title","desc"];function eB(){return eB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eB.apply(null,arguments)}function EMe(t,e){if(t==null)return{};var r,n,i=SMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function SMe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var v6=O.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:u}=t,c=EMe(t,_Me),f=a||{width:n,height:i,x:0,y:0},h=xr("recharts-surface",s);return O.createElement("svg",eB({},fs(c),{className:h,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),O.createElement("title",null,l),O.createElement("desc",null,u),r)}),CMe=["children","className"];function tB(){return tB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tB.apply(null,arguments)}function TMe(t,e){if(t==null)return{};var r,n,i=DMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function DMe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var xl=O.forwardRef((t,e)=>{var{children:r,className:n}=t,i=TMe(t,CMe),a=xr("recharts-layer",n);return O.createElement("g",tB({className:a},fs(i),{ref:e}),r)}),toe=O.createContext(null),NMe=()=>O.useContext(toe);function zr(t){return function(){return t}}const roe=Math.cos,m2=Math.sin,vu=Math.sqrt,g2=Math.PI,eI=2*g2,rB=Math.PI,nB=2*rB,gm=1e-6,PMe=nB-gm;function noe(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function MMe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return noe;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class IMe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?noe:MMe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-e,u=i-r,c=s-e,f=o-r,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>gm)if(!(Math.abs(f*l-u*c)>gm)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-s,p=i-o,m=l*l+u*u,v=d*d+p*p,y=Math.sqrt(m),w=Math.sqrt(h),b=a*Math.tan((rB-Math.acos((m+h-v)/(2*y*w)))/2),_=b/w,x=b/y;Math.abs(_-1)>gm&&this._append`L${e+_*c},${r+_*f}`,this._append`A${a},${a},0,0,${+(f*d>c*p)},${this._x1=e+x*l},${this._y1=r+x*u}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=e+o,c=r+l,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>gm||Math.abs(this._y1-c)>gm)&&this._append`L${u},${c}`,n&&(h<0&&(h=h%nB+nB),h>PMe?this._append`A${n},${n},0,1,${f},${e-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=c}`:h>gm&&this._append`A${n},${n},0,${+(h>=rB)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function y6(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new IMe(e)}function b6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ioe(t){this._context=t}ioe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function tI(t){return new ioe(t)}function aoe(t){return t[0]}function soe(t){return t[1]}function ooe(t,e){var r=zr(!0),n=null,i=tI,a=null,s=y6(o);t=typeof t=="function"?t:t===void 0?aoe:zr(t),e=typeof e=="function"?e:e===void 0?soe:zr(e);function o(l){var u,c=(l=b6(l)).length,f,h=!1,d;for(n==null&&(a=i(d=s())),u=0;u<=c;++u)!(u<c&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(d)return a=null,d+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:zr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:zr(+l),o):e},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:zr(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function sT(t,e,r){var n=null,i=zr(!0),a=null,s=tI,o=null,l=y6(u);t=typeof t=="function"?t:t===void 0?aoe:zr(+t),e=typeof e=="function"?e:zr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?soe:zr(+r);function u(f){var h,d,p,m=(f=b6(f)).length,v,y=!1,w,b=new Array(m),_=new Array(m);for(a==null&&(o=s(w=l())),h=0;h<=m;++h){if(!(h<m&&i(v=f[h],h,f))===y)if(y=!y)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=d;--p)o.point(b[p],_[p]);o.lineEnd(),o.areaEnd()}y&&(b[h]=+t(v,h,f),_[h]=+e(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):_[h]))}if(w)return o=null,w+""||null}function c(){return ooe().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:zr(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:zr(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:zr(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:zr(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:zr(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:zr(+f),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(n).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:zr(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class loe{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function OMe(t){return new loe(t,!0)}function kMe(t){return new loe(t,!1)}const w6={draw(t,e){const r=vu(e/g2);t.moveTo(r,0),t.arc(0,0,r,0,eI)}},RMe={draw(t,e){const r=vu(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},uoe=vu(1/3),FMe=uoe*2,LMe={draw(t,e){const r=vu(e/FMe),n=r*uoe;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},BMe={draw(t,e){const r=vu(e),n=-r/2;t.rect(n,n,r,r)}},$Me=.8908130915292852,coe=m2(g2/10)/m2(7*g2/10),jMe=m2(eI/10)*coe,VMe=-roe(eI/10)*coe,UMe={draw(t,e){const r=vu(e*$Me),n=jMe*r,i=VMe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=eI*a/5,o=roe(s),l=m2(s);t.lineTo(l*r,-o*r),t.lineTo(o*n-l*i,l*n+o*i)}t.closePath()}},Jk=vu(3),zMe={draw(t,e){const r=-vu(e/(Jk*3));t.moveTo(0,r*2),t.lineTo(-Jk*r,-r),t.lineTo(Jk*r,-r),t.closePath()}},Bo=-.5,$o=vu(3)/2,iB=1/vu(12),qMe=(iB/2+1)*3,HMe={draw(t,e){const r=vu(e/qMe),n=r/2,i=r*iB,a=n,s=r*iB+r,o=-a,l=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Bo*n-$o*i,$o*n+Bo*i),t.lineTo(Bo*a-$o*s,$o*a+Bo*s),t.lineTo(Bo*o-$o*l,$o*o+Bo*l),t.lineTo(Bo*n+$o*i,Bo*i-$o*n),t.lineTo(Bo*a+$o*s,Bo*s-$o*a),t.lineTo(Bo*o+$o*l,Bo*l-$o*o),t.closePath()}};function WMe(t,e){let r=null,n=y6(i);t=typeof t=="function"?t:zr(t||w6),e=typeof e=="function"?e:zr(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:zr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:zr(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function v2(){}function y2(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function foe(t){this._context=t}foe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GMe(t){return new foe(t)}function hoe(t){this._context=t}hoe.prototype={areaStart:v2,areaEnd:v2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KMe(t){return new hoe(t)}function doe(t){this._context=t}doe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:y2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function XMe(t){return new doe(t)}function poe(t){this._context=t}poe.prototype={areaStart:v2,areaEnd:v2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function YMe(t){return new poe(t)}function vq(t){return t<0?-1:1}function yq(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(vq(a)+vq(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function bq(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function eR(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-n)/3;t._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*r,a,s)}function b2(t){this._context=t}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eR(this,this._t0,bq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,eR(this,bq(this,r=yq(this,t,e)),r);break;default:eR(this,this._t0,r=yq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function moe(t){this._context=new goe(t)}(moe.prototype=Object.create(b2.prototype)).point=function(t,e){b2.prototype.point.call(this,e,t)};function goe(t){this._context=t}goe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function QMe(t){return new b2(t)}function ZMe(t){return new moe(t)}function voe(t){this._context=t}voe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=wq(t),i=wq(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function wq(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function JMe(t){return new voe(t)}function rI(t,e){this._context=t,this._t=e}rI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function eIe(t){return new rI(t,.5)}function tIe(t){return new rI(t,0)}function rIe(t){return new rI(t,1)}function iw(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,o=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function aB(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function nIe(t,e){return t[e]}function iIe(t){const e=[];return e.key=t,e}function aIe(){var t=zr([]),e=aB,r=iw,n=nIe;function i(a){var s=Array.from(t.apply(this,arguments),iIe),o,l=s.length,u=-1,c;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,c=b6(e(s));o<l;++o)s[c[o]].index=o;return r(s,c),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:zr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:zr(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?aB:typeof a=="function"?a:zr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??iw,i):r},i}function sIe(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}iw(t,e)}}function oIe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=t[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}iw(t,e)}}function lIe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,u=0;o<s;++o){for(var c=t[e[o]],f=c[n][1]||0,h=c[n-1][1]||0,d=(f-h)/2,p=0;p<o;++p){var m=t[e[p]],v=m[n][1]||0,y=m[n-1][1]||0;d+=v-y}l+=f,u+=d*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,iw(t,e)}}var nI={},yoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(yoe);var x6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(x6);var iI={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(iI);var aI={},boe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(boe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=boe,r=iI;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",u="",c=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,l+=i[o]):f===u?u="":l+=f:c?f==='"'||f==="'"?u=f:f==="]"?(c=!1,a.push(l),l=""):l+=f:f==="["?(c=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}t.toPath=n})(aI);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe,r=x6,n=iI,i=aI;function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?r.isDeepKey(l)?a(o,i.toPath(l),u):u:c}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const c=o[l];return c===void 0?u:c}default:{if(Array.isArray(l))return s(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?u:c}}}function s(o,l,u){if(l.length===0)return u;let c=o;for(let f=0;f<l.length;f++){if(c==null||e.isUnsafeProperty(l[f]))return u;c=c[l[f]]}return c===void 0?u:c}t.get=a})(nI);var uIe=nI.get;const aw=Sl(uIe);var Rs=t=>t===0?0:t>0?1:-1,du=t=>typeof t=="number"&&t!=+t,ih=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,at=t=>(typeof t=="number"||t instanceof Number)&&!du(t),xc=t=>at(t)||typeof t=="string",cIe=0,BA=t=>{var e=++cIe;return"".concat(t||"").concat(e)},pu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(e)&&typeof e!="string")return n;var a;if(ih(e)){if(r==null)return n;var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return du(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},woe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function Nn(t,e,r){return at(t)&&at(e)?t+r*(e-t):e}function xoe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):aw(n,e))===r)}var ln=t=>t===null||typeof t>"u",ES=t=>ln(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function fIe(t){return t!=null}function SS(){}var hIe=["type","size","sizeType"];function sB(){return sB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sB.apply(null,arguments)}function xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Aq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(r),!0).forEach(function(n){dIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dIe(t,e,r){return(e=pIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pIe(t){var e=mIe(t,"string");return typeof e=="symbol"?e:e+""}function mIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gIe(t,e){if(t==null)return{};var r,n,i=vIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function vIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Aoe={symbolCircle:w6,symbolCross:RMe,symbolDiamond:LMe,symbolSquare:BMe,symbolStar:UMe,symbolTriangle:zMe,symbolWye:HMe},yIe=Math.PI/180,bIe=t=>{var e="symbol".concat(ES(t));return Aoe[e]||w6},wIe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*yIe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},xIe=(t,e)=>{Aoe["symbol".concat(ES(t))]=e},A6=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=gIe(t,hIe),a=Aq(Aq({},i),{},{type:e,size:r,sizeType:n}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var h=bIe(s),d=WMe().type(h).size(wIe(r,n,s)),p=d();if(p!==null)return p},{className:l,cx:u,cy:c}=a,f=fs(a);return at(u)&&at(c)&&at(r)?O.createElement("path",sB({},f,{className:xr("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(c,")"),d:o()})):null};A6.registerSymbol=xIe;var _oe=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,_6=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(O.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{g6(i)&&(n[i]=a=>r[i](r,a))}),n},AIe=(t,e,r)=>n=>(t(e,r,n),null),sI=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];g6(i)&&typeof a=="function"&&(n||(n={}),n[i]=AIe(a,e,r))}),n};function _q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _Ie(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_q(Object(r),!0).forEach(function(n){EIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EIe(t,e,r){return(e=SIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SIe(t){var e=CIe(t,"string");return typeof e=="symbol"?e:e+""}function CIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function va(t,e){var r=_Ie({},t),n=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}function w2(){return w2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w2.apply(null,arguments)}function Eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TIe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eq(Object(r),!0).forEach(function(n){DIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DIe(t,e,r){return(e=NIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NIe(t){var e=PIe(t,"string");return typeof e=="symbol"?e:e+""}function PIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qo=32,MIe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function IIe(t){var{data:e,iconType:r,inactiveColor:n}=t,i=qo/2,a=qo/6,s=qo/3,o=e.inactive?n:e.color,l=r??e.type;if(l==="none")return null;if(l==="plainline"){var u;return O.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:qo,y2:i,className:"recharts-legend-icon"})}if(l==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(qo,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return O.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(qo/8,"h").concat(qo,"v").concat(qo*3/4,"h").concat(-qo,"z"),className:"recharts-legend-icon"});if(O.isValidElement(e.legendIcon)){var c=TIe({},e);return delete c.legendIcon,O.cloneElement(e.legendIcon,c)}return O.createElement(A6,{fill:o,cx:i,cy:i,size:qo,sizeType:"diameter",type:l})}function OIe(t){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:s}=t,o={x:0,y:0,width:qo,height:qo},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((c,f)=>{var h=c.formatter||i,d=xr({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:c.inactive});if(c.type==="none")return null;var p=c.inactive?a:c.color,m=h?h(c.value,c,f):c.value;return O.createElement("li",w2({className:d,style:l,key:"legend-item-".concat(f)},sI(t,c,f)),O.createElement(v6,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(m," legend icon")},O.createElement(IIe,{data:c,iconType:s,inactiveColor:a})),O.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},m))})}var kIe=t=>{var e=va(t,MIe),{payload:r,layout:n,align:i}=e;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:a},O.createElement(OIe,w2({},e,{payload:r})))},Eoe={},Soe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(Soe);var E6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(E6);var Coe={},oI={},Toe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Toe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Toe;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(oI);var Doe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Doe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oI,r=Doe;function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(Coe);var Noe={},Poe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nI;function r(n){return function(i){return e.get(i,n)}}t.property=r})(Poe);var Moe={},S6={},Ioe={},C6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(C6);var T6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(T6);var D6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(D6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C6,r=T6,n=D6;function i(c,f,h){return typeof h!="function"?i(c,f,()=>{}):a(c,f,function d(p,m,v,y,w,b){const _=h(p,m,v,y,w,b);return _!==void 0?!!_:a(p,m,d,b)},new Map)}function a(c,f,h,d){if(f===c)return!0;switch(typeof f){case"object":return s(c,f,h,d);case"function":return Object.keys(f).length>0?a(c,{...f},h,d):n.eq(c,f);default:return e.isObject(c)?typeof f=="string"?f==="":!0:n.eq(c,f)}}function s(c,f,h,d){if(f==null)return!0;if(Array.isArray(f))return l(c,f,h,d);if(f instanceof Map)return o(c,f,h,d);if(f instanceof Set)return u(c,f,h,d);const p=Object.keys(f);if(c==null)return p.length===0;if(p.length===0)return!0;if(d!=null&&d.has(f))return d.get(f)===c;d==null||d.set(f,c);try{for(let m=0;m<p.length;m++){const v=p[m];if(!r.isPrimitive(c)&&!(v in c)||f[v]===void 0&&c[v]!==void 0||f[v]===null&&c[v]!==null||!h(c[v],f[v],v,c,f,d))return!1}return!0}finally{d==null||d.delete(f)}}function o(c,f,h,d){if(f.size===0)return!0;if(!(c instanceof Map))return!1;for(const[p,m]of f.entries()){const v=c.get(p);if(h(v,m,p,c,f,d)===!1)return!1}return!0}function l(c,f,h,d){if(f.length===0)return!0;if(!Array.isArray(c))return!1;const p=new Set;for(let m=0;m<f.length;m++){const v=f[m];let y=!1;for(let w=0;w<c.length;w++){if(p.has(w))continue;const b=c[w];let _=!1;if(h(b,v,m,c,f,d)&&(_=!0),_){p.add(w),y=!0;break}}if(!y)return!1}return!0}function u(c,f,h,d){return f.size===0?!0:c instanceof Set?l([...c],[...f],h,d):!1}t.isMatchWith=i,t.isSetMatch=u})(Ioe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ioe;function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(S6);var Ooe={},N6={},koe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(koe);var P6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(P6);var M6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",c="[object Array]",f="[object Function]",h="[object ArrayBuffer]",d="[object Object]",p="[object Error]",m="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",x="[object Int8Array]",A="[object Int16Array]",E="[object Int32Array]",S="[object BigInt64Array]",C="[object Float32Array]",D="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=h,t.arrayTag=c,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=_,t.booleanTag=i,t.dataViewTag=m,t.dateTag=o,t.errorTag=p,t.float32ArrayTag=C,t.float64ArrayTag=D,t.functionTag=f,t.int16ArrayTag=A,t.int32ArrayTag=E,t.int8ArrayTag=x,t.mapTag=l,t.numberTag=n,t.objectTag=d,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=s,t.uint16ArrayTag=w,t.uint32ArrayTag=b,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=y})(M6);var Roe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Roe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=koe,r=P6,n=M6,i=T6,a=Roe;function s(c,f){return o(c,void 0,c,new Map,f)}function o(c,f,h,d=new Map,p=void 0){const m=p==null?void 0:p(c,f,h,d);if(m!==void 0)return m;if(i.isPrimitive(c))return c;if(d.has(c))return d.get(c);if(Array.isArray(c)){const v=new Array(c.length);d.set(c,v);for(let y=0;y<c.length;y++)v[y]=o(c[y],y,h,d,p);return Object.hasOwn(c,"index")&&(v.index=c.index),Object.hasOwn(c,"input")&&(v.input=c.input),v}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const v=new RegExp(c.source,c.flags);return v.lastIndex=c.lastIndex,v}if(c instanceof Map){const v=new Map;d.set(c,v);for(const[y,w]of c)v.set(y,o(w,y,h,d,p));return v}if(c instanceof Set){const v=new Set;d.set(c,v);for(const y of c)v.add(o(y,void 0,h,d,p));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(a.isTypedArray(c)){const v=new(Object.getPrototypeOf(c)).constructor(c.length);d.set(c,v);for(let y=0;y<c.length;y++)v[y]=o(c[y],y,h,d,p);return v}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const v=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return d.set(c,v),l(v,c,h,d,p),v}if(typeof File<"u"&&c instanceof File){const v=new File([c],c.name,{type:c.type});return d.set(c,v),l(v,c,h,d,p),v}if(typeof Blob<"u"&&c instanceof Blob){const v=new Blob([c],{type:c.type});return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof Error){const v=new c.constructor;return d.set(c,v),v.message=c.message,v.name=c.name,v.stack=c.stack,v.cause=c.cause,l(v,c,h,d,p),v}if(c instanceof Boolean){const v=new Boolean(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof Number){const v=new Number(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(c instanceof String){const v=new String(c.valueOf());return d.set(c,v),l(v,c,h,d,p),v}if(typeof c=="object"&&u(c)){const v=Object.create(Object.getPrototypeOf(c));return d.set(c,v),l(v,c,h,d,p),v}return c}function l(c,f,h=c,d,p){const m=[...Object.keys(f),...e.getSymbols(f)];for(let v=0;v<m.length;v++){const y=m[v],w=Object.getOwnPropertyDescriptor(c,y);(w==null||w.writable)&&(c[y]=o(f[y],y,h,d,p))}}function u(c){switch(r.getTag(c)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=l})(N6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N6;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Ooe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S6,r=Ooe;function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(Moe);var Foe={},Loe={},Boe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N6,r=M6;function n(i,a){return e.cloneDeepWith(i,(s,o,l,u)=>{const c=a==null?void 0:a(s,o,l,u);if(c!==void 0)return c;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(f,i),f}case r.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(Boe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Boe;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Loe);var $oe={},I6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(I6);var joe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P6;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(joe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x6,r=I6,n=joe,i=aI;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let u=s;for(let c=0;c<l.length;c++){const f=l[c];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=a})($oe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S6,r=iI,n=Loe,i=nI,a=$oe;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const c=i.get(u,o);return c===void 0?a.has(u,o):l===void 0?c===void 0:e.isMatch(c,l)}}t.matchesProperty=s})(Foe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E6,r=Poe,n=Moe,i=Foe;function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}t.iteratee=a})(Noe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Soe,r=E6,n=Coe,i=Noe;function a(s,o=r.identity){return n.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(Eoe);var RIe=Eoe.uniqBy;const Sq=Sl(RIe);function Voe(t,e,r){return e===!0?Sq(t,r):typeof e=="function"?Sq(t,e):t}var Uoe={exports:{}},zoe={},qoe={exports:{}},Hoe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=O;function FIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LIe=typeof Object.is=="function"?Object.is:FIe,BIe=sw.useState,$Ie=sw.useEffect,jIe=sw.useLayoutEffect,VIe=sw.useDebugValue;function UIe(t,e){var r=e(),n=BIe({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return jIe(function(){i.value=r,i.getSnapshot=e,tR(i)&&a({inst:i})},[t,r,e]),$Ie(function(){return tR(i)&&a({inst:i}),t(function(){tR(i)&&a({inst:i})})},[t]),VIe(r),r}function tR(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!LIe(t,r)}catch{return!0}}function zIe(t,e){return e()}var qIe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zIe:UIe;Hoe.useSyncExternalStore=sw.useSyncExternalStore!==void 0?sw.useSyncExternalStore:qIe;qoe.exports=Hoe;var HIe=qoe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=O,WIe=HIe;function GIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var KIe=typeof Object.is=="function"?Object.is:GIe,XIe=WIe.useSyncExternalStore,YIe=lI.useRef,QIe=lI.useEffect,ZIe=lI.useMemo,JIe=lI.useDebugValue;zoe.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=YIe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=ZIe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&s.hasValue){var p=s.value;if(i(p,d))return f=p}return f=d}if(p=f,KIe(c,d))return p;var m=n(d);return i!==void 0&&i(p,m)?(c=d,p):(c=d,f=m)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var o=XIe(t,a[0],a[1]);return QIe(function(){s.hasValue=!0,s.value=o},[o]),JIe(o),o};Uoe.exports=zoe;var eOe=Uoe.exports,O6=O.createContext(null),tOe=t=>t,bn=()=>{var t=O.useContext(O6);return t?t.store.dispatch:tOe},QD=()=>{},rOe=()=>QD,nOe=(t,e)=>t===e;function st(t){var e=O.useContext(O6);return eOe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:rOe,e?e.store.getState:QD,e?e.store.getState:QD,e?t:QD,nOe)}function iOe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function aOe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function sOe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var Cq=t=>Array.isArray(t)?t:[t];function oOe(t){const e=Array.isArray(t[0])?t[0]:t;return sOe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function lOe(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var uOe=class{constructor(t){this.value=t}deref(){return this.value}},cOe=typeof WeakRef<"u"?WeakRef:uOe,fOe=0,Tq=1;function oT(){return{s:fOe,v:void 0,o:null,p:null}}function Woe(t,e={}){let r=oT();const{resultEqualityCheck:n}=e;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let h=0,d=l;h<d;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=o.o;m===null&&(o.o=m=new WeakMap);const v=m.get(p);v===void 0?(o=oT(),m.set(p,o)):o=v}else{let m=o.p;m===null&&(o.p=m=new Map);const v=m.get(p);v===void 0?(o=oT(),m.set(p,o)):o=v}}const u=o;let c;if(o.s===Tq)c=o.v;else if(c=t.apply(null,arguments),a++,n){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&n(h,c)&&(c=h,a!==0&&a--),i=typeof c=="object"&&c!==null||typeof c=="function"?new cOe(c):c}return u.s=Tq,u.v=c,c}return s.clearCache=()=>{r=oT(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function hOe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,s=0,o,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),iOe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:d=Woe,argsMemoizeOptions:p=[]}=c,m=Cq(h),v=Cq(p),y=oOe(i),w=f(function(){return a++,u.apply(null,arguments)},...m),b=d(function(){s++;const x=lOe(y,arguments);return o=w.apply(null,x),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var Ae=hOe(Woe),dOe=Object.assign((t,e=Ae)=>{aOe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>dOe}),Goe={},Koe={},Xoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=e(n),o=e(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=r})(Xoe);var Yoe={},k6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(k6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k6,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(Yoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xoe,r=Yoe,n=aI;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(d=>String(d));const u=(d,p)=>{let m=d;for(let v=0;v<p.length&&m!=null;++v)m=m[p[v]];return m},c=(d,p)=>p==null||d==null?p:typeof d=="object"&&"key"in d?Object.hasOwn(p,d.key)?p[d.key]:u(p,d.path):typeof d=="function"?d(p):Array.isArray(d)?u(p,d):typeof p=="object"?p[d]:p,f=s.map(d=>(Array.isArray(d)&&d.length===1&&(d=d[0]),d==null||typeof d=="function"||Array.isArray(d)||r.isKey(d)?d:{key:d,path:n.toPath(d)}));return a.map(d=>({original:d,criteria:f.map(p=>c(p,d))})).slice().sort((d,p)=>{for(let m=0;m<f.length;m++){const v=e.compareValues(d.criteria[m],p.criteria[m],o[m]);if(v!==0)return v}return 0}).map(d=>d.original)}t.orderBy=i})(Koe);var Qoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let u=0;u<o.length;u++){const c=o[u];Array.isArray(c)&&l<a?s(c,l+1):i.push(c)}};return s(r,0),i}t.flatten=e})(Qoe);var R6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I6,r=oI,n=C6,i=D6;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}t.isIterateeCall=a})(R6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Koe,r=Qoe,n=R6;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,r.flatten(s),["asc"])}t.sortBy=i})(Goe);var pOe=Goe.sortBy;const uI=Sl(pOe);var Zoe=t=>t.legend.settings,mOe=t=>t.legend.size,gOe=t=>t.legend.payload,vOe=Ae([gOe,Zoe],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?uI(n,r):n});function yOe(){return st(vOe)}var lT=1;function Joe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=O.useState({height:0,left:0,top:0,width:0}),n=O.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>lT||Math.abs(s.left-e.left)>lT||Math.abs(s.top-e.top)>lT||Math.abs(s.width-e.width)>lT)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function ta(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var bOe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dq=bOe,rR=()=>Math.random().toString(36).substring(7).split("").join("."),wOe={INIT:`@@redux/INIT${rR()}`,REPLACE:`@@redux/REPLACE${rR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${rR()}`},x2=wOe;function F6(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ele(t,e,r){if(typeof t!="function")throw new Error(ta(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ta(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ta(1));return r(ele)(t,e)}let n=t,i=e,a=new Map,s=a,o=0,l=!1;function u(){s===a&&(s=new Map,a.forEach((v,y)=>{s.set(y,v)}))}function c(){if(l)throw new Error(ta(3));return i}function f(v){if(typeof v!="function")throw new Error(ta(4));if(l)throw new Error(ta(5));let y=!0;u();const w=o++;return s.set(w,v),function(){if(y){if(l)throw new Error(ta(6));y=!1,u(),s.delete(w),a=null}}}function h(v){if(!F6(v))throw new Error(ta(7));if(typeof v.type>"u")throw new Error(ta(8));if(typeof v.type!="string")throw new Error(ta(17));if(l)throw new Error(ta(9));try{l=!0,i=n(i,v)}finally{l=!1}return(a=s).forEach(w=>{w()}),v}function d(v){if(typeof v!="function")throw new Error(ta(10));n=v,h({type:x2.REPLACE})}function p(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ta(11));function w(){const _=y;_.next&&_.next(c())}return w(),{unsubscribe:v(w)}},[Dq](){return this}}}return h({type:x2.INIT}),{dispatch:h,subscribe:f,getState:c,replaceReducer:d,[Dq]:p}}function xOe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:x2.INIT})>"u")throw new Error(ta(12));if(typeof r(void 0,{type:x2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ta(13))})}function tle(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(r[s]=t[s])}const n=Object.keys(r);let i;try{xOe(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const u={};for(let c=0;c<n.length;c++){const f=n[c],h=r[f],d=s[f],p=h(d,o);if(typeof p>"u")throw o&&o.type,new Error(ta(14));u[f]=p,l=l||p!==d}return l=l||n.length!==Object.keys(s).length,l?u:s}}function A2(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function AOe(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(ta(15))};const s={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},o=t.map(l=>l(s));return a=A2(...o)(i.dispatch),{...i,dispatch:a}}}function rle(t){return F6(t)&&"type"in t&&typeof t.type=="string"}var nle=Symbol.for("immer-nothing"),Nq=Symbol.for("immer-draftable"),hs=Symbol.for("immer-state");function Jl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ao=Object,ow=Ao.getPrototypeOf,_2="constructor",cI="prototype",oB="configurable",E2="enumerable",ZD="writable",$A="value",ah=t=>!!t&&!!t[hs];function mu(t){var e;return t?ile(t)||fI(t)||!!t[Nq]||!!((e=t[_2])!=null&&e[Nq])||hI(t)||dI(t):!1}var _Oe=Ao[cI][_2].toString(),Pq=new WeakMap;function ile(t){if(!t||!L6(t))return!1;const e=ow(t);if(e===null||e===Ao[cI])return!0;const r=Ao.hasOwnProperty.call(e,_2)&&e[_2];if(r===Object)return!0;if(!Sy(r))return!1;let n=Pq.get(r);return n===void 0&&(n=Function.toString.call(r),Pq.set(r,n)),n===_Oe}function CS(t,e,r=!0){TS(t)===0?(r?Reflect.ownKeys(t):Ao.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function TS(t){const e=t[hs];return e?e.type_:fI(t)?1:hI(t)?2:dI(t)?3:0}var Mq=(t,e,r=TS(t))=>r===2?t.has(e):Ao[cI].hasOwnProperty.call(t,e),lB=(t,e,r=TS(t))=>r===2?t.get(e):t[e],S2=(t,e,r,n=TS(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function EOe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var fI=Array.isArray,hI=t=>t instanceof Map,dI=t=>t instanceof Set,L6=t=>typeof t=="object",Sy=t=>typeof t=="function",nR=t=>typeof t=="boolean",Uc=t=>t.copy_||t.base_,B6=t=>t.modified_?t.copy_:t.base_;function uB(t,e){if(hI(t))return new Map(t);if(dI(t))return new Set(t);if(fI(t))return Array[cI].slice.call(t);const r=ile(t);if(e===!0||e==="class_only"&&!r){const n=Ao.getOwnPropertyDescriptors(t);delete n[hs];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[ZD]===!1&&(o[ZD]=!0,o[oB]=!0),(o.get||o.set)&&(n[s]={[oB]:!0,[ZD]:!0,[E2]:o[E2],[$A]:t[s]})}return Ao.create(ow(t),n)}else{const n=ow(t);if(n!==null&&r)return{...t};const i=Ao.create(n);return Ao.assign(i,t)}}function $6(t,e=!1){return pI(t)||ah(t)||!mu(t)||(TS(t)>1&&Ao.defineProperties(t,{set:uT,add:uT,clear:uT,delete:uT}),Ao.freeze(t),e&&CS(t,(r,n)=>{$6(n,!0)},!1)),t}function SOe(){Jl(2)}var uT={[$A]:SOe};function pI(t){return t===null||!L6(t)?!0:Ao.isFrozen(t)}var C2="MapSet",cB="Patches",ale={};function lw(t){const e=ale[t];return e||Jl(0,t),e}var COe=t=>!!ale[t],jA,sle=()=>jA,TOe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:COe(C2)?lw(C2):void 0});function Iq(t,e){e&&(t.patchPlugin_=lw(cB),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function fB(t){hB(t),t.drafts_.forEach(DOe),t.drafts_=null}function hB(t){t===jA&&(jA=t.parent_)}var Oq=t=>jA=TOe(jA,t);function DOe(t){const e=t[hs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kq(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[hs].modified_&&(fB(e),Jl(4)),mu(t)&&(t=Rq(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[hs].base_,t,e)}else t=Rq(e,r);return NOe(e,t,!0),fB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==nle?t:void 0}function Rq(t,e){if(pI(e))return e;const r=e[hs];if(!r)return j6(e,t.handledSet_,t);if(!mI(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);ule(r,t)}return r.copy_}function NOe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$6(e,r)}function ole(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var mI=(t,e)=>t.scope_===e,POe=[];function lle(t,e,r,n){const i=Uc(t),a=t.type_;if(n!==void 0&&lB(i,n,a)===e){S2(i,n,r,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;CS(i,(l,u)=>{if(ah(u)){const c=o.get(u)||[];c.push(l),o.set(u,c)}})}const s=t.draftLocations_.get(e)??POe;for(const o of s)S2(i,o,r,a)}function MOe(t,e,r){t.callbacks_.push(function(i){var o;const a=e;if(!a||!mI(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=B6(a);lle(t,a.draft_??a,s,r),ule(a,i)})}function ule(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const a=i.getPath(t);a&&i.generatePatches_(t,a,e)}ole(t)}}function IOe(t,e,r){const{scope_:n}=t;if(ah(r)){const i=r[hs];mI(i,n)&&i.callbacks_.push(function(){JD(t);const s=B6(i);lle(t,r,s,e)})}else mu(r)&&t.callbacks_.push(function(){const a=Uc(t);lB(a,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&j6(lB(t.copy_,e,t.type_),n.handledSet_,n)})}function j6(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ah(t)||e.has(t)||!mu(t)||pI(t)||(e.add(t),CS(t,(n,i)=>{if(ah(i)){const a=i[hs];if(mI(a,r)){const s=B6(a);S2(t,n,s,t.type_),ole(a)}}else mu(i)&&j6(i,e,r)})),t}function OOe(t,e){const r=fI(t),n={type_:r?1:0,scope_:e?e.scope_:sle(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=V6;r&&(i=[n],a=VA);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var V6={get(t,e){if(e===hs)return t;const r=Uc(t);if(!Mq(r,e,t.type_))return kOe(t,r,e);const n=r[e];if(t.finalized_||!mu(n))return n;if(n===iR(t.base_,e)){JD(t);const i=t.type_===1?+e:e,a=pB(t.scope_,n,t,i);return t.copy_[i]=a}return n},has(t,e){return e in Uc(t)},ownKeys(t){return Reflect.ownKeys(Uc(t))},set(t,e,r){const n=cle(Uc(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=iR(Uc(t),e),a=i==null?void 0:i[hs];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(EOe(r,i)&&(r!==void 0||Mq(t.base_,e,t.type_)))return!0;JD(t),dB(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),IOe(t,e,r)),!0},deleteProperty(t,e){return JD(t),iR(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),dB(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Uc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[ZD]:!0,[oB]:t.type_!==1||e!=="length",[E2]:n[E2],[$A]:r[e]}},defineProperty(){Jl(11)},getPrototypeOf(t){return ow(t.base_)},setPrototypeOf(){Jl(12)}},VA={};CS(V6,(t,e)=>{VA[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}});VA.deleteProperty=function(t,e){return VA.set.call(this,t,e,void 0)};VA.set=function(t,e,r){return V6.set.call(this,t[0],e,r,t[0])};function iR(t,e){const r=t[hs];return(r?Uc(r):t)[e]}function kOe(t,e,r){var i;const n=cle(e,r);return n?$A in n?n[$A]:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function cle(t,e){if(!(e in t))return;let r=ow(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ow(r)}}function dB(t){t.modified_||(t.modified_=!0,t.parent_&&dB(t.parent_))}function JD(t){t.copy_||(t.assigned_=new Map,t.copy_=uB(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ROe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Sy(r)&&!Sy(n)){const s=n;n=r;const o=this;return function(u=s,...c){return o.produce(u,f=>n.call(this,f,...c))}}Sy(n)||Jl(6),i!==void 0&&!Sy(i)&&Jl(7);let a;if(mu(r)){const s=Oq(this),o=pB(s,r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?fB(s):hB(s)}return Iq(s,i),kq(a,s)}else if(!r||!L6(r)){if(a=n(r),a===void 0&&(a=r),a===nle&&(a=void 0),this.autoFreeze_&&$6(a,!0),i){const s=[],o=[];lw(cB).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Jl(1,r)},this.produceWithPatches=(r,n)=>{if(Sy(r))return(o,...l)=>this.produceWithPatches(o,u=>r(u,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},nR(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),nR(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),nR(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){mu(e)||Jl(8),ah(e)&&(e=ou(e));const r=Oq(this),n=pB(r,e,void 0);return n[hs].isManual_=!0,hB(r),n}finishDraft(e,r){const n=e&&e[hs];(!n||!n.isManual_)&&Jl(9);const{scope_:i}=n;return Iq(i,r),kq(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(r=r.slice(n+1));const i=lw(cB).applyPatches_;return ah(e)?i(e,r):this.produce(e,a=>i(a,r))}};function pB(t,e,r,n){const[i,a]=hI(e)?lw(C2).proxyMap_(e,r):dI(e)?lw(C2).proxySet_(e,r):OOe(e,r);return((r==null?void 0:r.scope_)??sle()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?MOe(r,a,n):a.callbacks_.push(function(l){var c;(c=l.mapSetPlugin_)==null||c.fixSetContents(a);const{patchPlugin_:u}=l;a.modified_&&u&&u.generatePatches_(a,[],l)}),i}function ou(t){return ah(t)||Jl(10,t),fle(t)}function fle(t){if(!mu(t)||pI(t))return t;const e=t[hs];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=uB(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=uB(t,!0);return CS(r,(i,a)=>{S2(r,i,fle(a))},n),e&&(e.finalized_=!1),r}var FOe=new ROe,hle=FOe.produce;function dle(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var LOe=dle(),BOe=dle,$Oe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?A2:A2.apply(null,arguments)};function Al(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Eo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>rle(n)&&n.type===t,r}var ple=class _x extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_x.prototype)}static get[Symbol.species](){return _x}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _x(...e[0].concat(this)):new _x(...e.concat(this))}};function Fq(t){return mu(t)?hle(t,()=>{}):t}function cT(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function jOe(t){return typeof t=="boolean"}var VOe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new ple;return r&&(jOe(r)?s.push(LOe):s.push(BOe(r.extraArgument))),s},mle="RTK_autoBatch",nn=()=>t=>({payload:t,meta:{[mle]:!0}}),Lq=t=>e=>{setTimeout(e,t)},gle=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,s=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Lq(10):t.type==="callback"?t.queueNotification:Lq(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const f=()=>i&&c(),h=n.subscribe(f);return o.add(c),()=>{h(),o.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[mle]),a=!i,a&&(s||(s=!0,l(u))),n.dispatch(c)}finally{i=!0}}})},UOe=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new ple(t);return n&&i.push(gle(typeof n=="object"?n:void 0)),i};function zOe(t){const e=VOe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof r=="function")o=r;else if(F6(r))o=tle(r);else throw new Error(Eo(1));let l;typeof n=="function"?l=n(e):l=e();let u=A2;i&&(u=$Oe({trace:!1,...typeof i=="object"&&i}));const c=AOe(...l),f=UOe(c);let h=typeof s=="function"?s(f):f();const d=u(...h);return ele(o,a,d)}function vle(t){const e={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Eo(28));if(o in e)throw new Error(Eo(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function qOe(t){return typeof t=="function"}function HOe(t,e){let[r,n,i]=vle(e),a;if(qOe(t))a=()=>Fq(t());else{const o=Fq(t);a=()=>o}function s(o=a(),l){let u=[r[l.type],...n.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,f)=>{if(f)if(ah(c)){const d=f(c,l);return d===void 0?c:d}else{if(mu(c))return hle(c,h=>f(h,l));{const h=f(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},o)}return s.getInitialState=a,s}var WOe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",GOe=(t=21)=>{let e="",r=t;for(;r--;)e+=WOe[Math.random()*64|0];return e},KOe=Symbol.for("rtk-slice-createasyncthunk");function XOe(t,e){return`${t}/${e}`}function YOe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[KOe];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Eo(11));const o=(typeof i.reducers=="function"?i.reducers(ZOe()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,x){const A=typeof _=="string"?_:_.type;if(!A)throw new Error(Eo(12));if(A in u.sliceCaseReducersByType)throw new Error(Eo(13));return u.sliceCaseReducersByType[A]=x,c},addMatcher(_,x){return u.sliceMatchers.push({matcher:_,reducer:x}),c},exposeAction(_,x){return u.actionCreators[_]=x,c},exposeCaseReducer(_,x){return u.sliceCaseReducersByName[_]=x,c}};l.forEach(_=>{const x=o[_],A={reducerName:_,type:XOe(a,_),createNotation:typeof i.reducers=="function"};eke(x)?rke(A,x,c,e):JOe(A,x,c)});function f(){const[_={},x=[],A=void 0]=typeof i.extraReducers=="function"?vle(i.extraReducers):[i.extraReducers],E={..._,...u.sliceCaseReducersByType};return HOe(i.initialState,S=>{for(let C in E)S.addCase(C,E[C]);for(let C of u.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of x)S.addMatcher(C.matcher,C.reducer);A&&S.addDefaultCase(A)})}const h=_=>_,d=new Map,p=new WeakMap;let m;function v(_,x){return m||(m=f()),m(_,x)}function y(){return m||(m=f()),m.getInitialState()}function w(_,x=!1){function A(S){let C=S[_];return typeof C>"u"&&x&&(C=cT(p,A,y)),C}function E(S=h){const C=cT(d,x,()=>new WeakMap);return cT(C,S,()=>{const D={};for(const[N,P]of Object.entries(i.selectors??{}))D[N]=QOe(P,S,()=>cT(p,S,y),x);return D})}return{reducerPath:_,getSelectors:E,get selectors(){return E(A)},selectSlice:A}}const b={name:a,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(s),injectInto(_,{reducerPath:x,...A}={}){const E=x??s;return _.inject({reducerPath:E,reducer:v},A),{...b,...w(E,!0)}}};return b}}function QOe(t,e,r,n){function i(a,...s){let o=e(a);return typeof o>"u"&&n&&(o=r()),t(o,...s)}return i.unwrapped=t,i}var zs=YOe();function ZOe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function JOe({type:t,reducerName:e,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!tke(n))throw new Error(Eo(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Al(t,s):Al(t))}function eke(t){return t._reducerDefinitionType==="asyncThunk"}function tke(t){return t._reducerDefinitionType==="reducerWithPrepare"}function rke({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Eo(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:c}=r,f=i(t,a,c);n.exposeAction(e,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:s||fT,pending:o||fT,rejected:l||fT,settled:u||fT})}function fT(){}var nke="task",yle="listener",ble="completed",U6="cancelled",ike=`task-${U6}`,ake=`task-${ble}`,mB=`${yle}-${U6}`,ske=`${yle}-${ble}`,gI=class{constructor(t){Oe(this,"name","TaskAbortError");Oe(this,"message");this.code=t,this.message=`${nke} ${U6} (reason: ${t})`}},z6=(t,e)=>{if(typeof t!="function")throw new TypeError(Eo(32))},T2=()=>{},wle=(t,e=T2)=>(t.catch(e),t),xle=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),rv=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},nv=t=>{if(t.aborted){const{reason:e}=t;throw new gI(e)}};function Ale(t,e){let r=T2;return new Promise((n,i)=>{const a=()=>i(new gI(t.reason));if(t.aborted){a();return}r=xle(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=T2})}var oke=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof gI?"cancelled":"rejected",error:r}}finally{e==null||e()}},D2=t=>e=>wle(Ale(t,e).then(r=>(nv(t),r))),_le=t=>{const e=D2(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:d0}=Object,Bq={},vI="listenerMiddleware",lke=(t,e)=>{const r=n=>xle(t,()=>rv(n,t.reason));return(n,i)=>{z6(n);const a=new AbortController;r(a);const s=oke(async()=>{nv(t),nv(a.signal);const o=await n({pause:D2(a.signal),delay:_le(a.signal),signal:a.signal});return nv(a.signal),o},()=>rv(a,ake));return i!=null&&i.autoJoin&&e.push(s.catch(T2)),{result:D2(t)(s),cancel(){rv(a,ike)}}}},uke=(t,e)=>{const r=async(n,i)=>{nv(e);let a=()=>{};const o=[new Promise((l,u)=>{let c=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{c(),u()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Ale(e,Promise.race(o));return nv(e),l}finally{a()}};return(n,i)=>wle(r(n,i))},Ele=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=Al(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Eo(21));return z6(a),{predicate:i,type:e,effect:a}},Sle=d0(t=>{const{type:e,predicate:r,effect:n}=Ele(t);return{id:GOe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Eo(22))}}},{withTypes:()=>Sle}),$q=(t,e)=>{const{type:r,effect:n,predicate:i}=Ele(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},gB=t=>{t.pending.forEach(e=>{rv(e,mB)})},cke=(t,e)=>()=>{for(const r of e.keys())gB(r);t.clear()},jq=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Cle=d0(Al(`${vI}/add`),{withTypes:()=>Cle}),fke=Al(`${vI}/removeAll`),Tle=d0(Al(`${vI}/remove`),{withTypes:()=>Tle}),hke=(...t)=>{console.error(`${vI}/error`,...t)},DS=(t={})=>{const e=new Map,r=new Map,n=d=>{const p=r.get(d)??0;r.set(d,p+1)},i=d=>{const p=r.get(d)??1;p===1?r.delete(d):r.set(d,p-1)},{extra:a,onError:s=hke}=t;z6(s);const o=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p!=null&&p.cancelActive&&gB(d)}),l=d=>{const p=$q(e,d)??Sle(d);return o(p)};d0(l,{withTypes:()=>l});const u=d=>{const p=$q(e,d);return p&&(p.unsubscribe(),d.cancelActive&&gB(p)),!!p};d0(u,{withTypes:()=>u});const c=async(d,p,m,v)=>{const y=new AbortController,w=uke(l,y.signal),b=[];try{d.pending.add(y),n(d),await Promise.resolve(d.effect(p,d0({},m,{getOriginalState:v,condition:(_,x)=>w(_,x).then(Boolean),take:w,delay:_le(y.signal),pause:D2(y.signal),extra:a,signal:y.signal,fork:lke(y.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((_,x,A)=>{_!==y&&(rv(_,mB),A.delete(_))})},cancel:()=>{rv(y,mB),d.pending.delete(y)},throwIfCancelled:()=>{nv(y.signal)}})))}catch(_){_ instanceof gI||jq(s,_,{raisedBy:"effect"})}finally{await Promise.all(b),rv(y,ske),i(d),d.pending.delete(y)}},f=cke(e,r);return{middleware:d=>p=>m=>{if(!rle(m))return p(m);if(Cle.match(m))return l(m.payload);if(fke.match(m)){f();return}if(Tle.match(m))return u(m.payload);let v=d.getState();const y=()=>{if(v===Bq)throw new Error(Eo(23));return v};let w;try{if(w=p(m),e.size>0){const b=d.getState(),_=Array.from(e.values());for(const x of _){let A=!1;try{A=x.predicate(m,b,v)}catch(E){A=!1,jq(s,E,{raisedBy:"predicate"})}A&&c(x,m,d,y)}}}finally{v=Bq}return w},startListening:l,stopListening:u,clearListeners:f}};function Eo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var dke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Dle=zs({name:"chartLayout",initialState:dke,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:pke,setLayout:mke,setChartSize:gke,setScale:vke}=Dle.actions,yke=Dle.reducer;function Nle(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(r),!0).forEach(function(n){bke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bke(t,e,r){return(e=wke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wke(t){var e=xke(t,"string");return typeof e=="symbol"?e:e+""}function xke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pi(t,e,r){return ln(t)||ln(e)?r:xc(e)?aw(t,e,r):typeof e=="function"?e(t):r}var Ake=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&at(t[a]))return Wy(Wy({},t),{},{[a]:t[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&at(t[s]))return Wy(Wy({},t),{},{[s]:t[s]+(i||0)})}return t},Vp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Ple=(t,e,r,n)=>{if(n)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(r),s},Mle=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:f,niceTicks:h,axisType:d}=t;if(!s)return null;var p=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,m=i==="category"&&s.bandwidth?s.bandwidth()/p:0;if(m=d==="angleAxis"&&a&&a.length>=2?Rs(a[0]-a[1])*2*m:m,f||h){var v=(f||h||[]).map((y,w)=>{var b=n?n.indexOf(y):y;return{coordinate:s(b)+m,value:y,offset:m,index:w}});return v.filter(y=>!du(y.coordinate))}return l&&u?u.map((y,w)=>({coordinate:s(y)+m,value:y,index:w,offset:m})):s.ticks&&c!=null?s.ticks(c).map((y,w)=>({coordinate:s(y)+m,value:y,offset:m,index:w})):s.domain().map((y,w)=>({coordinate:s(y)+m,value:n?n[y]:y,index:w,offset:m}))},Uq=1e-4,_ke=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-Uq,a=Math.max(n[0],n[1])+Uq,s=t(e[0]),o=t(e[r-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[r-1]])}},Eke=(t,e)=>{if(!e||e.length!==2||!at(e[0])||!at(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!at(t[0])||t[0]<r)&&(i[0]=r),(!at(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Ske=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,s=0;s<e;++s){var o=du(t[s][r][1])?t[s][r][0]:t[s][r][1];o>=0?(t[s][r][0]=i,t[s][r][1]=i+o,i=t[s][r][1]):(t[s][r][0]=a,t[s][r][1]=a+o,a=t[s][r][1])}},Cke=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var s=du(t[a][r][1])?t[a][r][0]:t[a][r][1];s>=0?(t[a][r][0]=i,t[a][r][1]=i+s,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},Tke={sign:Ske,expand:sIe,none:iw,silhouette:oIe,wiggle:lIe,positive:Cke},Dke=(t,e,r)=>{var n=Tke[r],i=aIe().keys(e).value((a,s)=>Number(pi(a,s,0))).order(aB).offset(n);return i(t)};function Nke(t){return t==null?void 0:String(t)}function zq(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ln(i[e.dataKey])){var o=xoe(r,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=pi(i,ln(s)?e.dataKey:s);return ln(l)?null:e.scale(l)}var qq=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return r[s]?r[s].coordinate+n:null;var o=pi(a,e.dataKey,e.scale.domain()[s]);return ln(o)?null:e.scale(o)-i/2+n},Pke=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Mke=t=>{var e=t.flat(2).filter(at);return[Math.min(...e),Math.max(...e)]},Ike=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Oke=(t,e,r)=>{if(t!=null)return Ike(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:s}=a,o=s.reduce((l,u)=>{var c=Nle(u,e,r),f=Mke(c);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},Hq=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Wq=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uw=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=uI(e,c=>c.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],u=i[s-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function Gq(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return Wy(Wy({},e),{},{dataKey:r,payload:n,value:i,name:a})}function yI(t,e){if(t)return String(t);if(typeof e=="string")return e}var kke=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Rke=(t,e)=>e==="centric"?t.angle:t.radius,yh=t=>t.layout.width,bh=t=>t.layout.height,Fke=t=>t.layout.scale,Ile=t=>t.layout.margin,bI=Ae(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),wI=Ae(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Lke="data-recharts-item-index",Bke="data-recharts-item-data-key",NS=60;function Kq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(r),!0).forEach(function(n){$ke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $ke(t,e,r){return(e=jke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jke(t){var e=Vke(t,"string");return typeof e=="symbol"?e:e+""}function Vke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uke=t=>t.brush.height;function zke(t){var e=wI(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:NS;return r+i}return r},0)}function qke(t){var e=wI(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:NS;return r+i}return r},0)}function Hke(t){var e=bI(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Wke(t){var e=bI(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Hi=Ae([yh,bh,Ile,Uke,zke,qke,Hke,Wke,Zoe,mOe],(t,e,r,n,i,a,s,o,l,u)=>{var c={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=hT(hT({},f),c),d=h.bottom;h.bottom+=n,h=Ake(h,l,u);var p=t-h.left-h.right,m=e-h.top-h.bottom;return hT(hT({brushBottom:d},h),{},{width:Math.max(p,0),height:Math.max(m,0)})}),Gke=Ae(Hi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),q6=Ae(yh,bh,(t,e)=>({x:0,y:0,width:t,height:e})),Kke=O.createContext(null),Ua=()=>O.useContext(Kke)!=null,xI=t=>t.brush,AI=Ae([xI,Hi,Ile],(t,e,r)=>({height:t.height,x:at(t.x)?t.x:e.left,y:at(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:at(t.width)?t.width:e.width})),Ole={},kle={},Rle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),c=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&c(),m()};let h=null;const d=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},p=()=>{h!==null&&(clearTimeout(h),h=null)},m=()=>{p(),s=void 0,o=null},v=()=>{c()},y=function(...w){if(i!=null&&i.aborted)return;s=this,o=w;const b=h==null;d(),l&&b&&c()};return y.schedule=d,y.cancel=m,y.flush=v,i==null||i.addEventListener("abort",m,{once:!0}),y}t.debounce=e})(Rle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rle;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let c,f=null;const h=e.debounce(function(...m){c=n.apply(this,m),f=null},i,{edges:u}),d=function(...m){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(c=n.apply(this,m),f=Date.now(),h.cancel(),h.schedule(),c):(h.apply(this,m),c)},p=()=>(h.flush(),c);return d.cancel=h.cancel,d.flush=p,d}t.debounce=r})(kle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kle;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(n,i,{leading:s,maxWait:i,trailing:o})}t.throttle=r})(Ole);var Xke=Ole.throttle;const Yke=Sl(Xke);var N2=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},Fle=(t,e,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=ih(n)?t:Number(n),l=ih(i)?e:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},Qke={width:0,height:0,overflow:"visible"},Zke={width:0,overflowX:"visible"},Jke={height:0,overflowY:"visible"},eRe={},tRe=t=>{var{width:e,height:r}=t,n=ih(e),i=ih(r);return n&&i?Qke:n?Zke:i?Jke:eRe};function rRe(t){var{width:e,height:r,aspect:n}=t,i=e,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function zn(t){return Number.isFinite(t)}function Ac(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function vB(){return vB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vB.apply(null,arguments)}function Xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xq(Object(r),!0).forEach(function(n){nRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nRe(t,e,r){return(e=iRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iRe(t){var e=aRe(t,"string");return typeof e=="symbol"?e:e+""}function aRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lle=O.createContext({width:-1,height:-1});function sRe(t){return Ac(t.width)&&Ac(t.height)}function Ble(t){var{children:e,width:r,height:n}=t,i=O.useMemo(()=>({width:r,height:n}),[r,n]);return sRe(i)?O.createElement(Lle.Provider,{value:i},e):null}var H6=()=>O.useContext(Lle),oRe=O.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:u,debounce:c=0,id:f,className:h,onResize:d,style:p={}}=t,m=O.useRef(null),v=O.useRef();v.current=d,O.useImperativeHandle(e,()=>m.current);var[y,w]=O.useState({containerWidth:n.width,containerHeight:n.height}),b=O.useCallback((S,C)=>{w(D=>{var N=Math.round(S),P=Math.round(C);return D.containerWidth===N&&D.containerHeight===P?D:{containerWidth:N,containerHeight:P}})},[]);O.useEffect(()=>{if(m.current==null||typeof ResizeObserver>"u")return SS;var S=P=>{var M,{width:j,height:K}=P[0].contentRect;b(j,K),(M=v.current)===null||M===void 0||M.call(v,j,K)};c>0&&(S=Yke(S,c,{trailing:!0,leading:!1}));var C=new ResizeObserver(S),{width:D,height:N}=m.current.getBoundingClientRect();return b(D,N),C.observe(m.current),()=>{C.disconnect()}},[b,c]);var{containerWidth:_,containerHeight:x}=y;N2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:A,calculatedHeight:E}=Fle(_,x,{width:i,height:a,aspect:r,maxHeight:l});return N2(A!=null&&A>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,E,i,a,s,o,r),O.createElement("div",{id:f?"".concat(f):void 0,className:xr("recharts-responsive-container",h),style:Yq(Yq({},p),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:m},O.createElement("div",{style:tRe({width:i,height:a})},O.createElement(Ble,{width:A,height:E},u)))}),Qq=O.forwardRef((t,e)=>{var r=H6();if(Ac(r.width)&&Ac(r.height))return t.children;var{width:n,height:i}=rRe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=Fle(void 0,void 0,{width:n,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return at(a)&&at(s)?O.createElement(Ble,{width:a,height:s},t.children):O.createElement(oRe,vB({},t,{width:n,height:i,ref:e}))});function $le(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var _I=()=>{var t,e=Ua(),r=st(Gke),n=st(AI),i=(t=st(xI))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},lRe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},jle=()=>{var t;return(t=st(Hi))!==null&&t!==void 0?t:lRe},W6=()=>st(yh),G6=()=>st(bh),uRe=()=>st(t=>t.layout.margin),cr=t=>t.layout.layoutType,PS=()=>st(cr),cRe=()=>{var t=PS();return t!==void 0},EI=t=>{var e=bn(),r=Ua(),{width:n,height:i}=t,a=H6(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),O.useEffect(()=>{!r&&Ac(s)&&Ac(o)&&e(gke({width:s,height:o}))},[e,r,s,o]),null},Vle=Symbol.for("immer-nothing"),Zq=Symbol.for("immer-draftable"),To=Symbol.for("immer-state");function eu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var UA=Object.getPrototypeOf;function cw(t){return!!t&&!!t[To]}function Av(t){var e;return t?Ule(t)||Array.isArray(t)||!!t[Zq]||!!((e=t.constructor)!=null&&e[Zq])||MS(t)||CI(t):!1}var fRe=Object.prototype.constructor.toString(),Jq=new WeakMap;function Ule(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Jq.get(r);return n===void 0&&(n=Function.toString.call(r),Jq.set(r,n)),n===fRe}function P2(t,e,r=!0){SI(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function SI(t){const e=t[To];return e?e.type_:Array.isArray(t)?1:MS(t)?2:CI(t)?3:0}function yB(t,e){return SI(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function zle(t,e,r){const n=SI(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function hRe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function MS(t){return t instanceof Map}function CI(t){return t instanceof Set}function vm(t){return t.copy_||t.base_}function bB(t,e){if(MS(t))return new Map(t);if(CI(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Ule(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[To];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(UA(t),n)}else{const n=UA(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function K6(t,e=!1){return TI(t)||cw(t)||!Av(t)||(SI(t)>1&&Object.defineProperties(t,{set:dT,add:dT,clear:dT,delete:dT}),Object.freeze(t),e&&Object.values(t).forEach(r=>K6(r,!0))),t}function dRe(){eu(2)}var dT={value:dRe};function TI(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var pRe={};function _v(t){const e=pRe[t];return e||eu(0,t),e}var zA;function qle(){return zA}function mRe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eH(t,e){e&&(_v("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function wB(t){xB(t),t.drafts_.forEach(gRe),t.drafts_=null}function xB(t){t===zA&&(zA=t.parent_)}function tH(t){return zA=mRe(zA,t)}function gRe(t){const e=t[To];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function rH(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[To].modified_&&(wB(e),eu(4)),Av(t)&&(t=M2(e,t),e.parent_||I2(e,t)),e.patches_&&_v("Patches").generateReplacementPatches_(r[To].base_,t,e.patches_,e.inversePatches_)):t=M2(e,r,[]),wB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Vle?t:void 0}function M2(t,e,r){if(TI(e))return e;const n=t.immer_.shouldUseStrictIteration(),i=e[To];if(!i)return P2(e,(a,s)=>nH(t,i,e,a,s,r),n),e;if(i.scope_!==t)return e;if(!i.modified_)return I2(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),P2(s,(l,u)=>nH(t,i,a,l,u,r,o),n),I2(t,a,!1),r&&t.patches_&&_v("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function nH(t,e,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=TI(i);if(!(o&&!s)){if(cw(i)){const l=a&&e&&e.type_!==3&&!yB(e.assigned_,n)?a.concat(n):void 0,u=M2(t,i,l);if(zle(r,n,u),cw(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Av(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&o)return;M2(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(MS(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&I2(t,i)}}}function I2(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&K6(e,r)}function vRe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:qle(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=X6;r&&(i=[n],a=qA);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var X6={get(t,e){if(e===To)return t;const r=vm(t);if(!yB(r,e))return yRe(t,r,e);const n=r[e];return t.finalized_||!Av(n)?n:n===aR(t.base_,e)?(sR(t),t.copy_[e]=_B(n,t)):n},has(t,e){return e in vm(t)},ownKeys(t){return Reflect.ownKeys(vm(t))},set(t,e,r){const n=Hle(vm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=aR(vm(t),e),a=i==null?void 0:i[To];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(hRe(r,i)&&(r!==void 0||yB(t.base_,e)))return!0;sR(t),AB(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sR(t),AB(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=vm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){eu(11)},getPrototypeOf(t){return UA(t.base_)},setPrototypeOf(){eu(12)}},qA={};P2(X6,(t,e)=>{qA[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qA.deleteProperty=function(t,e){return qA.set.call(this,t,e,void 0)};qA.set=function(t,e,r){return X6.set.call(this,t[0],e,r,t[0])};function aR(t,e){const r=t[To];return(r?vm(r):t)[e]}function yRe(t,e,r){var i;const n=Hle(e,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function Hle(t,e){if(!(e in t))return;let r=UA(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=UA(r)}}function AB(t){t.modified_||(t.modified_=!0,t.parent_&&AB(t.parent_))}function sR(t){t.copy_||(t.copy_=bB(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var bRe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const s=this;return function(l=a,...u){return s.produce(l,c=>r.call(this,c,...u))}}typeof r!="function"&&eu(6),n!==void 0&&typeof n!="function"&&eu(7);let i;if(Av(e)){const a=tH(this),s=_B(e,void 0);let o=!0;try{i=r(s),o=!1}finally{o?wB(a):xB(a)}return eH(a,n),rH(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===Vle&&(i=void 0),this.autoFreeze_&&K6(i,!0),n){const a=[],s=[];_v("Patches").generateReplacementPatches_(e,i,a,s),n(a,s)}return i}else eu(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let n,i;return[this.produce(e,r,(s,o)=>{n=s,i=o}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Av(t)||eu(8),cw(t)&&(t=wRe(t));const e=tH(this),r=_B(t,void 0);return r[To].isManual_=!0,xB(e),r}finishDraft(t,e){const r=t&&t[To];(!r||!r.isManual_)&&eu(9);const{scope_:n}=r;return eH(n,e),rH(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=_v("Patches").applyPatches_;return cw(t)?n(t,e):this.produce(t,i=>n(i,e))}};function _B(t,e){const r=MS(t)?_v("MapSet").proxyMap_(t,e):CI(t)?_v("MapSet").proxySet_(t,e):vRe(t,e);return(e?e.scope_:qle()).drafts_.push(r),r}function wRe(t){return cw(t)||eu(10,t),Wle(t)}function Wle(t){if(!Av(t)||TI(t))return t;const e=t[To];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=bB(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=bB(t,!0);return P2(r,(i,a)=>{zle(r,i,Wle(a))},n),e&&(e.finalized_=!1),r}var xRe=new bRe;xRe.produce;var ARe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Gle=zs({name:"legend",initialState:ARe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:nn()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ou(t).payload.indexOf(r);i>-1&&(t.payload[i]=n)},prepare:nn()},removeLegendPayload:{reducer(t,e){var r=ou(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:nn()}}}),{setLegendSize:iH,setLegendSettings:_Re,addLegendPayload:ERe,replaceLegendPayload:SRe,removeLegendPayload:CRe}=Gle.actions,TRe=Gle.reducer,DRe=["contextPayload"];function EB(){return EB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EB.apply(null,arguments)}function aH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aH(Object(r),!0).forEach(function(n){NRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NRe(t,e,r){return(e=PRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PRe(t){var e=MRe(t,"string");return typeof e=="symbol"?e:e+""}function MRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IRe(t,e){if(t==null)return{};var r,n,i=ORe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ORe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function kRe(t){return t.value}function RRe(t){var{contextPayload:e}=t,r=IRe(t,DRe),n=Voe(e,t.payloadUniqBy,kRe),i=fw(fw({},r),{},{payload:n});return O.isValidElement(t.content)?O.cloneElement(t.content,i):typeof t.content=="function"?O.createElement(t.content,i):O.createElement(kIe,i)}function FRe(t,e,r,n,i,a){var{layout:s,align:o,verticalAlign:l}=e,u,c;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&s==="vertical"?u={left:((n||0)-a.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?c={top:((i||0)-a.height)/2}:c=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),fw(fw({},u),c)}function LRe(t){var e=bn();return O.useEffect(()=>{e(_Re(t))},[e,t]),null}function BRe(t){var e=bn();return O.useEffect(()=>(e(iH(t)),()=>{e(iH({width:0,height:0}))}),[e,t]),null}function $Re(t,e,r,n){return t==="vertical"&&at(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var jRe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function SB(t){var e=va(t,jRe),r=yOe(),n=NMe(),i=uRe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[u,c]=Joe([r]),f=W6(),h=G6();if(f==null||h==null)return null;var d=f-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),p=$Re(e.layout,s,a,d),m=l?o:fw(fw({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},FRe(o,e,i,f,h,u)),o),v=l??n;if(v==null||r==null)return null;var y=O.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:c},O.createElement(LRe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&O.createElement(BRe,{width:u.width,height:u.height}),O.createElement(RRe,EB({},e,p,{margin:i,chartWidth:f,chartHeight:h,contextPayload:r})));return mM.createPortal(y,v)}SB.displayName="Legend";function CB(){return CB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CB.apply(null,arguments)}function sH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sH(Object(r),!0).forEach(function(n){VRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VRe(t,e,r){return(e=URe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function URe(t){var e=zRe(t,"string");return typeof e=="symbol"?e:e+""}function zRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qRe(t){return Array.isArray(t)&&xc(t[0])&&xc(t[1])?t.join(" ~ "):t}var HRe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:u,label:c,labelFormatter:f,accessibilityLayer:h=!1}=t,d=()=>{if(a&&a.length){var x={padding:0,margin:0},A=(o?uI(a,o):a).map((E,S)=>{if(E.type==="none")return null;var C=E.formatter||s||qRe,{value:D,name:N}=E,P=D,M=N;if(C){var j=C(D,N,E,S,a);if(Array.isArray(j))[P,M]=j;else if(j!=null)P=j;else return null}var K=oR({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:K},xc(M)?O.createElement("span",{className:"recharts-tooltip-item-name"},M):null,xc(M)?O.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,O.createElement("span",{className:"recharts-tooltip-item-value"},P),O.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:x},A)}return null},p=oR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=oR({margin:0},i),v=!ln(c),y=v?c:"",w=xr("recharts-default-tooltip",l),b=xr("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(y=f(c,a));var _=h?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",CB({className:w,style:p},_),O.createElement("p",{className:b,style:m},O.isValidElement(y)?y:"".concat(y)),d())},k1="recharts-tooltip-wrapper",WRe={visibility:"hidden"};function GRe(t){var{coordinate:e,translateX:r,translateY:n}=t;return xr(k1,{["".concat(k1,"-right")]:at(r)&&e&&at(e.x)&&r>=e.x,["".concat(k1,"-left")]:at(r)&&e&&at(e.x)&&r<e.x,["".concat(k1,"-bottom")]:at(n)&&e&&at(e.y)&&n>=e.y,["".concat(k1,"-top")]:at(n)&&e&&at(e.y)&&n<e.y})}function oH(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=t;if(a&&at(a[n]))return a[n];var c=r[n]-o-(i>0?i:0),f=r[n]+i;if(e[n])return s[n]?c:f;var h=l[n];if(h==null)return 0;if(s[n]){var d=c,p=h;return d<p?Math.max(f,h):Math.max(c,h)}if(u==null)return 0;var m=f+o,v=h+u;return m>v?Math.max(c,h):Math.max(f,h)}function KRe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function XRe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=t,u,c,f;return s.height>0&&s.width>0&&r?(c=oH({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=oH({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=KRe({translateX:c,translateY:f,useTranslate3d:o})):u=WRe,{cssProperties:u,cssClasses:GRe({translateX:c,translateY:f,coordinate:r})}}function lH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lH(Object(r),!0).forEach(function(n){TB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TB(t,e,r){return(e=YRe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YRe(t){var e=QRe(t,"string");return typeof e=="symbol"?e:e+""}function QRe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ZRe extends O.PureComponent{constructor(){super(...arguments),TB(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),TB(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:u,position:c,reverseDirection:f,useTranslate3d:h,viewBox:d,wrapperStyle:p,lastBoundingBox:m,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:b}=XRe({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:c,reverseDirection:f,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:d}),_=y?{}:pT(pT({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),x=pT(pT({},_),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return O.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:x,ref:v},a)}}var Kle=()=>{var t;return(t=st(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function DB(){return DB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DB.apply(null,arguments)}function uH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uH(Object(r),!0).forEach(function(n){JRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JRe(t,e,r){return(e=eFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eFe(t){var e=tFe(t,"string");return typeof e=="symbol"?e:e+""}function tFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fH={curveBasisClosed:KMe,curveBasisOpen:XMe,curveBasis:GMe,curveBumpX:OMe,curveBumpY:kMe,curveLinearClosed:YMe,curveLinear:tI,curveMonotoneX:QMe,curveMonotoneY:ZMe,curveNatural:JMe,curveStep:eIe,curveStepAfter:rIe,curveStepBefore:tIe},O2=t=>zn(t.x)&&zn(t.y),hH=t=>t.base!=null&&O2(t.base)&&O2(t),R1=t=>t.x,F1=t=>t.y,rFe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(ES(t));return(r==="curveMonotone"||r==="curveBump")&&e?fH["".concat(r).concat(e==="vertical"?"Y":"X")]:fH[r]||tI},nFe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,s=rFe(e,i),o=a?r.filter(O2):r,l;if(Array.isArray(n)){var u=r.map((d,p)=>cH(cH({},d),{},{base:n[p]}));i==="vertical"?l=sT().y(F1).x1(R1).x0(d=>d.base.x):l=sT().x(R1).y1(F1).y0(d=>d.base.y);var c=l.defined(hH).curve(s),f=a?u.filter(hH):u;return c(f)}i==="vertical"&&at(n)?l=sT().y(F1).x1(R1).x0(n):at(n)?l=sT().x(R1).y1(F1).y0(n):l=ooe().x(R1).y(F1);var h=l.defined(O2).curve(s);return h(o)},Xle=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?nFe(t):n;return O.createElement("path",DB({},hu(t),_6(t),{className:xr("recharts-curve",e),d:a===null?void 0:a,ref:i}))},iFe=["x","y","top","left","width","height","className"];function NB(){return NB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NB.apply(null,arguments)}function dH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aFe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dH(Object(r),!0).forEach(function(n){sFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sFe(t,e,r){return(e=oFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oFe(t){var e=lFe(t,"string");return typeof e=="symbol"?e:e+""}function lFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uFe(t,e){if(t==null)return{};var r,n,i=cFe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function cFe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var fFe=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),hFe=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=t,l=uFe(t,iFe),u=aFe({x:e,y:r,top:n,left:i,width:a,height:s},l);return!at(e)||!at(r)||!at(a)||!at(s)||!at(n)||!at(i)?null:O.createElement("path",NB({},fs(u),{className:xr("recharts-cross",o),d:fFe(e,r,a,s,n,i)}))};function dFe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function pH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pH(Object(r),!0).forEach(function(n){pFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pFe(t,e,r){return(e=mFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mFe(t){var e=gFe(t,"string");return typeof e=="symbol"?e:e+""}function gFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vFe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Yle=(t,e,r)=>t.map(n=>"".concat(vFe(n)," ").concat(e,"ms ").concat(r)).join(","),yFe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),HA=(t,e)=>Object.keys(e).reduce((r,n)=>mH(mH({},r),{},{[n]:t(n,e[n])}),{});function gH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ui(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(r),!0).forEach(function(n){bFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bFe(t,e,r){return(e=wFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wFe(t){var e=xFe(t,"string");return typeof e=="symbol"?e:e+""}function xFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k2=(t,e,r)=>t+(e-t)*r,PB=t=>{var{from:e,to:r}=t;return e!==r},Qle=(t,e,r)=>{var n=HA((i,a)=>{if(PB(a)){var[s,o]=t(a.from,a.to,a.velocity);return ui(ui({},a),{},{from:s,velocity:o})}return a},e);return r<1?HA((i,a)=>PB(a)?ui(ui({},a),{},{velocity:k2(a.velocity,n[i].velocity,r),from:k2(a.from,n[i].from,r)}):a,e):Qle(t,n,r-1)};function AFe(t,e,r,n,i,a){var s,o=n.reduce((h,d)=>ui(ui({},h),{},{[d]:{from:t[d],velocity:0,to:e[d]}}),{}),l=()=>HA((h,d)=>d.from,o),u=()=>!Object.values(o).filter(PB).length,c=null,f=h=>{s||(s=h);var d=h-s,p=d/r.dt;o=Qle(r,o,p),i(ui(ui(ui({},t),e),l())),s=h,u()||(c=a.setTimeout(f))};return()=>(c=a.setTimeout(f),()=>{var h;(h=c)===null||h===void 0||h()})}function _Fe(t,e,r,n,i,a,s){var o=null,l=i.reduce((f,h)=>ui(ui({},f),{},{[h]:[t[h],e[h]]}),{}),u,c=f=>{u||(u=f);var h=(f-u)/n,d=HA((m,v)=>k2(...v,r(h)),l);if(a(ui(ui(ui({},t),e),d)),h<1)o=s.setTimeout(c);else{var p=HA((m,v)=>k2(...v,r(1)),l);a(ui(ui(ui({},t),e),p))}};return()=>(o=s.setTimeout(c),()=>{var f;(f=o)===null||f===void 0||f()})}const EFe=(t,e,r,n,i,a)=>{var s=yFe(t,e);return r==null?()=>(i(ui(ui({},t),e)),()=>{}):r.isStepper===!0?AFe(t,e,r,s,i,a):_Fe(t,e,r,n,s,i,a)};var R2=1e-4,Zle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Jle=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),vH=(t,e)=>r=>{var n=Zle(t,e);return Jle(n,r)},SFe=(t,e)=>r=>{var n=Zle(t,e),i=[...n.map((a,s)=>a*s).slice(1),0];return Jle(i,r)},CFe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},TFe=(t,e,r,n)=>{var i=vH(t,r),a=vH(e,n),s=SFe(t,r),o=u=>u>1?1:u<0?0:u,l=u=>{for(var c=u>1?1:u,f=c,h=0;h<8;++h){var d=i(f)-c,p=s(f);if(Math.abs(d-c)<R2||p<R2)return a(f);f=o(f-d/p)}return a(f)};return l.isStepper=!1,l},yH=function(){return TFe(...CFe(...arguments))},DFe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(s,o,l)=>{var u=-(s-o)*r,c=l*n,f=l+(u-c)*i/1e3,h=l*i/1e3+s;return Math.abs(h-o)<R2&&Math.abs(f)<R2?[o,0]:[h,f]};return a.isStepper=!0,a.dt=i,a},NFe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yH(t);case"spring":return DFe();default:if(t.split("(")[0]==="cubic-bezier")return yH(t)}return typeof t=="function"?t:null};function PFe(t){var e,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...u]=o;if(typeof l=="number"){i=t.setTimeout(a.bind(null,u),l);return}a(l),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,r(e)),typeof s=="object"&&(e=s,r(e)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>t}}class MFe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function IFe(){return PFe(new MFe)}var OFe=O.createContext(IFe);function kFe(t,e){var r=O.useContext(OFe);return O.useMemo(()=>e??r(t),[t,e,r])}var RFe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),IS={devToolsEnabled:!1,isSsr:RFe()},FFe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},bH={t:0},lR={t:1};function DI(t){var e=va(t,FFe),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:u}=e,c=r==="auto"?!IS.isSsr:r,f=kFe(e.animationId,e.animationManager),[h,d]=O.useState(c?bH:lR),p=O.useRef(null);return O.useEffect(()=>{c||d(lR)},[c]),O.useEffect(()=>{if(!c||!n)return SS;var m=EFe(bH,lR,NFe(a),i,d,f.getTimeoutController()),v=()=>{p.current=m()};return f.start([l,s,v,i,o]),()=>{f.stop(),p.current&&p.current(),o()}},[c,n,i,a,s,l,o,f]),u(h.t)}function NI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=O.useRef(BA(e)),n=O.useRef(t);return n.current!==t&&(r.current=BA(e),n.current=t),r.current}var LFe=["radius"],BFe=["radius"];function wH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wH(Object(r),!0).forEach(function(n){$Fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Fe(t,e,r){return(e=jFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jFe(t){var e=VFe(t,"string");return typeof e=="symbol"?e:e+""}function VFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F2(){return F2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},F2.apply(null,arguments)}function AH(t,e){if(t==null)return{};var r,n,i=UFe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function UFe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _H=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&i instanceof Array){for(var c=[0,0,0,0],f=0,h=4;f<h;f++)c[f]=i[f]>a?a:i[f];u="M".concat(t,",").concat(e+s*c[0]),c[0]>0&&(u+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(t+o*c[0],",").concat(e)),u+="L ".concat(t+r-o*c[1],",").concat(e),c[1]>0&&(u+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,`,
        `).concat(t+r,",").concat(e+s*c[1])),u+="L ".concat(t+r,",").concat(e+n-s*c[2]),c[2]>0&&(u+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,`,
        `).concat(t+r-o*c[2],",").concat(e+n)),u+="L ".concat(t+o*c[3],",").concat(e+n),c[3]>0&&(u+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+n-s*c[3])),u+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);u="M ".concat(t,",").concat(e+s*d,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+o*d,",").concat(e,`
            L `).concat(t+r-o*d,",").concat(e,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+r,",").concat(e+s*d,`
            L `).concat(t+r,",").concat(e+n-s*d,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+r-o*d,",").concat(e+n,`
            L `).concat(t+o*d,",").concat(e+n,`
            A `).concat(d,",").concat(d,",0,0,").concat(l,",").concat(t,",").concat(e+n-s*d," Z")}else u="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},EH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eue=t=>{var e=va(t,EH),r=O.useRef(null),[n,i]=O.useState(-1);O.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var V=r.current.getTotalLength();V&&i(V)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:u,className:c}=e,{animationEasing:f,animationDuration:h,animationBegin:d,isAnimationActive:p,isUpdateAnimationActive:m}=e,v=O.useRef(o),y=O.useRef(l),w=O.useRef(a),b=O.useRef(s),_=O.useMemo(()=>({x:a,y:s,width:o,height:l,radius:u}),[a,s,o,l,u]),x=NI(_,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var A=xr("recharts-rectangle",c);if(!m){var E=fs(e),{radius:S}=E,C=AH(E,LFe);return O.createElement("path",F2({},C,{radius:typeof u=="number"?u:void 0,className:A,d:_H(a,s,o,l,u)}))}var D=v.current,N=y.current,P=w.current,M=b.current,j="0px ".concat(n===-1?1:n,"px"),K="".concat(n,"px 0px"),k=Yle(["strokeDasharray"],h,typeof f=="string"?f:EH.animationEasing);return O.createElement(DI,{animationId:x,key:x,canBegin:n>0,duration:h,easing:f,isActive:m,begin:d},V=>{var q=Nn(D,o,V),H=Nn(N,l,V),ee=Nn(P,a,V),le=Nn(M,s,V);r.current&&(v.current=q,y.current=H,w.current=ee,b.current=le);var re;p?V>0?re={transition:k,strokeDasharray:K}:re={strokeDasharray:j}:re={strokeDasharray:K};var L=fs(e),{radius:ie}=L,X=AH(L,BFe);return O.createElement("path",F2({},X,{radius:typeof u=="number"?u:void 0,className:A,d:_H(ee,le,q,H,u),ref:r,style:xH(xH({},re),e.style)}))})};function SH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function CH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SH(Object(r),!0).forEach(function(n){zFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zFe(t,e,r){return(e=qFe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qFe(t){var e=HFe(t,"string");return typeof e=="symbol"?e:e+""}function HFe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L2=Math.PI/180,WFe=t=>t*180/Math.PI,ua=(t,e,r,n)=>({x:t+Math.cos(-L2*n)*r,y:e+Math.sin(-L2*n)*r}),GFe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},KFe=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},XFe=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,s=KFe({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:WFe(l),angleInRadian:l}},YFe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},QFe=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return t+s*360},ZFe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:i,angle:a}=XFe({x:r,y:n},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:u}=YFe(e),c=a,f;if(l<=u){for(;c>u;)c-=360;for(;c<l;)c+=360;f=c>=l&&c<=u}else{for(;c>l;)c-=360;for(;c<u;)c+=360;f=c>=u&&c<=l}return f?CH(CH({},e),{},{radius:i,angle:QFe(c,e)}):null};function tue(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,s=ua(e,r,n,i),o=ua(e,r,n,a);return{points:[s,o],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function MB(){return MB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MB.apply(null,arguments)}var JFe=(t,e)=>{var r=Rs(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},mT=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=t,u=o*(s?1:-1)+n,c=Math.asin(o/u)/L2,f=l?i:i+a*c,h=ua(e,r,u,f),d=ua(e,r,n,f),p=l?i-a*c:i,m=ua(e,r,u*Math.cos(c*L2),p);return{center:h,circleTangency:d,lineTangency:m,theta:c}},rue=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=t,o=JFe(a,s),l=a+o,u=ua(e,r,i,a),c=ua(e,r,i,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(n>0){var h=ua(e,r,n,a),d=ua(e,r,n,l);f+="L ".concat(d.x,",").concat(d.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(e,",").concat(r," Z");return f},e3e=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:u}=t,c=Rs(u-l),{circleTangency:f,lineTangency:h,theta:d}=mT({cx:e,cy:r,radius:i,angle:l,sign:c,cornerRadius:a,cornerIsExternal:o}),{circleTangency:p,lineTangency:m,theta:v}=mT({cx:e,cy:r,radius:i,angle:u,sign:-c,cornerRadius:a,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-d-v;if(y<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):rue({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:_,theta:x}=mT({cx:e,cy:r,radius:n,angle:l,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:A,lineTangency:E,theta:S}=mT({cx:e,cy:r,radius:n,angle:u,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(l-u):Math.abs(l-u)-x-S;if(C<0&&a===0)return"".concat(w,"L").concat(e,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(c>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(e,",").concat(r,"Z");return w},t3e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nue=t=>{var e=va(t,t3e),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c,className:f}=e;if(a<i||u===c)return null;var h=xr("recharts-sector",f),d=a-i,p=pu(s,d,0,!0),m;return p>0&&Math.abs(u-c)<360?m=e3e({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(p,d/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c}):m=rue({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:c}),O.createElement("path",MB({},fs(e),{className:h,d:m}))};function r3e(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(_oe(e)){if(t==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,l=ua(n,i,a,o),u=ua(n,i,s,o);return[{x:l.x,y:l.y},{x:u.x,y:u.y}]}return tue(e)}}var iue={},aue={},sue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k6;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(sue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sue;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(aue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R6,r=aue;function n(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=i,i+=s;return l}t.range=n})(iue);var n3e=iue.range;const oue=Sl(n3e);function op(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i3e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Y6(t){let e,r,n;t.length!==2?(e=op,r=(o,l)=>op(t(o),l),n=(o,l)=>t(o)-l):(e=t===op||t===i3e?t:a3e,r=t,n=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;r(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;r(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){const f=i(o,l,u,c-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function a3e(){return 0}function lue(t){return t===null?NaN:+t}function*s3e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const o3e=Y6(op),OS=o3e.right;Y6(lue).center;class TH extends Map{constructor(e,r=c3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(DH(this,e))}has(e){return super.has(DH(this,e))}set(e,r){return super.set(l3e(this,e),r)}delete(e){return super.delete(u3e(this,e))}}function DH({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function l3e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function u3e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function c3e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function f3e(t=op){if(t===op)return uue;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function uue(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const h3e=Math.sqrt(50),d3e=Math.sqrt(10),p3e=Math.sqrt(2);function B2(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=h3e?10:a>=d3e?5:a>=p3e?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=r&&r<2?B2(t,e,r*2):[o,l,u]}function IB(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?B2(e,t,r):B2(t,e,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function OB(t,e,r){return e=+e,t=+t,r=+r,B2(t,e,r)[2]}function kB(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?OB(e,t,r):OB(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function NH(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function PH(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function cue(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?uue:f3e(i);n>r;){if(n-r>600){const l=n-r+1,u=e-r+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),d=Math.max(r,Math.floor(e-u*f/l+h)),p=Math.min(n,Math.floor(e+(l-u)*f/l+h));cue(t,e,d,p,i)}const a=t[e];let s=r,o=n;for(L1(t,r,e),i(t[n],a)>0&&L1(t,r,n);s<o;){for(L1(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[r],a)===0?L1(t,r,o):(++o,L1(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function L1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m3e(t,e,r){if(t=Float64Array.from(s3e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return PH(t);if(e>=1)return NH(t);var n,i=(n-1)*e,a=Math.floor(i),s=NH(cue(t,a).subarray(0,a+1)),o=PH(t.subarray(a+1));return s+(o-s)*(i-a)}}function g3e(t,e,r=lue){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),o=+r(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function v3e(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Tl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RB=Symbol("implicit");function Q6(){var t=new TH,e=[],r=[],n=RB;function i(a){let s=t.get(a);if(s===void 0){if(n!==RB)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new TH;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Q6(e,r).unknown(n)},Tl.apply(i,arguments),i}function Z6(){var t=Q6().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,o=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<n,p=d?i:n,m=d?n:i;a=(m-p)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),p+=(m-p-a*(h-l))*c,s=a*(1-l),o&&(p=Math.round(p),s=Math.round(s));var v=v3e(h).map(function(y){return p+a*y});return r(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Z6(e(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(c)},Tl.apply(f(),arguments)}function fue(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fue(e())},t}function y3e(){return fue(Z6.apply(null,arguments).paddingInner(1))}function J6(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function hue(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function kS(){}var WA=.7,$2=1/WA,p0="\\s*([+-]?\\d+)\\s*",GA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b3e=/^#([0-9a-f]{3,8})$/,w3e=new RegExp(`^rgb\\(${p0},${p0},${p0}\\)$`),x3e=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),A3e=new RegExp(`^rgba\\(${p0},${p0},${p0},${GA}\\)$`),_3e=new RegExp(`^rgba\\(${vc},${vc},${vc},${GA}\\)$`),E3e=new RegExp(`^hsl\\(${GA},${vc},${vc}\\)$`),S3e=new RegExp(`^hsla\\(${GA},${vc},${vc},${GA}\\)$`),MH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J6(kS,KA,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:IH,formatHex:IH,formatHex8:C3e,formatHsl:T3e,formatRgb:OH,toString:OH});function IH(){return this.rgb().formatHex()}function C3e(){return this.rgb().formatHex8()}function T3e(){return due(this).formatHsl()}function OH(){return this.rgb().formatRgb()}function KA(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=b3e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?kH(e):r===3?new Fs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?gT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?gT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=w3e.exec(t))?new Fs(e[1],e[2],e[3],1):(e=x3e.exec(t))?new Fs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=A3e.exec(t))?gT(e[1],e[2],e[3],e[4]):(e=_3e.exec(t))?gT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=E3e.exec(t))?LH(e[1],e[2]/100,e[3]/100,1):(e=S3e.exec(t))?LH(e[1],e[2]/100,e[3]/100,e[4]):MH.hasOwnProperty(t)?kH(MH[t]):t==="transparent"?new Fs(NaN,NaN,NaN,0):null}function kH(t){return new Fs(t>>16&255,t>>8&255,t&255,1)}function gT(t,e,r,n){return n<=0&&(t=e=r=NaN),new Fs(t,e,r,n)}function D3e(t){return t instanceof kS||(t=KA(t)),t?(t=t.rgb(),new Fs(t.r,t.g,t.b,t.opacity)):new Fs}function FB(t,e,r,n){return arguments.length===1?D3e(t):new Fs(t,e,r,n??1)}function Fs(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}J6(Fs,FB,hue(kS,{brighter(t){return t=t==null?$2:Math.pow($2,t),new Fs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?WA:Math.pow(WA,t),new Fs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fs(iv(this.r),iv(this.g),iv(this.b),j2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RH,formatHex:RH,formatHex8:N3e,formatRgb:FH,toString:FH}));function RH(){return`#${Pm(this.r)}${Pm(this.g)}${Pm(this.b)}`}function N3e(){return`#${Pm(this.r)}${Pm(this.g)}${Pm(this.b)}${Pm((isNaN(this.opacity)?1:this.opacity)*255)}`}function FH(){const t=j2(this.opacity);return`${t===1?"rgb(":"rgba("}${iv(this.r)}, ${iv(this.g)}, ${iv(this.b)}${t===1?")":`, ${t})`}`}function j2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function iv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pm(t){return t=iv(t),(t<16?"0":"")+t.toString(16)}function LH(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new tu(t,e,r,n)}function due(t){if(t instanceof tu)return new tu(t.h,t.s,t.l,t.opacity);if(t instanceof kS||(t=KA(t)),!t)return new tu;if(t instanceof tu)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-e)/o+2:s=(e-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new tu(s,o,l,t.opacity)}function P3e(t,e,r,n){return arguments.length===1?due(t):new tu(t,e,r,n??1)}function tu(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}J6(tu,P3e,hue(kS,{brighter(t){return t=t==null?$2:Math.pow($2,t),new tu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?WA:Math.pow(WA,t),new tu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Fs(uR(t>=240?t-240:t+120,i,n),uR(t,i,n),uR(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new tu(BH(this.h),vT(this.s),vT(this.l),j2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=j2(this.opacity);return`${t===1?"hsl(":"hsla("}${BH(this.h)}, ${vT(this.s)*100}%, ${vT(this.l)*100}%${t===1?")":`, ${t})`}`}}));function BH(t){return t=(t||0)%360,t<0?t+360:t}function vT(t){return Math.max(0,Math.min(1,t||0))}function uR(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const ej=t=>()=>t;function M3e(t,e){return function(r){return t+r*e}}function I3e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function O3e(t){return(t=+t)==1?pue:function(e,r){return r-e?I3e(e,r,t):ej(isNaN(e)?r:e)}}function pue(t,e){var r=e-t;return r?M3e(t,r):ej(isNaN(t)?e:t)}const $H=function t(e){var r=O3e(e);function n(i,a){var s=r((i=FB(i)).r,(a=FB(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),u=pue(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=t,n}(1);function k3e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function R3e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function F3e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=$w(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function L3e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function V2(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function B3e(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=$w(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var LB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cR=new RegExp(LB.source,"g");function $3e(t){return function(){return t}}function j3e(t){return function(e){return t(e)+""}}function V3e(t,e){var r=LB.lastIndex=cR.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(n=LB.exec(t))&&(i=cR.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:V2(n,i)})),r=cR.lastIndex;return r<e.length&&(a=e.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?j3e(l[0].x):$3e(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function $w(t,e){var r=typeof e,n;return e==null||r==="boolean"?ej(e):(r==="number"?V2:r==="string"?(n=KA(e))?(e=n,$H):V3e:e instanceof KA?$H:e instanceof Date?L3e:R3e(e)?k3e:Array.isArray(e)?F3e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B3e:V2)(t,e)}function tj(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function U3e(t,e){e===void 0&&(e=t,t=$w);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function z3e(t){return function(){return t}}function U2(t){return+t}var jH=[0,1];function ns(t){return t}function BB(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:z3e(isNaN(e)?NaN:.5)}function q3e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function H3e(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=BB(i,n),a=r(s,a)):(n=BB(n,i),a=r(a,s)),function(o){return a(n(o))}}function W3e(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=BB(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(o){var l=OS(t,o,1,n)-1;return a[l](i[l](o))}}function RS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function PI(){var t=jH,e=jH,r=$w,n,i,a,s=ns,o,l,u;function c(){var h=Math.min(t.length,e.length);return s!==ns&&(s=q3e(t[0],t[h-1])),o=h>2?W3e:H3e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(n),e,r)))(n(s(h)))}return f.invert=function(h){return s(i((u||(u=o(e,t.map(n),V2)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,U2),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=tj,c()},f.clamp=function(h){return arguments.length?(s=h?!0:ns,c()):s!==ns},f.interpolate=function(h){return arguments.length?(r=h,c()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return n=h,i=d,c()}}function rj(){return PI()(ns,ns)}function G3e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function z2(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function hw(t){return t=z2(Math.abs(t)),t?t[1]:NaN}function K3e(t,e){return function(r,n){for(var i=r.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function X3e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Y3e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function XA(t){if(!(e=Y3e.exec(t)))throw new Error("invalid format: "+t);var e;return new nj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}XA.prototype=nj.prototype;function nj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Q3e(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var mue;function Z3e(t,e){var r=z2(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(mue=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+z2(t,Math.max(0,e+a-1))[0]}function VH(t,e){var r=z2(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const UH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:G3e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>VH(t*100,e),r:VH,s:Z3e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zH(t){return t}var qH=Array.prototype.map,HH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function J3e(t){var e=t.grouping===void 0||t.thousands===void 0?zH:K3e(qH.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?zH:X3e(qH.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=XA(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,v=f.zero,y=f.width,w=f.comma,b=f.precision,_=f.trim,x=f.type;x==="n"?(w=!0,x="g"):UH[x]||(b===void 0&&(b=12),_=!0,x="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var A=m==="$"?r:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?n:/[%p]/.test(x)?s:"",S=UH[x],C=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(N){var P=A,M=E,j,K,k;if(x==="c")M=S(N)+M,N="";else{N=+N;var V=N<0||1/N<0;if(N=isNaN(N)?l:S(Math.abs(N),b),_&&(N=Q3e(N)),V&&+N==0&&p!=="+"&&(V=!1),P=(V?p==="("?p:o:p==="-"||p==="("?"":p)+P,M=(x==="s"?HH[8+mue/3]:"")+M+(V&&p==="("?")":""),C){for(j=-1,K=N.length;++j<K;)if(k=N.charCodeAt(j),48>k||k>57){M=(k===46?i+N.slice(j+1):N.slice(j))+M,N=N.slice(0,j);break}}}w&&!v&&(N=e(N,1/0));var q=P.length+N.length+M.length,H=q<y?new Array(y-q+1).join(h):"";switch(w&&v&&(N=e(H+N,H.length?y-M.length:1/0),H=""),d){case"<":N=P+N+M+H;break;case"=":N=P+H+N+M;break;case"^":N=H.slice(0,q=H.length>>1)+P+N+M+H.slice(q);break;default:N=H+P+N+M;break}return a(N)}return D.toString=function(){return f+""},D}function c(f,h){var d=u((f=XA(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(hw(h)/3)))*3,m=Math.pow(10,-p),v=HH[8+p/3];return function(y){return d(m*y)+v}}return{format:u,formatPrefix:c}}var yT,ij,gue;eLe({thousands:",",grouping:[3],currency:["$",""]});function eLe(t){return yT=J3e(t),ij=yT.format,gue=yT.formatPrefix,yT}function tLe(t){return Math.max(0,-hw(Math.abs(t)))}function rLe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hw(e)/3)))*3-hw(Math.abs(t)))}function nLe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hw(e)-hw(t))+1}function vue(t,e,r,n){var i=kB(t,e,r),a;switch(n=XA(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=rLe(i,s))&&(n.precision=a),gue(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=nLe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=tLe(i))&&(n.precision=a-(n.type==="%")*2);break}}return ij(n)}function Up(t){var e=t.domain;return t.ticks=function(r){var n=e();return IB(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return vue(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],o=n[a],l,u,c=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);c-- >0;){if(u=OB(s,o,r),u===l)return n[i]=s,n[a]=o,e(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function yue(){var t=rj();return t.copy=function(){return RS(t,yue())},Tl.apply(t,arguments),Up(t)}function bue(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,U2),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return bue(t).unknown(e)},t=arguments.length?Array.from(t,U2):[0,1],Up(r)}function wue(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function WH(t){return Math.log(t)}function GH(t){return Math.exp(t)}function iLe(t){return-Math.log(-t)}function aLe(t){return-Math.exp(-t)}function sLe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function oLe(t){return t===10?sLe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lLe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function KH(t){return(e,r)=>-t(-e,r)}function aj(t){const e=t(WH,GH),r=e.domain;let n=10,i,a;function s(){return i=lLe(n),a=oLe(n),r()[0]<0?(i=KH(i),a=KH(a),t(iLe,aLe)):t(WH,GH),e}return e.base=function(o){return arguments.length?(n=+o,s()):n},e.domain=function(o){return arguments.length?(r(o),s()):r()},e.ticks=o=>{const l=r();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),d=i(c),p,m;const v=o==null?10:+o;let y=[];if(!(n%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(p=1;p<n;++p)if(m=h<0?p/a(-h):p*a(h),!(m<u)){if(m>c)break;y.push(m)}}else for(;h<=d;++h)for(p=n-1;p>=1;--p)if(m=h>0?p/a(-h):p*a(h),!(m<u)){if(m>c)break;y.push(m)}y.length*2<v&&(y=IB(u,c,v))}else y=IB(h,d,Math.min(d-h,v)).map(a);return f?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=XA(l)).precision==null&&(l.trim=!0),l=ij(l)),o===1/0)return l;const u=Math.max(1,n*o/e.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*n<n-.5&&(f*=n),f<=u?l(c):""}},e.nice=()=>r(wue(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function xue(){const t=aj(PI()).domain([1,10]);return t.copy=()=>RS(t,xue()).base(t.base()),Tl.apply(t,arguments),t}function XH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function YH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function sj(t){var e=1,r=t(XH(e),YH(e));return r.constant=function(n){return arguments.length?t(XH(e=+n),YH(e)):e},Up(r)}function Aue(){var t=sj(PI());return t.copy=function(){return RS(t,Aue()).constant(t.constant())},Tl.apply(t,arguments)}function QH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function uLe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cLe(t){return t<0?-t*t:t*t}function oj(t){var e=t(ns,ns),r=1;function n(){return r===1?t(ns,ns):r===.5?t(uLe,cLe):t(QH(r),QH(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Up(e)}function lj(){var t=oj(PI());return t.copy=function(){return RS(t,lj()).exponent(t.exponent())},Tl.apply(t,arguments),t}function fLe(){return lj.apply(null,arguments).exponent(.5)}function ZH(t){return Math.sign(t)*t*t}function hLe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function _ue(){var t=rj(),e=[0,1],r=!1,n;function i(a){var s=hLe(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(ZH(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,U2)).map(ZH)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return _ue(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Tl.apply(i,arguments),Up(i)}function Eue(){var t=[],e=[],r=[],n;function i(){var s=0,o=Math.max(1,e.length);for(r=new Array(o-1);++s<o;)r[s-1]=g3e(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:e[OS(r,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(op),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return Eue().domain(t).range(e).unknown(n)},Tl.apply(a,arguments)}function Sue(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[OS(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return Sue().domain([t,e]).range(i).unknown(a)},Tl.apply(Up(s),arguments)}function Cue(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[OS(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Cue().domain(t).range(e).unknown(r)},Tl.apply(i,arguments)}const fR=new Date,hR=new Date;function vi(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>vi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(fR.setTime(+a),hR.setTime(+s),t(fR),t(hR),Math.floor(r(fR,hR))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const q2=vi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);q2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?vi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):q2);q2.range;const Mf=1e3,hl=Mf*60,If=hl*60,sh=If*24,uj=sh*7,JH=sh*30,dR=sh*365,Mm=vi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Mf)},(t,e)=>(e-t)/Mf,t=>t.getUTCSeconds());Mm.range;const cj=vi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mf)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getMinutes());cj.range;const fj=vi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getUTCMinutes());fj.range;const hj=vi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mf-t.getMinutes()*hl)},(t,e)=>{t.setTime(+t+e*If)},(t,e)=>(e-t)/If,t=>t.getHours());hj.range;const dj=vi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*If)},(t,e)=>(e-t)/If,t=>t.getUTCHours());dj.range;const FS=vi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*hl)/sh,t=>t.getDate()-1);FS.range;const MI=vi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sh,t=>t.getUTCDate()-1);MI.range;const Tue=vi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sh,t=>Math.floor(t/sh));Tue.range;function $v(t){return vi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*hl)/uj)}const II=$v(0),H2=$v(1),dLe=$v(2),pLe=$v(3),dw=$v(4),mLe=$v(5),gLe=$v(6);II.range;H2.range;dLe.range;pLe.range;dw.range;mLe.range;gLe.range;function jv(t){return vi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/uj)}const OI=jv(0),W2=jv(1),vLe=jv(2),yLe=jv(3),pw=jv(4),bLe=jv(5),wLe=jv(6);OI.range;W2.range;vLe.range;yLe.range;pw.range;bLe.range;wLe.range;const pj=vi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());pj.range;const mj=vi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());mj.range;const oh=vi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:vi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});oh.range;const lh=vi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());lh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:vi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});lh.range;function Due(t,e,r,n,i,a){const s=[[Mm,1,Mf],[Mm,5,5*Mf],[Mm,15,15*Mf],[Mm,30,30*Mf],[a,1,hl],[a,5,5*hl],[a,15,15*hl],[a,30,30*hl],[i,1,If],[i,3,3*If],[i,6,6*If],[i,12,12*If],[n,1,sh],[n,2,2*sh],[r,1,uj],[e,1,JH],[e,3,3*JH],[t,1,dR]];function o(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:l(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,f){const h=Math.abs(c-u)/f,d=Y6(([,,v])=>v).right(s,h);if(d===s.length)return t.every(kB(u/dR,c/dR,f));if(d===0)return q2.every(Math.max(kB(u,c,f),1));const[p,m]=s[h/s[d-1][2]<s[d][2]/h?d-1:d];return p.every(m)}return[o,l]}const[xLe,ALe]=Due(lh,mj,OI,Tue,dj,fj),[_Le,ELe]=Due(oh,pj,II,FS,hj,cj);function pR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function B1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function SLe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=$1(i),c=j1(i),f=$1(a),h=j1(a),d=$1(s),p=j1(s),m=$1(o),v=j1(o),y=$1(l),w=j1(l),b={a:V,A:q,b:H,B:ee,c:null,d:aW,e:aW,f:KLe,g:iBe,G:sBe,H:HLe,I:WLe,j:GLe,L:Nue,m:XLe,M:YLe,p:le,q:re,Q:lW,s:uW,S:QLe,u:ZLe,U:JLe,V:eBe,w:tBe,W:rBe,x:null,X:null,y:nBe,Y:aBe,Z:oBe,"%":oW},_={a:L,A:ie,b:X,B:pe,c:null,d:sW,e:sW,f:fBe,g:xBe,G:_Be,H:lBe,I:uBe,j:cBe,L:Mue,m:hBe,M:dBe,p:de,q:ae,Q:lW,s:uW,S:pBe,u:mBe,U:gBe,V:vBe,w:yBe,W:bBe,x:null,X:null,y:wBe,Y:ABe,Z:EBe,"%":oW},x={a:D,A:N,b:P,B:M,c:j,d:nW,e:nW,f:VLe,g:rW,G:tW,H:iW,I:iW,j:LLe,L:jLe,m:FLe,M:BLe,p:C,q:RLe,Q:zLe,s:qLe,S:$Le,u:PLe,U:MLe,V:ILe,w:NLe,W:OLe,x:K,X:k,y:rW,Y:tW,Z:kLe,"%":ULe};b.x=A(r,b),b.X=A(n,b),b.c=A(e,b),_.x=A(r,_),_.X=A(n,_),_.c=A(e,_);function A(z,ne){return function(fe){var Q=[],ye=-1,me=0,De=z.length,Le,ze,Be;for(fe instanceof Date||(fe=new Date(+fe));++ye<De;)z.charCodeAt(ye)===37&&(Q.push(z.slice(me,ye)),(ze=eW[Le=z.charAt(++ye)])!=null?Le=z.charAt(++ye):ze=Le==="e"?" ":"0",(Be=ne[Le])&&(Le=Be(fe,ze)),Q.push(Le),me=ye+1);return Q.push(z.slice(me,ye)),Q.join("")}}function E(z,ne){return function(fe){var Q=B1(1900,void 0,1),ye=S(Q,z,fe+="",0),me,De;if(ye!=fe.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ne&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(me=mR(B1(Q.y,0,1)),De=me.getUTCDay(),me=De>4||De===0?W2.ceil(me):W2(me),me=MI.offset(me,(Q.V-1)*7),Q.y=me.getUTCFullYear(),Q.m=me.getUTCMonth(),Q.d=me.getUTCDate()+(Q.w+6)%7):(me=pR(B1(Q.y,0,1)),De=me.getDay(),me=De>4||De===0?H2.ceil(me):H2(me),me=FS.offset(me,(Q.V-1)*7),Q.y=me.getFullYear(),Q.m=me.getMonth(),Q.d=me.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),De="Z"in Q?mR(B1(Q.y,0,1)).getUTCDay():pR(B1(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(De+5)%7:Q.w+Q.U*7-(De+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,mR(Q)):pR(Q)}}function S(z,ne,fe,Q){for(var ye=0,me=ne.length,De=fe.length,Le,ze;ye<me;){if(Q>=De)return-1;if(Le=ne.charCodeAt(ye++),Le===37){if(Le=ne.charAt(ye++),ze=x[Le in eW?ne.charAt(ye++):Le],!ze||(Q=ze(z,fe,Q))<0)return-1}else if(Le!=fe.charCodeAt(Q++))return-1}return Q}function C(z,ne,fe){var Q=u.exec(ne.slice(fe));return Q?(z.p=c.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function D(z,ne,fe){var Q=d.exec(ne.slice(fe));return Q?(z.w=p.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function N(z,ne,fe){var Q=f.exec(ne.slice(fe));return Q?(z.w=h.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function P(z,ne,fe){var Q=y.exec(ne.slice(fe));return Q?(z.m=w.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function M(z,ne,fe){var Q=m.exec(ne.slice(fe));return Q?(z.m=v.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function j(z,ne,fe){return S(z,e,ne,fe)}function K(z,ne,fe){return S(z,r,ne,fe)}function k(z,ne,fe){return S(z,n,ne,fe)}function V(z){return s[z.getDay()]}function q(z){return a[z.getDay()]}function H(z){return l[z.getMonth()]}function ee(z){return o[z.getMonth()]}function le(z){return i[+(z.getHours()>=12)]}function re(z){return 1+~~(z.getMonth()/3)}function L(z){return s[z.getUTCDay()]}function ie(z){return a[z.getUTCDay()]}function X(z){return l[z.getUTCMonth()]}function pe(z){return o[z.getUTCMonth()]}function de(z){return i[+(z.getUTCHours()>=12)]}function ae(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ne=A(z+="",b);return ne.toString=function(){return z},ne},parse:function(z){var ne=E(z+="",!1);return ne.toString=function(){return z},ne},utcFormat:function(z){var ne=A(z+="",_);return ne.toString=function(){return z},ne},utcParse:function(z){var ne=E(z+="",!0);return ne.toString=function(){return z},ne}}}var eW={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,CLe=/^%/,TLe=/[\\^$*+?|[\]().{}]/g;function lr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function DLe(t){return t.replace(TLe,"\\$&")}function $1(t){return new RegExp("^(?:"+t.map(DLe).join("|")+")","i")}function j1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function NLe(t,e,r){var n=Wi.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function PLe(t,e,r){var n=Wi.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function MLe(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function ILe(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function OLe(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function tW(t,e,r){var n=Wi.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function rW(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kLe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function RLe(t,e,r){var n=Wi.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function FLe(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function nW(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function LLe(t,e,r){var n=Wi.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function iW(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function BLe(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function $Le(t,e,r){var n=Wi.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function jLe(t,e,r){var n=Wi.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function VLe(t,e,r){var n=Wi.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ULe(t,e,r){var n=CLe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function zLe(t,e,r){var n=Wi.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function qLe(t,e,r){var n=Wi.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function aW(t,e){return lr(t.getDate(),e,2)}function HLe(t,e){return lr(t.getHours(),e,2)}function WLe(t,e){return lr(t.getHours()%12||12,e,2)}function GLe(t,e){return lr(1+FS.count(oh(t),t),e,3)}function Nue(t,e){return lr(t.getMilliseconds(),e,3)}function KLe(t,e){return Nue(t,e)+"000"}function XLe(t,e){return lr(t.getMonth()+1,e,2)}function YLe(t,e){return lr(t.getMinutes(),e,2)}function QLe(t,e){return lr(t.getSeconds(),e,2)}function ZLe(t){var e=t.getDay();return e===0?7:e}function JLe(t,e){return lr(II.count(oh(t)-1,t),e,2)}function Pue(t){var e=t.getDay();return e>=4||e===0?dw(t):dw.ceil(t)}function eBe(t,e){return t=Pue(t),lr(dw.count(oh(t),t)+(oh(t).getDay()===4),e,2)}function tBe(t){return t.getDay()}function rBe(t,e){return lr(H2.count(oh(t)-1,t),e,2)}function nBe(t,e){return lr(t.getFullYear()%100,e,2)}function iBe(t,e){return t=Pue(t),lr(t.getFullYear()%100,e,2)}function aBe(t,e){return lr(t.getFullYear()%1e4,e,4)}function sBe(t,e){var r=t.getDay();return t=r>=4||r===0?dw(t):dw.ceil(t),lr(t.getFullYear()%1e4,e,4)}function oBe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+lr(e/60|0,"0",2)+lr(e%60,"0",2)}function sW(t,e){return lr(t.getUTCDate(),e,2)}function lBe(t,e){return lr(t.getUTCHours(),e,2)}function uBe(t,e){return lr(t.getUTCHours()%12||12,e,2)}function cBe(t,e){return lr(1+MI.count(lh(t),t),e,3)}function Mue(t,e){return lr(t.getUTCMilliseconds(),e,3)}function fBe(t,e){return Mue(t,e)+"000"}function hBe(t,e){return lr(t.getUTCMonth()+1,e,2)}function dBe(t,e){return lr(t.getUTCMinutes(),e,2)}function pBe(t,e){return lr(t.getUTCSeconds(),e,2)}function mBe(t){var e=t.getUTCDay();return e===0?7:e}function gBe(t,e){return lr(OI.count(lh(t)-1,t),e,2)}function Iue(t){var e=t.getUTCDay();return e>=4||e===0?pw(t):pw.ceil(t)}function vBe(t,e){return t=Iue(t),lr(pw.count(lh(t),t)+(lh(t).getUTCDay()===4),e,2)}function yBe(t){return t.getUTCDay()}function bBe(t,e){return lr(W2.count(lh(t)-1,t),e,2)}function wBe(t,e){return lr(t.getUTCFullYear()%100,e,2)}function xBe(t,e){return t=Iue(t),lr(t.getUTCFullYear()%100,e,2)}function ABe(t,e){return lr(t.getUTCFullYear()%1e4,e,4)}function _Be(t,e){var r=t.getUTCDay();return t=r>=4||r===0?pw(t):pw.ceil(t),lr(t.getUTCFullYear()%1e4,e,4)}function EBe(){return"+0000"}function oW(){return"%"}function lW(t){return+t}function uW(t){return Math.floor(+t/1e3)}var ny,Oue,kue;SBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function SBe(t){return ny=SLe(t),Oue=ny.format,ny.parse,kue=ny.utcFormat,ny.utcParse,ny}function CBe(t){return new Date(t)}function TBe(t){return t instanceof Date?+t:+new Date(+t)}function gj(t,e,r,n,i,a,s,o,l,u){var c=rj(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function x(A){return(l(A)<A?d:o(A)<A?p:s(A)<A?m:a(A)<A?v:n(A)<A?i(A)<A?y:w:r(A)<A?b:_)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?h(Array.from(A,TBe)):h().map(CBe)},c.ticks=function(A){var E=h();return t(E[0],E[E.length-1],A??10)},c.tickFormat=function(A,E){return E==null?x:u(E)},c.nice=function(A){var E=h();return(!A||typeof A.range!="function")&&(A=e(E[0],E[E.length-1],A??10)),A?h(wue(E,A)):c},c.copy=function(){return RS(c,gj(t,e,r,n,i,a,s,o,l,u))},c}function DBe(){return Tl.apply(gj(_Le,ELe,oh,pj,II,FS,hj,cj,Mm,Oue).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NBe(){return Tl.apply(gj(xLe,ALe,lh,mj,OI,MI,dj,fj,Mm,kue).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kI(){var t=0,e=1,r,n,i,a,s=ns,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,s=f(d,p),u):[s(0),s(1)]}}return u.range=c($w),u.rangeRound=c(tj),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),u}}function zp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Rue(){var t=Up(kI()(ns));return t.copy=function(){return zp(t,Rue())},wh.apply(t,arguments)}function Fue(){var t=aj(kI()).domain([1,10]);return t.copy=function(){return zp(t,Fue()).base(t.base())},wh.apply(t,arguments)}function Lue(){var t=sj(kI());return t.copy=function(){return zp(t,Lue()).constant(t.constant())},wh.apply(t,arguments)}function vj(){var t=oj(kI());return t.copy=function(){return zp(t,vj()).exponent(t.exponent())},wh.apply(t,arguments)}function PBe(){return vj.apply(null,arguments).exponent(.5)}function Bue(){var t=[],e=ns;function r(n){if(n!=null&&!isNaN(n=+n))return e((OS(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(op),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>m3e(t,a/n))},r.copy=function(){return Bue(e).domain(t)},wh.apply(r,arguments)}function RI(){var t=0,e=.5,r=1,n=1,i,a,s,o,l,u=ns,c,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-a)*(n*m<n*a?o:l),u(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,r]=m,i=c(t=+t),a=c(e=+e),s=c(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,d):[t,e,r]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(v){var y,w,b;return arguments.length?([y,w,b]=v,u=U3e(m,[y,w,b]),d):[u(0),u(.5),u(1)]}}return d.range=p($w),d.rangeRound=p(tj),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return c=m,i=m(t),a=m(e),s=m(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,d}}function $ue(){var t=Up(RI()(ns));return t.copy=function(){return zp(t,$ue())},wh.apply(t,arguments)}function jue(){var t=aj(RI()).domain([.1,1,10]);return t.copy=function(){return zp(t,jue()).base(t.base())},wh.apply(t,arguments)}function Vue(){var t=sj(RI());return t.copy=function(){return zp(t,Vue()).constant(t.constant())},wh.apply(t,arguments)}function yj(){var t=oj(RI());return t.copy=function(){return zp(t,yj()).exponent(t.exponent())},wh.apply(t,arguments)}function MBe(){return yj.apply(null,arguments).exponent(.5)}const Ex=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Z6,scaleDiverging:$ue,scaleDivergingLog:jue,scaleDivergingPow:yj,scaleDivergingSqrt:MBe,scaleDivergingSymlog:Vue,scaleIdentity:bue,scaleImplicit:RB,scaleLinear:yue,scaleLog:xue,scaleOrdinal:Q6,scalePoint:y3e,scalePow:lj,scaleQuantile:Eue,scaleQuantize:Sue,scaleRadial:_ue,scaleSequential:Rue,scaleSequentialLog:Fue,scaleSequentialPow:vj,scaleSequentialQuantile:Bue,scaleSequentialSqrt:PBe,scaleSequentialSymlog:Lue,scaleSqrt:fLe,scaleSymlog:Aue,scaleThreshold:Cue,scaleTime:DBe,scaleUtc:NBe,tickFormat:vue},Symbol.toStringTag,{value:"Module"}));var qp=t=>t.chartData,IBe=Ae([qp],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),FI=(t,e,r,n)=>n?IBe(t):qp(t);function Ep(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(zn(e)&&zn(r))return!0}return!1}function cW(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Uue(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(zn(r))i=r;else if(typeof r=="function")return;if(zn(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(Ep(s))return s}}function OBe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Ep(n))return cW(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(at(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&Hq.test(i)){var l=Hq.exec(i);if(l==null||e==null)s=void 0;else{var u=+l[1];s=e[0]-u}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(at(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&Wq.test(a)){var c=Wq.exec(a);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[1]+f}}else o=e==null?void 0:e[1];var h=[s,o];if(Ep(h))return e==null?h:cW(h,e,r)}}}var jw=1e9,kBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wj,on=!0,_l="[DecimalError] ",av=_l+"Invalid argument: ",bj=_l+"Exponent out of range: ",Vw=Math.floor,ym=Math.pow,RBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bo,$i=1e7,Yr=7,zue=9007199254740991,G2=Vw(zue/Yr),tt={};tt.absoluteValue=tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tt.comparedTo=tt.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Yr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};tt.dividedBy=tt.div=function(t){return $f(this,new this.constructor(t))};tt.dividedToIntegerBy=tt.idiv=function(t){var e=this,r=e.constructor;return $r($f(e,new r(t),0,1),r.precision)};tt.equals=tt.eq=function(t){return!this.cmp(t)};tt.exponent=function(){return Jn(this)};tt.greaterThan=tt.gt=function(t){return this.cmp(t)>0};tt.greaterThanOrEqualTo=tt.gte=function(t){return this.cmp(t)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(t){return this.cmp(t)<0};tt.lessThanOrEqualTo=tt.lte=function(t){return this.cmp(t)<1};tt.logarithm=tt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(bo))throw Error(_l+"NaN");if(r.s<1)throw Error(_l+(r.s?"NaN":"-Infinity"));return r.eq(bo)?new n(0):(on=!1,e=$f(YA(r,a),YA(t,a),a),on=!0,$r(e,i))};tt.minus=tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Wue(e,t):que(e,(t.s=-t.s,t))};tt.modulo=tt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(_l+"NaN");return r.s?(on=!1,e=$f(r,t,0,1).times(t),on=!0,r.minus(e)):$r(new n(r),i)};tt.naturalExponential=tt.exp=function(){return Hue(this)};tt.naturalLogarithm=tt.ln=function(){return YA(this)};tt.negated=tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tt.plus=tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?que(e,t):Wue(e,(t.s=-t.s,t))};tt.precision=tt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(av+t);if(e=Jn(i)+1,n=i.d.length-1,r=n*Yr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};tt.squareRoot=tt.sqrt=function(){var t,e,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(_l+"NaN")}for(t=Jn(o),on=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ic(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Vw((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus($f(o,a,s+2)).times(.5),ic(a.d).slice(0,s)===(e=ic(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if($r(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(e!="9999")break;s+=4}return on=!0,$r(n,r)};tt.times=tt.mul=function(t){var e,r,n,i,a,s,o,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,r=c.e+t.e,l=h.length,u=d.length,l<u&&(a=h,h=d,d=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+d[n]*h[i-n-1]+e,a[i--]=o%$i|0,e=o/$i|0;a[i]=(a[i]+e)%$i|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,on?$r(t,f.precision):t};tt.toDecimalPlaces=tt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(_c(t,0,jw),e===void 0?e=n.rounding:_c(e,0,8),$r(r,t+Jn(r)+1,e))};tt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ev(n,!0):(_c(t,0,jw),e===void 0?e=i.rounding:_c(e,0,8),n=$r(new i(n),t+1,e),r=Ev(n,!0,t+1)),r};tt.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Ev(i):(_c(t,0,jw),e===void 0?e=a.rounding:_c(e,0,8),n=$r(new a(i),t+Jn(i)+1,e),r=Ev(n.abs(),!1,t+Jn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};tt.toInteger=tt.toint=function(){var t=this,e=t.constructor;return $r(new e(t),Jn(t)+1,e.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(bo);if(o=new l(o),!o.s){if(t.s<1)throw Error(_l+"Infinity");return o}if(o.eq(bo))return o;if(n=l.precision,t.eq(bo))return $r(o,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=o.s,s){if((r=c<0?-c:c)<=zue){for(i=new l(bo),e=Math.ceil(n/Yr+4),on=!1;r%2&&(i=i.times(o),hW(i.d,e)),r=Vw(r/2),r!==0;)o=o.times(o),hW(o.d,e);return on=!0,t.s<0?new l(bo).div(i):$r(i,n)}}else if(a<0)throw Error(_l+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,on=!1,i=t.times(YA(o,n+u)),on=!0,i=Hue(i),i.s=a,i};tt.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Jn(i),n=Ev(i,r<=a.toExpNeg||r>=a.toExpPos)):(_c(t,1,jw),e===void 0?e=a.rounding:_c(e,0,8),i=$r(new a(i),t,e),r=Jn(i),n=Ev(i,t<=r||r<=a.toExpNeg,t)),n};tt.toSignificantDigits=tt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(_c(t,1,jw),e===void 0?e=n.rounding:_c(e,0,8)),$r(new n(r),t,e)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Jn(t),r=t.constructor;return Ev(t,e<=r.toExpNeg||e>=r.toExpPos)};function que(t,e){var r,n,i,a,s,o,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),on?$r(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,i=s,o=l.length),s=Math.ceil(f/Yr),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/$i|0,l[a]%=$i;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,on?$r(e,f):e}function _c(t,e,r){if(t!==~~t||t<e||t>r)throw Error(av+t)}function ic(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=Yr-n.length,r&&(a+=$h(r)),a+=n;s=t[e],n=s+"",r=Yr-n.length,r&&(a+=$h(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var $f=function(){function t(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%$i|0,s=a/$i|0;return s&&n.unshift(s),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*$i+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,u,c,f,h,d,p,m,v,y,w,b,_,x,A,E,S,C=n.constructor,D=n.s==i.s?1:-1,N=n.d,P=i.d;if(!n.s)return new C(n);if(!i.s)throw Error(_l+"Division by zero");for(l=n.e-i.e,E=P.length,x=N.length,d=new C(D),p=d.d=[],u=0;P[u]==(N[u]||0);)++u;if(P[u]>(N[u]||0)&&--l,a==null?w=a=C.precision:s?w=a+(Jn(n)-Jn(i))+1:w=a,w<0)return new C(0);if(w=w/Yr+2|0,u=0,E==1)for(c=0,P=P[0],w++;(u<x||c)&&w--;u++)b=c*$i+(N[u]||0),p[u]=b/P|0,c=b%P|0;else{for(c=$i/(P[0]+1)|0,c>1&&(P=t(P,c),N=t(N,c),E=P.length,x=N.length),_=E,m=N.slice(0,E),v=m.length;v<E;)m[v++]=0;S=P.slice(),S.unshift(0),A=P[0],P[1]>=$i/2&&++A;do c=0,o=e(P,m,E,v),o<0?(y=m[0],E!=v&&(y=y*$i+(m[1]||0)),c=y/A|0,c>1?(c>=$i&&(c=$i-1),f=t(P,c),h=f.length,v=m.length,o=e(f,m,h,v),o==1&&(c--,r(f,E<h?S:P,h))):(c==0&&(o=c=1),f=P.slice()),h=f.length,h<v&&f.unshift(0),r(m,f,v),o==-1&&(v=m.length,o=e(P,m,E,v),o<1&&(c++,r(m,E<v?S:P,v))),v=m.length):o===0&&(c++,m=[0]),p[u++]=c,o&&m[0]?m[v++]=N[_]||0:(m=[N[_]],v=1);while((_++<x||m[0]!==void 0)&&w--)}return p[0]||p.shift(),d.e=l,$r(d,s?a+Jn(d)+1:a)}}();function Hue(t,e){var r,n,i,a,s,o,l=0,u=0,c=t.constructor,f=c.precision;if(Jn(t)>16)throw Error(bj+Jn(t));if(!t.s)return new c(bo);for(on=!1,o=f,s=new c(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(n=Math.log(ym(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new c(bo),c.precision=o;;){if(i=$r(i.times(t),o),r=r.times(++l),s=a.plus($f(i,r,o)),ic(s.d).slice(0,o)===ic(a.d).slice(0,o)){for(;u--;)a=$r(a.times(a),o);return c.precision=f,e==null?(on=!0,$r(a,f)):a}a=s}}function Jn(t){for(var e=t.e*Yr,r=t.d[0];r>=10;r/=10)e++;return e}function gR(t,e,r){if(e>t.LN10.sd())throw on=!0,r&&(t.precision=r),Error(_l+"LN10 precision limit exceeded");return $r(new t(t.LN10),e)}function $h(t){for(var e="";t--;)e+="0";return e}function YA(t,e){var r,n,i,a,s,o,l,u,c,f=1,h=10,d=t,p=d.d,m=d.constructor,v=m.precision;if(d.s<1)throw Error(_l+(d.s?"NaN":"-Infinity"));if(d.eq(bo))return new m(0);if(e==null?(on=!1,u=v):u=e,d.eq(10))return e==null&&(on=!0),gR(m,u);if(u+=h,m.precision=u,r=ic(p),n=r.charAt(0),a=Jn(d),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)d=d.times(t),r=ic(d.d),n=r.charAt(0),f++;a=Jn(d),n>1?(d=new m("0."+r),a++):d=new m(n+"."+r.slice(1))}else return l=gR(m,u+2,v).times(a+""),d=YA(new m(n+"."+r.slice(1)),u-h).plus(l),m.precision=v,e==null?(on=!0,$r(d,v)):d;for(o=s=d=$f(d.minus(bo),d.plus(bo),u),c=$r(d.times(d),u),i=3;;){if(s=$r(s.times(c),u),l=o.plus($f(s,new m(i),u)),ic(l.d).slice(0,u)===ic(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(gR(m,u+2,v).times(a+""))),o=$f(o,new m(f),u),m.precision=v,e==null?(on=!0,$r(o,v)):o;o=l,i+=2}}function fW(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Vw(r/Yr),t.d=[],n=(r+1)%Yr,r<0&&(n+=Yr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Yr;n<i;)t.d.push(+e.slice(n,n+=Yr));e=e.slice(n),n=Yr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),on&&(t.e>G2||t.e<-G2))throw Error(bj+r)}else t.s=0,t.e=0,t.d=[0];return t}function $r(t,e,r){var n,i,a,s,o,l,u,c,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=Yr,i=e,u=f[c=0];else{if(c=Math.ceil((n+1)/Yr),a=f.length,c>=a)return t;for(u=a=f[c],s=1;a>=10;a/=10)s++;n%=Yr,i=n-Yr+s}if(r!==void 0&&(a=ym(10,s-i-1),o=u/a%10|0,l=e<0||f[c+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?u/ym(10,s-i):0:f[c-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(a=Jn(t),f.length=1,e=e-a-1,f[0]=ym(10,(Yr-e%Yr)%Yr),t.e=Vw(-e/Yr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=c,a=1,c--):(f.length=c+1,a=ym(10,Yr-n),f[c]=i>0?(u/ym(10,s-i)%ym(10,i)|0)*a:0),l)for(;;)if(c==0){(f[0]+=a)==$i&&(f[0]=1,++t.e);break}else{if(f[c]+=a,f[c]!=$i)break;f[c--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(on&&(t.e>G2||t.e<-G2))throw Error(bj+Jn(t));return t}function Wue(t,e){var r,n,i,a,s,o,l,u,c,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),on?$r(e,d):e;if(l=t.d,f=e.d,n=e.e,u=t.e,l=l.slice(),s=u-n,s){for(c=s<0,c?(r=l,s=-s,o=f.length):(r=f,n=u,o=l.length),i=Math.max(Math.ceil(d/Yr),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,c=i<o,c&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){c=l[i]<f[i];break}s=0}for(c&&(r=l,l=f,f=r,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=$i-1;--l[a],l[i]+=$i}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,on?$r(e,d):e):new h(0)}function Ev(t,e,r){var n,i=Jn(t),a=ic(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+$h(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$h(-i-1)+a,r&&(n=r-s)>0&&(a+=$h(n))):i>=s?(a+=$h(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+$h(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=$h(n))),t.s<0?"-"+a:a}function hW(t,e){if(t.length>e)return t.length=e,!0}function Gue(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(av+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return fW(s,a.toString())}else if(typeof a!="string")throw Error(av+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,RBe.test(a))fW(s,a);else throw Error(av+a)}if(i.prototype=tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Gue,i.config=i.set=FBe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function FBe(t){if(!t||typeof t!="object")throw Error(_l+"Object expected");var e,r,n,i=["precision",1,jw,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Vw(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(av+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(av+r+": "+n);return this}var wj=Gue(kBe);bo=new wj(1);const gr=wj;var LBe=t=>t,Kue={},Xue=t=>t===Kue,dW=t=>function e(){return arguments.length===0||arguments.length===1&&Xue(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Yue=(t,e)=>t===1?e:dW(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==Kue).length;return a>=t?e(...n):Yue(t-a,dW(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var u=n.map(c=>Xue(c)?o.shift():c);return e(...u,...o)}))}),BBe=t=>Yue(t.length,t),$B=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},$Be=BBe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),jBe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return LBe;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},jB=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function Que(t){var e;return t===0?e=1:e=Math.floor(new gr(t).abs().log(10).toNumber())+1,e}function Zue(t,e,r){for(var n=new gr(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var Jue=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},ece=(t,e,r)=>{if(t.lte(0))return new gr(0);var n=Que(t.toNumber()),i=new gr(10).pow(n),a=t.div(i),s=n!==1?.05:.1,o=new gr(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return e?new gr(l.toNumber()):new gr(Math.ceil(l.toNumber()))},VBe=(t,e,r)=>{var n=new gr(1),i=new gr(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new gr(10).pow(Que(t)-1),i=new gr(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new gr(Math.floor(t)))}else t===0?i=new gr(Math.floor((e-1)/2)):r||(i=new gr(Math.floor(t)));var s=Math.floor((e-1)/2),o=jBe($Be(l=>i.add(new gr(l-s).mul(n)).toNumber()),$B);return o(0,e)},tce=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new gr(0),tickMin:new gr(0),tickMax:new gr(0)};var s=ece(new gr(r).sub(e).div(n-1),i,a),o;e<=0&&r>=0?o=new gr(0):(o=new gr(e).add(r).div(2),o=o.sub(new gr(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new gr(r).sub(o).div(s).toNumber()),c=l+u+1;return c>n?tce(e,r,n,i,a+1):(c<n&&(u=r>0?u+(n-c):u,l=r>0?l:l+(n-c)),{step:s,tickMin:o.sub(new gr(l).mul(s)),tickMax:o.add(new gr(u).mul(s))})},UBe=function(e){var[r,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=Jue([r,n]);if(o===-1/0||l===1/0){var u=l===1/0?[o,...$B(0,i-1).map(()=>1/0)]:[...$B(0,i-1).map(()=>-1/0),l];return r>n?jB(u):u}if(o===l)return VBe(o,i,a);var{step:c,tickMin:f,tickMax:h}=tce(o,l,s,a,0),d=Zue(f,h.add(new gr(.1).mul(c)),c);return r>n?jB(d):d},zBe=function(e,r){var[n,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Jue([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(r,2),u=ece(new gr(o).sub(s).div(l-1),a,0),c=[...Zue(new gr(s),new gr(o),u),o];return a===!1&&(c=c.map(f=>Math.round(f))),n>i?jB(c):c},rce=t=>t.rootProps.maxBarSize,qBe=t=>t.rootProps.barGap,nce=t=>t.rootProps.barCategoryGap,HBe=t=>t.rootProps.barSize,LI=t=>t.rootProps.stackOffset,ice=t=>t.rootProps.reverseStackOrder,xj=t=>t.options.chartName,Aj=t=>t.rootProps.syncId,ace=t=>t.rootProps.syncMethod,_j=t=>t.options.eventEmitter,Vi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Sf={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},BI=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},WBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sf.angleAxisId,includeHidden:!1,name:void 0,reversed:Sf.reversed,scale:Sf.scale,tick:Sf.tick,tickCount:void 0,ticks:void 0,type:Sf.type,unit:void 0},GBe={allowDataOverflow:mo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mo.scale,tick:mo.tick,tickCount:mo.tickCount,ticks:void 0,type:mo.type,unit:void 0},KBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Sf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sf.scale,tick:Sf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},XBe={allowDataOverflow:mo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mo.scale,tick:mo.tick,tickCount:mo.tickCount,ticks:void 0,type:"category",unit:void 0},Ej=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?KBe:WBe,Sj=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?XBe:GBe,$I=t=>t.polarOptions,Cj=Ae([yh,bh,Hi],GFe),sce=Ae([$I,Cj],(t,e)=>{if(t!=null)return pu(t.innerRadius,e,0)}),oce=Ae([$I,Cj],(t,e)=>{if(t!=null)return pu(t.outerRadius,e,e*.8)}),YBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},lce=Ae([$I],YBe);Ae([Ej,lce],BI);var uce=Ae([Cj,sce,oce],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Ae([Sj,uce],BI);var cce=Ae([cr,$I,sce,oce,yh,bh],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:u}=e;return{cx:pu(s,i,i/2),cy:pu(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),yi=(t,e)=>e,jI=(t,e,r)=>r;function Tj(t){return t==null?void 0:t.id}function fce(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var c=Tj(o);u.forEach((f,h)=>{var d=a==null||i?h:String(pi(f,a,null)),p=pi(f,o.dataKey,0),m;s.has(d)?m=s.get(d):m={},Object.assign(m,{[c]:p}),s.set(d,m)})}}),Array.from(s.values())}function VI(t){return t.stackId!=null&&t.dataKey!=null}var UI=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function zI(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function QBe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var bi=t=>{var e=cr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Uw=t=>t.tooltip.settings.axisId;function pW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function K2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pW(Object(r),!0).forEach(function(n){ZBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZBe(t,e,r){return(e=JBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JBe(t){var e=e4e(t,"string");return typeof e=="symbol"?e:e+""}function e4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VB=[0,"auto"],Di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},hce=(t,e)=>t.cartesianAxis.xAxis[e],xh=(t,e)=>{var r=hce(t,e);return r??Di},Ni={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:VB,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:NS},dce=(t,e)=>t.cartesianAxis.yAxis[e],Ah=(t,e)=>{var r=dce(t,e);return r??Ni},t4e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Dj=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??t4e},gs=(t,e,r)=>{switch(e){case"xAxis":return xh(t,r);case"yAxis":return Ah(t,r);case"zAxis":return Dj(t,r);case"angleAxis":return Ej(t,r);case"radiusAxis":return Sj(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},r4e=(t,e,r)=>{switch(e){case"xAxis":return xh(t,r);case"yAxis":return Ah(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},LS=(t,e,r)=>{switch(e){case"xAxis":return xh(t,r);case"yAxis":return Ah(t,r);case"angleAxis":return Ej(t,r);case"radiusAxis":return Sj(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},pce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function mce(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var qI=t=>t.graphicalItems.cartesianItems,n4e=Ae([yi,jI],mce),gce=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),BS=Ae([qI,gs,n4e],gce,{memoizeOptions:{resultEqualityCheck:zI}}),vce=Ae([BS],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(VI)),yce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),i4e=Ae([BS],yce),bce=t=>t.map(e=>e.data).filter(Boolean).flat(1),a4e=Ae([BS],bce,{memoizeOptions:{resultEqualityCheck:zI}}),wce=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},Nj=Ae([a4e,FI],wce),xce=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:pi(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:pi(i,n)}))):t.map(n=>({value:n})),HI=Ae([Nj,gs,BS],xce);function Ace(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function eN(t){if(xc(t)||t instanceof Date){var e=Number(t);if(zn(e))return e}}function mW(t){if(Array.isArray(t)){var e=[eN(t[0]),eN(t[1])];return Ep(e)?e:void 0}var r=eN(t);if(r!=null)return[r,r]}function uh(t){return t.map(eN).filter(fIe)}function s4e(t,e,r){return!r||typeof e!="number"||du(e)?[]:r.length?uh(r.flatMap(n=>{var i=pi(t,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!zn(a)||!zn(s)))return[e-a,e+s]})):[]}var wi=t=>{var e=bi(t),r=Uw(t);return LS(t,e,r)},$S=Ae([wi],t=>t==null?void 0:t.dataKey),o4e=Ae([vce,FI,wi],fce),_ce=(t,e,r,n)=>{var i={},a=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,u=n?[...l].reverse():l,c=u.map(Tj);return[o,{stackedData:Dke(t,c,r),graphicalItems:u}]}))},UB=Ae([o4e,vce,LI,ice],_ce),Ece=(t,e,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(n==null&&r!=="zAxis"){var s=Oke(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},l4e=Ae([gs],t=>t.allowDataOverflow),Pj=t=>{var e;if(t==null||!("domain"in t))return VB;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=uh(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:VB},Sce=Ae([gs],Pj),Cce=Ae([Sce,l4e],Uue),u4e=Ae([UB,qp,yi,Cce],Ece,{memoizeOptions:{resultEqualityCheck:UI}}),Mj=t=>t.errorBars,c4e=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Ace(r,n)),X2=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},Tce=(t,e,r,n,i)=>{var a,s;if(r.length>0&&t.forEach(o=>{r.forEach(l=>{var u,c,f=(u=n[l.id])===null||u===void 0?void 0:u.filter(y=>Ace(i,y)),h=pi(o,(c=e.dataKey)!==null&&c!==void 0?c:l.dataKey),d=s4e(o,h,f);if(d.length>=2){var p=Math.min(...d),m=Math.max(...d);(a==null||p<a)&&(a=p),(s==null||m>s)&&(s=m)}var v=mW(h);v!=null&&(a=a==null?v[0]:Math.min(a,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=mW(pi(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),zn(a)&&zn(s))return[a,s]},f4e=Ae([Nj,gs,i4e,Mj,yi],Tce,{memoizeOptions:{resultEqualityCheck:UI}});function h4e(t){var{value:e}=t;if(xc(e)||e instanceof Date)return e}var d4e=(t,e,r)=>{var n=t.map(h4e).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&woe(n))?oue(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Dce=t=>t.referenceElements.dots,zw=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),p4e=Ae([Dce,yi,jI],zw),Nce=t=>t.referenceElements.areas,m4e=Ae([Nce,yi,jI],zw),Pce=t=>t.referenceElements.lines,g4e=Ae([Pce,yi,jI],zw),Mce=(t,e)=>{var r=uh(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},v4e=Ae(p4e,yi,Mce),Ice=(t,e)=>{var r=uh(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},y4e=Ae([m4e,yi],Ice);function b4e(t){var e;if(t.x!=null)return uh([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:uh(r)}function w4e(t){var e;if(t.y!=null)return uh([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:uh(r)}var Oce=(t,e)=>{var r=t.flatMap(n=>e==="xAxis"?b4e(n):w4e(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},x4e=Ae([g4e,yi],Oce),A4e=Ae(v4e,x4e,y4e,(t,e,r)=>X2(t,r,e)),kce=(t,e,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=l?X2(n,a,i):X2(a,i);return OBe(e,u,t.allowDataOverflow)},_4e=Ae([gs,Sce,Cce,u4e,f4e,A4e,cr,yi],kce,{memoizeOptions:{resultEqualityCheck:UI}}),E4e=[0,1],Rce=(t,e,r,n,i,a,s)=>{if(!((t==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=t,u=Vp(e,a);if(u&&o==null){var c;return oue(0,(c=r==null?void 0:r.length)!==null&&c!==void 0?c:0)}return l==="category"?d4e(n,t,u):i==="expand"?E4e:s}},Ij=Ae([gs,cr,Nj,HI,LI,yi,_4e],Rce),Fce=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(ES(a));return o in Ex?o:"point"}}},jS=Ae([gs,cr,pce,xj,yi],Fce);function S4e(t){if(t!=null){if(t in Ex)return Ex[t]();var e="scale".concat(ES(t));if(e in Ex)return Ex[e]()}}function Oj(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=S4e(e);if(i!=null){var a=i.domain(r).range(n);return _ke(a),a}}}var Lce=(t,e,r)=>{var n=Pj(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ep(t))return UBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ep(t))return zBe(t,e.tickCount,e.allowDecimals)}},kj=Ae([Ij,LS,jS],Lce),Bce=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Ep(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],s=e[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},C4e=Ae([gs,Ij,kj,yi],Bce),T4e=Ae(HI,gs,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(uh(t.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),$ce=Ae(T4e,cr,nce,Hi,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!zn(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=pu(r,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),D4e=(t,e)=>{var r=xh(t,e);return r==null||typeof r.padding!="string"?0:$ce(t,"xAxis",e,r.padding)},N4e=(t,e)=>{var r=Ah(t,e);return r==null||typeof r.padding!="string"?0:$ce(t,"yAxis",e,r.padding)},P4e=Ae(xh,D4e,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),M4e=Ae(Ah,N4e,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),I4e=Ae([Hi,P4e,AI,xI,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),O4e=Ae([Hi,cr,M4e,AI,xI,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),VS=(t,e,r,n)=>{var i;switch(e){case"xAxis":return I4e(t,r,n);case"yAxis":return O4e(t,r,n);case"zAxis":return(i=Dj(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return lce(t);case"radiusAxis":return uce(t,r);default:return}},jce=Ae([gs,VS],BI),qw=Ae([gs,jS,C4e,jce],Oj);Ae([BS,Mj,yi],c4e);function Vce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var WI=(t,e)=>e,GI=(t,e,r)=>r,k4e=Ae(bI,WI,GI,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Vce)),R4e=Ae(wI,WI,GI,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Vce)),Uce=(t,e)=>({width:t.width,height:e.height}),F4e=(t,e)=>{var r=typeof e.width=="number"?e.width:NS;return{width:r,height:t.height}},zce=Ae(Hi,xh,Uce),L4e=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},B4e=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},$4e=Ae(bh,Hi,k4e,WI,GI,(t,e,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=Uce(e,o);s==null&&(s=L4e(e,n,t));var u=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(u)*l.height,s+=(u?-1:1)*l.height}),a}),j4e=Ae(yh,Hi,R4e,WI,GI,(t,e,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=F4e(e,o);s==null&&(s=B4e(e,n,t));var u=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(u)*l.width,s+=(u?-1:1)*l.width}),a}),V4e=(t,e)=>{var r=xh(t,e);if(r!=null)return $4e(t,r.orientation,r.mirror)},U4e=Ae([Hi,xh,V4e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),z4e=(t,e)=>{var r=Ah(t,e);if(r!=null)return j4e(t,r.orientation,r.mirror)},q4e=Ae([Hi,Ah,z4e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),qce=Ae(Hi,Ah,(t,e)=>{var r=typeof e.width=="number"?e.width:NS;return{width:r,height:t.height}}),gW=(t,e,r)=>{switch(e){case"xAxis":return zce(t,r).width;case"yAxis":return qce(t,r).height;default:return}},Hce=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Vp(t,n),l=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&woe(l))return l}},Rj=Ae([cr,HI,gs,yi],Hce),Wce=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Vp(t,n);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},Fj=Ae([cr,HI,LS,yi],Wce),vW=Ae([cr,r4e,jS,qw,Rj,Fj,VS,kj,yi],(t,e,r,n,i,a,s,o,l)=>{if(e!=null){var u=Vp(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),H4e=(t,e,r,n,i,a,s,o,l)=>{if(!(e==null||n==null)){var u=Vp(t,l),{type:c,ticks:f,tickCount:h}=e,d=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/d:0;p=l==="angleAxis"&&a!=null&&a.length>=2?Rs(a[0]-a[1])*2*p:p;var m=f||i;if(m){var v=m.map((y,w)=>{var b=s?s.indexOf(y):y;return{index:w,coordinate:n(b)+p,value:y,offset:p}});return v.filter(y=>zn(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+p,value:y,index:w,offset:p})).filter(y=>zn(y.coordinate)):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+p,value:y,offset:p})):n.domain().map((y,w)=>({coordinate:n(y)+p,value:s?s[y]:y,index:w,offset:p}))}},Gce=Ae([cr,LS,jS,qw,kj,VS,Rj,Fj,yi],H4e),W4e=(t,e,r,n,i,a,s)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var o=Vp(t,s),{tickCount:l}=e,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?Rs(n[0]-n[1])*2*u:u,o&&a?a.map((c,f)=>({coordinate:r(c)+u,value:c,index:f,offset:u})):r.ticks?r.ticks(l).map(c=>({coordinate:r(c)+u,value:c,offset:u})):r.domain().map((c,f)=>({coordinate:r(c)+u,value:i?i[c]:c,index:f,offset:u}))}},Sp=Ae([cr,LS,qw,VS,Rj,Fj,yi],W4e),Cp=Ae(gs,qw,(t,e)=>{if(!(t==null||e==null))return K2(K2({},t),{},{scale:e})}),G4e=Ae([gs,jS,Ij,jce],Oj);Ae((t,e,r)=>Dj(t,r),G4e,(t,e)=>{if(!(t==null||e==null))return K2(K2({},t),{},{scale:e})});var K4e=Ae([cr,bI,wI],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Kce=t=>t.options.defaultTooltipEventType,Xce=t=>t.options.validateTooltipEventTypes;function Yce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function Lj(t,e){var r=Kce(t),n=Xce(t);return Yce(e,r,n)}function X4e(t){return st(e=>Lj(e,t))}var Qce=(t,e)=>{var r,n=Number(e);if(!(du(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Y4e=t=>t.tooltip.settings,Yh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Q4e={itemInteraction:{click:Yh,hover:Yh},axisInteraction:{click:Yh,hover:Yh},keyboardInteraction:Yh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Zce=zs({name:"tooltip",initialState:Q4e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:nn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ou(t).tooltipItemPayloads.indexOf(r);i>-1&&(t.tooltipItemPayloads[i]=n)},prepare:nn()},removeTooltipEntrySettings:{reducer(t,e){var r=ou(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:nn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Z4e,replaceTooltipEntrySettings:J4e,removeTooltipEntrySettings:e$e,setTooltipSettingsState:t$e,setActiveMouseOverItemIndex:Jce,mouseLeaveItem:r$e,mouseLeaveChart:efe,setActiveClickItemIndex:n$e,setMouseOverAxisIndex:tfe,setMouseClickAxisIndex:i$e,setSyncInteraction:zB,setKeyboardInteraction:qB}=Zce.actions,a$e=Zce.reducer;function yW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(r),!0).forEach(function(n){s$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s$e(t,e,r){return(e=o$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o$e(t){var e=l$e(t,"string");return typeof e=="symbol"?e:e+""}function l$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u$e(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function c$e(t){return t.index!=null}var rfe=(t,e,r,n)=>{if(e==null)return Yh;var i=u$e(t,e,r);if(i==null)return Yh;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(c$e(i)){if(a)return bT(bT({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return bT(bT({},Yh),{},{coordinate:i.coordinate})};function f$e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function h$e(t,e){var r=f$e(t),n=e[0],i=e[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function d$e(t,e,r){if(r==null||e==null)return!0;var n=pi(t,e);return n==null||!Ep(r)?!0:h$e(n,r)}var Bj=(t,e,r,n)=>{var i=t==null?void 0:t.index;if(i==null)return null;var a=Number(i);if(!zn(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(a,o)),u=e[l];return u==null||d$e(u,r,n)?String(l):null},nfe=(t,e,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var c=i==null?void 0:i[Number(a)];if(c)switch(r){case"horizontal":return{x:c.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:c.coordinate}}}},ife=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},US=t=>t.options.tooltipPayloadSearcher,Hw=t=>t.tooltip;function bW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bW(Object(r),!0).forEach(function(n){p$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p$e(t,e,r){return(e=m$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m$e(t){var e=g$e(t,"string");return typeof e=="symbol"?e:e+""}function g$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v$e(t,e){return t??e}var afe=(t,e,r,n,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:c}=r,f=[];return t.reduce((h,d)=>{var p,{dataDefinedOnItem:m,settings:v}=d,y=v$e(m,o),w=Array.isArray(y)?Nle(y,u,c):y,b=(p=v==null?void 0:v.dataKey)!==null&&p!==void 0?p:n,_=v==null?void 0:v.nameKey,x;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?x=xoe(w,n,i):x=a(w,e,l,_),Array.isArray(x))x.forEach(E=>{var S=wW(wW({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(Gq({tooltipEntrySettings:S,dataKey:E.dataKey,payload:E.payload,value:pi(E.payload,E.dataKey),name:E.name}))});else{var A;h.push(Gq({tooltipEntrySettings:v,dataKey:b,payload:x,value:pi(x,b),name:(A=pi(x,_))!==null&&A!==void 0?A:v==null?void 0:v.name}))}return h},f)}},$j=Ae([wi,cr,pce,xj,bi],Fce),y$e=Ae([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),b$e=Ae([bi,Uw],mce),zS=Ae([y$e,wi,b$e],gce,{memoizeOptions:{resultEqualityCheck:zI}}),w$e=Ae([zS],t=>t.filter(VI)),x$e=Ae([zS],bce,{memoizeOptions:{resultEqualityCheck:zI}}),Ww=Ae([x$e,qp],wce),A$e=Ae([w$e,qp,wi],fce),jj=Ae([Ww,wi,zS],xce),sfe=Ae([wi],Pj),_$e=Ae([wi],t=>t.allowDataOverflow),ofe=Ae([sfe,_$e],Uue),E$e=Ae([zS],t=>t.filter(VI)),S$e=Ae([A$e,E$e,LI,ice],_ce),C$e=Ae([S$e,qp,bi,ofe],Ece),T$e=Ae([zS],yce),D$e=Ae([Ww,wi,T$e,Mj,bi],Tce,{memoizeOptions:{resultEqualityCheck:UI}}),N$e=Ae([Dce,bi,Uw],zw),P$e=Ae([N$e,bi],Mce),M$e=Ae([Nce,bi,Uw],zw),I$e=Ae([M$e,bi],Ice),O$e=Ae([Pce,bi,Uw],zw),k$e=Ae([O$e,bi],Oce),R$e=Ae([P$e,k$e,I$e],X2),F$e=Ae([wi,sfe,ofe,C$e,D$e,R$e,cr,bi],kce),qS=Ae([wi,cr,Ww,jj,LI,bi,F$e],Rce),L$e=Ae([qS,wi,$j],Lce),B$e=Ae([wi,qS,L$e,bi],Bce),lfe=t=>{var e=bi(t),r=Uw(t),n=!1;return VS(t,e,r,n)},ufe=Ae([wi,lfe],BI),cfe=Ae([wi,$j,B$e,ufe],Oj),$$e=Ae([cr,jj,wi,bi],Hce),j$e=Ae([cr,jj,wi,bi],Wce),V$e=(t,e,r,n,i,a,s,o)=>{if(e){var{type:l}=e,u=Vp(t,o);if(n){var c=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/c:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Rs(i[0]-i[1])*2*f:f,u&&s?s.map((h,d)=>({coordinate:n(h)+f,value:h,index:d,offset:f})):n.domain().map((h,d)=>({coordinate:n(h)+f,value:a?a[h]:h,index:d,offset:f}))}}},_h=Ae([cr,wi,$j,cfe,lfe,$$e,j$e,bi],V$e),Vj=Ae([Kce,Xce,Y4e],(t,e,r)=>Yce(r.shared,t,e)),ffe=t=>t.tooltip.settings.trigger,Uj=t=>t.tooltip.settings.defaultIndex,HS=Ae([Hw,Vj,ffe,Uj],rfe),Sv=Ae([HS,Ww,$S,qS],Bj),hfe=Ae([_h,Sv],Qce),dfe=Ae([HS],t=>{if(t)return t.dataKey});Ae([HS],t=>{if(t)return t.graphicalItemId});var pfe=Ae([Hw,Vj,ffe,Uj],ife),U$e=Ae([yh,bh,cr,Hi,_h,Uj,pfe,US],nfe),z$e=Ae([HS,U$e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),q$e=Ae([HS],t=>t.active),H$e=Ae([pfe,Sv,qp,$S,hfe,US,Vj],afe),W$e=Ae([H$e],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function xW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xW(Object(r),!0).forEach(function(n){G$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G$e(t,e,r){return(e=K$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function K$e(t){var e=X$e(t,"string");return typeof e=="symbol"?e:e+""}function X$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$e=()=>st(wi),Q$e=()=>{var t=Y$e(),e=st(_h),r=st(cfe);return uw(!t||!r?void 0:AW(AW({},t),{},{scale:r}),e)};function _W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_W(Object(r),!0).forEach(function(n){Z$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_W(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z$e(t,e,r){return(e=J$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J$e(t){var e=e5e(t,"string");return typeof e=="symbol"?e:e+""}function e5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t5e=(t,e,r,n)=>{var i=e.find(a=>a&&a.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},r5e=(t,e,r,n)=>{var i=e.find(u=>u&&u.index===r);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=n;return iy(iy(iy({},n),ua(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return iy(iy(iy({},n),ua(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function n5e(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var mfe=(t,e,r,n,i)=>{var a,s=-1,o=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,c=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Rs(c-u)!==Rs(f-c)){var d=[];if(Rs(f-c)===Rs(i[1]-i[0])){h=f;var p=c+i[1]-i[0];d[0]=Math.min(p,(p+u)/2),d[1]=Math.max(p,(p+u)/2)}else{h=u;var m=f+i[1]-i[0];d[0]=Math.min(c,(m+c)/2),d[1]=Math.max(c,(m+c)/2)}var v=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(t>v[0]&&t<=v[1]||t>=d[0]&&t<=d[1]){({index:s}=r[l]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(t>(y+c)/2&&t<=(w+c)/2){({index:s}=r[l]);break}}}else if(e){for(var b=0;b<o;b++)if(b===0&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b>0&&b<o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b===o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2){({index:s}=e[b]);break}}return s},i5e=()=>st(xj),zj=(t,e)=>e,gfe=(t,e,r)=>r,qj=(t,e,r,n)=>n,a5e=Ae(_h,t=>uI(t,e=>e.coordinate)),Hj=Ae([Hw,zj,gfe,qj],rfe),Wj=Ae([Hj,Ww,$S,qS],Bj),s5e=(t,e,r)=>{if(e!=null){var n=Hw(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},vfe=Ae([Hw,zj,gfe,qj],ife),Y2=Ae([yh,bh,cr,Hi,_h,qj,vfe,US],nfe),o5e=Ae([Hj,Y2],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),yfe=Ae([_h,Wj],Qce),l5e=Ae([vfe,Wj,qp,$S,yfe,US,zj],afe),u5e=Ae([Hj,Wj],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),c5e=(t,e,r,n,i,a,s)=>{if(!(!t||!r||!n||!i)&&n5e(t,s)){var o=kke(t,e),l=mfe(o,a,i,r,n),u=t5e(e,i,l,t);return{activeIndex:String(l),activeCoordinate:u}}},f5e=(t,e,r,n,i,a,s)=>{if(!(!t||!n||!i||!a||!r)){var o=ZFe(t,r);if(o){var l=Rke(o,e),u=mfe(l,s,a,n,i),c=r5e(e,a,u,o);return{activeIndex:String(u),activeCoordinate:c}}}},h5e=(t,e,r,n,i,a,s,o)=>{if(!(!t||!e||!n||!i||!a))return e==="horizontal"||e==="vertical"?c5e(t,e,n,i,a,s,o):f5e(t,e,r,n,i,a,s)},d5e=Ae(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElementId:n.elementId}}),p5e=Ae(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Vi)),r=Array.from(new Set(e));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:QBe}});function EW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EW(Object(r),!0).forEach(function(n){m5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m5e(t,e,r){return(e=g5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g5e(t){var e=v5e(t,"string");return typeof e=="symbol"?e:e+""}function v5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y5e={},b5e={zIndexMap:Object.values(Vi).reduce((t,e)=>SW(SW({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),y5e)},w5e=new Set(Object.values(Vi));function x5e(t){return w5e.has(t)}var bfe=zs({name:"zIndex",initialState:b5e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:nn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!x5e(r)&&delete t.zIndexMap[r])},prepare:nn()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r,elementId:n,isPanorama:i}=e.payload;t.zIndexMap[r]?i?t.zIndexMap[r].panoramaElementId=n:t.zIndexMap[r].elementId=n:t.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:nn()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:nn()}}}),{registerZIndexPortal:A5e,unregisterZIndexPortal:_5e,registerZIndexPortalId:E5e,unregisterZIndexPortalId:S5e}=bfe.actions,C5e=bfe.reducer;function Dl(t){var{zIndex:e,children:r}=t,n=cRe(),i=n&&e!==void 0&&e!==0,a=Ua(),s=bn();O.useLayoutEffect(()=>i?(s(A5e({zIndex:e})),()=>{s(_5e({zIndex:e}))}):SS,[s,e,i]);var o=st(u=>d5e(u,e,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?mM.createPortal(r,l):null}function HB(){return HB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HB.apply(null,arguments)}function CW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(r),!0).forEach(function(n){T5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T5e(t,e,r){return(e=D5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D5e(t){var e=N5e(t,"string");return typeof e=="symbol"?e:e+""}function N5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P5e(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return O.isValidElement(e)?O.cloneElement(e,n):O.createElement(r,n)}function M5e(t){var e,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:u,chartName:c}=t,f=r,h=n,d=i;if(!l||!f||c!=="ScatterChart"&&u!=="axis")return null;var p,m,v;if(c==="ScatterChart")p=f,m=hFe,v=Vi.cursorLine;else if(c==="BarChart")p=dFe(o,f,a,s),m=eue,v=Vi.cursorRectangle;else if(o==="radial"&&_oe(f)){var{cx:y,cy:w,radius:b,startAngle:_,endAngle:x}=tue(f);p={cx:y,cy:w,startAngle:_,endAngle:x,innerRadius:b,outerRadius:b},m=nue,v=Vi.cursorLine}else p={points:r3e(o,f,a)},m=Xle,v=Vi.cursorLine;var A=typeof l=="object"&&"className"in l?l.className:void 0,E=wT(wT(wT(wT({stroke:"#ccc",pointerEvents:"none"},a),p),_S(l)),{},{payload:h,payloadIndex:d,className:xr("recharts-tooltip-cursor",A)});return O.createElement(Dl,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},O.createElement(P5e,{cursor:l,cursorComp:m,cursorProps:E}))}function I5e(t){var e=Q$e(),r=jle(),n=PS(),i=i5e();return e==null||r==null||n==null||i==null?null:O.createElement(M5e,HB({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var wfe=O.createContext(null),O5e=()=>O.useContext(wfe),xfe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||l,h),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,h,d,p){var m=r?r+u:u;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,h),!0;case 5:return v.fn.call(v.context,c,f,h,d),!0;case 6:return v.fn.call(v.context,c,f,h,d,p),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var _=v.length,x;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,f);break;case 4:v[b].fn.call(v[b].context,c,f,h);break;default:if(!w)for(x=1,w=new Array(y-1);x<y;x++)w[x-1]=arguments[x];v[b].fn.apply(v[b].context,w)}}return!0},o.prototype.on=function(u,c,f){return a(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return a(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,h){var d=r?r+u:u;if(!this._events[d])return this;if(!c)return s(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&s(this,d);else{for(var m=0,v=[],y=p.length;m<y;m++)(p[m].fn!==c||h&&!p[m].once||f&&p[m].context!==f)&&v.push(p[m]);v.length?this._events[d]=v.length===1?v[0]:v:s(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(xfe);var k5e=xfe.exports;const R5e=Sl(k5e);var QA=new R5e,WB="recharts.syncEvent.tooltip",TW="recharts.syncEvent.brush";function Afe(t,e){if(e){var r=Number.parseInt(e,10);if(!du(r))return t==null?void 0:t[r]}}var F5e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_fe=zs({name:"options",initialState:F5e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),L5e=_fe.reducer,{createEventEmitter:B5e}=_fe.actions;function $5e(t){return t.tooltip.syncInteraction}var j5e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Efe=zs({name:"chartData",initialState:j5e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:DW,setDataStartEndIndexes:V5e,setComputedData:Opt}=Efe.actions,U5e=Efe.reducer,z5e=["x","y"];function NW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ay(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(r),!0).forEach(function(n){q5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q5e(t,e,r){return(e=H5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H5e(t){var e=W5e(t,"string");return typeof e=="symbol"?e:e+""}function W5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G5e(t,e){if(t==null)return{};var r,n,i=K5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function K5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function X5e(){var t=st(Aj),e=st(_j),r=bn(),n=st(ace),i=st(_h),a=PS(),s=_I(),o=st(l=>l.rootProps.className);O.useEffect(()=>{if(t==null)return SS;var l=(u,c,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(s&&c!==null&&c!==void 0&&(h=c.payload)!==null&&h!==void 0&&h.coordinate&&c.payload.sourceViewBox){var d=c.payload.coordinate,{x:p,y:m}=d,v=G5e(d,z5e),{x:y,y:w,width:b,height:_}=c.payload.sourceViewBox,x=ay(ay({},v),{},{x:s.x+(b?(p-y)/b:0)*s.width,y:s.y+(_?(m-w)/_:0)*s.height});r(ay(ay({},c),{},{payload:ay(ay({},c.payload),{},{coordinate:x})}))}else r(c);return}if(i!=null){var A;if(typeof n=="function"){var E={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},S=n(i,E);A=i[S]}else n==="value"&&(A=i.find(k=>String(k.value)===c.payload.label));var{coordinate:C}=c.payload;if(A==null||c.payload.active===!1||C==null||s==null){r(zB({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:N}=C,P=Math.min(D,s.x+s.width),M=Math.min(N,s.y+s.height),j={x:a==="horizontal"?A.coordinate:P,y:a==="horizontal"?M:A.coordinate},K=zB({active:c.payload.active,coordinate:j,dataKey:c.payload.dataKey,index:String(A.index),label:c.payload.label,sourceViewBox:c.payload.sourceViewBox,graphicalItemId:c.payload.graphicalItemId});r(K)}}};return QA.on(WB,l),()=>{QA.off(WB,l)}},[o,r,e,t,n,i,a,s])}function Y5e(){var t=st(Aj),e=st(_j),r=bn();O.useEffect(()=>{if(t==null)return SS;var n=(i,a,s)=>{e!==s&&t===i&&r(V5e(a))};return QA.on(TW,n),()=>{QA.off(TW,n)}},[r,e,t])}function Q5e(){var t=bn();O.useEffect(()=>{t(B5e())},[t]),X5e(),Y5e()}function Z5e(t,e,r,n,i,a){var s=st(d=>s5e(d,t,e)),o=st(_j),l=st(Aj),u=st(ace),c=st($5e),f=c==null?void 0:c.active,h=_I();O.useEffect(()=>{if(!f&&l!=null&&o!=null){var d=zB({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});QA.emit(WB,l,d,o)}},[f,r,s,i,n,o,l,u,a,h])}function PW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(r),!0).forEach(function(n){J5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J5e(t,e,r){return(e=e6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e6e(t){var e=t6e(t,"string");return typeof e=="symbol"?e:e+""}function t6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r6e(t){return t.dataKey}function n6e(t,e){return O.isValidElement(t)?O.cloneElement(t,e):typeof t=="function"?O.createElement(t,e):O.createElement(HRe,e)}var IW=[],i6e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function OW(t){var e,r,n=va(t,i6e),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:u,isAnimationActive:c,offset:f,payloadUniqBy:h,position:d,reverseDirection:p,useTranslate3d:m,wrapperStyle:v,cursor:y,shared:w,trigger:b,defaultIndex:_,portal:x,axisId:A}=n,E=bn(),S=typeof _=="number"?String(_):_;O.useEffect(()=>{E(t$e({shared:w,trigger:b,axisId:A,active:i,defaultIndex:S}))},[E,w,b,A,i,S]);var C=_I(),D=Kle(),N=X4e(w),{activeIndex:P,isActive:M}=(e=st(de=>u5e(de,N,b,S)))!==null&&e!==void 0?e:{},j=st(de=>l5e(de,N,b,S)),K=st(de=>yfe(de,N,b,S)),k=st(de=>o5e(de,N,b,S)),V=j,q=O5e(),H=(r=i??M)!==null&&r!==void 0?r:!1,[ee,le]=Joe([V,H]),re=N==="axis"?K:void 0;Z5e(N,b,k,re,P,H);var L=x??q;if(L==null||C==null||N==null)return null;var ie=V??IW;H||(ie=IW),u&&ie.length&&(ie=Voe(ie.filter(de=>de.value!=null&&(de.hide!==!0||n.includeHidden)),h,r6e));var X=ie.length>0,pe=O.createElement(ZRe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:c,active:H,coordinate:k,hasPayload:X,offset:f,position:d,reverseDirection:p,useTranslate3d:m,viewBox:C,wrapperStyle:v,lastBoundingBox:ee,innerRef:le,hasPortalFromProps:!!x},n6e(l,MW(MW({},n),{},{payload:ie,label:re,active:H,activeIndex:P,coordinate:k,accessibilityLayer:D})));return O.createElement(O.Fragment,null,mM.createPortal(pe,L),H&&O.createElement(I5e,{cursor:y,tooltipEventType:N,coordinate:k,payload:ie,index:P}))}var Sfe=t=>null;Sfe.displayName="Cell";function a6e(t,e,r){return(e=s6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s6e(t){var e=o6e(t,"string");return typeof e=="symbol"?e:e+""}function o6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class l6e{constructor(e){a6e(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function kW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function u6e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kW(Object(r),!0).forEach(function(n){c6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c6e(t,e,r){return(e=f6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f6e(t){var e=h6e(t,"string");return typeof e=="symbol"?e:e+""}function h6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d6e={cacheSize:2e3,enableCache:!0},Cfe=u6e({},d6e),RW=new l6e(Cfe.cacheSize),p6e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FW="recharts_measurement_span";function m6e(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var LW=(t,e)=>{try{var r=document.getElementById(FW);r||(r=document.createElement("span"),r.setAttribute("id",FW),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,p6e,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Gx=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||IS.isSsr)return{width:0,height:0};if(!Cfe.enableCache)return LW(e,r);var n=m6e(e,r),i=RW.get(n);if(i)return i;var a=LW(e,r);return RW.set(n,a),a},BW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$W=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g6e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,v6e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Tfe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},y6e=Object.keys(Tfe),Gy="NaN";function b6e(t,e){return t*Tfe[e]}class Ds{static parse(e){var r,[,n,i]=(r=v6e.exec(e))!==null&&r!==void 0?r:[];return new Ds(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,du(e)&&(this.unit=""),r!==""&&!g6e.test(r)&&(this.num=NaN,this.unit=""),y6e.includes(r)&&(this.num=b6e(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return du(this.num)}}function Dfe(t){if(t.includes(Gy))return Gy;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=BW.exec(e))!==null&&r!==void 0?r:[],s=Ds.parse(n??""),o=Ds.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return Gy;e=e.replace(BW,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,c,f,h]=(u=$W.exec(e))!==null&&u!==void 0?u:[],d=Ds.parse(c??""),p=Ds.parse(h??""),m=f==="+"?d.add(p):d.subtract(p);if(m.isNaN())return Gy;e=e.replace($W,m.toString())}return e}var jW=/\(([^()]*)\)/;function w6e(t){for(var e=t,r;(r=jW.exec(e))!=null;){var[,n]=r;e=e.replace(jW,Dfe(n))}return e}function x6e(t){var e=t.replace(/\s+/g,"");return e=w6e(e),e=Dfe(e),e}function A6e(t){try{return x6e(t)}catch{return Gy}}function vR(t){var e=A6e(t.slice(5,-1));return e===Gy?"":e}var _6e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],E6e=["dx","dy","angle","className","breakAll"];function GB(){return GB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GB.apply(null,arguments)}function VW(t,e){if(t==null)return{};var r,n,i=S6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function S6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Nfe=/[ \f\n\r\t\v\u2028\u2029]+/,Pfe=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];ln(e)||(r?i=e.toString().split(""):i=e.toString().split(Nfe));var a=i.map(o=>({word:o,width:Gx(o,n).width})),s=r?0:Gx("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function C6e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Mfe=(t,e,r,n)=>t.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(e==null||n||l.width+o+r<Number(e)))l.words.push(s),l.width+=o+r;else{var u={words:[s],width:o};i.push(u)}return i},[]),Ife=t=>t.reduce((e,r)=>e.width>r.width?e:r),T6e="",UW=(t,e,r,n,i,a,s,o)=>{var l=t.slice(0,e),u=Pfe({breakAll:r,style:n,children:l+T6e});if(!u)return[!1,[]];var c=Mfe(u.wordsWithComputedWidth,a,s,o),f=c.length>i||Ife(c).width>Number(a);return[f,c]},D6e=(t,e,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=t,u=at(a),c=String(s),f=Mfe(e,n,r,i);if(!u||i)return f;var h=f.length>a||Ife(f).width>Number(n);if(!h)return f;for(var d=0,p=c.length-1,m=0,v;d<=p&&m<=c.length-1;){var y=Math.floor((d+p)/2),w=y-1,[b,_]=UW(c,w,l,o,a,n,r,i),[x]=UW(c,y,l,o,a,n,r,i);if(!b&&!x&&(d=y+1),b&&x&&(p=y-1),!b&&x){v=_;break}m++}return v||f},zW=t=>{var e=ln(t)?[]:t.toString().split(Nfe);return[{words:e,width:void 0}]},N6e=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=t;if((e||r)&&!IS.isSsr){var o,l,u=Pfe({breakAll:a,children:n,style:i});if(u){var{wordsWithComputedWidth:c,spaceWidth:f}=u;o=c,l=f}else return zW(n);return D6e({breakAll:a,children:n,maxLines:s,style:i},o,l,e,!!r)}return zW(n)},Ofe="#808080",P6e={angle:0,breakAll:!1,capHeight:"0.71em",fill:Ofe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Gj=O.forwardRef((t,e)=>{var r=va(t,P6e),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:u,verticalAnchor:c}=r,f=VW(r,_6e),h=O.useMemo(()=>N6e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:d,dy:p,angle:m,className:v,breakAll:y}=f,w=VW(f,E6e);if(!xc(n)||!xc(i)||h.length===0)return null;var b=Number(n)+(at(d)?d:0),_=Number(i)+(at(p)?p:0);if(!zn(b)||!zn(_))return null;var x;switch(c){case"start":x=vR("calc(".concat(s,")"));break;case"middle":x=vR("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:x=vR("calc(".concat(h.length-1," * -").concat(a,")"));break}var A=[];if(l){var E=h[0].width,{width:S}=f;A.push("scale(".concat(at(S)&&at(E)?S/E:1,")"))}return m&&A.push("rotate(".concat(m,", ").concat(b,", ").concat(_,")")),A.length&&(w.transform=A.join(" ")),O.createElement("text",GB({},fs(w),{ref:e,x:b,y:_,className:xr("recharts-text",v),textAnchor:u,fill:o.includes("url")?Ofe:o}),h.map((C,D)=>{var N=C.words.join(y?"":" ");return O.createElement("tspan",{x:b,dy:D===0?x:a,key:"".concat(N,"-").concat(D)},N)}))});Gj.displayName="Text";var M6e=["labelRef"];function I6e(t,e){if(t==null)return{};var r,n,i=O6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function O6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function qW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qW(Object(r),!0).forEach(function(n){k6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k6e(t,e,r){return(e=R6e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R6e(t){var e=F6e(t,"string");return typeof e=="symbol"?e:e+""}function F6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cf.apply(null,arguments)}var kfe=O.createContext(null),L6e=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=t,l=O.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[e,r,n,i,a,s]);return O.createElement(kfe.Provider,{value:l},o)},Rfe=()=>{var t=O.useContext(kfe),e=_I();return t||$le(e)},B6e=O.createContext(null),$6e=()=>{var t=O.useContext(B6e),e=st(cce);return t||e},j6e=t=>{var{value:e,formatter:r}=t,n=ln(t.children)?e:t.children;return typeof r=="function"?r(n):n},Kj=t=>t!=null&&typeof t=="function",V6e=(t,e)=>{var r=Rs(e-t),n=Math.min(Math.abs(e-t),360);return r*n},U6e=(t,e,r,n,i)=>{var{offset:a,className:s}=t,{cx:o,cy:l,innerRadius:u,outerRadius:c,startAngle:f,endAngle:h,clockWise:d}=i,p=(u+c)/2,m=V6e(f,h),v=m>=0?1:-1,y,w;switch(e){case"insideStart":y=f+v*a,w=d;break;case"insideEnd":y=h-v*a,w=!d;break;case"end":y=h+v*a,w=d;break;default:throw new Error("Unsupported position ".concat(e))}w=m<=0?w:!w;var b=ua(o,l,p,y),_=ua(o,l,p,y+(w?1:-1)*359),x="M".concat(b.x,",").concat(b.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),A=ln(t.id)?BA("recharts-radial-line-"):t.id;return O.createElement("text",Cf({},n,{dominantBaseline:"central",className:xr("recharts-radial-bar-label",s)}),O.createElement("defs",null,O.createElement("path",{id:A,d:x})),O.createElement("textPath",{xlinkHref:"#".concat(A)},r))},z6e=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=t,u=(o+l)/2;if(r==="outside"){var{x:c,y:f}=ua(n,i,s+e,u);return{x:c,y:f,textAnchor:c>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+s)/2,{x:d,y:p}=ua(n,i,h,u);return{x:d,y:p,textAnchor:"middle",verticalAnchor:"middle"}},KB=t=>"cx"in t&&at(t.cx),q6e=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,a;r!=null&&!KB(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:u,height:c}=e,f=s,h=s+(l-u)/2,d=(f+h)/2,p=(l+u)/2,m=f+l/2,v=c>=0?1:-1,y=v*n,w=v>0?"end":"start",b=v>0?"start":"end",_=l>=0?1:-1,x=_*n,A=_>0?"end":"start",E=_>0?"start":"end";if(i==="top"){var S={x:f+l/2,y:o-y,textAnchor:"middle",verticalAnchor:w};return kn(kn({},S),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var C={x:h+u/2,y:o+c+y,textAnchor:"middle",verticalAnchor:b};return kn(kn({},C),a?{height:Math.max(a.y+a.height-(o+c),0),width:u}:{})}if(i==="left"){var D={x:d-x,y:o+c/2,textAnchor:A,verticalAnchor:"middle"};return kn(kn({},D),a?{width:Math.max(D.x-a.x,0),height:c}:{})}if(i==="right"){var N={x:d+p+x,y:o+c/2,textAnchor:E,verticalAnchor:"middle"};return kn(kn({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:c}:{})}var P=a?{width:p,height:c}:{};return i==="insideLeft"?kn({x:d+x,y:o+c/2,textAnchor:E,verticalAnchor:"middle"},P):i==="insideRight"?kn({x:d+p-x,y:o+c/2,textAnchor:A,verticalAnchor:"middle"},P):i==="insideTop"?kn({x:f+l/2,y:o+y,textAnchor:"middle",verticalAnchor:b},P):i==="insideBottom"?kn({x:h+u/2,y:o+c-y,textAnchor:"middle",verticalAnchor:w},P):i==="insideTopLeft"?kn({x:f+x,y:o+y,textAnchor:E,verticalAnchor:b},P):i==="insideTopRight"?kn({x:f+l-x,y:o+y,textAnchor:A,verticalAnchor:b},P):i==="insideBottomLeft"?kn({x:h+x,y:o+c-y,textAnchor:E,verticalAnchor:w},P):i==="insideBottomRight"?kn({x:h+u-x,y:o+c-y,textAnchor:A,verticalAnchor:w},P):i&&typeof i=="object"&&(at(i.x)||ih(i.x))&&(at(i.y)||ih(i.y))?kn({x:s+pu(i.x,p),y:o+pu(i.y,c),textAnchor:"end",verticalAnchor:"end"},P):kn({x:m,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},P)},H6e={angle:0,offset:5,zIndex:Vi.label,position:"middle",textBreakAll:!1};function jh(t){var e=va(t,H6e),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:u}=e,c=$6e(),f=Rfe(),h=n==="center"?f:c??f,d,p,m;if(r==null?d=h:KB(r)?d=r:d=$le(r),!d||ln(i)&&ln(a)&&!O.isValidElement(s)&&typeof s!="function")return null;var v=kn(kn({},e),{},{viewBox:d});if(O.isValidElement(s)){var{labelRef:y}=v,w=I6e(v,M6e);return O.cloneElement(s,w)}if(typeof s=="function"){if(p=O.createElement(s,v),O.isValidElement(p))return p}else p=j6e(e);var b=fs(e);if(KB(d)){if(n==="insideStart"||n==="insideEnd"||n==="end")return U6e(e,n,p,b,d);m=z6e(d,e.offset,e.position)}else m=q6e(e,d);return O.createElement(Dl,{zIndex:e.zIndex},O.createElement(Gj,Cf({ref:u,className:xr("recharts-label",o)},b,m,{textAnchor:C6e(b.textAnchor)?b.textAnchor:m.textAnchor,breakAll:l}),p))}jh.displayName="Label";var W6e=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?O.createElement(jh,Cf({key:"label-implicit"},n)):xc(t)?O.createElement(jh,Cf({key:"label-implicit",value:t},n)):O.isValidElement(t)?t.type===jh?O.cloneElement(t,kn({key:"label-implicit"},n)):O.createElement(jh,Cf({key:"label-implicit",content:t},n)):Kj(t)?O.createElement(jh,Cf({key:"label-implicit",content:t},n)):t&&typeof t=="object"?O.createElement(jh,Cf({},t,{key:"label-implicit"},n)):null};function G6e(t){var{label:e,labelRef:r}=t,n=Rfe();return W6e(e,n,r)||null}var Ffe={},Lfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Lfe);var Bfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Bfe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lfe,r=Bfe,n=oI;function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(Ffe);var K6e=Ffe.last;const X6e=Sl(K6e);var Y6e=["valueAccessor"],Q6e=["dataKey","clockWise","id","textBreakAll","zIndex"];function Q2(){return Q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q2.apply(null,arguments)}function HW(t,e){if(t==null)return{};var r,n,i=Z6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Z6e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var J6e=t=>Array.isArray(t.value)?X6e(t.value):t.value,$fe=O.createContext(void 0),jfe=$fe.Provider,Vfe=O.createContext(void 0);Vfe.Provider;function eje(){return O.useContext($fe)}function tje(){return O.useContext(Vfe)}function tN(t){var{valueAccessor:e=J6e}=t,r=HW(t,Y6e),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=HW(r,Q6e),u=eje(),c=tje(),f=u||c;return!f||!f.length?null:O.createElement(Dl,{zIndex:o??Vi.label},O.createElement(xl,{className:"recharts-label-list"},f.map((h,d)=>{var p,m=ln(n)?e(h,d):pi(h&&h.payload,n),v=ln(a)?{}:{id:"".concat(a,"-").concat(d)};return O.createElement(jh,Q2({key:"label-".concat(d)},fs(h),l,v,{fill:(p=r.fill)!==null&&p!==void 0?p:h.fill,parentViewBox:h.parentViewBox,value:m,textBreakAll:s,viewBox:h.viewBox,index:d,zIndex:0}))})))}tN.displayName="LabelList";function Ufe(t){var{label:e}=t;return e?e===!0?O.createElement(tN,{key:"labelList-implicit"}):O.isValidElement(e)||Kj(e)?O.createElement(tN,{key:"labelList-implicit",content:e}):typeof e=="object"?O.createElement(tN,Q2({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function XB(){return XB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XB.apply(null,arguments)}var zfe=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=xr("recharts-dot",i);return at(e)&&at(r)&&at(n)?O.createElement("circle",XB({},hu(t),_6(t),{className:a,cx:e,cy:r,r:n})):null},rje={radiusAxis:{},angleAxis:{}},qfe=zs({name:"polarAxis",initialState:rje,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:kpt,removeRadiusAxis:Rpt,addAngleAxis:Fpt,removeAngleAxis:Lpt}=qfe.actions,nje=qfe.reducer,Hfe={exports:{}},Ar={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=typeof Symbol=="function"&&Symbol.for,Xj=Gi?Symbol.for("react.element"):60103,Yj=Gi?Symbol.for("react.portal"):60106,KI=Gi?Symbol.for("react.fragment"):60107,XI=Gi?Symbol.for("react.strict_mode"):60108,YI=Gi?Symbol.for("react.profiler"):60114,QI=Gi?Symbol.for("react.provider"):60109,ZI=Gi?Symbol.for("react.context"):60110,Qj=Gi?Symbol.for("react.async_mode"):60111,JI=Gi?Symbol.for("react.concurrent_mode"):60111,eO=Gi?Symbol.for("react.forward_ref"):60112,tO=Gi?Symbol.for("react.suspense"):60113,ije=Gi?Symbol.for("react.suspense_list"):60120,rO=Gi?Symbol.for("react.memo"):60115,nO=Gi?Symbol.for("react.lazy"):60116,aje=Gi?Symbol.for("react.block"):60121,sje=Gi?Symbol.for("react.fundamental"):60117,oje=Gi?Symbol.for("react.responder"):60118,lje=Gi?Symbol.for("react.scope"):60119;function Mo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Xj:switch(t=t.type,t){case Qj:case JI:case KI:case YI:case XI:case tO:return t;default:switch(t=t&&t.$$typeof,t){case ZI:case eO:case nO:case rO:case QI:return t;default:return e}}case Yj:return e}}}function Wfe(t){return Mo(t)===JI}Ar.AsyncMode=Qj;Ar.ConcurrentMode=JI;Ar.ContextConsumer=ZI;Ar.ContextProvider=QI;Ar.Element=Xj;Ar.ForwardRef=eO;Ar.Fragment=KI;Ar.Lazy=nO;Ar.Memo=rO;Ar.Portal=Yj;Ar.Profiler=YI;Ar.StrictMode=XI;Ar.Suspense=tO;Ar.isAsyncMode=function(t){return Wfe(t)||Mo(t)===Qj};Ar.isConcurrentMode=Wfe;Ar.isContextConsumer=function(t){return Mo(t)===ZI};Ar.isContextProvider=function(t){return Mo(t)===QI};Ar.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xj};Ar.isForwardRef=function(t){return Mo(t)===eO};Ar.isFragment=function(t){return Mo(t)===KI};Ar.isLazy=function(t){return Mo(t)===nO};Ar.isMemo=function(t){return Mo(t)===rO};Ar.isPortal=function(t){return Mo(t)===Yj};Ar.isProfiler=function(t){return Mo(t)===YI};Ar.isStrictMode=function(t){return Mo(t)===XI};Ar.isSuspense=function(t){return Mo(t)===tO};Ar.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===KI||t===JI||t===YI||t===XI||t===tO||t===ije||typeof t=="object"&&t!==null&&(t.$$typeof===nO||t.$$typeof===rO||t.$$typeof===QI||t.$$typeof===ZI||t.$$typeof===eO||t.$$typeof===sje||t.$$typeof===oje||t.$$typeof===lje||t.$$typeof===aje)};Ar.typeOf=Mo;Hfe.exports=Ar;var uje=Hfe.exports,WW=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",GW=null,yR=null,Gfe=t=>{if(t===GW&&Array.isArray(yR))return yR;var e=[];return O.Children.forEach(t,r=>{ln(r)||(uje.isFragment(r)?e=e.concat(Gfe(r.props.children)):e.push(r))}),yR=e,GW=t,e};function cje(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>WW(i)):n=[WW(e)],Gfe(t).forEach(i=>{var a=aw(i,"type.displayName")||aw(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var Kfe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Xfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(Xfe);var fje=Xfe.isPlainObject;const hje=Sl(fje);function KW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(r),!0).forEach(function(n){dje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dje(t,e,r){return(e=pje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pje(t){var e=mje(t,"string");return typeof e=="symbol"?e:e+""}function mje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z2.apply(null,arguments)}var YW=(t,e,r,n,i)=>{var a=r-n,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+r,",").concat(e),s+="L ".concat(t+r-a/2,",").concat(e+i),s+="L ".concat(t+r-a/2-n,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},gje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vje=t=>{var e=va(t,gje),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:l,animationDuration:u,animationBegin:c,isUpdateAnimationActive:f}=e,h=O.useRef(null),[d,p]=O.useState(-1),m=O.useRef(i),v=O.useRef(a),y=O.useRef(s),w=O.useRef(r),b=O.useRef(n),_=NI(t,"trapezoid-");if(O.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var j=h.current.getTotalLength();j&&p(j)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var x=xr("recharts-trapezoid",o);if(!f)return O.createElement("g",null,O.createElement("path",Z2({},fs(e),{className:x,d:YW(r,n,i,a,s)})));var A=m.current,E=v.current,S=y.current,C=w.current,D=b.current,N="0px ".concat(d===-1?1:d,"px"),P="".concat(d,"px 0px"),M=Yle(["strokeDasharray"],u,l);return O.createElement(DI,{animationId:_,key:_,canBegin:d>0,duration:u,easing:l,isActive:f,begin:c},j=>{var K=Nn(A,i,j),k=Nn(E,a,j),V=Nn(S,s,j),q=Nn(C,r,j),H=Nn(D,n,j);h.current&&(m.current=K,v.current=k,y.current=V,w.current=q,b.current=H);var ee=j>0?{transition:M,strokeDasharray:P}:{strokeDasharray:N};return O.createElement("path",Z2({},fs(e),{className:x,d:YW(q,H,K,k,V),ref:h,style:XW(XW({},ee),e.style)}))})},yje=["option","shapeType","propTransformer","activeClassName"];function bje(t,e){if(t==null)return{};var r,n,i=wje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function QW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QW(Object(r),!0).forEach(function(n){xje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xje(t,e,r){return(e=Aje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aje(t){var e=_je(t,"string");return typeof e=="symbol"?e:e+""}function _je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eje(t,e){return J2(J2({},e),t)}function Sje(t,e){return t==="symbols"}function ZW(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return O.createElement(eue,r);case"trapezoid":return O.createElement(vje,r);case"sector":return O.createElement(nue,r);case"symbols":if(Sje(e))return O.createElement(A6,r);break;case"curve":return O.createElement(Xle,r);default:return null}}function Cje(t){return O.isValidElement(t)?t.props:t}function Yfe(t){var{option:e,shapeType:r,propTransformer:n=Eje,activeClassName:i="recharts-active-shape"}=t,a=bje(t,yje),s;if(O.isValidElement(e))s=O.cloneElement(e,J2(J2({},a),Cje(e)));else if(typeof e=="function")s=e(a,a.index);else if(hje(e)&&typeof e!="boolean"){var o=n(e,a);s=O.createElement(ZW,{shapeType:r,elementProps:o})}else{var l=a;s=O.createElement(ZW,{shapeType:r,elementProps:l})}return a.isActive?O.createElement(xl,{className:i},s):s}var Qfe=(t,e,r)=>{var n=bn();return(i,a)=>s=>{t==null||t(i,a,s),n(Jce({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},Zfe=t=>{var e=bn();return(r,n)=>i=>{t==null||t(r,n,i),e(r$e())}},Jfe=(t,e,r)=>{var n=bn();return(i,a)=>s=>{t==null||t(i,a,s),n(n$e({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function ehe(t){var{tooltipEntrySettings:e}=t,r=bn(),n=Ua(),i=O.useRef(null);return O.useLayoutEffect(()=>{n||(i.current===null?r(Z4e(e)):i.current!==e&&r(J4e({prev:i.current,next:e})),i.current=e)},[e,r,n]),O.useLayoutEffect(()=>()=>{i.current&&(r(e$e(i.current)),i.current=null)},[r]),null}function the(t){var{legendPayload:e}=t,r=bn(),n=Ua(),i=O.useRef(null);return O.useLayoutEffect(()=>{n||(i.current===null?r(ERe(e)):i.current!==e&&r(SRe({prev:i.current,next:e})),i.current=e)},[r,n,e]),O.useLayoutEffect(()=>()=>{i.current&&(r(CRe(i.current)),i.current=null)},[r]),null}var bR,Tje=()=>{var[t]=O.useState(()=>BA("uid-"));return t},Dje=(bR=gZ.useId)!==null&&bR!==void 0?bR:Tje;function rhe(t,e){var r=Dje();return e||(t?"".concat(t,"-").concat(r):r)}var Nje=O.createContext(void 0),nhe=t=>{var{id:e,type:r,children:n}=t,i=rhe("recharts-".concat(r),e);return O.createElement(Nje.Provider,{value:i},n(i))},Pje={cartesianItems:[],polarItems:[]},ihe=zs({name:"graphicalItems",initialState:Pje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:nn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ou(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},prepare:nn()},removeCartesianGraphicalItem:{reducer(t,e){var r=ou(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:nn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:nn()},removePolarGraphicalItem:{reducer(t,e){var r=ou(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:nn()}}}),{addCartesianGraphicalItem:Mje,replaceCartesianGraphicalItem:Ije,removeCartesianGraphicalItem:Oje,addPolarGraphicalItem:Bpt,removePolarGraphicalItem:$pt}=ihe.actions,kje=ihe.reducer,Rje=t=>{var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(Mje(t)):r.current!==t&&e(Ije({prev:r.current,next:t})),r.current=t},[e,t]),O.useLayoutEffect(()=>()=>{r.current&&(e(Oje(r.current)),r.current=null)},[e]),null},ahe=O.memo(Rje),Fje=["points"];function JW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JW(Object(r),!0).forEach(function(n){Lje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lje(t,e,r){return(e=Bje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bje(t){var e=$je(t,"string");return typeof e=="symbol"?e:e+""}function $je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eP(){return eP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eP.apply(null,arguments)}function jje(t,e){if(t==null)return{};var r,n,i=Vje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Vje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Uje(t){var{option:e,dotProps:r,className:n}=t;if(O.isValidElement(e))return O.cloneElement(e,r);if(typeof e=="function")return e(r);var i=xr(n,typeof e!="boolean"?e.className:""),a=r??{},{points:s}=a,o=jje(a,Fje);return O.createElement(zfe,eP({},o,{className:i}))}function zje(t,e){return t==null?!1:e?!0:t.length===1}function qje(t){var{points:e,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:u=Vi.scatter}=t;if(!zje(e,r))return null;var c=Kfe(r),f=AMe(r),h=e.map((p,m)=>{var v,y,w=wR(wR(wR({r:3},s),f),{},{index:m,cx:(v=p.x)!==null&&v!==void 0?v:void 0,cy:(y=p.y)!==null&&y!==void 0?y:void 0,dataKey:a,value:p.value,payload:p.payload,points:e});return O.createElement(Uje,{key:"dot-".concat(m),option:r,dotProps:w,className:i})}),d={};return o&&l!=null&&(d.clipPath="url(#clipPath-".concat(c?"":"dots-").concat(l,")")),O.createElement(Dl,{zIndex:u},O.createElement(xl,eP({className:n},d),h))}function eG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(r),!0).forEach(function(n){Hje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hje(t,e,r){return(e=Wje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wje(t){var e=Gje(t,"string");return typeof e=="symbol"?e:e+""}function Gje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kje={xAxis:{},yAxis:{},zAxis:{}},she=zs({name:"cartesianAxis",initialState:Kje,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:nn()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:nn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:nn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:nn()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:nn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:nn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:nn()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:nn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:nn()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,i=t.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);t.yAxis[r]=tG(tG({},t.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Xje,replaceXAxis:Yje,removeXAxis:Qje,addYAxis:Zje,replaceYAxis:Jje,removeYAxis:eVe,addZAxis:jpt,replaceZAxis:Vpt,removeZAxis:Upt,updateYAxisWidth:tVe}=she.actions,rVe=she.reducer,nVe=Ae([Hi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),iVe=Ae([nVe,yh,bh],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Zj=()=>st(iVe),aVe=()=>st(W$e);function rG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(r),!0).forEach(function(n){sVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sVe(t,e,r){return(e=oVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oVe(t){var e=lVe(t,"string");return typeof e=="symbol"?e:e+""}function lVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uVe=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=xR(xR(xR({},o),_S(i)),_6(i)),u;return O.isValidElement(i)?u=O.cloneElement(i,l):typeof i=="function"?u=i(l):u=O.createElement(zfe,l),O.createElement(xl,{className:"recharts-active-dot",clipPath:s},u)};function cVe(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:s=Vi.activeDot}=t,o=st(Sv),l=aVe();if(e==null||l==null)return null;var u=e.find(c=>l.includes(c.payload));return ln(u)?null:O.createElement(Dl,{zIndex:s},O.createElement(uVe,{point:u,childIndex:Number(o),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}var fVe="Invariant failed";function hVe(t,e){throw new Error(fVe)}var dVe=["x","y"];function YB(){return YB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YB.apply(null,arguments)}function nG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function V1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(r),!0).forEach(function(n){pVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pVe(t,e,r){return(e=mVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mVe(t){var e=gVe(t,"string");return typeof e=="symbol"?e:e+""}function gVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vVe(t,e){if(t==null)return{};var r,n,i=yVe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function yVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function bVe(t,e){var{x:r,y:n}=t,i=vVe(t,dVe),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),u="".concat(e.height||i.height),c=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return V1(V1(V1(V1(V1({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function tP(t){return O.createElement(Yfe,YB({shapeType:"rectangle",propTransformer:bVe,activeClassName:"recharts-active-bar"},t))}var wVe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(at(e))return e;var a=at(n)||ln(n);return a?e(n,i):(a||hVe(),r)}},xVe={},ohe=zs({name:"errorBars",initialState:xVe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:zpt,replaceErrorBar:qpt,removeErrorBar:Hpt}=ohe.actions,AVe=ohe.reducer,_Ve=["children"];function EVe(t,e){if(t==null)return{};var r,n,i=SVe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function SVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var CVe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},TVe=O.createContext(CVe);function lhe(t){var{children:e}=t,r=EVe(t,_Ve);return O.createElement(TVe.Provider,{value:r},e)}function Jj(t,e){var r,n,i=st(u=>xh(u,t)),a=st(u=>Ah(u,e)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Di.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:Ni.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function uhe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Zj(),{needClipX:a,needClipY:s,needClip:o}=Jj(e,r);if(!o||!i)return null;var{x:l,y:u,width:c,height:f}=i;return O.createElement("clipPath",{id:"clipPath-".concat(n)},O.createElement("rect",{x:a?l:l-c/2,y:s?u:u-f/2,width:a?c:c*2,height:s?f:f*2}))}function DVe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&zn(t.zIndex)?t.zIndex:e}var NVe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS=O;function PVe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MVe=typeof Object.is=="function"?Object.is:PVe,IVe=WS.useSyncExternalStore,OVe=WS.useRef,kVe=WS.useEffect,RVe=WS.useMemo,FVe=WS.useDebugValue;NVe.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=OVe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=RVe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&s.hasValue){var p=s.value;if(i(p,d))return f=p}return f=d}if(p=f,MVe(c,d))return p;var m=n(d);return i!==void 0&&i(p,m)?(c=d,p):(c=d,f=m)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var o=IVe(t,a[0],a[1]);return kVe(function(){s.hasValue=!0,s.value=o},[o]),FVe(o),o};function LVe(t){t()}function BVe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){LVe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var iG={notify(){},get:()=>[]};function $Ve(t,e){let r,n=iG,i=0,a=!1;function s(m){c();const v=n.subscribe(m);let y=!1;return()=>{y||(y=!0,v(),f())}}function o(){n.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return a}function c(){i++,r||(r=t.subscribe(l),n=BVe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=iG)}function h(){a||(a=!0,c())}function d(){a&&(a=!1,f())}const p={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}var jVe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VVe=jVe(),UVe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zVe=UVe(),qVe=()=>VVe||zVe?O.useLayoutEffect:O.useEffect,HVe=qVe();function aG(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function WVe(t,e){if(aG(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!aG(t[r[i]],e[r[i]]))return!1;return!0}var AR=Symbol.for("react-redux-context"),_R=typeof globalThis<"u"?globalThis:{};function GVe(){if(!O.createContext)return{};const t=_R[AR]??(_R[AR]=new Map);let e=t.get(O.createContext);return e||(e=O.createContext(null),t.set(O.createContext,e)),e}var KVe=GVe();function XVe(t){const{children:e,context:r,serverState:n,store:i}=t,a=O.useMemo(()=>{const l=$Ve(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=O.useMemo(()=>i.getState(),[i]);HVe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||KVe;return O.createElement(o.Provider,{value:a},e)}var YVe=XVe,QVe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ZVe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function iO(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(QVe.has(n)){if(t[n]==null&&e[n]==null)continue;if(!WVe(t[n],e[n]))return!1}else if(!ZVe(t[n],e[n]))return!1;return!0}var JVe=["onMouseEnter","onMouseLeave","onClick"],eUe=["value","background","tooltipPosition"],tUe=["id"],rUe=["onMouseEnter","onClick","onMouseLeave"];function ch(){return ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ch.apply(null,arguments)}function sG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ts(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(r),!0).forEach(function(n){nUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nUe(t,e,r){return(e=iUe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iUe(t){var e=aUe(t,"string");return typeof e=="symbol"?e:e+""}function aUe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rP(t,e){if(t==null)return{};var r,n,i=sUe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function sUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oUe=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:yI(r,e),payload:t}]},lUe=O.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:l}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:yI(a,e),hide:s,type:l,color:i,unit:o}};return O.createElement(ehe,{tooltipEntrySettings:u})});function uUe(t){var e=st(Sv),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:l}=a,u=rP(a,JVe),c=Qfe(s,n),f=Zfe(o),h=Jfe(l,n);if(!i||r==null)return null;var d=_S(i);return O.createElement(Dl,{zIndex:DVe(i,Vi.barBackground)},r.map((p,m)=>{var{value:v,background:y,tooltipPosition:w}=p,b=rP(p,eUe);if(!y)return null;var _=c(p,m),x=f(p,m),A=h(p,m),E=ts(ts(ts(ts(ts({option:i,isActive:String(m)===e},b),{},{fill:"#eee"},y),d),sI(u,p,m)),{},{onMouseEnter:_,onMouseLeave:x,onClick:A,dataKey:n,index:m,className:"recharts-bar-background-rectangle"});return O.createElement(tP,ch({key:"background-bar-".concat(m)},E))}))}function cUe(t){var{showLabels:e,children:r,rects:n}=t,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return ts(ts({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return O.createElement(jfe,{value:e?i:void 0},r)}function fUe(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=t,o=st(Sv),l=st(dfe),u=r&&String(a)===o&&(l==null||s===l),c=u?r:e;return u?O.createElement(Dl,{zIndex:Vi.activeBar},O.createElement(tP,ch({},n,{name:String(n.name)},i,{isActive:u,option:c,index:a,dataKey:s}))):O.createElement(tP,ch({},n,{name:String(n.name)},i,{isActive:u,option:c,index:a,dataKey:s}))}function hUe(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:a}=t;return O.createElement(tP,ch({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:i,dataKey:a}))}function dUe(t){var e,{data:r,props:n}=t,i=(e=hu(n))!==null&&e!==void 0?e:{},{id:a}=i,s=rP(i,tUe),{shape:o,dataKey:l,activeBar:u}=n,{onMouseEnter:c,onClick:f,onMouseLeave:h}=n,d=rP(n,rUe),p=Qfe(c,l),m=Zfe(h),v=Jfe(f,l);return r?O.createElement(O.Fragment,null,r.map((y,w)=>O.createElement(xl,ch({key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(w),className:"recharts-bar-rectangle"},sI(d,y,w),{onMouseEnter:p(y,w),onMouseLeave:m(y,w),onClick:v(y,w)}),u?O.createElement(fUe,{shape:o,activeBar:u,baseProps:s,entry:y,index:w,dataKey:l}):O.createElement(hUe,{shape:o,baseProps:s,entry:y,index:w,dataKey:l})))):null}function pUe(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:c}=e,f=r.current,h=NI(e,"recharts-bar-"),[d,p]=O.useState(!1),m=!d,v=O.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),y=O.useCallback(()=>{typeof c=="function"&&c(),p(!0)},[c]);return O.createElement(cUe,{showLabels:m,rects:n},O.createElement(DI,{animationId:h,begin:s,duration:o,isActive:a,easing:l,onAnimationEnd:v,onAnimationStart:y,key:h},w=>{var b=w===1?n:n==null?void 0:n.map((_,x)=>{var A=f&&f[x];if(A)return ts(ts({},_),{},{x:Nn(A.x,_.x,w),y:Nn(A.y,_.y,w),width:Nn(A.width,_.width,w),height:Nn(A.height,_.height,w)});if(i==="horizontal"){var E=Nn(0,_.height,w),S=Nn(_.stackedBarStart,_.y,w);return ts(ts({},_),{},{y:S,height:E})}var C=Nn(0,_.width,w),D=Nn(_.stackedBarStart,_.x,w);return ts(ts({},_),{},{width:C,x:D})});return w>0&&(r.current=b??null),b==null?null:O.createElement(xl,null,O.createElement(dUe,{props:e,data:b}))}),O.createElement(Ufe,{label:e.label}),e.children)}function mUe(t){var e=O.useRef(null);return O.createElement(pUe,{previousRectanglesRef:e,props:t})}var che=0,gUe=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:pi(t,e)}};class vUe extends O.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:u}=this.props;if(e||r==null)return null;var c=xr("recharts-bar",i),f=u;return O.createElement(xl,{className:c,id:u},o&&O.createElement("defs",null,O.createElement(uhe,{clipPathId:f,xAxisId:a,yAxisId:s})),O.createElement(xl,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},O.createElement(uUe,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),O.createElement(mUe,this.props)))}}var yUe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:che,xAxisId:0,yAxisId:0,zIndex:Vi.bar};function bUe(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:c}=t,{needClip:f}=Jj(e,r),h=PS(),d=Ua(),p=cje(t.children,Sfe),m=st(w=>GUe(w,e,r,d,t.id,p));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=m==null?void 0:m[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,O.createElement(lhe,{xAxisId:e,yAxisId:r,data:m,dataPointFormatter:gUe,errorBarOffset:v},O.createElement(vUe,ch({},t,{layout:h,needClip:f,data:m,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:c})))}function wUe(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:c,displayedData:f,offset:h,cells:d,parentViewBox:p,dataStartIndex:m}=t,v=e==="horizontal"?o:s,y=c?v.scale.domain():null,w=Pke({numericAxis:v}),b=v.scale(w);return f.map((_,x)=>{var A,E,S,C,D,N;c?A=Eke(c[x+m],y):(A=pi(_,r),Array.isArray(A)||(A=[w,A]));var P=wVe(n,che)(A[1],x);if(e==="horizontal"){var M,[j,K]=[o.scale(A[0]),o.scale(A[1])];E=qq({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:_,index:x}),S=(M=K??j)!==null&&M!==void 0?M:void 0,C=i.size;var k=j-K;if(D=du(k)?0:k,N={x:E,y:h.top,width:C,height:h.height},Math.abs(P)>0&&Math.abs(D)<Math.abs(P)){var V=Rs(D||P)*(Math.abs(P)-Math.abs(D));S-=V,D+=V}}else{var[q,H]=[s.scale(A[0]),s.scale(A[1])];if(E=q,S=qq({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:_,index:x}),C=H-q,D=i.size,N={x:h.left,y:S,width:h.width,height:D},Math.abs(P)>0&&Math.abs(C)<Math.abs(P)){var ee=Rs(C||P)*(Math.abs(P)-Math.abs(C));C+=ee}}if(E==null||S==null||C==null||D==null)return null;var le=ts(ts({},_),{},{stackedBarStart:b,x:E,y:S,width:C,height:D,value:c?A:A[1],payload:_,background:N,tooltipPosition:{x:E+C/2,y:S+D/2},parentViewBox:p},d&&d[x]&&d[x].props);return le}).filter(Boolean)}function xUe(t){var e=va(t,yUe),r=Ua();return O.createElement(nhe,{id:e.id,type:"bar"},n=>O.createElement(O.Fragment,null,O.createElement(the,{legendPayload:oUe(e)}),O.createElement(lUe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),O.createElement(ahe,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Nke(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),O.createElement(Dl,{zIndex:e.zIndex},O.createElement(bUe,ch({},e,{id:n})))))}var fhe=O.memo(xUe,iO);fhe.displayName="Bar";function oG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oG(Object(r),!0).forEach(function(n){AUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AUe(t,e,r){return(e=_Ue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ue(t){var e=EUe(t,"string");return typeof e=="symbol"?e:e+""}function EUe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SUe=(t,e)=>e,CUe=(t,e,r)=>r,TUe=(t,e,r,n)=>n,DUe=(t,e,r,n,i)=>i,GS=Ae([qI,DUe],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),NUe=Ae([GS],t=>t==null?void 0:t.maxBarSize),PUe=(t,e,r,n,i,a)=>a,lG=(t,e,r)=>{var n=r??t;if(!ln(n))return pu(n,e,0)},MUe=Ae([cr,qI,SUe,CUe,TUe],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),IUe=(t,e,r,n)=>{var i=cr(t);return i==="horizontal"?UB(t,"yAxis",r,n):UB(t,"xAxis",e,n)},OUe=(t,e,r)=>{var n=cr(t);return n==="horizontal"?gW(t,"xAxis",e):gW(t,"yAxis",r)},kUe=(t,e,r)=>{var n={},i=t.filter(VI),a=t.filter(u=>u.stackId==null),s=i.reduce((u,c)=>(u[c.stackId]||(u[c.stackId]=[]),u[c.stackId].push(c),u),n),o=Object.entries(s).map(u=>{var[c,f]=u,h=f.map(p=>p.dataKey),d=lG(e,r,f[0].barSize);return{stackId:c,dataKeys:h,barSize:d}}),l=a.map(u=>{var c=[u.dataKey].filter(h=>h!=null),f=lG(e,r,u.barSize);return{stackId:void 0,dataKeys:c,barSize:f}});return[...o,...l]},RUe=Ae([MUe,HBe,OUe],kUe),FUe=(t,e,r,n,i)=>{var a,s,o=GS(t,e,r,n,i);if(o!=null){var l=cr(t),u=rce(t),{maxBarSize:c}=o,f=ln(c)?u:c,h,d;return l==="horizontal"?(h=Cp(t,"xAxis",e,n),d=Sp(t,"xAxis",e,n)):(h=Cp(t,"yAxis",r,n),d=Sp(t,"yAxis",r,n)),(a=(s=uw(h,d,!0))!==null&&s!==void 0?s:f)!==null&&a!==void 0?a:0}},hhe=(t,e,r,n)=>{var i=cr(t),a,s;return i==="horizontal"?(a=Cp(t,"xAxis",e,n),s=Sp(t,"xAxis",e,n)):(a=Cp(t,"yAxis",r,n),s=Sp(t,"yAxis",r,n)),uw(a,s)};function LUe(t,e,r,n,i){var a=n.length;if(!(a<1)){var s=pu(t,r,0,!0),o,l=[];if(zn(n[0].barSize)){var u=!1,c=r/a,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(a-1)*s,f>=r&&(f-=(a-1)*s,s=0),f>=r&&c>0&&(u=!0,c*=.9,f=a*c);var h=(r-f)/2>>0,d={offset:h-s,size:0};o=n.reduce((y,w)=>{var b,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:d.offset+d.size+s,size:u?c:(b=w.barSize)!==null&&b!==void 0?b:0}},x=[...y,_];return d=x[x.length-1].position,x},l)}else{var p=pu(e,r,0,!0);r-2*p-(a-1)*s<=0&&(s=0);var m=(r-2*p-(a-1)*s)/a;m>1&&(m>>=0);var v=zn(i)?Math.min(m,i):m;o=n.reduce((y,w,b)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p+(m+s)*b+(m-v)/2,size:v}}],l)}return o}}var BUe=(t,e,r,n,i,a,s)=>{var o=ln(s)?e:s,l=LUe(r,n,i!==a?i:a,t,o);return i!==a&&l!=null&&(l=l.map(u=>xT(xT({},u),{},{position:xT(xT({},u.position),{},{offset:u.position.offset-i/2})}))),l},$Ue=Ae([RUe,rce,qBe,nce,FUe,hhe,NUe],BUe),jUe=(t,e,r,n)=>Cp(t,"xAxis",e,n),VUe=(t,e,r,n)=>Cp(t,"yAxis",r,n),UUe=(t,e,r,n)=>Sp(t,"xAxis",e,n),zUe=(t,e,r,n)=>Sp(t,"yAxis",r,n),qUe=Ae([$Ue,GS],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),HUe=(t,e)=>{var r=Tj(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},WUe=Ae([IUe,GS],HUe),GUe=Ae([Hi,q6,jUe,VUe,UUe,zUe,qUe,cr,FI,hhe,WUe,GS,PUe],(t,e,r,n,i,a,s,o,l,u,c,f,h)=>{var{chartData:d,dataStartIndex:p,dataEndIndex:m}=l;if(!(f==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||u==null)){var{data:v}=f,y;if(v!=null&&v.length>0?y=v:y=d==null?void 0:d.slice(p,m+1),y!=null)return wUe({layout:o,barSettings:f,pos:s,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:c,displayedData:y,offset:t,cells:h,dataStartIndex:p})}}),KUe=t=>{var{chartData:e}=t,r=bn(),n=Ua();return O.useEffect(()=>n?()=>{}:(r(DW(e)),()=>{r(DW(void 0))}),[e,r,n]),null},uG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},dhe=zs({name:"brush",initialState:uG,reducers:{setBrushSettings(t,e){return e.payload==null?uG:e.payload}}}),{setBrushSettings:Wpt}=dhe.actions,XUe=dhe.reducer;function YUe(t,e,r){return(e=QUe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QUe(t){var e=ZUe(t,"string");return typeof e=="symbol"?e:e+""}function ZUe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eV{static create(e){return new eV(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}YUe(eV,"EPS",1e-4);function JUe(t){return(t%180+180)%180}var e8e=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=JUe(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},t8e={dots:[],areas:[],lines:[]},phe=zs({name:"referenceElements",initialState:t8e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=ou(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=ou(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=ou(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Gpt,removeDot:Kpt,addArea:Xpt,removeArea:Ypt,addLine:Qpt,removeLine:Zpt}=phe.actions,r8e=phe.reducer,n8e=O.createContext(void 0),i8e=t=>{var{children:e}=t,[r]=O.useState("".concat(BA("recharts"),"-clip")),n=Zj();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return O.createElement(n8e.Provider,{value:r},O.createElement("defs",null,O.createElement("clipPath",{id:r},O.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function mhe(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function a8e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return e8e(n,r)}function s8e(t,e,r){var n=r==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function nP(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function o8e(t,e){return mhe(t,e+1)}function l8e(t,e,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=e,l=0,u=1,c=s,f=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:mhe(n,u)};var m=l,v,y=()=>(v===void 0&&(v=r(p,m)),v),w=p.coordinate,b=l===0||nP(t,w,y,c,o);b||(l=0,c=s,u+=1),b&&(c=w+t*(y()/2+i),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function cG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cG(Object(r),!0).forEach(function(n){u8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u8e(t,e,r){return(e=c8e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c8e(t){var e=f8e(t,"string");return typeof e=="symbol"?e:e+""}function f8e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h8e(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=e,{end:l}=e,u=function(h){var d=a[h],p,m=()=>(p===void 0&&(p=r(d,h)),p);if(h===s-1){var v=t*(d.coordinate+t*m()/2-l);a[h]=d=Ma(Ma({},d),{},{tickCoord:v>0?d.coordinate-v*t:d.coordinate})}else a[h]=d=Ma(Ma({},d),{},{tickCoord:d.coordinate});if(d.tickCoord!=null){var y=nP(t,d.tickCoord,m,o,l);y&&(l=d.tickCoord-t*(m()/2+i),a[h]=Ma(Ma({},d),{},{isShow:!0}))}},c=s-1;c>=0;c--)u(c);return a}function d8e(t,e,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:u}=e;if(a){var c=n[o-1],f=r(c,o-1),h=t*(c.coordinate+t*f/2-u);if(s[o-1]=c=Ma(Ma({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate}),c.tickCoord!=null){var d=nP(t,c.tickCoord,()=>f,l,u);d&&(u=c.tickCoord-t*(f/2+i),s[o-1]=Ma(Ma({},c),{},{isShow:!0}))}}for(var p=a?o-1:o,m=function(w){var b=s[w],_,x=()=>(_===void 0&&(_=r(b,w)),_);if(w===0){var A=t*(b.coordinate-t*x()/2-l);s[w]=b=Ma(Ma({},b),{},{tickCoord:A<0?b.coordinate-A*t:b.coordinate})}else s[w]=b=Ma(Ma({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var E=nP(t,b.tickCoord,x,l,u);E&&(l=b.tickCoord+t*(x()/2+i),s[w]=Ma(Ma({},b),{},{isShow:!0}))}},v=0;v<p;v++)m(v);return s}function tV(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:u,unit:c,angle:f}=t;if(!i||!i.length||!n)return[];if(at(l)||IS.isSsr){var h;return(h=o8e(i,at(l)?l:0))!==null&&h!==void 0?h:[]}var d=[],p=o==="top"||o==="bottom"?"width":"height",m=c&&p==="width"?Gx(c,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=(b,_)=>{var x=typeof u=="function"?u(b.value,_):b.value;return p==="width"?a8e(Gx(x,{fontSize:e,letterSpacing:r}),m,f):Gx(x,{fontSize:e,letterSpacing:r})[p]},y=i.length>=2?Rs(i[1].coordinate-i[0].coordinate):1,w=s8e(a,y,p);return l==="equidistantPreserveStart"?l8e(y,w,v,i,s):(l==="preserveStart"||l==="preserveStartEnd"?d=d8e(y,w,v,i,s,l==="preserveStartEnd"):d=h8e(y,w,v,i,s),d.filter(b=>b.isShow))}var p8e=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(c=>{if(c){var f=c.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,u=s+l+o+(r?n:0);return Math.round(u)}return 0},m8e=["axisLine","width","height","className","hide","ticks","axisType"];function g8e(t,e){if(t==null)return{};var r,n,i=v8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function v8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cv.apply(null,arguments)}function fG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(r),!0).forEach(function(n){y8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y8e(t,e,r){return(e=b8e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b8e(t){var e=w8e(t,"string");return typeof e=="symbol"?e:e+""}function w8e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jf={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Vi.axis};function x8e(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var u=Xn(Xn(Xn({},l),hu(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var c=+(a==="top"&&!s||a==="bottom"&&s);u=Xn(Xn({},u),{},{x1:e,y1:r+c*i,x2:e+n,y2:r+c*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=Xn(Xn({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+i})}return O.createElement("line",Cv({},u,{className:xr("recharts-cartesian-axis-line",aw(o,"className"))}))}function A8e(t,e,r,n,i,a,s,o,l){var u,c,f,h,d,p,m=o?-1:1,v=t.tickSize||s,y=at(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=c=t.coordinate,h=r+ +!o*i,f=h-m*v,p=f-m*l,d=y;break;case"left":f=h=t.coordinate,c=e+ +!o*n,u=c-m*v,d=u-m*l,p=y;break;case"right":f=h=t.coordinate,c=e+ +o*n,u=c+m*v,d=u+m*l,p=y;break;default:u=c=t.coordinate,h=r+ +o*i,f=h+m*v,p=f+m*l,d=y;break}return{line:{x1:u,y1:f,x2:c,y2:h},tick:{x:d,y:p}}}function _8e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function E8e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function S8e(t){var{option:e,tickProps:r,value:n}=t,i,a=xr(r.className,"recharts-cartesian-axis-tick-value");if(O.isValidElement(e))i=O.cloneElement(e,Xn(Xn({},r),{},{className:a}));else if(typeof e=="function")i=e(Xn(Xn({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=xr(s,e==null?void 0:e.className)),i=O.createElement(Gj,Cv({},r,{className:s}),n)}return i}var C8e=O.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:u,orientation:c,mirror:f,x:h,y:d,width:p,height:m,tickSize:v,tickMargin:y,fontSize:w,letterSpacing:b,getTicksConfig:_,events:x,axisType:A}=t,E=tV(Xn(Xn({},_),{},{ticks:r}),w,b),S=_8e(c,f),C=E8e(c,f),D=hu(_),N=_S(n),P={};typeof i=="object"&&(P=i);var M=Xn(Xn({},D),{},{fill:"none"},P),j=E.map(V=>Xn({entry:V},A8e(V,h,d,p,m,c,v,f,y))),K=j.map(V=>{var{entry:q,line:H}=V;return O.createElement(xl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},i&&O.createElement("line",Cv({},M,H,{className:xr("recharts-cartesian-axis-tick-line",aw(i,"className"))})))}),k=j.map((V,q)=>{var{entry:H,tick:ee}=V,le=Xn(Xn(Xn(Xn({textAnchor:S,verticalAnchor:C},D),{},{stroke:"none",fill:a},N),ee),{},{index:q,payload:H,visibleTicksCount:E.length,tickFormatter:s,padding:l},u);return O.createElement(xl,Cv({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},sI(x,H,q)),n&&O.createElement(S8e,{option:n,tickProps:le,value:"".concat(typeof s=="function"?s(H.value,q):H.value).concat(o||"")}))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},k.length>0&&O.createElement(Dl,{zIndex:Vi.label},O.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:e},k)),K.length>0&&O.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},K))}),T8e=O.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=t,u=g8e(t,m8e),[c,f]=O.useState(""),[h,d]=O.useState(""),p=O.useRef(null);O.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return p8e({ticks:p.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var m=O.useCallback(v=>{if(v){var y=v.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=y;var w=y[0];if(w){var b=window.getComputedStyle(w),_=b.fontSize,x=b.letterSpacing;(_!==c||x!==h)&&(f(_),d(x))}}},[c,h]);return s||n!=null&&n<=0||i!=null&&i<=0?null:O.createElement(Dl,{zIndex:t.zIndex},O.createElement(xl,{className:xr("recharts-cartesian-axis",a)},O.createElement(x8e,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:hu(t)}),O.createElement(C8e,{ref:m,axisType:l,events:u,fontSize:c,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),O.createElement(L6e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},O.createElement(G6e,{label:t.label,labelRef:t.labelRef}),t.children)))}),rV=O.forwardRef((t,e)=>{var r=va(t,jf);return O.createElement(T8e,Cv({},r,{ref:e}))});rV.displayName="CartesianAxis";var D8e=["x1","y1","x2","y2","key"],N8e=["offset"],P8e=["xAxisId","yAxisId"],M8e=["xAxisId","yAxisId"];function hG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hG(Object(r),!0).forEach(function(n){I8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I8e(t,e,r){return(e=O8e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O8e(t){var e=k8e(t,"string");return typeof e=="symbol"?e:e+""}function k8e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Im.apply(null,arguments)}function iP(t,e){if(t==null)return{};var r,n,i=R8e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function R8e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var F8e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=t;return O.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ghe(t){var{option:e,lineItemProps:r}=t,n;if(O.isValidElement(e))n=O.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:u}=r,c=iP(r,D8e),f=(i=hu(c))!==null&&i!==void 0?i:{},{offset:h}=f,d=iP(f,N8e);n=O.createElement("line",Im({},d,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:u}))}return n}function L8e(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=iP(t,P8e),l=i.map((u,c)=>{var f=Ra(Ra({},o),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(c),index:c});return O.createElement(ghe,{key:"line-".concat(c),option:n,lineItemProps:f})});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function B8e(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=iP(t,M8e),l=i.map((u,c)=>{var f=Ra(Ra({},o),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(c),index:c});return O.createElement(ghe,{option:n,lineItemProps:f,key:"line-".concat(c)})});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function $8e(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var d=!u[h+1],p=d?i+s-f:u[h+1]-f;if(p<=0)return null;var m=h%e.length;return O.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:p,width:a,stroke:"none",fill:e[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function j8e(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=t;if(!e||!r||!r.length)return null;var u=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var d=!u[h+1],p=d?i+s-f:u[h+1]-f;if(p<=0)return null;var m=h%r.length;return O.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:o,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var V8e=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return Ple(tV(Ra(Ra(Ra({},jf),r),{},{ticks:Mle(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},U8e=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return Ple(tV(Ra(Ra(Ra({},jf),r),{},{ticks:Mle(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},z8e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Vi.grid};function QB(t){var e=W6(),r=G6(),n=jle(),i=Ra(Ra({},va(t,z8e)),{},{x:at(t.x)?t.x:n.left,y:at(t.y)?t.y:n.top,width:at(t.width)?t.width:n.width,height:at(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:u,height:c,syncWithTicks:f,horizontalValues:h,verticalValues:d}=i,p=Ua(),m=st(C=>vW(C,"xAxis",a,p)),v=st(C=>vW(C,"yAxis",s,p));if(!Ac(u)||!Ac(c)||!at(o)||!at(l))return null;var y=i.verticalCoordinatesGenerator||V8e,w=i.horizontalCoordinatesGenerator||U8e,{horizontalPoints:b,verticalPoints:_}=i;if((!b||!b.length)&&typeof w=="function"){var x=h&&h.length,A=w({yAxis:v?Ra(Ra({},v),{},{ticks:x?h:v.ticks}):void 0,width:e??u,height:r??c,offset:n},x?!0:f);N2(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(b=A)}if((!_||!_.length)&&typeof y=="function"){var E=d&&d.length,S=y({xAxis:m?Ra(Ra({},m),{},{ticks:E?d:m.ticks}):void 0,width:e??u,height:r??c,offset:n},E?!0:f);N2(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(_=S)}return O.createElement(Dl,{zIndex:i.zIndex},O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(F8e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),O.createElement($8e,Im({},i,{horizontalPoints:b})),O.createElement(j8e,Im({},i,{verticalPoints:_})),O.createElement(L8e,Im({},i,{offset:n,horizontalPoints:b,xAxis:m,yAxis:v})),O.createElement(B8e,Im({},i,{offset:n,verticalPoints:_,xAxis:m,yAxis:v}))))}QB.displayName="CartesianGrid";var vhe=(t,e,r,n)=>Cp(t,"xAxis",e,n),yhe=(t,e,r,n)=>Sp(t,"xAxis",e,n),bhe=(t,e,r,n)=>Cp(t,"yAxis",r,n),whe=(t,e,r,n)=>Sp(t,"yAxis",r,n),q8e=Ae([cr,vhe,bhe,yhe,whe],(t,e,r,n,i)=>Vp(t,"xAxis")?uw(e,n,!1):uw(r,i,!1)),H8e=(t,e,r,n,i)=>i;function W8e(t){return t.type==="line"}var G8e=Ae([qI,H8e],(t,e)=>t.filter(W8e).find(r=>r.id===e)),K8e=Ae([cr,vhe,bhe,yhe,whe,G8e,q8e,FI],(t,e,r,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:c}=o;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:f,data:h}=a,d;if(h!=null&&h.length>0?d=h:d=l==null?void 0:l.slice(u,c+1),d!=null)return mze({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:s,displayedData:d})}});function X8e(t){var e=_S(t),r=3,n=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var Y8e=["id"],Q8e=["type","layout","connectNulls","needClip","shape"],Z8e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZA.apply(null,arguments)}function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){J8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J8e(t,e,r){return(e=eze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eze(t){var e=tze(t,"string");return typeof e=="symbol"?e:e+""}function tze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nV(t,e){if(t==null)return{};var r,n,i=rze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function rze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nze=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:yI(r,e),payload:t}]},ize=O.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:u}=t,c={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:yI(s,e),hide:o,type:u,color:n,unit:l}};return O.createElement(ehe,{tooltipEntrySettings:c})}),xhe=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function aze(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var sze=(t,e,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return xhe(e,t);for(var i=Math.floor(t/n),a=t%n,s=e-t,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var c=o.length%2===0?[0,s]:[s];return[...aze(r,i),...o,...c].map(f=>"".concat(f,"px")).join(", ")};function oze(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,l=nV(n,Y8e),u=hu(l);return O.createElement(qje,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:s,clipPathId:e})}function lze(t){var{showLabels:e,children:r,points:n}=t,i=O.useMemo(()=>n==null?void 0:n.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return tc(tc({},l),{},{value:a.value,payload:a.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return O.createElement(jfe,{value:e?i:void 0},r)}function pG(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a}=t,{type:s,layout:o,connectNulls:l,needClip:u,shape:c}=a,f=nV(a,Q8e),h=tc(tc({},fs(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:n,type:s,layout:o,connectNulls:l,strokeDasharray:i??a.strokeDasharray});return O.createElement(O.Fragment,null,(n==null?void 0:n.length)>1&&O.createElement(Yfe,ZA({shapeType:"curve",option:c},h,{pathRef:r})),O.createElement(oze,{points:n,clipPathId:e,props:a}))}function uze(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function cze(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:c,animationEasing:f,animateNewValues:h,width:d,height:p,onAnimationEnd:m,onAnimationStart:v}=r,y=i.current,w=NI(s,"recharts-line-"),b=O.useRef(w),[_,x]=O.useState(!1),A=!_,E=O.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),S=O.useCallback(()=>{typeof v=="function"&&v(),x(!0)},[v]),C=uze(n.current),D=O.useRef(0);b.current!==w&&(D.current=a.current,b.current=w);var N=D.current;return O.createElement(lze,{points:s,showLabels:A},r.children,O.createElement(DI,{animationId:w,begin:u,duration:c,isActive:l,easing:f,onAnimationEnd:E,onAnimationStart:S,key:w},P=>{var M=Nn(N,C+N,P),j=Math.min(M,C),K;if(l)if(o){var k="".concat(o).split(/[,\s]+/gim).map(H=>parseFloat(H));K=sze(j,C,k)}else K=xhe(C,j);else K=o==null?void 0:String(o);if(P>0&&C>0&&(i.current=s,a.current=Math.max(a.current,j)),y){var V=y.length/s.length,q=P===1?s:s.map((H,ee)=>{var le=Math.floor(ee*V);if(y[le]){var re=y[le];return tc(tc({},H),{},{x:Nn(re.x,H.x,P),y:Nn(re.y,H.y,P)})}return h?tc(tc({},H),{},{x:Nn(d*2,H.x,P),y:Nn(p/2,H.y,P)}):tc(tc({},H),{},{x:H.x,y:H.y})});return i.current=q,O.createElement(pG,{props:r,points:q,clipPathId:e,pathRef:n,strokeDasharray:K})}return O.createElement(pG,{props:r,points:s,clipPathId:e,pathRef:n,strokeDasharray:K})}),O.createElement(Ufe,{label:r.label}))}function fze(t){var{clipPathId:e,props:r}=t,n=O.useRef(null),i=O.useRef(0),a=O.useRef(null);return O.createElement(cze,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var hze=(t,e)=>{var r,n;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(n=t.y)!==null&&n!==void 0?n:void 0,value:t.value,errorVal:pi(t.payload,e)}};class dze extends O.Component{render(){var{hide:e,dot:r,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:l,width:u,height:c,id:f,needClip:h,zIndex:d}=this.props;if(e)return null;var p=xr("recharts-line",i),m=f,{r:v,strokeWidth:y}=X8e(r),w=Kfe(r),b=v*2+y,_=h?"url(#clipPath-".concat(w?"":"dots-").concat(m,")"):void 0;return O.createElement(Dl,{zIndex:d},O.createElement(xl,{className:p},h&&O.createElement("defs",null,O.createElement(uhe,{clipPathId:m,xAxisId:a,yAxisId:s}),!w&&O.createElement("clipPath",{id:"clipPath-dots-".concat(m)},O.createElement("rect",{x:l-b/2,y:o-b/2,width:u+b,height:c+b}))),O.createElement(lhe,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:hze,errorBarOffset:0},O.createElement(fze,{props:this.props,clipPathId:m}))),O.createElement(cVe,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:_}))}}var Ahe={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Vi.line,type:"linear"};function pze(t){var e=va(t,Ahe),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,hide:u,isAnimationActive:c,label:f,legendType:h,xAxisId:d,yAxisId:p,id:m}=e,v=nV(e,Z8e),{needClip:y}=Jj(d,p),w=Zj(),b=PS(),_=Ua(),x=st(D=>K8e(D,d,p,_,m));if(b!=="horizontal"&&b!=="vertical"||x==null||w==null)return null;var{height:A,width:E,x:S,y:C}=w;return O.createElement(dze,ZA({},v,{id:m,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:c,hide:u,label:f,legendType:h,xAxisId:d,yAxisId:p,points:x,layout:b,height:A,width:E,left:S,top:C,needClip:y}))}function mze(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=t;return l.map((u,c)=>{var f=pi(u,s);if(e==="horizontal"){var h=zq({axis:r,ticks:i,bandSize:o,entry:u,index:c}),d=ln(f)?null:n.scale(f);return{x:h,y:d,value:f,payload:u}}var p=ln(f)?null:r.scale(f),m=zq({axis:n,ticks:a,bandSize:o,entry:u,index:c});return p==null||m==null?null:{x:p,y:m,value:f,payload:u}}).filter(Boolean)}function gze(t){var e=va(t,Ahe),r=Ua();return O.createElement(nhe,{id:e.id,type:"line"},n=>O.createElement(O.Fragment,null,O.createElement(the,{legendPayload:nze(e)}),O.createElement(ize,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),O.createElement(ahe,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),O.createElement(pze,ZA({},e,{id:n}))))}var _he=O.memo(gze,iO);_he.displayName="Line";var vze=["domain","range"],yze=["domain","range"];function mG(t,e){if(t==null)return{};var r,n,i=bze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gG(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Ehe(t,e){if(t===e)return!0;var{domain:r,range:n}=t,i=mG(t,vze),{domain:a,range:s}=e,o=mG(e,yze);return!gG(r,a)||!gG(n,s)?!1:iO(i,o)}var wze=["dangerouslySetInnerHTML","ticks"],xze=["id"];function ZB(){return ZB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZB.apply(null,arguments)}function vG(t,e){if(t==null)return{};var r,n,i=Aze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Aze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function _ze(t){var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(Xje(t)):r.current!==t&&e(Yje({prev:r.current,next:t})),r.current=t},[t,e]),O.useLayoutEffect(()=>()=>{r.current&&(e(Qje(r.current)),r.current=null)},[e]),null}var Eze=t=>{var{xAxisId:e,className:r}=t,n=st(q6),i=Ua(),a="xAxis",s=st(v=>qw(v,a,e,i)),o=st(v=>Gce(v,a,e,i)),l=st(v=>zce(v,e)),u=st(v=>U4e(v,e)),c=st(v=>hce(v,e));if(l==null||u==null||c==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=t,d=vG(t,wze),{id:p}=c,m=vG(c,xze);return O.createElement(rV,ZB({},d,m,{scale:s,x:u.x,y:u.y,width:l.width,height:l.height,className:xr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},Sze={allowDataOverflow:Di.allowDataOverflow,allowDecimals:Di.allowDecimals,allowDuplicatedCategory:Di.allowDuplicatedCategory,angle:Di.angle,axisLine:jf.axisLine,height:Di.height,hide:!1,includeHidden:Di.includeHidden,interval:Di.interval,minTickGap:Di.minTickGap,mirror:Di.mirror,orientation:Di.orientation,padding:Di.padding,reversed:Di.reversed,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,tickLine:jf.tickLine,tickSize:jf.tickSize,type:Di.type,xAxisId:0},Cze=t=>{var e=va(t,Sze);return O.createElement(O.Fragment,null,O.createElement(_ze,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),O.createElement(Eze,e))},JB=O.memo(Cze,Ehe);JB.displayName="XAxis";var Tze=["dangerouslySetInnerHTML","ticks"],Dze=["id"];function e4(){return e4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e4.apply(null,arguments)}function yG(t,e){if(t==null)return{};var r,n,i=Nze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Nze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Pze(t){var e=bn(),r=O.useRef(null);return O.useLayoutEffect(()=>{r.current===null?e(Zje(t)):r.current!==t&&e(Jje({prev:r.current,next:t})),r.current=t},[t,e]),O.useLayoutEffect(()=>()=>{r.current&&(e(eVe(r.current)),r.current=null)},[e]),null}var Mze=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,a=O.useRef(null),s=O.useRef(null),o=st(q6),l=Ua(),u=bn(),c="yAxis",f=st(x=>qw(x,c,e,l)),h=st(x=>qce(x,e)),d=st(x=>q4e(x,e)),p=st(x=>Gce(x,c,e,l)),m=st(x=>dce(x,e));if(O.useLayoutEffect(()=>{if(!(n!=="auto"||!h||Kj(i)||O.isValidElement(i)||m==null)){var x=a.current;if(x){var A=x.getCalculatedWidth();Math.round(h.width)!==Math.round(A)&&u(tVe({id:e,width:A}))}}},[p,h,u,i,e,n,m]),h==null||d==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=t,w=yG(t,Tze),{id:b}=m,_=yG(m,Dze);return O.createElement(rV,e4({},w,_,{ref:a,labelRef:s,scale:f,x:d.x,y:d.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:xr("recharts-".concat(c," ").concat(c),r),viewBox:o,ticks:p,axisType:c}))},Ize={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:Ni.allowDecimals,allowDuplicatedCategory:Ni.allowDuplicatedCategory,angle:Ni.angle,axisLine:jf.axisLine,hide:!1,includeHidden:Ni.includeHidden,interval:Ni.interval,minTickGap:Ni.minTickGap,mirror:Ni.mirror,orientation:Ni.orientation,padding:Ni.padding,reversed:Ni.reversed,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,tickLine:jf.tickLine,tickSize:jf.tickSize,type:Ni.type,width:Ni.width,yAxisId:0},Oze=t=>{var e=va(t,Ize);return O.createElement(O.Fragment,null,O.createElement(Pze,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),O.createElement(Mze,e))},t4=O.memo(Oze,Ehe);t4.displayName="YAxis";var kze=(t,e)=>e,iV=Ae([kze,cr,cce,bi,ufe,_h,a5e,Hi],h5e),aV=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},She=Al("mouseClick"),Che=DS();Che.startListening({actionCreator:She,effect:(t,e)=>{var r=t.payload,n=iV(e.getState(),aV(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(i$e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var r4=Al("mouseMove"),The=DS(),AT=null;The.startListening({actionCreator:r4,effect:(t,e)=>{var r=t.payload;AT!==null&&cancelAnimationFrame(AT);var n=aV(r);AT=requestAnimationFrame(()=>{var i=e.getState(),a=Lj(i,i.tooltip.settings.shared);if(a==="axis"){var s=iV(i,n);(s==null?void 0:s.activeIndex)!=null?e.dispatch(tfe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(efe())}AT=null})}});var bG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Dhe=zs({name:"rootProps",initialState:bG,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:bG.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Rze=Dhe.reducer,{updateOptions:Fze}=Dhe.actions,Nhe=zs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Jpt}=Nhe.actions,Lze=Nhe.reducer,Phe=Al("keyDown"),Mhe=Al("focus"),sV=DS();sV.startListening({actionCreator:Phe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Bj(i,Ww(r),$S(r),qS(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=_h(r);if(a==="Enter"){var u=Y2(r,"axis","hover",String(i.index));e.dispatch(qB({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var c=K4e(r),f=c==="left-to-right"?1:-1,h=a==="ArrowRight"?1:-1,d=o+h*f;if(!(l==null||d>=l.length||d<0)){var p=Y2(r,"axis","hover",String(d));e.dispatch(qB({active:!0,activeIndex:d.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}}});sV.startListening({actionCreator:Mhe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=Y2(r,"axis","hover",String(a));e.dispatch(qB({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Uo=Al("externalEvent"),Ihe=DS(),ER=new Map;Ihe.startListening({actionCreator:Uo,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var i=n.type,a=ER.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:z$e(o),activeDataKey:dfe(o),activeIndex:Sv(o),activeLabel:hfe(o),activeTooltipIndex:Sv(o),isTooltipActive:q$e(o)};r(l,n)}finally{ER.delete(i)}});ER.set(i,s)}}});var Bze=Ae([Hw],t=>t.tooltipItemPayloads),$ze=Ae([Bze,US,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,r);return s}}}),Ohe=Al("touchMove"),khe=DS();khe.startListening({actionCreator:Ohe,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),i=Lj(n,n.tooltip.settings.shared);if(i==="axis"){var a=iV(n,aV({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(tfe({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Lke),c=(s=l.getAttribute(Bke))!==null&&s!==void 0?s:void 0,f=$ze(e.getState(),u,c);e.dispatch(Jce({activeDataKey:c,activeIndex:u,activeCoordinate:f}))}}}});var jze=tle({brush:XUe,cartesianAxis:rVe,chartData:U5e,errorBars:AVe,graphicalItems:kje,layout:yke,legend:TRe,options:L5e,polarAxis:nje,polarOptions:Lze,referenceElements:r8e,rootProps:Rze,tooltip:a$e,zIndex:C5e}),Vze=function(e){return zOe({reducer:jze,preloadedState:e,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([Che.middleware,The.middleware,sV.middleware,Ihe.middleware,khe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(gle({type:"raf"}))},devTools:IS.devToolsEnabled})};function Uze(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=Ua(),a=O.useRef(null);if(i)return r;a.current==null&&(a.current=Vze(e));var s=O6;return O.createElement(YVe,{context:s,store:a.current},r)}function zze(t){var{layout:e,margin:r}=t,n=bn(),i=Ua();return O.useEffect(()=>{i||(n(mke(e)),n(pke(r)))},[n,i,e,r]),null}var qze=O.memo(zze,iO);function Hze(t){var e=bn();return O.useEffect(()=>{e(Fze(t))},[e,t]),null}function wG(t){var{zIndex:e,isPanorama:r}=t,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=rhe("".concat(n).concat(e)),a=bn();return O.useLayoutEffect(()=>(a(E5e({zIndex:e,elementId:i,isPanorama:r})),()=>{a(S5e({zIndex:e,isPanorama:r}))}),[a,e,i,r]),O.createElement("g",{tabIndex:-1,id:i})}function xG(t){var{children:e,isPanorama:r}=t,n=st(p5e);if(!n||n.length===0)return e;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return O.createElement(O.Fragment,null,i.map(s=>O.createElement(wG,{key:s,zIndex:s,isPanorama:r})),e,a.map(s=>O.createElement(wG,{key:s,zIndex:s,isPanorama:r})))}var Wze=["children"];function Gze(t,e){if(t==null)return{};var r,n,i=Kze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Kze(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aP.apply(null,arguments)}var Xze={width:"100%",height:"100%",display:"block"},Yze=O.forwardRef((t,e)=>{var r=W6(),n=G6(),i=Kle();if(!Ac(r)||!Ac(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=t,u,c;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?c=s.role:c=i?"application":void 0),O.createElement(v6,aP({},s,{title:o,desc:l,role:c,tabIndex:u,width:r,height:n,style:Xze,ref:e}),a)}),Qze=t=>{var{children:e}=t,r=st(AI);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return O.createElement(v6,{width:n,height:i,x:s,y:a},e)},AG=O.forwardRef((t,e)=>{var{children:r}=t,n=Gze(t,Wze),i=Ua();return i?O.createElement(Qze,null,O.createElement(xG,{isPanorama:!0},r)):O.createElement(Yze,aP({ref:e},n),O.createElement(xG,{isPanorama:!1},r))});function Zze(){var t=bn(),[e,r]=O.useState(null),n=st(Fke);return O.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;zn(a)&&a!==n&&t(vke(a))}},[e,t,n]),r}function _G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jze(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(r),!0).forEach(function(n){e9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e9e(t,e,r){return(e=t9e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t9e(t){var e=r9e(t,"string");return typeof e=="symbol"?e:e+""}function r9e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tv.apply(null,arguments)}var n9e=()=>(Q5e(),null);function sP(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var i9e=O.forwardRef((t,e)=>{var r,n,i=O.useRef(null),[a,s]=O.useState({containerWidth:sP((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:sP((n=t.style)===null||n===void 0?void 0:n.height)}),o=O.useCallback((u,c)=>{s(f=>{var h=Math.round(u),d=Math.round(c);return f.containerWidth===h&&f.containerHeight===d?f:{containerWidth:h,containerHeight:d}})},[]),l=O.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:c,height:f}=u.getBoundingClientRect();o(c,f);var h=p=>{var{width:m,height:v}=p[0].contentRect;o(m,v)},d=new ResizeObserver(h);d.observe(u),i.current=d}},[e,o]);return O.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),O.createElement(O.Fragment,null,O.createElement(EI,{width:a.containerWidth,height:a.containerHeight}),O.createElement("div",Tv({ref:l},t)))}),a9e=O.forwardRef((t,e)=>{var{width:r,height:n}=t,[i,a]=O.useState({containerWidth:sP(r),containerHeight:sP(n)}),s=O.useCallback((l,u)=>{a(c=>{var f=Math.round(l),h=Math.round(u);return c.containerWidth===f&&c.containerHeight===h?c:{containerWidth:f,containerHeight:h}})},[]),o=O.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:u,height:c}=l.getBoundingClientRect();s(u,c)}},[e,s]);return O.createElement(O.Fragment,null,O.createElement(EI,{width:i.containerWidth,height:i.containerHeight}),O.createElement("div",Tv({ref:o},t)))}),s9e=O.forwardRef((t,e)=>{var{width:r,height:n}=t;return O.createElement(O.Fragment,null,O.createElement(EI,{width:r,height:n}),O.createElement("div",Tv({ref:e},t)))}),o9e=O.forwardRef((t,e)=>{var{width:r,height:n}=t;return ih(r)||ih(n)?O.createElement(a9e,Tv({},t,{ref:e})):O.createElement(s9e,Tv({},t,{ref:e}))});function l9e(t){return t===!0?i9e:o9e}var u9e=O.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:c,onMouseMove:f,onMouseUp:h,onTouchEnd:d,onTouchMove:p,onTouchStart:m,style:v,width:y,responsive:w,dispatchTouchEvents:b=!0}=t,_=O.useRef(null),x=bn(),[A,E]=O.useState(null),[S,C]=O.useState(null),D=Zze(),N=H6(),P=(N==null?void 0:N.width)>0?N.width:y,M=(N==null?void 0:N.height)>0?N.height:i,j=O.useCallback(z=>{D(z),typeof e=="function"&&e(z),E(z),C(z),z!=null&&(_.current=z)},[D,e,E,C]),K=O.useCallback(z=>{x(She(z)),x(Uo({handler:a,reactEvent:z}))},[x,a]),k=O.useCallback(z=>{x(r4(z)),x(Uo({handler:u,reactEvent:z}))},[x,u]),V=O.useCallback(z=>{x(efe()),x(Uo({handler:c,reactEvent:z}))},[x,c]),q=O.useCallback(z=>{x(r4(z)),x(Uo({handler:f,reactEvent:z}))},[x,f]),H=O.useCallback(()=>{x(Mhe())},[x]),ee=O.useCallback(z=>{x(Phe(z.key))},[x]),le=O.useCallback(z=>{x(Uo({handler:s,reactEvent:z}))},[x,s]),re=O.useCallback(z=>{x(Uo({handler:o,reactEvent:z}))},[x,o]),L=O.useCallback(z=>{x(Uo({handler:l,reactEvent:z}))},[x,l]),ie=O.useCallback(z=>{x(Uo({handler:h,reactEvent:z}))},[x,h]),X=O.useCallback(z=>{x(Uo({handler:m,reactEvent:z}))},[x,m]),pe=O.useCallback(z=>{b&&x(Ohe(z)),x(Uo({handler:p,reactEvent:z}))},[x,b,p]),de=O.useCallback(z=>{x(Uo({handler:d,reactEvent:z}))},[x,d]),ae=l9e(w);return O.createElement(wfe.Provider,{value:A},O.createElement(toe.Provider,{value:S},O.createElement(ae,{width:P??(v==null?void 0:v.width),height:M??(v==null?void 0:v.height),className:xr("recharts-wrapper",n),style:Jze({position:"relative",cursor:"default",width:P,height:M},v),onClick:K,onContextMenu:le,onDoubleClick:re,onFocus:H,onKeyDown:ee,onMouseDown:L,onMouseEnter:k,onMouseLeave:V,onMouseMove:q,onMouseUp:ie,onTouchEnd:de,onTouchMove:pe,onTouchStart:X,ref:j},O.createElement(n9e,null),r)))}),c9e=["width","height","responsive","children","className","style","compact","title","desc"];function f9e(t,e){if(t==null)return{};var r,n,i=h9e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function h9e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var d9e=O.forwardRef((t,e)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:u,desc:c}=t,f=f9e(t,c9e),h=hu(f);return l?O.createElement(O.Fragment,null,O.createElement(EI,{width:r,height:n}),O.createElement(AG,{otherAttributes:h,title:u,desc:c},a)):O.createElement(u9e,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},O.createElement(AG,{otherAttributes:h,title:u,desc:c,ref:e},O.createElement(i8e,null,a)))});function n4(){return n4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n4.apply(null,arguments)}var p9e={top:5,right:5,bottom:5,left:5},m9e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:p9e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Rhe=O.forwardRef(function(e,r){var n,i=va(e.categoricalChartProps,m9e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:u}=e,c={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return O.createElement(Uze,{preloadedState:{options:c},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:a},O.createElement(KUe,{chartData:u.data}),O.createElement(qze,{layout:i.layout,margin:i.margin}),O.createElement(Hze,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),O.createElement(d9e,n4({},i,{ref:r})))}),g9e=["axis"],v9e=O.forwardRef((t,e)=>O.createElement(Rhe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:g9e,tooltipPayloadSearcher:Afe,categoricalChartProps:t,ref:e})),y9e=["axis","item"],b9e=O.forwardRef((t,e)=>O.createElement(Rhe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:y9e,tooltipPayloadSearcher:Afe,categoricalChartProps:t,ref:e}));function w9e(){const{isDark:t}=Cl(),[e,r]=O.useState(.3),[n,i]=O.useState(.7),[a,s]=O.useState(.7),[o,l]=O.useState(-1),[u,c]=O.useState(null),[f,h]=O.useState([]),d=a*100,p=299792,m=3086e19,v=A=>{const E=Math.max(0,1-e-n),S=e*Math.pow(1+A,3),C=n*Math.pow(1+A,3*(1+o)),D=E*Math.pow(1+A,2);return d*Math.sqrt(S+C+D)},y=()=>{let E=0;for(let C=0;C<1e3;C+=.01)E+=.01/(v(C)*(1+C));return E*m/(1e9*365.25*24*3600*p)/1e9},w=()=>{const A=[];for(let E=0;E<=10;E+=.2)A.push({z:parseFloat(E.toFixed(1)),H_z:parseFloat(v(E).toFixed(2)),a:parseFloat((1/(1+E)).toFixed(3))});return A},b=()=>{const A=Math.max(0,1-e-n);return{matter:parseFloat((e*100).toFixed(2)),dark_energy:parseFloat((n*100).toFixed(2)),radiation:parseFloat(((1-e-n)*100).toFixed(2)),total:parseFloat((e+n+A).toFixed(3))}},_=()=>{const A=y(),E=w(),S=b();c({age:A,H0:parseFloat(d.toFixed(2)),density:S,omega_k:Math.max(0,1-e-n)}),h(E)},x=t?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900";return I.jsxs("div",{className:"space-y-8",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"   ,  ,    ."})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[I.jsxs(We.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${x}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-6",children:" "}),I.jsxs("div",{className:"space-y-5",children:[I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["   (_m) = ",e.toFixed(2)]}),I.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:e,onChange:A=>r(parseFloat(A.target.value)),className:"w-full"}),I.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"  +  "})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["   (_) = ",n.toFixed(2)]}),I.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:n,onChange:A=>i(parseFloat(A.target.value)),className:"w-full"}),I.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"    "})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["  (h) = ",a.toFixed(2),"  H = ",d.toFixed(1)," km/s/Mpc"]}),I.jsx("input",{type:"range",min:"0.5",max:"0.9",step:"0.01",value:a,onChange:A=>s(parseFloat(A.target.value)),className:"w-full"}),I.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"  "})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["  (w) = ",o.toFixed(2)]}),I.jsx("input",{type:"range",min:"-2",max:"-0.3",step:"0.1",value:o,onChange:A=>l(parseFloat(A.target.value)),className:"w-full"}),I.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"w = -1 (), w < -1 (phantom)"})]}),I.jsx("button",{onClick:_,className:"w-full py-3 px-4 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white font-bold rounded-xl mt-6",children:"  "})]}),I.jsxs("div",{className:`mt-8 p-4 rounded-2xl border ${t?"bg-gray-800/50 border-gray-700":"bg-blue-50 border-blue-200"}`,children:[I.jsx("p",{className:`text-xs font-semibold mb-3 ${t?"text-gray-300":"text-gray-600"}`,children:"CDM  "}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("button",{onClick:()=>{r(.3),i(.7),s(.7),l(-1)},className:`w-full py-2 px-3 rounded-lg text-sm font-medium ${t?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-100"}`,children:"CDM "}),I.jsx("button",{onClick:()=>{r(.1),i(.9),s(.68),l(-1)},className:`w-full py-2 px-3 rounded-lg text-sm font-medium ${t?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-100"}`,children:"  "}),I.jsx("button",{onClick:()=>{r(.5),i(.5),s(.7),l(-1)},className:`w-full py-2 px-3 rounded-lg text-sm font-medium ${t?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-100"}`,children:"  (5050)"})]})]})]}),I.jsxs(We.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${x}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-6",children:" "}),u?I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"bg-gray-800/30 border-gray-700":"bg-indigo-50 border-indigo-200"}`,children:[I.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-indigo-300":"text-indigo-600"}`,children:" "}),I.jsxs("p",{className:"text-2xl font-bold mt-2",children:[u.age.toFixed(2)," Gyr"]})]}),I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"bg-gray-800/30 border-gray-700":"bg-blue-50 border-blue-200"}`,children:[I.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-blue-300":"text-blue-600"}`,children:" "}),I.jsxs("p",{className:"text-2xl font-bold mt-2",children:["H = ",u.H0," km/s/Mpc"]})]})]}),I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"bg-gray-800/30 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[I.jsx("p",{className:"font-semibold mb-3",children:" "}),I.jsxs("div",{className:"space-y-2 text-sm",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" (_m)"}),I.jsxs("span",{className:"font-mono font-bold",children:[u.density.matter,"%"]})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" (_)"}),I.jsxs("span",{className:"font-mono font-bold",children:[u.density.dark_energy,"%"]})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" (_k)"}),I.jsxs("span",{className:"font-mono font-bold",children:[u.density.radiation.toFixed(2),"%"]})]}),I.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-2 flex justify-between font-semibold",children:[I.jsx("span",{children:""}),I.jsx("span",{className:"font-mono",children:u.density.total})]})]})]}),I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"bg-gray-800/30 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[I.jsx("p",{className:"font-semibold mb-3",children:"  "}),I.jsxs("div",{className:"space-y-2 text-sm",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  (a)"}),I.jsx("span",{className:"font-mono font-bold",children:"1.0"})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" (z)"}),I.jsx("span",{className:"font-mono font-bold",children:"0.0"})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  (w)"}),I.jsx("span",{className:"font-mono font-bold",children:o})]})]})]})]}):I.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[I.jsx("p",{children:"   "}),I.jsx("p",{children:"    "})]})]})]}),f.length>0&&I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${x}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-6",children:"   H(z)"}),I.jsx(Qq,{width:"100%",height:300,children:I.jsxs(v9e,{data:f,children:[I.jsx(QB,{strokeDasharray:"3 3",stroke:t?"#444":"#ddd"}),I.jsx(JB,{dataKey:"z",label:{value:" (z)",position:"insideBottomRight",offset:-5},stroke:t?"#666":"#999"}),I.jsx(t4,{label:{value:"H(z) [km/s/Mpc]",angle:-90,position:"insideLeft"},stroke:t?"#666":"#999"}),I.jsx(OW,{contentStyle:{backgroundColor:t?"#1f2937":"#fff",border:`1px solid ${t?"#444":"#ddd"}`,color:t?"#fff":"#000"}}),I.jsx(SB,{}),I.jsx(_he,{type:"monotone",dataKey:"H_z",stroke:"#3b82f6",name:"H(z)",dot:!1,strokeWidth:2})]})}),I.jsx("p",{className:`text-xs mt-4 ${t?"text-gray-400":"text-gray-500"}`,children:"    :    "})]}),f.length>0&&I.jsxs(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-3xl border shadow-sm ${x}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-6",children:"   a(z)"}),I.jsx(Qq,{width:"100%",height:300,children:I.jsxs(b9e,{data:f,children:[I.jsx(QB,{strokeDasharray:"3 3",stroke:t?"#444":"#ddd"}),I.jsx(JB,{dataKey:"z",label:{value:" (z)",position:"insideBottomRight",offset:-5},stroke:t?"#666":"#999"}),I.jsx(t4,{label:{value:"  a(z)",angle:-90,position:"insideLeft"},stroke:t?"#666":"#999"}),I.jsx(OW,{contentStyle:{backgroundColor:t?"#1f2937":"#fff",border:`1px solid ${t?"#444":"#ddd"}`,color:t?"#fff":"#000"}}),I.jsx(SB,{}),I.jsx(fhe,{dataKey:"a",fill:"#8b5cf6",name:"a(z) = 1/(1+z)"})]})}),I.jsx("p",{className:`text-xs mt-4 ${t?"text-gray-400":"text-gray-500"}`,children:"    : a=1 , a<1     "})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:`p-6 rounded-3xl border shadow-sm ${x}`,children:[I.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),I.jsxs("div",{className:`space-y-3 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:[I.jsxs("p",{children:[I.jsx("strong",{children:"_m (  )"}),":      ( ) "]}),I.jsxs("p",{children:[I.jsx("strong",{children:"_ ( )"}),":       ( )"]}),I.jsxs("p",{children:[I.jsx("strong",{children:"h ( )"}),":       . H = 100h km/s/Mpc"]}),I.jsxs("p",{children:[I.jsx("strong",{children:"w ( )"}),": w = -1 , w < -1 phantom  (  )"]}),I.jsxs("p",{children:[I.jsx("strong",{children:"  H(z)"}),":  z   .    "]})]})]})]})}function jn(){return jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jn.apply(null,arguments)}var Fhe={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function ss(t,e){if(oP(t,e))return t[e];throw typeof t[e]=="function"&&oV(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function mw(t,e,r){if(oP(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function oP(t,e){return!A9e(t)&&!Array.isArray(t)?!1:Je(_9e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function x9e(t,e){if(!oV(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function oV(t,e){return t==null||typeof t[e]!="function"||Je(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Je(E9e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function A9e(t){return typeof t=="object"&&t&&t.constructor===Object}var _9e={length:!0,name:!0},E9e={toString:!0,valueOf:!0,toLocaleString:!0};class aO{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return ss(this.wrappedObject,e)}set(e,r){return mw(this.wrappedObject,e,r),this}has(e){return oP(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return Bhe(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){oP(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class Lhe{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return Bhe(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function Bhe(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function JA(){return new Map}function m0(t){if(!t)return JA();if(Vhe(t))return t;if(oO(t))return new aO(t);throw new Error("createMap can create maps from objects or Maps")}function S9e(t){if(t instanceof aO)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);mw(e,r,n)}return e}function lt(t){return typeof t=="number"}function St(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Kx(t){return typeof t=="bigint"}function Vf(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function KS(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function go(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Pn(t){return typeof t=="string"}var vr=Array.isArray;function ft(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Do(t){return Array.isArray(t)||ft(t)}function lP(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Om(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function lV(t){return t&&t.constructor.prototype.isRange===!0||!1}function sO(t){return t&&t.constructor.prototype.isIndex===!0||!1}function C9e(t){return typeof t=="boolean"}function T9e(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function $he(t){return t&&t.constructor.prototype.isHelp===!0||!1}function jhe(t){return typeof t=="function"}function D9e(t){return t instanceof Date}function N9e(t){return t instanceof RegExp}function oO(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Vf(t)&&!KS(t))}function Vhe(t){return t?t instanceof Map||t instanceof aO||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function P9e(t){return t===null}function M9e(t){return t===void 0}function fh(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function il(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function I9e(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function O9e(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function k9e(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function qt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function i4(t){return qt(t)||Bn(t)&&t.args.length===1&&qt(t.args[0])&&"-+~".includes(t.op)}function XS(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tp(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function fr(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function lO(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bn(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function hh(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function R9e(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function F9e(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ui(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Uhe(t){return t&&t.constructor.prototype.isChain===!0||!1}function br(t){var e=typeof t;return e==="object"?t===null?"null":St(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function wt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return wt(r)});if(t instanceof Date)return new Date(t.valueOf());if(St(t))return t;if(oO(t))return L9e(t,wt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function L9e(t,e){var r={};for(var n in t)Je(t,n)&&(r[n]=e(t[n]));return r}function zhe(t,e){for(var r in e)Je(e,r)&&(t[r]=e[r]);return t}function dh(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!dh(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!dh(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function B9e(t,e,r){var n=!0,i;Object.defineProperty(t,e,{get:function(){return n&&(i=r(),n=!1),i},set:function(s){i=s,n=!1},configurable:!0,enumerable:!0})}function Je(t,e){return t&&Object.hasOwnProperty.call(t,e)}function $9e(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var j9e=["Matrix","Array"],V9e=["number","BigNumber","bigint","Fraction"],Ee=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Fhe)};jn(Ee,Fhe,{MATRIX_OPTIONS:j9e,NUMBER_OPTIONS:V9e});function EG(){return!0}function jo(){return!1}function sy(){}const SG="Argument is not a typed-function.";function qhe(){function t(G){return typeof G=="object"&&G!==null&&G.constructor===Object}const e=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],r={name:"any",test:EG,isAny:!0};let n,i,a=0,s={createCount:0};function o(G){const Z=n.get(G);if(Z)return Z;let oe='Unknown type "'+G+'"';const he=G.toLowerCase();let ve;for(ve of i)if(ve.toLowerCase()===he){oe+='. Did you mean "'+ve+'" ?';break}throw new TypeError(oe)}function l(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const oe=Z?o(Z).index:i.length,he=[];for(let ge=0;ge<G.length;++ge){if(!G[ge]||typeof G[ge].name!="string"||typeof G[ge].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Pe=G[ge].name;if(n.has(Pe))throw new TypeError('Duplicate type name "'+Pe+'"');he.push(Pe),n.set(Pe,{name:Pe,test:G[ge].test,isAny:G[ge].isAny,index:oe+ge,conversionsTo:[]})}const ve=i.slice(oe);i=i.slice(0,oe).concat(he).concat(ve);for(let ge=oe+he.length;ge<i.length;++ge)n.get(i[ge]).index=ge}function u(){n=new Map,i=[],a=0,l([r],!1)}u(),l(e);function c(){let G;for(G of i)n.get(G).conversionsTo=[];a=0}function f(G){const Z=i.filter(oe=>{const he=n.get(oe);return!he.isAny&&he.test(G)});return Z.length?Z:["any"]}function h(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function d(G,Z,oe){if(!h(G))throw new TypeError(SG);const he=oe&&oe.exact,ve=Array.isArray(Z)?Z.join(","):Z,ge=_(ve),Pe=v(ge);if(!he||Pe in G.signatures){const rt=G._typedFunctionData.signatureMap.get(Pe);if(rt)return rt}const Se=ge.length;let $e;if(he){$e=[];let rt;for(rt in G.signatures)$e.push(G._typedFunctionData.signatureMap.get(rt))}else $e=G._typedFunctionData.signatures;for(let rt=0;rt<Se;++rt){const Mt=ge[rt],Wt=[];let ht;for(ht of $e){const Er=S(ht.params,rt);if(!(!Er||Mt.restParam&&!Er.restParam)){if(!Er.hasAny){const B=b(Er);if(Mt.types.some(ue=>!B.has(ue.name)))continue}Wt.push(ht)}}if($e=Wt,$e.length===0)break}let Ce;for(Ce of $e)if(Ce.params.length<=Se)return Ce;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+v(ge,", ")+"))")}function p(G,Z,oe){return d(G,Z,oe).implementation}function m(G,Z){const oe=o(Z);if(oe.test(G))return G;const he=oe.conversionsTo;if(he.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(let ve=0;ve<he.length;ve++)if(o(he[ve].from).test(G))return he[ve].convert(G);throw new Error("Cannot convert "+G+" to "+Z)}function v(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(oe=>oe.name).join(Z)}function y(G){const Z=G.indexOf("...")===0,he=(Z?G.length>3?G.slice(3):"any":G).split("|").map(Se=>o(Se.trim()));let ve=!1,ge=Z?"...":"";return{types:he.map(function(Se){return ve=Se.isAny||ve,ge+=Se.name+"|",{name:Se.name,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:null,conversionIndex:-1}}),name:ge.slice(0,-1),hasAny:ve,hasConversion:!1,restParam:Z}}function w(G){const Z=G.types.map(Pe=>Pe.name),oe=V(Z);let he=G.hasAny,ve=G.name;const ge=oe.map(function(Pe){const Se=o(Pe.from);return he=Se.isAny||he,ve+="|"+Pe.from,{name:Pe.from,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:Pe,conversionIndex:Pe.index}});return{types:G.types.concat(ge),name:ve,hasAny:he,hasConversion:ge.length>0,restParam:G.restParam}}function b(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(Z=>G.typeSet.add(Z.name))),G.typeSet}function _(G){const Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");const oe=G.trim();if(oe==="")return Z;const he=oe.split(",");for(let ve=0;ve<he.length;++ve){const ge=y(he[ve].trim());if(ge.restParam&&ve!==he.length-1)throw new SyntaxError('Unexpected rest parameter "'+he[ve]+'": only allowed for the last parameter');if(ge.types.length===0)return null;Z.push(ge)}return Z}function x(G){const Z=z(G);return Z?Z.restParam:!1}function A(G){if(!G||G.types.length===0)return EG;if(G.types.length===1)return o(G.types[0].name).test;if(G.types.length===2){const Z=o(G.types[0].name).test,oe=o(G.types[1].name).test;return function(ve){return Z(ve)||oe(ve)}}else{const Z=G.types.map(function(oe){return o(oe.name).test});return function(he){for(let ve=0;ve<Z.length;ve++)if(Z[ve](he))return!0;return!1}}}function E(G){let Z,oe,he;if(x(G)){Z=ae(G).map(A);const ve=Z.length,ge=A(z(G)),Pe=function(Se){for(let $e=ve;$e<Se.length;$e++)if(!ge(Se[$e]))return!1;return!0};return function($e){for(let Ce=0;Ce<Z.length;Ce++)if(!Z[Ce]($e[Ce]))return!1;return Pe($e)&&$e.length>=ve+1}}else return G.length===0?function(ge){return ge.length===0}:G.length===1?(oe=A(G[0]),function(ge){return oe(ge[0])&&ge.length===1}):G.length===2?(oe=A(G[0]),he=A(G[1]),function(ge){return oe(ge[0])&&he(ge[1])&&ge.length===2}):(Z=G.map(A),function(ge){for(let Pe=0;Pe<Z.length;Pe++)if(!Z[Pe](ge[Pe]))return!1;return ge.length===Z.length})}function S(G,Z){return Z<G.length?G[Z]:x(G)?z(G):null}function C(G,Z){const oe=S(G,Z);return oe?b(oe):new Set}function D(G){return G.conversion===null||G.conversion===void 0}function N(G,Z){const oe=new Set;return G.forEach(he=>{const ve=C(he.params,Z);let ge;for(ge of ve)oe.add(ge)}),oe.has("any")?["any"]:Array.from(oe)}function P(G,Z,oe){let he,ve;const ge=G||"unnamed";let Pe=oe,Se;for(Se=0;Se<Z.length;Se++){const Mt=[];if(Pe.forEach(Wt=>{const ht=S(Wt.params,Se),Er=A(ht);(Se<Wt.params.length||x(Wt.params))&&Er(Z[Se])&&Mt.push(Wt)}),Mt.length===0){if(ve=N(Pe,Se),ve.length>0){const Wt=f(Z[Se]);return he=new TypeError("Unexpected type of argument in function "+ge+" (expected: "+ve.join(" or ")+", actual: "+Wt.join(" | ")+", index: "+Se+")"),he.data={category:"wrongType",fn:ge,index:Se,actual:Wt,expected:ve},he}}else Pe=Mt}const $e=Pe.map(function(Mt){return x(Mt.params)?1/0:Mt.params.length});if(Z.length<Math.min.apply(null,$e))return ve=N(Pe,Se),he=new TypeError("Too few arguments in function "+ge+" (expected: "+ve.join(" or ")+", index: "+Z.length+")"),he.data={category:"tooFewArgs",fn:ge,index:Z.length,expected:ve},he;const Ce=Math.max.apply(null,$e);if(Z.length>Ce)return he=new TypeError("Too many arguments in function "+ge+" (expected: "+Ce+", actual: "+Z.length+")"),he.data={category:"tooManyArgs",fn:ge,index:Z.length,expectedLength:Ce},he;const rt=[];for(let Mt=0;Mt<Z.length;++Mt)rt.push(f(Z[Mt]).join("|"));return he=new TypeError('Arguments of type "'+rt.join(", ")+'" do not match any of the defined signatures of function '+ge+"."),he.data={category:"mismatch",actual:rt},he}function M(G){let Z=i.length+1;for(let oe=0;oe<G.types.length;oe++)Z=Math.min(Z,G.types[oe].typeIndex);return Z}function j(G){let Z=a+1;for(let oe=0;oe<G.types.length;oe++)D(G.types[oe])||(Z=Math.min(Z,G.types[oe].conversionIndex));return Z}function K(G,Z){if(G.hasAny){if(!Z.hasAny)return .1}else if(Z.hasAny)return-.1;if(G.restParam){if(!Z.restParam)return .01}else if(Z.restParam)return-.01;const oe=M(G)-M(Z);if(oe<0)return-.001;if(oe>0)return .001;const he=j(G),ve=j(Z);if(G.hasConversion){if(!Z.hasConversion)return(1+he)*1e-6}else if(Z.hasConversion)return-(1+ve)*1e-6;const ge=he-ve;return ge<0?-1e-7:ge>0?1e-7:0}function k(G,Z){const oe=G.params,he=Z.params,ve=z(oe),ge=z(he),Pe=x(oe),Se=x(he);if(Pe&&ve.hasAny){if(!Se||!ge.hasAny)return 1e7}else if(Se&&ge.hasAny)return-1e7;let $e=0,Ce=0,rt;for(rt of oe)rt.hasAny&&++$e,rt.hasConversion&&++Ce;let Mt=0,Wt=0;for(rt of he)rt.hasAny&&++Mt,rt.hasConversion&&++Wt;if($e!==Mt)return($e-Mt)*1e6;if(Pe&&ve.hasConversion){if(!Se||!ge.hasConversion)return 1e5}else if(Se&&ge.hasConversion)return-1e5;if(Ce!==Wt)return(Ce-Wt)*1e4;if(Pe){if(!Se)return 1e3}else if(Se)return-1e3;const ht=(oe.length-he.length)*(Pe?-100:100);if(ht!==0)return ht;const Er=[];let B=0;for(let qe=0;qe<oe.length;++qe){const dt=K(oe[qe],he[qe]);Er.push(dt),B+=dt}if(B!==0)return(B<0?-10:10)+B;let ue,we=9;const Ie=we/(Er.length+1);for(ue of Er){if(ue!==0)return(ue<0?-we:we)+ue;we-=Ie}return 0}function V(G){if(G.length===0)return[];const Z=G.map(o);if(G.length===1)return Z[0].conversionsTo;const oe=new Set(G),he=new Set;for(let ge=0;ge<Z.length;++ge)for(const Pe of Z[ge].conversionsTo)oe.has(Pe.from)||he.add(Pe.from);const ve=[];for(const ge of he){let Pe=a+1,Se=null;for(let $e=0;$e<Z.length;++$e)for(const Ce of Z[$e].conversionsTo)Ce.from===ge&&Ce.index<Pe&&(Pe=Ce.index,Se=Ce);ve.push(Se)}return ve}function q(G,Z){let oe=Z,he="";if(G.some(ge=>ge.hasConversion)){const ge=x(G),Pe=G.map(H);he=Pe.map(Se=>Se.name).join(";"),oe=function(){const $e=[],Ce=ge?arguments.length-1:arguments.length;for(let rt=0;rt<Ce;rt++)$e[rt]=Pe[rt](arguments[rt]);return ge&&($e[Ce]=arguments[Ce].map(Pe[Ce])),Z.apply(this,$e)}}let ve=oe;if(x(G)){const ge=G.length-1;ve=function(){return oe.apply(this,ne(arguments,0,ge).concat([ne(arguments,ge)]))}}return he&&Object.defineProperty(ve,"name",{value:he}),ve}function H(G){let Z,oe,he,ve;const ge=[],Pe=[];let Se="";G.types.forEach(function(Ce){Ce.conversion&&(Se+=Ce.conversion.from+"~>"+Ce.conversion.to+",",ge.push(o(Ce.conversion.from).test),Pe.push(Ce.conversion.convert))}),Se?Se=Se.slice(0,-1):Se="pass";let $e=Ce=>Ce;switch(Pe.length){case 0:break;case 1:Z=ge[0],he=Pe[0],$e=function(rt){return Z(rt)?he(rt):rt};break;case 2:Z=ge[0],oe=ge[1],he=Pe[0],ve=Pe[1],$e=function(rt){return Z(rt)?he(rt):oe(rt)?ve(rt):rt};break;default:$e=function(rt){for(let Mt=0;Mt<Pe.length;Mt++)if(ge[Mt](rt))return Pe[Mt](rt);return rt}}return Object.defineProperty($e,"name",{value:Se}),$e}function ee(G){function Z(oe,he,ve){if(he<oe.length){const ge=oe[he];let Pe=[];if(ge.restParam){const Se=ge.types.filter(D);Se.length<ge.types.length&&Pe.push({types:Se,name:"..."+Se.map($e=>$e.name).join("|"),hasAny:Se.some($e=>$e.isAny),hasConversion:!1,restParam:!0}),Pe.push(ge)}else Pe=ge.types.map(function(Se){return{types:[Se],name:Se.name,hasAny:Se.isAny,hasConversion:Se.conversion,restParam:!1}});return Q(Pe,function(Se){return Z(oe,he+1,ve.concat([Se]))})}else return[ve]}return Z(G,0,[])}function le(G,Z){const oe=Math.max(G.length,Z.length);for(let Se=0;Se<oe;Se++){const $e=C(G,Se),Ce=C(Z,Se);let rt=!1,Mt;for(Mt of Ce)if($e.has(Mt)){rt=!0;break}if(!rt)return!1}const he=G.length,ve=Z.length,ge=x(G),Pe=x(Z);return ge?Pe?he===ve:ve>=he:Pe?he>=ve:he===ve}function re(G){return G.map(Z=>ze(Z)?De(Z.referToSelf.callback):Le(Z)?me(Z.referTo.references,Z.referTo.callback):Z)}function L(G,Z,oe){const he=[];let ve;for(ve of G){let ge=oe[ve];if(typeof ge!="number")throw new TypeError('No definition for referenced signature "'+ve+'"');if(ge=Z[ge],typeof ge!="function")return!1;he.push(ge)}return he}function ie(G,Z,oe){const he=re(G),ve=new Array(he.length).fill(!1);let ge=!0;for(;ge;){ge=!1;let Pe=!0;for(let Se=0;Se<he.length;++Se){if(ve[Se])continue;const $e=he[Se];if(ze($e))he[Se]=$e.referToSelf.callback(oe),he[Se].referToSelf=$e.referToSelf,ve[Se]=!0,Pe=!1;else if(Le($e)){const Ce=L($e.referTo.references,he,Z);Ce?(he[Se]=$e.referTo.callback.apply(this,Ce),he[Se].referTo=$e.referTo,ve[Se]=!0,Pe=!1):ge=!0}}if(Pe&&ge)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return he}function X(G){const Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(oe=>{const he=G[oe];if(Z.test(he.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pe(G,Z){if(s.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&X(Z);const oe=[],he=[],ve={},ge=[];let Pe;for(Pe in Z){if(!Object.prototype.hasOwnProperty.call(Z,Pe))continue;const nr=_(Pe);if(!nr)continue;oe.forEach(function(Ch){if(le(Ch,nr))throw new TypeError('Conflicting signatures "'+v(Ch)+'" and "'+v(nr)+'".')}),oe.push(nr);const ba=he.length;he.push(Z[Pe]);const mC=nr.map(w);let im;for(im of ee(mC)){const Ch=v(im);ge.push({params:im,name:Ch,fn:ba}),im.every(c1=>!c1.hasConversion)&&(ve[Ch]=ba)}}ge.sort(k);const Se=ie(he,ve,qs);let $e;for($e in ve)Object.prototype.hasOwnProperty.call(ve,$e)&&(ve[$e]=Se[ve[$e]]);const Ce=[],rt=new Map;for($e of ge)rt.has($e.name)||($e.fn=Se[$e.fn],Ce.push($e),rt.set($e.name,$e));const Mt=Ce[0]&&Ce[0].params.length<=2&&!x(Ce[0].params),Wt=Ce[1]&&Ce[1].params.length<=2&&!x(Ce[1].params),ht=Ce[2]&&Ce[2].params.length<=2&&!x(Ce[2].params),Er=Ce[3]&&Ce[3].params.length<=2&&!x(Ce[3].params),B=Ce[4]&&Ce[4].params.length<=2&&!x(Ce[4].params),ue=Ce[5]&&Ce[5].params.length<=2&&!x(Ce[5].params),we=Mt&&Wt&&ht&&Er&&B&&ue;for(let nr=0;nr<Ce.length;++nr)Ce[nr].test=E(Ce[nr].params);const Ie=Mt?A(Ce[0].params[0]):jo,qe=Wt?A(Ce[1].params[0]):jo,dt=ht?A(Ce[2].params[0]):jo,On=Er?A(Ce[3].params[0]):jo,ko=B?A(Ce[4].params[0]):jo,a1=ue?A(Ce[5].params[0]):jo,TO=Mt?A(Ce[0].params[1]):jo,Sh=Wt?A(Ce[1].params[1]):jo,DO=ht?A(Ce[2].params[1]):jo,NO=Er?A(Ce[3].params[1]):jo,Qv=B?A(Ce[4].params[1]):jo,lC=ue?A(Ce[5].params[1]):jo;for(let nr=0;nr<Ce.length;++nr)Ce[nr].implementation=q(Ce[nr].params,Ce[nr].fn);const uC=Mt?Ce[0].implementation:sy,s1=Wt?Ce[1].implementation:sy,rm=ht?Ce[2].implementation:sy,PO=Er?Ce[3].implementation:sy,Eu=B?Ce[4].implementation:sy,cC=ue?Ce[5].implementation:sy,fC=Mt?Ce[0].params.length:-1,o1=Wt?Ce[1].params.length:-1,l1=ht?Ce[2].params.length:-1,hC=Er?Ce[3].params.length:-1,MO=B?Ce[4].params.length:-1,dC=ue?Ce[5].params.length:-1,IO=we?6:0,Zv=Ce.length,pC=Ce.map(nr=>nr.test),u1=Ce.map(nr=>nr.implementation),nm=function(){for(let ba=IO;ba<Zv;ba++)if(pC[ba](arguments))return u1[ba].apply(this,arguments);return s.onMismatch(G,arguments,Ce)};function qs(nr,ba){return arguments.length===fC&&Ie(nr)&&TO(ba)?uC.apply(this,arguments):arguments.length===o1&&qe(nr)&&Sh(ba)?s1.apply(this,arguments):arguments.length===l1&&dt(nr)&&DO(ba)?rm.apply(this,arguments):arguments.length===hC&&On(nr)&&NO(ba)?PO.apply(this,arguments):arguments.length===MO&&ko(nr)&&Qv(ba)?Eu.apply(this,arguments):arguments.length===dC&&a1(nr)&&lC(ba)?cC.apply(this,arguments):nm.apply(this,arguments)}try{Object.defineProperty(qs,"name",{value:G})}catch{}return qs.signatures=ve,qs._typedFunctionData={signatures:Ce,signatureMap:rt},qs}function de(G,Z,oe){throw P(G,Z,oe)}function ae(G){return ne(G,0,G.length-1)}function z(G){return G[G.length-1]}function ne(G,Z,oe){return Array.prototype.slice.call(G,Z,oe)}function fe(G,Z){for(let oe=0;oe<G.length;oe++)if(Z(G[oe]))return G[oe]}function Q(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function ye(){const G=ae(arguments).map(oe=>v(_(oe))),Z=z(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return me(G,Z)}function me(G,Z){return{referTo:{references:G,callback:Z}}}function De(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function Le(G){return G&&typeof G.referTo=="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function ze(G){return G&&typeof G.referToSelf=="object"&&typeof G.referToSelf.callback=="function"}function Be(G,Z){if(!G)return Z;if(Z&&Z!==G){const oe=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw oe.data={actual:Z,expected:G},oe}return G}function Ve(G){let Z;for(const oe in G)Object.prototype.hasOwnProperty.call(G,oe)&&(h(G[oe])||typeof G[oe].signature=="string")&&(Z=Be(Z,G[oe].name));return Z}function Ke(G,Z){let oe;for(oe in Z)if(Object.prototype.hasOwnProperty.call(Z,oe)){if(oe in G&&Z[oe]!==G[oe]){const he=new Error('Signature "'+oe+'" is defined twice');throw he.data={signature:oe,sourceFunction:Z[oe],destFunction:G[oe]},he}G[oe]=Z[oe]}}const te=s;s=function(G){const Z=typeof G=="string",oe=Z?1:0;let he=Z?G:"";const ve={};for(let ge=oe;ge<arguments.length;++ge){const Pe=arguments[ge];let Se={},$e;if(typeof Pe=="function"?($e=Pe.name,typeof Pe.signature=="string"?Se[Pe.signature]=Pe:h(Pe)&&(Se=Pe.signatures)):t(Pe)&&(Se=Pe,Z||($e=Ve(Pe))),Object.keys(Se).length===0){const Ce=new TypeError("Argument to 'typed' at index "+ge+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ce.data={index:ge,argument:Pe},Ce}Z||(he=Be(he,$e)),Ke(ve,Se)}return pe(he||"",ve)},s.create=qhe,s.createCount=te.createCount,s.onMismatch=de,s.throwMismatchError=de,s.createError=P,s.clear=u,s.clearConversions=c,s.addTypes=l,s._findType=o,s.referTo=ye,s.referToSelf=De,s.convert=m,s.findSignature=d,s.find=p,s.isTypedFunction=h,s.warnAgainstDeprecatedThis=!0,s.addType=function(G,Z){let oe="any";Z!==!1&&n.has("Object")&&(oe="Object"),s.addTypes([G],oe)};function ce(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return s.addConversion=function(G){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ce(G);const oe=o(G.to),he=oe.conversionsTo.find(ve=>ve.from===G.from);if(he)if(Z&&Z.override)s.removeConversion({from:he.from,to:G.to,convert:he.convert});else throw new Error('There is already a conversion from "'+G.from+'" to "'+oe.name+'"');oe.conversionsTo.push({from:G.from,to:oe.name,convert:G.convert,index:a++})},s.addConversions=function(G,Z){G.forEach(oe=>s.addConversion(oe,Z))},s.removeConversion=function(G){ce(G);const Z=o(G.to),oe=fe(Z.conversionsTo,ve=>ve.from===G.from);if(!oe)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(oe.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");const he=Z.conversionsTo.indexOf(oe);Z.conversionsTo.splice(he,1)},s.resolve=function(G,Z){if(!h(G))throw new TypeError(SG);const oe=G._typedFunctionData.signatures;for(let he=0;he<oe.length;++he)if(oe[he].test(Z))return oe[he];return null},s}const uP=qhe();function Y(t,e,r,n){function i(a){var s=$9e(a,e.map(q9e));return U9e(t,e,a),r(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function U9e(t,e,r){var n=e.filter(a=>!z9e(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function z9e(t){return t&&t[0]==="?"}function q9e(t){return t&&t[0]==="?"?t.slice(1):t}function nt(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function Hp(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var Wd=Math.sign||function(t){return t>0?1:t<0?-1:0},H9e=Math.log2||function(e){return Math.log(e)/Math.LN2},W9e=Math.log10||function(e){return Math.log(e)/Math.LN10},G9e=Math.log1p||function(t){return Math.log(t+1)},K9e=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),Number.isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},X9e=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function SR(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!nt(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!nt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function sv(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:i}=Hhe(e);switch(r){case"fixed":return Whe(t,n);case"exponential":return Ghe(t,n);case"engineering":return Y9e(t,n);case"bin":return SR(t,2,i);case"oct":return SR(t,8,i);case"hex":return SR(t,16,i);case"auto":return Q9e(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Hhe(t){var e="auto",r,n;if(t!==void 0)if(lt(t))r=t;else if(St(t))r=t.toNumber();else if(oO(t))t.precision!==void 0&&(r=CG(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=CG(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function YS(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:r,coefficients:s,exponent:i}}function Y9e(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=YS(t),n=uO(r,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(lt(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),l=0;l<o;l++)a.push(0);for(var u=Math.abs(i-s),c=1;u>0;)c++,u--;var f=a.slice(c).join(""),h=lt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+s.toString();return n.sign+d}function Whe(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=YS(t),n=typeof e=="number"?uO(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(g0(s-i.length))),a<0&&(i=g0(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Ghe(t,e){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var r=YS(t),n=e?uO(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(g0(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function Q9e(t,e,r){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=TG(r==null?void 0:r.lowerExp,-3),i=TG(r==null?void 0:r.upperExp,5),a=YS(t),s=e?uO(a,e):a;if(s.exponent<n||s.exponent>=i)return Ghe(t,e);var o=s.coefficients,l=s.exponent;o.length<e&&(o=o.concat(g0(e-o.length))),o=o.concat(g0(l-o.length+1+(o.length<e?e-o.length:0))),o=g0(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),s.sign+o.join("")}function uO(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function g0(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Z9e(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function qi(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!Number.isFinite(t)||!Number.isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var J9e=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},e7e=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},t7e=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},r7e=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},n7e=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},i7e=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function a7e(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-t:t}function CG(t,e){if(lt(t))return t;if(St(t))return t.toNumber();e()}function TG(t,e){return lt(t)?t:St(t)?t.toNumber():e}var Khe=function(){return Khe=uP.create,uP},s7e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],o7e=Y("typed",s7e,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,s=Khe();return s.clear(),s.addTypes([{name:"number",test:lt},{name:"Complex",test:Vf},{name:"BigNumber",test:St},{name:"bigint",test:Kx},{name:"Fraction",test:KS},{name:"Unit",test:go},{name:"identifier",test:o=>Pn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Pn},{name:"Chain",test:Uhe},{name:"Array",test:vr},{name:"Matrix",test:ft},{name:"DenseMatrix",test:lP},{name:"SparseMatrix",test:Om},{name:"Range",test:lV},{name:"Index",test:sO},{name:"boolean",test:C9e},{name:"ResultSet",test:T9e},{name:"Help",test:$he},{name:"function",test:jhe},{name:"Date",test:D9e},{name:"RegExp",test:N9e},{name:"null",test:P9e},{name:"undefined",test:M9e},{name:"AccessorNode",test:fh},{name:"ArrayNode",test:il},{name:"AssignmentNode",test:I9e},{name:"BlockNode",test:O9e},{name:"ConditionalNode",test:k9e},{name:"ConstantNode",test:qt},{name:"FunctionNode",test:Tp},{name:"FunctionAssignmentNode",test:XS},{name:"IndexNode",test:Gw},{name:"Node",test:fr},{name:"ObjectNode",test:lO},{name:"OperatorNode",test:Bn},{name:"ParenthesisNode",test:hh},{name:"RangeNode",test:R9e},{name:"RelationalNode",test:F9e},{name:"SymbolNode",test:Ui},{name:"Map",test:Vhe},{name:"Object",test:oO}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||_T(l),Z9e(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ET(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ET(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return r||_T(l),new r(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return a||ST(l),new a(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ET(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||ST(l);var u=new a(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){r||_T(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){a||ST(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ET(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||_T(l),new r(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||ST(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||l7e(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Do(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,l,u)=>{var c=s.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Do(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function _T(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ET(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function l7e(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ST(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var u7e="ResultSet",c7e=[],f7e=Y(u7e,c7e,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ky=9e15,Wp=1e9,a4="0123456789abcdef",cP="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",fP="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",s4={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ky,maxE:Ky,crypto:!1},Xhe,Of,_t=!0,cO="[DecimalError] ",Dp=cO+"Invalid argument: ",Yhe=cO+"Precision limit exceeded",Qhe=cO+"crypto unavailable",Zhe="[object Decimal]",Va=Math.floor,ci=Math.pow,h7e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,d7e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,p7e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Jhe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lu=1e7,pt=7,m7e=9007199254740991,g7e=cP.length-1,o4=fP.length-1,Me={toStringTag:Zhe};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),ut(t)};Me.ceil=function(){return ut(new this.constructor(this),this.e+1,2)};Me.clampedTo=Me.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Dp+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Me.comparedTo=Me.cmp=function(t){var e,r,n,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,l=a.s,u=t.s;if(!s||!o)return!l||!u?NaN:l!==u?l:s===o?0:!s^l<0?1:-1;if(!s[0]||!o[0])return s[0]?l:o[0]?-u:0;if(l!==u)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=s.length,i=o.length,e=0,r=n<i?n:i;e<r;++e)if(s[e]!==o[e])return s[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Me.cosine=Me.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+pt,n.rounding=1,r=v7e(n,ide(n,r)),n.precision=t,n.rounding=e,ut(Of==2||Of==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Me.cubeRoot=Me.cbrt=function(){var t,e,r,n,i,a,s,o,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(_t=!1,a=c.s*ci(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=ca(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=ci(r,1/3),t=Va((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),s=(t=f.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=jr(u.plus(c).times(o),u.plus(l),s+2,1),ca(o.d).slice(0,s)===(r=ca(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!i&&r=="4999"){if(!i&&(ut(o,t+1,0),o.times(o).times(o).eq(c))){n=o;break}s+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(ut(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return _t=!0,ut(n,t,f.rounding,e)};Me.decimalPlaces=Me.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Va(this.e/pt))*pt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Me.dividedBy=Me.div=function(t){return jr(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.divToInt=function(t){var e=this,r=e.constructor;return ut(jr(e,new r(t),0,1,1),r.precision,r.rounding)};Me.equals=Me.eq=function(t){return this.cmp(t)===0};Me.floor=function(){return ut(new this.constructor(this),this.e+1,3)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){var e=this.cmp(t);return e==1||e===0};Me.hyperbolicCosine=Me.cosh=function(){var t,e,r,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/hO(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=gw(s,1,a.times(e),new s(1),!0);for(var l,u=t,c=new s(8);u--;)l=a.times(a),a=o.minus(l.times(c.minus(l.times(c))));return ut(a,s.precision=r,s.rounding=n,!0)};Me.hyperbolicSine=Me.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=gw(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/hO(5,t)),i=gw(a,2,i,i,!0);for(var s,o=new a(5),l=new a(16),u=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(l.times(s).plus(u))))}return a.precision=e,a.rounding=r,ut(i,e,r,!0)};Me.hyperbolicTangent=Me.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,jr(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Me.inverseCosine=Me.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,i=e.rounding;return r!==-1?r===0?t.isNeg()?ac(e,n,i):new e(0):new e(NaN):t.isZero()?ac(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,t.times(2))};Me.inverseHyperbolicCosine=Me.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,_t=!1,r=r.times(r).minus(1).sqrt().plus(r),_t=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Me.inverseHyperbolicSine=Me.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,_t=!1,r=r.times(r).plus(1).sqrt().plus(r),_t=!0,n.precision=t,n.rounding=e,r.ln())};Me.inverseHyperbolicTangent=Me.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?ut(new a(i),t,e,!0):(a.precision=r=n-i.e,i=jr(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Me.inverseSine=Me.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=ac(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Me.inverseTangent=Me.atan=function(){var t,e,r,n,i,a,s,o,l,u=this,c=u.constructor,f=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=o4)return s=ac(c,f+4,h).times(.25),s.s=u.s,s}else{if(!u.s)return new c(NaN);if(f+4<=o4)return s=ac(c,f+4,h).times(.5),s.s=u.s,s}for(c.precision=o=f+10,c.rounding=1,r=Math.min(28,o/pt+2|0),t=r;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(_t=!1,e=Math.ceil(o/pt),n=1,l=u.times(u),s=new c(u),i=u;t!==-1;)if(i=i.times(l),a=s.minus(i.div(n+=2)),i=i.times(l),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),_t=!0,ut(s,c.precision=f,c.rounding=h,!0)};Me.isFinite=function(){return!!this.d};Me.isInteger=Me.isInt=function(){return!!this.d&&Va(this.e/pt)>this.d.length-2};Me.isNaN=function(){return!this.s};Me.isNegative=Me.isNeg=function(){return this.s<0};Me.isPositive=Me.isPos=function(){return this.s>0};Me.isZero=function(){return!!this.d&&this.d[0]===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,r,n,i,a,s,o,l,u=this,c=u.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(_t=!1,o=f+d,s=Gd(u,o),n=e?hP(c,o+10):Gd(t,o),l=jr(s,n,o,1),e_(l.d,i=f,h))do if(o+=10,s=Gd(u,o),n=e?hP(c,o+10):Gd(t,o),l=jr(s,n,o,1),!a){+ca(l.d).slice(i+1,i+15)+1==1e14&&(l=ut(l,f+1,0));break}while(e_(l.d,i+=10,h));return _t=!0,ut(l,f,h)};Me.minus=Me.sub=function(t){var e,r,n,i,a,s,o,l,u,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(u=d.d,h=t.d,o=p.precision,l=p.rounding,!u[0]||!h[0]){if(h[0])t.s=-t.s;else if(u[0])t=new p(d);else return new p(l===3?-0:0);return _t?ut(t,o,l):t}if(r=Va(t.e/pt),c=Va(d.e/pt),u=u.slice(),a=c-r,a){for(f=a<0,f?(e=u,a=-a,s=h.length):(e=h,r=c,s=u.length),n=Math.max(Math.ceil(o/pt),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=u.length,s=h.length,f=n<s,f&&(s=n),n=0;n<s;n++)if(u[n]!=h[n]){f=u[n]<h[n];break}a=0}for(f&&(e=u,u=h,h=e,t.s=-t.s),s=u.length,n=h.length-s;n>0;--n)u[s++]=0;for(n=h.length;n>a;){if(u[--n]<h[n]){for(i=n;i&&u[--i]===0;)u[i]=lu-1;--u[i],u[n]+=lu}u[n]-=h[n]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=fO(u,r),_t?ut(t,o,l):t):new p(l===3?-0:0)};Me.modulo=Me.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?ut(new n(r),n.precision,n.rounding):(_t=!1,n.modulo==9?(e=jr(r,t.abs(),0,3,1),e.s*=t.s):e=jr(r,t,0,n.modulo,1),e=e.times(t),_t=!0,r.minus(e))};Me.naturalExponential=Me.exp=function(){return l4(this)};Me.naturalLogarithm=Me.ln=function(){return Gd(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s,ut(t)};Me.plus=Me.add=function(t){var e,r,n,i,a,s,o,l,u,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(u=f.d,c=t.d,o=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(t=new h(f)),_t?ut(t,o,l):t;if(a=Va(f.e/pt),n=Va(t.e/pt),u=u.slice(),i=a-n,i){for(i<0?(r=u,i=-i,s=c.length):(r=c,n=a,s=u.length),a=Math.ceil(o/pt),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=u.length,i=c.length,s-i<0&&(i=s,r=c,c=u,u=r),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/lu|0,u[i]%=lu;for(e&&(u.unshift(e),++n),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=fO(u,n),_t?ut(t,o,l):t};Me.precision=Me.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Dp+t);return r.d?(e=ede(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Me.round=function(){var t=this,e=t.constructor;return ut(new e(t),t.e+1,e.rounding)};Me.sine=Me.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+pt,n.rounding=1,r=b7e(n,ide(n,r)),n.precision=t,n.rounding=e,ut(Of>2?r.neg():r,t,e,!0)):new n(NaN)};Me.squareRoot=Me.sqrt=function(){var t,e,r,n,i,a,s=this,o=s.d,l=s.e,u=s.s,c=s.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(_t=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=ca(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Va((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus(jr(s,a,r+2,1)).times(.5),ca(a.d).slice(0,r)===(e=ca(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(ut(a,l+1,0),a.times(a).eq(s))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ut(n,l+1,1),t=!n.times(n).eq(s));break}return _t=!0,ut(n,l,c.rounding,t)};Me.tangent=Me.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=jr(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,ut(Of==2||Of==4?r.neg():r,t,e,!0)):new n(NaN)};Me.times=Me.mul=function(t){var e,r,n,i,a,s,o,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(r=Va(c.e/pt)+Va(t.e/pt),l=h.length,u=d.length,l<u&&(a=h,h=d,d=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+d[n]*h[i-n-1]+e,a[i--]=o%lu|0,e=o/lu|0;a[i]=(a[i]+e)%lu|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=fO(a,r),_t?ut(t,f.precision,f.rounding):t};Me.toBinary=function(t,e){return uV(this,2,t,e)};Me.toDecimalPlaces=Me.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Us(t,0,Wp),e===void 0?e=n.rounding:Us(e,0,8),ut(r,t+r.e+1,e))};Me.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ec(n,!0):(Us(t,0,Wp),e===void 0?e=i.rounding:Us(e,0,8),n=ut(new i(n),t+1,e),r=Ec(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Ec(i):(Us(t,0,Wp),e===void 0?e=a.rounding:Us(e,0,8),n=ut(new a(i),t+i.e+1,e),r=Ec(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Me.toFraction=function(t){var e,r,n,i,a,s,o,l,u,c,f,h,d=this,p=d.d,m=d.constructor;if(!p)return new m(d);if(u=r=new m(1),n=l=new m(0),e=new m(n),a=e.e=ede(p)-d.e-1,s=a%pt,e.d[0]=ci(10,s<0?pt+s:s),t==null)t=a>0?e:u;else{if(o=new m(t),!o.isInt()||o.lt(u))throw Error(Dp+o);t=o.gt(e)?a>0?e:u:o}for(_t=!1,o=new m(ca(p)),c=m.precision,m.precision=a=p.length*pt*2;f=jr(o,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=o.minus(f.times(i)),o=i;return i=jr(t.minus(r),n,0,1,1),l=l.plus(i.times(u)),r=r.plus(i.times(n)),l.s=u.s=d.s,h=jr(u,n,a,1).minus(d).abs().cmp(jr(l,r,a,1).minus(d).abs())<1?[u,n]:[l,r],m.precision=c,_t=!0,h};Me.toHexadecimal=Me.toHex=function(t,e){return uV(this,16,t,e)};Me.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:Us(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(_t=!1,r=jr(r,t,0,e,1).times(t),_t=!0,ut(r)):(t.s=r.s,r=t),r};Me.toNumber=function(){return+this};Me.toOctal=function(t,e){return uV(this,8,t,e)};Me.toPower=Me.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,u=+(t=new l(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new l(ci(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,a=l.rounding,t.eq(1))return ut(o,n,a);if(e=Va(t.e/pt),e>=t.d.length-1&&(r=u<0?-u:u)<=m7e)return i=tde(l,o,r,n),t.s<0?new l(1).div(i):ut(i,n,a);if(s=o.s,s<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return r=ci(+o,u),e=r==0||!isFinite(r)?Va(u*(Math.log("0."+ca(o.d))/Math.LN10+o.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(_t=!1,l.rounding=o.s=1,r=Math.min(12,(e+"").length),i=l4(t.times(Gd(o,n+r)),n),i.d&&(i=ut(i,n+5,1),e_(i.d,n,a)&&(e=n+10,i=ut(l4(t.times(Gd(o,e+r)),e),e+5,1),+ca(i.d).slice(n+1,n+15)+1==1e14&&(i=ut(i,n+1,0)))),i.s=s,_t=!0,l.rounding=a,ut(i,n,a))};Me.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ec(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Us(t,1,Wp),e===void 0?e=i.rounding:Us(e,0,8),n=ut(new i(n),t,e),r=Ec(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toSignificantDigits=Me.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Us(t,1,Wp),e===void 0?e=n.rounding:Us(e,0,8)),ut(new n(r),t,e)};Me.toString=function(){var t=this,e=t.constructor,r=Ec(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Me.truncated=Me.trunc=function(){return ut(new this.constructor(this),this.e+1,1)};Me.valueOf=Me.toJSON=function(){var t=this,e=t.constructor,r=Ec(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function ca(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=pt-n.length,r&&(a+=Vh(r)),a+=n;s=t[e],n=s+"",r=pt-n.length,r&&(a+=Vh(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function Us(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Dp+t)}function e_(t,e,r,n){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=pt,i=0):(i=Math.ceil((e+1)/pt),e%=pt),a=ci(10,pt-e),o=t[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):s=(r<4&&o+1==a||r>3&&o+1==a/2)&&(t[i+1]/a/100|0)==ci(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||r<4)&&o==9999||!n&&r>3&&o==4999):s=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==ci(10,e-3)-1,s}function rN(t,e,r){for(var n,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=a4.indexOf(t.charAt(s++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function v7e(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/hO(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=gw(t,1,e.times(i),new t(1));for(var a=r;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var jr=function(){function t(n,i,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,l){var u,c,f,h,d,p,m,v,y,w,b,_,x,A,E,S,C,D,N,P,M=n.constructor,j=n.s==i.s?1:-1,K=n.d,k=i.d;if(!K||!K[0]||!k||!k[0])return new M(!n.s||!i.s||(K?k&&K[0]==k[0]:!k)?NaN:K&&K[0]==0||!k?j*0:j/0);for(l?(d=1,c=n.e-i.e):(l=lu,d=pt,c=Va(n.e/d)-Va(i.e/d)),N=k.length,C=K.length,y=new M(j),w=y.d=[],f=0;k[f]==(K[f]||0);f++);if(k[f]>(K[f]||0)&&c--,a==null?(A=a=M.precision,s=M.rounding):o?A=a+(n.e-i.e)+1:A=a,A<0)w.push(1),p=!0;else{if(A=A/d+2|0,f=0,N==1){for(h=0,k=k[0],A++;(f<C||h)&&A--;f++)E=h*l+(K[f]||0),w[f]=E/k|0,h=E%k|0;p=h||f<C}else{for(h=l/(k[0]+1)|0,h>1&&(k=t(k,h,l),K=t(K,h,l),N=k.length,C=K.length),S=N,b=K.slice(0,N),_=b.length;_<N;)b[_++]=0;P=k.slice(),P.unshift(0),D=k[0],k[1]>=l/2&&++D;do h=0,u=e(k,b,N,_),u<0?(x=b[0],N!=_&&(x=x*l+(b[1]||0)),h=x/D|0,h>1?(h>=l&&(h=l-1),m=t(k,h,l),v=m.length,_=b.length,u=e(m,b,v,_),u==1&&(h--,r(m,N<v?P:k,v,l))):(h==0&&(u=h=1),m=k.slice()),v=m.length,v<_&&m.unshift(0),r(b,m,_,l),u==-1&&(_=b.length,u=e(k,b,N,_),u<1&&(h++,r(b,N<_?P:k,_,l))),_=b.length):u===0&&(h++,b=[0]),w[f++]=h,u&&b[0]?b[_++]=K[S]||0:(b=[K[S]],_=1);while((S++<C||b[0]!==void 0)&&A--);p=b[0]!==void 0}w[0]||w.shift()}if(d==1)y.e=c,Xhe=p;else{for(f=1,h=w[0];h>=10;h/=10)f++;y.e=f+c*d-1,ut(y,o?a+y.e+1:a,s,p)}return y}}();function ut(t,e,r,n){var i,a,s,o,l,u,c,f,h,d=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,o=f[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=pt,s=e,c=f[h=0],l=c/ci(10,i-s-1)%10|0;else if(h=Math.ceil((a+1)/pt),o=f.length,h>=o)if(n){for(;o++<=h;)f.push(0);c=l=0,i=1,a%=pt,s=a-pt+1}else break e;else{for(c=o=f[h],i=1;o>=10;o/=10)i++;a%=pt,s=a-pt+i,l=s<0?0:c/ci(10,i-s-1)%10|0}if(n=n||e<0||f[h+1]!==void 0||(s<0?c:c%ci(10,i-s-1)),u=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?s>0?c/ci(10,i-s):0:f[h-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=t.e+1,f[0]=ci(10,(pt-e%pt)%pt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=h,o=1,h--):(f.length=h+1,o=ci(10,pt-a),f[h]=s>0?(c/ci(10,i-s)%ci(10,s)|0)*o:0),u)for(;;)if(h==0){for(a=1,s=f[0];s>=10;s/=10)a++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,f[0]==lu&&(f[0]=1));break}else{if(f[h]+=o,f[h]!=lu)break;f[h--]=0,o=1}for(a=f.length;f[--a]===0;)f.pop()}return _t&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function Ec(t,e,r){if(!t.isFinite())return nde(t);var n,i=t.e,a=ca(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Vh(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Vh(-i-1)+a,r&&(n=r-s)>0&&(a+=Vh(n))):i>=s?(a+=Vh(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Vh(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Vh(n))),a}function fO(t,e){var r=t[0];for(e*=pt;r>=10;r/=10)e++;return e}function hP(t,e,r){if(e>g7e)throw _t=!0,r&&(t.precision=r),Error(Yhe);return ut(new t(cP),e,1,!0)}function ac(t,e,r){if(e>o4)throw Error(Yhe);return ut(new t(fP),e,r,!0)}function ede(t){var e=t.length-1,r=e*pt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Vh(t){for(var e="";t--;)e+="0";return e}function tde(t,e,r,n){var i,a=new t(1),s=Math.ceil(n/pt+4);for(_t=!1;;){if(r%2&&(a=a.times(e),NG(a.d,s)&&(i=!0)),r=Va(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),NG(e.d,s)}return _t=!0,a}function DG(t){return t.d[t.d.length-1]&1}function rde(t,e,r){for(var n,i,a=new t(e[0]),s=0;++s<e.length;){if(i=new t(e[s]),!i.s){a=i;break}n=a.cmp(i),(n===r||n===0&&a.s===r)&&(a=i)}return a}function l4(t,e){var r,n,i,a,s,o,l,u=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(_t=!1,l=p):l=e,o=new h(.03125);t.e>-2;)t=t.times(o),f+=5;for(n=Math.log(ci(2,f))/Math.LN10*2+5|0,l+=n,r=a=s=new h(1),h.precision=l;;){if(a=ut(a.times(t),l,1),r=r.times(++c),o=s.plus(jr(a,r,l,1)),ca(o.d).slice(0,l)===ca(s.d).slice(0,l)){for(i=f;i--;)s=ut(s.times(s),l,1);if(e==null)if(u<3&&e_(s.d,l-n,d,u))h.precision=l+=10,r=a=o=new h(1),c=0,u++;else return ut(s,h.precision=p,d,_t=!0);else return h.precision=p,s}s=o}}function Gd(t,e){var r,n,i,a,s,o,l,u,c,f,h,d=1,p=10,m=t,v=m.d,y=m.constructor,w=y.rounding,b=y.precision;if(m.s<0||!v||!v[0]||!m.e&&v[0]==1&&v.length==1)return new y(v&&!v[0]?-1/0:m.s!=1?NaN:v?0:m);if(e==null?(_t=!1,c=b):c=e,y.precision=c+=p,r=ca(v),n=r.charAt(0),Math.abs(a=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=ca(m.d),n=r.charAt(0),d++;a=m.e,n>1?(m=new y("0."+r),a++):m=new y(n+"."+r.slice(1))}else return u=hP(y,c+2,b).times(a+""),m=Gd(new y(n+"."+r.slice(1)),c-p).plus(u),y.precision=b,e==null?ut(m,b,w,_t=!0):m;for(f=m,l=s=m=jr(m.minus(1),m.plus(1),c,1),h=ut(m.times(m),c,1),i=3;;){if(s=ut(s.times(h),c,1),u=l.plus(jr(s,new y(i),c,1)),ca(u.d).slice(0,c)===ca(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(hP(y,c+2,b).times(a+""))),l=jr(l,new y(d),c,1),e==null)if(e_(l.d,c-p,w,o))y.precision=c+=p,u=s=m=jr(f.minus(1),f.plus(1),c,1),h=ut(m.times(m),c,1),i=o=1;else return ut(l,y.precision=b,w,_t=!0);else return y.precision=b,l;l=u,i+=2}}function nde(t){return String(t.s*t.s/0)}function nN(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%pt,r<0&&(n+=pt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=pt;n<i;)t.d.push(+e.slice(n,n+=pt));e=e.slice(n),n=pt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),_t&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function y7e(t,e){var r,n,i,a,s,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Jhe.test(e))return nN(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(d7e.test(e))r=16,e=e.toLowerCase();else if(h7e.test(e))r=2;else if(p7e.test(e))r=8;else throw Error(Dp+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=tde(n,new n(r),a,a*2)),u=rN(e,r,lu),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new n(t.s*0):(t.e=fO(u,c),t.d=u,_t=!1,s&&(t=jr(t,i,o*4)),l&&(t=t.times(Math.abs(l)<54?ci(2,l):Np.pow(2,l))),_t=!0,t)}function b7e(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:gw(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/hO(5,r)),e=gw(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function gw(t,e,r,n,i){var a,s,o,l,u=t.precision,c=Math.ceil(u/pt);for(_t=!1,l=r.times(r),o=new t(n);;){if(s=jr(o.times(l),new t(e++*e++),u,1),o=i?n.plus(s):n.minus(s),n=jr(s.times(l),new t(e++*e++),u,1),s=o.plus(n),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return _t=!0,s.d.length=c+1,s}function hO(t,e){for(var r=t;--e;)r*=t;return r}function ide(t,e){var r,n=e.s<0,i=ac(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Of=n?4:1,e;if(r=e.divToInt(i),r.isZero())Of=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return Of=DG(r)?n?2:3:n?4:1,e;Of=DG(r)?n?1:4:n?3:2}return e.minus(i).abs()}function uV(t,e,r,n){var i,a,s,o,l,u,c,f,h,d=t.constructor,p=r!==void 0;if(p?(Us(r,1,Wp),n===void 0?n=d.rounding:Us(n,0,8)):(r=d.precision,n=d.rounding),!t.isFinite())c=nde(t);else{for(c=Ec(t),s=c.indexOf("."),p?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,s>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-s,h.d=rN(Ec(h),10,i),h.e=h.d.length),f=rN(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(s<0?a--:(t=new d(t),t.d=f,t.e=a,t=jr(t,h,r,n,0,i),f=t.d,a=t.e,u=Xhe),s=f[r],o=i/2,u=u||f[r+1]!==void 0,u=n<4?(s!==void 0||u)&&(n===0||n===(t.s<0?3:2)):s>o||s===o&&(n===4||u||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,u)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,c="";s<l;s++)c+=a4.charAt(f[s]);if(p){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(f=rN(c,i,e),l=f.length;!f[l-1];--l);for(s=1,c="1.";s<l;s++)c+=a4.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function NG(t,e){if(t.length>e)return t.length=e,!0}function w7e(t){return new this(t).abs()}function x7e(t){return new this(t).acos()}function A7e(t){return new this(t).acosh()}function _7e(t,e){return new this(t).plus(e)}function E7e(t){return new this(t).asin()}function S7e(t){return new this(t).asinh()}function C7e(t){return new this(t).atan()}function T7e(t){return new this(t).atanh()}function D7e(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=ac(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?ac(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=ac(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(jr(t,e,a,1)),e=ac(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(jr(t,e,a,1)),r}function N7e(t){return new this(t).cbrt()}function P7e(t){return ut(t=new this(t),t.e+1,2)}function M7e(t,e,r){return new this(t).clamp(e,r)}function I7e(t){if(!t||typeof t!="object")throw Error(cO+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Wp,"rounding",0,8,"toExpNeg",-Ky,0,"toExpPos",0,Ky,"maxE",0,Ky,"minE",-Ky,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=s4[r]),(n=t[r])!==void 0)if(Va(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Dp+r+": "+n);if(r="crypto",i&&(this[r]=s4[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Qhe);else this[r]=!1;else throw Error(Dp+r+": "+n);return this}function O7e(t){return new this(t).cos()}function k7e(t){return new this(t).cosh()}function ade(t){var e,r,n;function i(a){var s,o,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,PG(a)){u.s=a.s,_t?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;_t?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return nN(u,a.toString())}if(l==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),Jhe.test(a)?nN(u,a):y7e(u,a);if(l==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,nN(u,a.toString());throw Error(Dp+a)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=I7e,i.clone=ade,i.isDecimal=PG,i.abs=w7e,i.acos=x7e,i.acosh=A7e,i.add=_7e,i.asin=E7e,i.asinh=S7e,i.atan=C7e,i.atanh=T7e,i.atan2=D7e,i.cbrt=N7e,i.ceil=P7e,i.clamp=M7e,i.cos=O7e,i.cosh=k7e,i.div=R7e,i.exp=F7e,i.floor=L7e,i.hypot=B7e,i.ln=$7e,i.log=j7e,i.log10=U7e,i.log2=V7e,i.max=z7e,i.min=q7e,i.mod=H7e,i.mul=W7e,i.pow=G7e,i.random=K7e,i.round=X7e,i.sign=Y7e,i.sin=Q7e,i.sinh=Z7e,i.sqrt=J7e,i.sub=eqe,i.sum=tqe,i.tan=rqe,i.tanh=nqe,i.trunc=iqe,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function R7e(t,e){return new this(t).div(e)}function F7e(t){return new this(t).exp()}function L7e(t){return ut(t=new this(t),t.e+1,3)}function B7e(){var t,e,r=new this(0);for(_t=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return _t=!0,new this(1/0);r=e}return _t=!0,r.sqrt()}function PG(t){return t instanceof Np||t&&t.toStringTag===Zhe||!1}function $7e(t){return new this(t).ln()}function j7e(t,e){return new this(t).log(e)}function V7e(t){return new this(t).log(2)}function U7e(t){return new this(t).log(10)}function z7e(){return rde(this,arguments,-1)}function q7e(){return rde(this,arguments,1)}function H7e(t,e){return new this(t).mod(e)}function W7e(t,e){return new this(t).mul(e)}function G7e(t,e){return new this(t).pow(e)}function K7e(t){var e,r,n,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:Us(t,1,Wp),n=Math.ceil(t/pt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(Qhe);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],t%=pt,n&&t&&(i=ci(10,pt-t),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=pt)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<pt&&(r-=pt-n)}return s.e=r,s.d=o,s}function X7e(t){return ut(t=new this(t),t.e+1,this.rounding)}function Y7e(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Q7e(t){return new this(t).sin()}function Z7e(t){return new this(t).sinh()}function J7e(t){return new this(t).sqrt()}function eqe(t,e){return new this(t).sub(e)}function tqe(){var t=0,e=arguments,r=new this(e[t]);for(_t=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return _t=!0,ut(r,this.precision,this.rounding)}function rqe(t){return new this(t).tan()}function nqe(t){return new this(t).tanh()}function iqe(t){return ut(t=new this(t),t.e+1,1)}Me[Symbol.for("nodejs.util.inspect.custom")]=Me.toString;Me[Symbol.toStringTag]="Decimal";var Np=Me.constructor=ade(s4);cP=new Np(cP);fP=new Np(fP);var aqe="BigNumber",sqe=["?on","config"],oqe=Y(aqe,sqe,t=>{var{on:e,config:r}=t,n=Np.clone({precision:r.precision,modulo:Np.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const _a=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Vo=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},lqe=t=>{const e=Math.sin(.5*t);return-2*e*e},CR=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},oy=function(){throw SyntaxError("Invalid Param")};function TR(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const uqe={re:0,im:0},bm=function(t,e){const r=uqe;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return xe.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return xe.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):oy();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&oy();for(let s=0;s<n.length;s++){const o=n[s];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?a++:o==="i"||o==="I"?(i+a===0&&oy(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((a%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(o))&&oy(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((a%2?"-":"")+o),s++):r.re+=parseFloat((a%2?"-":"")+o),i=a=0))}i+a>0&&oy();break;case"number":r.im=0,r.re=t;break;default:oy()}return isNaN(r.re)||isNaN(r.im),r};function xe(t,e){if(!(this instanceof xe))return new xe(t,e);const r=bm(t,e);this.re=r.re,this.im=r.im}xe.prototype={re:0,im:0,sign:function(){const t=CR(this.re,this.im);return new xe(this.re/t,this.im/t)},add:function(t,e){const r=bm(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=bm(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=bm(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||i&&a?xe.NAN:n||i?xe.INFINITY:r.im===0&&this.im===0?new xe(this.re*r.re,0):new xe(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=bm(t,e),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),a=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(a&&s||n&&i)return xe.NAN;if(s||n)return xe.INFINITY;if(a||i)return xe.ZERO;if(r.im===0)return new xe(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const o=r.re/r.im,l=r.re*o+r.im;return new xe((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=r.im/r.re,l=r.im*o+r.re;return new xe((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(t,e){const r=bm(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return xe.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new xe(Math.pow(this.im,r.re),0);case 1:return new xe(0,Math.pow(this.im,r.re));case 2:return new xe(-Math.pow(this.im,r.re),0);case 3:return new xe(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return xe.ZERO;const a=Math.atan2(this.im,this.re),s=TR(this.re,this.im);let o=Math.exp(r.re*s-r.im*a),l=r.im*s+r.re*a;return new xe(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new xe(Math.sqrt(t),0):new xe(0,Math.sqrt(-t));const r=CR(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),i=Math.abs(e)/(2*n);return t>=0?new xe(n,e<0?-i:i):new xe(i,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new xe(t,0):new xe(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new xe(Math.expm1(t)*Math.cos(e)+lqe(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new xe(Math.log(t),0):new xe(TR(t,e),Math.atan2(e,t))},abs:function(){return CR(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new xe(Math.sin(t)*_a(e),Math.cos(t)*Vo(e))},cos:function(){const t=this.re,e=this.im;return new xe(Math.cos(t)*_a(e),-Math.sin(t)*Vo(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+_a(e);return new xe(Math.sin(t)/r,Vo(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-_a(e);return new xe(-Math.sin(t)/r,Vo(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*_a(2*e)+.5*Math.cos(2*t);return new xe(Math.cos(t)*_a(e)/r,Math.sin(t)*Vo(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*_a(2*e)-.5*Math.cos(2*t);return new xe(Math.sin(t)*_a(e)/r,-Math.cos(t)*Vo(e)/r)},asin:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new xe((1-e*e-t*t)/r,-2*t/r).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atan():new xe(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acos():new xe(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asin():new xe(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new xe(Vo(t)*Math.cos(e),_a(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new xe(_a(t)*Math.cos(e),Vo(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=_a(t)+Math.cos(e);return new xe(Vo(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=_a(t)-Math.cos(e);return new xe(Vo(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-_a(2*t);return new xe(-2*Vo(t)*Math.cos(e)/r,2*_a(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+_a(2*t);return new xe(2*_a(t)*Math.cos(e)/r,-2*Vo(t)*Math.sin(e)/r)},asinh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(0,0);const a=Math.abs(t),s=Math.log(a+Math.sqrt(a*a+1));return new xe(t<0?-s:s,0)}const r=t*t-e*e+1,n=2*t*e,i=new xe(r,n).sqrt();return new xe(t+i.re,e+i.im).log()},acosh:function(){const t=this.re,e=this.im;if(e===0){if(t>1)return new xe(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const i=Math.sqrt(t*t-1);return new xe(Math.log(-t+i),Math.PI)}return new xe(0,Math.acos(t))}const r=new xe(t-1,e).sqrt(),n=new xe(t+1,e).sqrt();return new xe(t+r.re*n.re-r.im*n.im,e+r.re*n.im+r.im*n.re).log()},atanh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(0,0);if(t===1)return new xe(1/0,0);if(t===-1)return new xe(-1/0,0);if(-1<t&&t<1)return new xe(.5*Math.log((1+t)/(1-t)),0);if(t>1){const l=(t+1)/(t-1);return new xe(.5*Math.log(l),-Math.PI/2)}const o=(1+t)/(1-t);return new xe(.5*Math.log(-o),Math.PI/2)}const r=1-t,n=1+t,i=r*r+e*e;if(i===0)return new xe(t!==-1?t/0:0,e!==0?e/0:0);const a=(n*r-e*e)/i,s=(e*r+n*e)/i;return new xe(TR(a,s)/2,Math.atan2(s,a)/2)},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,Math.PI/2);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atanh():new xe(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new xe(1/0,0);const n=1/t;return new xe(Math.log(n+Math.sqrt(n*n+1)),0)}const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asinh():new xe(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acosh():new xe(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new xe(t/r,-e/r)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new xe(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new xe(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new xe(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=bm(t,e);return Math.abs(r.re-this.re)<=xe.EPSILON&&Math.abs(r.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<xe.EPSILON&&(t=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var cqe="Complex",fqe=[],hqe=Y(cqe,fqe,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(t){var e="",r=this.im,n=this.re,i=sv(this.re,t),a=sv(this.im,t),s=lt(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},xe.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(lt(r)){if(go(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),lt(n))return new xe({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(t){return new xe(t)},xe.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const ot=BigInt(0),Vt=BigInt(1),Li=BigInt(2),Xx=BigInt(3),Xy=BigInt(5),Ps=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const dqe=2e3,Ue={s:Vt,n:ot,d:Vt};function Oc(t,e){try{t=BigInt(t)}catch{throw Fh()}return t*e}function Ol(t){return typeof t=="bigint"?t:Math.floor(t)}function Jr(t,e){if(e===ot)throw cV();const r=Object.create(Ho.prototype);r.s=t<ot?-Vt:Vt,t=t<ot?-t:t;const n=wm(t,e);return r.n=t/n,r.d=e/n,r}const pqe=[Li*Li,Li,Li*Li,Li,Li*Li,Li*Xx,Li,Li*Xx];function ly(t){const e=Object.create(null);if(t<=Vt)return e[t]=Vt,e;const r=n=>{e[n]=(e[n]||ot)+Vt};for(;t%Li===ot;)r(Li),t/=Li;for(;t%Xx===ot;)r(Xx),t/=Xx;for(;t%Xy===ot;)r(Xy),t/=Xy;for(let n=0,i=Li+Xy;i*i<=t;){for(;t%i===ot;)r(i),t/=i;i+=pqe[n],n=n+1&7}return t>Vt&&r(t),e}const Ti=function(t,e){let r=ot,n=Vt,i=Vt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw Fh();if(t%1!==0)throw MG();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Fh();if(e%1!==0)throw MG();n=BigInt(e)}i=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw Fh();i=r*n}else if(typeof t=="number"){if(isNaN(t))throw Fh();if(t<0&&(i=-Vt,t=-t),t%1===0)r=BigInt(t);else{let a=1,s=0,o=1,l=1,u=1,c=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);o<=c&&u<=c;){let f=(s+l)/(o+u);if(t===f){o+u<=c?(r=s+l,n=o+u):u>o?(r=l,n=u):(r=s,n=o);break}else t>f?(s+=l,o+=u):(l+=s,u+=o),o>c?(r=l,n=u):(r=s,n=o)}r=BigInt(r)*BigInt(a),n=BigInt(n)}}else if(typeof t=="string"){let a=0,s=ot,o=ot,l=ot,u=Vt,c=Vt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Fh();if(f[a]==="-"?(i=-Vt,a++):f[a]==="+"&&a++,f.length===a+1?o=Oc(f[a++],i):f[a+1]==="."||f[a]==="."?(f[a]!=="."&&(s=Oc(f[a++],i)),a++,(a+1===f.length||f[a+1]==="("&&f[a+3]===")"||f[a+1]==="'"&&f[a+3]==="'")&&(o=Oc(f[a],i),u=Ps**BigInt(f[a].length),a++),(f[a]==="("&&f[a+2]===")"||f[a]==="'"&&f[a+2]==="'")&&(l=Oc(f[a+1],i),c=Ps**BigInt(f[a+1].length)-Vt,a+=3)):f[a+1]==="/"||f[a+1]===":"?(o=Oc(f[a],i),u=Oc(f[a+2],Vt),a+=3):f[a+3]==="/"&&f[a+1]===" "&&(s=Oc(f[a],i),o=Oc(f[a+2],i),u=Oc(f[a+4],Vt),a+=5),f.length<=a)n=u*c,i=r=l+n*s+c*o;else throw Fh()}else if(typeof t=="bigint")r=t,i=t,n=Vt;else throw Fh();if(n===ot)throw cV();Ue.s=i<ot?-Vt:Vt,Ue.n=r<ot?-r:r,Ue.d=n<ot?-n:n};function mqe(t,e,r){let n=Vt;for(;e>ot;t=t*t%r,e>>=Vt)e&Vt&&(n=n*t%r);return n}function gqe(t,e){for(;e%Li===ot;e/=Li);for(;e%Xy===ot;e/=Xy);if(e===Vt)return ot;let r=Ps%e,n=1;for(;r!==Vt;n++)if(r=r*Ps%e,n>dqe)return ot;return BigInt(n)}function vqe(t,e,r){let n=Vt,i=mqe(Ps,r,e);for(let a=0;a<300;a++){if(n===i)return BigInt(a);n=n*Ps%e,i=i*Ps%e}return 0}function wm(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Ho(t,e){if(Ti(t,e),this instanceof Ho)t=wm(Ue.d,Ue.n),this.s=Ue.s,this.n=Ue.n/t,this.d=Ue.d/t;else return Jr(Ue.s*Ue.n,Ue.d)}const cV=function(){return new Error("Division by Zero")},Fh=function(){return new Error("Invalid argument")},MG=function(){return new Error("Parameters must be integer")};Ho.prototype={s:Vt,n:ot,d:Vt,abs:function(){return Jr(this.n,this.d)},neg:function(){return Jr(-this.s*this.n,this.d)},add:function(t,e){return Ti(t,e),Jr(this.s*this.n*Ue.d+Ue.s*this.d*Ue.n,this.d*Ue.d)},sub:function(t,e){return Ti(t,e),Jr(this.s*this.n*Ue.d-Ue.s*this.d*Ue.n,this.d*Ue.d)},mul:function(t,e){return Ti(t,e),Jr(this.s*Ue.s*this.n*Ue.n,this.d*Ue.d)},div:function(t,e){return Ti(t,e),Jr(this.s*Ue.s*this.n*Ue.d,this.d*Ue.n)},clone:function(){return Jr(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Jr(this.s*this.n%this.d,Vt);if(Ti(t,e),ot===Ue.n*this.d)throw cV();return Jr(this.s*(Ue.d*this.n)%(Ue.n*this.d),Ue.d*this.d)},gcd:function(t,e){return Ti(t,e),Jr(wm(Ue.n,this.n)*wm(Ue.d,this.d),Ue.d*this.d)},lcm:function(t,e){return Ti(t,e),Ue.n===ot&&this.n===ot?Jr(ot,Vt):Jr(Ue.n*this.n,wm(Ue.n,this.n)*wm(Ue.d,this.d))},inverse:function(){return Jr(this.s*this.d,this.n)},pow:function(t,e){if(Ti(t,e),Ue.d===Vt)return Ue.s<ot?Jr((this.s*this.d)**Ue.n,this.n**Ue.n):Jr((this.s*this.n)**Ue.n,this.d**Ue.n);if(this.s<ot)return null;let r=ly(this.n),n=ly(this.d),i=Vt,a=Vt;for(let s in r)if(s!=="1"){if(s==="0"){i=ot;break}if(r[s]*=Ue.n,r[s]%Ue.d===ot)r[s]/=Ue.d;else return null;i*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=Ue.n,n[s]%Ue.d===ot)n[s]/=Ue.d;else return null;a*=BigInt(s)**n[s]}return Ue.s<ot?Jr(a,i):Jr(i,a)},log:function(t,e){if(Ti(t,e),this.s<=ot||Ue.s<=ot)return null;const r=Object.create(null),n=ly(Ue.n),i=ly(Ue.d),a=ly(this.n),s=ly(this.d);for(const u in i)n[u]=(n[u]||ot)-i[u];for(const u in s)a[u]=(a[u]||ot)-s[u];for(const u in n)u!=="1"&&(r[u]=!0);for(const u in a)u!=="1"&&(r[u]=!0);let o=null,l=null;for(const u in r){const c=n[u]||ot,f=a[u]||ot;if(c===ot){if(f!==ot)return null;continue}let h=f,d=c;const p=wm(h,d);if(h/=p,d/=p,o===null&&l===null)o=h,l=d;else if(h*l!==o*d)return null}return o!==null&&l!==null?Jr(o,l):null},equals:function(t,e){return Ti(t,e),this.s*this.n*Ue.d===Ue.s*Ue.n*this.d},lt:function(t,e){return Ti(t,e),this.s*this.n*Ue.d<Ue.s*Ue.n*this.d},lte:function(t,e){return Ti(t,e),this.s*this.n*Ue.d<=Ue.s*Ue.n*this.d},gt:function(t,e){return Ti(t,e),this.s*this.n*Ue.d>Ue.s*Ue.n*this.d},gte:function(t,e){return Ti(t,e),this.s*this.n*Ue.d>=Ue.s*Ue.n*this.d},compare:function(t,e){Ti(t,e);let r=this.s*this.n*Ue.d-Ue.s*Ue.n*this.d;return(ot<r)-(r<ot)},ceil:function(t){return t=Ps**BigInt(t||0),Jr(Ol(this.s*t*this.n/this.d)+(t*this.n%this.d>ot&&this.s>=ot?Vt:ot),t)},floor:function(t){return t=Ps**BigInt(t||0),Jr(Ol(this.s*t*this.n/this.d)-(t*this.n%this.d>ot&&this.s<ot?Vt:ot),t)},round:function(t){return t=Ps**BigInt(t||0),Jr(Ol(this.s*t*this.n/this.d)+this.s*((this.s>=ot?Vt:ot)+Li*(t*this.n%this.d)>this.d?Vt:ot),t)},roundTo:function(t,e){Ti(t,e);const r=this.n*Ue.d,n=this.d*Ue.n,i=r%n;let a=Ol(r/n);return i+i>=n&&a++,Jr(this.s*a*Ue.n,Ue.d)},divisible:function(t,e){return Ti(t,e),Ue.n===ot?!1:this.n*Ue.d%(Ue.n*this.d)===ot},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=gqe(e,r),i=vqe(e,r,n),a=this.s<ot?"-":"";if(a+=Ol(e/r),e%=r,e*=Ps,e&&(a+="."),n){for(let s=i;s--;)a+=Ol(e/r),e%=r,e*=Ps;a+="(";for(let s=n;s--;)a+=Ol(e/r),e%=r,e*=Ps;a+=")"}else for(let s=t;e&&s--;)a+=Ol(e/r),e%=r,e*=Ps;return a},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<ot?"-":"";if(r===Vt)n+=e;else{const i=Ol(e/r);t&&i>ot&&(n+=i,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<ot?"-":"";if(r===Vt)n+=e;else{const i=Ol(e/r);t&&i>ot&&(n+=i,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(Ol(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let a=Jr(n[i-1],Vt);for(let o=i-2;o>=0;o--)a=a.inverse().add(n[o]);let s=a.sub(r);if(s.n*e<s.d)return a.mul(this.s)}return this}};var yqe="Fraction",bqe=[],wqe=Y(yqe,bqe,()=>(Object.defineProperty(Ho,"name",{value:"Fraction"}),Ho.prototype.constructor=Ho,Ho.prototype.type="Fraction",Ho.prototype.isFraction=!0,Ho.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Ho.fromJSON=function(t){return new Ho(t)},Ho),{isClass:!0}),xqe="Range",Aqe=[],_qe=Y(xqe,Aqe,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=r!=null,s=n!=null;if(i){if(St(e))e=e.toNumber();else if(typeof e!="number"&&!Kx(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(St(r))r=r.toNumber();else if(typeof r!="number"&&!Kx(r))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(St(n))n=n.toNumber();else if(typeof n!="number"&&!Kx(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=a?parseFloat(r):0,this.step=s?parseFloat(n):1,s&&qi(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,i=this.end,a=i-r;return Wd(n)===Wd(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;r<i;)e(r,[a],this),r+=n,a++;else if(n<0)for(;r>i;)e(r,[a],this),r+=n,a++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,i,a){r[i[0]]=e(n,i,a)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=sv(this.start,e);return this.step!==1&&(r+=":"+sv(this.step,e)),r+=":"+sv(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),Eqe="Matrix",Sqe=[],Cqe=Y(Eqe,Sqe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function DR(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!nt(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Tqe(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=Hhe(e);switch(r){case"fixed":return Nqe(t,n);case"exponential":return IG(t,n);case"engineering":return Dqe(t,n);case"bin":return DR(t,2,i);case"oct":return DR(t,8,i);case"hex":return DR(t,16,i);case"auto":{var a=OG(e==null?void 0:e.lowerExp,-3),s=OG(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,l=t.toSignificantDigits(n),u=l.e;return u>=a&&u<s?o=l.toFixed():o=IG(t,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Dqe(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var s=t.constructor;a=new s(a).toFixed()}return a+"e"+(r>=0?"+":"")+n.toString()}function IG(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Nqe(t,e){return t.toFixed(e)}function OG(t,e){return lt(t)?t:St(t)?t.toNumber():e}function Pqe(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function Ft(t,e){var r=Mqe(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Mqe(t,e){if(typeof t=="number")return sv(t,e);if(St(t))return Tqe(t,e);if(Iqe(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return sde(t,e);if(Pn(t))return Yy(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>Yy(n)+": "+Ft(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Yy(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);r+=i in kG?kG[i]:i,n++}return'"'+r+'"'}var kG={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ll(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function sde(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=sde(t[i],e);return r+="]",r}else return Ft(t,e)}function Iqe(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function u4(t,e){if(!Pn(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+br(t)+", index: 0)");if(!Pn(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+br(e)+", index: 1)");return t===e?0:t>e?1:-1}function kt(t,e,r){if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}kt.prototype=new RangeError;kt.prototype.constructor=RangeError;kt.prototype.name="DimensionError";kt.prototype.isDimensionError=!0;function yu(t,e,r){if(!(this instanceof yu))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}yu.prototype=new RangeError;yu.prototype.constructor=RangeError;yu.prototype.name="IndexError";yu.prototype.isIndexError=!0;function xt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function ode(t,e,r){var n,i=t.length;if(i!==e[r])throw new kt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var s=t[n];if(!Array.isArray(s))throw new kt(e.length-1,e.length,"<");ode(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new kt(e.length+1,e.length,">")}function RG(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new kt(t.length,0)}else ode(t,e,0)}function dP(t,e){var r=t.isMatrix?t._size:xt(t),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==r[a])throw new kt(i,r[a])})}function Pr(t,e){if(t!==void 0){if(!lt(t)||!nt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new yu(t,e)}}function vw(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&vr(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(Pn(r)&&r.length===0)return!0}return!1}function yw(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!lt(i)||!nt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(e)+")")}),(lt(t)||St(t))&&(t=[t]);var n=r!==void 0?r:0;return c4(t,e,0,n),t}function c4(t,e,r,n){var i,a,s=t.length,o=e[r],l=Math.min(s,o);if(t.length=o,r<e.length-1){var u=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),c4(a,e,u,n);for(i=l;i<o;i++)a=[],t[i]=a,c4(a,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<o;i++)t[i]=n}}function fV(t,e){var r=er(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new kt(0,n,"!=");e=hV(e,n);var i=lde(e);if(n!==i)throw new kt(i,n,"!=");try{return Oqe(r,e)}catch(a){throw a instanceof kt?new kt(i,n,"!="):a}}function hV(t,e){var r=lde(t),n=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,l=e%r===0;if(o)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function lde(t){return t.reduce((e,r)=>e*r,1)}function Oqe(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=r.length/a,o=0;o<s;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function pP(t,e){for(var r=xt(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=ude(t,n,0),r.length=n),t}function ude(t,e,r){var n,i;if(r<e){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=ude(t[n],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function cde(t,e,r,n){var i=n||xt(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=fde(t,e,0);i.length<e;)i.push(1);return t}function fde(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=fde(t[n],e,a)}else for(var s=r;s<e;s++)t=[t];return t}function er(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?i(t):n(t),r;function n(a){for(var s=0;s<a.length;s++){var o=a[s];Array.isArray(o)?n(o):r.push(o)}}function i(a){if(Array.isArray(a[0]))for(var s=0;s<a.length;s++)i(a[s]);else for(var o=0;o<a.length;o++)r.push(a[o])}}function lp(t,e){return Array.prototype.map.call(t,e)}function hde(t,e){Array.prototype.forEach.call(t,e)}function FG(t,e){if(xt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function LG(t,e){if(xt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function BG(t,e){return Array.prototype.join.call(t,e)}function bw(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function mP(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function dO(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?dO(a,e):e(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function dde(t,e,r,n){if(n<r){if(t.length!==e.length)throw new kt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=dde(t[a],e[a],r,n+1);return i}else return t.concat(e)}function pde(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return dde(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function gP(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(h=>h.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],l=n[s],u=0;u<l;u++){var c=i-l+u;o[u]>a[c]&&(a[c]=o[u])}for(var f=0;f<e.length;f++)mde(e[f],a);return a}function mde(t,e){for(var r=e.length,n=t.length,i=0;i<n;i++){var a=r-n+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[i]," to size ").concat(e[a]))}}function km(t,e){var r=xt(t);if(dh(r,e))return t;mde(r,e);var n=gP(r,e),i=n.length,a=[...Array(i-r.length).fill(1),...r],s=Rqe(t);r.length<i&&(s=fV(s,a),r=xt(s));for(var o=0;o<i;o++)r[o]<n[o]&&(s=kqe(s,n[o],o),r=xt(s));return s}function kqe(t,e,r){return pde(...Array(e).fill(t),r)}function vP(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=xt(t);if(e.length!==r.length)throw new kt(e.length,r.length);for(var n=0;n<e.length;n++)Pr(e[n],r[n]);return e.reduce((i,a)=>i[a],t)}function f4(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return a(t);var n=[];return i(t,0);function i(s,o){if(Array.isArray(s)){for(var l=s.length,u=Array(l),c=0;c<l;c++)n[o]=c,u[c]=i(s[c],o+1);return u}else return e(s,n.slice(0,o),t)}function a(s){if(Array.isArray(s)){for(var o=s.length,l=Array(o),u=0;u<o;u++)l[u]=a(s[u]);return l}else return e(s)}}function gde(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){a(t);return}var n=[];i(t,0);function i(s,o){if(Array.isArray(s))for(var l=s.length,u=0;u<l;u++)n[o]=u,i(s[u],o+1);else e(s,n.slice(0,o),t)}function a(s){if(Array.isArray(s))for(var o=s.length,l=0;l<o;l++)a(s[l]);else e(s)}}function Rqe(t){return jn([],t)}function Dv(t,e,r,n){if(uP.isTypedFunction(t)){var i;if(n)i=1;else{var a=e.isMatrix?e.size():xt(e),s=a.length?a[a.length-1]===0:!0;if(s)return{isUnary:n,fn:t};var o=a.map(()=>0),l=e.isMatrix?e.get(o):vP(e,o);i=Bqe(t,l,o,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=Fqe(t,i);u=c!==void 0?c:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return $G(u,d.slice(0,i),r,t.name)}}:{isUnary:!1,fn:function(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return $G(u,d,r,t.name)}}}return n===void 0?{isUnary:Lqe(t),fn:t}:{isUnary:n,fn:t}}function Fqe(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[i,a]=n;i.split(",").length===e&&r.push(a)}),r.length===1)return r[0]}function Lqe(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function Bqe(t,e,r,n){for(var i=[e,r,n],a=3;a>0;a--){var s=i.slice(0,a);if(uP.resolve(t,s)!==null)return a}}function $G(t,e,r,n){try{return t(...e)}catch(i){$qe(i,e,r,n)}}function $qe(t,e,r,n){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(br(e[0]))),e.length>=2&&a.push("index: ".concat(br(e[1]))),e.length>=3&&a.push("array: ".concat(br(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var jqe="DenseMatrix",Vqe=["Matrix","config"],Uqe=Y(jqe,Vqe,t=>{var{Matrix:e,config:r}=t;function n(f,h){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Pn(h))throw new Error("Invalid datatype: "+h);if(ft(f))f.type==="DenseMatrix"?(this._data=wt(f._data),this._size=wt(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&vr(f.data)&&vr(f.size))this._data=f.data,this._size=f.size,RG(this._data,this._size),this._datatype=h||f.datatype;else if(vr(f))this._data=c(f),this._size=xt(this._data),RG(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+br(f)+")");this._data=[],this._size=[0],this._datatype=h}}n.prototype=new e,n.prototype.createDenseMatrix=function(f,h){return new n(f,h)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return dO(this._data,br)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(f,h){return new n(f,h)},n.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return i(this,f);case 2:case 3:return s(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(f){return vP(this._data,f)},n.prototype.set=function(f,h,d){if(!vr(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new kt(f.length,this._size.length,"<");var p,m,v,y=f.map(function(b){return b+1});u(this,y,d);var w=this._data;for(p=0,m=f.length-1;p<m;p++)v=f[p],Pr(v,w.length),w=w[v];return v=f[f.length-1],Pr(v,w.length),w[v]=h,this};function i(f,h){if(!sO(h))throw new TypeError("Invalid index");var d=r.legacySubset?h.size().every(x=>x===1):h.isScalar();if(d)return f.get(h.min());var p=h.size();if(p.length!==f._size.length)throw new kt(p.length,f._size.length);for(var m=h.min(),v=h.max(),y=0,w=f._size.length;y<w;y++)Pr(m[y],f._size[y]),Pr(v[y],f._size[y]);var b=new n,_=a(f._data,h);return b._size=_.size,b._datatype=f._datatype,b._data=_.data,r.legacySubset?b.reshape(h.size()):b}function a(f,h){var d=h.size().length-1,p=Array(d);return{data:m(f),size:p.filter(v=>v!==null)};function m(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=h.dimension(y);function b(_,x){return lt(_)?x(_):_.map(x).valueOf()}return lt(w)?p[y]=null:p[y]=w.size()[0],y<d?b(w,_=>(Pr(_,v.length),m(v[_],y+1))):b(w,_=>(Pr(_,v.length),v[_]))}}function s(f,h,d,p){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var m=h.size(),v=h.isScalar(),y;if(ft(d)?(y=d.size(),d=d.valueOf()):y=xt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,p)}else{if(!dh(y,m)){if(y.length===0)d=km([d],m);else try{d=km(d,m)}catch{}y=xt(d)}if(m.length<f._size.length)throw new kt(m.length,f._size.length,"<");if(y.length<m.length){for(var w=0,b=0;m[w]===1&&y[w]===1;)w++;for(;m[w]===1;)b++,w++;d=cde(d,m.length,b,y)}if(!dh(m,y))throw new kt(m,y,">");var _=h.max().map(function(x){return x+1});u(f,_,p),o(f._data,h,d)}return f}function o(f,h,d){var p=h.size().length-1;m(f,d);function m(v,y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=h.dimension(w),_=(A,E)=>{Pr(A,v.length),m(v[A],y[E[0]],w+1)},x=(A,E)=>{Pr(A,v.length),v[A]=y[E[0]]};w<p?lt(b)?_(b,[0]):b.forEach(_):lt(b)?x(b,[0]):b.forEach(x)}}n.prototype.resize=function(f,h,d){if(!Do(f))throw new TypeError("Array or Matrix expected");var p=f.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return l(m,p,h)};function l(f,h,d){if(h.length===0){for(var p=f._data;vr(p);)p=p[0];return p}return f._size=h.slice(0),f._data=yw(f._data,f._size,d),f}n.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=fV(d._data,f);var p=d._size.reduce((m,v)=>m*v);return d._size=hV(f,p),d};function u(f,h,d){for(var p=f._size.slice(0),m=!1;p.length<h.length;)p.push(0),m=!0;for(var v=0,y=h.length;v<y;v++)h[v]>p[v]&&(p[v]=h[v],m=!0);m&&l(f,p,d)}n.prototype.clone=function(){var f=new n({data:wt(this._data),size:wt(this._size),datatype:this._datatype});return f},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return d.clone();var m=Dv(f,d,"map",h),v=m.fn,y=d.create(void 0,d._datatype);if(y._size=d._size,h||m.isUnary)return y._data=E(d._data),y;if(p===0){for(var w=d.valueOf(),b=Array(w.length),_=0;_<w.length;_++)b[_]=v(w[_],[_],d);return y._data=b,y}var x=[];return y._data=A(d._data),y;function A(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(S.length);if(C<p)for(var N=0;N<S.length;N++)x[C]=N,D[N]=A(S[N],C+1);else for(var P=0;P<S.length;P++)x[C]=P,D[P]=v(S[P],x.slice(),d);return D}function E(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(S.length);if(C<p)for(var N=0;N<S.length;N++)D[N]=E(S[N],C+1);else for(var P=0;P<S.length;P++)D[P]=v(S[P]);return D}},n.prototype.forEach=function(f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,p=d._size.length-1;if(p<0)return;var m=Dv(f,d,"map",h),v=m.fn;if(h||m.isUnary){_(d._data);return}if(p===0){for(var y=0;y<d._data.length;y++)v(d._data[y],[y],d);return}var w=[];b(d._data);function b(x){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<p)for(var E=0;E<x.length;E++)w[A]=E,b(x[E],A+1);else for(var S=0;S<x.length;S++)w[A]=S,v(x[S],w.slice(),d)}function _(x){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<p)for(var E=0;E<x.length;E++)_(x[E],A+1);else for(var S=0;S<x.length;S++)v(x[S])}},n.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var h=0;h<this._data.length;h++)yield{value:this._data[h],index:[h]};return}for(var d=Array(f+1).fill(0),p=this._size.reduce((b,_)=>b*_,1),m=0;m<p;m++){for(var v=this._data,y=0;y<f;y++)v=v[d[y]];yield{value:v[d[f]],index:d.slice()};for(var w=f;w>=0&&(d[w]++,!(d[w]<this._size[w]));w--)d[w]=0}}},n.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var p of d)f.push(new n([p],this._datatype));return f},n.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,m=function(w){var b=p.map(_=>[_[w]]);h.push(new n(b,f._datatype))},v=0;v<d[1];v++)m(v);return h},n.prototype.toArray=function(){return wt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(f){return Ft(this._data,f)},n.prototype.toString=function(){return Ft(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(f){if(f){if(St(f)&&(f=f.toNumber()),!lt(f)||!nt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,p=this._size[0],m=this._size[1],v=Math.min(p-d,m-h),y=[],w=0;w<v;w++)y[w]=this._data[w+d][w+h];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(f,h,d,p){if(!vr(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(S){if(St(S)&&(S=S.toNumber()),!lt(S)||!nt(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(St(d)&&(d=d.toNumber()),!lt(d)||!nt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=f[0],w=f[1],b=Math.min(y-v,w-m),_;if(vr(h)){if(h.length!==b)throw new Error("Invalid value array length");_=function(C){return h[C]}}else if(ft(h)){var x=h.size();if(x.length!==1||x[0]!==b)throw new Error("Invalid matrix length");_=function(C){return h.get([C])}}else _=function(){return h};p||(p=St(_(0))?_(0).mul(0):0);var A=[];if(f.length>0){A=yw(A,f,p);for(var E=0;E<b;E++)A[E+v][E+m]=_(E)}return new n({data:A,size:[y,w]})},n.fromJSON=function(f){return new n(f)},n.prototype.swapRows=function(f,h){if(!lt(f)||!nt(f)||!lt(h)||!nt(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pr(f,this._size[0]),Pr(h,this._size[0]),n._swapRows(f,h,this._data),this},n._swapRows=function(f,h,d){var p=d[f];d[f]=d[h],d[h]=p};function c(f){return ft(f)?c(f.valueOf()):vr(f)?f.map(c):f}return n},{isClass:!0}),jG="clone",zqe=["typed"],qqe=Y(jG,zqe,t=>{var{typed:e}=t;return e(jG,{any:wt})});function vde(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var s=[];for(n=0;n<e;n++)s.push(t[n][i]);a.push(s)}return a}function Kw(t){for(var e=0;e<t.length;e++)if(Do(t[e]))return!0;return!1}function Pp(t,e){ft(t)?t.forEach(r=>e(r),!1,!0):gde(t,e,!0)}function Ct(t,e,r){if(!r)return ft(t)?t.map(i=>e(i),!1,!0):f4(t,e,!0);var n=i=>i===0?i:e(i);return ft(t)?t.map(i=>n(i),!1,!0):f4(t,n,!0)}function pO(t,e,r){var n=Array.isArray(t)?xt(t):t.size();if(e<0||e>=n.length)throw new yu(e,n.length);return ft(t)?t.create(yP(t.valueOf(),e,r),t.datatype()):yP(t,e,r)}function yP(t,e,r){var n,i,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=vde(t),i=[],n=0;n<s.length;n++)i[n]=yP(s[n],e-1,r);return i}else{for(a=t[0],n=1;n<t.length;n++)a=r(a,t[n]);return a}else{for(i=[],n=0;n<t.length;n++)i[n]=yP(t[n],e-1,r);return i}}function VG(t,e,r,n,i,a,s,o,l,u,c){var f=t._values,h=t._index,d=t._ptr,p,m,v,y;if(n)for(m=d[e],v=d[e+1],p=m;p<v;p++)y=h[p],r[y]!==a?(r[y]=a,s.push(y),n[y]=f[p]):(n[y]=o(n[y],f[p]),i[y]=a);else for(m=d[e],v=d[e+1],p=m;p<v;p++)y=h[p],r[y]!==a?(r[y]=a,s.push(y)):i[y]=a}var UG="isInteger",Hqe=["typed","equal"],Wqe=Y(UG,Hqe,t=>{var{typed:e,equal:r}=t;return e(UG,{number:n=>Number.isFinite(n)?r(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?r(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),bu="number",Xw="number, number";function yde(t){return Math.abs(t)}yde.signature=bu;function bde(t,e){return t+e}bde.signature=Xw;function wde(t,e){return t-e}wde.signature=Xw;function xde(t,e){return t*e}xde.signature=Xw;function Ade(t){return-t}Ade.signature=bu;function _de(t){return t}_de.signature=bu;function Sx(t){return K9e(t)}Sx.signature=bu;function Ede(t){return t*t*t}Ede.signature=bu;function Sde(t){return Math.exp(t)}Sde.signature=bu;function Cde(t){return X9e(t)}Cde.signature=bu;function Tde(t,e){if(!nt(t)||!nt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}Tde.signature=Xw;function zG(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function bP(t){return W9e(t)}bP.signature=bu;function h4(t){return H9e(t)}h4.signature=bu;function qG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function d4(t){return Wd(t)}d4.signature=bu;function Dde(t){return t*t}Dde.signature=bu;function Nde(t,e){var r,n,i,a=0,s=1,o=1,l=0;if(!nt(t)||!nt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),i=t-n*e,r=a,a=s-n*a,s=r,r=o,o=l-n*o,l=r,t=e,e=i;var u;return t<0?u=[-t,-s,-l]:u=[t,t?s:0,l],u}Nde.signature=Xw;function Pde(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}Pde.signature=Xw;function U1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!nt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Whe(t,e))}var Gqe="number",Yw="number, number";function Mde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitAnd");return t&e}Mde.signature=Yw;function Ide(t){if(!nt(t))throw new Error("Integer expected in function bitNot");return~t}Ide.signature=Gqe;function Ode(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitOr");return t|e}Ode.signature=Yw;function kde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function bitXor");return t^e}kde.signature=Yw;function Rde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function leftShift");return t<<e}Rde.signature=Yw;function Fde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}Fde.signature=Yw;function Lde(t,e){if(!nt(t)||!nt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}Lde.signature=Yw;function kf(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return kf(t,r)*kf(r+1,e)}function Bde(t,e){if(!nt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!nt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=e<r?r+1:e+1,a=2,s=e<r?e:r,o=i;o<=t;++o)for(n*=o;a<=s&&n%a===0;)n/=a,++a;return a<=s&&(n/=kf(a,s)),n}Bde.signature="number, number";var Kqe=Math.PI,Xqe=2*Math.PI,Yqe=Math.E,Qqe=1.618033988749895,Zqe="number",dV="number, number";function $de(t){return!t}$de.signature=Zqe;function p4(t,e){return!!(t||e)}p4.signature=dV;function m4(t,e){return!!t!=!!e}m4.signature=dV;function g4(t,e){return!!(t&&e)}g4.signature=dV;function wP(t){var e;if(nt(t))return t<=0?Number.isFinite(t)?1/0:NaN:t>171?1/0:kf(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*wP(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,i=n*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=v0[0];for(var s=1;s<v0.length;++s)e+=v0[s]/(t+s);var o=t+jde+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}wP.signature="number";var jde=4.7421875,v0=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Vde=.9189385332046728,Jqe=5,eHe=7,HG=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function xP(t){if(t<0)return NaN;if(t===0)return 1/0;if(!Number.isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-xP(1-t);t=t-1;for(var e=t+Jqe+.5,r=HG[0],n=eHe-1;n>=1;n--)r+=HG[n]/(t+n);return Vde+(t+.5)*Math.log(e)-e+Math.log(r)}xP.signature="number";var za="number";function Ude(t){return J9e(t)}Ude.signature=za;function zde(t){return Math.atan(1/t)}zde.signature=za;function qde(t){return Number.isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}qde.signature=za;function Hde(t){return Math.asin(1/t)}Hde.signature=za;function Wde(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}Wde.signature=za;function Gde(t){return Math.acos(1/t)}Gde.signature=za;function Kde(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}Kde.signature=za;function Xde(t){return e7e(t)}Xde.signature=za;function Yde(t){return t7e(t)}Yde.signature=za;function Qde(t){return 1/Math.tan(t)}Qde.signature=za;function Zde(t){var e=Math.exp(2*t);return(e+1)/(e-1)}Zde.signature=za;function Jde(t){return 1/Math.sin(t)}Jde.signature=za;function epe(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Wd(t)}epe.signature=za;function tpe(t){return 1/Math.cos(t)}tpe.signature=za;function rpe(t){return 2/(Math.exp(t)+Math.exp(-t))}rpe.signature=za;function npe(t){return n7e(t)}npe.signature=za;var pV="number";function ipe(t){return t<0}ipe.signature=pV;function ape(t){return t>0}ape.signature=pV;function spe(t){return Number.isNaN(t)}spe.signature=pV;function El(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var WG="isNegative",tHe=["typed","config"],rHe=Y(WG,tHe,t=>{var{typed:e,config:r}=t;return e(WG,{number:n=>qi(n,0,r.relTol,r.absTol)?!1:ipe(n),BigNumber:n=>El(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),GG="isNumeric",nHe=["typed"],iHe=Y(GG,nHe,t=>{var{typed:e}=t;return e(GG,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),KG="hasNumericValue",aHe=["typed","isNumeric"],sHe=Y(KG,aHe,t=>{var{typed:e,isNumeric:r}=t;return e(KG,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return r(i)}})}),XG="isPositive",oHe=["typed","config"],lHe=Y(XG,oHe,t=>{var{typed:e,config:r}=t;return e(XG,{number:n=>qi(n,0,r.relTol,r.absTol)?!1:ape(n),BigNumber:n=>El(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),YG="isZero",uHe=["typed","equalScalar"],cHe=Y(YG,uHe,t=>{var{typed:e,equalScalar:r}=t;return e(YG,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),QG="isNaN",fHe=["typed"],hHe=Y(QG,fHe,t=>{var{typed:e}=t;return e(QG,{number:spe,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),ZG="isBounded",dHe=["typed"],pHe=Y(ZG,dHe,t=>{var{typed:e}=t;return e(ZG,{number:r=>Number.isFinite(r),"BigNumber | Complex":r=>r.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(r=>n=>r(n.value)),"Array | Matrix":e.referToSelf(r=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(i=>r(i))))})}),JG="isFinite",mHe=["typed","isBounded","map"],gHe=Y(JG,mHe,t=>{var{typed:e,isBounded:r,map:n}=t;return e(JG,{"Array | Matrix":i=>n(i,r),any:i=>r(i)})}),eK="typeOf",vHe=["typed"],yHe=Y(eK,vHe,t=>{var{typed:e}=t;return e(eK,{any:br})});function bHe(t,e,r,n){return qi(t.re,e.re,r,n)&&qi(t.im,e.im,r,n)}var Qw=Y("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),AP="equalScalar",wHe=["typed","config"],xHe=Y(AP,wHe,t=>{var{typed:e,config:r}=t,n=Qw({typed:e});return e(AP,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return qi(a,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||El(a,s,r.relTol,r.absTol)},"bigint, bigint":function(a,s){return a===s},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return bHe(a,s,r.relTol,r.absTol)}},n)});Y(AP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(AP,{"number, number":function(i,a){return qi(i,a,r.relTol,r.absTol)}})});var AHe="SparseMatrix",_He=["typed","equalScalar","Matrix"],EHe=Y(AHe,_He,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(m,v){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(v&&!Pn(v))throw new Error("Invalid datatype: "+v);if(ft(m))a(this,m,v);else if(m&&vr(m.index)&&vr(m.ptr)&&vr(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=v||m.datatype;else if(vr(m))s(this,m,v);else{if(m)throw new TypeError("Unsupported type of data ("+br(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=v}}function a(m,v,y){v.type==="SparseMatrix"?(m._values=v._values?wt(v._values):void 0,m._index=wt(v._index),m._ptr=wt(v._ptr),m._size=wt(v._size),m._datatype=y||v._datatype):s(m,v.valueOf(),y||v._datatype)}function s(m,v,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var w=v.length,b=0,_=r,x=0;if(Pn(y)&&(_=e.find(r,[y,y])||r,x=e.convert(0,y)),w>0){var A=0;do{m._ptr.push(m._index.length);for(var E=0;E<w;E++){var S=v[E];if(vr(S)){if(A===0&&b<S.length&&(b=S.length),A<S.length){var C=S[A];_(C,x)||(m._values.push(C),m._index.push(E))}}else A===0&&b<1&&(b=1),_(S,x)||(m._values.push(S),m._index.push(E))}A++}while(A<b)}for(;m._ptr.length<=b;)m._ptr.push(m._index.length);m._size=[w,b]}i.prototype=new n,i.prototype.createSparseMatrix=function(m,v){return new i(m,v)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return dO(this._values,br)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,v){return new i(m,v)},i.prototype.density=function(){var m=this._size[0],v=this._size[1];return m!==0&&v!==0?this._index.length/(m*v):0},i.prototype.subset=function(m,v,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,m);case 2:case 3:return l(this,m,v,y);default:throw new SyntaxError("Wrong number of arguments")}};function o(m,v){if(!sO(v))throw new TypeError("Invalid index");var y=v.isScalar();if(y)return m.get(v.min());var w=v.size();if(w.length!==m._size.length)throw new kt(w.length,m._size.length);var b,_,x,A,E=v.min(),S=v.max();for(b=0,_=m._size.length;b<_;b++)Pr(E[b],m._size[b]),Pr(S[b],m._size[b]);var C=m._values,D=m._index,N=m._ptr,P=v.dimension(0),M=v.dimension(1),j=[],K=[];function k(le,re){K[le]=re[0],j[le]=!0}Number.isInteger(P)?k(P,[0]):P.forEach(k);var V=C?[]:void 0,q=[],H=[];function ee(le){for(H.push(q.length),x=N[le],A=N[le+1];x<A;x++)b=D[x],j[b]===!0&&(q.push(K[b]),V&&V.push(C[x]))}return Number.isInteger(M)?ee(M):M.forEach(ee),H.push(q.length),new i({values:V,index:q,ptr:H,size:w,datatype:m._datatype})}function l(m,v,y,w){if(!v||v.isIndex!==!0)throw new TypeError("Invalid index");var b=v.size(),_=v.isScalar(),x;if(ft(y)?(x=y.size(),y=y.toArray()):x=xt(y),_){if(x.length!==0)throw new TypeError("Scalar expected");m.set(v.min(),y,w)}else{if(b.length!==1&&b.length!==2)throw new kt(b.length,m._size.length,"<");if(x.length<b.length){for(var A=0,E=0;b[A]===1&&x[A]===1;)A++;for(;b[A]===1;)E++,A++;y=cde(y,b.length,E,x)}if(!dh(b,x))throw new kt(b,x,">");if(b.length===1){var S=v.dimension(0);N(S,(P,M)=>{Pr(P),m.set([P,0],y[M[0]],w)})}else{var C=v.dimension(0),D=v.dimension(1);N(C,(P,M)=>{Pr(P),N(D,(j,K)=>{Pr(j),m.set([P,j],y[M[0]][K[0]],w)})})}}return m;function N(P,M){lt(P)?M(P,[0]):P.forEach(M)}}i.prototype.get=function(m){if(!vr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new kt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var v=m[0],y=m[1];Pr(v,this._size[0]),Pr(y,this._size[1]);var w=u(v,this._ptr[y],this._ptr[y+1],this._index);return w<this._ptr[y+1]&&this._index[w]===v?this._values[w]:0},i.prototype.set=function(m,v,y){if(!vr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new kt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=m[0],b=m[1],_=this._size[0],x=this._size[1],A=r,E=0;Pn(this._datatype)&&(A=e.find(r,[this._datatype,this._datatype])||r,E=e.convert(0,this._datatype)),(w>_-1||b>x-1)&&(h(this,Math.max(w+1,_),Math.max(b+1,x),y),_=this._size[0],x=this._size[1]),Pr(w,_),Pr(b,x);var S=u(w,this._ptr[b],this._ptr[b+1],this._index);return S<this._ptr[b+1]&&this._index[S]===w?A(v,E)?c(S,b,this._values,this._index,this._ptr):this._values[S]=v:A(v,E)||f(S,w,b,v,this._values,this._index,this._ptr),this};function u(m,v,y,w){if(y-v===0)return y;for(var b=v;b<y;b++)if(w[b]===m)return b;return v}function c(m,v,y,w,b){y.splice(m,1),w.splice(m,1);for(var _=v+1;_<b.length;_++)b[_]--}function f(m,v,y,w,b,_,x){b.splice(m,0,w),_.splice(m,0,v);for(var A=y+1;A<x.length;A++)x[A]++}i.prototype.resize=function(m,v,y){if(!Do(m))throw new TypeError("Array or Matrix expected");var w=m.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(_){if(!lt(_)||!nt(_)||_<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(w)+")")});var b=y?this.clone():this;return h(b,w[0],w[1],v)};function h(m,v,y,w){var b=w||0,_=r,x=0;Pn(m._datatype)&&(_=e.find(r,[m._datatype,m._datatype])||r,x=e.convert(0,m._datatype),b=e.convert(b,m._datatype));var A=!_(b,x),E=m._size[0],S=m._size[1],C,D,N;if(y>S){for(D=S;D<y;D++)if(m._ptr[D]=m._values.length,A)for(C=0;C<E;C++)m._values.push(b),m._index.push(C);m._ptr[y]=m._values.length}else y<S&&(m._ptr.splice(y+1,S-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(S=y,v>E){if(A){var P=0;for(D=0;D<S;D++){m._ptr[D]=m._ptr[D]+P,N=m._ptr[D+1]+P;var M=0;for(C=E;C<v;C++,M++)m._values.splice(N+M,0,b),m._index.splice(N+M,0,C),P++}m._ptr[S]=m._values.length}}else if(v<E){var j=0;for(D=0;D<S;D++){m._ptr[D]=m._ptr[D]-j;var K=m._ptr[D],k=m._ptr[D+1]-j;for(N=K;N<k;N++)C=m._index[N],C>v-1&&(m._values.splice(N,1),m._index.splice(N,1),j++)}m._ptr[D]=m._values.length}return m._size[0]=v,m._size[1]=y,m}i.prototype.reshape=function(m,v){if(!vr(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(H){if(!lt(H)||!nt(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ft(m)+")")});var y=this._size[0]*this._size[1];m=hV(m,y);var w=m[0]*m[1];if(y!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=v?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var _=[],x=0;x<b._ptr.length;x++)for(var A=0;A<b._ptr[x+1]-b._ptr[x];A++)_.push(x);for(var E=b._values.slice(),S=b._index.slice(),C=0;C<b._index.length;C++){var D=S[C],N=_[C],P=D*b._size[1]+N;_[C]=P%m[1],S[C]=Math.floor(P/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var M=0;M<b._ptr.length;M++)b._ptr[M]=0;for(var j=0;j<E.length;j++){var K=S[j],k=_[j],V=E[j],q=u(K,b._ptr[k],b._ptr[k+1],b._index);f(q,K,k,V,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?wt(this._values):void 0,index:wt(this._index),ptr:wt(this._ptr),size:wt(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,v){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,w=this._size[0],b=this._size[1],_=Dv(m,y,"map"),x=function(E,S,C){return _.fn(E,[S,C],y)};return d(this,0,w-1,0,b-1,x,v)};function d(m,v,y,w,b,_,x){var A=[],E=[],S=[],C=r,D=0;Pn(m._datatype)&&(C=e.find(r,[m._datatype,m._datatype])||r,D=e.convert(0,m._datatype));for(var N=function(L,ie,X){var pe=_(L,ie,X);C(pe,D)||(A.push(pe),E.push(ie))},P=w;P<=b;P++){S.push(A.length);var M=m._ptr[P],j=m._ptr[P+1];if(x)for(var K=M;K<j;K++){var k=m._index[K];k>=v&&k<=y&&N(m._values[K],k-v,P-w)}else{for(var V={},q=M;q<j;q++){var H=m._index[q];V[H]=m._values[q]}for(var ee=v;ee<=y;ee++){var le=ee in V?V[ee]:0;N(le,ee-v,P-w)}}}return S.push(A.length),new i({values:A,index:E,ptr:S,size:[y-v+1,b-w+1]})}i.prototype.forEach=function(m,v){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,w=this._size[0],b=this._size[1],_=Dv(m,y,"forEach"),x=0;x<b;x++){var A=this._ptr[x],E=this._ptr[x+1];if(v)for(var S=A;S<E;S++){var C=this._index[S];_.fn(this._values[S],[C,x],y)}else{for(var D={},N=A;N<E;N++){var P=this._index[N];D[P]=this._values[N]}for(var M=0;M<w;M++){var j=M in D?D[M]:0;_.fn(j,[M,x],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],v=0;v<m;v++)for(var y=this._ptr[v],w=this._ptr[v+1],b=y;b<w;b++){var _=this._index[b];yield{value:this._values[b],index:[_,v]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,v,y,w,b){var _=w[0],x=w[1],A=[],E,S;for(E=0;E<_;E++)for(A[E]=[],S=0;S<x;S++)A[E][S]=0;for(S=0;S<x;S++)for(var C=y[S],D=y[S+1],N=C;N<D;N++)E=v[N],A[E][S]=m?b?wt(m[N]):m[N]:1;return A}return i.prototype.format=function(m){for(var v=this._size[0],y=this._size[1],w=this.density(),b="Sparse Matrix ["+Ft(v,m)+" x "+Ft(y,m)+"] density: "+Ft(w,m)+`
`,_=0;_<y;_++)for(var x=this._ptr[_],A=this._ptr[_+1],E=x;E<A;E++){var S=this._index[E];b+=`
    (`+Ft(S,m)+", "+Ft(_,m)+") ==> "+(this._values?Ft(this._values[E],m):"X")}return b},i.prototype.toString=function(){return Ft(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(St(m)&&(m=m.toNumber()),!lt(m)||!nt(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var v=m>0?m:0,y=m<0?-m:0,w=this._size[0],b=this._size[1],_=Math.min(w-y,b-v),x=[],A=[],E=[];E[0]=0;for(var S=v;S<b&&x.length<_;S++)for(var C=this._ptr[S],D=this._ptr[S+1],N=C;N<D;N++){var P=this._index[N];if(P===S-v+y){x.push(this._values[N]),A[x.length-1]=P-y;break}}return E.push(x.length),new i({values:x,index:A,ptr:E,size:[_,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,v,y,w,b){if(!vr(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(H){if(St(H)&&(H=H.toNumber()),!lt(H)||!nt(H)||H<1)throw new Error("Size values must be positive integers");return H}),y){if(St(y)&&(y=y.toNumber()),!lt(y)||!nt(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var _=r,x=0;Pn(b)&&(_=e.find(r,[b,b])||r,x=e.convert(0,b));var A=y>0?y:0,E=y<0?-y:0,S=m[0],C=m[1],D=Math.min(S-E,C-A),N;if(vr(v)){if(v.length!==D)throw new Error("Invalid value array length");N=function(ee){return v[ee]}}else if(ft(v)){var P=v.size();if(P.length!==1||P[0]!==D)throw new Error("Invalid matrix length");N=function(ee){return v.get([ee])}}else N=function(){return v};for(var M=[],j=[],K=[],k=0;k<C;k++){K.push(M.length);var V=k-A;if(V>=0&&V<D){var q=N(V);_(q,x)||(j.push(V+E),M.push(q))}}return K.push(M.length),new i({values:M,index:j,ptr:K,size:[S,C]})},i.prototype.swapRows=function(m,v){if(!lt(m)||!nt(m)||!lt(v)||!nt(v))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Pr(m,this._size[0]),Pr(v,this._size[0]),i._swapRows(m,v,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,v,y,w,b){for(var _=w[m],x=w[m+1],A=_;A<x;A++)b(y[A],v[A])},i._swapRows=function(m,v,y,w,b,_){for(var x=0;x<y;x++){var A=_[x],E=_[x+1],S=u(m,A,E,b),C=u(v,A,E,b);if(S<E&&C<E&&b[S]===m&&b[C]===v){if(w){var D=w[S];w[S]=w[C],w[C]=D}continue}if(S<E&&b[S]===m&&(C>=E||b[C]!==v)){var N=w?w[S]:void 0;b.splice(C,0,v),w&&w.splice(C,0,N),b.splice(C<=S?S+1:S,1),w&&w.splice(C<=S?S+1:S,1);continue}if(C<E&&b[C]===v&&(S>=E||b[S]!==m)){var P=w?w[C]:void 0;b.splice(S,0,m),w&&w.splice(S,0,P),b.splice(S<=C?C+1:C,1),w&&w.splice(S<=C?C+1:C,1)}}},i},{isClass:!0}),SHe="number",CHe=["typed"];function THe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function DHe(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var a=e+r;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var NHe=Y(SHe,CHe,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=THe(i);if(a)return DHe(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),PHe="bigint",MHe=["typed"],IHe=Y(PHe,MHe,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),tK="string",OHe=["typed"],kHe=Y(tK,OHe,t=>{var{typed:e}=t;return e(tK,{"":function(){return""},number:sv,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r)),any:function(n){return String(n)}})}),rK="boolean",RHe=["typed"],FHe=Y(rK,RHe,t=>{var{typed:e}=t;return e(rK,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),LHe="bignumber",BHe=["typed","BigNumber"],$He=Y(LHe,BHe,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=r(a[1]),l=new r(2).pow(Number(s));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new r(2).pow(Number(s)-1);return o.gte(u)?o.sub(l):o}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),jHe="complex",VHe=["typed","Complex"],UHe=Y(jHe,VHe,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,a){return new r(i,a)},"BigNumber, BigNumber":function(i,a){return new r(i.toNumber(),a.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),zHe="fraction",qHe=["typed","Fraction"],HHe=Y(zHe,qHe,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,a){return new r(i,a)},"bigint, bigint":function(i,a){return new r(i,a)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),nK="matrix",WHe=["typed","Matrix","DenseMatrix","SparseMatrix"],GHe=Y(nK,WHe,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(nK,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,l){return a([],o,l)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(s,l);if(o==="sparse")return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),iK="matrixFromFunction",KHe=["typed","matrix","isZero"],XHe=Y(iK,KHe,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(iK,{"Array | Matrix, function, string, string":function(s,o,l,u){return i(s,o,l,u)},"Array | Matrix, function, string":function(s,o,l){return i(s,o,l)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,l){return i(s,l,o)},"Array | Matrix, string, string, function":function(s,o,l,u){return i(s,u,o,l)}});function i(a,s,o,l){var u;return l!==void 0?u=r(o,l):u=r(o),u.resize(a),u.forEach(function(c,f){var h=s(f);n(h)||u.set(f,h)}),u}}),aK="matrixFromRows",YHe=["typed","matrix","flatten","size"],QHe=Y(aK,YHe,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(aK,{"...Array":function(l){return a(l)},"...Matrix":function(l){return r(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(o[0]),u=[];for(var c of o){var f=s(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));u.push(n(c))}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),sK="matrixFromColumns",ZHe=["typed","matrix","flatten","size"],JHe=Y(sK,ZHe,t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(sK,{"...Array":function(l){return a(l)},"...Matrix":function(l){return r(a(l.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of o){var h=s(f);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));for(var d=n(f),p=0;p<l;p++)u[p].push(d[p])}return u}function s(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),oK="splitUnit",eWe=["typed"],tWe=Y(oK,eWe,t=>{var{typed:e}=t;return e(oK,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),lK="unaryMinus",rWe=["typed"],nWe=Y(lK,rWe,t=>{var{typed:e}=t;return e(lK,{number:Ade,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r,!0))})}),uK="unaryPlus",iWe=["typed","config","numeric"],aWe=Y(uK,iWe,t=>{var{typed:e,config:r,numeric:n}=t;return e(uK,{number:_de,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>Ct(a,i,!0)),boolean:function(a){return n(a?1:0,r.number)},string:function(a){return n(a,Hp(a,r))}})}),cK="abs",sWe=["typed"],oWe=Y(cK,sWe,t=>{var{typed:e}=t;return e(cK,{number:yde,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r,!0))})}),fK="mapSlices",lWe=["typed","isInteger"],v4=Y(fK,lWe,t=>{var{typed:e,isInteger:r}=t;return e(fK,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!r(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?xt(i):i.size();if(a<0||a>=o.length)throw new yu(a,o.length);return ft(i)?i.create(_P(i.valueOf(),a,s),i.datatype()):_P(i,a,s)}})},{formerly:"apply"});function _P(t,e,r){var n,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=uWe(t),i=[],n=0;n<a.length;n++)i[n]=_P(a[n],e-1,r);return i}else return r(t);else{for(i=[],n=0;n<t.length;n++)i[n]=_P(t[n],e-1,r);return i}}function uWe(t){var e=t.length,r=t[0].length,n,i,a=[];for(i=0;i<r;i++){var s=[];for(n=0;n<e;n++)s.push(t[n][i]);a.push(s)}return a}var hK="addScalar",cWe=["typed"],fWe=Y(hK,cWe,t=>{var{typed:e}=t;return e(hK,{"number, number":bde,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),dK="subtractScalar",hWe=["typed"],dWe=Y(dK,hWe,t=>{var{typed:e}=t;return e(dK,{"number, number":wde,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),pK="cbrt",pWe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],mWe=Y(pK,pWe,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:l}=t;return r(pK,{number:Sx,Complex:u,"Complex, boolean":u,BigNumber:function(h){return h.cbrt()},Unit:c});function u(f,h){var d=f.arg()/3,p=f.abs(),m=new s(Sx(p),0).mul(new s(0,d).exp());if(h){var v=[m,new s(Sx(p),0).mul(new s(0,d+Math.PI*2/3).exp()),new s(Sx(p),0).mul(new s(0,d-Math.PI*2/3).exp())];return e.matrix==="Array"?v:a(v)}else return m}function c(f){if(f.value&&Vf(f.value)){var h=f.clone();return h.value=1,h=h.pow(1/3),h.value=u(f.value),h}else{var d=n(f.value);d&&(f.value=i(f.value));var p;St(f.value)?p=new o(1).div(3):KS(f.value)?p=new l(1,3):p=1/3;var m=f.pow(p);return d&&(m.value=i(m.value)),m}}}),gWe="matAlgo11xS0s",vWe=["typed","equalScalar"],ya=Y(gWe,vWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=r,y=0,w=s;typeof h=="string"&&(m=h,v=e.find(r,[m,m]),y=e.convert(0,m),a=e.convert(a,m),w=e.find(s,[m,m]));for(var b=[],_=[],x=[],A=0;A<p;A++){x[A]=_.length;for(var E=c[A],S=c[A+1],C=E;C<S;C++){var D=u[C],N=o?w(a,l[C]):w(l[C],a);v(N,y)||(_.push(D),b.push(N))}}return x[p]=_.length,i.createSparseMatrix({values:b,index:_,ptr:x,size:[d,p],datatype:m})}}),yWe="matAlgo12xSfs",bWe=["typed","DenseMatrix"],xi=Y(yWe,bWe,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=s;typeof h=="string"&&(m=h,a=e.convert(a,m),v=e.find(s,[m,m]));for(var y=[],w=[],b=[],_=0;_<p;_++){for(var x=_+1,A=c[_],E=c[_+1],S=A;S<E;S++){var C=u[S];w[C]=l[S],b[C]=x}for(var D=0;D<d;D++)_===0&&(y[D]=[]),b[D]===x?y[D][_]=o?v(a,w[D]):v(w[D],a):y[D][_]=o?v(a,0):v(0,a)}return new r({data:y,size:[d,p],datatype:m})}}),wWe="matAlgo14xDs",xWe=["typed"],Nl=Y(wWe,xWe,t=>{var{typed:e}=t;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype,f,h=s;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(s,[f,f]));var d=u.length>0?r(h,0,u,u[0],l,a,o):[];return i.createDenseMatrix({data:d,size:wt(u),datatype:f})};function r(n,i,a,s,o,l,u){var c=[];if(i===a.length-1)for(var f=0;f<s;f++)c[f]=u?n(l,o[f]):n(o[f],l);else for(var h=0;h<s;h++)c[h]=r(n,i+1,a,a[i+1],o[h],l,u);return c}}),y4="ceil",AWe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],_We=new Np(10),EWe=Y(y4,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var s=Math.ceil(a),o=n(a);return s===o?s:qi(a,o,r.relTol,r.absTol)&&!qi(a,s,r.relTol,r.absTol)?o:s}return e(y4,{number:i,"number, number":function(s,o){if(!nt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**o;return i(s*l)/l}})}),SWe=Y(y4,AWe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:a}),u=xi({typed:e,DenseMatrix:o}),c=Nl({typed:e}),f=EWe({typed:e,config:r,round:n});function h(d){var p=(y,w)=>El(y,w,r.relTol,r.absTol),m=d.ceil(),v=n(d);return m.eq(v)?m:p(d,v)&&!p(d,m)?v:m}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,m){return p.ceil(m)},"Complex, BigNumber":function(p,m){return p.ceil(m.toNumber())},BigNumber:h,"BigNumber, BigNumber":function(p,m){var v=_We.pow(m);return h(p.mul(v)).div(v)},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,m){return p.ceil(m)},"Fraction, BigNumber":function(p,m){return p.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(p,m,v){var y=p.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>d(p,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>Ct(p,y=>d(y,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,m)=>d(p,0,m)),"Array | Matrix":e.referToSelf(d=>p=>Ct(p,d,!0)),"Array, number | BigNumber":e.referToSelf(d=>(p,m)=>Ct(p,v=>d(v,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>l(p,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>c(p,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(p,m)=>c(i(m),p,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,p,d,!0):u(m,p,d,!0))})}),mK="cube",CWe=["typed"],TWe=Y(mK,CWe,t=>{var{typed:e}=t;return e(mK,{number:Ede,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),gK="exp",DWe=["typed"],NWe=Y(gK,DWe,t=>{var{typed:e}=t;return e(gK,{number:Sde,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),vK="expm1",PWe=["typed","Complex"],MWe=Y(vK,PWe,t=>{var{typed:e,Complex:r}=t;return e(vK,{number:Cde,Complex:function(i){var a=Math.exp(i.re);return new r(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),b4="fix",IWe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],OWe=Y(b4,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(b4,{number:function(a){return a>0?n(a):r(a)},"number, number":function(a,s){return a>0?n(a,s):r(a,s)}})}),kWe=Y(b4,IWe,t=>{var{typed:e,Complex:r,matrix:n,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:l}=t,u=xi({typed:e,DenseMatrix:l}),c=Nl({typed:e}),f=OWe({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(d){return new r(d.re>0?Math.floor(d.re):Math.ceil(d.re),d.im>0?Math.floor(d.im):Math.ceil(d.im))},"Complex, number":function(d,p){return new r(d.re>0?a(d.re,p):i(d.re,p),d.im>0?a(d.im,p):i(d.im,p))},"Complex, BigNumber":function(d,p){var m=p.toNumber();return new r(d.re>0?a(d.re,m):i(d.re,m),d.im>0?a(d.im,m):i(d.im,m))},BigNumber:function(d){return d.isNegative()?i(d):a(d)},"BigNumber, number | BigNumber":function(d,p){return d.isNegative()?i(d,p):a(d,p)},bigint:h=>h,"bigint, number":(h,d)=>h,"bigint, BigNumber":(h,d)=>h,Fraction:function(d){return d.s<0n?d.ceil():d.floor()},"Fraction, number | BigNumber":function(d,p){return d.s<0n?i(d,p):a(d,p)},"Unit, number, Unit":e.referToSelf(h=>function(d,p,m){var v=d.toNumeric(m);return m.multiply(h(v,p))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>h(d,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>Ct(d,v=>h(v,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(d,p)=>h(d,0,p)),"Array | Matrix":e.referToSelf(h=>d=>Ct(d,h,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(h=>(d,p)=>Ct(d,m=>h(m,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(d,p)=>c(n(p),d,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(d,p)=>s(d,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,d,h,!0):u(p,d,h,!0))})}),w4="floor",RWe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],FWe=new Np(10),LWe=Y(w4,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function i(a){var s=Math.floor(a),o=n(a);return s===o?s:qi(a,o,r.relTol,r.absTol)&&!qi(a,s,r.relTol,r.absTol)?o:s}return e(w4,{number:i,"number, number":function(s,o){if(!nt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**o;return i(s*l)/l}})}),ope=Y(w4,RWe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:a}),u=xi({typed:e,DenseMatrix:o}),c=Nl({typed:e}),f=LWe({typed:e,config:r,round:n});function h(d){var p=(y,w)=>El(y,w,r.relTol,r.absTol),m=d.floor(),v=n(d);return m.eq(v)?m:p(d,v)&&!p(d,m)?v:m}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,m){return p.floor(m)},"Complex, BigNumber":function(p,m){return p.floor(m.toNumber())},BigNumber:h,"BigNumber, BigNumber":function(p,m){var v=FWe.pow(m);return h(p.mul(v)).div(v)},bigint:d=>d,"bigint, number":(d,p)=>d,"bigint, BigNumber":(d,p)=>d,Fraction:function(p){return p.floor()},"Fraction, number":function(p,m){return p.floor(m)},"Fraction, BigNumber":function(p,m){return p.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(p,m,v){var y=p.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>d(p,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(p,m,v)=>Ct(p,y=>d(y,m,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(p,m)=>d(p,0,m)),"Array | Matrix":e.referToSelf(d=>p=>Ct(p,d,!0)),"Array, number | BigNumber":e.referToSelf(d=>(p,m)=>Ct(p,v=>d(v,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>l(p,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(p,m)=>c(p,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(p,m)=>c(i(m),p,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,p,d,!0):u(m,p,d,!0))})}),BWe="matAlgo02xDS0",$We=["typed","equalScalar"],wu=Y(BWe,$We,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=a._values,h=a._index,d=a._ptr,p=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==p.length)throw new kt(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],w,b=r,_=0,x=s;typeof c=="string"&&c===m&&c!=="mixed"&&(w=c,b=e.find(r,[w,w]),_=e.convert(0,w),x=e.find(s,[w,w]));for(var A=[],E=[],S=[],C=0;C<y;C++){S[C]=E.length;for(var D=d[C],N=d[C+1],P=D;P<N;P++){var M=h[P],j=o?x(f[P],l[M][C]):x(l[M][C],f[P]);b(j,_)||(E.push(M),A.push(j))}}return S[y]=E.length,a.createSparseMatrix({values:A,index:E,ptr:S,size:[v,y],datatype:c===i._datatype&&m===a._datatype?w:void 0})}}),jWe="matAlgo03xDSf",VWe=["typed"],qa=Y(jWe,VWe,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==d.length)throw new kt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],v=l[1],y,w=0,b=a;typeof u=="string"&&u===p&&u!=="mixed"&&(y=u,w=e.convert(0,y),b=e.find(a,[y,y]));for(var _=[],x=0;x<m;x++)_[x]=[];for(var A=[],E=[],S=0;S<v;S++){for(var C=S+1,D=h[S],N=h[S+1],P=D;P<N;P++){var M=f[P];A[M]=s?b(c[P],o[M][S]):b(o[M][S],c[P]),E[M]=C}for(var j=0;j<m;j++)E[j]===C?_[j][S]=A[j]:_[j][S]=s?b(w,o[j][S]):b(o[j][S],w)}return n.createDenseMatrix({data:_,size:[m,v],datatype:u===n._datatype&&p===i._datatype?y:void 0})}}),UWe="matAlgo05xSfSf",zWe=["typed","equalScalar"],mO=Y(UWe,zWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,_=r,x=0,A=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,_=e.find(r,[b,b]),x=e.convert(0,b),A=e.find(s,[b,b]));var E=o&&h?[]:void 0,S=[],C=[],D=E?[]:void 0,N=E?[]:void 0,P=[],M=[],j,K,k,V;for(K=0;K<w;K++){C[K]=S.length;var q=K+1;for(k=u[K],V=u[K+1];k<V;k++)j=l[k],S.push(j),P[j]=q,D&&(D[j]=o[k]);for(k=p[K],V=p[K+1];k<V;k++)j=d[k],P[j]!==q&&S.push(j),M[j]=q,N&&(N[j]=h[k]);if(E)for(k=C[K];k<S.length;){j=S[k];var H=P[j],ee=M[j];if(H===q||ee===q){var le=H===q?D[j]:x,re=ee===q?N[j]:x,L=A(le,re);_(L,x)?S.splice(k,1):(E.push(L),k++)}}}return C[w]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),qWe="matAlgo13xDD",HWe=["typed"],lpe=Y(qWe,HWe,t=>{var{typed:e}=t;return function(i,a,s){var o=i._data,l=i._size,u=i._datatype,c=a._data,f=a._size,h=a._datatype,d=[];if(l.length!==f.length)throw new kt(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");d[p]=l[p]}var m,v=s;typeof u=="string"&&u===h&&(m=u,v=e.find(s,[m,m]));var y=d.length>0?r(v,0,d,d[0],o,c):[];return i.createDenseMatrix({data:y,size:d,datatype:m})};function r(n,i,a,s,o,l){var u=[];if(i===a.length-1)for(var c=0;c<s;c++)u[c]=n(o[c],l[c]);else for(var f=0;f<s;f++)u[f]=r(n,i+1,a,a[i+1],o[f],l[f]);return u}});function Ci(t,e){if(dh(t.size(),e.size()))return[t,e];var r=gP(t.size(),e.size());return[t,e].map(n=>WWe(n,r))}function WWe(t,e){return dh(t.size(),e)?t:t.create(km(t.valueOf(),e),t.datatype())}var GWe="matrixAlgorithmSuite",KWe=["typed","matrix"],Ir=Y(GWe,KWe,t=>{var{typed:e,matrix:r}=t,n=lpe({typed:e}),i=Nl({typed:e});return function(s){var o=s.elop,l=s.SD||s.DS,u;o?(u={"DenseMatrix, DenseMatrix":(d,p)=>n(...Ci(d,p),o),"Array, Array":(d,p)=>n(...Ci(r(d),r(p)),o).valueOf(),"Array, DenseMatrix":(d,p)=>n(...Ci(r(d),p),o),"DenseMatrix, Array":(d,p)=>n(...Ci(d,r(p)),o)},s.SS&&(u["SparseMatrix, SparseMatrix"]=(d,p)=>s.SS(...Ci(d,p),o,!1)),s.DS&&(u["DenseMatrix, SparseMatrix"]=(d,p)=>s.DS(...Ci(d,p),o,!1),u["Array, SparseMatrix"]=(d,p)=>s.DS(...Ci(r(d),p),o,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(d,p)=>l(...Ci(p,d),o,!0),u["SparseMatrix, Array"]=(d,p)=>l(...Ci(r(p),d),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(d=>(p,m)=>n(...Ci(p,m),d)),"Array, Array":e.referToSelf(d=>(p,m)=>n(...Ci(r(p),r(m)),d).valueOf()),"Array, DenseMatrix":e.referToSelf(d=>(p,m)=>n(...Ci(r(p),m),d)),"DenseMatrix, Array":e.referToSelf(d=>(p,m)=>n(...Ci(p,r(m)),d))},s.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.SS(...Ci(p,m),d,!1))),s.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.DS(...Ci(p,m),d,!1)),u["Array, SparseMatrix"]=e.referToSelf(d=>(p,m)=>s.DS(...Ci(r(p),m),d,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(d=>(p,m)=>l(...Ci(m,p),d,!0)),u["SparseMatrix, Array"]=e.referToSelf(d=>(p,m)=>l(...Ci(r(m),p),d,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(o?(u["DenseMatrix,"+c]=(d,p)=>i(d,p,o,!1),u[c+", DenseMatrix"]=(d,p)=>i(p,d,o,!0),u["Array,"+c]=(d,p)=>i(r(d),p,o,!1).valueOf(),u[c+", Array"]=(d,p)=>i(r(p),d,o,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(d=>(p,m)=>i(p,m,d,!1)),u[c+", DenseMatrix"]=e.referToSelf(d=>(p,m)=>i(m,p,d,!0)),u["Array,"+c]=e.referToSelf(d=>(p,m)=>i(r(p),m,d,!1).valueOf()),u[c+", Array"]=e.referToSelf(d=>(p,m)=>i(r(m),p,d,!0).valueOf())));var h=s.sS!==void 0?s.sS:s.Ss;return o?(s.Ss&&(u["SparseMatrix,"+c]=(d,p)=>s.Ss(d,p,o,!1)),h&&(u[c+", SparseMatrix"]=(d,p)=>h(p,d,o,!0))):(s.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(d=>(p,m)=>s.Ss(p,m,d,!1))),h&&(u[c+", SparseMatrix"]=e.referToSelf(d=>(p,m)=>h(m,p,d,!0)))),o&&o.signatures&&zhe(u,o.signatures),u}}),yK="mod",XWe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],upe=Y(yK,XWe,t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:l}=t,u=ope({typed:e,config:r,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),c=wu({typed:e,equalScalar:a}),f=qa({typed:e}),h=mO({typed:e,equalScalar:a}),d=ya({typed:e,equalScalar:a}),p=xi({typed:e,DenseMatrix:o}),m=Ir({typed:e,matrix:i,concat:l});return e(yK,{"number, number":v,"BigNumber, BigNumber":function(w,b){return b.isZero()?w:w.sub(b.mul(u(w.div(b))))},"bigint, bigint":function(w,b){if(b===0n)return w;if(w<0){var _=w%b;return _===0n?_:_+b}return w%b},"Fraction, Fraction":function(w,b){return b.equals(0)?w:w.sub(b.mul(u(w.div(b))))}},m({SS:h,DS:f,SD:c,Ss:d,sS:p}));function v(y,w){return w===0?y:y-w*u(y/w)}}),YWe="matAlgo01xDSid",QWe=["typed"],Gp=Y(YWe,QWe,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==d.length)throw new kt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],v=l[1],y=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,w=y?e.find(a,[y,y]):a,b,_,x=[];for(b=0;b<m;b++)x[b]=[];var A=[],E=[];for(_=0;_<v;_++){for(var S=_+1,C=h[_],D=h[_+1],N=C;N<D;N++)b=f[N],A[b]=s?w(c[N],o[b][_]):w(o[b][_],c[N]),E[b]=S;for(b=0;b<m;b++)E[b]===S?x[b][_]=A[b]:x[b][_]=o[b][_]}return n.createDenseMatrix({data:x,size:[m,v],datatype:u===n._datatype&&p===i._datatype?y:void 0})}}),ZWe="matAlgo04xSidSid",JWe=["typed","equalScalar"],mV=Y(ZWe,JWe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,_=r,x=0,A=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,_=e.find(r,[b,b]),x=e.convert(0,b),A=e.find(s,[b,b]));var E=o&&h?[]:void 0,S=[],C=[],D=o&&h?[]:void 0,N=o&&h?[]:void 0,P=[],M=[],j,K,k,V,q;for(K=0;K<w;K++){C[K]=S.length;var H=K+1;for(V=u[K],q=u[K+1],k=V;k<q;k++)j=l[k],S.push(j),P[j]=H,D&&(D[j]=o[k]);for(V=p[K],q=p[K+1],k=V;k<q;k++)if(j=d[k],P[j]===H){if(D){var ee=A(D[j],h[k]);_(ee,x)?P[j]=null:D[j]=ee}}else S.push(j),M[j]=H,N&&(N[j]=h[k]);if(D&&N)for(k=C[K];k<S.length;)j=S[k],P[j]===H?(E[k]=D[j],k++):M[j]===H?(E[k]=N[j],k++):S.splice(k,1)}return C[w]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),eGe="matAlgo10xSids",tGe=["typed","DenseMatrix"],Vv=Y(eGe,tGe,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],m,v=s;typeof h=="string"&&(m=h,a=e.convert(a,m),v=e.find(s,[m,m]));for(var y=[],w=[],b=[],_=0;_<p;_++){for(var x=_+1,A=c[_],E=c[_+1],S=A;S<E;S++){var C=u[S];w[C]=l[S],b[C]=x}for(var D=0;D<d;D++)_===0&&(y[D]=[]),b[D]===x?y[D][_]=o?v(a,w[D]):v(w[D],a):y[D][_]=a}return new r({data:y,size:[d,p],datatype:m})}});function Uv(t,e,r,n){if(!(this instanceof Uv))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Uv.prototype=new Error;Uv.prototype.constructor=Error;Uv.prototype.name="ArgumentsError";Uv.prototype.isArgumentsError=!0;var bK="gcd",rGe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],NR="number | BigNumber | Fraction | Matrix | Array",nGe="".concat(NR,", ").concat(NR,", ...").concat(NR);function wK(t){return!t.some(e=>Array.isArray(e))}var iGe=Y(bK,rGe,t=>{var{typed:e,matrix:r,config:n,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:l,concat:u}=t,c=upe({typed:e,config:n,round:i,matrix:r,equalScalar:a,zeros:s,DenseMatrix:l,concat:u}),f=Gp({typed:e}),h=mV({typed:e,equalScalar:a}),d=Vv({typed:e,DenseMatrix:l}),p=Ir({typed:e,matrix:r,concat:u});return e(bK,{"number, number":m,"BigNumber, BigNumber":v,"Fraction, Fraction":(y,w)=>y.gcd(w)},p({SS:h,DS:f,Ss:d}),{[nGe]:e.referToSelf(y=>(w,b,_)=>{for(var x=y(w,b),A=0;A<_.length;A++)x=y(x,_[A]);return x}),Array:e.referToSelf(y=>w=>{if(w.length===1&&Array.isArray(w[0])&&wK(w[0]))return y(...w[0]);if(wK(w))return y(...w);throw new Uv("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(y=>w=>y(w.toArray()))});function m(y,w){if(!nt(y)||!nt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var b;w!==0;)b=c(y,w),y=w,w=b;return y<0?-y:y}function v(y,w){if(!y.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new o(0);!w.isZero();){var _=c(y,w);y=w,w=_}return y.lt(b)?y.neg():y}}),aGe="matAlgo06xS0S0",sGe=["typed","equalScalar"],gO=Y(aGe,sGe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,f=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==f.length)throw new kt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var d=l[0],p=l[1],m,v=r,y=0,w=s;typeof u=="string"&&u===h&&u!=="mixed"&&(m=u,v=e.find(r,[m,m]),y=e.convert(0,m),w=e.find(s,[m,m]));for(var b=o&&c?[]:void 0,_=[],x=[],A=b?[]:void 0,E=[],S=[],C=0;C<p;C++){x[C]=_.length;var D=C+1;if(VG(i,C,E,A,S,D,_,w),VG(a,C,E,A,S,D,_,w),A)for(var N=x[C];N<_.length;){var P=_[N];if(S[P]===D){var M=A[P];v(M,y)?_.splice(N,1):(b.push(M),N++)}else _.splice(N,1)}else for(var j=x[C];j<_.length;){var K=_[j];S[K]!==D?_.splice(j,1):j++}}return x[p]=_.length,i.createSparseMatrix({values:b,index:_,ptr:x,size:[d,p],datatype:u===i._datatype&&h===a._datatype?m:void 0})}}),xK="lcm",oGe=["typed","matrix","equalScalar","concat"],lGe=Y(xK,oGe,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=wu({typed:e,equalScalar:n}),s=gO({typed:e,equalScalar:n}),o=ya({typed:e,equalScalar:n}),l=Ir({typed:e,matrix:r,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(h=>(d,p,m)=>{for(var v=h(d,p),y=0;y<m.length;y++)v=h(v,m[y]);return v}),e(xK,{"number, number":Tde,"BigNumber, BigNumber":f,"Fraction, Fraction":(h,d)=>h.lcm(d)},l({SS:s,DS:a,Ss:o}),c);function f(h,d){if(!h.isInt()||!d.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(h.isZero())return h;if(d.isZero())return d;for(var p=h.times(d);!d.isZero();){var m=d;d=h.mod(m),h=m}return p.div(h).abs()}});function gV(t,e,r,n){return function(i){if(i>0||r.predictable){if(i<=0)return NaN;var a=i.toString(16),s=a.substring(0,15);return t*(a.length-s.length)+e(+("0x"+s))}return n(i.toNumber())}}var AK="log10",uGe=["typed","config","Complex"],cGe=bP(16),fGe=Y(AK,uGe,t=>{var{typed:e,config:r,Complex:n}=t;function i(s){return s.log().div(Math.LN10)}function a(s){return i(new n(s,0))}return e(AK,{number:function(o){return o>=0||r.predictable?bP(o):a(o)},bigint:gV(cGe,bP,r,a),Complex:i,BigNumber:function(o){return!o.isNegative()||r.predictable?o.log():a(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Ct(o,s))})}),_K="log2",hGe=["typed","config","Complex"],dGe=Y(_K,hGe,t=>{var{typed:e,config:r,Complex:n}=t;function i(s){return a(new n(s,0))}return e(_K,{number:function(o){return o>=0||r.predictable?h4(o):i(o)},bigint:gV(4,h4,r,i),Complex:a,BigNumber:function(o){return!o.isNegative()||r.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Ct(o,s))});function a(s){var o=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),pGe="multiplyScalar",mGe=["typed"],gGe=Y(pGe,mGe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":xde,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),EK="multiply",vGe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],yGe=Y(EK,vGe,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=t,o=ya({typed:e,equalScalar:a}),l=Nl({typed:e});function u(x,A){switch(x.length){case 1:switch(A.length){case 1:if(x[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;case 2:switch(A.length){case 1:if(x[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+A[0]+")");break;case 2:if(x[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,A,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return s(x,A)}function f(x,A){if(A.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(x,A)}function h(x,A){var E=x._data,S=x._size,C=x._datatype||x.getDataType(),D=A._data,N=A._size,P=A._datatype||A.getDataType(),M=S[0],j=N[1],K,k=n,V=i;C&&P&&C===P&&typeof C=="string"&&C!=="mixed"&&(K=C,k=e.find(n,[K,K]),V=e.find(i,[K,K]));for(var q=[],H=0;H<j;H++){for(var ee=V(E[0],D[0][H]),le=1;le<M;le++)ee=k(ee,V(E[le],D[le][H]));q[H]=ee}return x.createDenseMatrix({data:q,size:[j],datatype:C===x._datatype&&P===A._datatype?K:void 0})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":w}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":v,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":_});function m(x,A){var E=x._data,S=x._size,C=x._datatype||x.getDataType(),D=A._data,N=A._datatype||A.getDataType(),P=S[0],M=S[1],j,K=n,k=i;C&&N&&C===N&&typeof C=="string"&&C!=="mixed"&&(j=C,K=e.find(n,[j,j]),k=e.find(i,[j,j]));for(var V=[],q=0;q<P;q++){for(var H=E[q],ee=k(H[0],D[0]),le=1;le<M;le++)ee=K(ee,k(H[le],D[le]));V[q]=ee}return x.createDenseMatrix({data:V,size:[P],datatype:C===x._datatype&&N===A._datatype?j:void 0})}function v(x,A){var E=x._data,S=x._size,C=x._datatype||x.getDataType(),D=A._data,N=A._size,P=A._datatype||A.getDataType(),M=S[0],j=S[1],K=N[1],k,V=n,q=i;C&&P&&C===P&&typeof C=="string"&&C!=="mixed"&&C!=="mixed"&&(k=C,V=e.find(n,[k,k]),q=e.find(i,[k,k]));for(var H=[],ee=0;ee<M;ee++){var le=E[ee];H[ee]=[];for(var re=0;re<K;re++){for(var L=q(le[0],D[0][re]),ie=1;ie<j;ie++)L=V(L,q(le[ie],D[ie][re]));H[ee][re]=L}}return x.createDenseMatrix({data:H,size:[M,K],datatype:C===x._datatype&&P===A._datatype?k:void 0})}function y(x,A){var E=x._data,S=x._size,C=x._datatype||x.getDataType(),D=A._values,N=A._index,P=A._ptr,M=A._size,j=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var K=S[0],k=M[1],V,q=n,H=i,ee=a,le=0;C&&j&&C===j&&typeof C=="string"&&C!=="mixed"&&(V=C,q=e.find(n,[V,V]),H=e.find(i,[V,V]),ee=e.find(a,[V,V]),le=e.convert(0,V));for(var re=[],L=[],ie=[],X=A.createSparseMatrix({values:re,index:L,ptr:ie,size:[K,k],datatype:C===x._datatype&&j===A._datatype?V:void 0}),pe=0;pe<k;pe++){ie[pe]=L.length;var de=P[pe],ae=P[pe+1];if(ae>de)for(var z=0,ne=0;ne<K;ne++){for(var fe=ne+1,Q=void 0,ye=de;ye<ae;ye++){var me=N[ye];z!==fe?(Q=H(E[ne][me],D[ye]),z=fe):Q=q(Q,H(E[ne][me],D[ye]))}z===fe&&!ee(Q,le)&&(L.push(ne),re.push(Q))}}return ie[k]=L.length,X}function w(x,A){var E=x._values,S=x._index,C=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=A._data,P=A._datatype||A.getDataType(),M=x._size[0],j=A._size[0],K=[],k=[],V=[],q,H=n,ee=i,le=a,re=0;D&&P&&D===P&&typeof D=="string"&&D!=="mixed"&&(q=D,H=e.find(n,[q,q]),ee=e.find(i,[q,q]),le=e.find(a,[q,q]),re=e.convert(0,q));var L=[],ie=[];V[0]=0;for(var X=0;X<j;X++){var pe=N[X];if(!le(pe,re))for(var de=C[X],ae=C[X+1],z=de;z<ae;z++){var ne=S[z];ie[ne]?L[ne]=H(L[ne],ee(pe,E[z])):(ie[ne]=!0,k.push(ne),L[ne]=ee(pe,E[z]))}}for(var fe=k.length,Q=0;Q<fe;Q++){var ye=k[Q];K[Q]=L[ye]}return V[1]=k.length,x.createSparseMatrix({values:K,index:k,ptr:V,size:[M,1],datatype:D===x._datatype&&P===A._datatype?q:void 0})}function b(x,A){var E=x._values,S=x._index,C=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=A._data,P=A._datatype||A.getDataType(),M=x._size[0],j=A._size[0],K=A._size[1],k,V=n,q=i,H=a,ee=0;D&&P&&D===P&&typeof D=="string"&&D!=="mixed"&&(k=D,V=e.find(n,[k,k]),q=e.find(i,[k,k]),H=e.find(a,[k,k]),ee=e.convert(0,k));for(var le=[],re=[],L=[],ie=x.createSparseMatrix({values:le,index:re,ptr:L,size:[M,K],datatype:D===x._datatype&&P===A._datatype?k:void 0}),X=[],pe=[],de=0;de<K;de++){L[de]=re.length;for(var ae=de+1,z=0;z<j;z++){var ne=N[z][de];if(!H(ne,ee))for(var fe=C[z],Q=C[z+1],ye=fe;ye<Q;ye++){var me=S[ye];pe[me]!==ae?(pe[me]=ae,re.push(me),X[me]=q(ne,E[ye])):X[me]=V(X[me],q(ne,E[ye]))}}for(var De=L[de],Le=re.length,ze=De;ze<Le;ze++){var Be=re[ze];le[ze]=X[Be]}}return L[K]=re.length,ie}function _(x,A){var E=x._values,S=x._index,C=x._ptr,D=x._datatype||x._data===void 0?x._datatype:x.getDataType(),N=A._values,P=A._index,M=A._ptr,j=A._datatype||A._data===void 0?A._datatype:A.getDataType(),K=x._size[0],k=A._size[1],V=E&&N,q,H=n,ee=i;D&&j&&D===j&&typeof D=="string"&&D!=="mixed"&&(q=D,H=e.find(n,[q,q]),ee=e.find(i,[q,q]));for(var le=V?[]:void 0,re=[],L=[],ie=x.createSparseMatrix({values:le,index:re,ptr:L,size:[K,k],datatype:D===x._datatype&&j===A._datatype?q:void 0}),X=V?[]:void 0,pe=[],de,ae,z,ne,fe,Q,ye,me,De=0;De<k;De++){L[De]=re.length;var Le=De+1;for(fe=M[De],Q=M[De+1],ne=fe;ne<Q;ne++)if(me=P[ne],V)for(ae=C[me],z=C[me+1],de=ae;de<z;de++)ye=S[de],pe[ye]!==Le?(pe[ye]=Le,re.push(ye),X[ye]=ee(N[ne],E[de])):X[ye]=H(X[ye],ee(N[ne],E[de]));else for(ae=C[me],z=C[me+1],de=ae;de<z;de++)ye=S[de],pe[ye]!==Le&&(pe[ye]=Le,re.push(ye));if(V)for(var ze=L[De],Be=re.length,Ve=ze;Ve<Be;Ve++){var Ke=re[Ve];le[Ve]=X[Ke]}}return L[k]=re.length,ie}return e(EK,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(A,E)=>{u(xt(A),xt(E));var S=x(r(A),r(E));return ft(S)?S.valueOf():S}),"Matrix, Matrix":function(A,E){var S=A.size(),C=E.size();return u(S,C),S.length===1?C.length===1?c(A,E,S[0]):f(A,E):C.length===1?d(A,E):p(A,E)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(A,E)=>x(A,r(E))),"Array, Matrix":e.referToSelf(x=>(A,E)=>x(r(A,E.storage()),E)),"SparseMatrix, any":function(A,E){return o(A,E,i,!1)},"DenseMatrix, any":function(A,E){return l(A,E,i,!1)},"any, SparseMatrix":function(A,E){return o(E,A,i,!0)},"any, DenseMatrix":function(A,E){return l(E,A,i,!0)},"Array, any":function(A,E){return l(r(A),E,i,!1).valueOf()},"any, Array":function(A,E){return l(r(E),A,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(A,E,S)=>{for(var C=x(A,E),D=0;D<S.length;D++)C=x(C,S[D]);return C})})}),SK="nthRoot",bGe=["typed","matrix","equalScalar","BigNumber","concat"],wGe=Y(SK,bGe,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,concat:a}=t,s=Gp({typed:e}),o=wu({typed:e,equalScalar:n}),l=gO({typed:e,equalScalar:n}),u=ya({typed:e,equalScalar:n}),c=Ir({typed:e,matrix:r,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(SK,{number:qG,"number, number":qG,BigNumber:d=>h(d,new i(2)),"BigNumber, BigNumber":h,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",d=>p=>d(r(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",d=>p=>d(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",d=>p=>d(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return l(p,m,d);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return s(p,m,d,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",d=>(p,m)=>d(r(p),m)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(p,m)=>{if(m.density()===1)return u(m,p,d,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function h(d,p){var m=i.precision,v=i.clone({precision:m+2}),y=new i(0),w=new v(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(d.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(d.isZero())return b?new v(1/0):0;if(!d.isFinite())return b?y:d;var _=d.abs().pow(w.div(p));return _=d.isNeg()?_.neg():_,new i((b?w.div(_):_).toPrecision(m))}}),CK="sign",xGe=["typed","BigNumber","Fraction","complex"],AGe=Y(CK,xGe,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:i}=t;return e(CK,{number:d4,Complex:function(s){return s.im===0?n(d4(s.re)):s.sign()},BigNumber:function(s){return new r(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new i(0):new i(s.s)},"Array | Matrix":e.referToSelf(a=>s=>Ct(s,a,!0)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),_Ge="sqrt",EGe=["config","typed","Complex"],SGe=Y(_Ge,EGe,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),TK="square",CGe=["typed"],TGe=Y(TK,CGe,t=>{var{typed:e}=t;return e(TK,{number:Dde,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),DK="subtract",DGe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],NGe=Y(DK,DGe,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=t,l=Gp({typed:e}),u=qa({typed:e}),c=mO({typed:e,equalScalar:n}),f=Vv({typed:e,DenseMatrix:s}),h=xi({typed:e,DenseMatrix:s}),d=Ir({typed:e,matrix:r,concat:o});return e(DK,{"any, any":i},d({elop:i,SS:c,DS:l,SD:u,Ss:h,sS:f}))}),NK="xgcd",PGe=["typed","config","matrix","BigNumber"],MGe=Y(NK,PGe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(NK,{"number, number":function(o,l){var u=Nde(o,l);return r.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":a});function a(s,o){var l,u,c,f=new i(0),h=new i(1),d=f,p=h,m=h,v=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=s.div(o).floor(),c=s.mod(o),l=d,d=p.minus(u.times(d)),p=l,l=m,m=v.minus(u.times(m)),v=l,s=o,o=c;var y;return s.lt(f)?y=[s.neg(),p.neg(),v.neg()]:y=[s,s.isZero()?0:p,v],r.matrix==="Array"?y:n(y)}}),PK="invmod",IGe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],OGe=Y(PK,IGe,t=>{var{typed:e,config:r,BigNumber:n,xgcd:i,equal:a,smaller:s,mod:o,add:l,isInteger:u}=t;return e(PK,{"number, number":c,"BigNumber, BigNumber":c});function c(f,h){if(!u(f)||!u(h))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,h),a(h,0))throw new Error("Divisor must be non zero");var d=i(f,h);d=d.valueOf();var[p,m]=d;return a(p,n(1))?(m=o(m,h),s(m,n(0))&&(m=l(m,h)),m):NaN}}),kGe="matAlgo09xS0Sf",RGe=["typed","equalScalar"],cpe=Y(kGe,RGe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y=c[0],w=c[1],b,_=r,x=0,A=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,_=e.find(r,[b,b]),x=e.convert(0,b),A=e.find(s,[b,b]));var E=o&&h?[]:void 0,S=[],C=[],D=E?[]:void 0,N=[],P,M,j,K,k;for(M=0;M<w;M++){C[M]=S.length;var V=M+1;if(D)for(K=p[M],k=p[M+1],j=K;j<k;j++)P=d[j],N[P]=V,D[P]=h[j];for(K=u[M],k=u[M+1],j=K;j<k;j++)if(P=l[j],D){var q=N[P]===V?D[P]:x,H=A(o[j],q);_(H,x)||(S.push(P),E.push(H))}else S.push(P)}return C[w]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),MK="dotMultiply",FGe=["typed","matrix","equalScalar","multiplyScalar","concat"],LGe=Y(MK,FGe,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:i,concat:a}=t,s=wu({typed:e,equalScalar:n}),o=cpe({typed:e,equalScalar:n}),l=ya({typed:e,equalScalar:n}),u=Ir({typed:e,matrix:r,concat:a});return e(MK,u({elop:i,SS:o,DS:s,Ss:l}))});function BGe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return vV(t,e,function(n,i){return n&i})}function t_(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function $Ge(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:vV(t,e,function(i,a){return i|a})}function vV(t,e,r){var n=t.constructor,i,a,s=+(t.s<0),o=+(e.s<0);if(s){i=CT(t_(t));for(var l=0;l<i.length;++l)i[l]^=1}else i=CT(t);if(o){a=CT(t_(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=CT(e);var c,f,h;i.length<=a.length?(c=i,f=a,h=s):(c=a,f=i,h=o);var d=c.length,p=f.length,m=r(s,o)^1,v=new n(m^1),y=new n(1),w=new n(2),b=n.precision;for(n.config({precision:1e9});d>0;)r(c[--d],f[--p])===m&&(v=v.plus(y)),y=y.times(w);for(;p>0;)r(h,f[--p])===m&&(v=v.plus(y)),y=y.times(w);return n.config({precision:b}),m===0&&(v.s=-v.s),v}function CT(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;r+=i}for(var s=r.length;r.charAt(s)==="0";)s--;var o=t.e,l=r.slice(0,s+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],f=0;f<l.length;){for(var h=c.length;h--;)c[h]*=10;c[0]+=parseInt(l.charAt(f++));for(var d=0;d<c.length;++d)c[d]>1&&((c[d+1]===null||c[d+1]===void 0)&&(c[d+1]=0),c[d+1]+=c[d]>>1,c[d]&=1)}return c.reverse()}function jGe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?t_(e):e.eq(n)?t_(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):vV(t,e,function(i,a){return i^a})}function VGe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function UGe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var IK="bitAnd",zGe=["typed","matrix","equalScalar","concat"],fpe=Y(IK,zGe,t=>{var{typed:e,matrix:r,equalScalar:n,concat:i}=t,a=wu({typed:e,equalScalar:n}),s=gO({typed:e,equalScalar:n}),o=ya({typed:e,equalScalar:n}),l=Ir({typed:e,matrix:r,concat:i});return e(IK,{"number, number":Mde,"BigNumber, BigNumber":BGe,"bigint, bigint":(u,c)=>u&c},l({SS:s,DS:a,Ss:o}))}),OK="bitNot",qGe=["typed"],HGe=Y(OK,qGe,t=>{var{typed:e}=t;return e(OK,{number:Ide,BigNumber:t_,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),kK="bitOr",WGe=["typed","matrix","equalScalar","DenseMatrix","concat"],hpe=Y(kK,WGe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=Gp({typed:e}),o=mV({typed:e,equalScalar:n}),l=Vv({typed:e,DenseMatrix:i}),u=Ir({typed:e,matrix:r,concat:a});return e(kK,{"number, number":Ode,"BigNumber, BigNumber":$Ge,"bigint, bigint":(c,f)=>c|f},u({SS:o,DS:s,Ss:l}))}),GGe="matAlgo07xSSf",KGe=["typed","SparseMatrix"],Nc=Y(GGe,KGe,t=>{var{typed:e,SparseMatrix:r}=t;return function(a,s,o){var l=a._size,u=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new kt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var h=l[0],d=l[1],p,m=0,v=o;typeof u=="string"&&u===f&&u!=="mixed"&&(p=u,m=e.convert(0,p),v=e.find(o,[p,p]));for(var y=[],w=[],b=new Array(d+1).fill(0),_=[],x=[],A=[],E=[],S=0;S<d;S++){var C=S+1,D=0;n(a,S,A,_,C),n(s,S,E,x,C);for(var N=0;N<h;N++){var P=A[N]===C?_[N]:m,M=E[N]===C?x[N]:m,j=v(P,M);j!==0&&j!==!1&&(w.push(N),y.push(j),D++)}b[S+1]=b[S]+D}return new r({values:y,index:w,ptr:b,size:[h,d],datatype:u===a._datatype&&f===s._datatype?p:void 0})};function n(i,a,s,o,l){for(var u=i._values,c=i._index,f=i._ptr,h=f[a],d=f[a+1];h<d;h++){var p=c[h];s[p]=l,o[p]=u[h]}}}),RK="bitXor",XGe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],YGe=Y(RK,XGe,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,s=qa({typed:e}),o=Nc({typed:e,SparseMatrix:a}),l=xi({typed:e,DenseMatrix:n}),u=Ir({typed:e,matrix:r,concat:i});return e(RK,{"number, number":kde,"BigNumber, BigNumber":jGe,"bigint, bigint":(c,f)=>c^f},u({SS:o,DS:s,Ss:l}))}),FK="arg",QGe=["typed"],ZGe=Y(FK,QGe,t=>{var{typed:e}=t;return e(FK,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),LK="conj",JGe=["typed"],eKe=Y(LK,JGe,t=>{var{typed:e}=t;return e(LK,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),BK="im",tKe=["typed"],rKe=Y(BK,tKe,t=>{var{typed:e}=t;return e(BK,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),$K="re",nKe=["typed"],iKe=Y($K,nKe,t=>{var{typed:e}=t;return e($K,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),jK="not",aKe=["typed"],sKe=Y(jK,aKe,t=>{var{typed:e}=t;return e(jK,{"null | undefined":()=>!0,number:$de,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),VK="nullish",oKe=["typed","matrix","size","flatten","deepEqual"],dpe=Y(VK,oKe,t=>{var{typed:e,matrix:r,size:n,flatten:i,deepEqual:a}=t,s=qa({typed:e}),o=Nl({typed:e}),l=lpe({typed:e});return e(VK,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var f=n(u),h=n(c);if(a(f,h))return u;throw new kt(f,h)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,f)=>l(c,f,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,f)=>s(c,f,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,f)=>l(c,r(f),u)),"DenseMatrix, any":e.referToSelf(u=>(c,f)=>o(c,f,u,!1)),"Array, Array":e.referToSelf(u=>(c,f)=>l(r(c),r(f),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,f)=>l(r(c),f,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,f)=>s(r(c),f,u,!1)),"Array, any":e.referToSelf(u=>(c,f)=>o(r(c),f,u,!1).valueOf())})}),UK="or",lKe=["typed","matrix","equalScalar","DenseMatrix","concat"],ppe=Y(UK,lKe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=qa({typed:e}),o=mO({typed:e,equalScalar:n}),l=xi({typed:e,DenseMatrix:i}),u=Ir({typed:e,matrix:r,concat:a});return e(UK,{"number, number":p4,"Complex, Complex":function(f,h){return f.re!==0||f.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(f,h){return!f.isZero()&&!f.isNaN()||!h.isZero()&&!h.isNaN()},"bigint, bigint":p4,"Unit, Unit":e.referToSelf(c=>(f,h)=>c(f.value||0,h.value||0))},u({SS:o,DS:s,Ss:l}))}),zK="xor",uKe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],cKe=Y(zK,uKe,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:i,SparseMatrix:a}=t,s=qa({typed:e}),o=Nc({typed:e,SparseMatrix:a}),l=xi({typed:e,DenseMatrix:n}),u=Ir({typed:e,matrix:r,concat:i});return e(zK,{"number, number":m4,"Complex, Complex":function(f,h){return(f.re!==0||f.im!==0)!=(h.re!==0||h.im!==0)},"bigint, bigint":m4,"BigNumber, BigNumber":function(f,h){return(!f.isZero()&&!f.isNaN())!=(!h.isZero()&&!h.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,h)=>c(f.value||0,h.value||0))},u({SS:o,DS:s,Ss:l}))}),qK="concat",fKe=["typed","matrix","isInteger"],mpe=Y(qK,fKe,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(qK,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,l=-1,u,c=!1,f=[];for(s=0;s<o;s++){var h=a[s];if(ft(h)&&(c=!0),lt(h)||St(h)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=h.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>u)throw new yu(l,u+1)}else{var d=wt(h).valueOf(),p=xt(d);if(f[s]=d,u=l,l=p.length-1,s>0&&l!==u)throw new kt(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=pde(m,f.shift(),l);return c?r(m):m},"...string":function(a){return a.join("")}})}),HK="column",hKe=["typed","Index","matrix","range"],gpe=Y(HK,hKe,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(HK,{"Matrix, number":a,"Array, number":function(o,l){return a(n(wt(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pr(o,s.size()[1]);var l=i(0,s.size()[0]),u=new r(l,[o]),c=s.subset(u);return ft(c)?c:n([[c]])}}),WK="count",dKe=["typed","size","prod"],pKe=Y(WK,dKe,t=>{var{typed:e,size:r,prod:n}=t;return e(WK,{string:function(a){return a.length},"Matrix | Array":function(a){return n(r(a))}})}),GK="cross",mKe=["typed","matrix","subtract","multiply"],gKe=Y(GK,mKe,t=>{var{typed:e,matrix:r,subtract:n,multiply:i}=t;return e(GK,{"Matrix, Matrix":function(o,l){return r(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return r(a(o.toArray(),l))},"Array, Matrix":function(o,l){return r(a(o,l.toArray()))},"Array, Array":a});function a(s,o){var l=Math.max(xt(s).length,xt(o).length);s=pP(s),o=pP(o);var u=xt(s),c=xt(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(i(s[1],o[2]),i(s[2],o[1])),n(i(s[2],o[0]),i(s[0],o[2])),n(i(s[0],o[1]),i(s[1],o[0]))];return l>1?[f]:f}}),KK="diag",vKe=["typed","matrix","DenseMatrix","SparseMatrix"],yKe=Y(KK,vKe,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(KK,{Array:function(u){return a(u,0,xt(u),null)},"Array, number":function(u,c){return a(u,c,xt(u),null)},"Array, BigNumber":function(u,c){return a(u,c.toNumber(),xt(u),null)},"Array, string":function(u,c){return a(u,0,xt(u),c)},"Array, number, string":function(u,c,f){return a(u,c,xt(u),f)},"Array, BigNumber, string":function(u,c,f){return a(u,c.toNumber(),xt(u),f)},Matrix:function(u){return a(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return a(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return a(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return a(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return a(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return a(u,c.toNumber(),u.size(),f)}});function a(l,u,c,f){if(!nt(u))throw new TypeError("Second parameter in function diag must be an integer");var h=u>0?u:0,d=u<0?-u:0;switch(c.length){case 1:return s(l,u,f,c[0],d,h);case 2:return o(l,u,f,c,d,h)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,u,c,f,h,d){var p=[f+h,f+d];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?m:m.valueOf()}function o(l,u,c,f,h,d){if(ft(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?r(p,c):p:p.valueOf()}for(var m=Math.min(f[0]-h,f[1]-d),v=[],y=0;y<m;y++)v[y]=l[y+h][y+d];return c!==null?r(v):v}}),bKe="filter",wKe=["typed"],vpe=Y(bKe,wKe,t=>{var{typed:e}=t;return e("filter",{"Array, function":XK,"Matrix, function":function(n,i){return n.create(XK(n.valueOf(),i),n.datatype())},"Array, RegExp":LG,"Matrix, RegExp":function(n,i){return n.create(LG(n.valueOf(),i),n.datatype())}})});function XK(t,e){var r=Dv(e,t,"filter");return r.isUnary?FG(t,r.fn):FG(t,function(n,i,a){return r.fn(n,[i],a)})}var YK="flatten",xKe=["typed"],AKe=Y(YK,xKe,t=>{var{typed:e}=t;return e(YK,{Array:function(n){return er(n)},DenseMatrix:function(n){return n.create(er(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),x4="forEach",_Ke=["typed"],ype=Y(x4,_Ke,t=>{var{typed:e}=t;return e(x4,{"Array, function":EKe,"Matrix, function":function(n,i){n.forEach(i)}})});function EKe(t,e){var r=Dv(e,t,x4);gde(t,r.fn,r.isUnary)}var QK="getMatrixDataType",SKe=["typed"],CKe=Y(QK,SKe,t=>{var{typed:e}=t;return e(QK,{Array:function(n){return dO(n,br)},Matrix:function(n){return n.getDataType()}})}),ZK="identity",TKe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],DKe=Y(ZK,TKe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=t;return e(ZK,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return l(c,f,h)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var h=St(u)||St(c)?i:null;if(St(u)&&(u=u.toNumber()),St(c)&&(c=c.toNumber()),!nt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!nt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var d=h?new i(1):1,p=h?new h(0):0,m=[u,c];if(f){if(f==="sparse")return s.diagonal(m,d,0,p);if(f==="dense")return a.diagonal(m,d,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var v=yw([],m,p),y=u<c?u:c,w=0;w<y;w++)v[w][w]=d;return v}}),JK="kron",NKe=["typed","matrix","multiplyScalar"],PKe=Y(JK,NKe,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(JK,{"Matrix, Matrix":function(o,l){return r(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return r(a(o.toArray(),l))},"Array, Matrix":function(o,l){return r(a(o,l.toArray()))},"Array, Array":a});function i(s,o){return s.flatMap(l=>o.map(u=>n(l,u)))}function a(s,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=xt(s).length,c=xt(o).length;for(l=Math.max(u,c);u++<l;)s=[s];for(;c++<l;)o=[o]}return l===1?i(s,o):s.flatMap(f=>o.map(h=>a(f,h,l-1)))}}),PR="map",MKe=["typed"],bpe=Y(PR,MKe,t=>{var{typed:e}=t;return e(PR,{"Array, function":o,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>r([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function r(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,f=l.map(x=>x.isMatrix?x.size():xt(x)),h=gP(...f),d=l.length,p=c?(x,A)=>x.get(A):vP,m=l.map((x,A)=>{var E=f[A].map(()=>0);return x.isMatrix?x.get(E):vP(x,E)}),v=e.isTypedFunction(u)?s(u,m,h.map(()=>0),l):a(u,d);if(v<2){var y=i(v,u,null);return n(l,y)}var w=c?l.map(x=>x.isMatrix?x.create(km(x.toArray(),h),x.datatype()):l[0].create(km(x.valueOf(),h))):l.map(x=>x.isMatrix?km(x.toArray(),h):km(x,h)),b=i(v,u,w),_=(x,A)=>b([x,...w.slice(1).map(E=>p(E,A))],A);return c?w[0].map(_):o(w[0],_)}function n(l,u){var c=l[0],f=l.map(x=>x.isMatrix?x.valueOf():x),h=l.map(x=>x.isMatrix?x.size():xt(x)),d=gP(...h),p=h.map(x=>d.length-x.length),m=d.length-1,v=u.length>1,y=v?[]:null,w=_(f,0);if(c.isMatrix){var b=c.create();return b._data=w,b._size=d,b}else return w;function _(x){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=d[A],S=Array(E);if(A<m)for(var C=function(j){y&&(y[A]=j),S[j]=_(x.map((K,k)=>p[k]>A?K:K.length===1?K[0]:K[j]),A+1)},D=0;D<E;D++)C(D);else for(var N=function(j){y&&(y[A]=j),S[j]=u(x.map(K=>K.length===1?K[0]:K[j]),y?y.slice():void 0)},P=0;P<E;P++)N(P);return S}}function i(l,u,c){switch(l){case 0:return f=>u(...f);case 1:return(f,h)=>u(...f,h);case 2:return(f,h)=>u(...f,h,...c)}}function a(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var f=c.match(/\(.*?\)/);return/\.\.\./.test(f)||l.length>u+1?2:l.length===u+1?1:0}function s(l,u,c,f){return e.resolve(l,[...u,c,...f])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function o(l,u){var c=Dv(u,l,PR);return f4(l,c.fn,c.isUnary)}}),eX="diff",IKe=["typed","matrix","subtract","number"],wpe=Y(eX,IKe,t=>{var{typed:e,matrix:r,subtract:n,number:i}=t;return e(eX,{"Array | Matrix":function(c){return ft(c)?r(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!nt(f))throw new RangeError("Dimension must be a whole number");return ft(c)?r(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function a(u,c){if(ft(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(h=>{f.push(a(h,c-1))}),f}else{if(c===0)return s(u);throw RangeError("Cannot have negative dimension")}}function s(u){for(var c=[],f=u.length,h=1;h<f;h++)c.push(o(u[h-1],u[h]));return c}function o(u,c){ft(u)&&(u=u.toArray()),ft(c)&&(c=c.toArray());var f=Array.isArray(u),h=Array.isArray(c);if(f&&h)return l(u,c);if(!f&&!h)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],h=u.length,d=0;d<h;d++)f.push(o(u[d],c[d]));return f}}),OKe="ones",kKe=["typed","config","matrix","BigNumber"],RKe=Y(OKe,kKe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return a(u,f)}else return r.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),f=c?new i(1):1;if(o(l),u){var h=n(u);return l.length>0?h.resize(l,f):h}else{var d=[];return l.length>0?yw(d,l,f):d}}function s(l){var u=!1;return l.forEach(function(c,f,h){St(c)&&(u=!0,h[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!nt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function yV(){throw new Error('No "bignumber" implementation available')}function xpe(){throw new Error('No "fraction" implementation available')}function FKe(){throw new Error('No "matrix" implementation available')}var tX="range",LKe=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Ape=Y(tX,LKe,t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:l,add:u,isZero:c,isPositive:f}=t;return e(tX,{string:d,"string, boolean":d,number:function(y){throw new TypeError("Too few arguments to function range(): ".concat(y))},boolean:function(y){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(y,", number|bigint|BigNumber|Fraction"))},"number, number":function(y,w){return h(p(y,w,1,!1))},"number, number, number":function(y,w,b){return h(p(y,w,b,!1))},"number, number, boolean":function(y,w,b){return h(p(y,w,1,b))},"number, number, number, boolean":function(y,w,b,_){return h(p(y,w,b,_))},"bigint, bigint|number":function(y,w){return h(p(y,w,1n,!1))},"number, bigint":function(y,w){return h(p(BigInt(y),w,1n,!1))},"bigint, bigint|number, bigint|number":function(y,w,b){return h(p(y,w,BigInt(b),!1))},"number, bigint, bigint|number":function(y,w,b){return h(p(BigInt(y),w,BigInt(b),!1))},"bigint, bigint|number, boolean":function(y,w,b){return h(p(y,w,1n,b))},"number, bigint, boolean":function(y,w,b){return h(p(BigInt(y),w,1n,b))},"bigint, bigint|number, bigint|number, boolean":function(y,w,b,_){return h(p(y,w,BigInt(b),_))},"number, bigint, bigint|number, boolean":function(y,w,b,_){return h(p(BigInt(y),w,BigInt(b),_))},"BigNumber, BigNumber":function(y,w){var b=y.constructor;return h(p(y,w,new b(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,w,b){return h(p(y,w,b,!1))},"BigNumber, BigNumber, boolean":function(y,w,b){var _=y.constructor;return h(p(y,w,new _(1),b))},"BigNumber, BigNumber, BigNumber, boolean":function(y,w,b,_){return h(p(y,w,b,_))},"Fraction, Fraction":function(y,w){return h(p(y,w,1,!1))},"Fraction, Fraction, Fraction":function(y,w,b){return h(p(y,w,b,!1))},"Fraction, Fraction, boolean":function(y,w,b){return h(p(y,w,1,b))},"Fraction, Fraction, Fraction, boolean":function(y,w,b,_){return h(p(y,w,b,_))},"Unit, Unit, Unit":function(y,w,b){return h(p(y,w,b,!1))},"Unit, Unit, Unit, boolean":function(y,w,b,_){return h(p(y,w,b,_))}});function h(v){return r.matrix==="Matrix"?n?n(v):FKe():v}function d(v,y){var w=m(v);if(!w)throw new SyntaxError('String "'+v+'" is no valid range');return r.number==="BigNumber"?(i===void 0&&yV(),h(p(i(w.start),i(w.end),i(w.step)))):h(p(w.start,w.end,w.step,y))}function p(v,y,w,b){var _=[];if(c(w))throw new Error("Step must be non-zero");for(var x=f(w)?b?s:a:b?l:o,A=v;x(A,y);)_.push(A),A=u(A,w);return _}function m(v){var y=v.split(":"),w=y.map(function(_){return Number(_)}),b=w.some(function(_){return isNaN(_)});if(b)return null;switch(w.length){case 2:return{start:w[0],end:w[1],step:1};case 3:return{start:w[0],end:w[2],step:w[1]};default:return null}}}),rX="reshape",BKe=["typed","isInteger","matrix"],$Ke=Y(rX,BKe,t=>{var{typed:e,isInteger:r}=t;return e(rX,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),fV(i,a)}})}),jKe="resize",VKe=["config","matrix"],UKe=Y(jKe,VKe,t=>{var{config:e,matrix:r}=t;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new Uv("resize",arguments.length,2,3);if(ft(s)&&(s=s.valueOf()),St(s[0])&&(s=s.map(function(c){return St(c)?c.toNumber():c})),ft(a))return a.resize(s,o,!0);if(typeof a=="string")return n(a,s,o);var l=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return wt(a)}else{Array.isArray(a)||(a=[a]),a=wt(a);var u=yw(a,s,o);return l?r(u):u}};function n(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new kt(a.length,1);var o=a[0];if(typeof o!="number"||!nt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Ft(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=s;return l}else return i}}),nX="rotate",zKe=["typed","multiply","rotationMatrix"],qKe=Y(nX,zKe,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(nX,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var l=r(n(o),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),r(n(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){i(s,3);var u=r(n(o,l),s);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,l){return i(s,3),r(n(o,l),s)}});function i(a,s){var o=Array.isArray(a)?xt(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),iX="rotationMatrix",HKe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],WKe=Y(iX,HKe,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:h}=t;return e(iX,{"":function(){return r.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return d(b,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,_){return d(b,_)},"number | BigNumber | Complex | Unit, Array":function(b,_){var x=l(_);return p(x),y(b,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,_){p(_);var x=_.storage()||(r.matrix==="Matrix"?"dense":void 0);return y(b,_,x)},"number | BigNumber | Complex | Unit, Array, string":function(b,_,x){var A=l(_);return p(A),y(b,A,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,_,x){return p(_),y(b,_,x)}});function d(w,b){var _=St(w),x=_?new o(-1):-1,A=f(w),E=h(w),S=[[A,n(x,E)],[E,A]];return v(S,b)}function p(w){var b=w.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function m(w){return w.reduce((b,_)=>n(b,_))}function v(w,b){if(b){if(b==="sparse")return new c(w);if(b==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return w}function y(w,b,_){var x=s(b);if(x===0)throw new RangeError("Rotation around zero vector");var A=St(w)?o:null,E=A?new A(1):1,S=A?new A(-1):-1,C=A?new A(b.get([0])/x):b.get([0])/x,D=A?new A(b.get([1])/x):b.get([1])/x,N=A?new A(b.get([2])/x):b.get([2])/x,P=f(w),M=i(E,a(P)),j=h(w),K=i(P,m([C,C,M])),k=i(m([C,D,M]),m([S,N,j])),V=i(m([C,N,M]),m([D,j])),q=i(m([C,D,M]),m([N,j])),H=i(P,m([D,D,M])),ee=i(m([D,N,M]),m([S,C,j])),le=i(m([C,N,M]),m([S,D,j])),re=i(m([D,N,M]),m([C,j])),L=i(P,m([N,N,M])),ie=[[K,k,V],[q,H,ee],[le,re,L]];return v(ie,_)}}),aX="row",GKe=["typed","Index","matrix","range"],_pe=Y(aX,GKe,t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(aX,{"Matrix, number":a,"Array, number":function(o,l){return a(n(wt(o)),l).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Pr(o,s.size()[0]);var l=i(0,s.size()[1]),u=new r([o],l),c=s.subset(u);return ft(c)?c:n([[c]])}}),sX="size",KKe=["typed"],XKe=Y(sX,KKe,t=>{var{typed:e}=t;return e(sX,{Matrix:r=>r.size(),Array:xt,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),oX="squeeze",YKe=["typed"],QKe=Y(oX,YKe,t=>{var{typed:e}=t;return e(oX,{Array:function(n){return pP(wt(n))},Matrix:function(n){var i=pP(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return wt(n)}})}),lX="subset",ZKe=["typed","matrix","zeros","add"],Epe=Y(lX,ZKe,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t;return e(lX,{"Matrix, Index":function(o,l){return vw(l)?r():(dP(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,l){var u=s(r(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":eXe,"string, Index":JKe,"Matrix, Index, any, any":function(o,l,u,c){return vw(l)?o:(dP(o,l),o.clone().subset(l,a(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u,c){var f=s(r(o),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(r(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,l,u){return s(o,l,u,void 0)}}),"string, Index, string":uX,"string, Index, string, string":uX,"Object, Index, any":tXe});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o.isScalar())return s;var l=o.size();if(l.every(u=>u>0))try{return i(s,n(l))}catch{return s}else return s}});function JKe(t,e){if(!sO(e))throw new TypeError("Index expected");if(vw(e))return"";if(dP(Array.from(t),e),e.size().length!==1)throw new kt(e.size().length,1);var r=t.length;Pr(e.min()[0],r),Pr(e.max()[0],r);var n=e.dimension(0),i="";function a(s){i+=t.charAt(s)}return Number.isInteger(n)?a(n):n.forEach(a),i}function uX(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(vw(e))return t;if(dP(Array.from(t),e),e.size().length!==1)throw new kt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=Number.isInteger(i)?1:i.size()[0];if(a!==r.length)throw new kt(i.size()[0],r.length);var s=t.length;Pr(e.min()[0]),Pr(e.max()[0]);for(var o=[],l=0;l<s;l++)o[l]=t.charAt(l);function u(h,d){o[h]=r.charAt(d[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>s)for(var c=s-1,f=o.length;c<f;c++)o[c]||(o[c]=n);return o.join("")}function eXe(t,e){if(!vw(e)){if(e.size().length!==1)throw new kt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return ss(t,r)}}function tXe(t,e,r){if(vw(e))return t;if(e.size().length!==1)throw new kt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=wt(t);return mw(i,n,r),i}var cX="transpose",rXe=["typed","matrix"],nXe=Y(cX,rXe,t=>{var{typed:e,matrix:r}=t;return e(cX,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:wt});function n(s){var o=s.size(),l;switch(o.length){case 1:l=s.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Ft(o)+")");switch(s.storage()){case"dense":l=i(s,u,c);break;case"sparse":l=a(s,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Ft(o)+")")}return l}function i(s,o,l){for(var u=s._data,c=[],f,h=0;h<l;h++){f=c[h]=[];for(var d=0;d<o;d++)f[d]=wt(u[d][h])}return s.createDenseMatrix({data:c,size:[l,o],datatype:s._datatype})}function a(s,o,l){for(var u=s._values,c=s._index,f=s._ptr,h=u?[]:void 0,d=[],p=[],m=[],v=0;v<o;v++)m[v]=0;var y,w,b;for(y=0,w=c.length;y<w;y++)m[c[y]]++;for(var _=0,x=0;x<o;x++)p.push(_),_+=m[x],m[x]=p[x];for(p.push(_),b=0;b<l;b++)for(var A=f[b],E=f[b+1],S=A;S<E;S++){var C=m[c[S]]++;d[C]=b,u&&(h[C]=wt(u[S]))}return s.createSparseMatrix({values:h,index:d,ptr:p,size:[l,o],datatype:s._datatype})}}),fX="ctranspose",iXe=["typed","transpose","conj"],aXe=Y(fX,iXe,t=>{var{typed:e,transpose:r,conj:n}=t;return e(fX,{any:function(a){return n(r(a))}})}),hX="zeros",sXe=["typed","config","matrix","BigNumber"],oXe=Y(hX,sXe,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(hX,{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return a(u,f)}else return r.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var c=u.storage();return a(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return a(u.valueOf(),c)}});function a(l,u){var c=s(l),f=c?new i(0):0;if(o(l),u){var h=n(u);return l.length>0?h.resize(l,f):h}else{var d=[];return l.length>0?yw(d,l,f):d}}function s(l){var u=!1;return l.forEach(function(c,f,h){St(c)&&(u=!0,h[f]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!nt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),dX="fft",lXe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],uXe=Y(dX,lXe,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:l,dotDivide:u,conj:c,pow:f,ceil:h,log2:d}=t;return e(dX,{Array:p,Matrix:function(b){return b.create(p(b.valueOf()),b.datatype())}});function p(w){var b=xt(w);return b.length===1?y(w,b[0]):m(w.map(_=>p(_,b.slice(1))),0)}function m(w,b){var _=xt(w);if(b!==0)return new Array(_[0]).fill(0).map((A,E)=>m(w[E],b-1));if(_.length===1)return y(w);function x(A){var E=xt(A);return new Array(E[1]).fill(0).map((S,C)=>new Array(E[0]).fill(0).map((D,N)=>A[N][C]))}return x(m(x(w),1))}function v(w){for(var b=w.length,_=s(a(i(-1,i(l,o)),b)),x=[],A=1-b;A<b;A++)x.push(f(_,a(f(A,2),2)));for(var E=f(2,h(d(b+b-1))),S=[...new Array(b).fill(0).map((k,V)=>i(w[V],x[b-1+V])),...new Array(E-b).fill(0)],C=[...new Array(b+b-1).fill(0).map((k,V)=>a(1,x[V])),...new Array(E-(b+b-1)).fill(0)],D=y(S),N=y(C),P=new Array(E).fill(0).map((k,V)=>i(D[V],N[V])),M=u(c(p(c(P))),E),j=[],K=b-1;K<b+b-1;K++)j.push(i(M[K],x[K]));return j}function y(w){var b=w.length;if(b===1)return[w[0]];if(b%2===0){for(var _=[...y(w.filter((S,C)=>C%2===0)),...y(w.filter((S,C)=>C%2===1))],x=0;x<b/2;x++){var A=_[x],E=i(_[x+b/2],s(i(i(o,l),a(-x,b))));_[x]=n(A,E),_[x+b/2]=n(A,i(-1,E))}return _}else return v(w)}}),pX="ifft",cXe=["typed","fft","dotDivide","conj"],fXe=Y(pX,cXe,t=>{var{typed:e,fft:r,dotDivide:n,conj:i}=t;return e(pX,{"Array | Matrix":function(s){var o=ft(s)?s.size():xt(s);return n(i(r(i(s))),o.reduce((l,u)=>l*u,1))}})});function r_(t){"@babel/helpers - typeof";return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r_(t)}function hXe(t,e){if(r_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(r_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dXe(t){var e=hXe(t,"string");return r_(e)=="symbol"?e:e+""}function ei(t,e,r){return(e=dXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pXe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mX(Object(r),!0).forEach(function(n){ei(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mXe="solveODE",gXe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],vXe=Y(mXe,gXe,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,max:s,map:o,abs:l,isPositive:u,isNegative:c,larger:f,smaller:h,matrix:d,bignumber:p,unaryMinus:m}=t;function v(S){return function(C,D,N,P){var M=!(D.length===2&&(D.every(A)||D.every(go)));if(M)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var j=D[0],K=D[1],k=f(K,j),V=P.firstStep;if(V!==void 0&&!u(V))throw new Error('"firstStep" must be positive');var q=P.maxStep;if(q!==void 0&&!u(q))throw new Error('"maxStep" must be positive');var H=P.minStep;if(H&&c(H))throw new Error('"minStep" must be positive or zero');var ee=[j,K,V,H,q].filter(G=>G!==void 0);if(!(ee.every(A)||ee.every(go)))throw new Error('Inconsistent type of "t" dependant variables');for(var le=1,re=P.tol?P.tol:1e-4,L=P.minDelta?P.minDelta:.2,ie=P.maxDelta?P.maxDelta:5,X=P.maxIter?P.maxIter:1e4,pe=[j,K,...N,q,H].some(St),[de,ae,z,ne]=pe?[p(S.a),p(S.c),p(S.b),p(S.bp)]:[S.a,S.c,S.b,S.bp],fe=V?k?V:m(V):a(n(K,j),le),Q=[j],ye=[N],me=n(z,ne),De=0,Le=0,ze=_(k),Be=x(k);ze(Q[De],K);){var Ve=[];fe=Be(Q[De],K,fe),Ve.push(C(Q[De],ye[De]));for(var Ke=1;Ke<ae.length;++Ke)Ve.push(C(r(Q[De],i(ae[Ke],fe)),r(ye[De],i(fe,de[Ke],Ve))));var te=s(l(o(i(me,Ve),G=>go(G)?G.value:G)));te<re&&re/te>1/4&&(Q.push(r(Q[De],fe)),ye.push(r(ye[De],i(fe,z,Ve))),De++);var ce=.84*(re/te)**(1/5);if(h(ce,L)?ce=L:f(ce,ie)&&(ce=ie),ce=pe?p(ce):ce,fe=i(fe,ce),q&&f(l(fe),q)?fe=k?q:m(q):H&&h(l(fe),H)&&(fe=k?H:m(H)),Le++,Le>X)throw new Error("Maximum number of iterations reached, try changing options")}return{t:Q,y:ye}}}function y(S,C,D,N){var P=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],M=[null,1/2,3/4,1],j=[2/9,1/3,4/9,0],K=[7/24,1/4,1/3,1/8],k={a:P,c:M,b:j,bp:K};return v(k)(S,C,D,N)}function w(S,C,D,N){var P=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],M=[null,1/5,3/10,4/5,8/9,1,1],j=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],K=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],k={a:P,c:M,b:j,bp:K};return v(k)(S,C,D,N)}function b(S,C,D,N){var P=N.method?N.method:"RK45",M={RK23:y,RK45:w};if(P.toUpperCase()in M){var j=pXe({},N);return delete j.method,M[P.toUpperCase()](S,C,D,j)}else{var K=Object.keys(M).map(V=>'"'.concat(V,'"')),k="".concat(K.slice(0,-1).join(", ")," and ").concat(K.slice(-1));throw new Error('Unavailable method "'.concat(P,'". Available methods are ').concat(k))}}function _(S){return S?h:f}function x(S){var C=S?f:h;return function(D,N,P){var M=r(D,P);return C(M,N)?n(N,D):P}}function A(S){return St(S)||lt(S)}function E(S,C,D,N){var P=b(S,C.toArray(),D.toArray(),N);return{t:d(P.t),y:d(P.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":E,"function, Array, Array":(S,C,D)=>b(S,C,D,{}),"function, Matrix, Matrix":(S,C,D)=>E(S,C,D,{}),"function, Array, number | BigNumber | Unit":(S,C,D)=>{var N=b(S,C,[D],{});return{t:N.t,y:N.y.map(P=>P[0])}},"function, Matrix, number | BigNumber | Unit":(S,C,D)=>{var N=b(S,C.toArray(),[D],{});return{t:d(N.t),y:d(N.y.map(P=>P[0]))}},"function, Array, number | BigNumber | Unit, Object":(S,C,D,N)=>{var P=b(S,C,[D],N);return{t:P.t,y:P.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit, Object":(S,C,D,N)=>{var P=b(S,C.toArray(),[D],N);return{t:d(P.t),y:d(P.y.map(M=>M[0]))}}})}),yXe="erf",bXe=["typed"],wXe=Y(yXe,bXe,t=>{var{typed:e}=t;return e("name",{number:function(s){var o=Math.abs(s);return o>=_Xe?Wd(s):o<=xXe?Wd(s)*r(o):o<=4?Wd(s)*(1-n(o)):Wd(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>Ct(s,a))});function r(a){var s=a*a,o=kc[0][4]*s,l=s,u;for(u=0;u<3;u+=1)o=(o+kc[0][u])*s,l=(l+uy[0][u])*s;return a*(o+kc[0][3])/(l+uy[0][3])}function n(a){var s=kc[1][8]*a,o=a,l;for(l=0;l<7;l+=1)s=(s+kc[1][l])*a,o=(o+uy[1][l])*a;var u=(s+kc[1][7])/(o+uy[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(a){var s=1/(a*a),o=kc[2][5]*s,l=s,u;for(u=0;u<4;u+=1)o=(o+kc[2][u])*s,l=(l+uy[2][u])*s;var c=s*(o+kc[2][4])/(l+uy[2][4]);c=(AXe-c)/a,s=parseInt(a*16)/16;var f=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),xXe=.46875,AXe=.5641895835477563,kc=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],uy=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],_Xe=Math.pow(2,53),gX="zeta",EXe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],SXe=Y(gX,EXe,t=>{var{typed:e,config:r,multiply:n,pow:i,divide:a,factorial:s,equal:o,smallerEq:l,isBounded:u,isNegative:c,gamma:f,sin:h,subtract:d,add:p,Complex:m,BigNumber:v,pi:y}=t;return e(gX,{number:E=>w(E,S=>S,()=>20),BigNumber:E=>w(E,S=>new v(S),()=>Math.abs(Math.log10(r.relTol))),Complex:b});function w(E,S,C){return o(E,0)?S(-.5):o(E,1)?S(NaN):u(E)?_(E,S,C,D=>D):c(E)?S(NaN):S(1)}function b(E){return E.re===0&&E.im===0?new m(-.5):E.re===1?new m(NaN,NaN):E.re===1/0&&E.im===0?new m(1):E.im===1/0||E.re===-1/0?new m(NaN,NaN):_(E,S=>S,S=>Math.round(1.3*15+.9*Math.abs(S.im)),S=>S.re)}function _(E,S,C,D){var N=C(E);if(D(E)>-(N-1)/2)return A(E,S(N),S);var P=n(i(2,E),i(S(y),d(E,1)));return P=n(P,h(n(a(S(y),2),E))),P=n(P,f(d(1,E))),n(P,_(d(1,E),S,C,D))}function x(E,S){for(var C=E,D=E;l(D,S);D=p(D,1)){var N=a(n(s(p(S,d(D,1))),i(4,D)),n(s(d(S,D)),s(n(2,D))));C=p(C,N)}return n(S,C)}function A(E,S,C){for(var D=a(1,n(x(C(0),S),d(1,i(2,d(1,E))))),N=C(0),P=C(1);l(P,S);P=p(P,1))N=p(N,a(n((-1)**(P-1),x(P,S)),i(P,E)));return n(D,N)}}),vX="mode",CXe=["typed","isNaN","isNumeric"],TXe=Y(vX,CXe,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(vX,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=er(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<a.length;c++){var f=a[c];if(n(f)&&r(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===u?l.push(f):o[f]>u&&(u=o[f],l=[f])}return l}});function ds(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+br(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+br(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var yX="prod",DXe=["typed","config","multiplyScalar","numeric"],NXe=Y(yX,DXe,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:i}=t;return e(yX,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(Pp(s,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw ds(u,"prod",l)}}),typeof o=="string"&&(o=i(o,Hp(o,r))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),bX="format",PXe=["typed"],MXe=Y(bX,PXe,t=>{var{typed:e}=t;return e(bX,{any:Ft,"any, Object | function | number | BigNumber":Ft})}),wX="bin",IXe=["typed","format"],OXe=Y(wX,IXe,t=>{var{typed:e,format:r}=t;return e(wX,{"number | BigNumber":function(i){return r(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"bin",wordSize:a})}})}),xX="oct",kXe=["typed","format"],RXe=Y(xX,kXe,t=>{var{typed:e,format:r}=t;return e(xX,{"number | BigNumber":function(i){return r(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"oct",wordSize:a})}})}),AX="hex",FXe=["typed","format"],LXe=Y(AX,FXe,t=>{var{typed:e,format:r}=t;return e(AX,{"number | BigNumber":function(i){return r(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return r(i,{notation:"hex",wordSize:a})}})}),Spe=/\$([\w.]+)/g,_X="print",BXe=["typed"],Cpe=Y(_X,BXe,t=>{var{typed:e}=t;return e(_X,{"string, Object | Array":EX,"string, Object | Array, number | Object":EX})});function EX(t,e,r){return t.replace(Spe,function(n,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?Pn(s)?s:Ft(s,r):n})}var SX="to",$Xe=["typed","matrix","concat"],jXe=Y(SX,$Xe,t=>{var{typed:e,matrix:r,concat:n}=t,i=Ir({typed:e,matrix:r,concat:n});return e(SX,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),CX="toBest",VXe=["typed"],UXe=Y(CX,VXe,t=>{var{typed:e}=t;return e(CX,{Unit:r=>r.toBest(),"Unit, string":(r,n)=>r.toBest(n.split(",")),"Unit, string, Object":(r,n,i)=>r.toBest(n.split(","),i),"Unit, Array":(r,n)=>r.toBest(n),"Unit, Array, Object":(r,n,i)=>r.toBest(n,i)})}),TX="isPrime",zXe=["typed"],qXe=Y(TX,zXe,t=>{var{typed:e}=t;return e(TX,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(w,b,_){for(var x=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),w=w.mul(w).mod(_)):(b=b.sub(1),x=w.mul(x).mod(_));return x}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var h=2;h<=f;h+=1)c.push(f)}for(var d=0;d<c.length;d+=1){var p=c[d],m=s(n.sub(n).add(p),u,n);if(!m.eq(1)){for(var v=0,y=m;!y.eq(n.sub(1));v+=1,y=y.mul(y).mod(n))if(v===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>Ct(n,r))})}),HXe="numeric",WXe=["number","?bignumber","?fraction"],GXe=Y(HXe,WXe,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:r?s=>r(s):yV,bigint:s=>BigInt(s),Fraction:n?s=>n(s):xpe};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=br(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in a))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(a).join(", "));return l===c?o:a[l](o)}}),DX="divideScalar",KXe=["typed","numeric"],XXe=Y(DX,KXe,t=>{var{typed:e,numeric:r}=t;return e(DX,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),NX="pow",YXe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],QXe=Y(NX,YXe,t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:a,inv:s,number:o,fraction:l,Complex:u}=t;return e(NX,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||r.predictable?p.pow(m):new u(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(d,p)=>d**p,"Fraction, Fraction":function(p,m){var v=p.pow(m);if(v!=null)return v;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(p,m){return h(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(d,p){if(r.predictable&&!nt(p)&&d<0)try{var m=l(p),v=o(m);if((p===v||Math.abs((p-v)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-d,p)}catch{}return r.predictable&&(d<-1&&p===1/0||d>-1&&d<0&&p===-1/0)?NaN:nt(p)||d>=0||r.predictable?Pde(d,p):d*d<1&&p===1/0||d*d>1&&p===-1/0?0:new u(d,0).pow(p,0)}function f(d,p){if(!nt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=xt(d);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(s(d),-p)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):w}for(var v=n(m[0]).valueOf(),y=d;p>=1;)(p&1)===1&&(v=i(y,v)),p>>=1,y=i(y,y);return v}function h(d,p){return a(f(d.valueOf(),p))}}),cy="Number of decimals in function round must be an integer",PX="round",ZXe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],JXe=Y(PX,ZXe,t=>{var{typed:e,config:r,matrix:n,equalScalar:i,zeros:a,BigNumber:s,DenseMatrix:o}=t,l=ya({typed:e,equalScalar:i}),u=xi({typed:e,DenseMatrix:o}),c=Nl({typed:e});function f(h){return Math.abs(YS(h).exponent)}return e(PX,{number:function(d){var p=U1(d,f(r.relTol)),m=qi(d,p,r.relTol,r.absTol)?p:d;return U1(m)},"number, number":function(d,p){var m=f(r.relTol);if(p>=m)return U1(d,p);var v=U1(d,m),y=qi(d,v,r.relTol,r.absTol)?v:d;return U1(y,p)},"number, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(cy);return new s(d).toDecimalPlaces(p.toNumber())},Complex:function(d){return d.round()},"Complex, number":function(d,p){if(p%1)throw new TypeError(cy);return d.round(p)},"Complex, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(cy);var m=p.toNumber();return d.round(m)},BigNumber:function(d){var p=new s(d).toDecimalPlaces(f(r.relTol)),m=El(d,p,r.relTol,r.absTol)?p:d;return m.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(cy);var m=f(r.relTol);if(p>=m)return d.toDecimalPlaces(p.toNumber());var v=d.toDecimalPlaces(m),y=El(d,v,r.relTol,r.absTol)?v:d;return y.toDecimalPlaces(p.toNumber())},bigint:h=>h,"bigint, number":(h,d)=>h,"bigint, BigNumber":(h,d)=>h,Fraction:function(d){return d.round()},"Fraction, number":function(d,p){if(p%1)throw new TypeError(cy);return d.round(p)},"Fraction, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(cy);return d.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(d,p,m){var v=d.toNumeric(m);return m.multiply(h(v,p))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>h(d,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(d,p,m)=>Ct(d,v=>h(v,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(d,p)=>h(d,0,p)),"Array | Matrix":e.referToSelf(h=>d=>Ct(d,h,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(d,p)=>l(d,p,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(d,p)=>c(d,p,h,!1)),"Array, number | BigNumber":e.referToSelf(h=>(d,p)=>c(n(d),p,h,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(h=>(d,p)=>i(d,0)?a(p.size(),p.storage()):u(p,d,h,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(h=>(d,p)=>i(d,0)?a(p.size(),p.storage()):c(p,d,h,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(h=>(d,p)=>c(n(p),d,h,!0).valueOf())})}),MX="log",eYe=["config","typed","typeOf","divideScalar","Complex"],tYe=Math.log(16),rYe=Y(MX,eYe,t=>{var{typed:e,typeOf:r,config:n,divideScalar:i,Complex:a}=t;function s(l){return l.log()}function o(l){return s(new a(l,0))}return e(MX,{number:function(u){return u>=0||n.predictable?zG(u):o(u)},bigint:gV(tYe,zG,n,o),Complex:s,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(r(u)==="Fraction"&&r(c)==="Fraction"){var f=u.log(c);if(f!==null)return f}return i(l(u),l(c))})})}),IX="log1p",nYe=["typed","config","divideScalar","log","Complex"],iYe=Y(IX,nYe,t=>{var{typed:e,config:r,divideScalar:n,log:i,Complex:a}=t;return e(IX,{number:function(l){return l>=-1||r.predictable?G9e(l):s(new a(l,0))},Complex:s,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||r.predictable?u.ln():s(new a(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>Ct(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function s(o){var l=o.re+1;return new a(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),OX="nthRoots",aYe=["config","typed","divideScalar","Complex"],sYe=Y(OX,aYe,t=>{var{typed:e,config:r,divideScalar:n,Complex:i}=t,a=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function s(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),h=o.abs(),d=[],p=Math.pow(h,1/l),m=0;m<l;m++){var v=(c+4*m)/l;if(v===Math.round(v)){d.push(a[v%4](p));continue}d.push(new i({r:p,phi:(f+2*Math.PI*m)/l}))}return d}return e(OX,{Complex:function(l){return s(l,2)},"Complex, number":s})}),kX="dotPow",oYe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],lYe=Y(kX,oYe,t=>{var{typed:e,equalScalar:r,matrix:n,pow:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=qa({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=ya({typed:e,equalScalar:r}),f=xi({typed:e,DenseMatrix:a}),h=Ir({typed:e,matrix:n,concat:s}),d={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(d[p]=i.signatures[p]);var m=e(d);return e(kX,h({elop:m,SS:u,DS:l,Ss:c,sS:f}))}),RX="dotDivide",uYe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],cYe=Y(RX,uYe,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=wu({typed:e,equalScalar:n}),u=qa({typed:e}),c=Nc({typed:e,SparseMatrix:o}),f=ya({typed:e,equalScalar:n}),h=xi({typed:e,DenseMatrix:a}),d=Ir({typed:e,matrix:r,concat:s});return e(RX,d({elop:i,SS:c,DS:u,SD:l,Ss:f,sS:h}))});function QS(t){var{DenseMatrix:e}=t;return function(n,i,a){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Ft(s)+")");var o=s[0],l=s[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+Ft(s)+")");var u=[];if(ft(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<o;h++)u[h]=[f[h]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(lP(i)){if(a){u=[];for(var d=0;d<o;d++)u[d]=[f[d][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Om(i)){for(var p=0;p<o;p++)u[p]=[0];for(var m=i._values,v=i._index,y=i._ptr,w=y[1],b=y[0];b<w;b++){var _=v[b];u[_][0]=m[b]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(vr(i)){var x=xt(i);if(x.length===1){if(x[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<o;A++)u[A]=[i[A]];return new e({data:u,size:[o,1]})}if(x.length===2){if(x[0]!==o||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<o;E++)u[E]=[i[E][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var FX="lsolve",fYe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],hYe=Y(FX,fYe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=QS({DenseMatrix:o});return e(FX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.valueOf()}});function u(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=[],y=f._data,w=0;w<m;w++){var b=d[w][0]||0,_=void 0;if(s(b,0))_=0;else{var x=y[w][w];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");_=n(b,x);for(var A=w+1;A<p;A++)d[A]=[a(d[A][0]||0,i(_,y[A][w]))]}v[w]=[_]}return new o({data:v,size:[p,1]})}function c(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=[],_=0;_<m;_++){var x=d[_][0]||0;if(s(x,0))b[_]=[0];else{for(var A=0,E=[],S=[],C=w[_],D=w[_+1],N=C;N<D;N++){var P=y[N];P===_?A=v[N]:P>_&&(E.push(v[N]),S.push(P))}if(s(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var M=n(x,A),j=0,K=S.length;j<K;j++){var k=S[j];d[k]=[a(d[k][0]||0,i(M,E[j]))]}b[_]=[M]}}return new o({data:b,size:[p,1]})}}),LX="usolve",dYe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],pYe=Y(LX,dYe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=QS({DenseMatrix:o});return e(LX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.valueOf()}});function u(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=[],y=f._data,w=m-1;w>=0;w--){var b=d[w][0]||0,_=void 0;if(s(b,0))_=0;else{var x=y[w][w];if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");_=n(b,x);for(var A=w-1;A>=0;A--)d[A]=[a(d[A][0]||0,i(_,y[A][w]))]}v[w]=[_]}return new o({data:v,size:[p,1]})}function c(f,h){h=l(f,h,!0);for(var d=h._data,p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=[],_=m-1;_>=0;_--){var x=d[_][0]||0;if(s(x,0))b[_]=[0];else{for(var A=0,E=[],S=[],C=w[_],D=w[_+1],N=D-1;N>=C;N--){var P=y[N];P===_?A=v[N]:P<_&&(E.push(v[N]),S.push(P))}if(s(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var M=n(x,A),j=0,K=S.length;j<K;j++){var k=S[j];d[k]=[a(d[k][0],i(M,E[j]))]}b[_]=[M]}}return new o({data:b,size:[p,1]})}}),BX="lsolveAll",mYe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],gYe=Y(BX,mYe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=QS({DenseMatrix:o});return e(BX,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.map(v=>v.valueOf())}});function u(f,h){for(var d=[l(f,h,!0)._data.map(S=>S[0])],p=f._data,m=f._size[0],v=f._size[1],y=0;y<v;y++)for(var w=d.length,b=0;b<w;b++){var _=d[b];if(s(p[y][y],0))if(s(_[y],0)){if(b===0){var A=[..._];A[y]=1;for(var E=y+1;E<v;E++)A[E]=a(A[E],p[E][y]);d.push(A)}}else{if(b===0)return[];d.splice(b,1),b-=1,w-=1}else{_[y]=n(_[y],p[y][y]);for(var x=y+1;x<v;x++)_[x]=a(_[x],i(_[y],p[x][y]))}}return d.map(S=>new o({data:S.map(C=>[C]),size:[m,1]}))}function c(f,h){for(var d=[l(f,h,!0)._data.map(le=>le[0])],p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=0;b<m;b++)for(var _=d.length,x=0;x<_;x++){for(var A=d[x],E=[],S=[],C=w[b],D=w[b+1],N=0,P=C;P<D;P++){var M=y[P];M===b?N=v[P]:M>b&&(E.push(v[P]),S.push(M))}if(s(N,0))if(s(A[b],0)){if(x===0){var V=[...A];V[b]=1;for(var q=0,H=S.length;q<H;q++){var ee=S[q];V[ee]=a(V[ee],E[q])}d.push(V)}}else{if(x===0)return[];d.splice(x,1),x-=1,_-=1}else{A[b]=n(A[b],N);for(var j=0,K=S.length;j<K;j++){var k=S[j];A[k]=a(A[k],i(A[b],E[j]))}}}return d.map(le=>new o({data:le.map(re=>[re]),size:[p,1]}))}}),$X="usolveAll",vYe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],yYe=Y($X,vYe,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,l=QS({DenseMatrix:o});return e($X,{"SparseMatrix, Array | Matrix":function(h,d){return c(h,d)},"DenseMatrix, Array | Matrix":function(h,d){return u(h,d)},"Array, Array | Matrix":function(h,d){var p=r(h),m=u(p,d);return m.map(v=>v.valueOf())}});function u(f,h){for(var d=[l(f,h,!0)._data.map(S=>S[0])],p=f._data,m=f._size[0],v=f._size[1],y=v-1;y>=0;y--)for(var w=d.length,b=0;b<w;b++){var _=d[b];if(s(p[y][y],0))if(s(_[y],0)){if(b===0){var A=[..._];A[y]=1;for(var E=y-1;E>=0;E--)A[E]=a(A[E],p[E][y]);d.push(A)}}else{if(b===0)return[];d.splice(b,1),b-=1,w-=1}else{_[y]=n(_[y],p[y][y]);for(var x=y-1;x>=0;x--)_[x]=a(_[x],i(_[y],p[x][y]))}}return d.map(S=>new o({data:S.map(C=>[C]),size:[m,1]}))}function c(f,h){for(var d=[l(f,h,!0)._data.map(le=>le[0])],p=f._size[0],m=f._size[1],v=f._values,y=f._index,w=f._ptr,b=m-1;b>=0;b--)for(var _=d.length,x=0;x<_;x++){for(var A=d[x],E=[],S=[],C=w[b],D=w[b+1],N=0,P=D-1;P>=C;P--){var M=y[P];M===b?N=v[P]:M<b&&(E.push(v[P]),S.push(M))}if(s(N,0))if(s(A[b],0)){if(x===0){var V=[...A];V[b]=1;for(var q=0,H=S.length;q<H;q++){var ee=S[q];V[ee]=a(V[ee],E[q])}d.push(V)}}else{if(x===0)return[];d.splice(x,1),x-=1,_-=1}else{A[b]=n(A[b],N);for(var j=0,K=S.length;j<K;j++){var k=S[j];A[k]=a(A[k],i(A[b],E[j]))}}}return d.map(le=>new o({data:le.map(re=>[re]),size:[p,1]}))}}),bYe="matAlgo08xS0Sid",wYe=["typed","equalScalar"],bV=Y(bYe,wYe,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._index,p=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new kt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!o||!h)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=c[0],w=c[1],b,_=r,x=0,A=s;typeof f=="string"&&f===v&&f!=="mixed"&&(b=f,_=e.find(r,[b,b]),x=e.convert(0,b),A=e.find(s,[b,b]));for(var E=[],S=[],C=[],D=[],N=[],P,M,j,K,k=0;k<w;k++){C[k]=S.length;var V=k+1;for(M=u[k],j=u[k+1],P=M;P<j;P++)K=l[P],N[K]=V,D[K]=o[P],S.push(K);for(M=p[k],j=p[k+1],P=M;P<j;P++)K=d[P],N[K]===V&&(D[K]=A(D[K],h[P]));for(P=C[k];P<S.length;){K=S[P];var q=D[K];_(q,x)?S.splice(P,1):(E.push(q),P++)}}return C[w]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[y,w],datatype:f===i._datatype&&v===a._datatype?b:void 0})}}),wV=Y("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(r(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(r(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,r(a)).valueOf())}}),jX="leftShift",xYe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],AYe=Y(jX,xYe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=Gp({typed:e}),l=wu({typed:e,equalScalar:n}),u=bV({typed:e,equalScalar:n}),c=Vv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Nl({typed:e}),d=Ir({typed:e,matrix:r,concat:s}),p=wV({typed:e,matrix:r});return e(jX,{"number, number":Rde,"BigNumber, BigNumber":VGe,"bigint, bigint":(m,v)=>m<<v,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),VX="rightArithShift",_Ye=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],EYe=Y(VX,_Ye,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=Gp({typed:e}),l=wu({typed:e,equalScalar:n}),u=bV({typed:e,equalScalar:n}),c=Vv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Nl({typed:e}),d=Ir({typed:e,matrix:r,concat:s}),p=wV({typed:e,matrix:r});return e(VX,{"number, number":Fde,"BigNumber, BigNumber":UGe,"bigint, bigint":(m,v)=>m>>v,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),UX="rightLogShift",SYe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],CYe=Y(UX,SYe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=t,o=Gp({typed:e}),l=wu({typed:e,equalScalar:n}),u=bV({typed:e,equalScalar:n}),c=Vv({typed:e,DenseMatrix:a}),f=ya({typed:e,equalScalar:n}),h=Nl({typed:e}),d=Ir({typed:e,matrix:r,concat:s}),p=wV({typed:e,matrix:r});return e(UX,{"number, number":Lde,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():f(v,y,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,y)=>n(y,0)?v.clone():h(v,y,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):c(y,v,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(v,y)=>n(v,0)?i(y.size(),y.storage()):h(y,v,m,!0))},p,d({SS:u,DS:o,SD:l}))}),zX="and",TYe=["typed","matrix","equalScalar","zeros","not","concat"],Tpe=Y(zX,TYe,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=wu({typed:e,equalScalar:n}),l=gO({typed:e,equalScalar:n}),u=ya({typed:e,equalScalar:n}),c=Nl({typed:e}),f=Ir({typed:e,matrix:r,concat:s});return e(zX,{"number, number":g4,"Complex, Complex":function(d,p){return(d.re!==0||d.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(d,p){return!d.isZero()&&!p.isZero()&&!d.isNaN()&&!p.isNaN()},"bigint, bigint":g4,"Unit, Unit":e.referToSelf(h=>(d,p)=>h(d.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(h=>(d,p)=>a(p)?i(d.size(),d.storage()):u(d,p,h,!1)),"DenseMatrix, any":e.referToSelf(h=>(d,p)=>a(p)?i(d.size(),d.storage()):c(d,p,h,!1)),"any, SparseMatrix":e.referToSelf(h=>(d,p)=>a(d)?i(d.size(),d.storage()):u(p,d,h,!0)),"any, DenseMatrix":e.referToSelf(h=>(d,p)=>a(d)?i(d.size(),d.storage()):c(p,d,h,!0)),"Array, any":e.referToSelf(h=>(d,p)=>h(r(d),p).valueOf()),"any, Array":e.referToSelf(h=>(d,p)=>h(d,r(p)).valueOf())},f({SS:l,DS:o}))}),EP="compare",DYe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],NYe=Y(EP,DYe,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:l}=t,u=qa({typed:e}),c=mO({typed:e,equalScalar:n}),f=xi({typed:e,DenseMatrix:o}),h=Ir({typed:e,matrix:i,concat:l}),d=Qw({typed:e});return e(EP,PYe({typed:e,config:r}),{"boolean, boolean":function(m,v){return m===v?0:m>v?1:-1},"BigNumber, BigNumber":function(m,v){return El(m,v,r.relTol,r.absTol)?new a(0):new a(m.cmp(v))},"bigint, bigint":function(m,v){return m===v?0n:m>v?1n:-1n},"Fraction, Fraction":function(m,v){return new s(m.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:c,DS:u,Ss:f}))}),PYe=Y(EP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(EP,{"number, number":function(i,a){return qi(i,a,r.relTol,r.absTol)?0:i>a?1:-1}})}),MYe=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,l=function(b){return t.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(r).replace(i,"")||"",f=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(u.match(s),16)||f.length!==1&&u.match(a)&&Date.parse(u),p=parseInt(c.match(s),16)||d&&c.match(a)&&Date.parse(c)||null,m,v;if(p){if(d<p)return-1;if(d>p)return 1}for(var y=0,w=Math.max(f.length,h.length);y<w;y++){if(m=!(f[y]||"").match(o)&&parseFloat(f[y])||f[y]||0,v=!(h[y]||"").match(o)&&parseFloat(h[y])||h[y]||0,isNaN(m)!==isNaN(v))return isNaN(m)?1:-1;if(typeof m!=typeof v&&(m+="",v+=""),m<v)return-1;if(m>v)return 1}return 0};const fy=Sl(MYe);var qX="compareNatural",IYe=["typed","compare"],OYe=Y(qX,IYe,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(qX,{"any, any":i});function i(l,u){var c=br(l),f=br(u),h;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return h=r(l,u),h.toString()!=="0"?h>0?1:-1:fy(c,f);var d=["Array","DenseMatrix","SparseMatrix"];if(d.includes(c)||d.includes(f))return h=a(i,l,u),h!==0?h:fy(c,f);if(c!==f)return fy(c,f);if(c==="Complex")return kYe(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):s(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return fy(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(l,u,c){return Om(u)&&Om(c)?s(l,u.toJSON().values,c.toJSON().values):Om(u)?a(l,u.toArray(),c):Om(c)?a(l,u,c.toArray()):lP(u)?a(l,u.toJSON().data,c):lP(c)?a(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?s(l,u,c):a(l,u,[c]):a(l,[u],c)}function s(l,u,c){for(var f=0,h=Math.min(u.length,c.length);f<h;f++){var d=l(u[f],c[f]);if(d!==0)return d}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var f=Object.keys(u),h=Object.keys(c);f.sort(fy),h.sort(fy);var d=s(l,f,h);if(d!==0)return d;for(var p=0;p<f.length;p++){var m=l(u[f[p]],c[h[p]]);if(m!==0)return m}return 0}});function kYe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var HX="compareText",RYe=["typed","matrix","concat"];u4.signature="any, any";var FYe=Y(HX,RYe,t=>{var{typed:e,matrix:r,concat:n}=t,i=Ir({typed:e,matrix:r,concat:n});return e(HX,u4,i({elop:u4,Ds:!0}))}),SP="equal",LYe=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],BYe=Y(SP,LYe,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=qa({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=xi({typed:e,DenseMatrix:i}),c=Ir({typed:e,matrix:r});return e(SP,$Ye({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:o,Ss:u}))}),$Ye=Y(SP,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(SP,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:r(i,a)}})}),WX="equalText",jYe=["typed","compareText","isZero"],VYe=Y(WX,jYe,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(WX,{"any, any":function(a,s){return n(r(a,s))}})}),CP="smaller",UYe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],zYe=Y(CP,UYe,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=qa({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=xi({typed:e,DenseMatrix:a}),f=Ir({typed:e,matrix:i,concat:s}),h=Qw({typed:e});function d(p,m){return p.lt(m)&&!El(p,m,r.relTol,r.absTol)}return e(CP,qYe({typed:e,config:r}),{"boolean, boolean":(p,m)=>p<m,"BigNumber, BigNumber":d,"bigint, bigint":(p,m)=>p<m,"Fraction, Fraction":(p,m)=>p.compare(m)===-1,"Fraction, BigNumber":function(m,v){return d(n(m),v)},"BigNumber, Fraction":function(m,v){return d(m,n(v))},"Complex, Complex":function(m,v){throw new TypeError("No ordering relation is defined for complex numbers")}},h,f({SS:u,DS:l,Ss:c}))}),qYe=Y(CP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(CP,{"number, number":function(i,a){return i<a&&!qi(i,a,r.relTol,r.absTol)}})}),TP="smallerEq",HYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],WYe=Y(TP,HYe,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=qa({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=xi({typed:e,DenseMatrix:i}),c=Ir({typed:e,matrix:n,concat:a}),f=Qw({typed:e});return e(TP,GYe({typed:e,config:r}),{"boolean, boolean":(h,d)=>h<=d,"BigNumber, BigNumber":function(d,p){return d.lte(p)||El(d,p,r.relTol,r.absTol)},"bigint, bigint":(h,d)=>h<=d,"Fraction, Fraction":(h,d)=>h.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:o,Ss:u}))}),GYe=Y(TP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(TP,{"number, number":function(i,a){return i<=a||qi(i,a,r.relTol,r.absTol)}})}),DP="larger",KYe=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],XYe=Y(DP,KYe,t=>{var{typed:e,config:r,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=qa({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=xi({typed:e,DenseMatrix:a}),f=Ir({typed:e,matrix:i,concat:s}),h=Qw({typed:e});function d(p,m){return p.gt(m)&&!El(p,m,r.relTol,r.absTol)}return e(DP,YYe({typed:e,config:r}),{"boolean, boolean":(p,m)=>p>m,"BigNumber, BigNumber":d,"bigint, bigint":(p,m)=>p>m,"Fraction, Fraction":(p,m)=>p.compare(m)===1,"Fraction, BigNumber":function(m,v){return d(n(m),v)},"BigNumber, Fraction":function(m,v){return d(m,n(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,f({SS:u,DS:l,Ss:c}))}),YYe=Y(DP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(DP,{"number, number":function(i,a){return i>a&&!qi(i,a,r.relTol,r.absTol)}})}),NP="largerEq",QYe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],ZYe=Y(NP,QYe,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=t,o=qa({typed:e}),l=Nc({typed:e,SparseMatrix:s}),u=xi({typed:e,DenseMatrix:i}),c=Ir({typed:e,matrix:n,concat:a}),f=Qw({typed:e});return e(NP,JYe({typed:e,config:r}),{"boolean, boolean":(h,d)=>h>=d,"BigNumber, BigNumber":function(d,p){return d.gte(p)||El(d,p,r.relTol,r.absTol)},"bigint, bigint":function(d,p){return d>=p},"Fraction, Fraction":(h,d)=>h.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:o,Ss:u}))}),JYe=Y(NP,["typed","config"],t=>{var{typed:e,config:r}=t;return e(NP,{"number, number":function(i,a){return i>=a||qi(i,a,r.relTol,r.absTol)}})}),GX="deepEqual",eQe=["typed","equal"],tQe=Y(GX,eQe,t=>{var{typed:e,equal:r}=t;return e(GX,{"any, any":function(a,s){return n(a.valueOf(),s.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!n(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:r(i,a)}}),PP="unequal",rQe=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],nQe=Y(PP,rQe,t=>{var{typed:e,config:r,equalScalar:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=t,l=qa({typed:e}),u=Nc({typed:e,SparseMatrix:o}),c=xi({typed:e,DenseMatrix:a}),f=Ir({typed:e,matrix:i,concat:s});return e(PP,iQe({typed:e,equalScalar:n}),f({elop:h,SS:u,DS:l,Ss:c}));function h(d,p){return!n(d,p)}}),iQe=Y(PP,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(PP,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!r(i,a)}})}),KX="partitionSelect",aQe=["typed","isNumeric","isNaN","compare"],sQe=Y(KX,aQe,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:i}=t,a=i,s=(u,c)=>-i(u,c);return e(KX,{"Array | Matrix, number":function(c,f){return o(c,f,a)},"Array | Matrix, number, string":function(c,f,h){if(h==="asc")return o(c,f,a);if(h==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,f){if(!nt(c)||c<0)throw new Error("k must be a non-negative integer");if(ft(u)){var h=u.size();if(h.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var h=0;h<u.length;h++)if(r(u[h])&&n(u[h]))return u[h];for(var d=0,p=u.length-1;d<p;){for(var m=d,v=p,y=u[Math.floor(Math.random()*(p-d+1))+d];m<v;)if(f(u[m],y)>=0){var w=u[v];u[v]=u[m],u[m]=w,--v}else++m;f(u[m],y)>0&&--m,c<=m?p=m:d=m+1}return u[c]}}),XX="sort",oQe=["typed","matrix","compare","compareNatural"],lQe=Y(XX,oQe,t=>{var{typed:e,matrix:r,compare:n,compareNatural:i}=t,a=n,s=(c,f)=>-n(c,f);return e(XX,{Array:function(f){return l(f),f.sort(a)},Matrix:function(f){return u(f),r(f.toArray().sort(a),f.storage())},"Array, function":function(f,h){return l(f),f.sort(h)},"Matrix, function":function(f,h){return u(f),r(f.toArray().sort(h),f.storage())},"Array, string":function(f,h){return l(f),f.sort(o(h))},"Matrix, string":function(f,h){return u(f),r(f.toArray().sort(o(h)),f.storage())}});function o(c){if(c==="asc")return a;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(xt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),YX="max",uQe=["typed","config","numeric","larger","isNaN"],Dpe=Y(YX,uQe,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t;return e(YX,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return pO(u,c.valueOf(),s)},"...":function(u){if(Kw(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function s(l,u){try{return i(l,u)?l:u}catch(c){throw ds(c,"max",u)}}function o(l){var u;if(Pp(l,function(c){try{(a(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw ds(f,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,Hp(u,r))),u}}),QX="min",cQe=["typed","config","numeric","smaller","isNaN"],Npe=Y(QX,cQe,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t;return e(QX,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return pO(u,c.valueOf(),s)},"...":function(u){if(Kw(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function s(l,u){try{return i(l,u)?l:u}catch(c){throw ds(c,"min",u)}}function o(l){var u;if(Pp(l,function(c){try{(a(c)||u===void 0||i(c,u))&&(u=c)}catch(f){throw ds(f,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,Hp(u,r))),u}}),fQe="ImmutableDenseMatrix",hQe=["smaller","DenseMatrix"],dQe=Y(fQe,hQe,t=>{var{smaller:e,DenseMatrix:r}=t;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Pn(a))throw new Error("Invalid datatype: "+a);if(ft(i)||vr(i)){var s=new r(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&vr(i.data)&&vr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+br(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=r.prototype.subset.call(this,i);return ft(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:wt(this._data),size:wt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),pQe="Index",mQe=["ImmutableDenseMatrix","getMatrixDataType"],gQe=Y(pQe,mQe,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,s=arguments.length;a<s;a++){var o=a<0||arguments.length<=a?void 0:arguments[a],l=vr(o),u=ft(o),c=typeof o,f=null;if(lV(o))this._dimensions.push(o),this._isScalar=!1;else if(l||u){var h=void 0;this._isScalar=!1,r(o)==="boolean"?(l&&(h=i(ZX(o).valueOf())),u&&(h=i(ZX(o._data).valueOf())),f=o.valueOf().length):h=i(o.valueOf()),this._dimensions.push(h)}else if(c==="number")this._dimensions.push(o);else if(c==="bigint")this._dimensions.push(Number(o));else if(c==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(!lt(a[s])||!nt(a[s]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=a,l._size=[a.length],l}return n.prototype.clone=function(){var a=new n;return a._dimensions=wt(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Pn(l)||lt(l)?1:l.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Pn(l)||lt(l)?l:l.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a[s]=Pn(l)||lt(l)?l:l.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){var s;return lt(a)&&(s=this._dimensions[a])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&Pn(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];a.push(Pn(l)||lt(l)?l:l.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var l=this._dimensions[s];Pn(l)?a.push(JSON.stringify(l)):a.push(l.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function ZX(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var vQe="FibonacciHeap",yQe=["smaller","larger"],bQe=Y(vQe,yQe,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var h={key:c,value:f,degree:0};if(this._minimum){var d=this._minimum;h.left=d,h.right=d.right,d.right=h,h.right.left=h,e(c,d.key)&&(this._minimum=h)}else h.left=h,h.right=h,this._minimum=h;return this._size++,h},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,h=c.degree,d=c.child;h>0;){var p=d.right;d.left.right=d.right,d.right.left=d.left,d.left=f,d.right=f.right,f.right=d,d.right.left=d,d.parent=null,d=p,h--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,h){f.key=h;var d=f.parent;return d&&e(f.key,d.key)&&(s(c,f,d),o(c,d)),e(f.key,c.key)&&(c=f),c}function s(c,f,h){f.left.right=f.right,f.right.left=f.left,h.degree--,h.child===f&&(h.child=f.right),h.degree===0&&(h.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var h=f.parent;h&&(f.mark?(s(c,f,h),o(h)):f.mark=!0)}var l=function(f,h){f.left.right=f.right,f.right.left=f.left,f.parent=h,h.child?(f.left=h.child,f.right=h.child.right,h.child.right=f,f.right.left=f):(h.child=f,f.right=f,f.left=f),h.degree++,f.mark=!1};function u(c,f){var h=Math.floor(Math.log(f)*n)+1,d=new Array(h),p=0,m=c;if(m)for(p++,m=m.right;m!==c;)p++,m=m.right;for(var v;p>0;){for(var y=m.degree,w=m.right;v=d[y],!!v;){if(r(m.key,v.key)){var b=v;v=m,m=b}l(v,m),d[y]=null,y++}d[y]=m,m=w,p--}c=null;for(var _=0;_<h;_++)v=d[_],v&&(c?(v.left.right=v.right,v.right.left=v.left,v.left=c,v.right=c.right,c.right=v,v.right.left=v,e(v.key,c.key)&&(c=v)):c=v);return c}return i},{isClass:!0}),wQe="Spa",xQe=["addScalar","equalScalar","FibonacciHeap"],AQe=Y(wQe,xQe,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=a&&(r(f.value,0)||o(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var h=0;h<c.length;h++){var d=c[h];f=l.insert(d.key,d.value),u[f.key]=f}},i.prototype.swap=function(a,s){var o=this._values[a],l=this._values[s];if(!o&&l)o=this._heap.insert(a,l.value),this._heap.remove(l),this._values[a]=o,this._values[s]=void 0;else if(o&&!l)l=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=l,this._values[a]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0});function _Qe(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),a=0,s=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,r===u)){if(!e){a=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(l){var u=i[l],c=++a;if(n[c]=l,i[l]=c,!u)return++e,e<=t?void 0:(l=n[r],s(l),l);if(delete n[u],r===u)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:s,clear:function(){e=a=0,r=1,n=Object.create(null),i=Object.create(null)}}}function ZS(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:_Qe(r||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var o=t.apply(t,i);return n.cache.values.set(s,o),n.cache.values.delete(n.cache.lru.hit(s)),o}}var EQe=ZS(function(t){return new t(1).exp()},{hasher:vO}),SQe=ZS(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:vO}),xV=ZS(function(t){return t.acos(-1)},{hasher:vO}),CQe=ZS(function(t){return xV(t).times(2)},{hasher:vO});function vO(t){return t[0].precision}function JX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JX(Object(r),!0).forEach(function(n){ei(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var TQe="Unit",DQe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],NQe=Y(TQe,DQe,t=>{var{on:e,config:r,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:s,pow:o,abs:l,fix:u,round:c,equal:f,isNumeric:h,format:d,number:p,Complex:m,BigNumber:v,Fraction:y}=t,w=p,b=!1,_=!0;function x(te,ce){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(te==null||h(te)||Vf(te)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=b,this.skipAutomaticSimplification=_,ce===void 0)this.units=[],this.dimensions=ie.map(Z=>0);else if(typeof ce=="string"){var G=x.parse(ce);this.units=G.units,this.dimensions=G.dimensions}else if(go(ce)&&ce.value===null)this.fixPrefix=ce.fixPrefix,this.skipAutomaticSimplification=ce.skipAutomaticSimplification,this.dimensions=ce.dimensions.slice(0),this.units=ce.units.map(Z=>jn({},Z));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(te)}Object.defineProperty(x,"name",{value:"Unit"}),x.prototype.constructor=x,x.prototype.type="Unit",x.prototype.isUnit=!0;var A,E,S;function C(){for(;S===" "||S==="	";)P()}function D(te){return te>="0"&&te<="9"||te==="."}function N(te){return te>="0"&&te<="9"}function P(){E++,S=A.charAt(E)}function M(te){E=te,S=A.charAt(E)}function j(){var te="",ce=E;if(S==="+"?P():S==="-"&&(te+=S,P()),!D(S))return M(ce),null;if(S==="."){if(te+=S,P(),!N(S))return M(ce),null}else{for(;N(S);)te+=S,P();S==="."&&(te+=S,P())}for(;N(S);)te+=S,P();if(S==="E"||S==="e"){var G="",Z=E;if(G+=S,P(),(S==="+"||S==="-")&&(G+=S,P()),!N(S))return M(Z),te;for(te=te+G;N(S);)te+=S,P()}return te}function K(){for(var te="";N(S)||x.isValidAlpha(S);)te+=S,P();var ce=te.charAt(0);return x.isValidAlpha(ce)?te:null}function k(te){return S===te?(P(),te):null}x.parse=function(te,ce){if(ce=ce||{},A=te,E=-1,S="",typeof A!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var G=new x;G.units=[];var Z=1,oe=!1;P(),C();var he=j(),ve=null;if(he){if(r.number==="BigNumber")ve=new v(he);else if(r.number==="Fraction")try{ve=new y(he)}catch{ve=parseFloat(he)}else ve=parseFloat(he);C(),k("*")?(Z=1,oe=!0):k("/")&&(Z=-1,oe=!0)}for(var ge=[],Pe=1;;){for(C();S==="(";)ge.push(Z),Pe*=Z,Z=1,P(),C();var Se=void 0;if(S){var $e=S;if(Se=K(),Se===null)throw new SyntaxError('Unexpected "'+$e+'" in "'+A+'" at index '+E.toString())}else break;var Ce=V(Se);if(Ce===null)throw new SyntaxError('Unit "'+Se+'" not found.');var rt=Z*Pe;if(C(),k("^")){C();var Mt=j();if(Mt===null)throw new SyntaxError('In "'+te+'", "^" must be followed by a floating-point number');rt*=Mt}G.units.push({unit:Ce.unit,prefix:Ce.prefix,power:rt});for(var Wt=0;Wt<ie.length;Wt++)G.dimensions[Wt]+=(Ce.unit.dimensions[Wt]||0)*rt;for(C();S===")";){if(ge.length===0)throw new SyntaxError('Unmatched ")" in "'+A+'" at index '+E.toString());Pe/=ge.pop(),P(),C()}if(oe=!1,k("*")?(Z=1,oe=!0):k("/")?(Z=-1,oe=!0):Z=1,Ce.unit.base){var ht=Ce.unit.base.key;Q.auto[ht]={unit:Ce.unit,prefix:Ce.prefix}}}if(C(),S)throw new SyntaxError('Could not parse: "'+te+'"');if(oe)throw new SyntaxError('Trailing characters: "'+te+'"');if(ge.length!==0)throw new SyntaxError('Unmatched "(" in "'+A+'"');if(G.units.length===0&&!ce.allowNoUnits)throw new SyntaxError('"'+te+'" contains no units');return G.value=ve!==void 0?G._normalize(ve):null,G},x.prototype.clone=function(){var te=new x;te.fixPrefix=this.fixPrefix,te.skipAutomaticSimplification=this.skipAutomaticSimplification,te.value=wt(this.value),te.dimensions=this.dimensions.slice(0),te.units=[];for(var ce=0;ce<this.units.length;ce++){te.units[ce]={};for(var G in this.units[ce])Je(this.units[ce],G)&&(te.units[ce][G]=this.units[ce][G])}return te},x.prototype.valueType=function(){return br(this.value)},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(te){if(te==null||this.units.length===0)return te;for(var ce=te,G=x._getNumberConverter(br(te)),Z=0;Z<this.units.length;Z++){var oe=G(this.units[Z].unit.value),he=G(this.units[Z].prefix.value),ve=G(this.units[Z].power);ce=a(ce,o(a(oe,he),ve))}return ce},x.prototype._denormalize=function(te,ce){if(te==null||this.units.length===0)return te;for(var G=te,Z=x._getNumberConverter(br(te)),oe=0;oe<this.units.length;oe++){var he=Z(this.units[oe].unit.value),ve=Z(this.units[oe].prefix.value),ge=Z(this.units[oe].power);G=s(G,o(a(he,ve),ge))}return G};var V=ZS(te=>{if(Je(z,te)){var ce=z[te],G=ce.prefixes[""];return{unit:ce,prefix:G}}for(var Z in z)if(Je(z,Z)&&Pqe(te,Z)){var oe=z[Z],he=te.length-Z.length,ve=te.substring(0,he),ge=Je(oe.prefixes,ve)?oe.prefixes[ve]:void 0;if(ge!==void 0)return{unit:oe,prefix:ge}}return null},{hasher:te=>te[0],limit:100});x.isValuelessUnit=function(te){return V(te)!==null},x.prototype.hasBase=function(te){if(typeof te=="string"&&(te=X[te]),!te)return!1;for(var ce=0;ce<ie.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(te.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(te){for(var ce=0;ce<ie.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(te.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equals=function(te){return this.equalBase(te)&&f(this.value,te.value)},x.prototype.multiply=function(te){for(var ce=this.clone(),G=go(te)?te:new x(te),Z=0;Z<ie.length;Z++)ce.dimensions[Z]=(this.dimensions[Z]||0)+(G.dimensions[Z]||0);for(var oe=0;oe<G.units.length;oe++){var he=MR({},G.units[oe]);ce.units.push(he)}if(this.value!==null||G.value!==null){var ve=this.value===null?this._normalize(H(G.value)):this.value,ge=G.value===null?G._normalize(H(this.value)):G.value;ce.value=a(ve,ge)}else ce.value=null;return go(te)&&(ce.skipAutomaticSimplification=!1),q(ce)},x.prototype.divideInto=function(te){return new x(te).divide(this)},x.prototype.divide=function(te){for(var ce=this.clone(),G=go(te)?te:new x(te),Z=0;Z<ie.length;Z++)ce.dimensions[Z]=(this.dimensions[Z]||0)-(G.dimensions[Z]||0);for(var oe=0;oe<G.units.length;oe++){var he=MR(MR({},G.units[oe]),{},{power:-G.units[oe].power});ce.units.push(he)}if(this.value!==null||G.value!==null){var ve=this.value===null?this._normalize(H(G.value)):this.value,ge=G.value===null?G._normalize(H(this.value)):G.value;ce.value=s(ve,ge)}else ce.value=null;return go(te)&&(ce.skipAutomaticSimplification=!1),q(ce)},x.prototype.pow=function(te){for(var ce=this.clone(),G=0;G<ie.length;G++)ce.dimensions[G]=(this.dimensions[G]||0)*te;for(var Z=0;Z<ce.units.length;Z++)ce.units[Z].power*=te;return ce.value!==null?ce.value=o(ce.value,te):ce.value=null,ce.skipAutomaticSimplification=!1,q(ce)};function q(te){return te.equalBase(X.NONE)&&te.value!==null&&!r.predictable?te.value:te}function H(te){var ce=x._getNumberConverter(br(te));return ce(1)}x.prototype.abs=function(){var te=this.clone();if(te.value!==null)if(te._isDerived()||te.units.length===0||te.units[0].unit.offset===0)te.value=l(te.value);else{var ce=te._numberConverter(),G=ce(te.units[0].unit.value),Z=ce(te.units[0].unit.offset),oe=a(G,Z);te.value=i(l(n(te.value,oe)),oe)}for(var he in te.units)(te.units[he].unit.name==="VA"||te.units[he].unit.name==="VAR")&&(te.units[he].unit=z.W);return te},x.prototype.to=function(te){var ce=this.value===null?this._normalize(1):this.value,G;if(typeof te=="string")G=x.parse(te);else if(go(te))G=te.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(G))throw new Error("Units do not match ('".concat(G.toString(),"' != '").concat(this.toString(),"')"));if(G.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||G.units.length===0||this.units[0].unit.offset===G.units[0].unit.offset)G.value=wt(ce);else{var Z=x._getNumberConverter(br(ce)),oe=this.units[0].unit.value,he=this.units[0].unit.offset,ve=a(oe,he),ge=G.units[0].unit.value,Pe=G.units[0].unit.offset,Se=a(ge,Pe);G.value=n(ce,Z(i(ve,Se)))}return G.fixPrefix=!0,G.skipAutomaticSimplification=!0,G},x.prototype.toNumber=function(te){return w(this.toNumeric(te))},x.prototype.toNumeric=function(te){var ce;return te?ce=this.to(te):ce=this.clone(),ce._isDerived()||ce.units.length===0?ce._denormalize(ce.value):ce._denormalize(ce.value,ce.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},x.fromJSON=function(te){var ce,G,Z,oe=new x(te.value,(ce=te.unit)!==null&&ce!==void 0?ce:void 0);return oe.fixPrefix=(G=te.fixPrefix)!==null&&G!==void 0?G:b,oe.skipAutomaticSimplification=(Z=te.skipSimp)!==null&&Z!==void 0?Z:_,oe},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var te=this.clone(),ce=[],G;for(var Z in ye)if(Je(ye,Z)&&te.hasBase(X[Z])){G=Z;break}if(G==="NONE")te.units=[];else{var oe;if(G&&Je(ye,G)&&(oe=ye[G]),oe)te.units=[{unit:oe.unit,prefix:oe.prefix,power:1}];else{for(var he=!1,ve=0;ve<ie.length;ve++){var ge=ie[ve];Math.abs(te.dimensions[ve]||0)>1e-12&&(Je(ye,ge)?ce.push({unit:ye[ge].unit,prefix:ye[ge].prefix,power:te.dimensions[ve]||0}):he=!0)}ce.length<te.units.length&&!he&&(te.units=ce)}}return te},x.prototype.toSI=function(){for(var te=this.clone(),ce=[],G=0;G<ie.length;G++){var Z=ie[G];if(Math.abs(te.dimensions[G]||0)>1e-12)if(Je(Q.si,Z))ce.push({unit:Q.si[Z].unit,prefix:Q.si[Z].prefix,power:te.dimensions[G]||0});else throw new Error("Cannot express custom unit "+Z+" in SI units")}return te.units=ce,te.fixPrefix=!0,te.skipAutomaticSimplification=!0,this.value!==null?(te.value=null,this.to(te)):te},x.prototype.formatUnits=function(){for(var te="",ce="",G=0,Z=0,oe=0;oe<this.units.length;oe++)this.units[oe].power>0?(G++,te+=" "+this.units[oe].prefix.name+this.units[oe].unit.name,Math.abs(this.units[oe].power-1)>1e-15&&(te+="^"+this.units[oe].power)):this.units[oe].power<0&&Z++;if(Z>0)for(var he=0;he<this.units.length;he++)this.units[he].power<0&&(G>0?(ce+=" "+this.units[he].prefix.name+this.units[he].unit.name,Math.abs(this.units[he].power+1)>1e-15&&(ce+="^"+-this.units[he].power)):(ce+=" "+this.units[he].prefix.name+this.units[he].unit.name,ce+="^"+this.units[he].power));te=te.substr(1),ce=ce.substr(1),G>1&&Z>0&&(te="("+te+")"),Z>1&&G>0&&(ce="("+ce+")");var ve=te;return G>0&&Z>0&&(ve+=" / "),ve+=ce,ve},x.prototype.toBest=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(te&&!Array.isArray(te))throw new Error("Invalid unit type. Expected string or Unit.");var G=this.units[0].unit.prefixes;if(te&&te.length>0){var Z=te.map(ve=>{var ge=null;if(typeof ve=="string"){if(ge=x.parse(ve),!ge)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!go(ve))throw new Error("Invalid unit type. Expected compatible string or Unit.");ge===null&&(ge=ve.clone());try{return this.to(ge.formatUnits()),ge}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),oe=Z.map(ve=>ve.units[0].prefix);this.units[0].unit.prefixes=oe.reduce((ve,ge)=>(ve[ge.name]=ge,ve),{}),this.units[0].prefix=oe[0]}var he=ee(this,ce).simp;return this.units[0].unit.prefixes=G,he.fixPrefix=!0,he},x.prototype.format=function(te){var{simp:ce,valueStr:G,unitStr:Z}=ee(this,te),oe=G;return ce.value&&Vf(ce.value)&&(oe="("+oe+")"),Z.length>0&&oe.length>0&&(oe+=" "),oe+=Z,oe};function ee(te){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=te.skipAutomaticSimplification||te.value===null?te.clone():te.simplify();le(G),re(G,ce.offset);var Z=G._denormalize(G.value),oe=G.value!==null?d(Z,ce||{}):"",he=G.formatUnits();return{simp:G,valueStr:oe,unitStr:he}}function le(te){var ce=!1;typeof te.value<"u"&&te.value!==null&&Vf(te.value)&&(ce=Math.abs(te.value.re)<1e-14);for(var G in te.units)Je(te.units,G)&&te.units[G].unit&&(te.units[G].unit.name==="VA"&&ce?te.units[G].unit=z.VAR:te.units[G].unit.name==="VAR"&&!ce&&(te.units[G].unit=z.VA))}function re(te,ce){te.units.length===1&&!te.fixPrefix&&Math.abs(te.units[0].power-Math.round(te.units[0].power))<1e-14&&(te.units[0].prefix=te._bestPrefix(ce))}x.prototype._bestPrefix=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ce=this.value!==null?l(this.value):0,G=l(this.units[0].unit.value),Z=this.units[0].prefix;if(ce===0)return Z;var oe=this.units[0].power,he=Math.log(ce/Math.pow(Z.value*G,oe))/Math.LN10-te;if(he>-2.200001&&he<1.800001)return Z;he=Math.abs(he);var ve=this.units[0].unit.prefixes;for(var ge in ve)if(Je(ve,ge)){var Pe=ve[ge];if(Pe.scientific){var Se=Math.abs(Math.log(ce/Math.pow(Pe.value*G,oe))/Math.LN10-te);(Se<he||Se===he&&Pe.name.length<Z.name.length)&&(Z=Pe,he=Se)}}return Z},x.prototype.splitUnit=function(te){for(var ce=this.clone(),G=[],Z=0;Z<te.length&&(ce=ce.to(te[Z]),Z!==te.length-1);Z++){var oe=ce.toNumeric(),he=c(oe),ve=void 0,ge=f(he,oe);ge?ve=he:ve=u(ce.toNumeric());var Pe=new x(ve,te[Z].toString());G.push(Pe),ce=i(ce,Pe)}for(var Se=0,$e=0;$e<G.length;$e++)Se=n(Se,G[$e].value);return f(Se,this.value)&&(ce.value=0),G.push(ce),G};var L={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};L.SHORTLONG=jn({},L.SHORT,L.LONG),L.BINARY_SHORT=jn({},L.BINARY_SHORT_SI,L.BINARY_SHORT_IEC),L.BINARY_LONG=jn({},L.BINARY_LONG_SI,L.BINARY_LONG_IEC);var ie=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],X={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var pe in X)Je(X,pe)&&(X[pe].key=pe);var de={},ae={name:"",base:de,value:1,offset:0,dimensions:ie.map(te=>0)},z={meter:{name:"meter",base:X.LENGTH,prefixes:L.LONG,value:1,offset:0},inch:{name:"inch",base:X.LENGTH,prefixes:L.NONE,value:.0254,offset:0},foot:{name:"foot",base:X.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yard:{name:"yard",base:X.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mile:{name:"mile",base:X.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},link:{name:"link",base:X.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rod:{name:"rod",base:X.LENGTH,prefixes:L.NONE,value:5.0292,offset:0},chain:{name:"chain",base:X.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:X.LENGTH,prefixes:L.NONE,value:1e-10,offset:0},m:{name:"m",base:X.LENGTH,prefixes:L.SHORT,value:1,offset:0},in:{name:"in",base:X.LENGTH,prefixes:L.NONE,value:.0254,offset:0},ft:{name:"ft",base:X.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yd:{name:"yd",base:X.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mi:{name:"mi",base:X.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},li:{name:"li",base:X.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rd:{name:"rd",base:X.LENGTH,prefixes:L.NONE,value:5.02921,offset:0},ch:{name:"ch",base:X.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},mil:{name:"mil",base:X.LENGTH,prefixes:L.NONE,value:254e-7,offset:0},m2:{name:"m2",base:X.SURFACE,prefixes:L.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:X.SURFACE,prefixes:L.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:X.SURFACE,prefixes:L.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:X.SURFACE,prefixes:L.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:X.SURFACE,prefixes:L.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:X.SURFACE,prefixes:L.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:X.SURFACE,prefixes:L.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:X.SURFACE,prefixes:L.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:X.SURFACE,prefixes:L.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:X.SURFACE,prefixes:L.NONE,value:1e4,offset:0},m3:{name:"m3",base:X.VOLUME,prefixes:L.CUBIC,value:1,offset:0},L:{name:"L",base:X.VOLUME,prefixes:L.SHORT,value:.001,offset:0},l:{name:"l",base:X.VOLUME,prefixes:L.SHORT,value:.001,offset:0},litre:{name:"litre",base:X.VOLUME,prefixes:L.LONG,value:.001,offset:0},cuin:{name:"cuin",base:X.VOLUME,prefixes:L.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:X.VOLUME,prefixes:L.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:X.VOLUME,prefixes:L.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:X.VOLUME,prefixes:L.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:X.VOLUME,prefixes:L.NONE,value:15e-6,offset:0},drop:{name:"drop",base:X.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:X.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},minim:{name:"minim",base:X.VOLUME,prefixes:L.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:X.VOLUME,prefixes:L.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:X.VOLUME,prefixes:L.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:X.VOLUME,prefixes:L.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:X.VOLUME,prefixes:L.NONE,value:1e-6,offset:0},cup:{name:"cup",base:X.VOLUME,prefixes:L.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:X.VOLUME,prefixes:L.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:X.VOLUME,prefixes:L.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:X.VOLUME,prefixes:L.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:X.VOLUME,prefixes:L.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:X.VOLUME,prefixes:L.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:X.VOLUME,prefixes:L.NONE,value:.238480942392,offset:0},g:{name:"g",base:X.MASS,prefixes:L.SHORT,value:.001,offset:0},gram:{name:"gram",base:X.MASS,prefixes:L.LONG,value:.001,offset:0},ton:{name:"ton",base:X.MASS,prefixes:L.SHORT,value:907.18474,offset:0},t:{name:"t",base:X.MASS,prefixes:L.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:X.MASS,prefixes:L.LONG,value:1e3,offset:0},grain:{name:"grain",base:X.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:X.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:X.MASS,prefixes:L.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:X.MASS,prefixes:L.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:X.MASS,prefixes:L.NONE,value:45.359237,offset:0},stick:{name:"stick",base:X.MASS,prefixes:L.NONE,value:.115,offset:0},stone:{name:"stone",base:X.MASS,prefixes:L.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:X.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:X.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:X.MASS,prefixes:L.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:X.MASS,prefixes:L.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:X.MASS,prefixes:L.NONE,value:45.359237,offset:0},s:{name:"s",base:X.TIME,prefixes:L.SHORT,value:1,offset:0},min:{name:"min",base:X.TIME,prefixes:L.NONE,value:60,offset:0},h:{name:"h",base:X.TIME,prefixes:L.NONE,value:3600,offset:0},second:{name:"second",base:X.TIME,prefixes:L.LONG,value:1,offset:0},sec:{name:"sec",base:X.TIME,prefixes:L.LONG,value:1,offset:0},minute:{name:"minute",base:X.TIME,prefixes:L.NONE,value:60,offset:0},hour:{name:"hour",base:X.TIME,prefixes:L.NONE,value:3600,offset:0},day:{name:"day",base:X.TIME,prefixes:L.NONE,value:86400,offset:0},week:{name:"week",base:X.TIME,prefixes:L.NONE,value:7*86400,offset:0},month:{name:"month",base:X.TIME,prefixes:L.NONE,value:2629800,offset:0},year:{name:"year",base:X.TIME,prefixes:L.NONE,value:31557600,offset:0},decade:{name:"decade",base:X.TIME,prefixes:L.NONE,value:315576e3,offset:0},century:{name:"century",base:X.TIME,prefixes:L.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:X.TIME,prefixes:L.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:X.FREQUENCY,prefixes:L.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:X.FREQUENCY,prefixes:L.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:X.ANGLE,prefixes:L.SHORT,value:1,offset:0},radian:{name:"radian",base:X.ANGLE,prefixes:L.LONG,value:1,offset:0},deg:{name:"deg",base:X.ANGLE,prefixes:L.SHORT,value:null,offset:0},degree:{name:"degree",base:X.ANGLE,prefixes:L.LONG,value:null,offset:0},grad:{name:"grad",base:X.ANGLE,prefixes:L.SHORT,value:null,offset:0},gradian:{name:"gradian",base:X.ANGLE,prefixes:L.LONG,value:null,offset:0},cycle:{name:"cycle",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:X.ANGLE,prefixes:L.NONE,value:null,offset:0},A:{name:"A",base:X.CURRENT,prefixes:L.SHORT,value:1,offset:0},ampere:{name:"ampere",base:X.CURRENT,prefixes:L.LONG,value:1,offset:0},K:{name:"K",base:X.TEMPERATURE,prefixes:L.SHORT,value:1,offset:0},degC:{name:"degC",base:X.TEMPERATURE,prefixes:L.SHORT,value:1,offset:273.15},degF:{name:"degF",base:X.TEMPERATURE,prefixes:L.SHORT,value:new y(5,9),offset:459.67},degR:{name:"degR",base:X.TEMPERATURE,prefixes:L.SHORT,value:new y(5,9),offset:0},kelvin:{name:"kelvin",base:X.TEMPERATURE,prefixes:L.LONG,value:1,offset:0},celsius:{name:"celsius",base:X.TEMPERATURE,prefixes:L.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:X.TEMPERATURE,prefixes:L.LONG,value:new y(5,9),offset:459.67},rankine:{name:"rankine",base:X.TEMPERATURE,prefixes:L.LONG,value:new y(5,9),offset:0},mol:{name:"mol",base:X.AMOUNT_OF_SUBSTANCE,prefixes:L.SHORT,value:1,offset:0},mole:{name:"mole",base:X.AMOUNT_OF_SUBSTANCE,prefixes:L.LONG,value:1,offset:0},cd:{name:"cd",base:X.LUMINOUS_INTENSITY,prefixes:L.SHORT,value:1,offset:0},candela:{name:"candela",base:X.LUMINOUS_INTENSITY,prefixes:L.LONG,value:1,offset:0},N:{name:"N",base:X.FORCE,prefixes:L.SHORT,value:1,offset:0},newton:{name:"newton",base:X.FORCE,prefixes:L.LONG,value:1,offset:0},dyn:{name:"dyn",base:X.FORCE,prefixes:L.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:X.FORCE,prefixes:L.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:X.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:X.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:X.FORCE,prefixes:L.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:X.FORCE,prefixes:L.NONE,value:9.80665,offset:0},J:{name:"J",base:X.ENERGY,prefixes:L.SHORT,value:1,offset:0},joule:{name:"joule",base:X.ENERGY,prefixes:L.LONG,value:1,offset:0},erg:{name:"erg",base:X.ENERGY,prefixes:L.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:X.ENERGY,prefixes:L.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:X.ENERGY,prefixes:L.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:X.ENERGY,prefixes:L.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:X.ENERGY,prefixes:L.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:X.POWER,prefixes:L.SHORT,value:1,offset:0},watt:{name:"watt",base:X.POWER,prefixes:L.LONG,value:1,offset:0},hp:{name:"hp",base:X.POWER,prefixes:L.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:X.POWER,prefixes:L.SHORT,value:m.I,offset:0},VA:{name:"VA",base:X.POWER,prefixes:L.SHORT,value:1,offset:0},Pa:{name:"Pa",base:X.PRESSURE,prefixes:L.SHORT,value:1,offset:0},psi:{name:"psi",base:X.PRESSURE,prefixes:L.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:X.PRESSURE,prefixes:L.NONE,value:101325,offset:0},bar:{name:"bar",base:X.PRESSURE,prefixes:L.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:X.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:X.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:X.PRESSURE,prefixes:L.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:X.PRESSURE,prefixes:L.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:X.ELECTRIC_CHARGE,prefixes:L.LONG,value:1,offset:0},C:{name:"C",base:X.ELECTRIC_CHARGE,prefixes:L.SHORT,value:1,offset:0},farad:{name:"farad",base:X.ELECTRIC_CAPACITANCE,prefixes:L.LONG,value:1,offset:0},F:{name:"F",base:X.ELECTRIC_CAPACITANCE,prefixes:L.SHORT,value:1,offset:0},volt:{name:"volt",base:X.ELECTRIC_POTENTIAL,prefixes:L.LONG,value:1,offset:0},V:{name:"V",base:X.ELECTRIC_POTENTIAL,prefixes:L.SHORT,value:1,offset:0},ohm:{name:"ohm",base:X.ELECTRIC_RESISTANCE,prefixes:L.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:X.ELECTRIC_INDUCTANCE,prefixes:L.LONG,value:1,offset:0},H:{name:"H",base:X.ELECTRIC_INDUCTANCE,prefixes:L.SHORT,value:1,offset:0},siemens:{name:"siemens",base:X.ELECTRIC_CONDUCTANCE,prefixes:L.LONG,value:1,offset:0},S:{name:"S",base:X.ELECTRIC_CONDUCTANCE,prefixes:L.SHORT,value:1,offset:0},weber:{name:"weber",base:X.MAGNETIC_FLUX,prefixes:L.LONG,value:1,offset:0},Wb:{name:"Wb",base:X.MAGNETIC_FLUX,prefixes:L.SHORT,value:1,offset:0},tesla:{name:"tesla",base:X.MAGNETIC_FLUX_DENSITY,prefixes:L.LONG,value:1,offset:0},T:{name:"T",base:X.MAGNETIC_FLUX_DENSITY,prefixes:L.SHORT,value:1,offset:0},b:{name:"b",base:X.BIT,prefixes:L.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:X.BIT,prefixes:L.BINARY_LONG,value:1,offset:0},B:{name:"B",base:X.BIT,prefixes:L.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:X.BIT,prefixes:L.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe(te){if(te.number==="BigNumber"){var ce=xV(v);z.rad.value=new v(1),z.deg.value=ce.div(180),z.grad.value=ce.div(200),z.cycle.value=ce.times(2),z.arcsec.value=ce.div(648e3),z.arcmin.value=ce.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=Math.PI*2,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}fe(r),e&&e("config",function(te,ce){te.number!==ce.number&&fe(te)});var Q={si:{NONE:{unit:ae,prefix:L.NONE[""]},LENGTH:{unit:z.m,prefix:L.SHORT[""]},MASS:{unit:z.g,prefix:L.SHORT.k},TIME:{unit:z.s,prefix:L.SHORT[""]},CURRENT:{unit:z.A,prefix:L.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:L.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:L.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:L.SHORT[""]},ANGLE:{unit:z.rad,prefix:L.SHORT[""]},BIT:{unit:z.bits,prefix:L.SHORT[""]},FORCE:{unit:z.N,prefix:L.SHORT[""]},ENERGY:{unit:z.J,prefix:L.SHORT[""]},POWER:{unit:z.W,prefix:L.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:L.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:L.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:L.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:L.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:L.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:L.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:L.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:L.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:L.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:L.SHORT[""]}}};Q.cgs=JSON.parse(JSON.stringify(Q.si)),Q.cgs.LENGTH={unit:z.m,prefix:L.SHORT.c},Q.cgs.MASS={unit:z.g,prefix:L.SHORT[""]},Q.cgs.FORCE={unit:z.dyn,prefix:L.SHORT[""]},Q.cgs.ENERGY={unit:z.erg,prefix:L.NONE[""]},Q.us=JSON.parse(JSON.stringify(Q.si)),Q.us.LENGTH={unit:z.ft,prefix:L.NONE[""]},Q.us.MASS={unit:z.lbm,prefix:L.NONE[""]},Q.us.TEMPERATURE={unit:z.degF,prefix:L.NONE[""]},Q.us.FORCE={unit:z.lbf,prefix:L.NONE[""]},Q.us.ENERGY={unit:z.BTU,prefix:L.BTU[""]},Q.us.POWER={unit:z.hp,prefix:L.NONE[""]},Q.us.PRESSURE={unit:z.psi,prefix:L.NONE[""]},Q.auto=JSON.parse(JSON.stringify(Q.si));var ye=Q.auto;x.setUnitSystem=function(te){if(Je(Q,te))ye=Q[te];else throw new Error("Unit system "+te+" does not exist. Choices are: "+Object.keys(Q).join(", "))},x.getUnitSystem=function(){for(var te in Q)if(Je(Q,te)&&Q[te]===ye)return te},x.typeConverters={BigNumber:function(ce){return ce!=null&&ce.isFraction?new v(String(ce.n)).div(String(ce.d)).times(String(ce.s)):new v(ce+"")},Fraction:function(ce){return new y(ce)},Complex:function(ce){return ce},number:function(ce){return ce!=null&&ce.isFraction?p(ce):ce}},x.prototype._numberConverter=function(){var te=x.typeConverters[this.valueType()];if(te)return te;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},x._getNumberConverter=function(te){if(!x.typeConverters[te])throw new TypeError('Unsupported type "'+te+'"');return x.typeConverters[te]};for(var me in z)if(Je(z,me)){var De=z[me];De.dimensions=De.base.dimensions}for(var Le in ne)if(Je(ne,Le)){var ze=z[ne[Le]],Be={};for(var Ve in ze)Je(ze,Ve)&&(Be[Ve]=ze[Ve]);Be.name=Le,z[Le]=Be}x.isValidAlpha=function(ce){return/^[a-zA-Z]$/.test(ce)};function Ke(te){for(var ce=0;ce<te.length;ce++){if(S=te.charAt(ce),ce===0&&!x.isValidAlpha(S))throw new Error('Invalid unit name (must begin with alpha character): "'+te+'"');if(ce>0&&!(x.isValidAlpha(S)||N(S)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+te+'"')}}return x.createUnit=function(te,ce){if(typeof te!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ce&&ce.override){for(var G in te)if(Je(te,G)&&x.deleteUnit(G),te[G].aliases)for(var Z=0;Z<te[G].aliases.length;Z++)x.deleteUnit(te[G].aliases[Z])}var oe;for(var he in te)Je(te,he)&&(oe=x.createUnitSingle(he,te[he]));return oe},x.createUnitSingle=function(te,ce){if((typeof ce>"u"||ce===null)&&(ce={}),typeof te!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Je(z,te))throw new Error('Cannot create unit "'+te+'": a unit with that name already exists');Ke(te);var G=null,Z=[],oe=0,he,ve,ge;if(ce&&ce.type==="Unit")G=ce.clone();else if(typeof ce=="string")ce!==""&&(he=ce);else if(typeof ce=="object")he=ce.definition,ve=ce.prefixes,oe=ce.offset,ge=ce.baseName,ce.aliases&&(Z=ce.aliases.valueOf());else throw new TypeError('Cannot create unit "'+te+'" from "'+ce.toString()+'": expecting "string" or "Unit" or "Object"');if(Z){for(var Pe=0;Pe<Z.length;Pe++)if(Je(z,Z[Pe]))throw new Error('Cannot create alias "'+Z[Pe]+'": a unit with that name already exists')}if(he&&typeof he=="string"&&!G)try{G=x.parse(he,{allowNoUnits:!0})}catch(dt){throw dt.message='Could not create unit "'+te+'" from "'+he+'": '+dt.message,dt}else he&&he.type==="Unit"&&(G=he.clone());Z=Z||[],oe=oe||0,ve&&ve.toUpperCase?ve=L[ve.toUpperCase()]||L.NONE:ve=L.NONE;var Se={};if(G){Se={name:te,value:G.value,dimensions:G.dimensions.slice(0),prefixes:ve,offset:oe};var Mt=!1;for(var Wt in X)if(Je(X,Wt)){for(var ht=!0,Er=0;Er<ie.length;Er++)if(Math.abs((Se.dimensions[Er]||0)-(X[Wt].dimensions[Er]||0))>1e-12){ht=!1;break}if(ht){Mt=!0,Se.base=X[Wt];break}}if(!Mt){ge=ge||te+"_STUFF";var B={dimensions:G.dimensions.slice(0)};B.key=ge,X[ge]=B,ye[ge]={unit:Se,prefix:L.NONE[""]},Se.base=X[ge]}}else{if(ge=ge||te+"_STUFF",ie.indexOf(ge)>=0)throw new Error('Cannot create new base unit "'+te+'": a base unit with that name already exists (and cannot be overridden)');ie.push(ge);for(var $e in X)Je(X,$e)&&(X[$e].dimensions[ie.length-1]=0);for(var Ce={dimensions:[]},rt=0;rt<ie.length;rt++)Ce.dimensions[rt]=0;Ce.dimensions[ie.length-1]=1,Ce.key=ge,X[ge]=Ce,Se={name:te,value:1,dimensions:X[ge].dimensions.slice(0),prefixes:ve,offset:oe,base:X[ge]},ye[ge]={unit:Se,prefix:L.NONE[""]}}x.UNITS[te]=Se;for(var ue=0;ue<Z.length;ue++){var we=Z[ue],Ie={};for(var qe in Se)Je(Se,qe)&&(Ie[qe]=Se[qe]);Ie.name=we,x.UNITS[we]=Ie}return delete V.cache,new x(null,te)},x.deleteUnit=function(te){delete x.UNITS[te],delete V.cache},x.PREFIXES=L,x.BASE_DIMENSIONS=ie,x.BASE_UNITS=X,x.UNIT_SYSTEMS=Q,x.UNITS=z,x},{isClass:!0}),eY="unit",PQe=["typed","Unit"],MQe=Y(eY,PQe,t=>{var{typed:e,Unit:r}=t;return e(eY,{Unit:function(i){return i.clone()},string:function(i){return r.isValuelessUnit(i)?new r(null,i):r.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new r(i,a)},"number | BigNumber | Fraction":function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),tY="sparse",IQe=["typed","SparseMatrix"],OQe=Y(tY,IQe,t=>{var{typed:e,SparseMatrix:r}=t;return e(tY,{"":function(){return new r([])},string:function(i){return new r([],i)},"Array | Matrix":function(i){return new r(i)},"Array | Matrix, string":function(i,a){return new r(i,a)}})}),rY="createUnit",kQe=["typed","Unit"],RQe=Y(rY,kQe,t=>{var{typed:e,Unit:r}=t;return e(rY,{"Object, Object":function(i,a){return r.createUnit(i,a)},Object:function(i){return r.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,r.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,r.createUnit(s,{})},string:function(i){var a={};return a[i]={},r.createUnit(a,{})}})}),nY="acos",FQe=["typed","config","Complex"],LQe=Y(nY,FQe,t=>{var{typed:e,config:r,Complex:n}=t;return e(nY,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),iY="acosh",BQe=["typed","config","Complex"],$Qe=Y(iY,BQe,t=>{var{typed:e,config:r,Complex:n}=t;return e(iY,{number:function(a){return a>=1||r.predictable?Ude(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),aY="acot",jQe=["typed","BigNumber"],VQe=Y(aY,jQe,t=>{var{typed:e,BigNumber:r}=t;return e(aY,{number:zde,Complex:function(i){return i.acot()},BigNumber:function(i){return new r(1).div(i).atan()}})}),sY="acoth",UQe=["typed","config","Complex","BigNumber"],zQe=Y(sY,UQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(sY,{number:function(s){return s>=1||s<=-1||r.predictable?qde(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),oY="acsc",qQe=["typed","config","Complex","BigNumber"],HQe=Y(oY,qQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(oY,{number:function(s){return s<=-1||s>=1||r.predictable?Hde(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),lY="acsch",WQe=["typed","BigNumber"],GQe=Y(lY,WQe,t=>{var{typed:e,BigNumber:r}=t;return e(lY,{number:Wde,Complex:function(i){return i.acsch()},BigNumber:function(i){return new r(1).div(i).asinh()}})}),uY="asec",KQe=["typed","config","Complex","BigNumber"],XQe=Y(uY,KQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(uY,{number:function(s){return s<=-1||s>=1||r.predictable?Gde(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),cY="asech",YQe=["typed","config","Complex","BigNumber"],QQe=Y(cY,YQe,t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(cY,{number:function(s){if(s<=1&&s>=-1||r.predictable){var o=1/s;if(o>0||r.predictable)return Kde(s);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),fY="asin",ZQe=["typed","config","Complex"],JQe=Y(fY,ZQe,t=>{var{typed:e,config:r,Complex:n}=t;return e(fY,{number:function(a){return a>=-1&&a<=1||r.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),eZe="asinh",tZe=["typed"],rZe=Y(eZe,tZe,t=>{var{typed:e}=t;return e("asinh",{number:Xde,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),nZe="atan",iZe=["typed"],aZe=Y(nZe,iZe,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),hY="atan2",sZe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],oZe=Y(hY,sZe,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:s}=t,o=wu({typed:e,equalScalar:n}),l=qa({typed:e}),u=cpe({typed:e,equalScalar:n}),c=ya({typed:e,equalScalar:n}),f=xi({typed:e,DenseMatrix:a}),h=Ir({typed:e,matrix:r,concat:s});return e(hY,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,p)=>i.atan2(d,p)},h({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:f}))}),dY="atanh",lZe=["typed","config","Complex"],uZe=Y(dY,lZe,t=>{var{typed:e,config:r,Complex:n}=t;return e(dY,{number:function(a){return a<=1&&a>=-1||r.predictable?Yde(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Zw=Y("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),pY="cos",cZe=["typed"],fZe=Y(pY,cZe,t=>{var{typed:e}=t,r=Zw({typed:e});return e(pY,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),mY="cosh",hZe=["typed"],dZe=Y(mY,hZe,t=>{var{typed:e}=t;return e(mY,{number:r7e,"Complex | BigNumber":r=>r.cosh()})}),gY="cot",pZe=["typed","BigNumber"],mZe=Y(gY,pZe,t=>{var{typed:e,BigNumber:r}=t,n=Zw({typed:e});return e(gY,{number:Qde,Complex:i=>i.cot(),BigNumber:i=>new r(1).div(i.tan())},n)}),vY="coth",gZe=["typed","BigNumber"],vZe=Y(vY,gZe,t=>{var{typed:e,BigNumber:r}=t;return e(vY,{number:Zde,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),yY="csc",yZe=["typed","BigNumber"],bZe=Y(yY,yZe,t=>{var{typed:e,BigNumber:r}=t,n=Zw({typed:e});return e(yY,{number:Jde,Complex:i=>i.csc(),BigNumber:i=>new r(1).div(i.sin())},n)}),bY="csch",wZe=["typed","BigNumber"],xZe=Y(bY,wZe,t=>{var{typed:e,BigNumber:r}=t;return e(bY,{number:epe,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),wY="sec",AZe=["typed","BigNumber"],_Ze=Y(wY,AZe,t=>{var{typed:e,BigNumber:r}=t,n=Zw({typed:e});return e(wY,{number:tpe,Complex:i=>i.sec(),BigNumber:i=>new r(1).div(i.cos())},n)}),xY="sech",EZe=["typed","BigNumber"],SZe=Y(xY,EZe,t=>{var{typed:e,BigNumber:r}=t;return e(xY,{number:rpe,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),AY="sin",CZe=["typed"],TZe=Y(AY,CZe,t=>{var{typed:e}=t,r=Zw({typed:e});return e(AY,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),_Y="sinh",DZe=["typed"],NZe=Y(_Y,DZe,t=>{var{typed:e}=t;return e(_Y,{number:npe,"Complex | BigNumber":r=>r.sinh()})}),EY="tan",PZe=["typed"],MZe=Y(EY,PZe,t=>{var{typed:e}=t,r=Zw({typed:e});return e(EY,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),IZe="tanh",OZe=["typed"],kZe=Y(IZe,OZe,t=>{var{typed:e}=t;return e("tanh",{number:i7e,"Complex | BigNumber":r=>r.tanh()})}),SY="setCartesian",RZe=["typed","size","subset","compareNatural","Index","DenseMatrix"],FZe=Y(SY,RZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(SY,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(r(l),new a(0))!==0&&n(r(u),new a(0))!==0){var f=er(Array.isArray(l)?l:l.toArray()).sort(i),h=er(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var d=0;d<f.length;d++)for(var p=0;p<h.length;p++)c.push([f[d],h[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new s(c)}})}),CY="setDifference",LZe=["typed","size","subset","compareNatural","Index","DenseMatrix"],BZe=Y(CY,LZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(CY,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(r(l),new a(0))===0)c=[];else{if(n(r(u),new a(0))===0)return er(l.toArray());var f=bw(er(Array.isArray(l)?l:l.toArray()).sort(i)),h=bw(er(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var d,p=0;p<f.length;p++){d=!1;for(var m=0;m<h.length;m++)if(i(f[p].value,h[m].value)===0&&f[p].identifier===h[m].identifier){d=!0;break}d||c.push(f[p])}}return Array.isArray(l)&&Array.isArray(u)?mP(c):new s(mP(c))}})}),TY="setDistinct",$Ze=["typed","size","subset","compareNatural","Index","DenseMatrix"],jZe=Y(TY,$Ze,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(TY,{"Array | Matrix":function(l){var u;if(n(r(l),new a(0))===0)u=[];else{var c=er(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new s(u)}})}),DY="setIntersect",VZe=["typed","size","subset","compareNatural","Index","DenseMatrix"],UZe=Y(DY,VZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(DY,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(r(l),new a(0))===0||n(r(u),new a(0))===0)c=[];else{var f=bw(er(Array.isArray(l)?l:l.toArray()).sort(i)),h=bw(er(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var d=0;d<f.length;d++)for(var p=0;p<h.length;p++)if(i(f[d].value,h[p].value)===0&&f[d].identifier===h[p].identifier){c.push(f[d]);break}}return Array.isArray(l)&&Array.isArray(u)?mP(c):new s(mP(c))}})}),NY="setIsSubset",zZe=["typed","size","subset","compareNatural","Index"],qZe=Y(NY,zZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(NY,{"Array | Matrix, Array | Matrix":function(o,l){if(n(r(o),new a(0))===0)return!0;if(n(r(l),new a(0))===0)return!1;for(var u=bw(er(Array.isArray(o)?o:o.toArray()).sort(i)),c=bw(er(Array.isArray(l)?l:l.toArray()).sort(i)),f,h=0;h<u.length;h++){f=!1;for(var d=0;d<c.length;d++)if(i(u[h].value,c[d].value)===0&&u[h].identifier===c[d].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),PY="setMultiplicity",HZe=["typed","size","subset","compareNatural","Index"],WZe=Y(PY,HZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(PY,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(r(l),new a(0))===0)return 0;for(var u=er(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],o)===0&&c++;return c}})}),MY="setPowerset",GZe=["typed","size","subset","compareNatural","Index"],KZe=Y(MY,GZe,t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:a}=t;return e(MY,{"Array | Matrix":function(u){if(n(r(u),new a(0))===0)return[];for(var c=er(Array.isArray(u)?u:u.toArray()).sort(i),f=[],h=0;h.toString(2).length<=c.length;)f.push(s(c,h.toString(2).split("").reverse())),h++;return o(f)}});function s(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),IY="setSize",XZe=["typed","compareNatural"],YZe=Y(IY,XZe,t=>{var{typed:e,compareNatural:r}=t;return e(IY,{"Array | Matrix":function(i){return Array.isArray(i)?er(i).length:er(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?er(i).length:er(i.toArray()).length;for(var s=er(Array.isArray(i)?i:i.toArray()).sort(r),o=1,l=1;l<s.length;l++)r(s[l],s[l-1])!==0&&o++;return o}})}),OY="setSymDifference",QZe=["typed","size","concat","subset","setDifference","Index"],ZZe=Y(OY,QZe,t=>{var{typed:e,size:r,concat:n,subset:i,setDifference:a,Index:s}=t;return e(OY,{"Array | Matrix, Array | Matrix":function(l,u){if(i(r(l),new s(0))===0)return er(u);if(i(r(u),new s(0))===0)return er(l);var c=er(l),f=er(u);return n(a(c,f),a(f,c))}})}),kY="setUnion",JZe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],eJe=Y(kY,JZe,t=>{var{typed:e,size:r,concat:n,subset:i,setIntersect:a,setSymDifference:s,Index:o}=t;return e(kY,{"Array | Matrix, Array | Matrix":function(u,c){if(i(r(u),new o(0))===0)return er(c);if(i(r(c),new o(0))===0)return er(u);var f=er(u),h=er(c);return n(s(f,h),a(f,h))}})}),RY="add",tJe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],rJe=Y(RY,tJe,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=t,l=Gp({typed:e}),u=mV({typed:e,equalScalar:i}),c=Vv({typed:e,DenseMatrix:a}),f=Ir({typed:e,matrix:r,concat:o});return e(RY,{"any, any":n,"any, any, ...any":e.referToSelf(h=>(d,p,m)=>{for(var v=h(d,p),y=0;y<m.length;y++)v=h(v,m[y]);return v})},f({elop:n,DS:l,SS:u,Ss:c}))}),FY="hypot",nJe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],iJe=Y(FY,nJe,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:l}=t;return e(FY,{"... number | BigNumber":u,Array:u,Matrix:c=>u(er(c.toArray(),!0))});function u(c){for(var f=0,h=0,d=0;d<c.length;d++){if(Vf(c[d]))throw new TypeError("Unexpected type of argument to hypot");var p=r(c[d]);o(h,p)?(f=a(f,a(i(h,p),i(h,p))),f=n(f,1),h=p):f=n(f,l(p)?a(i(p,h),i(p,h)):p)}return a(h,s(f))}}),LY="norm",aJe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],sJe=Y(LY,aJe,t=>{var{typed:e,abs:r,add:n,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:h,eigs:d}=t;return e(LY,{number:Math.abs,Complex:function(S){return S.abs()},BigNumber:function(S){return S.abs()},boolean:function(S){return Math.abs(S)},Array:function(S){return A(f(S),2)},Matrix:function(S){return A(S,2)},"Array, number | BigNumber | string":function(S,C){return A(f(S),C)},"Matrix, number | BigNumber | string":function(S,C){return A(S,C)}});function p(E){var S=0;return E.forEach(function(C){var D=r(C);u(D,S)&&(S=D)},!0),S}function m(E){var S;return E.forEach(function(C){var D=r(C);(!S||c(D,S))&&(S=D)},!0),S||0}function v(E,S){if(S===Number.POSITIVE_INFINITY||S==="inf")return p(E);if(S===Number.NEGATIVE_INFINITY||S==="-inf")return m(E);if(S==="fro")return A(E,2);if(typeof S=="number"&&!isNaN(S)){if(!l(S,0)){var C=0;return E.forEach(function(D){C=n(i(r(D),S),C)},!0),i(C,1/S)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function y(E){var S=0;return E.forEach(function(C,D){S=n(S,o(C,a(C)))}),r(s(S))}function w(E){var S=[],C=0;return E.forEach(function(D,N){var P=N[1],M=n(S[P]||0,r(D));u(M,C)&&(C=M),S[P]=M},!0),C}function b(E){var S=E.size();if(S[0]!==S[1])throw new RangeError("Invalid matrix dimensions");var C=h(E),D=o(C,E),N=d(D).values.toArray(),P=N[N.length-1];return r(s(P))}function _(E){var S=[],C=0;return E.forEach(function(D,N){var P=N[0],M=n(S[P]||0,r(D));u(M,C)&&(C=M),S[P]=M},!0),C}function x(E,S){if(S===1)return w(E);if(S===Number.POSITIVE_INFINITY||S==="inf")return _(E);if(S==="fro")return y(E);if(S===2)return b(E);throw new Error("Unsupported parameter value "+S)}function A(E,S){var C=E.size();if(C.length===1)return v(E,S);if(C.length===2){if(C[0]&&C[1])return x(E,S);throw new RangeError("Invalid matrix dimensions")}}}),BY="dot",oJe=["typed","addScalar","multiplyScalar","conj","size"],lJe=Y(BY,oJe,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(BY,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function s(u,c){var f=a(u),h=a(c),d,p;if(f.length===1)d=f[0];else if(f.length===2&&f[1]===1)d=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d!==p)throw new RangeError("Vectors must have equal length ("+d+" != "+p+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function o(u,c){var f=s(u,c),h=ft(u)?u._data:u,d=ft(u)?u._datatype||u.getDataType():void 0,p=ft(c)?c._data:c,m=ft(c)?c._datatype||c.getDataType():void 0,v=a(u).length===2,y=a(c).length===2,w=r,b=n;if(d&&m&&d===m&&typeof d=="string"&&d!=="mixed"){var _=d;w=e.find(r,[_,_]),b=e.find(n,[_,_])}if(!v&&!y){for(var x=b(i(h[0]),p[0]),A=1;A<f;A++)x=w(x,b(i(h[A]),p[A]));return x}if(!v&&y){for(var E=b(i(h[0]),p[0][0]),S=1;S<f;S++)E=w(E,b(i(h[S]),p[S][0]));return E}if(v&&!y){for(var C=b(i(h[0][0]),p[0]),D=1;D<f;D++)C=w(C,b(i(h[D][0]),p[D]));return C}if(v&&y){for(var N=b(i(h[0][0]),p[0][0]),P=1;P<f;P++)N=w(N,b(i(h[P][0]),p[P][0]));return N}}function l(u,c){s(u,c);for(var f=u._index,h=u._values,d=c._index,p=c._values,m=0,v=r,y=n,w=0,b=0;w<f.length&&b<d.length;){var _=f[w],x=d[b];if(_<x){w++;continue}if(_>x){b++;continue}_===x&&(m=v(m,y(h[w],p[b])),w++,b++)}return m}}),uJe="trace",cJe=["typed","matrix","add"],fJe=Y(uJe,cJe,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(o){return i(r(o))},SparseMatrix:a,DenseMatrix:i,any:wt});function i(s){var o=s._size,l=s._data;switch(o.length){case 1:if(o[0]===1)return wt(l[0]);throw new RangeError("Matrix must be square (size: "+Ft(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var f=0,h=0;h<u;h++)f=n(f,l[h][h]);return f}else throw new RangeError("Matrix must be square (size: "+Ft(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(o)+")")}}function a(s){var o=s._values,l=s._index,u=s._ptr,c=s._size,f=c[0],h=c[1];if(f===h){var d=0;if(o.length>0)for(var p=0;p<h;p++)for(var m=u[p],v=u[p+1],y=m;y<v;y++){var w=l[y];if(w===p){d=n(d,o[y]);break}if(w>p)break}return d}throw new RangeError("Matrix must be square (size: "+Ft(c)+")")}}),$Y="index",hJe=["typed","Index"],dJe=Y($Y,hJe,t=>{var{typed:e,Index:r}=t;return e($Y,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return St(o)?o.toNumber():vr(o)||ft(o)?o.map(function(l){return St(l)?l.toNumber():l}):o}),s=new r;return r.apply(s,a),s}})}),Ppe=new Set(["end"]),pJe="Node",mJe=["mathWithTransform"],gJe=Y(pJe,mJe,t=>{var{mathWithTransform:e}=t;function r(i){for(var a of[...Ppe])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function l(u){var c=m0(u);return r(c),a(c,s,o)}return{evaluate:l}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!fr(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,l){o.forEach(function(u,c,f){l(u,c,f),s(u,l)})}s(this,a)}transform(a){function s(o,l,u){var c=a(o,l,u);return c!==o?c:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,l,u){a(o,l,u)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&dh(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function vs(t){return t&&t.isIndexError?new yu(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function Mpe(t){var{subset:e}=t;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return ss(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw vs(a)}}}var TT="AccessorNode",vJe=["subset","Node"],yJe=Y(TT,vJe,t=>{var{subset:e,Node:r}=t,n=Mpe({subset:e});function i(s){return!(fh(s)||il(s)||qt(s)||Tp(s)||lO(s)||hh(s)||Ui(s))}class a extends r{constructor(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!fr(o))throw new TypeError('Node expected for parameter "object"');if(!Gw(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return TT}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l),f=this.optionalChaining,h=fh(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(m,v,y){var w=y||{},b=u(m,v,w);if(f&&b==null){w.optionalShortCircuit=!0;return}if(!(h&&w!==null&&w!==void 0&&w.optionalShortCircuit))return ss(b,d)}}else return function(m,v,y){var w=y||{},b=u(m,v,w);if(f&&b==null){w.optionalShortCircuit=!0;return}if(!(h&&w!==null&&w!==void 0&&w.optionalShortCircuit)){var _=c(m,v,b);return n(b,_)}}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)),this.optionalChaining)}clone(){return new a(this.object,this.index,this.optionalChaining)}_toString(o){var l=this.object.toString(o);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:TT,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(o){return new a(o.object,o.index,o.optionalChaining)}}return ei(a,"name",TT),a},{isClass:!0,isNode:!0}),DT="ArrayNode",bJe=["Node"],wJe=Y(DT,bJe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(fr))throw new TypeError("Array containing Nodes expected")}get type(){return DT}get isArrayNode(){return!0}_compile(i,a){var s=lp(this.items,function(u){return u._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,f,h){return l(lp(s,function(d){return d(c,f,h)}))}}else return function(c,f,h){return lp(s,function(d){return d(c,f,h)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new r(a)}clone(){return new r(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:DT,items:this.items}}static fromJSON(i){return new r(i.items)}_toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var l=s.some(il)&&!s.every(il),u=o||l,c=u?"&":"\\\\",f=s.map(function(h){return h.items?a(h.items,!o):h.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return ei(r,"name",DT),r},{isClass:!0,isNode:!0});function xJe(t){var{subset:e,matrix:r}=t;return function(i,a,s){try{if(Array.isArray(i)){var o=r(i).subset(a,s).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return mw(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw vs(l)}}}var Zl=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function NT(t,e){if(!e||e!=="auto")return t;for(var r=t;hh(r);)r=r.content;return r}function yr(t,e,r,n){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<Zl.length;o++)if(a in Zl[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&r!=="show"){var l=NT(i.args[0],e);!(qt(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&i4(NT(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&i4(NT(l.args[0],e))&&qt(NT(l.args[1])))&&(s+=1)}return s}function z1(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),i=yr(r,e);if(i===null)return null;var a=Zl[i][n];if(Je(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function IR(t,e,r){var n=r!=="keep"?t.getContent():t,i=r!=="keep"?t.getContent():e,a=n.getIdentifier(),s=i.getIdentifier(),o=yr(n,r);if(o===null)return null;var l=Zl[o][a];if(Je(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===s)return!0;return!1}return null}function AJe(t){var e="OperatorNode:"+t;for(var r of Zl)if(e in r)return r[e].op;return null}var PT="AssignmentNode",_Je=["subset","?matrix","Node"],EJe=Y(PT,_Je,t=>{var{subset:e,matrix:r,Node:n}=t,i=Mpe({subset:e}),a=xJe({subset:e,matrix:r});function s(l,u,c){u||(u="keep");var f=yr(l,u,c),h=yr(l.value,u,c);return u==="all"||h!==null&&h<=f}class o extends n{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!Ui(u)&&!fh(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Ui(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Gw(this.index))throw new TypeError('IndexNode expected as "index"');if(!fr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return PT}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),h=this.index?this.index._compile(u,c):null,d=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(_,x,A){var E=f(_,x,A),S=d(_,x,A);return mw(E,m,S),S}}else{if(Ui(this.object))return function(_,x,A){var E=f(_,x,A),S=d(_,x,A),C=h(_,x,E);return _.set(p,a(E,C,S)),S};var v=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var y=this.object.index.getObjectProperty();return function(_,x,A){var E=v(_,x,A),S=ss(E,y),C=h(_,x,S),D=d(_,x,A);return mw(E,y,a(S,C,D)),D}}else{var w=this.object.index._compile(u,c);return function(_,x,A){var E=v(_,x,A),S=w(_,x,E),C=i(E,S),D=h(_,x,C),N=d(_,x,A);return a(E,S,a(C,D,N)),N}}}else{if(!Ui(this.object))throw new TypeError("SymbolNode expected as object");return function(_,x,A){var E=d(_,x,A);return _.set(p,E),E}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,h=this._ifNode(u(this.value,"value",this));return new o(c,f,h)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",h=this.value.toString(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h="("+h+")"),c+f+" = "+h}toJSON(){return{mathjs:PT,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",h=this.value.toHTML(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h='<span class="math-paranthesis math-round-parenthesis">(</span>'+h+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+h}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",h=this.value.toTex(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(h="\\left(".concat(h,"\\right)")),c+f+"="+h}}return ei(o,"name",PT),o},{isClass:!0,isNode:!0}),MT="BlockNode",SJe=["ResultSet","Node"],CJe=Y(MT,SJe,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!fr(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return MT}get isBlockNode(){return!0}_compile(a,s){var o=lp(this.blocks,function(l){return{evaluate:l.node._compile(a,s),visible:l.visible}});return function(u,c,f){var h=[];return hde(o,function(p){var m=p.evaluate(u,c,f);p.visible&&h.push(m)}),new e(h)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(a(l.node,"blocks["+o+"].node",this));s[o]={node:u,visible:l.visible}}return new n(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:MT,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return ei(n,"name",MT),n},{isClass:!0,isNode:!0}),IT="ConditionalNode",TJe=["Node"],DJe=Y(IT,TJe,t=>{var{Node:e}=t;function r(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(St(i))return!i.isZero();if(Vf(i))return!!(i.re||i.im);if(go(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+br(i)+'"')}class n extends e{constructor(a,s,o){if(super(),!fr(a))throw new TypeError("Parameter condition must be a Node");if(!fr(s))throw new TypeError("Parameter trueExpr must be a Node");if(!fr(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return IT}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),l=this.trueExpr._compile(a,s),u=this.falseExpr._compile(a,s);return function(f,h,d){return r(o(f,h,d))?l(f,h,d):u(f,h,d)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=yr(this,s,a&&a.implicit),l=this.condition.toString(a),u=yr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(a),f=yr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var h=this.falseExpr.toString(a),d=yr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h="("+h+")"),l+" ? "+c+" : "+h}toJSON(){return{mathjs:IT,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=yr(this,s,a&&a.implicit),l=this.condition.toHTML(a),u=yr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=yr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var h=this.falseExpr.toHTML(a),d=yr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+h}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return ei(n,"name",IT),n},{isClass:!0,isNode:!0}),A4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NJe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},PJe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},MJe=function(e,r){return A4({},e,r)},IJe=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.preserveFormatting,n=r===void 0?!1:r,i=e.escapeMapFn,a=i===void 0?MJe:i,s=String(t),o="",l=a(A4({},NJe),n?A4({},PJe):{}),u=Object.keys(l),c=function(){var h=!1;u.forEach(function(d,p){h||s.length>=d.length&&s.slice(0,d.length)===d&&(o+=l[u[p]],s=s.slice(d.length,s.length),h=!0)}),h||(o+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return o};const OJe=Sl(IJe);var _4={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Qt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},jY={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Qt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Qt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Qt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Qt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Qt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Qt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Qt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Qt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Qt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Qt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Qt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Qt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Qt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Qt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Qt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Qt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Qt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Qt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Qt.and,"${args[1]}\\right)")},not:{1:Qt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Qt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Qt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Qt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Qt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Qt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Qt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Qt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Qt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Qt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Qt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Qt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Qt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Qt.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(_4.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},kJe="\\mathrm{${name}}\\left(${args}\\right)",VY={deg:"^\\circ"};function E4(t){return OJe(t,{preserveFormatting:!0})}function Ipe(t,e){return e=typeof e>"u"?!1:e,e?Je(VY,t)?VY[t]:"\\mathrm{"+E4(t)+"}":Je(_4,t)?_4[t]:E4(t)}var OT="ConstantNode",RJe=["Node","isBounded"],FJe=Y(OT,RJe,t=>{var{Node:e,isBounded:r}=t;class n extends e{constructor(a){super(),this.value=a}get type(){return OT}get isConstantNode(){return!0}_compile(a,s){var o=this.value;return function(){return o}}forEach(a){}map(a){return this.clone()}clone(){return new n(this.value)}_toString(a){return Ft(this.value,a)}_toHTML(a){var s=this._toString(a);switch(br(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:OT,value:this.value}}static fromJSON(a){return new n(a.value)}_toTex(a){var s=this._toString(a),o=br(this.value);switch(o){case"string":return"\\mathtt{"+E4(s)+"}";case"number":case"BigNumber":{if(!r(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=s.toLowerCase().indexOf("e");return l!==-1?s.substring(0,l)+"\\cdot10^{"+s.substring(l+1)+"}":s}case"bigint":return s.toString();case"Fraction":return this.value.toLatex();default:return s}}}return ei(n,"name",OT),n},{isClass:!0,isNode:!0}),kT="FunctionAssignmentNode",LJe=["typed","Node"],BJe=Y(kT,LJe,t=>{var{typed:e,Node:r}=t;function n(a,s,o){var l=yr(a,s,o),u=yr(a.expr,s,o);return s==="all"||u!==null&&u<=l}class i extends r{constructor(s,o,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!fr(l))throw new TypeError('Node expected for parameter "expr"');if(Ppe.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var u=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=s,this.params=o.map(function(h){return h&&h.name||h}),this.types=o.map(function(h){return h&&h.type||"any"}),this.expr=l}get type(){return kT}get isFunctionAssignmentNode(){return!0}_compile(s,o){var l=Object.create(o);hde(this.params,function(m){l[m]=!0});var u=this.expr,c=u._compile(s,l),f=this.name,h=this.params,d=BG(this.types,","),p=f+"("+BG(this.params,", ")+")";return function(v,y,w){var b={};b[d]=function(){for(var x=Object.create(y),A=0;A<h.length;A++)x[h[A]]=arguments[A];return c(v,x,w)};var _=e(f,b);return _.syntax=p,_.expr=u.toString(),v.set(f,_),_}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return n(this,o,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:kT,name:this.name,params:this.params.map(function(o,l){return{name:o,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ll(this.params[u])+"</span>");var c=this.expr.toHTML(s);return n(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ll(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return n(this,o,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(Ipe).join(",")+"\\right)="+l}}return ei(i,"name",kT),i},{isClass:!0,isNode:!0}),RT="IndexNode",$Je=["Node","size"],jJe=Y(RT,$Je,t=>{var{Node:e,size:r}=t;class n extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(fr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return RT}get isIndexNode(){return!0}_compile(a,s){var o=lp(this.dimensions,function(u,c){var f=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var h=Object.create(s);h.end=!0;var d=u._compile(a,h);return function(m,v,y){if(!ft(y)&&!vr(y)&&!Pn(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+br(y));var w=r(y),b=Object.create(v);return b.end=w[c],d(m,b,y)}}else return u._compile(a,s)}),l=ss(a,"index");return function(c,f,h){var d=lp(o,function(p){return p(c,f,h)});return l(...d)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&qt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:RT,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ll(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return ei(n,"name",RT),n},{isClass:!0,isNode:!0}),FT="ObjectNode",VJe=["Node"],UJe=Y(FT,VJe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return fr(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return FT}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(Je(this.properties,o)){var l=Yy(o),u=JSON.parse(l),c=ss(this.properties,o);s[u]=c._compile(i,a)}return function(h,d,p){var m={};for(var v in s)Je(s,v)&&(m[v]=s[v](h,d,p));return m}}forEach(i){for(var a in this.properties)Je(this.properties,a)&&i(this.properties[a],"properties["+Yy(a)+"]",this)}map(i){var a={};for(var s in this.properties)Je(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+Yy(s)+"]",this)));return new r(a)}clone(){var i={};for(var a in this.properties)Je(this.properties,a)&&(i[a]=this.properties[a]);return new r(i)}_toString(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push(Yy(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:FT,properties:this.properties}}static fromJSON(i){return new r(i.properties)}_toHTML(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push('<span class="math-symbol math-property">'+ll(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)Je(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return ei(r,"name",FT),r},{isClass:!0,isNode:!0});function Cx(t,e){return new Lhe(t,new aO(e),new Set(Object.keys(e)))}var LT="OperatorNode",zJe=["Node"],qJe=Y(LT,zJe,t=>{var{Node:e}=t;function r(a,s){var o=a;if(s==="auto")for(;hh(o);)o=o.content;return qt(o)?!0:Bn(o)?r(o.args[0],s):!1}function n(a,s,o,l,u){var c=yr(a,s,o),f=z1(a,s);if(s==="all"||l.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return l.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var h;switch(l.length){case 0:h=[];break;case 1:{var d=yr(l[0],s,o,a);if(u&&d!==null){var p,m;if(s==="keep"?(p=l[0].getIdentifier(),m=a.getIdentifier()):(p=l[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),Zl[c][m].latexLeftParens===!1){h=[!1];break}if(Zl[d][p].latexParens===!1){h=[!1];break}}if(d===null){h=[!1];break}if(d<=c){h=[!0];break}h=[!1]}break;case 2:{var v,y=yr(l[0],s,o,a),w=IR(a,l[0],s);y===null?v=!1:y===c&&f==="right"&&!w||y<c?v=!0:v=!1;var b,_=yr(l[1],s,o,a),x=IR(a,l[1],s);if(_===null?b=!1:_===c&&f==="left"&&!x||_<c?b=!0:b=!1,u){var A,E,S;s==="keep"?(A=a.getIdentifier(),E=a.args[0].getIdentifier(),S=a.args[1].getIdentifier()):(A=a.getContent().getIdentifier(),E=a.args[0].getContent().getIdentifier(),S=a.args[1].getContent().getIdentifier()),y!==null&&(Zl[c][A].latexLeftParens===!1&&(v=!1),Zl[y][E].latexParens===!1&&(v=!1)),_!==null&&(Zl[c][A].latexRightParens===!1&&(b=!1),Zl[_][S].latexParens===!1&&(b=!1))}h=[v,b]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(h=l.map(function(D){var N=yr(D,s,o,a),P=IR(a,D,s),M=z1(D,s);return N===null?!1:c===N&&f===M&&!P?!0:N<c}));break}if(l.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var C=1;C<h.length;++C)r(l[C],s)&&!h[C-1]&&(s!=="keep"||!hh(l[C-1]))&&(h[C]=!0);return h}class i extends e{constructor(s,o,l,u,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(fr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=l||[]}get type(){return LT}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!oV(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=ss(s,this.fn),u=lp(this.args,function(p){return p._compile(s,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(m,v,y){return l(c,s,Cx(m,v))}}else if(u.length===1){var f=u[0];return function(m,v,y){return l(f(m,v,y))}}else if(u.length===2){var h=u[0],d=u[1];return function(m,v,y){return l(h(m,v,y),d(m,v,y))}}else return function(m,v,y){return l.apply(null,lp(u,function(w){return w(m,v,y)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var f=z1(this,o),h=u[0].toString(s);c[0]&&(h="("+h+")");var d=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(d?" ":"")+h:f==="left"?h+(d?" ":"")+this.op:h+this.op}else if(u.length===2){var p=u[0].toString(s),m=u[1].toString(s);return c[0]&&(p="("+p+")"),c[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+m:p+" "+this.op+" "+m}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var v=u.map(function(y,w){return y=y.toString(s),c[w]&&(y="("+y+")"),y});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join(" "):v.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:LT,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var f=z1(this,o),h=u[0].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ll(this.op)+"</span>"+h:h+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ll(this.op)+"</span>"}else if(u.length===2){var d=u[0].toHTML(s),p=u[1].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?d+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:d+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ll(this.op)+"</span>"+p}else{var m=u.map(function(v,y){return v=v.toHTML(s),c[y]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),v});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ll(this.op)+"</span>"):'<span class="math-function">'+ll(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),f=Qt[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var h=z1(this,o),d=u[0].toTex(s);return c[0]&&(d="\\left(".concat(d,"\\right)")),h==="right"?f+d:d+f}else if(u.length===2){var p=u[0],m=p.toTex(s);c[0]&&(m="\\left(".concat(m,"\\right)"));var v=u[1],y=v.toTex(s);c[1]&&(y="\\left(".concat(y,"\\right)"));var w;switch(o==="keep"?w=p.getIdentifier():w=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+m+"}{"+y+"}";case"OperatorNode:pow":switch(m="{"+m+"}",y="{"+y+"}",w){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return m+"~"+y}return m+f+y}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(_,x){return _=_.toTex(s),c[x]&&(_="\\left(".concat(_,"\\right)")),_});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(_){return _.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return ei(i,"name",LT),i},{isClass:!0,isNode:!0}),BT="ParenthesisNode",HJe=["Node"],WJe=Y(BT,HJe,t=>{var{Node:e}=t;class r extends e{constructor(i){if(super(),!fr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return BT}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new r(a)}clone(){return new r(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:BT,content:this.content}}static fromJSON(i){return new r(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return ei(r,"name",BT),r},{isClass:!0,isNode:!0}),$T="RangeNode",GJe=["Node"],KJe=Y($T,GJe,t=>{var{Node:e}=t;function r(i,a,s){var o=yr(i,a,s),l={},u=yr(i.start,a,s);if(l.start=u!==null&&u<=o||a==="all",i.step){var c=yr(i.step,a,s);l.step=c!==null&&c<=o||a==="all"}var f=yr(i.end,a,s);return l.end=f!==null&&f<=o||a==="all",l}class n extends e{constructor(a,s,o){if(super(),!fr(a))throw new TypeError("Node expected");if(!fr(s))throw new TypeError("Node expected");if(o&&!fr(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return $T}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return Ui(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,l=this.start._compile(a,s),u=this.end._compile(a,s);if(this.step){var c=this.step._compile(a,s);return function(h,d,p){return o(l(h,d,p),u(h,d,p),c(h,d,p))}}else return function(h,d,p){return o(l(h,d,p),u(h,d,p))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l,u=this.start.toString(a);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(a);o.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(a);return o.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:$T,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l,u=this.start.toHTML(a);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(a);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s,a&&a.implicit),l=this.start.toTex(a);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(a);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(a);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return ei(n,"name",$T),n},{isClass:!0,isNode:!0}),jT="RelationalNode",XJe=["Node"],YJe=Y(jT,XJe,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return jT}get isRelationalNode(){return!0}_compile(a,s){var o=this,l=this.params.map(u=>u._compile(a,s));return function(c,f,h){for(var d,p=l[0](c,f,h),m=0;m<o.conditionals.length;m++){d=p,p=l[m+1](c,f,h);var v=ss(a,o.conditionals[m]);if(!v(d,p))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=yr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=yr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"("+f.toString(a)+")":f.toString(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+r[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:jT,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=yr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=yr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ll(r[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=yr(this,s,a&&a.implicit),l=this.params.map(function(f,h){var d=yr(f,s,a&&a.implicit);return s==="all"||d!==null&&d<=o?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Qt[this.conditionals[c]]+l[c+1];return u}}return ei(n,"name",jT),n},{isClass:!0,isNode:!0}),QJe="SymbolNode",ZJe=["math","?Unit","Node"],JJe=Y(QJe,ZJe,t=>{var{math:e,Unit:r,Node:n}=t;function i(s){return r?r.isValuelessUnit(s):!1}class a extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(f,h,d){return ss(h,u)};if(u in o)return function(f,h,d){return f.has(u)?f.get(u):ss(o,u)};var c=i(u);return function(f,h,d){return f.has(u)?f.get(u):c?new r(null,u):a.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}_toHTML(o){var l=ll(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=Ipe(this.name,l);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),VT="FunctionNode",eet=["math","Node","SymbolNode"],tet=Y(VT,eet,t=>{var e,{math:r,Node:n,SymbolNode:i}=t,a=l=>Ft(l,{truncate:78});function s(l,u,c){for(var f="",h=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,d=0,p;(p=h.exec(l))!==null;)if(f+=l.substring(d,p.index),d=p.index,p[0]==="$$")f+="$",d++;else{d+=p[0].length;var m=u[p[1]];if(!m)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof m){case"string":f+=m;break;case"object":if(fr(m))f+=m.toTex(c);else if(Array.isArray(m))f+=m.map(function(v,y){if(fr(v))return v.toTex(c);throw new TypeError("Template: "+p[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(fr(m[p[2]]&&m[p[2]]))f+=m[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=l.slice(d),f}class o extends n{constructor(u,c,f){if(super(),typeof u=="string"&&(u=new i(u)),!fr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(fr))throw new TypeError('Array containing Nodes expected for parameter "args"');var h=typeof f;if(!(h==="undefined"||h==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!f}get name(){return this.fn.name||""}get type(){return VT}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(C=>C._compile(u,c)),h=this.optional||fh(this.fn)&&this.fn.optionalChaining;if(Ui(this.fn)){var d=this.fn.name;if(c[d]){var w=this.args;return function(D,N,P){var M=ss(N,d);if(!(h&&M===void 0)){if(typeof M!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(M)));if(M.rawArgs)return M(w,u,Cx(D,N));var j=f.map(K=>K(D,N,P));return M.apply(M,j)}}}else{var p=d in u?ss(u,d):void 0,m=typeof p=="function"&&p.rawArgs===!0,v=C=>{var D;if(C.has(d))D=C.get(d);else if(d in u)D=ss(u,d);else if(h)D=void 0;else return o.onUndefinedFunction(d);if(typeof D=="function"||h&&D===void 0)return D;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(D)))};if(m){var y=this.args;return function(D,N,P){var M=v(D);if(M.rawArgs===!0)return M(y,u,Cx(D,N));var j=f.map(K=>K(D,N,P));return M(...j)}}else switch(f.length){case 0:return function(D,N,P){var M=v(D);if(!(h&&M===void 0))return M()};case 1:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f[0];return M(j(D,N,P))}};case 2:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f[0],K=f[1];return M(j(D,N,P),K(D,N,P))}};default:return function(D,N,P){var M=v(D);if(!(h&&M===void 0)){var j=f.map(K=>K(D,N,P));return M(...j)}}}}}else if(fh(this.fn)&&Gw(this.fn.index)&&this.fn.index.isObjectProperty()){var b=this.fn.object._compile(u,c),_=this.fn.index.getObjectProperty(),x=this.args;return function(D,N,P){var M=b(D,N,P);if(!(h&&(M==null||M[_]===void 0))){var j=x9e(M,_);if(j!=null&&j.rawArgs)return j(x,u,Cx(D,N));var K=f.map(k=>k(D,N,P));return j.apply(M,K)}}}else{var A=this.fn.toString(),E=this.fn._compile(u,c),S=this.args;return function(D,N,P){var M=E(D,N,P);if(!(h&&M===void 0)){if(typeof M!="function")throw new TypeError("Expression '".concat(A,"' did not evaluate to a function; value is:")+`
  `.concat(a(M)));if(M.rawArgs)return M(S,u,Cx(D,N));var j=f.map(K=>K(D,N,P));return M.apply(M,j)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],h=0;h<this.args.length;h++)f[h]=this._ifNode(u(this.args[h],"args["+h+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&Je(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(h){return h.toString(u)}),f=XS(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:VT,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+ll(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&Je(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(d){return d.toTex(u)}),f;jY[this.name]&&(f=jY[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(f=r[this.name].toTex);var h;switch(typeof f){case"function":h=f(this,u);break;case"string":h=s(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":h=f[c.length](this,u);break;case"string":h=s(f[c.length],this,u);break}}return typeof h<"u"?h:s(kJe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,ei(o,"name",VT),ei(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),ei(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),UY="parse",ret=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],net=Y(UY,ret,t=>{var{typed:e,numeric:r,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:h,ObjectNode:d,OperatorNode:p,ParenthesisNode:m,RangeNode:v,RelationalNode:y,SymbolNode:w}=t,b=e(UY,{string:function(ue){return le(ue,{})},"Array | Matrix":function(ue){return _(ue,{})},"string, Object":function(ue,we){var Ie=we.nodes!==void 0?we.nodes:{};return le(ue,Ie)},"Array | Matrix, Object":_});function _(B){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=ue.nodes!==void 0?ue.nodes:{};return Ct(B,function(Ie){if(typeof Ie!="string")throw new TypeError("String expected");return le(Ie,we)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},A={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},E={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},S={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"],D={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function N(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function P(B,ue){return B.expression.substr(B.index,ue)}function M(B){return P(B,1)}function j(B){B.index++}function K(B){return B.expression.charAt(B.index-1)}function k(B){return B.expression.charAt(B.index+1)}function V(B){for(B.tokenType=x.NULL,B.token="",B.comment="";;){if(M(B)==="#")for(;M(B)!==`
`&&M(B)!=="";)B.comment+=M(B),j(B);if(b.isWhitespace(M(B),B.nestingLevel))j(B);else break}if(M(B)===""){B.tokenType=x.DELIMITER;return}if(M(B)===`
`&&!B.nestingLevel){B.tokenType=x.DELIMITER,B.token=M(B),j(B);return}var ue=M(B),we=P(B,2),Ie=P(B,3);if(Ie.length===3&&A[Ie]){B.tokenType=x.DELIMITER,B.token=Ie,j(B),j(B),j(B);return}if(we.length===2&&A[we]&&(we!=="?."||!b.isDigit(B.expression.charAt(B.index+2)))){B.tokenType=x.DELIMITER,B.token=we,j(B),j(B);return}if(A[ue]){B.tokenType=x.DELIMITER,B.token=ue,j(B);return}if(b.isDigitDot(ue)){B.tokenType=x.NUMBER;var qe=P(B,2);if(qe==="0b"||qe==="0o"||qe==="0x"){for(B.token+=M(B),j(B),B.token+=M(B),j(B);b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);if(M(B)===".")for(B.token+=".",j(B);b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);else if(M(B)==="i")for(B.token+="i",j(B);b.isDigit(M(B));)B.token+=M(B),j(B);return}if(M(B)==="."){if(B.token+=M(B),j(B),!b.isDigit(M(B))){B.tokenType=x.DELIMITER;return}}else{for(;b.isDigit(M(B));)B.token+=M(B),j(B);b.isDecimalMark(M(B),k(B))&&(B.token+=M(B),j(B))}for(;b.isDigit(M(B));)B.token+=M(B),j(B);if(M(B)==="E"||M(B)==="e"){if(b.isDigit(k(B))||k(B)==="-"||k(B)==="+"){if(B.token+=M(B),j(B),(M(B)==="+"||M(B)==="-")&&(B.token+=M(B),j(B)),!b.isDigit(M(B)))throw ht(B,'Digit expected, got "'+M(B)+'"');for(;b.isDigit(M(B));)B.token+=M(B),j(B);if(b.isDecimalMark(M(B),k(B)))throw ht(B,'Digit expected, got "'+M(B)+'"')}else if(b.isDecimalMark(k(B),B.expression.charAt(B.index+2)))throw j(B),ht(B,'Digit expected, got "'+M(B)+'"')}return}if(b.isAlpha(M(B),K(B),k(B))){for(;b.isAlpha(M(B),K(B),k(B))||b.isDigit(M(B));)B.token+=M(B),j(B);Je(E,B.token)?B.tokenType=x.DELIMITER:B.tokenType=x.SYMBOL;return}for(B.tokenType=x.UNKNOWN;M(B)!=="";)B.token+=M(B),j(B);throw ht(B,'Syntax error in part "'+B.token+'"')}function q(B){do V(B);while(B.token===`
`)}function H(B){B.nestingLevel++}function ee(B){B.nestingLevel--}b.isAlpha=function(ue,we,Ie){return b.isValidLatinOrGreek(ue)||b.isValidMathSymbol(ue,Ie)||b.isValidMathSymbol(we,ue)},b.isValidLatinOrGreek=function(ue){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ue)},b.isValidMathSymbol=function(ue,we){return/^[\uD835]$/.test(ue)&&/^[\uDC00-\uDFFF]$/.test(we)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(we)},b.isWhitespace=function(ue,we){return ue===" "||ue==="	"||ue===""||ue===`
`&&we>0},b.isDecimalMark=function(ue,we){return ue==="."&&we!=="/"&&we!=="*"&&we!=="^"},b.isDigitDot=function(ue){return ue>="0"&&ue<="9"||ue==="."},b.isDigit=function(ue){return ue>="0"&&ue<="9"};function le(B,ue){var we=N();jn(we,{expression:B,extraNodes:ue}),V(we);var Ie=re(we);if(we.token!=="")throw we.tokenType===x.DELIMITER?Er(we,"Unexpected operator "+we.token):ht(we,'Unexpected part "'+we.token+'"');return Ie}function re(B){var ue,we=[],Ie;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(ue=L(B),B.comment&&(ue.comment=B.comment));B.token===`
`||B.token===";";)we.length===0&&ue&&(Ie=B.token!==";",we.push({node:ue,visible:Ie})),V(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(ue=L(B),B.comment&&(ue.comment=B.comment),Ie=B.token!==";",we.push({node:ue,visible:Ie}));return we.length>0?new o(we):(ue||(ue=new u(void 0),B.comment&&(ue.comment=B.comment)),ue)}function L(B){var ue,we,Ie,qe,dt=ie(B);if(B.token==="="){if(Ui(dt))return ue=dt.name,q(B),Ie=L(B),new s(new w(ue),Ie);if(fh(dt)){if(dt.optionalChaining)throw ht(B,"Cannot assign to optional chain");return q(B),Ie=L(B),new s(dt.object,dt.index,Ie)}else if(Tp(dt)&&Ui(dt.fn)&&(qe=!0,we=[],ue=dt.name,dt.args.forEach(function(On,ko){Ui(On)?we[ko]=On.name:qe=!1}),qe))return q(B),Ie=L(B),new c(ue,we,Ie);throw ht(B,"Invalid left hand side of assignment operator =")}return dt}function ie(B){for(var ue=X(B);B.token==="?";){var we=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,q(B);var Ie=ue,qe=L(B);if(B.token!==":")throw ht(B,"False part of conditional expression expected");B.conditionalLevel=null,q(B);var dt=L(B);ue=new l(Ie,qe,dt),B.conditionalLevel=we}return ue}function X(B){for(var ue=pe(B);B.token==="or";)q(B),ue=new p("or","or",[ue,pe(B)]);return ue}function pe(B){for(var ue=de(B);B.token==="xor";)q(B),ue=new p("xor","xor",[ue,de(B)]);return ue}function de(B){for(var ue=ae(B);B.token==="and";)q(B),ue=new p("and","and",[ue,ae(B)]);return ue}function ae(B){for(var ue=z(B);B.token==="|";)q(B),ue=new p("|","bitOr",[ue,z(B)]);return ue}function z(B){for(var ue=ne(B);B.token==="^|";)q(B),ue=new p("^|","bitXor",[ue,ne(B)]);return ue}function ne(B){for(var ue=fe(B);B.token==="&";)q(B),ue=new p("&","bitAnd",[ue,fe(B)]);return ue}function fe(B){for(var ue=[Q(B)],we=[],Ie={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Je(Ie,B.token);){var qe={name:B.token,fn:Ie[B.token]};we.push(qe),q(B),ue.push(Q(B))}return ue.length===1?ue[0]:ue.length===2?new p(we[0].name,we[0].fn,ue):new y(we.map(dt=>dt.fn),ue)}function Q(B){var ue,we,Ie,qe;ue=ye(B);for(var dt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Je(dt,B.token);)we=B.token,Ie=dt[we],q(B),qe=[ue,ye(B)],ue=new p(we,Ie,qe);return ue}function ye(B){var ue,we,Ie,qe;ue=me(B);for(var dt={to:"to",in:"to"};Je(dt,B.token);)we=B.token,Ie=dt[we],q(B),we==="in"&&"])},;".includes(B.token)?ue=new p("*","multiply",[ue,new w("in")],!0):(qe=[ue,me(B)],ue=new p(we,Ie,qe));return ue}function me(B){var ue,we=[];if(B.token===":"?ue=new u(1):ue=De(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(we.push(ue);B.token===":"&&we.length<3;)q(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?we.push(new w("end")):we.push(De(B));we.length===3?ue=new v(we[0],we[2],we[1]):ue=new v(we[0],we[1])}return ue}function De(B){var ue,we,Ie,qe;ue=Le(B);for(var dt={"+":"add","-":"subtract"};Je(dt,B.token);){we=B.token,Ie=dt[we],q(B);var On=Le(B);On.isPercentage?qe=[ue,new p("*","multiply",[ue,On])]:qe=[ue,On],ue=new p(we,Ie,qe)}return ue}function Le(B){var ue,we,Ie,qe;ue=ze(B),we=ue;for(var dt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Je(dt,B.token);)Ie=B.token,qe=dt[Ie],q(B),we=ze(B),ue=new p(Ie,qe,[ue,we]);return ue}function ze(B){var ue,we;for(ue=Be(B),we=ue;B.tokenType===x.SYMBOL||B.token==="in"&&qt(ue)||B.token==="in"&&Bn(ue)&&ue.fn==="unaryMinus"&&qt(ue.args[0])||B.tokenType===x.NUMBER&&!qt(we)&&(!Bn(we)||we.op==="!")||B.token==="(";)we=Be(B),ue=new p("*","multiply",[ue,we],!0);return ue}function Be(B){for(var ue=Ve(B),we=ue,Ie=[];B.token==="/"&&i4(we);)if(Ie.push(jn({},B)),q(B),B.tokenType===x.NUMBER)if(Ie.push(jn({},B)),q(B),B.tokenType===x.SYMBOL||B.token==="("||B.token==="in")jn(B,Ie.pop()),Ie.pop(),we=Ve(B),ue=new p("/","divide",[ue,we]);else{Ie.pop(),jn(B,Ie.pop());break}else{jn(B,Ie.pop());break}return ue}function Ve(B){var ue=Ke(B);if(B.token==="%"){var we=jn({},B);q(B);try{Ke(B),jn(B,we)}catch{ue=new p("/","divide",[ue,new u(100)],!1,!0)}}return ue}function Ke(B){var ue,we,Ie,qe={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Je(qe,B.token)?(Ie=qe[B.token],ue=B.token,q(B),we=[Ke(B)],new p(ue,Ie,we)):te(B)}function te(B){var ue,we,Ie,qe;return ue=ce(B),(B.token==="^"||B.token===".^")&&(we=B.token,Ie=we==="^"?"pow":"dotPow",q(B),qe=[ue,Ke(B)],ue=new p(we,Ie,qe)),ue}function ce(B){for(var ue=G(B);B.token==="??";)q(B),ue=new p("??","nullish",[ue,G(B)]);return ue}function G(B){var ue,we,Ie,qe;ue=Z(B);for(var dt={"!":"factorial","'":"ctranspose"};Je(dt,B.token);)we=B.token,Ie=dt[we],V(B),qe=[ue],ue=new p(we,Ie,qe),ue=he(B,ue);return ue}function Z(B){var ue=[];if(B.tokenType===x.SYMBOL&&Je(B.extraNodes,B.token)){var we=B.extraNodes[B.token];if(V(B),B.token==="("){if(ue=[],H(B),V(B),B.token!==")")for(ue.push(L(B));B.token===",";)V(B),ue.push(L(B));if(B.token!==")")throw ht(B,"Parenthesis ) expected");ee(B),V(B)}return new we(ue)}return oe(B)}function oe(B){var ue,we;return B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in E?(we=B.token,V(B),Je(S,we)?ue=new u(S[we]):C.includes(we)?ue=new u(r(we,"number")):ue=new w(we),ue=he(B,ue),ue):ve(B)}function he(B,ue,we){for(var Ie;;){var qe=!1;B.token==="?."&&(qe=!0,V(B));var dt=(B.token==="("||B.token==="["||B.token===".")&&!0;if(!(qe||dt))break;if(Ie=[],B.token==="(")if(qe||Ui(ue)||fh(ue)){if(H(B),V(B),B.token!==")")for(Ie.push(L(B));B.token===",";)V(B),Ie.push(L(B));if(B.token!==")")throw ht(B,"Parenthesis ) expected");ee(B),V(B),ue=new f(ue,Ie,qe)}else return ue;else if(B.token==="["){if(H(B),V(B),B.token!=="]")for(Ie.push(L(B));B.token===",";)V(B),Ie.push(L(B));if(B.token!=="]")throw ht(B,"Parenthesis ] expected");ee(B),V(B),ue=new i(ue,new h(Ie),qe)}else{qe||V(B);var On=B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in E;if(!On){var ko="Property name expected after ";throw ko+=qe?"optional chain":"dot",ht(B,ko)}Ie.push(new u(B.token)),V(B);var a1=!0;ue=new i(ue,new h(Ie,a1),qe)}}return ue}function ve(B){var ue,we;return B.token==='"'||B.token==="'"?(we=ge(B,B.token),ue=new u(we),ue=he(B,ue),ue):Pe(B)}function ge(B,ue){for(var we="";M(B)!==""&&M(B)!==ue;)if(M(B)==="\\"){j(B);var Ie=M(B),qe=D[Ie];if(qe!==void 0)we+=qe,B.index+=1;else if(Ie==="u"){var dt=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(dt))we+=String.fromCharCode(parseInt(dt,16)),B.index+=5;else throw ht(B,"Invalid unicode character \\u".concat(dt))}else throw ht(B,"Bad escape character \\".concat(Ie))}else we+=M(B),j(B);if(V(B),B.token!==ue)throw ht(B,"End of string ".concat(ue," expected"));return V(B),we}function Pe(B){var ue,we,Ie,qe;if(B.token==="["){if(H(B),V(B),B.token!=="]"){var dt=Se(B);if(B.token===";"){for(Ie=1,we=[dt];B.token===";";)V(B),B.token!=="]"&&(we[Ie]=Se(B),Ie++);if(B.token!=="]")throw ht(B,"End of matrix ] expected");ee(B),V(B),qe=we[0].items.length;for(var On=1;On<Ie;On++)if(we[On].items.length!==qe)throw Er(B,"Column dimensions mismatch ("+we[On].items.length+" !== "+qe+")");ue=new a(we)}else{if(B.token!=="]")throw ht(B,"End of matrix ] expected");ee(B),V(B),ue=dt}}else ee(B),V(B),ue=new a([]);return he(B,ue)}return $e(B)}function Se(B){for(var ue=[L(B)],we=1;B.token===",";)V(B),B.token!=="]"&&B.token!==";"&&(ue[we]=L(B),we++);return new a(ue)}function $e(B){if(B.token==="{"){H(B);var ue,we={};do if(V(B),B.token!=="}"){if(B.token==='"'||B.token==="'")ue=ge(B,B.token);else if(B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in E)ue=B.token,V(B);else throw ht(B,"Symbol or string expected as object key");if(B.token!==":")throw ht(B,"Colon : expected after object key");V(B),we[ue]=L(B)}while(B.token===",");if(B.token!=="}")throw ht(B,"Comma , or bracket } expected after object value");ee(B),V(B);var Ie=new d(we);return Ie=he(B,Ie),Ie}return Ce(B)}function Ce(B){var ue;if(B.tokenType===x.NUMBER){ue=B.token,V(B);var we=Hp(ue,n),Ie=r(ue,we);return new u(Ie)}return rt(B)}function rt(B){var ue;if(B.token==="("){if(H(B),V(B),ue=L(B),B.token!==")")throw ht(B,"Parenthesis ) expected");return ee(B),V(B),ue=new m(ue),ue=he(B,ue),ue}return Mt(B)}function Mt(B){throw B.token===""?ht(B,"Unexpected end of expression"):ht(B,"Value expected")}function Wt(B){return B.index-B.token.length+1}function ht(B,ue){var we=Wt(B),Ie=new SyntaxError(ue+" (char "+we+")");return Ie.char=we,Ie}function Er(B,ue){var we=Wt(B),Ie=new SyntaxError(ue+" (char "+we+")");return Ie.char=we,Ie}return e.addConversion({from:"string",to:"Node",convert:b}),b}),zY="compile",iet=["typed","parse"],aet=Y(zY,iet,t=>{var{typed:e,parse:r}=t;return e(zY,{string:function(i){return r(i).compile()},"Array | Matrix":function(i){return Ct(i,function(a){return r(a).compile()})}})}),qY="evaluate",set=["typed","parse"],oet=Y(qY,set,t=>{var{typed:e,parse:r}=t;return e(qY,{string:function(i){var a=JA();return r(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return r(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=JA();return Ct(i,function(s){return r(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return Ct(i,function(s){return r(s).compile().evaluate(a)})}})}),uet="Parser",cet=["evaluate","parse"],fet=Y(uet,cet,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:JA(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(a){return e(a,this.scope)},n.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},n.prototype.getAll=function(){return S9e(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var s=0;s<a.length;s++){var o=a.charAt(s-1),l=a.charAt(s),u=a.charAt(s+1),c=r.isAlpha(l,o,u)||s>0&&r.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(a,s){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,s),s},n.prototype.remove=function(a){this.scope.delete(a)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var a={mathjs:"Parser",variables:{},functions:{}};for(var[s,o]of this.scope)if(jhe(o)){if(!het(o))throw new Error("Cannot serialize external function ".concat(s));a.functions[s]="".concat(o.syntax," = ").concat(o.expr)}else a.variables[s]=o;return a},n.fromJSON=function(a){var s=new n;return Object.entries(a.variables).forEach(o=>{var[l,u]=o;return s.set(l,u)}),Object.entries(a.functions).forEach(o=>{var[l,u]=o;return s.evaluate(u)}),s},n},{isClass:!0});function het(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var HY="parser",det=["typed","Parser"],pet=Y(HY,det,t=>{var{typed:e,Parser:r}=t;return e(HY,{"":function(){return new r}})}),WY="lup",met=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],get=Y(WY,met,t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:a,multiplyScalar:s,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:h,Spa:d}=t;return e(WY,{DenseMatrix:function(y){return p(y)},SparseMatrix:function(y){return m(y)},Array:function(y){var w=r(y),b=p(w);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function p(v){var y=v._size[0],w=v._size[1],b=Math.min(y,w),_=wt(v._data),x=[],A=[y,b],E=[],S=[b,w],C,D,N,P=[];for(C=0;C<y;C++)P[C]=C;for(D=0;D<w;D++){if(D>0)for(C=0;C<y;C++){var M=Math.min(C,D),j=0;for(N=0;N<M;N++)j=i(j,s(_[C][N],_[N][D]));_[C][D]=o(_[C][D],j)}var K=D,k=0,V=0;for(C=D;C<y;C++){var q=_[C][D],H=n(q);l(H,k)&&(K=C,k=H,V=q)}if(D!==K&&(P[D]=[P[K],P[K]=P[D]][0],f._swapRows(D,K,_)),D<y)for(C=D+1;C<y;C++){var ee=_[C][D];u(ee,0)||(_[C][D]=a(_[C][D],V))}}for(D=0;D<w;D++)for(C=0;C<y;C++){if(D===0&&(C<w&&(E[C]=[]),x[C]=[]),C<D){C<w&&(E[C][D]=_[C][D]),D<y&&(x[C][D]=0);continue}if(C===D){C<w&&(E[C][D]=_[C][D]),D<y&&(x[C][D]=1);continue}C<w&&(E[C][D]=0),D<y&&(x[C][D]=_[C][D])}var le=new f({data:x,size:A}),re=new f({data:E,size:S}),L=[];for(C=0,b=P.length;C<b;C++)L[P[C]]=C;return{L:le,U:re,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(v){var y=v._size[0],w=v._size[1],b=Math.min(y,w),_=v._values,x=v._index,A=v._ptr,E=[],S=[],C=[],D=[y,b],N=[],P=[],M=[],j=[b,w],K,k,V,q=[],H=[];for(K=0;K<y;K++)q[K]=K,H[K]=K;var ee=function(L,ie){var X=H[L],pe=H[ie];q[X]=ie,q[pe]=L,H[L]=pe,H[ie]=X},le=function(){var L=new d;k<y&&(C.push(E.length),E.push(1),S.push(k)),M.push(N.length);var ie=A[k],X=A[k+1];for(V=ie;V<X;V++)K=x[V],L.set(q[K],_[V]);k>0&&L.forEach(0,k-1,function(z,ne){h._forEachRow(z,E,S,C,function(fe,Q){fe>z&&L.accumulate(fe,c(s(Q,ne)))})});var pe=k,de=L.get(k),ae=n(de);L.forEach(k+1,y-1,function(z,ne){var fe=n(ne);l(fe,ae)&&(pe=z,ae=fe,de=ne)}),k!==pe&&(h._swapRows(k,pe,D[1],E,S,C),h._swapRows(k,pe,j[1],N,P,M),L.swap(k,pe),ee(k,pe)),L.forEach(0,y-1,function(z,ne){z<=k?(N.push(ne),P.push(z)):(ne=a(ne,de),u(ne,0)||(E.push(ne),S.push(z)))})};for(k=0;k<w;k++)le();return M.push(N.length),C.push(E.length),{L:new h({values:E,index:S,ptr:C,size:D}),U:new h({values:N,index:P,ptr:M,size:j}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),GY="qr",vet=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],yet=Y(GY,vet,t=>{var{typed:e,matrix:r,zeros:n,identity:i,isZero:a,equal:s,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:h,multiplyScalar:d,subtractScalar:p,complex:m}=t;return jn(e(GY,{DenseMatrix:function(_){return y(_)},SparseMatrix:function(_){return w()},Array:function(_){var x=r(_),A=y(x);return{Q:A.Q.valueOf(),R:A.R.valueOf()}}}),{_denseQRimpl:v});function v(b){var _=b._size[0],x=b._size[1],A=i([_],"dense"),E=A._data,S=b.clone(),C=S._data,D,N,P,M=n([_],"");for(P=0;P<Math.min(x,_);++P){var j=C[P][P],K=c(s(j,0)?1:o(j)),k=u(K),V=0;for(D=P;D<_;D++)V=f(V,d(C[D][P],u(C[D][P])));var q=d(K,l(V));if(!a(q)){var H=p(j,q);for(M[P]=1,D=P+1;D<_;D++)M[D]=h(C[D][P],H);var ee=c(u(h(H,q))),le=void 0;for(N=P;N<x;N++){for(le=0,D=P;D<_;D++)le=f(le,d(u(M[D]),C[D][N]));for(le=d(le,ee),D=P;D<_;D++)C[D][N]=d(p(C[D][N],d(M[D],le)),k)}for(D=0;D<_;D++){for(le=0,N=P;N<_;N++)le=f(le,d(E[D][N],M[N]));for(le=d(le,ee),N=P;N<_;++N)E[D][N]=h(p(E[D][N],d(le,u(M[N]))),k)}}}return{Q:A,R:S,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(b){var _=v(b),x=_.R._data;if(b._data.length>0)for(var A=x[0][0].type==="Complex"?m(0):0,E=0;E<x.length;++E)for(var S=0;S<E&&S<(x[0]||[]).length;++S)x[E][S]=A;return _}function w(b){throw new Error("qr not implemented for sparse matrices yet")}});function bet(t,e,r,n){t._values;for(var i=t._index,a=t._ptr,s=t._size,o=t._datatype,l=s[0],u=s[1],c=null,f=[],h=[],d=0,p=0;p<u;p++){h[p]=d;for(var m=r?r[p]:p,v=a[m],y=a[m+1],w=v;w<y;w++){var b=i[w];f[d]=b,d++}}return h[u]=d,t.createSparseMatrix({values:c,index:f,ptr:h,size:[l,u],datatype:o})}function Ope(t,e,r,n,i,a,s){var o=0;for(r[s]=t;o>=0;){var l=r[s+o],u=r[n+l];u===-1?(o--,a[e++]=l):(r[n+l]=r[i+u],++o,r[s+o]=u)}return e}function wet(t,e){if(!t)return null;var r=0,n,i=[],a=[],s=0,o=e,l=2*e;for(n=0;n<e;n++)a[s+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(a[o+n]=a[s+t[n]],a[s+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=Ope(n,r,a,s,o,i,l));return i}function xet(t,e){if(!t)return null;var r=t._index,n=t._ptr,i=t._size,a=i[0],s=i[1],o=[],l=[],u=0,c=s,f,h;for(f=0;f<a;f++)l[c+f]=-1;for(var d=0;d<s;d++){o[d]=-1,l[u+d]=-1;for(var p=n[d],m=n[d+1],v=p;v<m;v++){var y=r[v];for(f=l[c+y];f!==-1&&f<d;f=h)h=l[u+f],l[u+f]=d,h===-1&&(o[f]=d);l[c+y]=d}}return o}function Aet(t,e,r){for(var n=t._values,i=t._index,a=t._ptr,s=t._size,o=s[1],l=0,u=0;u<o;u++){var c=a[u];for(a[u]=l;c<a[u+1];c++)e(i[c],u,n?n[c]:1,r)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return a[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function Uh(t){return-t-2}var _et="csAmd",Eet=["add","multiply","transpose"],Cet=Y(_et,Eet,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,f){if(!f||c<=0||c>3)return null;var h=f._size,d=h[0],p=h[1],m=0,v=Math.max(16,10*Math.sqrt(p));v=Math.min(p-2,v);var y=i(c,f,d,p,v);Aet(y,l,null);for(var w=y._index,b=y._ptr,_=b[p],x=[],A=[],E=0,S=p+1,C=2*(p+1),D=3*(p+1),N=4*(p+1),P=5*(p+1),M=6*(p+1),j=7*(p+1),K=x,k=a(p,b,A,E,D,K,C,j,S,M,N,P),V=s(p,b,A,P,N,M,v,S,D,K,C),q=0,H,ee,le,re,L,ie,X,pe,de,ae,z,ne,fe,Q,ye,me;V<p;){for(le=-1;q<p&&(le=A[D+q])===-1;q++);A[C+le]!==-1&&(K[A[C+le]]=-1),A[D+q]=A[C+le];var De=A[N+le],Le=A[S+le];V+=Le;var ze=0;A[S+le]=-Le;var Be=b[le],Ve=De===0?Be:_,Ke=Ve;for(re=1;re<=De+1;re++){for(re>De?(ie=le,X=Be,pe=A[E+le]-De):(ie=w[Be++],X=b[ie],pe=A[E+ie]),L=1;L<=pe;L++)H=w[X++],!((de=A[S+H])<=0)&&(ze+=de,A[S+H]=-de,w[Ke++]=H,A[C+H]!==-1&&(K[A[C+H]]=K[H]),K[H]!==-1?A[C+K[H]]=A[C+H]:A[D+A[P+H]]=A[C+H]);ie!==le&&(b[ie]=Uh(le),A[M+ie]=0)}for(De!==0&&(_=Ke),A[P+le]=ze,b[le]=Ve,A[E+le]=Ke-Ve,A[N+le]=-2,k=o(k,m,A,M,p),ae=Ve;ae<Ke;ae++)if(H=w[ae],!((z=A[N+H])<=0)){de=-A[S+H];var te=k-de;for(Be=b[H],ne=b[H]+z-1;Be<=ne;Be++)ie=w[Be],A[M+ie]>=k?A[M+ie]-=de:A[M+ie]!==0&&(A[M+ie]=A[P+ie]+te)}for(ae=Ve;ae<Ke;ae++){for(H=w[ae],ne=b[H],fe=ne+A[N+H]-1,Q=ne,ye=0,me=0,Be=ne;Be<=fe;Be++)if(ie=w[Be],A[M+ie]!==0){var ce=A[M+ie]-k;ce>0?(me+=ce,w[Q++]=ie,ye+=ie):(b[ie]=Uh(le),A[M+ie]=0)}A[N+H]=Q-ne+1;var G=Q,Z=ne+A[E+H];for(Be=fe+1;Be<Z;Be++){ee=w[Be];var oe=A[S+ee];oe<=0||(me+=oe,w[Q++]=ee,ye+=ee)}me===0?(b[H]=Uh(le),de=-A[S+H],ze-=de,Le+=de,V+=de,A[S+H]=0,A[N+H]=-1):(A[P+H]=Math.min(A[P+H],me),w[Q]=w[G],w[G]=w[ne],w[ne]=le,A[E+H]=Q-ne+1,ye=(ye<0?-ye:ye)%p,A[C+H]=A[j+ye],A[j+ye]=H,K[H]=ye)}for(A[P+le]=ze,m=Math.max(m,ze),k=o(k+m,m,A,M,p),ae=Ve;ae<Ke;ae++)if(H=w[ae],!(A[S+H]>=0))for(ye=K[H],H=A[j+ye],A[j+ye]=-1;H!==-1&&A[C+H]!==-1;H=A[C+H],k++){for(pe=A[E+H],z=A[N+H],Be=b[H]+1;Be<=b[H]+pe-1;Be++)A[M+w[Be]]=k;var he=H;for(ee=A[C+H];ee!==-1;){var ve=A[E+ee]===pe&&A[N+ee]===z;for(Be=b[ee]+1;ve&&Be<=b[ee]+pe-1;Be++)A[M+w[Be]]!==k&&(ve=0);ve?(b[ee]=Uh(H),A[S+H]+=A[S+ee],A[S+ee]=0,A[N+ee]=-1,ee=A[C+ee],A[C+he]=ee):(he=ee,ee=A[C+ee])}}for(Be=Ve,ae=Ve;ae<Ke;ae++)H=w[ae],!((de=-A[S+H])<=0)&&(A[S+H]=de,me=A[P+H]+ze-de,me=Math.min(me,p-V-de),A[D+me]!==-1&&(K[A[D+me]]=H),A[C+H]=A[D+me],K[H]=-1,A[D+me]=H,q=Math.min(q,me),A[P+H]=me,w[Be++]=H);A[S+le]=Le,(A[E+le]=Be-Ve)===0&&(b[le]=-1,A[M+le]=0),De!==0&&(_=Be)}for(H=0;H<p;H++)b[H]=Uh(b[H]);for(ee=0;ee<=p;ee++)A[D+ee]=-1;for(ee=p;ee>=0;ee--)A[S+ee]>0||(A[C+ee]=A[D+b[ee]],A[D+b[ee]]=ee);for(ie=p;ie>=0;ie--)A[S+ie]<=0||b[ie]!==-1&&(A[C+ie]=A[D+b[ie]],A[D+b[ie]]=ie);for(le=0,H=0;H<=p;H++)b[H]===-1&&(le=Ope(H,le,A,D,C,x,M));return x.splice(x.length-1,1),x};function i(u,c,f,h,d){var p=n(c);if(u===1&&h===f)return e(c,p);if(u===2){for(var m=p._index,v=p._ptr,y=0,w=0;w<f;w++){var b=v[w];if(v[w]=y,!(v[w+1]-b>d))for(var _=v[w+1];b<_;b++)m[y++]=m[b]}return v[f]=y,c=n(p),r(p,c)}return r(p,c)}function a(u,c,f,h,d,p,m,v,y,w,b,_){for(var x=0;x<u;x++)f[h+x]=c[x+1]-c[x];f[h+u]=0;for(var A=0;A<=u;A++)f[d+A]=-1,p[A]=-1,f[m+A]=-1,f[v+A]=-1,f[y+A]=1,f[w+A]=1,f[b+A]=0,f[_+A]=f[h+A];var E=o(0,0,f,w,u);return f[b+u]=-2,c[u]=-1,f[w+u]=0,E}function s(u,c,f,h,d,p,m,v,y,w,b){for(var _=0,x=0;x<u;x++){var A=f[h+x];if(A===0)f[d+x]=-2,_++,c[x]=-1,f[p+x]=0;else if(A>m)f[v+x]=0,f[d+x]=-1,_++,c[x]=Uh(u),f[v+u]++;else{var E=f[y+A];E!==-1&&(w[E]=x),f[b+x]=f[y+A],f[y+A]=x}}return _}function o(u,c,f,h,d){if(u<2||u+c<0){for(var p=0;p<d;p++)f[h+p]!==0&&(f[h+p]=1);u=2}return u}function l(u,c){return u!==c}});function Tet(t,e,r,n,i,a,s){var o,l,u=0,c;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var f=r[a+t];if(r[a+t]=e,f===-1)u=1,c=t;else{for(u=2,c=f;c!==r[s+c];c=r[s+c]);for(o=f;o!==c;o=l)l=r[s+o],r[s+o]=c}return{jleaf:u,q:c}}var Det="csCounts",Net=["transpose"],Pet=Y(Det,Net,t=>{var{transpose:e}=t;return function(r,n,i,a){if(!r||!n||!i)return null;var s=r._size,o=s[0],l=s[1],u,c,f,h,d,p,m,v=4*l+(a?l+o+1:0),y=[],w=0,b=l,_=2*l,x=3*l,A=4*l,E=5*l+1;for(f=0;f<v;f++)y[f]=-1;var S=[],C=e(r),D=C._index,N=C._ptr;for(f=0;f<l;f++)for(c=i[f],S[c]=y[x+c]===-1?1:0;c!==-1&&y[x+c]===-1;c=n[c])y[x+c]=f;if(a){for(f=0;f<l;f++)y[i[f]]=f;for(u=0;u<o;u++){for(f=l,p=N[u],m=N[u+1],d=p;d<m;d++)f=Math.min(f,y[D[d]]);y[E+u]=y[A+f],y[A+f]=u}}for(u=0;u<l;u++)y[w+u]=u;for(f=0;f<l;f++){for(c=i[f],n[c]!==-1&&S[n[c]]--,h=a?y[A+f]:c;h!==-1;h=a?y[E+h]:-1)for(d=N[h];d<N[h+1];d++){u=D[d];var P=Tet(u,c,y,x,b,_,w);P.jleaf>=1&&S[c]++,P.jleaf===2&&S[P.q]--}n[c]!==-1&&(y[w+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(S[n[c]]+=S[c]);return S}}),Met="csSqr",Iet=["add","multiply","transpose"],Oet=Y(Met,Iet,t=>{var{add:e,multiply:r,transpose:n}=t,i=Cet({add:e,multiply:r,transpose:n}),a=Pet({transpose:n});return function(l,u,c){var f=u._ptr,h=u._size,d=h[1],p,m={};if(m.q=i(l,u),l&&!m.q)return null;if(c){var v=l?bet(u,null,m.q):u;m.parent=xet(v);var y=wet(m.parent,d);if(m.cp=a(v,m.parent,y,1),v&&m.parent&&m.cp&&s(v,m))for(m.unz=0,p=0;p<d;p++)m.unz+=m.cp[p]}else m.unz=4*f[d]+d,m.lnz=m.unz;return m};function s(o,l){var u=o._ptr,c=o._index,f=o._size,h=f[0],d=f[1];l.pinv=[],l.leftmost=[];var p=l.parent,m=l.pinv,v=l.leftmost,y=[],w=0,b=h,_=h+d,x=h+2*d,A,E,S,C,D;for(E=0;E<d;E++)y[b+E]=-1,y[_+E]=-1,y[x+E]=0;for(A=0;A<h;A++)v[A]=-1;for(E=d-1;E>=0;E--)for(C=u[E],D=u[E+1],S=C;S<D;S++)v[c[S]]=E;for(A=h-1;A>=0;A--)m[A]=-1,E=v[A],E!==-1&&(y[x+E]++===0&&(y[_+E]=A),y[w+A]=y[b+E],y[b+E]=A);for(l.lnz=0,l.m2=h,E=0;E<d;E++)if(A=y[b+E],l.lnz++,A<0&&(A=l.m2++),m[A]=E,!(--x[E]<=0)){l.lnz+=y[x+E];var N=p[E];N!==-1&&(y[x+N]===0&&(y[_+N]=y[_+E]),y[w+y[_+E]]=y[b+N],y[b+N]=y[w+A],y[x+N]+=y[x+E])}for(A=0;A<h;A++)m[A]<0&&(m[A]=E++);return!0}});function S4(t,e){return t[e]<0}function kpe(t,e){t[e]=Uh(t[e])}function KY(t){return t<0?Uh(t):t}function ket(t,e,r,n,i){var a=e._index,s=e._ptr,o=e._size,l=o[1],u,c,f,h=0;for(n[0]=t;h>=0;){t=n[h];var d=i?i[t]:t;S4(s,t)||(kpe(s,t),n[l+h]=d<0?0:KY(s[d]));var p=1;for(c=n[l+h],f=d<0?0:KY(s[d+1]);c<f;c++)if(u=a[c],!S4(s,u)){n[l+h]=c,n[++h]=u,p=0;break}p&&(h--,n[--r]=t)}return r}function Ret(t,e,r,n,i){var a=t._ptr,s=t._size,o=e._index,l=e._ptr,u=s[1],c,f,h,d=u;for(f=l[r],h=l[r+1],c=f;c<h;c++){var p=o[c];S4(a,p)||(d=ket(p,t,d,n,i))}for(c=d;c<u;c++)kpe(a,n[c]);return d}var Fet="csSpsolve",Let=["divideScalar","multiply","subtract"],Bet=Y(Fet,Let,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(a,s,o,l,u,c,f){var h=a._values,d=a._index,p=a._ptr,m=a._size,v=m[1],y=s._values,w=s._index,b=s._ptr,_,x,A,E,S=Ret(a,s,o,l,c);for(_=S;_<v;_++)u[l[_]]=0;for(x=b[o],A=b[o+1],_=x;_<A;_++)u[w[_]]=y[_];for(var C=S;C<v;C++){var D=l[C],N=c?c[D]:D;if(!(N<0))for(x=p[N],A=p[N+1],u[D]=e(u[D],h[f?x:A-1]),_=f?x+1:x,E=f?A:A-1;_<E;_++){var P=d[_];u[P]=n(u[P],r(h[_],u[D]))}}return S}}),$et="csLu",jet=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Vet=Y($et,jet,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=t,l=Bet({divideScalar:r,multiply:n,subtract:i});return function(c,f,h){if(!c)return null;var d=c._size,p=d[1],m,v=100,y=100;f&&(m=f.q,v=f.lnz||v,y=f.unz||y);var w=[],b=[],_=[],x=new o({values:w,index:b,ptr:_,size:[p,p]}),A=[],E=[],S=[],C=new o({values:A,index:E,ptr:S,size:[p,p]}),D=[],N,P,M=[],j=[];for(N=0;N<p;N++)M[N]=0,D[N]=-1,_[N+1]=0;v=0,y=0;for(var K=0;K<p;K++){_[K]=v,S[K]=y;var k=m?m[K]:K,V=l(x,c,k,j,M,D,1),q=-1,H=-1;for(P=V;P<p;P++)if(N=j[P],D[N]<0){var ee=e(M[N]);a(ee,H)&&(H=ee,q=N)}else E[y]=D[N],A[y++]=M[N];if(q===-1||H<=0)return null;D[k]<0&&s(e(M[k]),n(H,h))&&(q=k);var le=M[q];for(E[y]=K,A[y++]=le,D[q]=K,b[v]=q,w[v++]=1,P=V;P<p;P++)N=j[P],D[N]<0&&(b[v]=N,w[v++]=r(M[N],le)),M[N]=0}for(_[p]=v,S[p]=y,P=0;P<v;P++)b[P]=D[b[P]];return w.splice(v,w.length-v),b.splice(v,b.length-v),A.splice(y,A.length-y),E.splice(y,E.length-y),{L:x,U:C,pinv:D}}}),XY="slu",Uet=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],zet=Y(XY,Uet,t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=t,f=Oet({add:n,multiply:i,transpose:a}),h=Vet({abs:r,divideScalar:s,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(XY,{"SparseMatrix, number, number":function(p,m,v){if(!nt(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=f(m,p,!1),w=h(p,y,v);return{L:w.L,U:w.U,p:w.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function YY(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var QY="lusolve",qet=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Het=Y(QY,qet,t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=t,l=QS({DenseMatrix:o});return e(QY,{"Array, Array | Matrix":function(h,d){h=r(h);var p=n(h),m=c(p.L,p.U,p.p,null,d);return m.valueOf()},"DenseMatrix, Array | Matrix":function(h,d){var p=n(h);return c(p.L,p.U,p.p,null,d)},"SparseMatrix, Array | Matrix":function(h,d){var p=n(h);return c(p.L,p.U,p.p,null,d)},"SparseMatrix, Array | Matrix, number, number":function(h,d,p,m){var v=i(h,p,m);return c(v.L,v.U,v.p,v.q,d)},"Object, Array | Matrix":function(h,d){return c(h.L,h.U,h.p,h.q,d)}});function u(f){if(ft(f))return f;if(vr(f))return r(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,h,d,p,m){f=u(f),h=u(h),d&&(m=l(f,m,!0),m._data=YY(d,m._data));var v=s(f,m),y=a(h,v);return p&&(y._data=YY(p,y._data)),y}}),ZY="polynomialRoot",Wet=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Get=Y(ZY,Wet,t=>{var{typed:e,isZero:r,equalScalar:n,add:i,subtract:a,multiply:s,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:h,re:d}=t;return e(ZY,{"number|Complex, ...number|Complex":(p,m)=>{for(var v=[p,...m];v.length>0&&r(v[v.length-1]);)v.pop();if(v.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(m,"] must have a non-zero non-constant coefficient"));switch(v.length){case 2:return[u(o(v[0],v[1]))];case 3:{var[y,w,b]=v,_=s(2,b),x=s(w,w),A=s(4,b,y);if(n(x,A))return[o(u(w),_)];var E=l(a(x,A));return[o(a(E,w),_),o(a(u(E),w),_)]}case 4:{var[S,C,D,N]=v,P=u(s(3,N)),M=s(D,D),j=s(3,N,C),K=i(s(2,D,D,D),s(27,N,N,S)),k=s(9,N,D,C);if(n(M,j)&&n(K,k))return[o(D,P)];var V=a(M,j),q=a(K,k),H=i(s(18,N,D,C,S),s(D,D,C,C)),ee=i(s(4,D,D,D,S),s(4,N,C,C,C),s(27,N,N,S,S));if(n(H,ee))return[o(a(s(4,N,D,C),i(s(9,N,N,S),s(D,D,D))),s(N,V)),o(a(s(9,N,S),s(D,C)),s(2,V))];var le;n(M,j)?le=q:le=o(i(q,l(a(s(q,q),s(4,V,V,V)))),2);var re=!0,L=c(le,re).toArray().map(ie=>o(i(D,ie,o(V,ie)),P));return L.map(ie=>f(ie)==="Complex"&&n(d(ie),d(ie)+h(ie))?d(ie):ie)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(v))}}})}),Ket="Help",Xet=["evaluate"],Yet=Y(Ket,Xet,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,s=e("config()"),o={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(f){c=f}c!==void 0&&!$he(c)&&(i+="        "+Ft(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},r.prototype.toJSON=function(){var n=wt(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new r(i)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),Qet="Chain",Zet=["?on","math","typed"],Jet=Y(Qet,Zet,t=>{var{on:e,math:r,typed:n}=t;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Uhe(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Ft(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function s(u,c){B9e(i.prototype,u,function(){var h=c();if(typeof h=="function")return o(h)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(u)){var h=n.resolve(u,c);if(h.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(h.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")a(u,c);else{var f=function(p){Je(u,p)&&l[p]===void 0&&s(p,()=>u[p])};for(var h in u)f(h)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(r),e&&e("import",function(u,c,f){f||s(u,c)}),i},{isClass:!0}),JY={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},ett={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},ttt={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},rtt={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},ntt={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},itt={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},att={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},stt={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},ott={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},ltt={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},utt={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},eQ={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},ctt={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},ftt={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},htt={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},dtt={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},ptt={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},mtt={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},gtt={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},vtt={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},ytt={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},btt={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},wtt={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},xtt={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},Att={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},_tt={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},Ett={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},Stt={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Ctt={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},Ttt={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Dtt={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},Ntt={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},Ptt={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},Mtt={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},Itt={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},Ott={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},ktt={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},Rtt={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Ftt={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Ltt={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Btt={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},$tt={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},jtt={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},Vtt={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Utt={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},ztt={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},qtt={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},Htt={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},Wtt={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Gtt={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},Ktt={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},Xtt={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},Ytt={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},Qtt={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},Ztt={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Jtt={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},ert={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},trt={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},rrt={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},nrt={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},irt={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},art={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},srt={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},ort={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},lrt={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},urt={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},crt={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},frt={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},hrt={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},drt={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},prt={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},mrt={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},grt={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},vrt={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},yrt={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},brt={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},wrt={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},xrt={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},Art={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},_rt={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},Ert={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},Srt={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},Crt={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},Trt={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},Drt={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},Nrt={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Prt={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},Mrt={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Irt={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},Ort={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},krt={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Rrt={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Frt={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Lrt={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Brt={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},$rt={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},jrt={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Vrt={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Urt={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},zrt={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},qrt={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},Hrt={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Wrt={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Grt={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Krt={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Xrt={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},Yrt={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},Qrt={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},Zrt={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},Jrt={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},ent={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},tnt={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},rnt={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},nnt={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},int={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},ant={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},snt={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},ont={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},lnt={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},unt={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},cnt={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},fnt={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},hnt={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},dnt={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pnt={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},mnt={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},gnt={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},vnt={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},ynt={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},bnt={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},wnt={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},xnt={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Ant={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},_nt={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Ent={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Snt={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Cnt={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},Tnt={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},Dnt={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Nnt={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},Pnt={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Mnt={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Int={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},Ont={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},knt={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Rnt={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Fnt={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Lnt={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Bnt={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},$nt={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},jnt={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Vnt={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Unt={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},znt={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},qnt={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Hnt={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Wnt={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Gnt={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},Knt={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Xnt={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Ynt={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Qnt={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Znt={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Jnt={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},eit={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},tit={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},rit={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},nit={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},iit={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},ait={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},sit={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},oit={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},lit={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},uit={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},cit={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},fit={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},hit={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},dit={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},pit={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},mit={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},git={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},vit={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},yit={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},bit={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},wit={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},xit={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Ait={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},_it={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},Eit={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},Sit={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Cit={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Tit={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Dit={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},Nit={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},Pit={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},Mit={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},Iit={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},Oit={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},kit={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},Rit={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},Fit={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},Lit={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},Bit={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},$it={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},jit={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},Vit={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Uit={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},zit={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},qit={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},Hit={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},Wit={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},Git={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},Kit={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Xit={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},Yit={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Qit={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},Zit={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Jit={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},eat={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},tat={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},rat={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},nat={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},iat={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},aat={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},sat={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},oat={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},lat={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},uat={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},cat={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},fat={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},hat={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},dat={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},pat={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},mat={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},gat={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},vat={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},yat={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bat={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},wat={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},xat={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Aat={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},_at={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},Eat={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},Sat={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},Cat={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},Tat={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Dat={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Nat={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Pat={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},Mat={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Iat={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Oat={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},kat={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Rat={bignumber:mtt,bigint:gtt,boolean:vtt,complex:ytt,createUnit:btt,fraction:wtt,index:xtt,matrix:Att,number:_tt,sparse:Ett,splitUnit:Stt,string:Ctt,unit:Ttt,e:JY,E:JY,false:ett,i:ttt,Infinity:rtt,LN2:itt,LN10:ntt,LOG2E:stt,LOG10E:att,NaN:ott,null:ltt,pi:eQ,PI:eQ,phi:utt,SQRT1_2:ctt,SQRT2:ftt,tau:htt,true:dtt,version:ptt,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Mtt,lsolve:Ott,lsolveAll:ktt,lup:Rtt,lusolve:Ftt,leafCount:Itt,polynomialRoot:Ltt,resolve:jtt,simplify:Vtt,simplifyConstant:Utt,simplifyCore:ztt,symbolicEqual:Htt,rationalize:$tt,slu:qtt,usolve:Wtt,usolveAll:Gtt,qr:Btt,abs:Ktt,add:Xtt,cbrt:Ytt,ceil:Qtt,cube:Ztt,divide:Jtt,dotDivide:ert,dotMultiply:trt,dotPow:rrt,exp:nrt,expm:irt,expm1:art,fix:srt,floor:ort,gcd:lrt,hypot:urt,lcm:frt,log:hrt,log2:mrt,log1p:prt,log10:drt,mod:grt,multiply:vrt,norm:yrt,nthRoot:brt,nthRoots:wrt,pow:xrt,round:Art,sign:_rt,sqrt:Ert,sqrtm:Srt,square:Nrt,subtract:Prt,unaryMinus:Mrt,unaryPlus:Irt,xgcd:Ort,invmod:crt,bitAnd:krt,bitNot:Rrt,bitOr:Frt,bitXor:Lrt,leftShift:Brt,rightArithShift:$rt,rightLogShift:jrt,bellNumbers:Vrt,catalan:Urt,composition:zrt,stirlingS2:qrt,config:Dtt,import:Ntt,typed:Ptt,arg:Hrt,conj:Wrt,re:Krt,im:Grt,evaluate:Xrt,help:Jrt,parse:Qrt,parser:Yrt,compile:Zrt,distance:ent,intersect:tnt,and:rnt,not:nnt,nullish:int,or:ant,xor:snt,mapSlices:ont,concat:unt,count:cnt,cross:fnt,column:lnt,ctranspose:hnt,det:dnt,diag:pnt,diff:mnt,dot:gnt,getMatrixDataType:xnt,identity:Ant,filter:ynt,flatten:bnt,forEach:wnt,inv:_nt,pinv:Ent,eigs:vnt,kron:Snt,matrixFromFunction:Dnt,matrixFromRows:Nnt,matrixFromColumns:Tnt,map:Cnt,ones:Pnt,partitionSelect:Mnt,range:Int,resize:knt,reshape:Ont,rotate:Rnt,rotationMatrix:Fnt,row:Lnt,size:Bnt,sort:$nt,squeeze:jnt,subset:Vnt,trace:Unt,transpose:znt,zeros:qnt,fft:Hnt,ifft:Wnt,sylvester:Crt,schur:Trt,lyap:Drt,solveODE:kat,bernoulli:Gnt,combinations:Knt,combinationsWithRep:Xnt,factorial:Ynt,gamma:Qnt,kldivergence:Jnt,lgamma:Znt,multinomial:eit,permutations:tit,pickRandom:rit,random:nit,randomInt:iit,compare:ait,compareNatural:sit,compareText:oit,deepEqual:lit,equal:uit,equalText:cit,larger:fit,largerEq:hit,smaller:dit,smallerEq:pit,unequal:mit,setCartesian:git,setDifference:vit,setDistinct:yit,setIntersect:bit,setIsSubset:wit,setMultiplicity:xit,setPowerset:Ait,setSize:_it,setSymDifference:Eit,setUnion:Sit,zpk2tf:Cit,freqz:Tit,erf:Dit,zeta:Nit,cumsum:$it,mad:Pit,max:Mit,mean:Iit,median:Oit,min:kit,mode:Rit,prod:Fit,quantileSeq:Lit,std:Bit,sum:jit,variance:Vit,corr:Uit,acos:zit,acosh:qit,acot:Hit,acoth:Wit,acsc:Git,acsch:Kit,asec:Xit,asech:Yit,asin:Qit,asinh:Zit,atan:Jit,atanh:tat,atan2:eat,cos:rat,cosh:nat,cot:iat,coth:aat,csc:sat,csch:oat,sec:lat,sech:uat,sin:cat,sinh:fat,tan:hat,tanh:dat,to:pat,toBest:mat,clone:vat,format:yat,bin:gat,oct:Mat,hex:wat,isNaN:Aat,isBounded:_at,isFinite:Eat,isInteger:xat,isNegative:Sat,isNumeric:Cat,hasNumericValue:bat,isPositive:Tat,isPrime:Dat,isZero:Nat,print:Iat,typeOf:Oat,numeric:Pat},tQ="help",Fat=["typed","mathWithTransform","Help"],Lat=Y(tQ,Fat,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(tQ,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in r)if(Je(r,s)&&a===r[s]){o=s;break}}var l=ss(Rat,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),rQ="chain",Bat=["typed","Chain"],$at=Y(rQ,Bat,t=>{var{typed:e,Chain:r}=t;return e(rQ,{"":function(){return new r},any:function(i){return new r(i)}})}),nQ="det",jat=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Vat=Y(nQ,jat,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=t;return e(nQ,{any:function(c){return wt(c)},"Array | Matrix":function(c){var f;switch(ft(c)?f=c.size():Array.isArray(c)?(c=r(c),f=c.size()):f=[],f.length){case 0:return wt(c);case 1:if(f[0]===1)return wt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ft(f)+")");case 2:{var h=f[0],d=f[1];if(h===d)return l(c.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+Ft(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(f)+")")}}});function l(u,c,f){if(c===1)return wt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var h=!1,d=new Array(c).fill(0).map((E,S)=>S),p=0;p<c;p++){var m=d[p];if(s(u[m][p])){var v=void 0;for(v=p+1;v<c;v++)if(!s(u[d[v]][p])){m=d[v],d[v]=d[p],d[p]=m,h=!h;break}if(v===c)return u[m][p]}for(var y=u[m][p],w=p===0?1:u[d[p-1]][p-1],b=p+1;b<c;b++)for(var _=d[b],x=p+1;x<c;x++)u[_][x]=a(n(i(u[_][x],y),i(u[_][p],u[m][x])),w)}var A=u[d[c-1]][c-1];return h?o(A):A}}),iQ="inv",Uat=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],zat=Y(iQ,Uat,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:l,abs:u}=t;return e(iQ,{"Array | Matrix":function(h){var d=ft(h)?h.size():xt(h);switch(d.length){case 1:if(d[0]===1)return ft(h)?r([n(1,h.valueOf()[0])]):[n(1,h[0])];throw new RangeError("Matrix must be square (size: "+Ft(d)+")");case 2:{var p=d[0],m=d[1];if(p===m)return ft(h)?r(c(h.valueOf(),p,m),h.storage()):c(h,p,m);throw new RangeError("Matrix must be square (size: "+Ft(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(d)+")")}},any:function(h){return n(1,h)}});function c(f,h,d){var p,m,v,y,w;if(h===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(h===2){var b=o(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],b),n(s(f[0][1]),b)],[n(s(f[1][0]),b),n(f[0][0],b)]]}else{var _=f.concat();for(p=0;p<h;p++)_[p]=_[p].concat();for(var x=l(h).valueOf(),A=0;A<d;A++){var E=u(_[A][A]),S=A;for(p=A+1;p<h;)u(_[p][A])>E&&(E=u(_[p][A]),S=p),p++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");p=S,p!==A&&(w=_[A],_[A]=_[p],_[p]=w,w=x[A],x[A]=x[p],x[p]=w);var C=_[A],D=x[A];for(p=0;p<h;p++){var N=_[p],P=x[p];if(p!==A){if(N[A]!==0){for(v=n(s(N[A]),C[A]),m=A;m<d;m++)N[m]=i(N[m],a(v,C[m]));for(m=0;m<d;m++)P[m]=i(P[m],a(v,D[m]))}}else{for(v=C[A],m=A;m<d;m++)N[m]=n(N[m],v);for(m=0;m<d;m++)P[m]=n(P[m],v)}}}return x}}}),aQ="pinv",qat=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Hat=Y(aQ,qat,t=>{var{typed:e,matrix:r,inv:n,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:h}=t;return e(aQ,{"Array | Matrix":function(b){var _=ft(b)?b.size():xt(b);switch(_.length){case 1:return y(b)?l(b):_[0]===1?n(b):s(l(b),o(b,b));case 2:{if(y(b))return l(b);var x=_[0],A=_[1];if(x===A)try{return n(b)}catch(E){if(!(E instanceof Error&&E.message.match(/Cannot calculate inverse, determinant is zero/)))throw E}return ft(b)?r(d(b.valueOf(),x,A),b.storage()):d(b,x,A)}default:throw new RangeError("Matrix must be two dimensional (size: "+Ft(_)+")")}},any:function(b){return a(b,0)?wt(b):u(1,b)}});function d(w,b,_){var{C:x,F:A}=m(w,b,_),E=c(n(c(l(x),x)),l(x)),S=c(l(A),n(c(A,l(A))));return c(S,E)}function p(w,b,_){for(var x=wt(w),A=0,E=0;E<b;E++){if(_<=A)return x;for(var S=E;v(x[S][A]);)if(S++,b===S&&(S=E,A++,_===A))return x;[x[S],x[E]]=[x[E],x[S]];for(var C=x[E][A],D=0;D<_;D++)x[E][D]=s(x[E][D],C);for(var N=0;N<b;N++)if(N!==E){C=x[N][A];for(var P=0;P<_;P++)x[N][P]=f(x[N][P],c(-1,c(C,x[E][P])))}A++}return x}function m(w,b,_){var x=p(w,b,_),A=w.map((S,C)=>S.filter((D,N)=>N<b&&!v(o(x[N],x[N])))),E=x.filter((S,C)=>!v(o(x[C],x[C])));return{C:A,F:E}}function v(w){return a(f(w,h(1,1)),f(0,h(1,1)))}function y(w){return i(f(w,h(1,1)),f(c(w,0),h(1,1)))}});function Wat(t){var{addScalar:e,subtract:r,flatten:n,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:l,bignumber:u,diag:c,size:f,reshape:h,inv:d,qr:p,usolve:m,usolveAll:v,equal:y,complex:w,larger:b,smaller:_,matrixFromColumns:x,dot:A}=t;function E(re,L,ie,X){var pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,de=S(re,L,ie,X,pe);C(re,L,ie,X,pe,de);var{values:ae,C:z}=D(re,L,ie,X,pe);if(pe){var ne=N(re,L,z,de,ae,ie,X);return{values:ae,eigenvectors:ne}}return{values:ae}}function S(re,L,ie,X,pe){var de=X==="BigNumber",ae=X==="Complex",z=de?u(0):0,ne=de?u(1):ae?w(1):1,fe=de?u(1):1,Q=de?u(10):2,ye=a(Q,Q),me;pe&&(me=Array(L).fill(ne));for(var De=!1;!De;){De=!0;for(var Le=0;Le<L;Le++){for(var ze=z,Be=z,Ve=0;Ve<L;Ve++)Le!==Ve&&(ze=e(ze,l(re[Ve][Le])),Be=e(Be,l(re[Le][Ve])));if(!y(ze,0)&&!y(Be,0)){for(var Ke=fe,te=ze,ce=s(Be,Q),G=a(Be,Q);_(te,ce);)te=a(te,ye),Ke=a(Ke,Q);for(;b(te,G);)te=s(te,ye),Ke=s(Ke,Q);var Z=_(s(e(te,Be),Ke),a(e(ze,Be),.95));if(Z){De=!1;for(var oe=s(1,Ke),he=0;he<L;he++)Le!==he&&(re[Le][he]=a(re[Le][he],oe),re[he][Le]=a(re[he][Le],Ke));pe&&(me[Le]=a(me[Le],oe))}}}}return pe?c(me):null}function C(re,L,ie,X,pe,de){var ae=X==="BigNumber",z=X==="Complex",ne=ae?u(0):z?w(0):0;ae&&(ie=u(ie));for(var fe=0;fe<L-2;fe++){for(var Q=0,ye=ne,me=fe+1;me<L;me++){var De=re[me][fe];_(l(ye),l(De))&&(ye=De,Q=me)}if(!_(l(ye),ie)){if(Q!==fe+1){var Le=re[Q];re[Q]=re[fe+1],re[fe+1]=Le;for(var ze=0;ze<L;ze++){var Be=re[ze][Q];re[ze][Q]=re[ze][fe+1],re[ze][fe+1]=Be}if(pe){var Ve=de[Q];de[Q]=de[fe+1],de[fe+1]=Ve}}for(var Ke=fe+2;Ke<L;Ke++){var te=s(re[Ke][fe],ye);if(te!==0){for(var ce=0;ce<L;ce++)re[Ke][ce]=r(re[Ke][ce],a(te,re[fe+1][ce]));for(var G=0;G<L;G++)re[G][fe+1]=e(re[G][fe+1],a(te,re[G][Ke]));if(pe)for(var Z=0;Z<L;Z++)de[Ke][Z]=r(de[Ke][Z],a(te,de[fe+1][Z]))}}}}return de}function D(re,L,ie,X,pe){var de=X==="BigNumber",ae=X==="Complex",z=de?u(1):ae?w(1):1;de&&(ie=u(ie));for(var ne=wt(re),fe=[],Q=L,ye=[],me=pe?c(Array(L).fill(z)):void 0,De=pe?c(Array(Q).fill(z)):void 0,Le=0;Le<=100;){Le+=1;for(var ze=ne[Q-1][Q-1],Be=0;Be<Q;Be++)ne[Be][Be]=r(ne[Be][Be],ze);var{Q:Ve,R:Ke}=p(ne);ne=i(Ke,Ve);for(var te=0;te<Q;te++)ne[te][te]=e(ne[te][te],ze);if(pe&&(De=i(De,Ve)),Q===1||_(l(ne[Q-1][Q-2]),ie)){Le=0,fe.push(ne[Q-1][Q-1]),pe&&(ye.unshift([[1]]),j(De,L),me=i(me,De),Q>1&&(De=c(Array(Q-1).fill(z)))),Q-=1,ne.pop();for(var ce=0;ce<Q;ce++)ne[ce].pop()}else if(Q===2||_(l(ne[Q-2][Q-3]),ie)){Le=0;var G=P(ne[Q-2][Q-2],ne[Q-2][Q-1],ne[Q-1][Q-2],ne[Q-1][Q-1]);fe.push(...G),pe&&(ye.unshift(M(ne[Q-2][Q-2],ne[Q-2][Q-1],ne[Q-1][Q-2],ne[Q-1][Q-1],G[0],G[1],ie,X)),j(De,L),me=i(me,De),Q>2&&(De=c(Array(Q-2).fill(z)))),Q-=2,ne.pop(),ne.pop();for(var Z=0;Z<Q;Z++)ne[Z].pop(),ne[Z].pop()}if(Q===0)break}if(fe.sort((ve,ge)=>+r(l(ve),l(ge))),Le>100){var oe=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+fe.join(", "));throw oe.values=fe,oe.vectors=[],oe}var he=pe?i(me,K(ye,L)):void 0;return{values:fe,C:he}}function N(re,L,ie,X,pe,de,ae){var z=d(ie),ne=i(z,re,ie),fe=ae==="BigNumber",Q=ae==="Complex",ye=fe?u(0):Q?w(0):0,me=fe?u(1):Q?w(1):1,De=[],Le=[];for(var ze of pe){var Be=k(De,ze,y);Be===-1?(De.push(ze),Le.push(1)):Le[Be]+=1}for(var Ve=[],Ke=De.length,te=Array(L).fill(ye),ce=c(Array(L).fill(me)),G=function(){var he=De[Z],ve=r(ne,i(he,ce)),ge=v(ve,te);for(ge.shift();ge.length<Le[Z];){var Pe=V(ve,L,ge,de,ae);if(Pe===null)break;ge.push(Pe)}var Se=i(d(X),ie);ge=ge.map($e=>i(Se,$e)),Ve.push(...ge.map($e=>({value:he,vector:n($e)})))},Z=0;Z<Ke;Z++)G();return Ve}function P(re,L,ie,X){var pe=e(re,X),de=r(a(re,X),a(L,ie)),ae=a(pe,.5),z=a(o(r(a(pe,pe),a(4,de))),.5);return[e(ae,z),r(ae,z)]}function M(re,L,ie,X,pe,de,ae,z){var ne=z==="BigNumber",fe=z==="Complex",Q=ne?u(0):fe?w(0):0,ye=ne?u(1):fe?w(1):1;if(_(l(ie),ae))return[[ye,Q],[Q,ye]];if(b(l(r(pe,de)),ae))return[[r(pe,X),r(de,X)],[ie,ie]];var me=r(re,pe),De=r(X,pe);return _(l(L),ae)&&_(l(De),ae)?[[me,ye],[ie,Q]]:[[L,Q],[De,ye]]}function j(re,L){for(var ie=0;ie<re.length;ie++)re[ie].push(...Array(L-re[ie].length).fill(0));for(var X=re.length;X<L;X++)re.push(Array(L).fill(0)),re[X][X]=1;return re}function K(re,L){for(var ie=[],X=0;X<L;X++)ie[X]=Array(L).fill(0);var pe=0;for(var de of re){for(var ae=de.length,z=0;z<ae;z++)for(var ne=0;ne<ae;ne++)ie[pe+z][pe+ne]=de[z][ne];pe+=ae}return ie}function k(re,L,ie){for(var X=0;X<re.length;X++)if(ie(re[X],L))return X;return-1}function V(re,L,ie,X,pe){for(var de=pe==="BigNumber"?u(1e3):1e3,ae,z=0;z<5;++z){ae=q(L,ie,pe);try{ae=m(re,ae)}catch{continue}if(b(ee(ae),de))break}if(z>=5)return null;for(z=0;;){var ne=m(re,ae);if(_(ee(H(ae,[ne])),X))break;if(++z>=10)return null;ae=le(ne)}return ae}function q(re,L,ie){var X=ie==="BigNumber",pe=ie==="Complex",de=Array(re).fill(0).map(ae=>2*Math.random()-1);return X&&(de=de.map(ae=>u(ae))),pe&&(de=de.map(ae=>w(ae))),de=H(de,L),le(de,ie)}function H(re,L){var ie=f(re);for(var X of L)X=h(X,ie),re=r(re,i(s(A(X,re),A(X,X)),X));return re}function ee(re){return l(o(A(re,re)))}function le(re,L){var ie=L==="BigNumber",X=L==="Complex",pe=ie?u(1):X?w(1):1;return i(s(pe,ee(re)),re)}return E}function Gat(t){var{config:e,addScalar:r,subtract:n,abs:i,atan:a,cos:s,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:h}=t;function d(C,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,P=arguments.length>3?arguments[3]:void 0,M=arguments.length>4?arguments[4]:void 0;if(P==="number")return p(C,N,M);if(P==="BigNumber")return m(C,N,M);throw TypeError("Unsupported data type: "+P)}function p(C,D,N){var P=C.length,M=Math.abs(D/P),j,K;if(N){K=new Array(P);for(var k=0;k<P;k++)K[k]=Array(P).fill(0),K[k][k]=1}for(var V=A(C);Math.abs(V[1])>=Math.abs(M);){var q=V[0][0],H=V[0][1];j=v(C[q][q],C[H][H],C[q][H]),C=x(C,j,q,H),N&&(K=w(K,j,q,H)),V=A(C)}for(var ee=Array(P).fill(0),le=0;le<P;le++)ee[le]=C[le][le];return S(wt(ee),K,N)}function m(C,D,N){var P=C.length,M=i(D/P),j,K;if(N){K=new Array(P);for(var k=0;k<P;k++)K[k]=Array(P).fill(0),K[k][k]=1}for(var V=E(C);i(V[1])>=i(M);){var q=V[0][0],H=V[0][1];j=y(C[q][q],C[H][H],C[q][H]),C=_(C,j,q,H),N&&(K=b(K,j,q,H)),V=E(C)}for(var ee=Array(P).fill(0),le=0;le<P;le++)ee[le]=C[le][le];return S(wt(ee),K,N)}function v(C,D,N){var P=D-C;return Math.abs(P)<=e.relTol?Math.PI/4:.5*Math.atan(2*N/(D-C))}function y(C,D,N){var P=n(D,C);return i(P)<=e.relTol?c(-1).acos().div(4):l(.5,a(f(2,N,u(P))))}function w(C,D,N,P){for(var M=C.length,j=Math.cos(D),K=Math.sin(D),k=Array(M).fill(0),V=Array(M).fill(0),q=0;q<M;q++)k[q]=j*C[q][N]-K*C[q][P],V[q]=K*C[q][N]+j*C[q][P];for(var H=0;H<M;H++)C[H][N]=k[H],C[H][P]=V[H];return C}function b(C,D,N,P){for(var M=C.length,j=s(D),K=o(D),k=Array(M).fill(c(0)),V=Array(M).fill(c(0)),q=0;q<M;q++)k[q]=n(l(j,C[q][N]),l(K,C[q][P])),V[q]=r(l(K,C[q][N]),l(j,C[q][P]));for(var H=0;H<M;H++)C[H][N]=k[H],C[H][P]=V[H];return C}function _(C,D,N,P){for(var M=C.length,j=c(s(D)),K=c(o(D)),k=l(j,j),V=l(K,K),q=Array(M).fill(c(0)),H=Array(M).fill(c(0)),ee=f(c(2),j,K,C[N][P]),le=r(n(l(k,C[N][N]),ee),l(V,C[P][P])),re=h(l(V,C[N][N]),ee,l(k,C[P][P])),L=0;L<M;L++)q[L]=n(l(j,C[N][L]),l(K,C[P][L])),H[L]=r(l(K,C[N][L]),l(j,C[P][L]));C[N][N]=le,C[P][P]=re,C[N][P]=c(0),C[P][N]=c(0);for(var ie=0;ie<M;ie++)ie!==N&&ie!==P&&(C[N][ie]=q[ie],C[ie][N]=q[ie],C[P][ie]=H[ie],C[ie][P]=H[ie]);return C}function x(C,D,N,P){for(var M=C.length,j=Math.cos(D),K=Math.sin(D),k=j*j,V=K*K,q=Array(M).fill(0),H=Array(M).fill(0),ee=k*C[N][N]-2*j*K*C[N][P]+V*C[P][P],le=V*C[N][N]+2*j*K*C[N][P]+k*C[P][P],re=0;re<M;re++)q[re]=j*C[N][re]-K*C[P][re],H[re]=K*C[N][re]+j*C[P][re];C[N][N]=ee,C[P][P]=le,C[N][P]=0,C[P][N]=0;for(var L=0;L<M;L++)L!==N&&L!==P&&(C[N][L]=q[L],C[L][N]=q[L],C[P][L]=H[L],C[L][P]=H[L]);return C}function A(C){for(var D=C.length,N=0,P=[0,1],M=0;M<D;M++)for(var j=M+1;j<D;j++)Math.abs(N)<Math.abs(C[M][j])&&(N=Math.abs(C[M][j]),P=[M,j]);return[P,N]}function E(C){for(var D=C.length,N=0,P=[0,1],M=0;M<D;M++)for(var j=M+1;j<D;j++)i(N)<i(C[M][j])&&(N=i(C[M][j]),P=[M,j]);return[P,N]}function S(C,D,N){var P=C.length,M=Array(P),j;if(N){j=Array(P);for(var K=0;K<P;K++)j[K]=Array(P)}for(var k=0;k<P;k++){for(var V=0,q=C[0],H=0;H<C.length;H++)i(C[H])<i(q)&&(V=H,q=C[V]);if(M[k]=C.splice(V,1)[0],N)for(var ee=0;ee<P;ee++)j[k][ee]=D[ee][V],D[ee].splice(V,1)}if(!N)return{values:M};var le=j.map((re,L)=>({value:M[L],vector:re}));return{values:M,eigenvectors:le}}return d}var Kat="eigs",Xat=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Yat=Y(Kat,Xat,t=>{var{config:e,typed:r,matrix:n,addScalar:i,subtract:a,equal:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:h,inv:d,bignumber:p,multiply:m,add:v,larger:y,column:w,flatten:b,number:_,complex:x,sqrt:A,diag:E,size:S,reshape:C,qr:D,usolve:N,usolveAll:P,im:M,re:j,smaller:K,matrixFromColumns:k,dot:V}=t,q=Gat({config:e,addScalar:i,subtract:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:f,inv:d,bignumber:p,multiply:m,add:v}),H=Wat({addScalar:i,subtract:a,multiply:m,multiplyScalar:f,flatten:b,divideScalar:h,sqrt:A,abs:o,bignumber:p,diag:E,size:S,reshape:C,qr:D,inv:d,usolve:N,usolveAll:P,equal:s,complex:x,larger:y,smaller:K,matrixFromColumns:k,dot:V});return r("eigs",{Array:function(de){return ee(n(de))},"Array, number|BigNumber":function(de,ae){return ee(n(de),{precision:ae})},"Array, Object"(pe,de){return ee(n(pe),de)},Matrix:function(de){return ee(de,{matricize:!0})},"Matrix, number|BigNumber":function(de,ae){return ee(de,{precision:ae,matricize:!0})},"Matrix, Object":function(de,ae){var z={matricize:!0};return jn(z,ae),ee(de,z)}});function ee(pe){var de,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z="eigenvectors"in ae?ae.eigenvectors:!0,ne=(de=ae.precision)!==null&&de!==void 0?de:e.relTol,fe=le(pe,ne,z);return ae.matricize&&(fe.values=n(fe.values),z&&(fe.eigenvectors=fe.eigenvectors.map(Q=>{var{value:ye,vector:me}=Q;return{value:ye,vector:n(me)}}))),z&&Object.defineProperty(fe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),fe}function le(pe,de,ae){var z=pe.toArray(),ne=pe.size();if(ne.length!==2||ne[0]!==ne[1])throw new RangeError("Matrix must be square (size: ".concat(Ft(ne),")"));var fe=ne[0];if(L(z,fe,de)&&(ie(z,fe),re(z,fe,de))){var Q=X(pe,z,fe);return q(z,fe,de,Q,ae)}var ye=X(pe,z,fe);return H(z,fe,de,ye,ae)}function re(pe,de,ae){for(var z=0;z<de;z++)for(var ne=z;ne<de;ne++)if(y(p(o(a(pe[z][ne],pe[ne][z]))),ae))return!1;return!0}function L(pe,de,ae){for(var z=0;z<de;z++)for(var ne=0;ne<de;ne++)if(y(p(o(M(pe[z][ne]))),ae))return!1;return!0}function ie(pe,de){for(var ae=0;ae<de;ae++)for(var z=0;z<de;z++)pe[ae][z]=j(pe[ae][z])}function X(pe,de,ae){var z=pe.datatype();if(z==="number"||z==="BigNumber"||z==="Complex")return z;for(var ne=!1,fe=!1,Q=!1,ye=0;ye<ae;ye++)for(var me=0;me<ae;me++){var De=de[ye][me];if(lt(De)||KS(De))ne=!0;else if(St(De))fe=!0;else if(Vf(De))Q=!0;else throw TypeError("Unsupported type in Matrix: "+br(De))}if(fe&&Q&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Q){for(var Le=0;Le<ae;Le++)for(var ze=0;ze<ae;ze++)de[Le][ze]=x(de[Le][ze]);return"Complex"}if(fe){for(var Be=0;Be<ae;Be++)for(var Ve=0;Ve<ae;Ve++)de[Be][Ve]=p(de[Be][Ve]);return"BigNumber"}if(ne){for(var Ke=0;Ke<ae;Ke++)for(var te=0;te<ae;te++)de[Ke][te]=_(de[Ke][te]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),sQ="expm",Qat=["typed","abs","add","identity","inv","multiply"],Zat=Y(sQ,Qat,t=>{var{typed:e,abs:r,add:n,identity:i,inv:a,multiply:s}=t;return e(sQ,{Matrix:function(f){var h=f.size();if(h.length!==2||h[0]!==h[1])throw new RangeError("Matrix must be square (size: "+Ft(h)+")");for(var d=h[0],p=1e-15,m=o(f),v=l(m,p),y=v.q,w=v.j,b=s(f,Math.pow(2,-w)),_=i(d),x=i(d),A=1,E=b,S=-1,C=1;C<=y;C++)C>1&&(E=s(E,b),S=-S),A=A*(y-C+1)/((2*y-C+1)*C),_=n(_,s(A,E)),x=n(x,s(A*S,E));for(var D=s(a(x),_),N=0;N<w;N++)D=s(D,D);return Om(f)?f.createSparseMatrix(D):D}});function o(c){for(var f=c.size()[0],h=0,d=0;d<f;d++){for(var p=0,m=0;m<f;m++)p+=r(c.get([d,m]));h=Math.max(p,h)}return h}function l(c,f){for(var h=30,d=0;d<h;d++)for(var p=0;p<=d;p++){var m=d-p;if(u(c,p,m)<f)return{q:p,j:m}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,h){for(var d=1,p=2;p<=f;p++)d*=p;for(var m=d,v=f+1;v<=2*f;v++)m*=v;var y=m*(2*f+1);return 8*Math.pow(c/Math.pow(2,h),2*f)*d*d/(m*y)}}),oQ="sqrtm",Jat=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],est=Y(oQ,Jat,t=>{var{typed:e,abs:r,add:n,multiply:i,map:a,sqrt:s,subtract:o,inv:l,size:u,max:c,identity:f}=t,h=1e3,d=1e-6;function p(m){var v,y=0,w=m,b=f(u(m));do{var _=w;if(w=i(.5,n(_,l(b))),b=i(.5,n(b,l(_))),v=c(r(o(w,_))),v>d&&++y>h)throw new Error("computing square root of matrix: iterative method could not converge")}while(v>d);return w}return e(oQ,{"Array | Matrix":function(v){var y=ft(v)?v.size():xt(v);switch(y.length){case 1:if(y[0]===1)return a(v,s);throw new RangeError("Matrix must be square (size: "+Ft(y)+")");case 2:{var w=y[0],b=y[1];if(w===b)return p(v);throw new RangeError("Matrix must be square (size: "+Ft(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Ft(y)+")")}}})}),lQ="sylvester",tst=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],rst=Y(lQ,tst,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:i,multiply:a,range:s,concat:o,transpose:l,index:u,subset:c,add:f,subtract:h,identity:d,lusolve:p,abs:m,config:v}=t;return e(lQ,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(b,_,x){return y(i(b),_,x)},"Array, Array, Matrix":function(b,_,x){return y(i(b),i(_),x)},"Array, Matrix, Array":function(b,_,x){return y(i(b),_,i(x))},"Matrix, Array, Matrix":function(b,_,x){return y(b,i(_),x)},"Matrix, Array, Array":function(b,_,x){return y(b,i(_),i(x))},"Matrix, Matrix, Array":function(b,_,x){return y(b,_,i(x))},"Array, Array, Array":function(b,_,x){return y(i(b),i(_),i(x)).toArray()}});function y(w,b,_){for(var x=b.size()[0],A=w.size()[0],E=r(w),S=E.T,C=E.U,D=r(a(-1,b)),N=D.T,P=D.U,M=a(a(l(C),_),P),j=s(0,A),K=[],k=(ye,me)=>o(ye,me,1),V=(ye,me)=>o(ye,me,0),q=0;q<x;q++)if(q<x-1&&m(c(N,u(q+1,q)))>1e-5){for(var H=V(c(M,u(j,[q])),c(M,u(j,[q+1]))),ee=0;ee<q;ee++)H=f(H,V(a(K[ee],c(N,u(ee,q))),a(K[ee],c(N,u(ee,q+1)))));var le=a(d(A),a(-1,c(N,u(q,q)))),re=a(d(A),a(-1,c(N,u(q+1,q)))),L=a(d(A),a(-1,c(N,u(q,q+1)))),ie=a(d(A),a(-1,c(N,u(q+1,q+1)))),X=V(k(f(S,le),re),k(L,f(S,ie))),pe=p(X,H);K[q]=pe.subset(u(s(0,A),[0])),K[q+1]=pe.subset(u(s(A,2*A),[0])),q++}else{for(var de=c(M,u(j,[q])),ae=0;ae<q;ae++)de=f(de,a(K[ae],c(N,u(ae,q))));var z=c(N,u(q,q)),ne=h(S,a(z,d(A)));K[q]=p(ne,de)}var fe=i(n(...K)),Q=a(C,a(fe,l(P)));return Q}}),uQ="schur",nst=["typed","matrix","identity","multiply","qr","norm","subtract"],ist=Y(uQ,nst,t=>{var{typed:e,matrix:r,identity:n,multiply:i,qr:a,norm:s,subtract:o}=t;return e(uQ,{Array:function(c){var f=l(r(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,h=n(c),d=0,p;do{p=f;var m=a(f),v=m.Q,y=m.R;if(f=i(y,v),h=i(h,v),d++>100)break}while(s(o(f,p))>1e-4);return{U:h,T:f}}}),cQ="lyap",ast=["typed","matrix","sylvester","multiply","transpose"],sst=Y(cQ,ast,t=>{var{typed:e,matrix:r,sylvester:n,multiply:i,transpose:a}=t;return e(cQ,{"Matrix, Matrix":function(o,l){return n(o,a(o),i(-1,l))},"Array, Matrix":function(o,l){return n(r(o),a(r(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,a(r(o)),r(i(-1,l)))},"Array, Array":function(o,l){return n(r(o),a(r(o)),r(i(-1,l))).toArray()}})}),ost="divide",lst=["typed","matrix","multiply","equalScalar","divideScalar","inv"],ust=Y(ost,lst,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:a,inv:s}=t,o=ya({typed:e,equalScalar:i}),l=Nl({typed:e});return e("divide",zhe({"Array | Matrix, Array | Matrix":function(c,f){return n(c,s(f))},"DenseMatrix, any":function(c,f){return l(c,f,a,!1)},"SparseMatrix, any":function(c,f){return o(c,f,a,!1)},"Array, any":function(c,f){return l(r(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,s(f))}},a.signatures))}),fQ="distance",cst=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],fst=Y(fQ,cst,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:l}=t;return e(fQ,{"Array, Array, Array":function(x,A,E){if(x.length===2&&A.length===2&&E.length===2){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(A,E))throw new TypeError("LinePoint1 should not be same with LinePoint2");var S=n(E[1],A[1]),C=n(A[0],E[0]),D=n(i(E[0],A[1]),i(A[0],E[1]));return v(x[0],x[1],S,C,D)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,A,E){if(Object.keys(x).length===2&&Object.keys(A).length===2&&Object.keys(E).length===2){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(p(A),p(E)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in A&&"lineOnePtY"in A&&"lineTwoPtX"in E&&"lineTwoPtY"in E){var S=n(E.lineTwoPtY,A.lineOnePtY),C=n(A.lineOnePtX,E.lineTwoPtX),D=n(i(E.lineTwoPtX,A.lineOnePtY),i(A.lineOnePtX,E.lineTwoPtY));return v(x.pointX,x.pointY,S,C,D)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,A){if(x.length===2&&A.length===3){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return v(x[0],x[1],A[0],A[1],A[2])}else if(x.length===3&&A.length===6){if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!d(A))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(x[0],x[1],x[2],A[0],A[1],A[2],A[3],A[4],A[5])}else if(x.length===A.length&&x.length>0){if(!h(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(A))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(x,A)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,A){if(Object.keys(x).length===2&&Object.keys(A).length===3){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(A))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in A&&"yCoeffLine"in A&&"constant"in A)return v(x.pointX,x.pointY,A.xCoeffLine,A.yCoeffLine,A.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(A).length===6){if(!f(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!d(A))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in A&&"y0"in A&&"z0"in A&&"a"in A&&"b"in A&&"c"in A)return y(x.pointX,x.pointY,x.pointZ,A.x0,A.y0,A.z0,A.a,A.b,A.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(A).length===2){if(!c(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in A&&"pointTwoY"in A)return w([x.pointOneX,x.pointOneY],[A.pointTwoX,A.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(A).length===3){if(!f(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(A))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in A&&"pointTwoY"in A&&"pointTwoZ"in A)return w([x.pointOneX,x.pointOneY,x.pointOneZ],[A.pointTwoX,A.pointTwoY,A.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!m(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(x)}});function u(_){return typeof _=="number"||St(_)}function c(_){return _.constructor!==Array&&(_=p(_)),u(_[0])&&u(_[1])}function f(_){return _.constructor!==Array&&(_=p(_)),u(_[0])&&u(_[1])&&u(_[2])}function h(_){return Array.isArray(_)||(_=p(_)),_.every(u)}function d(_){return _.constructor!==Array&&(_=p(_)),u(_[0])&&u(_[1])&&u(_[2])&&u(_[3])&&u(_[4])&&u(_[5])}function p(_){for(var x=Object.keys(_),A=[],E=0;E<x.length;E++)A.push(_[x[E]]);return A}function m(_){if(_[0].length===2&&u(_[0][0])&&u(_[0][1])){if(_.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(_[0].length===3&&u(_[0][0])&&u(_[0][1])&&u(_[0][2])){if(_.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function v(_,x,A,E,S){var C=l(r(r(i(A,_),i(E,x)),S)),D=o(r(i(A,A),i(E,E)));return a(C,D)}function y(_,x,A,E,S,C,D,N,P){var M=[n(i(n(S,x),P),i(n(C,A),N)),n(i(n(C,A),D),i(n(E,_),P)),n(i(n(E,_),N),i(n(S,x),D))];M=o(r(r(i(M[0],M[0]),i(M[1],M[1])),i(M[2],M[2])));var j=o(r(r(i(D,D),i(N,N)),i(P,P)));return a(M,j)}function w(_,x){for(var A=_.length,E=0,S=0,C=0;C<A;C++)S=n(_[C],x[C]),E=r(i(S,S),E);return o(E)}function b(_){for(var x=[],A=[],E=[],S=0;S<_.length-1;S++)for(var C=S+1;C<_.length;C++)_[0].length===2?(A=[_[S][0],_[S][1]],E=[_[C][0],_[C][1]]):_[0].length===3&&(A=[_[S][0],_[S][1],_[S][2]],E=[_[C][0],_[C][1],_[C][2]]),x.push(w(A,E));return x}}),hst="intersect",dst=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],pst=Y(hst,dst,t=>{var{typed:e,config:r,abs:n,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:h,flatten:d,isZero:p,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":y,"Matrix, Matrix, Matrix":function(N,P,M){var j=v(N.valueOf(),P.valueOf(),M.valueOf());return j===null?null:s(j)},"Matrix, Matrix, Matrix, Matrix":function(N,P,M,j){var K=y(N.valueOf(),P.valueOf(),M.valueOf(),j.valueOf());return K===null?null:s(K)}});function v(D,N,P){if(D=w(D),N=w(N),P=w(P),!_(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!_(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(P))throw new TypeError("Array with 4 numbers expected as third argument");return C(D[0],D[1],D[2],N[0],N[1],N[2],P[0],P[1],P[2],P[3])}function y(D,N,P,M){if(D=w(D),N=w(N),P=w(P),M=w(M),D.length===2){if(!b(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(P))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return A(D,N,P,M)}else if(D.length===3){if(!_(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!_(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!_(P))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!_(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return S(D[0],D[1],D[2],N[0],N[1],N[2],P[0],P[1],P[2],M[0],M[1],M[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(N=>Array.isArray(N)&&N.length===1)?d(D):D}function b(D){return D.length===2&&m(D[0])&&m(D[1])}function _(D){return D.length===3&&m(D[0])&&m(D[1])&&m(D[2])}function x(D){return D.length===4&&m(D[0])&&m(D[1])&&m(D[2])&&m(D[3])}function A(D,N,P,M){var j=D,K=P,k=c(j,N),V=c(K,M),q=c(l(k[0],V[1]),l(V[0],k[1]));if(p(q)||f(n(q),r.relTol))return null;var H=l(V[0],j[1]),ee=l(V[1],j[0]),le=l(V[0],K[1]),re=l(V[1],K[0]),L=u(a(c(c(H,ee),le),re),q);return i(o(k,L),j)}function E(D,N,P,M,j,K,k,V,q,H,ee,le){var re=l(c(D,N),c(P,M)),L=l(c(j,K),c(k,V)),ie=l(c(q,H),c(ee,le));return a(a(re,L),ie)}function S(D,N,P,M,j,K,k,V,q,H,ee,le){var re=E(D,k,H,k,N,V,ee,V,P,q,le,q),L=E(H,k,M,D,ee,V,j,N,le,q,K,P),ie=E(D,k,M,D,N,V,j,N,P,q,K,P),X=E(H,k,H,k,ee,V,ee,V,le,q,le,q),pe=E(M,D,M,D,j,N,j,N,K,P,K,P),de=c(l(re,L),l(ie,X)),ae=c(l(pe,X),l(L,L));if(p(ae))return null;var z=u(de,ae),ne=u(a(re,l(z,L)),X),fe=a(D,l(z,c(M,D))),Q=a(N,l(z,c(j,N))),ye=a(P,l(z,c(K,P))),me=a(k,l(ne,c(H,k))),De=a(V,l(ne,c(ee,V))),Le=a(q,l(ne,c(le,q)));return h(fe,me)&&h(Q,De)&&h(ye,Le)?[fe,Q,ye]:null}function C(D,N,P,M,j,K,k,V,q,H){var ee=l(D,k),le=l(M,k),re=l(N,V),L=l(j,V),ie=l(P,q),X=l(K,q),pe=c(c(c(H,ee),re),ie),de=c(c(c(a(a(le,L),X),ee),re),ie),ae=u(pe,de),z=a(D,l(ae,c(M,D))),ne=a(N,l(ae,c(j,N))),fe=a(P,l(ae,c(K,P)));return[z,ne,fe]}}),hQ="sum",mst=["typed","config","add","numeric"],Rpe=Y(hQ,mst,t=>{var{typed:e,config:r,add:n,numeric:i}=t;return e(hQ,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(l){if(Kw(l))throw new TypeError("Scalar values expected in function sum");return a(l)}});function a(o){var l;return Pp(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw ds(c,"sum",u)}}),l===void 0&&(l=i(0,r.number)),typeof l=="string"&&(l=i(l,Hp(l,r))),l}function s(o,l){try{var u=pO(o,l,n);return u}catch(c){throw ds(c,"sum")}}}),UT="cumsum",gst=["typed","add","unaryPlus"],Fpe=Y(UT,gst,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(UT,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(u,c){return u.create(s(u.valueOf(),c),u.datatype())},"...":function(u){if(Kw(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return a(l)}catch(u){throw ds(u,UT)}}function a(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(r(u[c-1],l[c]));return u}function s(l,u){var c=xt(l);if(u<0||u>=c.length)throw new yu(u,c.length);try{return o(l,u)}catch(f){throw ds(f,UT)}}function o(l,u){var c,f,h;if(u<=0){var d=l[0][0];if(Array.isArray(d)){for(h=vde(l),f=[],c=0;c<h.length;c++)f[c]=o(h[c],u-1);return f}else return a(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=o(l[c],u-1);return f}}}),dQ="mean",vst=["typed","add","divide"],Lpe=Y(dQ,vst,t=>{var{typed:e,add:r,divide:n}=t;return e(dQ,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Kw(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var l=pO(s,o,r),u=Array.isArray(s)?xt(s):s.size();return n(l,u[o])}catch(c){throw ds(c,"mean")}}function a(s){var o,l=0;if(Pp(s,function(u){try{o=o===void 0?u:r(o,u),l++}catch(c){throw ds(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),pQ="median",yst=["typed","add","divide","compare","partitionSelect"],bst=Y(pQ,yst,t=>{var{typed:e,add:r,divide:n,compare:i,partitionSelect:a}=t;function s(u){try{u=er(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,h=a(u,f+1),d=u[f],p=0;p<f;++p)i(u[p],d)>0&&(d=u[p]);return l(d,h)}else{var m=a(u,(c-1)/2);return o(m)}}catch(v){throw ds(v,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(r(c,f),2)}});return e(pQ,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Kw(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),mQ="mad",wst=["typed","abs","map","median","subtract"],xst=Y(mQ,wst,t=>{var{typed:e,abs:r,map:n,median:i,subtract:a}=t;return e(mQ,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(o){if(o=er(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return r(a(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):ds(u,"mad")}}}),OR="unbiased",gQ="variance",Ast=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Bpe=Y(gQ,Ast,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=t;return e(gQ,{"Array | Matrix":function(f){return l(f,OR)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,h){return u(f,h,OR)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,OR)}});function l(c,f){var h,d=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Pp(c,function(v){try{h=h===void 0?v:r(h,v),d++}catch(y){throw ds(y,"variance",v)}}),d===0)throw new Error("Cannot calculate variance of an empty array");var p=a(h,d);if(h=void 0,Pp(c,function(v){var y=n(v,p);h=h===void 0?i(y,y):r(h,i(y,y))}),o(h))return h;switch(f){case"uncorrected":return a(h,d);case"biased":return a(h,d+1);case"unbiased":{var m=St(h)?h.mul(0):0;return d===1?m:a(h,d-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,h){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,d=>l(d,h))}catch(d){throw ds(d,"variance")}}}),vQ="quantileSeq",_st=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],$pe=Y(vQ,_st,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d}=t;return e(vQ,{"Array | Matrix, number | BigNumber":(w,b)=>m(w,b,!1),"Array | Matrix, number | BigNumber, number":(w,b,_)=>p(w,b,!1,_,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(w,b,_,x)=>p(w,b,_,x,m),"Array | Matrix, Array | Matrix":(w,b)=>v(w,b,!1),"Array | Matrix, Array | Matrix, number":(w,b,_)=>p(w,b,!1,_,v),"Array | Matrix, Array | Matrix, boolean":v,"Array | Matrix, Array | Matrix, boolean, number":(w,b,_,x)=>p(w,b,_,x,v)});function p(w,b,_,x,A){return d(w,x,E=>A(E,b,_))}function m(w,b,_){var x,A=w.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(f(b,1))return lt(b)?y(A,b,_):r(y(A,b,_));if(h(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(h(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var E=n(b,1);x=[];for(var S=0;c(S,b);S++){var C=a(S+1,E);x.push(y(A,C,_))}return lt(b)?x:r(x)}}function v(w,b,_){for(var x=w.valueOf(),A=b.valueOf(),E=[],S=0;S<A.length;++S)E.push(y(x,A[S],_));return E}function y(w,b,_){var x=er(w),A=x.length;if(A===0)throw new Error("Cannot calculate quantile of an empty sequence");var E=lt(b)?b*(A-1):b.times(A-1),S=lt(b)?Math.floor(E):E.floor().toNumber(),C=lt(b)?E%1:E.minus(S);if(u(E))return _?x[E]:o(x,lt(b)?E:E.valueOf());var D,N;if(_)D=x[S],N=x[S+1];else{N=o(x,S+1),D=x[S];for(var P=0;P<S;++P)l(x[P],D)>0&&(D=x[P])}return n(s(D,i(1,C)),s(N,C))}}),yQ="std",Est=["typed","map","sqrt","variance"],jpe=Y(yQ,Est,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t;return e(yQ,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Do(l)?r(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),bQ="corr",Sst=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Cst=Y(bQ,Sst,t=>{var{typed:e,matrix:r,sqrt:n,sum:i,add:a,subtract:s,multiply:o,pow:l,divide:u}=t;return e(bQ,{"Array, Array":function(d,p){return c(d,p)},"Matrix, Matrix":function(d,p){var m=c(d.toArray(),p.toArray());return Array.isArray(m)?r(m):m}});function c(h,d){var p=[];if(Array.isArray(h[0])&&Array.isArray(d[0])){if(h.length!==d.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var m=0;m<h.length;m++){if(h[m].length!==d[m].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(h[m],d[m]))}return p}else{if(h.length!==d.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(h,d)}}function f(h,d){var p=h.length,m=i(h),v=i(d),y=h.reduce((A,E,S)=>a(A,o(E,d[S])),0),w=i(h.map(A=>l(A,2))),b=i(d.map(A=>l(A,2))),_=s(o(p,y),o(m,v)),x=n(o(s(o(p,w),l(m,2)),s(o(p,b),l(v,2))));return u(_,x)}}),wQ="bernoulli",Tst=["typed","config","isInteger","number","?BigNumber","?Fraction"],Dst=Y(wQ,Tst,t=>{var{typed:e,config:r,number:n,BigNumber:i,Fraction:a}=t,s=[void 0],o=[void 0],l=[void 0],u=50;return e(wQ,{number:c=>kR(c,f=>f,s,(f,h)=>f+h,(f,h)=>f*h,(f,h)=>f/h),"bigint | Fraction":c=>kR(n(c),f=>new a(f),o,(f,h)=>f.add(h),(f,h)=>f.mul(h),(f,h)=>f.div(h)),BigNumber:c=>(r.precision!==u&&(l=[void 0],u=r.precision),kR(n(c),f=>new i(f),l,(f,h)=>f.add(h),(f,h)=>f.mul(h),(f,h)=>f.div(h)))})});function kR(t,e,r,n,i,a){if(t<0||!nt(t))throw new RangeError("Bernoulli index must be nonnegative integer");if(t===0)return e(1);if(t===1)return a(e(-1),e(2));if(t%2===1)return e(0);var s=e(1);r.length===1&&r.push([a(s,e(-3)),a(s,e(-2)),a(s,e(6))]);for(var o=t/2,l=e(0),u=e(2);r.length<=o;){for(var c=r.length,f=Math.floor((c+1)/2),h=l,d=1;d<f;++d)h=n(h,i(r[d][0],r[c-d][0]));h=i(h,u),c%2===0&&(h=n(h,i(r[f][0],r[f][0]))),h=a(h,e(-(2*c+1)));var p=a(i(r[c-1][1],e(-c*(2*c-1))),u);r.push([h,p,i(p,h)])}return r[o][2]}var xQ="combinations",Nst=["typed"],Pst=Y(xQ,Nst,t=>{var{typed:e}=t;return e(xQ,{"number, number":Bde,"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=n.minus(i),u=new a(1);if(!AQ(n)||!AQ(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function AQ(t){return t.isInteger()&&t.gte(0)}var _Q="combinationsWithRep",Mst=["typed"],Ist=Y(_Q,Mst,t=>{var{typed:e}=t;return e(_Q,{"number, number":function(n,i){if(!nt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!nt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=kf(n,n+i-1);return a/kf(1,i)}var s=kf(i+1,n+i-1);return s/kf(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,l=new a(1),u=n.minus(l);if(!EQ(n)||!EQ(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function EQ(t){return t.isInteger()&&t.gte(0)}var SQ="gamma",Ost=["typed","config","multiplyScalar","pow","BigNumber","Complex"],kst=Y(SQ,Ost,t=>{var{typed:e,config:r,multiplyScalar:n,pow:i,BigNumber:a,Complex:s}=t;function o(u){if(u.im===0)return wP(u.re);if(u.re<.5){var c=new s(1-u.re,-u.im),f=new s(Math.PI*u.re,Math.PI*u.im);return new s(Math.PI).div(f.sin()).div(o(c))}u=new s(u.re-1,u.im);for(var h=new s(v0[0],0),d=1;d<v0.length;++d){var p=new s(v0[d],0);h=h.add(p.div(u.add(d)))}var m=new s(u.re+jde+.5,u.im),v=Math.sqrt(2*Math.PI),y=m.pow(u.add(.5)),w=m.neg().exp();return h.mul(v).mul(y).mul(w)}return e(SQ,{number:wP,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):l(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var c=r.precision+(Math.log(u.toNumber())|0),f=a.clone({precision:c});if(u%2===1)return u.times(l(new a(u-1)));for(var h=u,d=new f(u),p=u.toNumber();h>2;)h-=2,p+=h,d=d.times(p);return new a(d.toPrecision(a.precision))}}),CQ="lgamma",Rst=["Complex","typed"],Fst=Y(CQ,Rst,t=>{var{Complex:e,typed:r}=t,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(CQ,{number:xP,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(u){var c=6.283185307179586,f=1.1447298858494002,h=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(xP(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=h){var d=a7e(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),m=s(new e(1-u.re,-u.im));return new e(f,d).sub(p).sub(m)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(Vde),f=new e(1,0).div(u),h=f.div(u),d=a[0],p=a[1],m=2*h.re,v=h.re*h.re+h.im*h.im,y=2;y<8;y++){var w=p;p=-v*d+a[y],d=m*d+w}var b=f.mul(h.mul(d).add(p));return c.add(b)}function l(u){var c=0,f=0,h=u;for(u=u.add(1);u.re<=n;){h=h.mul(u);var d=h.im<0?1:0;d!==0&&f===0&&c++,f=d,u=u.add(1)}return o(u).sub(h.log()).sub(new e(0,c*2*Math.PI*1))}}),TQ="factorial",Lst=["typed","gamma"],Bst=Y(TQ,Lst,t=>{var{typed:e,gamma:r}=t;return e(TQ,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return r(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return r(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>Ct(i,n))})}),DQ="kldivergence",$st=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],jst=Y(DQ,$st,t=>{var{typed:e,matrix:r,divide:n,sum:i,multiply:a,map:s,dotDivide:o,log:l,isNumeric:u}=t;return e(DQ,{"Array, Array":function(h,d){return c(r(h),r(d))},"Matrix, Array":function(h,d){return c(h,r(d))},"Array, Matrix":function(h,d){return c(r(h),d)},"Matrix, Matrix":function(h,d){return c(h,d)}});function c(f,h){var d=h.size().length,p=f.size().length;if(d>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(d!==p)throw new Error("Length of two vectors must be equal");var m=i(f);if(m===0)throw new Error("Sum of elements in first object must be non zero");var v=i(h);if(v===0)throw new Error("Sum of elements in second object must be non zero");var y=n(f,i(f)),w=n(h,i(h)),b=i(a(y,s(o(y,w),_=>l(_))));return u(b)?b:Number.NaN}}),NQ="multinomial",Vst=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Ust=Y(NQ,Vst,t=>{var{typed:e,add:r,divide:n,multiply:i,factorial:a,isInteger:s,isPositive:o}=t;return e(NQ,{"Array | Matrix":function(u){var c=0,f=1;return Pp(u,function(h){if(!s(h)||!o(h))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,h),f=i(f,a(h))}),n(a(c),f)}})}),PQ="permutations",zst=["typed","factorial"],qst=Y(PQ,zst,t=>{var{typed:e,factorial:r}=t;return e(PQ,{"number | BigNumber":r,"number, number":function(i,a){if(!nt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!nt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return kf(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!MQ(i)||!MQ(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(s=l,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function MQ(t){return t.isInteger()&&t.gte(0)}var AV={exports:{}};AV.exports;(function(t){(function(e,r,n){function i(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new i(l),f=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function o(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:this.alea=s})(Nv,t)})(AV);var Hst=AV.exports,_V={exports:{}};_V.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xor128=s})(Nv,t)})(_V);var Wst=_V.exports,EV={exports:{}};EV.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xorwow=s})(Nv,t)})(EV);var Gst=EV.exports,SV={exports:{}};SV.exports;(function(t){(function(e,r,n){function i(o){var l=this;l.next=function(){var c=l.x,f=l.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,l.i=f+1&7,d};function u(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}u(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xorshift7=s})(Nv,t)})(SV);var Kst=SV.exports,CV={exports:{}};CV.exports;(function(t){(function(e,r,n){function i(o){var l=this;l.next=function(){var c=l.w,f=l.X,h=l.i,d,p;return l.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,l.i=h,p+(c^c>>>16)|0};function u(c,f){var h,d,p,m,v,y=[],w=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,w=Math.max(w,f.length)),p=0,m=-32;m<w;++m)f&&(d^=f.charCodeAt((m+32)%f.length)),m===0&&(v=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(v=v+1640531527|0,h=y[m&127]^=d+v,p=h==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],h=y[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,y[p]=d^h;c.w=v,c.X=y,c.i=p}u(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.xor4096=s})(Nv,t)})(CV);var Xst=CV.exports,TV={exports:{}};TV.exports;(function(t){(function(e,r,n){function i(o){var l=this,u="";l.next=function(){var f=l.b,h=l.c,d=l.d,p=l.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^h,l.c=h=h-d|0,l.d=d<<16^h>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}r&&r.exports?r.exports=s:this.tychei=s})(Nv,t)})(TV);var Yst=TV.exports,Vpe={exports:{}};const Qst={},Zst=Object.freeze(Object.defineProperty({__proto__:null,default:Qst},Symbol.toStringTag,{value:"Module"})),Jst=tge(Zst);(function(t){(function(e,r,n){var i=256,a=6,s=52,o="random",l=n.pow(i,a),u=n.pow(2,s),c=u*2,f=i-1,h;function d(_,x,A){var E=[];x=x==!0?{entropy:!0}:x||{};var S=y(v(x.entropy?[_,b(r)]:_??w(),3),E),C=new p(E),D=function(){for(var N=C.g(a),P=l,M=0;N<u;)N=(N+M)*i,P*=i,M=C.g(1);for(;N>=c;)N/=2,P/=2,M>>>=1;return(N+M)/P};return D.int32=function(){return C.g(4)|0},D.quick=function(){return C.g(4)/4294967296},D.double=D,y(b(C.S),r),(x.pass||A||function(N,P,M,j){return j&&(j.S&&m(j,C),N.state=function(){return m(C,{})}),M?(n[o]=N,P):N})(D,S,"global"in x?x.global:this==n,x.state)}function p(_){var x,A=_.length,E=this,S=0,C=E.i=E.j=0,D=E.S=[];for(A||(_=[A++]);S<i;)D[S]=S++;for(S=0;S<i;S++)D[S]=D[C=f&C+_[S%A]+(x=D[S])],D[C]=x;(E.g=function(N){for(var P,M=0,j=E.i,K=E.j,k=E.S;N--;)P=k[j=f&j+1],M=M*i+k[f&(k[j]=k[K=f&K+P])+(k[K]=P)];return E.i=j,E.j=K,M})(i)}function m(_,x){return x.i=_.i,x.j=_.j,x.S=_.S.slice(),x}function v(_,x){var A=[],E=typeof _,S;if(x&&E=="object")for(S in _)try{A.push(v(_[S],x-1))}catch{}return A.length?A:E=="string"?_:_+"\0"}function y(_,x){for(var A=_+"",E,S=0;S<A.length;)x[f&S]=f&(E^=x[f&S]*19)+A.charCodeAt(S++);return b(x)}function w(){try{var _;return h&&(_=h.randomBytes)?_=_(i):(_=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(_)),b(_)}catch{var x=e.navigator,A=x&&x.plugins;return[+new Date,e,A,e.screen,b(r)]}}function b(_){return String.fromCharCode.apply(0,_)}if(y(n.random(),r),t.exports){t.exports=d;try{h=Jst}catch{}}else n["seed"+o]=d})(typeof self<"u"?self:Nv,[],Math)})(Vpe);var eot=Vpe.exports,tot=Hst,rot=Wst,not=Gst,iot=Kst,aot=Xst,sot=Yst,zv=eot;zv.alea=tot;zv.xor128=rot;zv.xorwow=not;zv.xorshift7=iot;zv.xor4096=aot;zv.tychei=sot;var oot=zv;const Upe=Sl(oot);var lot=Upe(Date.now());function ww(t){var e;function r(i){e=i===null?lot:Upe(String(i))}r(t);function n(){return e()}return n}var IQ="pickRandom",uot=["typed","config","?on"],cot=Y(IQ,uot,t=>{var{typed:e,config:r,on:n}=t,i=ww(r.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=ww(s.randomSeed))}),e(IQ,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,l){return a(o,l)},"Array | Matrix, number":function(o,l){return a(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return a(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return a(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return a(o,{number:l,weights:u})}});function a(s,o){var{number:l,weights:u,elementWise:c=!0}=o,f=typeof l>"u";f&&(l=1);var h=ft(s)?s.create:ft(u)?u.create:null;s=s.valueOf(),u&&(u=u.valueOf()),c===!0&&(s=er(s),u=er(u));var d=0;if(typeof u<"u"){if(u.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var p=0,m=u.length;p<m;p++){if(!lt(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");d+=u[p]}}for(var v=s.length,y=[],w;y.length<l;){if(typeof u>"u")w=s[Math.floor(i()*v)];else for(var b=i()*d,_=0,x=s.length;_<x;_++)if(b-=u[_],b<0){w=s[_];break}y.push(w)}return f?y[0]:h?h(y):y}});function DV(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,i=t.shift();n<i;n++)r.push(DV(t,e));else for(var a=0,s=t.shift();a<s;a++)r.push(e());return r}var OQ="random",fot=["typed","config","?on"],hot=Y(OQ,fot,t=>{var{typed:e,config:r,on:n}=t,i=ww(r.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=ww(o.randomSeed))}),e(OQ,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,l)=>s(o,l),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,l)=>a(o,0,l),"Array | Matrix, number, number":(o,l,u)=>a(o,l,u)});function a(o,l,u){var c=DV(o.valueOf(),()=>s(l,u));return ft(o)?o.create(c,"number"):c}function s(o,l){return o+i()*(l-o)}}),kQ="randomInt",dot=["typed","config","log2","?on"],pot=Y(kQ,dot,t=>{var{typed:e,config:r,log2:n,on:i}=t,a=ww(r.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(a=ww(u.randomSeed))}),e(kQ,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,c)=>o(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>s(u,0,1),"Array | Matrix, number":(u,c)=>s(u,0,c),"Array | Matrix, number, number":(u,c,f)=>s(u,c,f)});function s(u,c,f){var h=DV(u.valueOf(),()=>o(c,f));return ft(u)?u.create(h,"number"):h}function o(u,c){return Math.floor(u+a()*(c-u))}function l(u,c){var f=2n**30n,h=c-u;if(h<=f)return u+BigInt(o(0,Number(h)));for(var d=n(h),p=h;p>=h;){p=0n;for(var m=0;m<d;++m)p=2n*p+(a()<.5?0n:1n)}return u+p}}),RQ="stirlingS2",mot=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],got=Y(RQ,mot,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:h,larger:d}=t,p=[],m=[];return e(RQ,{"number | BigNumber, number | BigNumber":function(y,w){if(!c(y)||u(y)||!c(w)||u(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(d(w,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(lt(y)&&lt(w)),_=b?m:p,x=b?h:f,A=f(y),E=f(w);if(_[A]&&_[A].length>E)return _[A][E];for(var S=0;S<=A;++S)if(_[S]||(_[S]=[x(S===0?1:0)]),S!==0)for(var C=_[S],D=_[S-1],N=C.length;N<=S&&N<=E;++N)N===S?C[N]=1:C[N]=r(i(x(N),D[N]),D[N-1]);return _[A][E]}})}),FQ="bellNumbers",vot=["typed","addScalar","isNegative","isInteger","stirlingS2"],yot=Y(FQ,vot,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:i,stirlingS2:a}=t;return e(FQ,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=r(l,a(o,u));return l}})}),LQ="catalan",bot=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],wot=Y(LQ,bot,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=t;return e(LQ,{"number | BigNumber":function(u){if(!o(u)||s(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(u,2),u),r(u,1))}})}),BQ="composition",xot=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],Aot=Y(BQ,xot,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:i,isNegative:a,isInteger:s,larger:o}=t;return e(BQ,{"number | BigNumber, number | BigNumber":function(u,c){if(!s(u)||!i(u)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(r(u,-1),r(c,-1))}})}),$Q="leafCount",_ot=["parse","typed"],Eot=Y($Q,_ot,t=>{var{parse:e,typed:r}=t;function n(i){var a=0;return i.forEach(s=>{a+=n(s)}),a||1}return r($Q,{Node:function(a){return n(a)}})});function jQ(t){return qt(t)||Bn(t)&&t.isUnary()&&qt(t.args[0])}function MP(t){return!!(qt(t)||(Tp(t)||Bn(t))&&t.args.every(MP)||hh(t)&&MP(t.content))}function VQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VQ(Object(r),!0).forEach(function(n){ei(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Sot="simplifyUtil",Cot=["FunctionNode","OperatorNode","SymbolNode"],NV=Y(Sot,Cot,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},l={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(b,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,A=s;if(typeof b=="string"?A=b:Bn(b)?A=b.fn.toString():Tp(b)?A=b.name:hh(b)&&(A="paren"),Je(x,A)){var E=x[A];if(Je(E,_))return E[_];if(Je(o,A))return o[A][_]}if(Je(x,s)){var S=x[s];return Je(S,_)?S[_]:o[s][_]}if(Je(o,A)){var C=o[A];if(Je(C,_))return C[_]}return o[s][_]}function f(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"commutative",_)}function h(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(b,"associative",_)}function d(b,_){var x=RR({},b);for(var A in _)Je(b,A)?x[A]=RR(RR({},_[A]),b[A]):x[A]=_[A];return x}function p(b,_){if(!b.args||b.args.length===0)return b;b.args=m(b,_);for(var x=0;x<b.args.length;x++)p(b.args[x],_)}function m(b,_){var x,A=[],E=function(C){for(var D=0;D<C.args.length;D++){var N=C.args[D];Bn(N)&&x===N.op?E(N):A.push(N)}};return h(b,_)?(x=b.op,E(b),A):b.args}function v(b,_){if(!(!b.args||b.args.length===0)){for(var x=w(b),A=b.args.length,E=0;E<A;E++)v(b.args[E],_);if(A>2&&h(b,_)){for(var S=b.args.pop();b.args.length>0;)S=x([b.args.pop(),S]);b.args=S.args}}}function y(b,_){if(!(!b.args||b.args.length===0)){for(var x=w(b),A=b.args.length,E=0;E<A;E++)y(b.args[E],_);if(A>2&&h(b,_)){for(var S=b.args.shift();b.args.length>0;)S=x([S,b.args.shift()]);b.args=S.args}}}function w(b){return Bn(b)?function(_){try{return new r(b.op,b.fn,_,b.implicit)}catch(x){return console.error(x),[]}}:function(_){return new e(new n(b.name),_)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:f,isAssociative:h,mergeContext:d,flatten:p,allChildren:m,unflattenr:v,unflattenl:y,defaultContext:o,realContext:l,positiveContext:u}}),Tot="simplify",Dot=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],Not=Y(Tot,Dot,t=>{var{typed:e,parse:r,equal:n,resolve:i,simplifyConstant:a,simplifyCore:s,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:h,OperatorNode:d,ParenthesisNode:p,SymbolNode:m,replacer:v}=t,{hasProperty:y,isCommutative:w,isAssociative:b,mergeContext:_,flatten:x,unflattenr:A,unflattenl:E,createMakeNodeFunction:S,defaultContext:C,realContext:D,positiveContext:N}=NV({FunctionNode:c,OperatorNode:d,SymbolNode:m});e.addConversion({from:"Object",to:"Map",convert:m0});var P=e("simplify",{Node:H,"Node, Map":(ae,z)=>H(ae,!1,z),"Node, Map, Object":(ae,z,ne)=>H(ae,!1,z,ne),"Node, Array":H,"Node, Array, Map":H,"Node, Array, Map, Object":H});e.removeConversion({from:"Object",to:"Map",convert:m0}),P.defaultContext=C,P.realContext=D,P.positiveContext=N;function M(ae){return ae.transform(function(z){return hh(z)?M(z.content):z})}var j={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};P.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function K(ae,z){var ne={};if(ae.s){var fe=ae.s.split("->");if(fe.length===2)ne.l=fe[0],ne.r=fe[1];else throw SyntaxError("Could not parse rule: "+ae.s)}else ne.l=ae.l,ne.r=ae.r;ne.l=M(r(ne.l)),ne.r=M(r(ne.r));for(var Q of["imposeContext","repeat","assuming"])Q in ae&&(ne[Q]=ae[Q]);if(ae.evaluate&&(ne.evaluate=r(ae.evaluate)),b(ne.l,z)){var ye=!w(ne.l,z),me;ye&&(me=q());var De=S(ne.l),Le=q();ne.expanded={},ne.expanded.l=De([ne.l,Le]),x(ne.expanded.l,z),A(ne.expanded.l,z),ne.expanded.r=De([ne.r,Le]),ye&&(ne.expandedNC1={},ne.expandedNC1.l=De([me,ne.l]),ne.expandedNC1.r=De([me,ne.r]),ne.expandedNC2={},ne.expandedNC2.l=De([me,ne.expanded.l]),ne.expandedNC2.r=De([me,ne.expanded.r]))}return ne}function k(ae,z){for(var ne=[],fe=0;fe<ae.length;fe++){var Q=ae[fe],ye=void 0,me=typeof Q;switch(me){case"string":Q={s:Q};case"object":ye=K(Q,z);break;case"function":ye=Q;break;default:throw TypeError("Unsupported type of rule: "+me)}ne.push(ye)}return ne}var V=0;function q(){return new m("_p"+V++)}function H(ae,z){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:JA(),fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Q=fe.consoleDebug;z=k(z||P.rules,fe.context);var ye=i(ae,ne);ye=M(ye);for(var me={},De=ye.toString({parenthesis:"all"});!me[De];){me[De]=!0,V=0;var Le=De;Q&&console.log("Working on: ",De);for(var ze=0;ze<z.length;ze++){var Be="";if(typeof z[ze]=="function"?(ye=z[ze](ye,fe),Q&&(Be=z[ze].name)):(x(ye,fe.context),ye=le(ye,z[ze],fe.context),Q&&(Be="".concat(z[ze].l.toString()," -> ").concat(z[ze].r.toString()))),Q){var Ve=ye.toString({parenthesis:"all"});Ve!==Le&&(console.log("Applying",Be,"produced",Ve),Le=Ve)}E(ye,fe.context)}De=ye.toString({parenthesis:"all"})}return ye}function ee(ae,z,ne){var fe=ae;if(ae)for(var Q=0;Q<ae.length;++Q){var ye=le(ae[Q],z,ne);ye!==ae[Q]&&(fe===ae&&(fe=ae.slice()),fe[Q]=ye)}return fe}function le(ae,z,ne){if(z.assuming){for(var fe in z.assuming)for(var Q in z.assuming[fe])if(y(fe,Q,ne)!==z.assuming[fe][Q])return ae}var ye=_(z.imposeContext,ne),me=ae;if(me instanceof d||me instanceof c){var De=ee(me.args,z,ne);De!==me.args&&(me=me.clone(),me.args=De)}else if(me instanceof p){if(me.content){var Le=le(me.content,z,ne);Le!==me.content&&(me=new p(Le))}}else if(me instanceof l){var ze=ee(me.items,z,ne);ze!==me.items&&(me=new l(ze))}else if(me instanceof o){var Be=me.object;me.object&&(Be=le(me.object,z,ne));var Ve=me.index;me.index&&(Ve=le(me.index,z,ne)),(Be!==me.object||Ve!==me.index)&&(me=new o(Be,Ve))}else if(me instanceof f){var Ke=ee(me.dimensions,z,ne);Ke!==me.dimensions&&(me=new f(Ke))}else if(me instanceof h){var te=!1,ce={};for(var G in me.properties)ce[G]=le(me.properties[G],z,ne),ce[G]!==me.properties[G]&&(te=!0);te&&(me=new h(ce))}var Z=z.r,oe=pe(z.l,me,ye)[0];if(!oe&&z.expanded&&(Z=z.expanded.r,oe=pe(z.expanded.l,me,ye)[0]),!oe&&z.expandedNC1&&(Z=z.expandedNC1.r,oe=pe(z.expandedNC1.l,me,ye)[0],oe||(Z=z.expandedNC2.r,oe=pe(z.expandedNC2.l,me,ye)[0])),oe){var he=me.implicit;me=Z.clone(),he&&"implicit"in Z&&(me.implicit=!0),me=me.transform(function(ve){return ve.isSymbolNode&&Je(oe.placeholders,ve.name)?oe.placeholders[ve.name].clone():ve})}return z.repeat&&me!==ae&&(me=le(me,z,ne)),me}function re(ae,z){var ne=[],fe,Q,ye=S(ae);if(w(ae,z))for(var me=0;me<ae.args.length;me++)Q=ae.args.slice(0),Q.splice(me,1),fe=Q.length===1?Q[0]:ye(Q),ne.push(ye([ae.args[me],fe]));else for(var De=1;De<ae.args.length;De++){var Le=ae.args[0];De>1&&(Le=ye(ae.args.slice(0,De))),Q=ae.args.slice(De),fe=Q.length===1?Q[0]:ye(Q),ne.push(ye([Le,fe]))}return ne}function L(ae,z){var ne={placeholders:{}};if(!ae.placeholders&&!z.placeholders)return ne;if(ae.placeholders){if(!z.placeholders)return ae}else return z;for(var fe in ae.placeholders)if(Je(ae.placeholders,fe)&&(ne.placeholders[fe]=ae.placeholders[fe],Je(z.placeholders,fe)&&!de(ae.placeholders[fe],z.placeholders[fe])))return null;for(var Q in z.placeholders)Je(z.placeholders,Q)&&(ne.placeholders[Q]=z.placeholders[Q]);return ne}function ie(ae,z){var ne=[];if(ae.length===0||z.length===0)return ne;for(var fe,Q=0;Q<ae.length;Q++)for(var ye=0;ye<z.length;ye++)fe=L(ae[Q],z[ye]),fe&&ne.push(fe);return ne}function X(ae){if(ae.length===0)return ae;for(var z=ae.reduce(ie),ne=[],fe={},Q=0;Q<z.length;Q++){var ye=JSON.stringify(z[Q],v);fe[ye]||(fe[ye]=!0,ne.push(z[Q]))}return ne}function pe(ae,z,ne,fe){var Q=[{placeholders:{}}];if(ae instanceof d&&z instanceof d||ae instanceof c&&z instanceof c){if(ae instanceof d){if(ae.op!==z.op||ae.fn!==z.fn)return[]}else if(ae instanceof c&&ae.name!==z.name)return[];if(z.args.length===1&&ae.args.length===1||!b(z,ne)&&z.args.length===ae.args.length||fe){for(var ye=[],me=0;me<ae.args.length;me++){var De=pe(ae.args[me],z.args[me],ne);if(De.length===0)break;ye.push(De)}if(ye.length!==ae.args.length){if(!w(z,ne)||ae.args.length===1)return[];if(ae.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Le=pe(ae.args[0],z.args[1],ne);if(Le.length===0)return[];var ze=pe(ae.args[1],z.args[0],ne);if(ze.length===0)return[];ye=[Le,ze]}Q=X(ye)}else if(z.args.length>=2&&ae.args.length===2){for(var Be=re(z,ne),Ve=[],Ke=0;Ke<Be.length;Ke++){var te=pe(ae,Be[Ke],ne,!0);Ve=Ve.concat(te)}return Ve}else{if(ae.args.length>2)throw Error("Unexpected non-binary associative function: "+ae.toString());return[]}}else if(ae instanceof m){if(ae.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(j[ae.name]){if(ae.name!==z.name)return[]}else switch(ae.name[1]>="a"&&ae.name[1]<="z"?ae.name.substring(0,2):ae.name[0]){case"n":case"_p":Q[0].placeholders[ae.name]=z;break;case"c":case"cl":if(qt(z))Q[0].placeholders[ae.name]=z;else return[];break;case"v":if(!qt(z))Q[0].placeholders[ae.name]=z;else return[];break;case"vl":if(Ui(z))Q[0].placeholders[ae.name]=z;else return[];break;case"cd":if(jQ(z))Q[0].placeholders[ae.name]=z;else return[];break;case"vd":if(!jQ(z))Q[0].placeholders[ae.name]=z;else return[];break;case"ce":if(MP(z))Q[0].placeholders[ae.name]=z;else return[];break;case"ve":if(!MP(z))Q[0].placeholders[ae.name]=z;else return[];break;default:throw new Error("Invalid symbol in rule: "+ae.name)}}else if(ae instanceof u){if(!n(ae.value,z.value))return[]}else return[];return Q}function de(ae,z){if(ae instanceof u&&z instanceof u){if(!n(ae.value,z.value))return!1}else if(ae instanceof m&&z instanceof m){if(ae.name!==z.name)return!1}else if(ae instanceof d&&z instanceof d||ae instanceof c&&z instanceof c){if(ae instanceof d){if(ae.op!==z.op||ae.fn!==z.fn)return!1}else if(ae instanceof c&&ae.name!==z.name)return!1;if(ae.args.length!==z.args.length)return!1;for(var ne=0;ne<ae.args.length;ne++)if(!de(ae.args[ne],z.args[ne]))return!1}else return!1;return!0}return P}),Pot="simplifyConstant",Mot=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Iot=Y(Pot,Mot,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:i,isBounded:a,fraction:s,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:f,IndexNode:h,ObjectNode:d,OperatorNode:p,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:w,createMakeNodeFunction:b}=NV({FunctionNode:f,OperatorNode:p,SymbolNode:m}),_=e("simplifyConstant",{Node:k=>S(K(k,{})),"Node, Object":function(V,q){return S(K(V,q))}});function x(k){return KS(k)?k.valueOf():k instanceof Array?k.map(x):ft(k)?i(x(k.valueOf())):k}function A(k,V,q){try{return n[k].apply(null,V)}catch{return V=V.map(x),D(n[k].apply(null,V),q)}}var E=e({Fraction:P,number:function(V){return V<0?N(new c(-V)):new c(V)},BigNumber:function(V){return V<0?N(new c(-V)):new c(V)},bigint:function(V){return V<0n?N(new c(-V)):new c(V)},Complex:function(V){throw new Error("Cannot convert Complex number to Node")},string:function(V){return new c(V)},Matrix:function(V){return new u(V.valueOf().map(q=>E(q)))}});function S(k){return fr(k)?k:E(k)}function C(k,V){var q=V&&V.exactFractions!==!1;if(q&&a(k)&&s){var H=s(k),ee=V&&typeof V.fractionsLimit=="number"?V.fractionsLimit:1/0;if(H.valueOf()===k&&H.n<ee&&H.d<ee)return H}return k}var D=e({"string, Object":function(V,q){var H=Hp(V,r);if(H==="BigNumber")return o===void 0&&yV(),o(V);if(H==="bigint")return BigInt(V);if(H==="Fraction")return s===void 0&&xpe(),s(V);var ee=parseFloat(V);return C(ee,q)},"Fraction, Object":function(V,q){return V},"BigNumber, Object":function(V,q){return V},"number, Object":function(V,q){return C(V,q)},"bigint, Object":function(V,q){return V},"Complex, Object":function(V,q){return V.im!==0?V:C(V.re,q)},"Matrix, Object":function(V,q){return i(C(V.valueOf()))},"Array, Object":function(V,q){return V.map(C)}});function N(k){return new p("-","unaryMinus",[k])}function P(k){var V=ee=>r.number==="BigNumber"&&o?o(ee):Number(ee),q=k.s*k.n,H=q<0n?new p("-","unaryMinus",[new c(-V(q))]):new c(V(q));return k.d===1n?H:new p("/","divide",[H,new c(V(k.d))])}function M(k,V,q){if(!Gw(V))return new l(S(k),S(V));if(il(k)||ft(k)){for(var H=Array.from(V.dimensions);H.length>0;)if(qt(H[0])&&typeof H[0].value!="string"){var ee=D(H.shift().value,q);il(k)?k=k.items[ee-1]:(k=k.valueOf()[ee-1],k instanceof Array&&(k=i(k)))}else if(H.length>1&&qt(H[1])&&typeof H[1].value!="string"){var le=D(H[1].value,q),re=[],L=il(k)?k.items:k.valueOf();for(var ie of L)if(il(ie))re.push(ie.items[le-1]);else if(ft(k))re.push(ie[le-1]);else break;if(re.length===L.length)il(k)?k=new u(re):k=i(re),H.splice(1,1);else break}else break;return H.length===V.dimensions.length?new l(S(k),V):H.length>0?(V=new h(H),new l(S(k),V)):k}if(lO(k)&&V.dimensions.length===1&&qt(V.dimensions[0])){var X=V.dimensions[0].value;return X in k.properties?k.properties[X]:new c}return new l(S(k),V)}function j(k,V,q,H){var ee=V.shift(),le=V.reduce((re,L)=>{if(!fr(L)){var ie=re.pop();if(fr(ie))return[ie,L];try{return re.push(A(k,[ie,L],H)),re}catch{re.push(ie)}}re.push(S(re.pop()));var X=re.length===1?re[0]:q(re);return[q([X,S(L)])]},[ee]);return le.length===1?le[0]:q([le[0],E(le[1])])}function K(k,V){switch(k.type){case"SymbolNode":return k;case"ConstantNode":switch(typeof k.value){case"number":return D(k.value,V);case"bigint":return D(k.value,V);case"string":return k.value;default:if(!isNaN(k.value))return D(k.value,V)}return k;case"FunctionNode":if(n[k.name]&&n[k.name].rawArgs)return k;{var q=["add","multiply"];if(!q.includes(k.name)){var H=k.args.map(Q=>K(Q,V));if(!H.some(fr))try{return A(k.name,H,V)}catch{}if(k.name==="size"&&H.length===1&&il(H[0])){for(var ee=[],le=H[0];il(le);)ee.push(le.items.length),le=le.items[0];return i(ee)}return new f(k.name,H.map(S))}}case"OperatorNode":{var re=k.fn.toString(),L,ie,X=b(k);if(Bn(k)&&k.isUnary())L=[K(k.args[0],V)],fr(L[0])?ie=X(L):ie=A(re,L,V);else if(y(k,V.context))if(L=w(k,V.context),L=L.map(Q=>K(Q,V)),v(re,V.context)){for(var pe=[],de=[],ae=0;ae<L.length;ae++)fr(L[ae])?de.push(L[ae]):pe.push(L[ae]);pe.length>1?(ie=j(re,pe,X,V),de.unshift(ie),ie=j(re,de,X,V)):ie=j(re,L,X,V)}else ie=j(re,L,X,V);else L=k.args.map(Q=>K(Q,V)),ie=j(re,L,X,V);return ie}case"ParenthesisNode":return K(k.content,V);case"AccessorNode":return M(K(k.object,V),K(k.index,V),V);case"ArrayNode":{var z=k.items.map(Q=>K(Q,V));return z.some(fr)?new u(z.map(S)):i(z)}case"IndexNode":return new h(k.dimensions.map(Q=>_(Q,V)));case"ObjectNode":{var ne={};for(var fe in k.properties)ne[fe]=_(k.properties[fe],V);return new d(ne)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(k.type))}}return _}),UQ="simplifyCore",Oot=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],kot=Y(UQ,Oot,t=>{var{typed:e,parse:r,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:h,FunctionNode:d,IndexNode:p,ObjectNode:m,OperatorNode:v,ParenthesisNode:y,SymbolNode:w}=t,b=new h(0),_=new h(1),x=new h(!0),A=new h(!1);function E(N){return Bn(N)&&["and","not","or"].includes(N.op)}var{hasProperty:S,isCommutative:C}=NV({FunctionNode:d,OperatorNode:v,SymbolNode:w});function D(N){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=P?P.context:void 0;if(S(N,"trivial",M)){if(Tp(N)&&N.args.length===1)return D(N.args[0],P);var j=!1,K=0;if(N.forEach(pe=>{++K,K===1&&(j=D(pe,P))}),K===1)return j}var k=N;if(Tp(k)){var V=AJe(k.name);if(V){if(k.args.length>2&&S(k,"associative",M))for(;k.args.length>2;){var q=k.args.pop(),H=k.args.pop();k.args.push(new v(V,k.name,[q,H]))}k=new v(V,k.name,k.args)}else return new d(D(k.fn),k.args.map(pe=>D(pe,P)))}if(Bn(k)&&k.isUnary()){var ee=D(k.args[0],P);if(k.op==="~"&&Bn(ee)&&ee.isUnary()&&ee.op==="~"||k.op==="not"&&Bn(ee)&&ee.isUnary()&&ee.op==="not"&&E(ee.args[0]))return ee.args[0];var le=!0;if(k.op==="-"&&Bn(ee)&&(ee.isBinary()&&ee.fn==="subtract"&&(k=new v("-","subtract",[ee.args[1],ee.args[0]]),le=!1),ee.isUnary()&&ee.op==="-"))return ee.args[0];if(le)return new v(k.op,k.fn,[ee])}if(Bn(k)&&k.isBinary()){var re=D(k.args[0],P),L=D(k.args[1],P);if(k.op==="+"){if(qt(re)&&i(re.value))return L;if(qt(L)&&i(L.value))return re;Bn(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],k=new v("-","subtract",[re,L]))}if(k.op==="-")return Bn(L)&&L.isUnary()&&L.op==="-"?D(new v("+","add",[re,L.args[0]]),P):qt(re)&&i(re.value)?D(new v("-","unaryMinus",[L])):qt(L)&&i(L.value)?re:new v(k.op,k.fn,[re,L]);if(k.op==="*"){if(qt(re)){if(i(re.value))return b;if(n(re.value,1))return L}if(qt(L)){if(i(L.value))return b;if(n(L.value,1))return re;if(C(k,M))return new v(k.op,k.fn,[L,re],k.implicit)}return new v(k.op,k.fn,[re,L],k.implicit)}if(k.op==="/")return qt(re)&&i(re.value)?b:qt(L)&&n(L.value,1)?re:new v(k.op,k.fn,[re,L]);if(k.op==="^"&&qt(L)){if(i(L.value))return _;if(n(L.value,1))return re}if(k.op==="and"){if(qt(re))if(re.value){if(E(L))return L;if(qt(L))return L.value?x:A}else return A;if(qt(L))if(L.value){if(E(re))return re}else return A}if(k.op==="or"){if(qt(re)){if(re.value)return x;if(E(L))return L}if(qt(L)){if(L.value)return x;if(E(re))return re}}return new v(k.op,k.fn,[re,L])}if(Bn(k))return new v(k.op,k.fn,k.args.map(pe=>D(pe,P)));if(il(k))return new f(k.items.map(pe=>D(pe,P)));if(fh(k))return new c(D(k.object,P),D(k.index,P));if(Gw(k))return new p(k.dimensions.map(pe=>D(pe,P)));if(lO(k)){var ie={};for(var X in k.properties)ie[X]=D(k.properties[X],P);return new m(ie)}return k}return e(UQ,{Node:D,"Node,Object":D})}),Rot="resolve",Fot=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Lot=Y(Rot,Fot,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=t;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(Ui(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var h=u.get(l.name);if(fr(h)){var d=new Set(c);return d.add(l.name),o(h,u,d)}else return typeof h=="number"?r(String(h)):h!==void 0?new n(h):l}else if(Bn(l)){var p=l.args.map(function(v){return o(v,u,c)});return new a(l.op,l.fn,p,l.implicit)}else{if(hh(l))return new s(o(l.content,u,c));if(Tp(l)){var m=l.args.map(function(v){return o(v,u,c)});return new i(l.name,m)}}return l.map(v=>o(v,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,m0(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,m0(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,m0(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),zQ="symbolicEqual",Bot=["parse","simplify","typed","OperatorNode"],$ot=Y(zQ,Bot,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:i}=t;function a(s,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[s,o]),c=r(u,{},l);return qt(c)&&!c.value}return n(zQ,{"Node, Node":a,"Node, Node, Object":a})}),qQ="derivative",jot=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Vot=Y(qQ,jot,t=>{var{typed:e,config:r,parse:n,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:h}=t;function d(_,x){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},E=new Map,S=x.name;function C(N){var P=E.get(N);if(P!==void 0)return P;var M=y(C,N,S);return E.set(N,M),M}var D=w(_,C);return A.simplify?i(D):D}function p(_){var x=n(_);if(!x.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(_)," into a variable in function derivative"));return x}var m=e(qQ,{"Node, SymbolNode":d,"Node, SymbolNode, Object":d,"Node, string":(_,x)=>d(_,p(x)),"Node, string, Object":(_,x,A)=>d(_,p(x),A)});m._simplify=!0,m.toTex=function(_){return v.apply(null,_.args)};var v=e("_derivTex",{"Node, SymbolNode":function(x,A){return qt(x)&&br(x.value)==="string"?v(n(x.value).toString(),A.toString(),1):v(x.toTex(),A.toString(),1)},"Node, ConstantNode":function(x,A){if(br(A.value)==="string")return v(x,n(A.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,A,E){return v(x.toString(),A.name,E.value)},"string, string, number":function(x,A,E){var S;return E===1?S="{d\\over d"+A+"}":S="{d^{"+E+"}\\over d"+A+"^{"+E+"}}",S+"\\left[".concat(x,"\\right]")}}),y=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(x,A,E){return A.name!==E},"function, ParenthesisNode, string":function(x,A,E){return x(A.content,E)},"function, FunctionAssignmentNode, string":function(x,A,E){return A.params.includes(E)?x(A.expr,E):!0},"function, FunctionNode | OperatorNode, string":function(x,A,E){return A.args.every(S=>x(S,E))}}),w=e("_derivative",{"ConstantNode, function":function(){return b(0)},"SymbolNode, function":function(x,A){return A(x)?b(0):b(1)},"ParenthesisNode, function":function(x,A){return new f(w(x.content,A))},"FunctionAssignmentNode, function":function(x,A){return A(x)?b(0):w(x.expr,A)},"FunctionNode, function":function(x,A){if(A(x))return b(0);var E=x.args[0],S,C=!1,D=!1,N;switch(x.name){case"cbrt":C=!0,N=new c("*","multiply",[b(3),new c("^","pow",[E,new c("/","divide",[b(2),b(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)C=!0,N=new c("*","multiply",[b(2),new u("sqrt",[E])]);else if(x.args.length===2)return S=new c("/","divide",[b(1),x.args[1]]),w(new c("^","pow",[E,S]),A);break;case"log10":S=b(10);case"log":if(!S&&x.args.length===1)N=E.clone(),C=!0;else if(x.args.length===1&&S||x.args.length===2&&A(x.args[1]))N=new c("*","multiply",[E.clone(),new u("log",[S||x.args[1]])]),C=!0;else if(x.args.length===2)return w(new c("/","divide",[new u("log",[E]),new u("log",[x.args[1]])]),A);break;case"pow":if(x.args.length===2)return w(new c("^","pow",[E,x.args[1]]),A);break;case"exp":N=new u("exp",[E.clone()]);break;case"sin":N=new u("cos",[E.clone()]);break;case"cos":N=new c("-","unaryMinus",[new u("sin",[E.clone()])]);break;case"tan":N=new c("^","pow",[new u("sec",[E.clone()]),b(2)]);break;case"sec":N=new c("*","multiply",[x,new u("tan",[E.clone()])]);break;case"csc":D=!0,N=new c("*","multiply",[x,new u("cot",[E.clone()])]);break;case"cot":D=!0,N=new c("^","pow",[new u("csc",[E.clone()]),b(2)]);break;case"asin":C=!0,N=new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[E.clone(),b(2)])])]);break;case"acos":C=!0,D=!0,N=new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[E.clone(),b(2)])])]);break;case"atan":C=!0,N=new c("+","add",[new c("^","pow",[E.clone(),b(2)]),b(1)]);break;case"asec":C=!0,N=new c("*","multiply",[new u("abs",[E.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),b(2)]),b(1)])])]);break;case"acsc":C=!0,D=!0,N=new c("*","multiply",[new u("abs",[E.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),b(2)]),b(1)])])]);break;case"acot":C=!0,D=!0,N=new c("+","add",[new c("^","pow",[E.clone(),b(2)]),b(1)]);break;case"sinh":N=new u("cosh",[E.clone()]);break;case"cosh":N=new u("sinh",[E.clone()]);break;case"tanh":N=new c("^","pow",[new u("sech",[E.clone()]),b(2)]);break;case"sech":D=!0,N=new c("*","multiply",[x,new u("tanh",[E.clone()])]);break;case"csch":D=!0,N=new c("*","multiply",[x,new u("coth",[E.clone()])]);break;case"coth":D=!0,N=new c("^","pow",[new u("csch",[E.clone()]),b(2)]);break;case"asinh":C=!0,N=new u("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),b(2)]),b(1)])]);break;case"acosh":C=!0,N=new u("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),b(2)]),b(1)])]);break;case"atanh":C=!0,N=new c("-","subtract",[b(1),new c("^","pow",[E.clone(),b(2)])]);break;case"asech":C=!0,D=!0,N=new c("*","multiply",[E.clone(),new u("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[E.clone(),b(2)])])])]);break;case"acsch":C=!0,D=!0,N=new c("*","multiply",[new u("abs",[E.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),b(2)]),b(1)])])]);break;case"acoth":C=!0,D=!0,N=new c("-","subtract",[b(1),new c("^","pow",[E.clone(),b(2)])]);break;case"abs":N=new c("/","divide",[new u(new h("abs"),[E.clone()]),E.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+x.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var P,M;C?(P="/",M="divide"):(P="*",M="multiply");var j=w(E,A);return D&&(j=new c("-","unaryMinus",[j])),new c(P,M,[j,N])},"OperatorNode, function":function(x,A){if(A(x))return b(0);if(x.op==="+")return new c(x.op,x.fn,x.args.map(function(k){return w(k,A)}));if(x.op==="-"){if(x.isUnary())return new c(x.op,x.fn,[w(x.args[0],A)]);if(x.isBinary())return new c(x.op,x.fn,[w(x.args[0],A),w(x.args[1],A)])}if(x.op==="*"){var E=x.args.filter(function(k){return A(k)});if(E.length>0){var S=x.args.filter(function(k){return!A(k)}),C=S.length===1?S[0]:new c("*","multiply",S),D=E.concat(w(C,A));return new c("*","multiply",D)}return new c("+","add",x.args.map(function(k){return new c("*","multiply",x.args.map(function(V){return V===k?w(V,A):V.clone()}))}))}if(x.op==="/"&&x.isBinary()){var N=x.args[0],P=x.args[1];return A(P)?new c("/","divide",[w(N,A),P]):A(N)?new c("*","multiply",[new c("-","unaryMinus",[N]),new c("/","divide",[w(P,A),new c("^","pow",[P.clone(),b(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[w(N,A),P.clone()]),new c("*","multiply",[N.clone(),w(P,A)])]),new c("^","pow",[P.clone(),b(2)])])}if(x.op==="^"&&x.isBinary()){var M=x.args[0],j=x.args[1];if(A(M))return qt(M)&&(s(M.value)||a(M.value,1))?b(0):new c("*","multiply",[x,new c("*","multiply",[new u("log",[M.clone()]),w(j.clone(),A)])]);if(A(j)){if(qt(j)){if(s(j.value))return b(0);if(a(j.value,1))return w(M,A)}var K=new c("^","pow",[M.clone(),new c("-","subtract",[j,b(1)])]);return new c("*","multiply",[j.clone(),new c("*","multiply",[w(M,A),K])])}return new c("*","multiply",[new c("^","pow",[M.clone(),j.clone()]),new c("+","add",[new c("*","multiply",[w(M,A),new c("/","divide",[j.clone(),M.clone()])]),new c("*","multiply",[w(j,A),new u("log",[M.clone()])])])])}throw new Error('Cannot process operator "'+x.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function b(_,x){return new l(o(_,Hp(String(_),r)))}return m}),HQ="rationalize",Uot=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],zot=Y(HQ,Uot,t=>{var{config:e,typed:r,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:h,simplify:d,fraction:p,bignumber:m,mathWithTransform:v,matrix:y,AccessorNode:w,ArrayNode:b,ConstantNode:_,FunctionNode:x,IndexNode:A,ObjectNode:E,OperatorNode:S,SymbolNode:C,ParenthesisNode:D}=t;function N(k){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,H=M(),ee=P(k,V,!0,H.firstRules),le=ee.variables.length,re={exactFractions:!1},L={exactFractions:!0};if(k=ee.expression,le>=1){k=j(k);var ie,X,pe=!0,de=!1;k=d(k,H.firstRules,{},re);for(var ae;X=pe?H.distrDivRules:H.sucDivRules,k=d(k,X,{},L),pe=!pe,ae=k.toString(),ae!==ie;)de=!0,ie=ae;de&&(k=d(k,H.firstRulesAgain,{},re)),k=d(k,H.finalRules,{},re)}var z=[],ne={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(le===1&&(k.args[0]=K(k.args[0],z),k.args[1]=K(k.args[1])),q&&(ne.numerator=k.args[0],ne.denominator=k.args[1])):(le===1&&(k=K(k,z)),q&&(ne.numerator=k,ne.denominator=null)),q?(ne.coefficients=z,ne.variables=ee.variables,ne.expression=k,ne):k}return r(HQ,{Node:N,"Node, boolean":(k,V)=>N(k,{},V),"Node, Object":N,"Node, Object, boolean":N});function P(k,V,q,H){var ee=[],le=d(k,H,V,{exactFractions:!1});q=!!q;var re="+-*"+(q?"/":"");ie(le);var L={};return L.expression=le,L.variables=ee,L;function ie(X){var pe=X.type;if(pe==="FunctionNode")throw new Error("There is an unsolved function call");if(pe==="OperatorNode")if(X.op==="^"){if(X.args[1].type!=="ConstantNode"||!nt(parseFloat(X.args[1].value)))throw new Error("There is a non-integer exponent");ie(X.args[0])}else{if(!re.includes(X.op))throw new Error("Operator "+X.op+" invalid in polynomial expression");for(var de=0;de<X.args.length;de++)ie(X.args[de])}else if(pe==="SymbolNode"){var ae=X.name,z=ee.indexOf(ae);z===-1&&ee.push(ae)}else if(pe==="ParenthesisNode")ie(X.content);else if(pe!=="ConstantNode")throw new Error("type "+pe+" is not allowed in polynomial expression")}}function M(){var k=[h,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],V=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],H=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],ee={};return ee.firstRules=k.concat(V,H),ee.distrDivRules=q,ee.sucDivRules=H,ee.firstRulesAgain=k.concat(V),ee.finalRules=[h,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],ee}function j(k,V,q){var H=k.type,ee=arguments.length>1;if(H==="OperatorNode"&&k.isBinary()){var le=!1,re;if(k.op==="^"&&(k.args[0].type==="ParenthesisNode"||k.args[0].type==="OperatorNode")&&k.args[1].type==="ConstantNode"&&(re=parseFloat(k.args[1].value),le=re>=2&&nt(re)),le){if(re>2){var L=k.args[0],ie=new S("^","pow",[k.args[0].cloneDeep(),new _(re-1)]);k=new S("*","multiply",[L,ie])}else k=new S("*","multiply",[k.args[0],k.args[0].cloneDeep()]);ee&&(q==="content"?V.content=k:V.args[q]=k)}}if(H==="ParenthesisNode")j(k.content,k,"content");else if(H!=="ConstantNode"&&H!=="SymbolNode")for(var X=0;X<k.args.length;X++)j(k.args[X],k,X);if(!ee)return k}function K(k,V){V===void 0&&(V=[]),V[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var H=0,ee="";ae(k,null,q),H=V.length-1;for(var le=!0,re,L=H;L>=0;L--)if(V[L]!==0){var ie=new _(le?V[L]:Math.abs(V[L])),X=V[L]<0?"-":"+";if(L>0){var pe=new C(ee);if(L>1){var de=new _(L);pe=new S("^","pow",[pe,de])}V[L]===-1&&le?ie=new S("-","unaryMinus",[pe]):Math.abs(V[L])===1?ie=pe:ie=new S("*","multiply",[ie,pe])}le?re=ie:X==="+"?re=new S("+","add",[re,ie]):re=new S("-","subtract",[re,ie]),le=!1}if(le)return new _(0);return re;function ae(z,ne,fe){var Q=z.type;if(Q==="FunctionNode")throw new Error("There is an unsolved function call");if(Q==="OperatorNode"){if(!"+-*^".includes(z.op))throw new Error("Operator "+z.op+" invalid");if(ne!==null){if((z.fn==="unaryMinus"||z.fn==="pow")&&ne.fn!=="add"&&ne.fn!=="subtract"&&ne.fn!=="multiply")throw new Error("Invalid "+z.op+" placing");if((z.fn==="subtract"||z.fn==="add"||z.fn==="multiply")&&ne.fn!=="add"&&ne.fn!=="subtract")throw new Error("Invalid "+z.op+" placing");if((z.fn==="subtract"||z.fn==="add"||z.fn==="unaryMinus")&&fe.noFil!==0)throw new Error("Invalid "+z.op+" placing")}(z.op==="^"||z.op==="*")&&(fe.fire=z.op);for(var ye=0;ye<z.args.length;ye++)z.fn==="unaryMinus"&&(fe.oper="-"),(z.op==="+"||z.fn==="subtract")&&(fe.fire="",fe.cte=1,fe.oper=ye===0?"+":z.op),fe.noFil=ye,ae(z.args[ye],z,fe)}else if(Q==="SymbolNode"){if(z.name!==ee&&ee!=="")throw new Error("There is more than one variable");if(ee=z.name,ne===null){V[1]=1;return}if(ne.op==="^"&&fe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ne.op==="*"&&fe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(fe.fire===""||fe.fire==="*")&&(H<1&&(V[1]=0),V[1]+=fe.cte*(fe.oper==="+"?1:-1),H=Math.max(1,H))}else if(Q==="ConstantNode"){var me=parseFloat(z.value);if(ne===null){V[0]=me;return}if(ne.op==="^"){if(fe.noFil!==1)throw new Error("Constant cannot be powered");if(!nt(me)||me<=0)throw new Error("Non-integer exponent is not allowed");for(var De=H+1;De<me;De++)V[De]=0;me>H&&(V[me]=0),V[me]+=fe.cte*(fe.oper==="+"?1:-1),H=Math.max(me,H);return}fe.cte=me,fe.fire===""&&(V[0]+=fe.cte*(fe.oper==="+"?1:-1))}else throw new Error("Type "+Q+" is not allowed")}}}),WQ="zpk2tf",qot=["typed","add","multiply","Complex","number"],Hot=Y(WQ,qot,t=>{var{typed:e,add:r,multiply:n,Complex:i,number:a}=t;return e(WQ,{"Array,Array,number":function(u,c,f){return s(u,c,f)},"Array,Array":function(u,c){return s(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return s(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return s(u.valueOf(),c.valueOf(),1)}});function s(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>a(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>a(w)));for(var f=[i(1,0)],h=[i(1,0)],d=0;d<l.length;d++){var p=l[d];typeof p=="number"&&(p=i(p,0)),f=o(f,[i(1,0),i(-p.re,-p.im)])}for(var m=0;m<u.length;m++){var v=u[m];typeof v=="number"&&(v=i(v,0)),h=o(h,[i(1,0),i(-v.re,-v.im)])}for(var y=0;y<f.length;y++)f[y]=n(f[y],c);return[f,h]}function o(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var h=0;h<l.length;h++)f-h>=0&&f-h<u.length&&(c[f]=r(c[f],n(l[h],u[f-h])))}return c}}),GQ="freqz",Wot=["typed","add","multiply","Complex","divide","matrix"],Got=Y(GQ,Wot,t=>{var{typed:e,add:r,multiply:n,Complex:i,divide:a,matrix:s}=t;return e(GQ,{"Array, Array":function(c,f){var h=l(512);return o(c,f,h)},"Array, Array, Array":function(c,f,h){return o(c,f,h)},"Array, Array, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=l(h);return o(c,f,d)},"Matrix, Matrix":function(c,f){var h=l(512),{w:d,h:p}=o(c.valueOf(),f.valueOf(),h);return{w:s(d),h:s(p)}},"Matrix, Matrix, Matrix":function(c,f,h){var{h:d}=o(c.valueOf(),f.valueOf(),h.valueOf());return{h:s(d),w:s(h)}},"Matrix, Matrix, number":function(c,f,h){if(h<0)throw new Error("w must be a positive number");var d=l(h),{h:p}=o(c.valueOf(),f.valueOf(),d);return{h:s(p),w:s(d)}}});function o(u,c,f){for(var h=[],d=[],p=0;p<f.length;p++){for(var m=i(0,0),v=i(0,0),y=0;y<u.length;y++)m=r(m,n(u[y],i(Math.cos(-y*f[p]),Math.sin(-y*f[p]))));for(var w=0;w<c.length;w++)v=r(v,n(c[w],i(Math.cos(-w*f[p]),Math.sin(-w*f[p]))));h.push(m),d.push(v)}for(var b=[],_=0;_<h.length;_++)b.push(a(h[_],d[_]));return{h:b,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),Kot="reviver",Xot=["classes"],Yot=Y(Kot,Xot,t=>{var{classes:e}=t;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),Qot="replacer",Zot=[],Jot=Y(Qot,Zot,()=>function(e,r){return typeof r=="number"&&(!Number.isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),elt="15.1.0",tlt=Y("true",[],()=>!0),rlt=Y("false",[],()=>!1),nlt=Y("null",[],()=>null),ilt=Io("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),alt=Io("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),slt=Io("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?xV(r):Kqe}),olt=Io("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?CQe(r):Xqe}),llt=Io("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?EQe(r):Yqe}),ult=Io("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?SQe(r):Qqe}),clt=Io("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),flt=Io("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),hlt=Io("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),dlt=Io("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),plt=Io("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),mlt=Io("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),glt=Io("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),vlt=Y("version",[],()=>elt);function Io(t,e,r){return Y(t,e,r,{recreateOnConfigChange:!0})}var ylt=At("speedOfLight","299792458","m s^-1"),blt=At("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),wlt=At("planckConstant","6.62607015e-34","J s"),xlt=At("reducedPlanckConstant","1.0545718176461565e-34","J s"),Alt=At("magneticConstant","1.25663706212e-6","N A^-2"),_lt=At("electricConstant","8.8541878128e-12","F m^-1"),Elt=At("vacuumImpedance","376.730313667","ohm"),Slt=At("coulomb","8.987551792261171e9","N m^2 C^-2"),Clt=At("coulombConstant","8.987551792261171e9","N m^2 C^-2"),Tlt=At("elementaryCharge","1.602176634e-19","C"),Dlt=At("bohrMagneton","9.2740100783e-24","J T^-1"),Nlt=At("conductanceQuantum","7.748091729863649e-5","S"),Plt=At("inverseConductanceQuantum","12906.403729652257","ohm"),Mlt=At("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Ilt=At("nuclearMagneton","5.0507837461e-27","J T^-1"),Olt=At("klitzing","25812.807459304513","ohm"),klt=At("bohrRadius","5.29177210903e-11","m"),Rlt=At("classicalElectronRadius","2.8179403262e-15","m"),Flt=At("electronMass","9.1093837015e-31","kg"),Llt=At("fermiCoupling","1.1663787e-5","GeV^-2"),Blt=yO("fineStructure",.0072973525693),$lt=At("hartreeEnergy","4.3597447222071e-18","J"),jlt=At("protonMass","1.67262192369e-27","kg"),Vlt=At("deuteronMass","3.3435830926e-27","kg"),Ult=At("neutronMass","1.6749271613e-27","kg"),zlt=At("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),qlt=At("rydberg","10973731.568160","m^-1"),Hlt=At("thomsonCrossSection","6.6524587321e-29","m^2"),Wlt=yO("weakMixingAngle",.2229),Glt=yO("efimovFactor",22.7),Klt=At("atomicMass","1.66053906660e-27","kg"),Xlt=At("avogadro","6.02214076e23","mol^-1"),Ylt=At("boltzmann","1.380649e-23","J K^-1"),Qlt=At("faraday","96485.33212331001","C mol^-1"),Zlt=At("firstRadiation","3.7417718521927573e-16","W m^2"),Jlt=At("loschmidt","2.686780111798444e25","m^-3"),eut=At("gasConstant","8.31446261815324","J K^-1 mol^-1"),tut=At("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),rut=At("molarVolume","0.022413969545014137","m^3 mol^-1"),nut=yO("sackurTetrode",-1.16487052358),iut=At("secondRadiation","0.014387768775039337","m K"),aut=At("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),sut=At("wienDisplacement","2.897771955e-3","m K"),out=At("molarMass","0.99999999965e-3","kg mol^-1"),lut=At("molarMassC12","11.9999999958e-3","kg mol^-1"),uut=At("gravity","9.80665","m s^-2"),cut=At("planckLength","1.616255e-35","m"),fut=At("planckMass","2.176435e-8","kg"),hut=At("planckTime","5.391245e-44","s"),dut=At("planckCharge","1.87554603778e-18","C"),put=At("planckTemperature","1.416785e+32","K");function At(t,e,r){var n=["config","Unit","BigNumber"];return Y(t,n,i=>{var{config:a,Unit:s,BigNumber:o}=i,l=a.number==="BigNumber"?new o(e):parseFloat(e),u=new s(l,r);return u.fixPrefix=!0,u})}function yO(t,e){var r=["config","BigNumber"];return Y(t,r,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}function KQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KQ(Object(r),!0).forEach(function(n){ei(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var gut="mapSlices",vut=["typed","isInteger"],yut=Y(gut,vut,t=>{var{typed:e,isInteger:r}=t,n=v4({typed:e,isInteger:r});return e("mapSlices",{"...any":function(a){var s=a[1];lt(s)?a[1]=s-1:St(s)&&(a[1]=s.minus(1));try{return n.apply(null,a)}catch(o){throw vs(o)}}})},mut({isTransformFunction:!0},v4.meta)),but="column",wut=["typed","Index","matrix","range"],xut=Y(but,wut,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=gpe({typed:e,Index:r,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];lt(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw vs(c)}}})},{isTransformFunction:!0});function PV(t,e,r){var n=t.filter(function(l){return Ui(l)&&!(l.name in e)&&!r.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=n.name,a=new Map,s=new Lhe(r,a,new Set([i])),o=t.compile();return function(u){return a.set(i,u),o.evaluate(s)}}var Aut="transformCallback",_ut=["typed"],MV=Y(Aut,_ut,t=>{var{typed:e}=t;return function(n,i){return e.isTypedFunction(n)?r(n,i):XQ(n,n.length,i)};function r(n,i){var a=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[o,l]=s,u=o.split(",").length;return e.isTypedFunction(l)?[o,r(l,i)]:[o,XQ(l,u,i)]}));return typeof n.name=="string"?e(n.name,a):e(a)}});function XQ(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,r),o=YQ(i[r]);return t(...s,o)}:e>r+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,r),o=YQ(i[r]),l=i.slice(r+1);return t(...s,o,...l)}:t}function YQ(t){return t.map(e=>e+1)}var Eut="filter",Sut=["typed"],Cut=Y(Eut,Sut,t=>{var{typed:e}=t;function r(i,a,s){var o=vpe({typed:e}),l=MV({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var c=i.length-1,f=i[c];return u&&(u=n(u,s)),f&&(Ui(f)||XS(f)?f=n(f,s):f=PV(f,a,s)),o(u,l(f,c))}r.rawArgs=!0;function n(i,a){return i.compile().evaluate(a)}return r},{isTransformFunction:!0}),Tut="forEach",Dut=["typed"],Nut=Y(Tut,Dut,t=>{var{typed:e}=t,r=ype({typed:e}),n=MV({typed:e});function i(s,o,l){if(s.length===0)return r();var u=s[0];if(s.length===1)return r(u);var c=s.length-1,f=s[c];return u&&(u=a(u,l)),f&&(Ui(f)||XS(f)?f=a(f,l):f=PV(f,o,l)),r(u,n(f,c))}i.rawArgs=!0;function a(s,o){return s.compile().evaluate(o)}return i},{isTransformFunction:!0}),Put="index",Mut=["Index","getMatrixDataType"],Iut=Y(Put,Mut,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(lV(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(vr(o)||ft(o))r(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(lt(o)||Kx(o))o--;else if(St(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),Out="map",kut=["typed"],Rut=Y(Out,kut,t=>{var{typed:e}=t,r=bpe({typed:e}),n=MV({typed:e});function i(a,s,o){if(a.length===0)return r();if(a.length===1)return r(a[0]);var l=a.length-1,u=a.slice(0,l),c=a[l];return u=u.map(h=>f(h,o)),c&&(Ui(c)||XS(c)?c=f(c,o):c=PV(c,s,o)),r(...u,n(c,l));function f(h,d){return h.compile().evaluate(d)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function Fut(t){return lt(t)?t-1:St(t)?t.minus(1):t}function Lut(t){return lt(t)||St(t)}function Kp(t){if(t.length===2&&Do(t[0])){t=t.slice();var e=t[1];Lut(e)&&(t[1]=Fut(e))}return t}var But="max",$ut=["typed","config","numeric","larger","isNaN"],jut=Y(But,$ut,t=>{var{typed:e,config:r,numeric:n,larger:i,isNaN:a}=t,s=Dpe({typed:e,config:r,numeric:n,larger:i,isNaN:a});return e("max",{"...any":function(l){l=Kp(l);try{return s.apply(null,l)}catch(u){throw vs(u)}}})},{isTransformFunction:!0}),Vut="mean",Uut=["typed","add","divide"],zut=Y(Vut,Uut,t=>{var{typed:e,add:r,divide:n}=t,i=Lpe({typed:e,add:r,divide:n});return e("mean",{"...any":function(s){s=Kp(s);try{return i.apply(null,s)}catch(o){throw vs(o)}}})},{isTransformFunction:!0}),qut="min",Hut=["typed","config","numeric","smaller","isNaN"],Wut=Y(qut,Hut,t=>{var{typed:e,config:r,numeric:n,smaller:i,isNaN:a}=t,s=Npe({typed:e,config:r,numeric:n,smaller:i,isNaN:a});return e("min",{"...any":function(l){l=Kp(l);try{return s.apply(null,l)}catch(u){throw vs(u)}}})},{isTransformFunction:!0}),Gut="range",Kut=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Xut=Y(Gut,Kut,t=>{var{typed:e,config:r,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isZero:f,isPositive:h}=t,d=Ape({typed:e,config:r,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isZero:f,isPositive:h});return e("range",{"...any":function(m){var v=m.length-1,y=m[v];return typeof y!="boolean"&&m.push(!0),d.apply(null,m)}})},{isTransformFunction:!0}),Yut="row",Qut=["typed","Index","matrix","range"],Zut=Y(Yut,Qut,t=>{var{typed:e,Index:r,matrix:n,range:i}=t,a=_pe({typed:e,Index:r,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];lt(u)&&(o[l]=u-1);try{return a.apply(null,o)}catch(c){throw vs(c)}}})},{isTransformFunction:!0}),Jut="subset",ect=["typed","matrix","zeros","add"],tct=Y(Jut,ect,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=Epe({typed:e,matrix:r,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(l){throw vs(l)}}})},{isTransformFunction:!0}),rct="concat",nct=["typed","matrix","isInteger"],ict=Y(rct,nct,t=>{var{typed:e,matrix:r,isInteger:n}=t,i=mpe({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(s){var o=s.length-1,l=s[o];lt(l)?s[o]=l-1:St(l)&&(s[o]=l.minus(1));try{return i.apply(null,s)}catch(u){throw vs(u)}}})},{isTransformFunction:!0}),QQ="diff",act=["typed","matrix","subtract","number","bignumber"],sct=Y(QQ,act,t=>{var{typed:e,matrix:r,subtract:n,number:i,bignumber:a}=t,s=wpe({typed:e,matrix:r,subtract:n,number:i,bignumber:a});return e(QQ,{"...any":function(l){l=Kp(l);try{return s.apply(null,l)}catch(u){throw vs(u)}}})},{isTransformFunction:!0}),oct="std",lct=["typed","map","sqrt","variance"],uct=Y(oct,lct,t=>{var{typed:e,map:r,sqrt:n,variance:i}=t,a=jpe({typed:e,map:r,sqrt:n,variance:i});return e("std",{"...any":function(o){o=Kp(o);try{return a.apply(null,o)}catch(l){throw vs(l)}}})},{isTransformFunction:!0}),ZQ="sum",cct=["typed","config","add","numeric"],fct=Y(ZQ,cct,t=>{var{typed:e,config:r,add:n,numeric:i}=t,a=Rpe({typed:e,config:r,add:n,numeric:i});return e(ZQ,{"...any":function(o){o=Kp(o);try{return a.apply(null,o)}catch(l){throw vs(l)}}})},{isTransformFunction:!0}),hct="quantileSeq",dct=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],pct=Y(hct,dct,t=>{var{typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d}=t,p=$pe({typed:e,bignumber:r,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:h,mapSlices:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(v,y,w)=>p(v,y,m(w)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(v,y,w,b)=>p(v,y,w,m(b)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(v,y,w)=>p(v,y,m(w)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(v,y,w,b)=>p(v,y,w,m(b))});function m(v){return Kp([[],v])[1]}},{isTransformFunction:!0}),JQ="cumsum",mct=["typed","add","unaryPlus"],gct=Y(JQ,mct,t=>{var{typed:e,add:r,unaryPlus:n}=t,i=Fpe({typed:e,add:r,unaryPlus:n});return e(JQ,{"...any":function(s){if(s.length===2&&Do(s[0])){var o=s[1];lt(o)?s[1]=o-1:St(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(l){throw vs(l)}}})},{isTransformFunction:!0}),eZ="variance",vct=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],yct=Y(eZ,vct,t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=t,l=Bpe({typed:e,add:r,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o});return e(eZ,{"...any":function(c){c=Kp(c);try{return l.apply(null,c)}catch(f){throw vs(f)}}})},{isTransformFunction:!0}),tZ="print",bct=["typed","matrix","zeros","add"],wct=Y(tZ,bct,t=>{var{typed:e,matrix:r,zeros:n,add:i}=t,a=Cpe({typed:e,matrix:r,zeros:n,add:i});return e(tZ,{"string, Object | Array":function(l,u){return a(s(l),u)},"string, Object | Array, number | Object":function(l,u,c){return a(s(l),u,c)}});function s(o){return o.replace(Spe,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),xct="and",Act=["typed","matrix","zeros","add","equalScalar","not","concat"],_ct=Y(xct,Act,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=Tpe({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,f){var h=u[0].compile().evaluate(f);if(!Do(h)&&!o(h,!0))return!1;var d=u[1].compile().evaluate(f);return o(h,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Ect="or",Sct=["typed","matrix","equalScalar","DenseMatrix","concat"],Cct=Y(Ect,Sct,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=ppe({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!Do(f)&&s(f,!1))return!0;var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Tct="nullish",Dct=["typed","matrix","size","flatten","deepEqual"],Nct=Y(Tct,Dct,t=>{var{typed:e,matrix:r,size:n,flatten:i,deepEqual:a}=t,s=dpe({typed:e,matrix:r,size:n,flatten:i,deepEqual:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!Do(f)&&f!=null&&f!==void 0)return f;var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Pct="bitAnd",Mct=["typed","matrix","zeros","add","equalScalar","not","concat"],Ict=Y(Pct,Mct,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s}=t,o=fpe({typed:e,matrix:r,equalScalar:n,zeros:i,not:a,concat:s});function l(u,c,f){var h=u[0].compile().evaluate(f);if(!Do(h)){if(isNaN(h))return NaN;if(h===0||h===!1)return 0}var d=u[1].compile().evaluate(f);return o(h,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Oct="bitOr",kct=["typed","matrix","equalScalar","DenseMatrix","concat"],Rct=Y(Oct,kct,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a}=t,s=hpe({typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:a});function o(l,u,c){var f=l[0].compile().evaluate(c);if(!Do(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var h=l[1].compile().evaluate(c);return s(f,h)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Re=oqe({config:Ee}),_r=hqe({}),rZ=llt({BigNumber:Re,config:Ee}),Fct=rlt({}),Lct=Blt({BigNumber:Re,config:Ee}),Xp=wqe({}),zpe=glt({Complex:_r}),Bct=ilt({BigNumber:Re,config:Ee}),$ct=flt({BigNumber:Re,config:Ee}),jct=dlt({BigNumber:Re,config:Ee}),bO=Cqe({}),Vct=alt({BigNumber:Re,config:Ee}),Uct=nlt({}),zct=ult({BigNumber:Re,config:Ee}),qct=_qe({}),qpe=f7e({}),Hct=plt({BigNumber:Re,config:Ee}),Wct=nut({BigNumber:Re,config:Ee}),Hpe=olt({BigNumber:Re,config:Ee}),Gct=tlt({}),Kct=vlt({}),Pt=Uqe({Matrix:bO,config:Ee}),Xct=Glt({BigNumber:Re,config:Ee}),Yct=clt({BigNumber:Re,config:Ee}),C4=slt({BigNumber:Re,config:Ee}),Wpe=Jot({}),Qct=mlt({BigNumber:Re,config:Ee}),se=o7e({BigNumber:Re,Complex:_r,DenseMatrix:Pt,Fraction:Xp}),Zct=Wlt({BigNumber:Re,config:Ee}),ga=oWe({typed:se}),Jct=LQe({Complex:_r,config:Ee,typed:se}),eft=VQe({BigNumber:Re,typed:se}),tft=HQe({BigNumber:Re,Complex:_r,config:Ee,typed:se}),Ai=fWe({typed:se}),rft=ZGe({typed:se}),nft=QQe({BigNumber:Re,Complex:_r,config:Ee,typed:se}),ift=rZe({typed:se}),Gpe=aZe({typed:se}),aft=uZe({Complex:_r,config:Ee,typed:se}),sft=IHe({typed:se}),oft=HGe({typed:se}),lft=FHe({typed:se}),uft=qqe({typed:se}),wO=Pst({typed:se}),ov=UHe({Complex:_r,typed:se}),qv=eKe({typed:se}),IV=fZe({typed:se}),cft=mZe({BigNumber:Re,typed:se}),fft=bZe({BigNumber:Re,typed:se}),hft=TWe({typed:se}),Lt=xHe({config:Ee,typed:se}),dft=wXe({typed:se}),Kpe=NWe({typed:se}),pft=MWe({Complex:_r,typed:se}),mft=vpe({typed:se}),Hv=AKe({typed:se}),gft=ype({typed:se}),JS=MXe({typed:se}),OV=CKe({typed:se}),vft=LXe({format:JS,typed:se}),kV=rKe({typed:se}),eC=pHe({typed:se}),Uf=hHe({typed:se}),Wv=iHe({typed:se}),yft=qXe({typed:se}),bft=hlt({BigNumber:Re,config:Ee}),wft=Fst({Complex:_r,typed:se}),xft=fGe({Complex:_r,config:Ee,typed:se}),RV=dGe({Complex:_r,config:Ee,typed:se}),Yp=bpe({typed:se}),Aft=TXe({isNaN:Uf,isNumeric:Wv,typed:se}),In=gGe({typed:se}),IP=sKe({typed:se}),Pc=NHe({typed:se}),_ft=RXe({format:JS,typed:se}),Eft=cot({config:Ee,typed:se}),Sft=Cpe({typed:se}),Cft=hot({config:Ee,typed:se}),FV=iKe({typed:se}),Tft=_Ze({BigNumber:Re,typed:se}),Xpe=AGe({BigNumber:Re,Fraction:Xp,complex:ov,typed:se}),xO=TZe({typed:se}),_i=XKe({typed:se}),Ei=EHe({Matrix:bO,equalScalar:Lt,typed:se}),Dft=tWe({typed:se}),Nft=TGe({typed:se}),Pft=kHe({typed:se}),Pl=dWe({typed:se}),Mft=MZe({typed:se}),Ift=UXe({typed:se}),AO=yHe({typed:se}),Oft=$Qe({Complex:_r,config:Ee,typed:se}),kft=GQe({BigNumber:Re,typed:se}),Rft=XQe({BigNumber:Re,Complex:_r,config:Ee,typed:se}),Vs=$He({BigNumber:Re,typed:se}),Fft=Ist({typed:se}),Lft=dZe({typed:se}),Bft=xZe({BigNumber:Re,typed:se}),_O=lJe({addScalar:Ai,conj:qv,multiplyScalar:In,size:_i,typed:se}),$ft=sHe({isNumeric:Wv,typed:se}),jft=gHe({isBounded:eC,map:Yp,typed:se}),Qp=rHe({config:Ee,typed:se}),Ml=cHe({equalScalar:Lt,typed:se}),ke=GHe({DenseMatrix:Pt,Matrix:bO,SparseMatrix:Ei,typed:se}),Vft=XHe({isZero:Ml,matrix:ke,typed:se}),or=yGe({addScalar:Ai,dot:_O,equalScalar:Lt,matrix:ke,multiplyScalar:In,typed:se}),Uft=RKe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),zft=pot({config:Ee,log2:RV,typed:se}),qft=UKe({config:Ee,matrix:ke}),Hft=SZe({BigNumber:Re,typed:se}),Wft=NZe({typed:se}),Gft=OQe({SparseMatrix:Ei,typed:se}),xu=SGe({Complex:_r,config:Ee,typed:se}),Kft=QKe({typed:se}),Xft=kZe({typed:se}),tC=nXe({matrix:ke,typed:se}),Ype=MGe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),fa=oXe({BigNumber:Re,config:Ee,matrix:ke,typed:se}),Yft=zQe({BigNumber:Re,Complex:_r,config:Ee,typed:se}),Qft=JQe({Complex:_r,config:Ee,typed:se}),Zft=OXe({format:JS,typed:se}),Jft=vZe({BigNumber:Re,typed:se}),LV=aXe({conj:qv,transpose:tC,typed:se}),Qpe=yKe({DenseMatrix:Pt,SparseMatrix:Ei,matrix:ke,typed:se}),Ha=BYe({DenseMatrix:Pt,SparseMatrix:Ei,equalScalar:Lt,matrix:ke,typed:se}),rC=HHe({Fraction:Xp,typed:se}),Zp=DKe({BigNumber:Re,DenseMatrix:Pt,SparseMatrix:Ei,config:Ee,matrix:ke,typed:se}),os=Wqe({equal:Ha,typed:se}),eht=PKe({matrix:ke,multiplyScalar:In,typed:se}),n_=v4({isInteger:os,typed:se}),BV=JHe({flatten:Hv,matrix:ke,size:_i,typed:se}),gl=GXe({bignumber:Vs,fraction:rC,number:Pc}),Zpe=NXe({config:Ee,multiplyScalar:In,numeric:gl,typed:se}),Jpe=$Ke({isInteger:os,matrix:ke,typed:se}),Jw=JXe({BigNumber:Re,DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),Mc=nWe({typed:se}),tht=Dst({BigNumber:Re,Fraction:Xp,config:Ee,isInteger:os,number:Pc,typed:se}),eme=mWe({BigNumber:Re,Complex:_r,Fraction:Xp,config:Ee,isNegative:Qp,matrix:ke,typed:se,unaryMinus:Mc}),tr=mpe({isInteger:os,matrix:ke,typed:se}),rht=pKe({prod:Zpe,size:_i,typed:se}),nC=tQe({equal:Ha,typed:se}),un=XXe({numeric:gl,typed:se}),nht=LGe({concat:tr,equalScalar:Lt,matrix:ke,multiplyScalar:In,typed:se}),tme=ope({DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,round:Jw,typed:se,zeros:fa}),iht=iGe({BigNumber:Re,DenseMatrix:Pt,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,round:Jw,typed:se,zeros:fa}),Gv=lHe({config:Ee,typed:se}),ls=XYe({DenseMatrix:Pt,SparseMatrix:Ei,bignumber:Vs,concat:tr,config:Ee,matrix:ke,typed:se}),aht=lGe({concat:tr,equalScalar:Lt,matrix:ke,typed:se}),sht=AYe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),rme=hYe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:In,subtractScalar:Pl,typed:se}),$V=Dpe({config:Ee,isNaN:Uf,larger:ls,numeric:gl,typed:se}),nme=upe({DenseMatrix:Pt,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,round:Jw,typed:se,zeros:fa}),oht=wGe({BigNumber:Re,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),lht=dpe({deepEqual:nC,flatten:Hv,matrix:ke,size:_i,typed:se}),uht=ppe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),jV=yet({addScalar:Ai,complex:ov,conj:qv,divideScalar:un,equal:Ha,identity:Zp,isZero:Ml,matrix:ke,multiplyScalar:In,sign:Xpe,sqrt:xu,subtractScalar:Pl,typed:se,unaryMinus:Mc,zeros:fa}),cht=EYe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),us=zYe({DenseMatrix:Pt,SparseMatrix:Ei,bignumber:Vs,concat:tr,config:Ee,matrix:ke,typed:se}),gn=NGe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,subtractScalar:Pl,typed:se,unaryMinus:Mc}),fht=jXe({concat:tr,matrix:ke,typed:se}),VV=aWe({config:Ee,numeric:gl,typed:se}),UV=pYe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:In,subtractScalar:Pl,typed:se}),hht=cKe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,matrix:ke,typed:se}),Ut=rJe({DenseMatrix:Pt,SparseMatrix:Ei,addScalar:Ai,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),dht=oZe({BigNumber:Re,DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),pht=fpe({concat:tr,equalScalar:Lt,matrix:ke,typed:se}),mht=hpe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),ght=YGe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,matrix:ke,typed:se}),vht=wot({addScalar:Ai,combinations:wO,divideScalar:un,isInteger:os,isNegative:Qp,multiplyScalar:In,typed:se}),Kv=NYe({BigNumber:Re,DenseMatrix:Pt,Fraction:Xp,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,typed:se}),ime=FYe({concat:tr,matrix:ke,typed:se}),yht=Aot({addScalar:Ai,combinations:wO,isInteger:os,isNegative:Qp,isPositive:Gv,larger:ls,typed:se}),bht=gKe({matrix:ke,multiply:or,subtract:gn,typed:se}),ame=Vat({divideScalar:un,isZero:Ml,matrix:ke,multiply:or,subtractScalar:Pl,typed:se,unaryMinus:Mc}),wht=wpe({matrix:ke,number:Pc,subtract:gn,typed:se}),xht=fst({abs:ga,addScalar:Ai,deepEqual:nC,divideScalar:un,multiplyScalar:In,sqrt:xu,subtractScalar:Pl,typed:se}),iC=cYe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,divideScalar:un,equalScalar:Lt,matrix:ke,typed:se}),Aht=VYe({compareText:ime,isZero:Ml,typed:se}),sme=bQe({larger:ls,smaller:us}),_ht=iJe({abs:ga,addScalar:Ai,divideScalar:un,isPositive:Gv,multiplyScalar:In,smaller:us,sqrt:xu,typed:se}),ome=dQe({DenseMatrix:Pt,smaller:us}),Ba=gQe({ImmutableDenseMatrix:ome,getMatrixDataType:OV}),Eht=pst({abs:ga,add:Ut,addScalar:Ai,config:Ee,divideScalar:un,equalScalar:Lt,flatten:Hv,isNumeric:Wv,isZero:Ml,matrix:ke,multiply:or,multiplyScalar:In,smaller:us,subtract:gn,typed:se}),Sht=OGe({BigNumber:Re,add:Ut,config:Ee,equal:Ha,isInteger:os,mod:nme,smaller:us,typed:se,xgcd:Ype}),EO=ZYe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,config:Ee,matrix:ke,typed:se}),zV=rYe({Complex:_r,config:Ee,divideScalar:un,typeOf:AO,typed:se}),Cht=gYe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:In,subtractScalar:Pl,typed:se}),Tht=QHe({flatten:Hv,matrix:ke,size:_i,typed:se}),Dht=Npe({config:Ee,isNaN:Uf,numeric:gl,smaller:us,typed:se}),Nht=sYe({Complex:_r,config:Ee,divideScalar:un,typed:se}),SO=sQe({compare:Kv,isNaN:Uf,isNumeric:Wv,typed:se}),Pht=CYe({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se,zeros:fa}),lme=zet({SparseMatrix:Ei,abs:ga,add:Ut,divideScalar:un,larger:ls,largerEq:EO,multiply:or,subtract:gn,transpose:tC,typed:se}),ume=AQe({FibonacciHeap:sme,addScalar:Ai,equalScalar:Lt}),Oo=Epe({add:Ut,matrix:ke,typed:se,zeros:fa}),qV=Rpe({add:Ut,config:Ee,numeric:gl,typed:se}),Mht=fJe({add:Ut,matrix:ke,typed:se}),cme=yYe({DenseMatrix:Pt,divideScalar:un,equalScalar:Lt,matrix:ke,multiplyScalar:In,subtractScalar:Pl,typed:se}),Iht=Hot({Complex:_r,add:Ut,multiply:or,number:Pc,typed:se}),HV=SWe({DenseMatrix:Pt,config:Ee,equalScalar:Lt,matrix:ke,round:Jw,typed:se,zeros:fa}),Ic=OYe({compare:Kv,typed:se}),Oht=Fpe({add:Ut,typed:se,unaryPlus:VV}),fme=kWe({Complex:_r,DenseMatrix:Pt,ceil:HV,equalScalar:Lt,floor:tme,matrix:ke,typed:se,zeros:fa}),hme=dJe({Index:Ba,typed:se}),Xv=zat({abs:ga,addScalar:Ai,det:ame,divideScalar:un,identity:Zp,matrix:ke,multiply:or,typed:se,unaryMinus:Mc}),kht=iYe({Complex:_r,config:Ee,divideScalar:un,log:zV,typed:se}),dme=get({DenseMatrix:Pt,Spa:ume,SparseMatrix:Ei,abs:ga,addScalar:Ai,divideScalar:un,equalScalar:Lt,larger:ls,matrix:ke,multiplyScalar:In,subtractScalar:Pl,typed:se,unaryMinus:Mc}),Rht=Hat({Complex:_r,add:Ut,ctranspose:LV,deepEqual:nC,divideScalar:un,dot:_O,dotDivide:iC,equal:Ha,inv:Xv,matrix:ke,multiply:or,typed:se}),Au=QXe({Complex:_r,config:Ee,fraction:rC,identity:Zp,inv:Xv,matrix:ke,multiply:or,number:Pc,typed:se}),Fht=FZe({DenseMatrix:Pt,Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),Lht=jZe({DenseMatrix:Pt,Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),Bht=qZe({Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),$ht=KZe({Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),xw=WYe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,config:Ee,matrix:ke,typed:se}),jht=lQe({compare:Kv,compareNatural:Ic,matrix:ke,typed:se}),Vht=est({abs:ga,add:Ut,identity:Zp,inv:Xv,map:Yp,max:$V,multiply:or,size:_i,sqrt:xu,subtract:gn,typed:se}),Uht=nQe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,config:Ee,equalScalar:Lt,matrix:ke,typed:se}),zht=Tpe({concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),mi=ust({divideScalar:un,equalScalar:Lt,inv:Xv,matrix:ke,multiply:or,typed:se}),qht=Zat({abs:ga,add:Ut,identity:Zp,inv:Xv,multiply:or,typed:se}),pme=uXe({addScalar:Ai,ceil:HV,conj:qv,divideScalar:un,dotDivide:iC,exp:Kpe,i:zpe,log2:RV,matrix:ke,multiplyScalar:In,pow:Au,tau:Hpe,typed:se}),Hht=Got({Complex:_r,add:Ut,divide:mi,matrix:ke,multiply:or,typed:se}),WV=kst({BigNumber:Re,Complex:_r,config:Ee,multiplyScalar:In,pow:Au,typed:se}),Wht=fXe({conj:qv,dotDivide:iC,fft:pme,typed:se}),Ght=jst({divide:mi,dotDivide:iC,isNumeric:Wv,log:zV,map:Yp,matrix:ke,multiply:or,sum:qV,typed:se}),mme=Het({DenseMatrix:Pt,lsolve:rme,lup:dme,matrix:ke,slu:lme,typed:se,usolve:UV}),gme=Lpe({add:Ut,divide:mi,typed:se}),vme=bst({add:Ut,compare:Kv,divide:mi,partitionSelect:SO,typed:se}),Kht=Get({add:Ut,cbrt:eme,divide:mi,equalScalar:Lt,im:kV,isZero:Ml,multiply:or,re:FV,sqrt:xu,subtract:gn,typeOf:AO,typed:se,unaryMinus:Mc}),Xht=$pe({bignumber:Vs,add:Ut,compare:Kv,divide:mi,isInteger:os,larger:ls,mapSlices:n_,multiply:or,partitionSelect:SO,smaller:us,smallerEq:xw,subtract:gn,typed:se}),Aw=Ape({bignumber:Vs,matrix:ke,add:Ut,config:Ee,equal:Ha,isPositive:Gv,isZero:Ml,larger:ls,largerEq:EO,smaller:us,smallerEq:xw,typed:se}),Yht=_pe({Index:Ba,matrix:ke,range:Aw,typed:se}),yme=BZe({DenseMatrix:Pt,Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),Qht=WZe({Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),bme=ZZe({Index:Ba,concat:tr,setDifference:yme,size:_i,subset:Oo,typed:se}),Zht=vXe({abs:ga,add:Ut,bignumber:Vs,divide:mi,isNegative:Qp,isPositive:Gv,larger:ls,map:Yp,matrix:ke,max:$V,multiply:or,smaller:us,subtract:gn,typed:se,unaryMinus:Mc}),gt=NQe({BigNumber:Re,Complex:_r,Fraction:Xp,abs:ga,addScalar:Ai,config:Ee,divideScalar:un,equal:Ha,fix:fme,format:JS,isNumeric:Wv,multiplyScalar:In,number:Pc,pow:Au,round:Jw,subtractScalar:Pl}),Jht=Elt({BigNumber:Re,Unit:gt,config:Ee}),edt=Klt({BigNumber:Re,Unit:gt,config:Ee}),tdt=Dlt({BigNumber:Re,Unit:gt,config:Ee}),rdt=Ylt({BigNumber:Re,Unit:gt,config:Ee}),wme=gpe({Index:Ba,matrix:ke,range:Aw,typed:se}),ndt=Nlt({BigNumber:Re,Unit:gt,config:Ee}),idt=Slt({BigNumber:Re,Unit:gt,config:Ee}),adt=RQe({Unit:gt,typed:se}),sdt=Vlt({BigNumber:Re,Unit:gt,config:Ee}),xme=Yat({abs:ga,add:Ut,addScalar:Ai,atan:Gpe,bignumber:Vs,column:wme,complex:ov,config:Ee,cos:IV,diag:Qpe,divideScalar:un,dot:_O,equal:Ha,flatten:Hv,im:kV,inv:Xv,larger:ls,matrix:ke,matrixFromColumns:BV,multiply:or,multiplyScalar:In,number:Pc,qr:jV,re:FV,reshape:Jpe,sin:xO,size:_i,smaller:us,sqrt:xu,subtract:gn,typed:se,usolve:UV,usolveAll:cme}),odt=Flt({BigNumber:Re,Unit:gt,config:Ee}),aC=Bst({gamma:WV,typed:se}),ldt=Llt({BigNumber:Re,Unit:gt,config:Ee}),udt=eut({BigNumber:Re,Unit:gt,config:Ee}),cdt=uut({BigNumber:Re,Unit:gt,config:Ee}),fdt=Olt({BigNumber:Re,Unit:gt,config:Ee}),hdt=Jlt({BigNumber:Re,Unit:gt,config:Ee}),ddt=xst({abs:ga,map:Yp,median:vme,subtract:gn,typed:se}),pdt=Mlt({BigNumber:Re,Unit:gt,config:Ee}),mdt=out({BigNumber:Re,Unit:gt,config:Ee}),gdt=tut({BigNumber:Re,Unit:gt,config:Ee}),vdt=Ust({add:Ut,divide:mi,factorial:aC,isInteger:os,isPositive:Gv,multiply:or,typed:se}),GV=sJe({abs:ga,add:Ut,conj:qv,ctranspose:LV,eigs:xme,equalScalar:Lt,larger:ls,matrix:ke,multiply:or,pow:Au,smaller:us,sqrt:xu,typed:se}),ydt=qst({factorial:aC,typed:se}),bdt=wlt({BigNumber:Re,Unit:gt,config:Ee}),wdt=fut({BigNumber:Re,Unit:gt,config:Ee}),xdt=hut({BigNumber:Re,Unit:gt,config:Ee}),Adt=xlt({BigNumber:Re,Unit:gt,config:Ee}),Ame=WKe({BigNumber:Re,DenseMatrix:Pt,SparseMatrix:Ei,addScalar:Ai,config:Ee,cos:IV,matrix:ke,multiplyScalar:In,norm:GV,sin:xO,typed:se,unaryMinus:Mc}),_dt=qlt({BigNumber:Re,Unit:gt,config:Ee}),Edt=iut({BigNumber:Re,Unit:gt,config:Ee}),Sdt=YZe({compareNatural:Ic,typed:se}),Cdt=ylt({BigNumber:Re,Unit:gt,config:Ee}),Tdt=aut({BigNumber:Re,Unit:gt,config:Ee}),Ddt=Hlt({BigNumber:Re,Unit:gt,config:Ee}),KV=Bpe({add:Ut,divide:mi,isNaN:Uf,mapSlices:n_,multiply:or,subtract:gn,typed:se}),Ndt=SXe({BigNumber:Re,Complex:_r,add:Ut,config:Ee,divide:mi,equal:Ha,factorial:aC,gamma:WV,isBounded:eC,isNegative:Qp,multiply:or,pi:C4,pow:Au,sin:xO,smallerEq:xw,subtract:gn,typed:se}),Pdt=Xlt({BigNumber:Re,Unit:gt,config:Ee}),Mdt=klt({BigNumber:Re,Unit:gt,config:Ee}),Idt=Cst({add:Ut,divide:mi,matrix:ke,mean:gme,multiply:or,pow:Au,sqrt:xu,subtract:gn,sum:qV,typed:se}),Odt=lYe({DenseMatrix:Pt,SparseMatrix:Ei,concat:tr,equalScalar:Lt,matrix:ke,pow:Au,typed:se}),kdt=Tlt({BigNumber:Re,Unit:gt,config:Ee}),Rdt=Qlt({BigNumber:Re,Unit:gt,config:Ee}),Fdt=$lt({BigNumber:Re,Unit:gt,config:Ee}),Ldt=Plt({BigNumber:Re,Unit:gt,config:Ee}),Bdt=Alt({BigNumber:Re,Unit:gt,config:Ee}),$dt=lut({BigNumber:Re,Unit:gt,config:Ee}),jdt=Ult({BigNumber:Re,Unit:gt,config:Ee}),Vdt=dut({BigNumber:Re,Unit:gt,config:Ee}),Udt=put({BigNumber:Re,Unit:gt,config:Ee}),zdt=zlt({BigNumber:Re,Unit:gt,config:Ee}),_me=UZe({DenseMatrix:Pt,Index:Ba,compareNatural:Ic,size:_i,subset:Oo,typed:se}),qdt=jpe({map:Yp,sqrt:xu,typed:se,variance:KV}),Eme=got({bignumber:Vs,addScalar:Ai,combinations:wO,divideScalar:un,factorial:aC,isInteger:os,isNegative:Qp,larger:ls,multiplyScalar:In,number:Pc,pow:Au,subtractScalar:Pl,typed:se}),Hdt=MQe({Unit:gt,typed:se}),Wdt=yot({addScalar:Ai,isInteger:os,isNegative:Qp,stirlingS2:Eme,typed:se}),Gdt=_lt({BigNumber:Re,Unit:gt,config:Ee}),Kdt=Zlt({BigNumber:Re,Unit:gt,config:Ee}),Xdt=Ilt({BigNumber:Re,Unit:gt,config:Ee}),Ydt=cut({BigNumber:Re,Unit:gt,config:Ee}),Qdt=qKe({multiply:or,rotationMatrix:Ame,typed:se}),Zdt=eJe({Index:Ba,concat:tr,setIntersect:_me,setSymDifference:bme,size:_i,subset:Oo,typed:se}),Jdt=sut({BigNumber:Re,Unit:gt,config:Ee}),ept=Rlt({BigNumber:Re,Unit:gt,config:Ee}),tpt=rut({BigNumber:Re,Unit:gt,config:Ee}),Sme=ist({identity:Zp,matrix:ke,multiply:or,norm:GV,qr:jV,subtract:gn,typed:se}),rpt=Clt({BigNumber:Re,Unit:gt,config:Ee}),npt=blt({BigNumber:Re,Unit:gt,config:Ee}),ipt=jlt({BigNumber:Re,Unit:gt,config:Ee}),Cme=rst({abs:ga,add:Ut,concat:tr,identity:Zp,index:hme,lusolve:mme,matrix:ke,matrixFromColumns:BV,multiply:or,range:Aw,schur:Sme,subset:Oo,subtract:gn,transpose:tC,typed:se}),apt=sst({matrix:ke,multiply:or,sylvester:Cme,transpose:tC,typed:se}),e1={},sC={},Tme={},Wa=gJe({mathWithTransform:sC}),t1=UJe({Node:Wa}),Eh=qJe({Node:Wa}),Yv=WJe({Node:Wa}),Dme=YJe({Node:Wa}),r1=wJe({Node:Wa}),Nme=CJe({Node:Wa,ResultSet:qpe}),Pme=DJe({Node:Wa}),Mme=KJe({Node:Wa}),spt=Yot({classes:Tme}),XV=Jet({math:e1,typed:se}),Ime=BJe({Node:Wa,typed:se}),opt=$at({Chain:XV,typed:se}),Jp=FJe({Node:Wa,isBounded:eC}),n1=jJe({Node:Wa,size:_i}),i1=yJe({Node:Wa,subset:Oo}),Ome=EJe({matrix:ke,Node:Wa,subset:Oo}),em=JJe({Unit:gt,Node:Wa,math:e1}),tm=tet({Node:Wa,SymbolNode:em,math:e1}),_u=net({AccessorNode:i1,ArrayNode:r1,AssignmentNode:Ome,BlockNode:Nme,ConditionalNode:Pme,ConstantNode:Jp,FunctionAssignmentNode:Ime,FunctionNode:tm,IndexNode:n1,ObjectNode:t1,OperatorNode:Eh,ParenthesisNode:Yv,RangeNode:Mme,RelationalNode:Dme,SymbolNode:em,config:Ee,numeric:gl,typed:se}),kme=Lot({ConstantNode:Jp,FunctionNode:tm,OperatorNode:Eh,ParenthesisNode:Yv,parse:_u,typed:se}),YV=Iot({bignumber:Vs,fraction:rC,AccessorNode:i1,ArrayNode:r1,ConstantNode:Jp,FunctionNode:tm,IndexNode:n1,ObjectNode:t1,OperatorNode:Eh,SymbolNode:em,config:Ee,isBounded:eC,mathWithTransform:sC,matrix:ke,typed:se}),lpt=aet({parse:_u,typed:se}),upt=Eot({parse:_u,typed:se}),QV=kot({AccessorNode:i1,ArrayNode:r1,ConstantNode:Jp,FunctionNode:tm,IndexNode:n1,ObjectNode:t1,OperatorNode:Eh,ParenthesisNode:Yv,SymbolNode:em,add:Ut,divide:mi,equal:Ha,isZero:Ml,multiply:or,parse:_u,pow:Au,subtract:gn,typed:se}),oC=oet({parse:_u,typed:se}),Rme=Yet({evaluate:oC}),Fme=fet({evaluate:oC,parse:_u}),cpt=pet({Parser:Fme,typed:se}),CO=Not({AccessorNode:i1,ArrayNode:r1,ConstantNode:Jp,FunctionNode:tm,IndexNode:n1,ObjectNode:t1,OperatorNode:Eh,ParenthesisNode:Yv,SymbolNode:em,equal:Ha,parse:_u,replacer:Wpe,resolve:kme,simplifyConstant:YV,simplifyCore:QV,typed:se}),fpt=$ot({OperatorNode:Eh,parse:_u,simplify:CO,typed:se}),Lme=Vot({ConstantNode:Jp,FunctionNode:tm,OperatorNode:Eh,ParenthesisNode:Yv,SymbolNode:em,config:Ee,equal:Ha,isZero:Ml,numeric:gl,parse:_u,simplify:CO,typed:se}),hpt=Lat({Help:Rme,mathWithTransform:sC,typed:se}),dpt=zot({bignumber:Vs,fraction:rC,AccessorNode:i1,ArrayNode:r1,ConstantNode:Jp,FunctionNode:tm,IndexNode:n1,ObjectNode:t1,OperatorNode:Eh,ParenthesisNode:Yv,SymbolNode:em,add:Ut,config:Ee,divide:mi,equal:Ha,isZero:Ml,mathWithTransform:sC,matrix:ke,multiply:or,parse:_u,pow:Au,simplify:CO,simplifyConstant:YV,simplifyCore:QV,subtract:gn,typed:se});jn(e1,{e:rZ,false:Fct,fineStructure:Lct,i:zpe,Infinity:Bct,LN10:$ct,LOG10E:jct,NaN:Vct,null:Uct,phi:zct,SQRT1_2:Hct,sackurTetrode:Wct,tau:Hpe,true:Gct,E:rZ,version:Kct,efimovFactor:Xct,LN2:Yct,pi:C4,replacer:Wpe,reviver:spt,SQRT2:Qct,typed:se,PI:C4,weakMixingAngle:Zct,abs:ga,acos:Jct,acot:eft,acsc:tft,addScalar:Ai,arg:rft,asech:nft,asinh:ift,atan:Gpe,atanh:aft,bigint:sft,bitNot:oft,boolean:lft,clone:uft,combinations:wO,complex:ov,conj:qv,cos:IV,cot:cft,csc:fft,cube:hft,equalScalar:Lt,erf:dft,exp:Kpe,expm1:pft,filter:mft,flatten:Hv,forEach:gft,format:JS,getMatrixDataType:OV,hex:vft,im:kV,isBounded:eC,isNaN:Uf,isNumeric:Wv,isPrime:yft,LOG2E:bft,lgamma:wft,log10:xft,log2:RV,map:Yp,mode:Aft,multiplyScalar:In,not:IP,number:Pc,oct:_ft,pickRandom:Eft,print:Sft,random:Cft,re:FV,sec:Tft,sign:Xpe,sin:xO,size:_i,splitUnit:Dft,square:Nft,string:Pft,subtractScalar:Pl,tan:Mft,toBest:Ift,typeOf:AO,acosh:Oft,acsch:kft,asec:Rft,bignumber:Vs,chain:opt,combinationsWithRep:Fft,cosh:Lft,csch:Bft,dot:_O,hasNumericValue:$ft,isFinite:jft,isNegative:Qp,isZero:Ml,matrix:ke,matrixFromFunction:Vft,multiply:or,ones:Uft,randomInt:zft,resize:qft,sech:Hft,sinh:Wft,sparse:Gft,sqrt:xu,squeeze:Kft,tanh:Xft,transpose:tC,xgcd:Ype,zeros:fa,acoth:Yft,asin:Qft,bin:Zft,coth:Jft,ctranspose:LV,diag:Qpe,equal:Ha,fraction:rC,identity:Zp,isInteger:os,kron:eht,mapSlices:n_,matrixFromColumns:BV,numeric:gl,prod:Zpe,reshape:Jpe,round:Jw,unaryMinus:Mc,bernoulli:tht,cbrt:eme,concat:tr,count:rht,deepEqual:nC,divideScalar:un,dotMultiply:nht,floor:tme,gcd:iht,isPositive:Gv,larger:ls,lcm:aht,leftShift:sht,lsolve:rme,max:$V,mod:nme,nthRoot:oht,nullish:lht,or:uht,qr:jV,rightArithShift:cht,smaller:us,subtract:gn,to:fht,unaryPlus:VV,usolve:UV,xor:hht,add:Ut,atan2:dht,bitAnd:pht,bitOr:mht,bitXor:ght,catalan:vht,compare:Kv,compareText:ime,composition:yht,cross:bht,det:ame,diff:wht,distance:xht,dotDivide:iC,equalText:Aht,hypot:_ht,intersect:Eht,invmod:Sht,largerEq:EO,log:zV,lsolveAll:Cht,matrixFromRows:Tht,min:Dht,nthRoots:Nht,partitionSelect:SO,rightLogShift:Pht,slu:lme,subset:Oo,sum:qV,trace:Mht,usolveAll:cme,zpk2tf:Iht,ceil:HV,compareNatural:Ic,cumsum:Oht,fix:fme,index:hme,inv:Xv,log1p:kht,lup:dme,pinv:Rht,pow:Au,setCartesian:Fht,setDistinct:Lht,setIsSubset:Bht,setPowerset:$ht,smallerEq:xw,sort:jht,sqrtm:Vht,unequal:Uht,and:zht,divide:mi,expm:qht,fft:pme,freqz:Hht,gamma:WV,ifft:Wht,kldivergence:Ght,lusolve:mme,mean:gme,median:vme,polynomialRoot:Kht,quantileSeq:Xht,range:Aw,row:Yht,setDifference:yme,setMultiplicity:Qht,setSymDifference:bme,solveODE:Zht,vacuumImpedance:Jht,atomicMass:edt,bohrMagneton:tdt,boltzmann:rdt,column:wme,conductanceQuantum:ndt,coulomb:idt,createUnit:adt,deuteronMass:sdt,eigs:xme,electronMass:odt,factorial:aC,fermiCoupling:ldt,gasConstant:udt,gravity:cdt,klitzing:fdt,loschmidt:hdt,mad:ddt,magneticFluxQuantum:pdt,molarMass:mdt,molarPlanckConstant:gdt,multinomial:vdt,norm:GV,permutations:ydt,planckConstant:bdt,planckMass:wdt,planckTime:xdt,reducedPlanckConstant:Adt,rotationMatrix:Ame,rydberg:_dt,secondRadiation:Edt,setSize:Sdt,speedOfLight:Cdt,stefanBoltzmann:Tdt,thomsonCrossSection:Ddt,variance:KV,zeta:Ndt,avogadro:Pdt,bohrRadius:Mdt,corr:Idt,dotPow:Odt,elementaryCharge:kdt,faraday:Rdt,hartreeEnergy:Fdt,inverseConductanceQuantum:Ldt,magneticConstant:Bdt,molarMassC12:$dt,neutronMass:jdt,parse:_u,planckCharge:Vdt,planckTemperature:Udt,quantumOfCirculation:zdt,resolve:kme,setIntersect:_me,simplifyConstant:YV,std:qdt,stirlingS2:Eme,unit:Hdt,bellNumbers:Wdt,compile:lpt,electricConstant:Gdt,firstRadiation:Kdt,leafCount:upt,nuclearMagneton:Xdt,planckLength:Ydt,rotate:Qdt,setUnion:Zdt,simplifyCore:QV,wienDisplacement:Jdt,classicalElectronRadius:ept,evaluate:oC,molarVolume:tpt,schur:Sme,coulombConstant:rpt,gravitationConstant:npt,parser:cpt,simplify:CO,symbolicEqual:fpt,derivative:Lme,protonMass:ipt,sylvester:Cme,help:hpt,rationalize:dpt,lyap:apt,config:Ee});jn(sC,e1,{map:Rut({typed:se}),filter:Cut({typed:se}),forEach:Nut({typed:se}),mapSlices:yut({isInteger:os,typed:se}),and:_ct({add:Ut,concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),cumsum:gct({add:Ut,typed:se,unaryPlus:VV}),nullish:Nct({deepEqual:nC,flatten:Hv,matrix:ke,size:_i,typed:se}),print:wct({add:Ut,matrix:ke,typed:se,zeros:fa}),bitAnd:Ict({add:Ut,concat:tr,equalScalar:Lt,matrix:ke,not:IP,typed:se,zeros:fa}),concat:ict({isInteger:os,matrix:ke,typed:se}),diff:sct({bignumber:Vs,matrix:ke,number:Pc,subtract:gn,typed:se}),max:jut({config:Ee,isNaN:Uf,larger:ls,numeric:gl,typed:se}),min:Wut({config:Ee,isNaN:Uf,numeric:gl,smaller:us,typed:se}),or:Cct({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),subset:tct({add:Ut,matrix:ke,typed:se,zeros:fa}),bitOr:Rct({DenseMatrix:Pt,concat:tr,equalScalar:Lt,matrix:ke,typed:se}),sum:fct({add:Ut,config:Ee,numeric:gl,typed:se}),variance:yct({add:Ut,divide:mi,isNaN:Uf,mapSlices:n_,multiply:or,subtract:gn,typed:se}),index:Iut({Index:Ba,getMatrixDataType:OV}),quantileSeq:pct({add:Ut,bignumber:Vs,compare:Kv,divide:mi,isInteger:os,larger:ls,mapSlices:n_,multiply:or,partitionSelect:SO,smaller:us,smallerEq:xw,subtract:gn,typed:se}),range:Xut({bignumber:Vs,matrix:ke,add:Ut,config:Ee,equal:Ha,isPositive:Gv,isZero:Ml,larger:ls,largerEq:EO,smaller:us,smallerEq:xw,typed:se}),column:xut({Index:Ba,matrix:ke,range:Aw,typed:se}),row:Zut({Index:Ba,matrix:ke,range:Aw,typed:se}),mean:zut({add:Ut,divide:mi,typed:se}),std:uct({map:Yp,sqrt:xu,typed:se,variance:KV})});jn(Tme,{BigNumber:Re,Complex:_r,Fraction:Xp,Matrix:bO,Node:Wa,ObjectNode:t1,OperatorNode:Eh,ParenthesisNode:Yv,Range:qct,RelationalNode:Dme,ResultSet:qpe,ArrayNode:r1,BlockNode:Nme,ConditionalNode:Pme,DenseMatrix:Pt,RangeNode:Mme,Chain:XV,FunctionAssignmentNode:Ime,SparseMatrix:Ei,ConstantNode:Jp,IndexNode:n1,FibonacciHeap:sme,ImmutableDenseMatrix:ome,Index:Ba,Spa:ume,AccessorNode:i1,AssignmentNode:Ome,Unit:gt,SymbolNode:em,FunctionNode:tm,Help:Rme,Parser:Fme});XV.createProxy(e1);const ppt=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["(",")","ANS","DEL"]],mpt=[["sin(","cos(","tan(","asin(","acos("],["log(","ln(","exp(","sqrt(","^"],["pi","e","i","abs(","pow("]],gpt=[{label:"det 2x2",snippet:"det([[3,-1],[2,5]])"},{label:"dot ",snippet:"dot([1,2,3],[4,5,6])"},{label:"cross ",snippet:"cross([1,0,0],[0,1,0])"},{label:"|z|",snippet:"abs(3 + 4i)"},{label:"exp(-jw t)",snippet:"exp(-i*2*pi*60*t)"},{label:"sqrt(3)",snippet:"sqrt(3)"}],vpt=[{id:"standard",label:" ",description:"  + ",badge:"Standard"},{id:"roots",label:" ",description:"  ",badge:" "},{id:"derivative",label:" ",description:"/ ",badge:""},{id:"integral",label:" ",description:"Simpson Rule",badge:""},{id:"guide",label:" ",description:"  & ",badge:""}],ypt=(t,e)=>t.reduce((r,n)=>Ut(or(r,e),n)),nZ=t=>{if(typeof t=="number")return t.toFixed(6).replace(/\.0+$/,"");const e=t.re||0,r=t.im||0,n=Math.abs(e)<1e-9?"0":e.toFixed(6).replace(/\.0+$/,""),i=Math.abs(r)<1e-9?"0":r.toFixed(6).replace(/\.0+$/,"");if(Math.abs(r)<1e-9)return n;const a=r>=0?"+":"-";return`${n} ${a} ${Math.abs(i)}i`},bpt=t=>{const e=t.map(o=>ov(o,0)),r=e[0];if(Ha(r,0))throw new Error("  0   .");const n=e.map(o=>mi(o,r)),i=n.length-1,a=1+Math.max(...n.slice(1).map(o=>ga(o))),s=Array.from({length:i},(o,l)=>ov({r:a,phi:2*Math.PI*l/i}));for(let o=0;o<80;o++){let l=0;for(let u=0;u<s.length;u++){let c=ypt(n,s[u]),f=ov(1,0);for(let d=0;d<s.length;d++)u!==d&&(f=or(f,gn(s[u],s[d])));const h=mi(c,f);s[u]=gn(s[u],h),l=Math.max(l,ga(h))}if(l<1e-9)break}return s},wpt=(t,e,r,n,i=600)=>{i%2!==0&&(i+=1);const a={},s=(n-r)/i;let o=0;for(let l=0;l<=i;l++){const u=r+l*s;a[e]=u;const c=oC(t,a);l===0||l===i?o+=c:l%2===0?o+=2*c:o+=4*c}return s/3*o};function xpt(){const{isDark:t}=Cl(),[e,r]=O.useState(""),[n,i]=O.useState(""),[a,s]=O.useState([]),[o,l]=O.useState("1,-3,2"),[u,c]=O.useState([]),[f,h]=O.useState(""),[d,p]=O.useState("x^3 + 2*x"),[m,v]=O.useState("x"),[y,w]=O.useState(""),[b,_]=O.useState("sin(x)"),[x,A]=O.useState("x"),[E,S]=O.useState({from:"0",to:"3.14159"}),[C,D]=O.useState(""),[N,P]=O.useState(""),[M,j]=O.useState("standard"),K=t?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900",k=t?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900",V=t?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white",q=L=>{if(L==="DEL"){r(ie=>ie.slice(0,-1));return}if(L==="="){H();return}if(L==="ANS"){a.length>0&&r(ie=>ie+a[a.length-1].result);return}r(ie=>ie+L)},H=()=>{if(e.trim())try{const L=e.replace(//g,"pi").replace(//g,"sqrt");let ie=oC(L);typeof ie=="number"?ie=ie.toPrecision(10).replace(/\.0+$/,""):AO(ie)==="Complex"&&(ie=nZ(ie)),i(String(ie)),s(X=>[...X.slice(-9),{expression:e,result:String(ie)}])}catch(L){i(`: ${L.message}`)}},ee=()=>{h("");try{const L=o.split(",").map(X=>X.trim()).filter(X=>X.length>0).map(X=>Number(X));if(L.length<2)throw new Error(" 2  . (: 1,-3,2)");if(L.some(X=>Number.isNaN(X)))throw new Error("   .");const ie=bpt(L);c(ie.map(X=>nZ(X)))}catch(L){h(L.message),c([])}},le=()=>{try{const L=Lme(d,m).toString();w(`d/d${m} = ${L}`)}catch(L){w(` : ${L.message}`)}},re=()=>{P("");try{const L=Number(E.from),ie=Number(E.to);if(Number.isNaN(L)||Number.isNaN(ie))throw new Error("  .");if(L===ie)throw new Error("  0.");const X=wpt(b,x,L,ie);D(` ${b} d${x} = ${Number(X).toPrecision(8)}`)}catch(L){P(L.message),D("")}};return I.jsxs("div",{className:"space-y-10",children:[I.jsxs(We.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[I.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),I.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"  ,   , /      ."}),I.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4 mt-6",children:[{label:" ",value:"  + "},{label:" ",value:" 10 Durand-Kerner"},{label:"/ ",value:"math.js  + Simpson"},{label:"  ",value:"i, det, dot/cross "}].map(L=>I.jsxs("div",{className:`p-4 rounded-2xl border text-sm ${t?"bg-gray-900/70 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[I.jsx("p",{className:"font-semibold text-xs uppercase tracking-wide text-blue-500",children:L.label}),I.jsx("p",{className:"mt-2 text-base font-medium",children:L.value})]},L.label))})]}),I.jsx("div",{className:"space-y-6",children:I.jsxs(We.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${K}`,children:[I.jsx("div",{className:"flex flex-wrap gap-3",children:vpt.map(L=>I.jsxs("button",{onClick:()=>j(L.id),className:`flex-1 min-w-[140px] p-4 rounded-2xl border text-left transition ${M===L.id?t?"bg-blue-900/40 border-blue-500 text-white":"bg-blue-50 border-blue-400 text-blue-900":t?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[I.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400",children:L.badge}),I.jsx("p",{className:"text-lg font-semibold mt-1",children:L.label}),I.jsx("p",{className:"text-sm mt-1 opacity-80",children:L.description})]},L.id))}),I.jsxs("div",{className:"mt-8",children:[M==="standard"&&I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-6 ${t?"bg-gradient-to-br from-gray-900 via-slate-900 to-gray-800":"bg-gradient-to-br from-white via-blue-50 to-blue-100 border border-blue-100"}`,children:[I.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-blue-300",children:"Expression"}),I.jsx("input",{className:`w-full bg-transparent text-right text-3xl font-semibold mt-3 focus:outline-none ${t?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,value:e,onChange:L=>r(L.target.value),placeholder:"  (: (3+4i)*(2-i) + sin(pi/3))"}),n&&I.jsxs("p",{className:`text-right text-lg font-mono mt-2 ${n.startsWith("")?"text-red-300":"text-emerald-300"}`,children:["= ",n]}),I.jsx("button",{onClick:H,className:`mt-4 px-4 py-2 rounded-full text-sm font-semibold ${V}`,children:" / ENTER"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("p",{className:`text-xs font-semibold tracking-wide ${t?"text-gray-400":"text-gray-500"}`,children:"   "}),I.jsx("div",{className:"flex flex-wrap gap-2",children:gpt.map(L=>I.jsx("button",{onClick:()=>q(L.snippet),className:`px-3 py-1.5 rounded-full text-xs font-medium border ${t?"border-gray-700 text-gray-200 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:L.label},L.label))})]}),I.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-3",children:[I.jsx("h3",{className:"text-lg font-semibold",children:" "}),I.jsx("span",{className:"text-xs text-blue-500",children:"   "})]}),I.jsx("div",{className:"grid grid-cols-4 gap-3",children:ppt.map((L,ie)=>I.jsx("div",{className:"contents",children:L.map(X=>I.jsx("button",{onClick:()=>q(X==="pi"?"":X),className:`py-3 rounded-xl font-semibold text-lg transition ${["/","*","-","+","=","ANS"].includes(X)?V:k}`,children:X},X))},`basic-${ie}`))})]}),I.jsxs("div",{className:`p-4 rounded-2xl border ${t?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-3",children:[I.jsx("h3",{className:"text-lg font-semibold",children:" "}),I.jsx("span",{className:"text-xs text-blue-500",children:"    "})]}),I.jsx("div",{className:"grid grid-cols-5 gap-3",children:mpt.map((L,ie)=>I.jsx("div",{className:"contents",children:L.map(X=>I.jsx("button",{onClick:()=>q(X==="pi"?"":X),className:`py-3 rounded-xl font-semibold text-sm transition ${V}`,children:X},X))},`sci-${ie}`))}),I.jsx("button",{onClick:H,className:`w-full mt-3 py-3 rounded-xl font-semibold text-lg ${V}`,children:" (=)"})]})]}),I.jsxs("div",{className:`p-5 rounded-2xl border ${t?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-2",children:[I.jsx("p",{className:"font-semibold",children:" 10 "}),I.jsx("button",{onClick:()=>s([]),className:`text-sm ${t?"text-red-300":"text-red-500"}`,children:" "})]}),I.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[a.length===0&&I.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.map((L,ie)=>I.jsxs("button",{onClick:()=>{r(L.expression),i(L.result)},className:`w-full text-left p-3 rounded-xl ${t?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[I.jsx("p",{className:"text-sm break-words",children:L.expression}),I.jsxs("p",{className:"text-sm font-semibold text-green-500",children:["= ",L.result]})]},`${L.expression}-${ie}`))]})]})]}),M==="roots"&&I.jsxs("div",{children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),I.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-300":"text-gray-600"}`,children:["   (: x - 3x + 2  ",I.jsx("span",{className:"font-mono",children:"1,-3,2"}),")"]}),I.jsx("input",{value:o,onChange:L=>l(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsx("button",{onClick:ee,className:`w-full py-3 rounded-xl font-semibold ${V}`,children:" "}),f&&I.jsx("p",{className:"text-sm text-red-400 mt-3",children:f}),u.length>0&&I.jsx("ul",{className:"mt-4 space-y-1 text-sm font-mono",children:u.map((L,ie)=>I.jsxs("li",{children:["x",ie+1," = ",L]},ie))})]}),M==="derivative"&&I.jsxs("div",{children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),I.jsx("input",{value:d,onChange:L=>p(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x) = "}),I.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[I.jsx("label",{className:"text-sm",children:""}),I.jsx("input",{value:m,onChange:L=>v(L.target.value),className:`w-20 text-center px-2 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsxs("button",{onClick:le,className:`flex-1 min-w-[140px] py-2 rounded-xl font-semibold ${V}`,children:["d/d",m]})]}),y&&I.jsx("p",{className:"text-sm font-mono text-green-400",children:y})]}),M==="integral"&&I.jsxs("div",{children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),I.jsx("input",{value:b,onChange:L=>_(L.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x)"}),I.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[I.jsx("label",{className:"text-sm",children:""}),I.jsx("input",{value:x,onChange:L=>A(L.target.value),className:`w-24 text-center px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),I.jsx("input",{value:E.from,onChange:L=>S(ie=>({...ie,from:L.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""}),I.jsx("input",{value:E.to,onChange:L=>S(ie=>({...ie,to:L.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""})]}),I.jsx("button",{onClick:re,className:`w-full py-3 rounded-xl font-semibold ${V}`,children:" "}),N&&I.jsx("p",{className:"text-sm text-red-400 mt-3",children:N}),C&&I.jsx("p",{className:"text-sm font-mono text-green-400 mt-3",children:C})]}),M==="guide"&&I.jsxs("div",{children:[I.jsx("h2",{className:"text-xl font-bold mb-3",children:"  "}),I.jsxs("ul",{className:`text-sm space-y-2 ${t?"text-gray-300":"text-gray-600"}`,children:[I.jsx("li",{children:"   (: (3+4i)*(2-i))"}),I.jsx("li",{children:"   ( 10, Durand-Kerner )"}),I.jsx("li",{children:"   (math.js )"}),I.jsx("li",{children:"   (Simpson rule)"}),I.jsx("li",{children:"    : , e, i, trig/log, pow"})]})]})]})]})})]})}const OP=t=>{const e=t.code||t.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||t.message||"  ."},Apt=async(t,e,r)=>{try{const n=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(t);if(n[i])throw new Error("  .");await Bse(p2,h6);let a=null,s=!1;try{a=(await Promise.race([y2e(p2,t,e),new Promise((u,c)=>setTimeout(()=>c(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",OP(l)),l.code==="auth/email-already-in-use")throw l;s=!0}const o={uid:(a==null?void 0:a.uid)||"local-"+Date.now(),email:t,password:btoa(e),username:r.username,affiliation:r.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:s||!a};return n[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(n)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(n){throw console.error(" :",n),new Error(OP(n))}},_pt=async(t,e)=>{try{await Bse(p2,h6);let r=null,n=!1;try{r=(await Promise.race([b2e(p2,t,e),new Promise((a,s)=>setTimeout(()=>s(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",OP(i));const a=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),s=btoa(t);if(a[s]){const o=a[s];if(btoa(e)===o.password)n=!0,r={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!r)throw new Error(" ");return{uid:r.uid,email:r.email,username:r.displayName||t.split("@")[0],isLocal:n}}catch(r){throw console.error(" :",r),new Error(OP(r))}},Ept=t=>{localStorage.setItem("currentUser",JSON.stringify(t)),localStorage.setItem("authToken",t.uid)};function Spt(){const t=Nw(),{isDark:e}=Cl(),[r,n]=O.useState({email:"",password:""}),[i,a]=O.useState(""),[s,o]=O.useState(!1),l="auto",u=f=>{const{name:h,value:d}=f.target;n(p=>({...p,[h]:d})),a("")},c=async f=>{f.preventDefault(),o(!0),a("");try{if(!r.email||!r.password){a("  ."),o(!1);return}if(!r.email.includes("@")){a("   ."),o(!1);return}let h=null;if(l==="auto"||l==="firebase")try{h=await _pt(r.email,r.password);const d={uid:h.uid,email:h.email,username:h.username,role:"user",authProvider:h.isLocal?"firebase-local":"firebase"};Ept(d),localStorage.setItem("user",JSON.stringify(d)),localStorage.setItem("authToken",h.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${h.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>t("/"),500);return}catch(d){console.warn("Firebase  :",d.message)}a(" :     .")}catch(h){console.error(" :",h),a("   .")}finally{o(!1)}};return I.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:I.jsxs(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[I.jsxs("div",{className:"text-center",children:[I.jsx(We.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),I.jsxs(We.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:r.email,onChange:u,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:r.password,onChange:u,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsx(We.button,{type:"submit",disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${s?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:s?" ...":""})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",I.jsx(Fr,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function Cpt(){const t=Nw(),{isDark:e}=Cl(),[r,n]=O.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,a]=O.useState({}),[s,o]=O.useState(!1),[l,u]=O.useState(""),c="auto",f=p=>{const{name:m,value:v,type:y,checked:w}=p.target;n(b=>({...b,[m]:y==="checkbox"?w:v})),i[m]&&a(b=>({...b,[m]:""}))},h=()=>{const p={};return r.username.trim()?r.username.length<3&&(p.username=" 3  ."):p.username=" .",r.email?r.email.includes("@")||(p.email="   ."):p.email=" .",r.password?r.password.length<8?p.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(r.password)||(p.password=" , ,   ."):p.password=" .",r.password!==r.confirmPassword&&(p.confirmPassword="  ."),r.agreeTerms||(p.agreeTerms=" ."),p},d=async p=>{p.preventDefault();const m=h();if(Object.keys(m).length>0){a(m);return}o(!0),u("");try{let v=!1,y=null;if(c==="auto"||c==="firebase")try{const w=await Apt(r.email,r.password,{username:r.username,affiliation:r.affiliation});console.log("  :",w.username),v=!0}catch(w){console.warn("Firebase  :",w.message),y=w.message}if(!v&&(c==="auto"||c==="local")){const w=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),b=btoa(r.email);if(w[b]){a({submit:"  ."}),o(!1);return}const _={uid:"local-"+Date.now(),email:r.email,password:btoa(r.password),username:r.username,affiliation:r.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};w[b]=_,localStorage.setItem("firebaseUsers",JSON.stringify(w)),console.log("    "),v=!0}v&&(u(" .   ..."),setTimeout(()=>{t("/login")},2e3))}catch(v){console.error(" :",v),a({submit:"   .  ."})}finally{o(!1)}};return I.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:I.jsxs(We.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[I.jsxs("div",{className:"text-center",children:[I.jsx(We.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),I.jsx(We.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&I.jsx(We.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),I.jsxs(We.form,{onSubmit:d,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:r.username,onChange:f,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:r.email,onChange:f,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:r.affiliation,onChange:f,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:r.password,onChange:f,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),I.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),I.jsx(We.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:f,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:r.agreeTerms,onChange:f,className:"h-4 w-4 rounded"}),I.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&I.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),I.jsx(We.button,{type:"submit",disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${s?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:s?" ...":""})]}),I.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",I.jsx(Fr,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const q1=({children:t})=>IF()?t:I.jsx(b0e,{to:"/login",replace:!0});function Tpt(){return I.jsx(O0e,{children:I.jsx(N0e,{basename:"/1201-project/",children:I.jsxs(A0e,{children:[I.jsx(Ki,{path:"/login",element:I.jsx(Spt,{})}),I.jsx(Ki,{path:"/signup",element:I.jsx(Cpt,{})}),I.jsxs(Ki,{element:I.jsx(j0e,{}),children:[I.jsx(Ki,{path:"/",element:I.jsx(wAe,{})}),I.jsx(Ki,{path:"/concepts",element:I.jsx(xAe,{})}),I.jsx(Ki,{path:"/concepts/:slug",element:I.jsx(_Ae,{})}),I.jsx(Ki,{path:"/papers",element:I.jsx(fMe,{})}),I.jsx(Ki,{path:"/visualizations",element:I.jsx(w9e,{})}),I.jsx(Ki,{path:"/calculator",element:I.jsx(xpt,{})}),I.jsx(Ki,{path:"/forum",element:I.jsx(q1,{children:I.jsx(hMe,{})})}),I.jsx(Ki,{path:"/forum/:postId",element:I.jsx(q1,{children:I.jsx(dMe,{})})}),I.jsx(Ki,{path:"/profile",element:I.jsx(q1,{children:I.jsx(gMe,{})})}),I.jsx(Ki,{path:"/bookmarks",element:I.jsx(q1,{children:I.jsx(vMe,{})})}),I.jsx(Ki,{path:"/notes",element:I.jsx(q1,{children:I.jsx(yMe,{})})}),I.jsx(Ki,{path:"/glossary",element:I.jsx(pMe,{})}),I.jsx(Ki,{path:"/references",element:I.jsx(mMe,{})})]})]})})})}FR.createRoot(document.getElementById("root")).render(I.jsx(mZ.StrictMode,{children:I.jsx(Tpt,{})}));
